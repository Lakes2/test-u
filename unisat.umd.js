(function(v,_){typeof exports=="object"&&typeof module<"u"?module.exports=_():typeof define=="function"&&define.amd?define(_):(v=typeof globalThis<"u"?globalThis:v||self,v.unisat=_())})(this,function(){"use strict";var Gt=Object.defineProperty;var zt=(v,_,x)=>_ in v?Gt(v,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):v[_]=x;var Et=(v,_,x)=>(zt(v,typeof _!="symbol"?_+"":_,x),x);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}function getAugmentedNamespace(v){if(v.__esModule)return v;var _=v.default;if(typeof _=="function"){var x=function E(){return this instanceof E?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};x.prototype=_.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(v).forEach(function(E){var A=Object.getOwnPropertyDescriptor(v,E);Object.defineProperty(x,E,A.get?A:{enumerable:!0,get:function(){return v[E]}})}),x}var dist$5={},bitcoinjsLib={},dist$4={},bufferPolyfill={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$2=0,len=code.length;i$2<len;++i$2)lookup[i$2]=code[i$2],revLookup[code.charCodeAt(i$2)]=i$2;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;function getLens(v){var _=v.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=v.indexOf("=");x===-1&&(x=_);var E=x===_?0:4-x%4;return[x,E]}function byteLength(v){var _=getLens(v),x=_[0],E=_[1];return(x+E)*3/4-E}function _byteLength(v,_,x){return(_+x)*3/4-x}function toByteArray(v){var _,x=getLens(v),E=x[0],A=x[1],P=new Arr(_byteLength(v,E,A)),T=0,O=A>0?E-4:E,k;for(k=0;k<O;k+=4)_=revLookup[v.charCodeAt(k)]<<18|revLookup[v.charCodeAt(k+1)]<<12|revLookup[v.charCodeAt(k+2)]<<6|revLookup[v.charCodeAt(k+3)],P[T++]=_>>16&255,P[T++]=_>>8&255,P[T++]=_&255;return A===2&&(_=revLookup[v.charCodeAt(k)]<<2|revLookup[v.charCodeAt(k+1)]>>4,P[T++]=_&255),A===1&&(_=revLookup[v.charCodeAt(k)]<<10|revLookup[v.charCodeAt(k+1)]<<4|revLookup[v.charCodeAt(k+2)]>>2,P[T++]=_>>8&255,P[T++]=_&255),P}function tripletToBase64(v){return lookup[v>>18&63]+lookup[v>>12&63]+lookup[v>>6&63]+lookup[v&63]}function encodeChunk(v,_,x){for(var E,A=[],P=_;P<x;P+=3)E=(v[P]<<16&16711680)+(v[P+1]<<8&65280)+(v[P+2]&255),A.push(tripletToBase64(E));return A.join("")}function fromByteArray(v){for(var _,x=v.length,E=x%3,A=[],P=16383,T=0,O=x-E;T<O;T+=P)A.push(encodeChunk(v,T,T+P>O?O:T+P));return E===1?(_=v[x-1],A.push(lookup[_>>2]+lookup[_<<4&63]+"==")):E===2&&(_=(v[x-2]<<8)+v[x-1],A.push(lookup[_>>10]+lookup[_>>4&63]+lookup[_<<2&63]+"=")),A.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(v,_,x,E,A){var P,T,O=A*8-E-1,k=(1<<O)-1,C=k>>1,U=-7,N=x?A-1:0,H=x?-1:1,D=v[_+N];for(N+=H,P=D&(1<<-U)-1,D>>=-U,U+=O;U>0;P=P*256+v[_+N],N+=H,U-=8);for(T=P&(1<<-U)-1,P>>=-U,U+=E;U>0;T=T*256+v[_+N],N+=H,U-=8);if(P===0)P=1-C;else{if(P===k)return T?NaN:(D?-1:1)*(1/0);T=T+Math.pow(2,E),P=P-C}return(D?-1:1)*T*Math.pow(2,P-E)},ieee754.write=function(v,_,x,E,A,P){var T,O,k,C=P*8-A-1,U=(1<<C)-1,N=U>>1,H=A===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=E?0:P-1,j=E?1:-1,V=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(O=isNaN(_)?1:0,T=U):(T=Math.floor(Math.log(_)/Math.LN2),_*(k=Math.pow(2,-T))<1&&(T--,k*=2),T+N>=1?_+=H/k:_+=H*Math.pow(2,1-N),_*k>=2&&(T++,k/=2),T+N>=U?(O=0,T=U):T+N>=1?(O=(_*k-1)*Math.pow(2,A),T=T+N):(O=_*Math.pow(2,N-1)*Math.pow(2,A),T=0));A>=8;v[x+D]=O&255,D+=j,O/=256,A-=8);for(T=T<<A|O,C+=A;C>0;v[x+D]=T&255,D+=j,T/=256,C-=8);v[x+D-j]|=V*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(v){const _=base64Js,x=ieee754,E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;v.Buffer=O,v.SlowBuffer=ee,v.INSPECT_MAX_BYTES=50;const A=2147483647;v.kMaxLength=A,O.TYPED_ARRAY_SUPPORT=P(),!O.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{const ve=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(ve,be),ve.foo()===42}catch{return!1}}Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}});function T(ve){if(ve>A)throw new RangeError('The value "'+ve+'" is invalid for option "size"');const be=new Uint8Array(ve);return Object.setPrototypeOf(be,O.prototype),be}function O(ve,be,ge){if(typeof ve=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(ve)}return k(ve,be,ge)}O.poolSize=8192;function k(ve,be,ge){if(typeof ve=="string")return H(ve,be);if(ArrayBuffer.isView(ve))return j(ve);if(ve==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ve);if(We(ve,ArrayBuffer)||ve&&We(ve.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(We(ve,SharedArrayBuffer)||ve&&We(ve.buffer,SharedArrayBuffer)))return V(ve,be,ge);if(typeof ve=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=ve.valueOf&&ve.valueOf();if(me!=null&&me!==ve)return O.from(me,be,ge);const _e=X(ve);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ve[Symbol.toPrimitive]=="function")return O.from(ve[Symbol.toPrimitive]("string"),be,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ve)}O.from=function(ve,be,ge){return k(ve,be,ge)},Object.setPrototypeOf(O.prototype,Uint8Array.prototype),Object.setPrototypeOf(O,Uint8Array);function C(ve){if(typeof ve!="number")throw new TypeError('"size" argument must be of type number');if(ve<0)throw new RangeError('The value "'+ve+'" is invalid for option "size"')}function U(ve,be,ge){return C(ve),ve<=0?T(ve):be!==void 0?typeof ge=="string"?T(ve).fill(be,ge):T(ve).fill(be):T(ve)}O.alloc=function(ve,be,ge){return U(ve,be,ge)};function N(ve){return C(ve),T(ve<0?0:re(ve)|0)}O.allocUnsafe=function(ve){return N(ve)},O.allocUnsafeSlow=function(ve){return N(ve)};function H(ve,be){if((typeof be!="string"||be==="")&&(be="utf8"),!O.isEncoding(be))throw new TypeError("Unknown encoding: "+be);const ge=fe(ve,be)|0;let me=T(ge);const _e=me.write(ve,be);return _e!==ge&&(me=me.slice(0,_e)),me}function D(ve){const be=ve.length<0?0:re(ve.length)|0,ge=T(be);for(let me=0;me<be;me+=1)ge[me]=ve[me]&255;return ge}function j(ve){if(We(ve,Uint8Array)){const be=new Uint8Array(ve);return V(be.buffer,be.byteOffset,be.byteLength)}return D(ve)}function V(ve,be,ge){if(be<0||ve.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<be+(ge||0))throw new RangeError('"length" is outside of buffer bounds');let me;return be===void 0&&ge===void 0?me=new Uint8Array(ve):ge===void 0?me=new Uint8Array(ve,be):me=new Uint8Array(ve,be,ge),Object.setPrototypeOf(me,O.prototype),me}function X(ve){if(O.isBuffer(ve)){const be=re(ve.length)|0,ge=T(be);return ge.length===0||ve.copy(ge,0,0,be),ge}if(ve.length!==void 0)return typeof ve.length!="number"||Ze(ve.length)?T(0):D(ve);if(ve.type==="Buffer"&&Array.isArray(ve.data))return D(ve.data)}function re(ve){if(ve>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return ve|0}function ee(ve){return+ve!=ve&&(ve=0),O.alloc(+ve)}O.isBuffer=function(be){return be!=null&&be._isBuffer===!0&&be!==O.prototype},O.compare=function(be,ge){if(We(be,Uint8Array)&&(be=O.from(be,be.offset,be.byteLength)),We(ge,Uint8Array)&&(ge=O.from(ge,ge.offset,ge.byteLength)),!O.isBuffer(be)||!O.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(be===ge)return 0;let me=be.length,_e=ge.length;for(let Ae=0,Oe=Math.min(me,_e);Ae<Oe;++Ae)if(be[Ae]!==ge[Ae]){me=be[Ae],_e=ge[Ae];break}return me<_e?-1:_e<me?1:0},O.isEncoding=function(be){switch(String(be).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(be,ge){if(!Array.isArray(be))throw new TypeError('"list" argument must be an Array of Buffers');if(be.length===0)return O.alloc(0);let me;if(ge===void 0)for(ge=0,me=0;me<be.length;++me)ge+=be[me].length;const _e=O.allocUnsafe(ge);let Ae=0;for(me=0;me<be.length;++me){let Oe=be[me];if(We(Oe,Uint8Array))Ae+Oe.length>_e.length?(O.isBuffer(Oe)||(Oe=O.from(Oe)),Oe.copy(_e,Ae)):Uint8Array.prototype.set.call(_e,Oe,Ae);else if(O.isBuffer(Oe))Oe.copy(_e,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=Oe.length}return _e};function fe(ve,be){if(O.isBuffer(ve))return ve.length;if(ArrayBuffer.isView(ve)||We(ve,ArrayBuffer))return ve.byteLength;if(typeof ve!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ve);const ge=ve.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&ge===0)return 0;let _e=!1;for(;;)switch(be){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return Je(ve).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge*2;case"hex":return ge>>>1;case"base64":return ot(ve).length;default:if(_e)return me?-1:Je(ve).length;be=(""+be).toLowerCase(),_e=!0}}O.byteLength=fe;function le(ve,be,ge){let me=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((ge===void 0||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0,be>>>=0,ge<=be))return"";for(ve||(ve="utf8");;)switch(ve){case"hex":return ye(this,be,ge);case"utf8":case"utf-8":return F(this,be,ge);case"ascii":return Q(this,be,ge);case"latin1":case"binary":return de(this,be,ge);case"base64":return q(this,be,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,be,ge);default:if(me)throw new TypeError("Unknown encoding: "+ve);ve=(ve+"").toLowerCase(),me=!0}}O.prototype._isBuffer=!0;function pe(ve,be,ge){const me=ve[be];ve[be]=ve[ge],ve[ge]=me}O.prototype.swap16=function(){const be=this.length;if(be%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ge=0;ge<be;ge+=2)pe(this,ge,ge+1);return this},O.prototype.swap32=function(){const be=this.length;if(be%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ge=0;ge<be;ge+=4)pe(this,ge,ge+3),pe(this,ge+1,ge+2);return this},O.prototype.swap64=function(){const be=this.length;if(be%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ge=0;ge<be;ge+=8)pe(this,ge,ge+7),pe(this,ge+1,ge+6),pe(this,ge+2,ge+5),pe(this,ge+3,ge+4);return this},O.prototype.toString=function(){const be=this.length;return be===0?"":arguments.length===0?F(this,0,be):le.apply(this,arguments)},O.prototype.toLocaleString=O.prototype.toString,O.prototype.equals=function(be){if(!O.isBuffer(be))throw new TypeError("Argument must be a Buffer");return this===be?!0:O.compare(this,be)===0},O.prototype.inspect=function(){let be="";const ge=v.INSPECT_MAX_BYTES;return be=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(be+=" ... "),"<Buffer "+be+">"},E&&(O.prototype[E]=O.prototype.inspect),O.prototype.compare=function(be,ge,me,_e,Ae){if(We(be,Uint8Array)&&(be=O.from(be,be.offset,be.byteLength)),!O.isBuffer(be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof be);if(ge===void 0&&(ge=0),me===void 0&&(me=be?be.length:0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=this.length),ge<0||me>be.length||_e<0||Ae>this.length)throw new RangeError("out of range index");if(_e>=Ae&&ge>=me)return 0;if(_e>=Ae)return-1;if(ge>=me)return 1;if(ge>>>=0,me>>>=0,_e>>>=0,Ae>>>=0,this===be)return 0;let Oe=Ae-_e,Le=me-ge;const je=Math.min(Oe,Le),qe=this.slice(_e,Ae),rt=be.slice(ge,me);for(let tt=0;tt<je;++tt)if(qe[tt]!==rt[tt]){Oe=qe[tt],Le=rt[tt];break}return Oe<Le?-1:Le<Oe?1:0};function ie(ve,be,ge,me,_e){if(ve.length===0)return-1;if(typeof ge=="string"?(me=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),ge=+ge,Ze(ge)&&(ge=_e?0:ve.length-1),ge<0&&(ge=ve.length+ge),ge>=ve.length){if(_e)return-1;ge=ve.length-1}else if(ge<0)if(_e)ge=0;else return-1;if(typeof be=="string"&&(be=O.from(be,me)),O.isBuffer(be))return be.length===0?-1:he(ve,be,ge,me,_e);if(typeof be=="number")return be=be&255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(ve,be,ge):Uint8Array.prototype.lastIndexOf.call(ve,be,ge):he(ve,[be],ge,me,_e);throw new TypeError("val must be string, number or Buffer")}function he(ve,be,ge,me,_e){let Ae=1,Oe=ve.length,Le=be.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ve.length<2||be.length<2)return-1;Ae=2,Oe/=2,Le/=2,ge/=2}function je(rt,tt){return Ae===1?rt[tt]:rt.readUInt16BE(tt*Ae)}let qe;if(_e){let rt=-1;for(qe=ge;qe<Oe;qe++)if(je(ve,qe)===je(be,rt===-1?0:qe-rt)){if(rt===-1&&(rt=qe),qe-rt+1===Le)return rt*Ae}else rt!==-1&&(qe-=qe-rt),rt=-1}else for(ge+Le>Oe&&(ge=Oe-Le),qe=ge;qe>=0;qe--){let rt=!0;for(let tt=0;tt<Le;tt++)if(je(ve,qe+tt)!==je(be,tt)){rt=!1;break}if(rt)return qe}return-1}O.prototype.includes=function(be,ge,me){return this.indexOf(be,ge,me)!==-1},O.prototype.indexOf=function(be,ge,me){return ie(this,be,ge,me,!0)},O.prototype.lastIndexOf=function(be,ge,me){return ie(this,be,ge,me,!1)};function ae(ve,be,ge,me){ge=Number(ge)||0;const _e=ve.length-ge;me?(me=Number(me),me>_e&&(me=_e)):me=_e;const Ae=be.length;me>Ae/2&&(me=Ae/2);let Oe;for(Oe=0;Oe<me;++Oe){const Le=parseInt(be.substr(Oe*2,2),16);if(Ze(Le))return Oe;ve[ge+Oe]=Le}return Oe}function te(ve,be,ge,me){return He(Je(be,ve.length-ge),ve,ge,me)}function ue(ve,be,ge,me){return He(et(be),ve,ge,me)}function ne(ve,be,ge,me){return He(ot(be),ve,ge,me)}function J(ve,be,ge,me){return He(Ge(be,ve.length-ge),ve,ge,me)}O.prototype.write=function(be,ge,me,_e){if(ge===void 0)_e="utf8",me=this.length,ge=0;else if(me===void 0&&typeof ge=="string")_e=ge,me=this.length,ge=0;else if(isFinite(ge))ge=ge>>>0,isFinite(me)?(me=me>>>0,_e===void 0&&(_e="utf8")):(_e=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-ge;if((me===void 0||me>Ae)&&(me=Ae),be.length>0&&(me<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let Oe=!1;for(;;)switch(_e){case"hex":return ae(this,be,ge,me);case"utf8":case"utf-8":return te(this,be,ge,me);case"ascii":case"latin1":case"binary":return ue(this,be,ge,me);case"base64":return ne(this,be,ge,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,be,ge,me);default:if(Oe)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Oe=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(ve,be,ge){return be===0&&ge===ve.length?_.fromByteArray(ve):_.fromByteArray(ve.slice(be,ge))}function F(ve,be,ge){ge=Math.min(ve.length,ge);const me=[];let _e=be;for(;_e<ge;){const Ae=ve[_e];let Oe=null,Le=Ae>239?4:Ae>223?3:Ae>191?2:1;if(_e+Le<=ge){let je,qe,rt,tt;switch(Le){case 1:Ae<128&&(Oe=Ae);break;case 2:je=ve[_e+1],(je&192)===128&&(tt=(Ae&31)<<6|je&63,tt>127&&(Oe=tt));break;case 3:je=ve[_e+1],qe=ve[_e+2],(je&192)===128&&(qe&192)===128&&(tt=(Ae&15)<<12|(je&63)<<6|qe&63,tt>2047&&(tt<55296||tt>57343)&&(Oe=tt));break;case 4:je=ve[_e+1],qe=ve[_e+2],rt=ve[_e+3],(je&192)===128&&(qe&192)===128&&(rt&192)===128&&(tt=(Ae&15)<<18|(je&63)<<12|(qe&63)<<6|rt&63,tt>65535&&tt<1114112&&(Oe=tt))}}Oe===null?(Oe=65533,Le=1):Oe>65535&&(Oe-=65536,me.push(Oe>>>10&1023|55296),Oe=56320|Oe&1023),me.push(Oe),_e+=Le}return Z(me)}const L=4096;function Z(ve){const be=ve.length;if(be<=L)return String.fromCharCode.apply(String,ve);let ge="",me=0;for(;me<be;)ge+=String.fromCharCode.apply(String,ve.slice(me,me+=L));return ge}function Q(ve,be,ge){let me="";ge=Math.min(ve.length,ge);for(let _e=be;_e<ge;++_e)me+=String.fromCharCode(ve[_e]&127);return me}function de(ve,be,ge){let me="";ge=Math.min(ve.length,ge);for(let _e=be;_e<ge;++_e)me+=String.fromCharCode(ve[_e]);return me}function ye(ve,be,ge){const me=ve.length;(!be||be<0)&&(be=0),(!ge||ge<0||ge>me)&&(ge=me);let _e="";for(let Ae=be;Ae<ge;++Ae)_e+=$e[ve[Ae]];return _e}function oe(ve,be,ge){const me=ve.slice(be,ge);let _e="";for(let Ae=0;Ae<me.length-1;Ae+=2)_e+=String.fromCharCode(me[Ae]+me[Ae+1]*256);return _e}O.prototype.slice=function(be,ge){const me=this.length;be=~~be,ge=ge===void 0?me:~~ge,be<0?(be+=me,be<0&&(be=0)):be>me&&(be=me),ge<0?(ge+=me,ge<0&&(ge=0)):ge>me&&(ge=me),ge<be&&(ge=be);const _e=this.subarray(be,ge);return Object.setPrototypeOf(_e,O.prototype),_e};function se(ve,be,ge){if(ve%1!==0||ve<0)throw new RangeError("offset is not uint");if(ve+be>ge)throw new RangeError("Trying to access beyond buffer length")}O.prototype.readUintLE=O.prototype.readUIntLE=function(be,ge,me){be=be>>>0,ge=ge>>>0,me||se(be,ge,this.length);let _e=this[be],Ae=1,Oe=0;for(;++Oe<ge&&(Ae*=256);)_e+=this[be+Oe]*Ae;return _e},O.prototype.readUintBE=O.prototype.readUIntBE=function(be,ge,me){be=be>>>0,ge=ge>>>0,me||se(be,ge,this.length);let _e=this[be+--ge],Ae=1;for(;ge>0&&(Ae*=256);)_e+=this[be+--ge]*Ae;return _e},O.prototype.readUint8=O.prototype.readUInt8=function(be,ge){return be=be>>>0,ge||se(be,1,this.length),this[be]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(be,ge){return be=be>>>0,ge||se(be,2,this.length),this[be]|this[be+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(be,ge){return be=be>>>0,ge||se(be,2,this.length),this[be]<<8|this[be+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+this[be+3]*16777216},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),this[be]*16777216+(this[be+1]<<16|this[be+2]<<8|this[be+3])},O.prototype.readBigUInt64LE=Te(function(be){be=be>>>0,Ue(be,"offset");const ge=this[be],me=this[be+7];(ge===void 0||me===void 0)&&Ke(be,this.length-8);const _e=ge+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24,Ae=this[++be]+this[++be]*2**8+this[++be]*2**16+me*2**24;return BigInt(_e)+(BigInt(Ae)<<BigInt(32))}),O.prototype.readBigUInt64BE=Te(function(be){be=be>>>0,Ue(be,"offset");const ge=this[be],me=this[be+7];(ge===void 0||me===void 0)&&Ke(be,this.length-8);const _e=ge*2**24+this[++be]*2**16+this[++be]*2**8+this[++be],Ae=this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+me;return(BigInt(_e)<<BigInt(32))+BigInt(Ae)}),O.prototype.readIntLE=function(be,ge,me){be=be>>>0,ge=ge>>>0,me||se(be,ge,this.length);let _e=this[be],Ae=1,Oe=0;for(;++Oe<ge&&(Ae*=256);)_e+=this[be+Oe]*Ae;return Ae*=128,_e>=Ae&&(_e-=Math.pow(2,8*ge)),_e},O.prototype.readIntBE=function(be,ge,me){be=be>>>0,ge=ge>>>0,me||se(be,ge,this.length);let _e=ge,Ae=1,Oe=this[be+--_e];for(;_e>0&&(Ae*=256);)Oe+=this[be+--_e]*Ae;return Ae*=128,Oe>=Ae&&(Oe-=Math.pow(2,8*ge)),Oe},O.prototype.readInt8=function(be,ge){return be=be>>>0,ge||se(be,1,this.length),this[be]&128?(255-this[be]+1)*-1:this[be]},O.prototype.readInt16LE=function(be,ge){be=be>>>0,ge||se(be,2,this.length);const me=this[be]|this[be+1]<<8;return me&32768?me|4294901760:me},O.prototype.readInt16BE=function(be,ge){be=be>>>0,ge||se(be,2,this.length);const me=this[be+1]|this[be]<<8;return me&32768?me|4294901760:me},O.prototype.readInt32LE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},O.prototype.readInt32BE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},O.prototype.readBigInt64LE=Te(function(be){be=be>>>0,Ue(be,"offset");const ge=this[be],me=this[be+7];(ge===void 0||me===void 0)&&Ke(be,this.length-8);const _e=this[be+4]+this[be+5]*2**8+this[be+6]*2**16+(me<<24);return(BigInt(_e)<<BigInt(32))+BigInt(ge+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24)}),O.prototype.readBigInt64BE=Te(function(be){be=be>>>0,Ue(be,"offset");const ge=this[be],me=this[be+7];(ge===void 0||me===void 0)&&Ke(be,this.length-8);const _e=(ge<<24)+this[++be]*2**16+this[++be]*2**8+this[++be];return(BigInt(_e)<<BigInt(32))+BigInt(this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+me)}),O.prototype.readFloatLE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),x.read(this,be,!0,23,4)},O.prototype.readFloatBE=function(be,ge){return be=be>>>0,ge||se(be,4,this.length),x.read(this,be,!1,23,4)},O.prototype.readDoubleLE=function(be,ge){return be=be>>>0,ge||se(be,8,this.length),x.read(this,be,!0,52,8)},O.prototype.readDoubleBE=function(be,ge){return be=be>>>0,ge||se(be,8,this.length),x.read(this,be,!1,52,8)};function Y(ve,be,ge,me,_e,Ae){if(!O.isBuffer(ve))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>_e||be<Ae)throw new RangeError('"value" argument is out of bounds');if(ge+me>ve.length)throw new RangeError("Index out of range")}O.prototype.writeUintLE=O.prototype.writeUIntLE=function(be,ge,me,_e){if(be=+be,ge=ge>>>0,me=me>>>0,!_e){const Le=Math.pow(2,8*me)-1;Y(this,be,ge,me,Le,0)}let Ae=1,Oe=0;for(this[ge]=be&255;++Oe<me&&(Ae*=256);)this[ge+Oe]=be/Ae&255;return ge+me},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(be,ge,me,_e){if(be=+be,ge=ge>>>0,me=me>>>0,!_e){const Le=Math.pow(2,8*me)-1;Y(this,be,ge,me,Le,0)}let Ae=me-1,Oe=1;for(this[ge+Ae]=be&255;--Ae>=0&&(Oe*=256);)this[ge+Ae]=be/Oe&255;return ge+me},O.prototype.writeUint8=O.prototype.writeUInt8=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,1,255,0),this[ge]=be&255,ge+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,2,65535,0),this[ge]=be&255,this[ge+1]=be>>>8,ge+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,2,65535,0),this[ge]=be>>>8,this[ge+1]=be&255,ge+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,4,4294967295,0),this[ge+3]=be>>>24,this[ge+2]=be>>>16,this[ge+1]=be>>>8,this[ge]=be&255,ge+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,4,4294967295,0),this[ge]=be>>>24,this[ge+1]=be>>>16,this[ge+2]=be>>>8,this[ge+3]=be&255,ge+4};function ce(ve,be,ge,me,_e){Ee(be,me,_e,ve,ge,7);let Ae=Number(be&BigInt(4294967295));ve[ge++]=Ae,Ae=Ae>>8,ve[ge++]=Ae,Ae=Ae>>8,ve[ge++]=Ae,Ae=Ae>>8,ve[ge++]=Ae;let Oe=Number(be>>BigInt(32)&BigInt(4294967295));return ve[ge++]=Oe,Oe=Oe>>8,ve[ge++]=Oe,Oe=Oe>>8,ve[ge++]=Oe,Oe=Oe>>8,ve[ge++]=Oe,ge}function we(ve,be,ge,me,_e){Ee(be,me,_e,ve,ge,7);let Ae=Number(be&BigInt(4294967295));ve[ge+7]=Ae,Ae=Ae>>8,ve[ge+6]=Ae,Ae=Ae>>8,ve[ge+5]=Ae,Ae=Ae>>8,ve[ge+4]=Ae;let Oe=Number(be>>BigInt(32)&BigInt(4294967295));return ve[ge+3]=Oe,Oe=Oe>>8,ve[ge+2]=Oe,Oe=Oe>>8,ve[ge+1]=Oe,Oe=Oe>>8,ve[ge]=Oe,ge+8}O.prototype.writeBigUInt64LE=Te(function(be,ge=0){return ce(this,be,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeBigUInt64BE=Te(function(be,ge=0){return we(this,be,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeIntLE=function(be,ge,me,_e){if(be=+be,ge=ge>>>0,!_e){const je=Math.pow(2,8*me-1);Y(this,be,ge,me,je-1,-je)}let Ae=0,Oe=1,Le=0;for(this[ge]=be&255;++Ae<me&&(Oe*=256);)be<0&&Le===0&&this[ge+Ae-1]!==0&&(Le=1),this[ge+Ae]=(be/Oe>>0)-Le&255;return ge+me},O.prototype.writeIntBE=function(be,ge,me,_e){if(be=+be,ge=ge>>>0,!_e){const je=Math.pow(2,8*me-1);Y(this,be,ge,me,je-1,-je)}let Ae=me-1,Oe=1,Le=0;for(this[ge+Ae]=be&255;--Ae>=0&&(Oe*=256);)be<0&&Le===0&&this[ge+Ae+1]!==0&&(Le=1),this[ge+Ae]=(be/Oe>>0)-Le&255;return ge+me},O.prototype.writeInt8=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,1,127,-128),be<0&&(be=255+be+1),this[ge]=be&255,ge+1},O.prototype.writeInt16LE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,2,32767,-32768),this[ge]=be&255,this[ge+1]=be>>>8,ge+2},O.prototype.writeInt16BE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,2,32767,-32768),this[ge]=be>>>8,this[ge+1]=be&255,ge+2},O.prototype.writeInt32LE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,4,2147483647,-2147483648),this[ge]=be&255,this[ge+1]=be>>>8,this[ge+2]=be>>>16,this[ge+3]=be>>>24,ge+4},O.prototype.writeInt32BE=function(be,ge,me){return be=+be,ge=ge>>>0,me||Y(this,be,ge,4,2147483647,-2147483648),be<0&&(be=4294967295+be+1),this[ge]=be>>>24,this[ge+1]=be>>>16,this[ge+2]=be>>>8,this[ge+3]=be&255,ge+4},O.prototype.writeBigInt64LE=Te(function(be,ge=0){return ce(this,be,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),O.prototype.writeBigInt64BE=Te(function(be,ge=0){return we(this,be,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(ve,be,ge,me,_e,Ae){if(ge+me>ve.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function Se(ve,be,ge,me,_e){return be=+be,ge=ge>>>0,_e||Pe(ve,be,ge,4),x.write(ve,be,ge,me,23,4),ge+4}O.prototype.writeFloatLE=function(be,ge,me){return Se(this,be,ge,!0,me)},O.prototype.writeFloatBE=function(be,ge,me){return Se(this,be,ge,!1,me)};function Be(ve,be,ge,me,_e){return be=+be,ge=ge>>>0,_e||Pe(ve,be,ge,8),x.write(ve,be,ge,me,52,8),ge+8}O.prototype.writeDoubleLE=function(be,ge,me){return Be(this,be,ge,!0,me)},O.prototype.writeDoubleBE=function(be,ge,me){return Be(this,be,ge,!1,me)},O.prototype.copy=function(be,ge,me,_e){if(!O.isBuffer(be))throw new TypeError("argument should be a Buffer");if(me||(me=0),!_e&&_e!==0&&(_e=this.length),ge>=be.length&&(ge=be.length),ge||(ge=0),_e>0&&_e<me&&(_e=me),_e===me||be.length===0||this.length===0)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),be.length-ge<_e-me&&(_e=be.length-ge+me);const Ae=_e-me;return this===be&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ge,me,_e):Uint8Array.prototype.set.call(be,this.subarray(me,_e),ge),Ae},O.prototype.fill=function(be,ge,me,_e){if(typeof be=="string"){if(typeof ge=="string"?(_e=ge,ge=0,me=this.length):typeof me=="string"&&(_e=me,me=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!O.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(be.length===1){const Oe=be.charCodeAt(0);(_e==="utf8"&&Oe<128||_e==="latin1")&&(be=Oe)}}else typeof be=="number"?be=be&255:typeof be=="boolean"&&(be=Number(be));if(ge<0||this.length<ge||this.length<me)throw new RangeError("Out of range index");if(me<=ge)return this;ge=ge>>>0,me=me===void 0?this.length:me>>>0,be||(be=0);let Ae;if(typeof be=="number")for(Ae=ge;Ae<me;++Ae)this[Ae]=be;else{const Oe=O.isBuffer(be)?be:O.from(be,_e),Le=Oe.length;if(Le===0)throw new TypeError('The value "'+be+'" is invalid for argument "value"');for(Ae=0;Ae<me-ge;++Ae)this[Ae+ge]=Oe[Ae%Le]}return this};const Ie={};function Re(ve,be,ge){Ie[ve]=class extends ge{constructor(){super(),Object.defineProperty(this,"message",{value:be.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ve}]`,this.stack,delete this.name}get code(){return ve}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${ve}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(ve){return ve?`${ve} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(ve,be){return`The "${ve}" argument must be of type number. Received type ${typeof be}`},TypeError),Re("ERR_OUT_OF_RANGE",function(ve,be,ge){let me=`The value of "${ve}" is out of range.`,_e=ge;return Number.isInteger(ge)&&Math.abs(ge)>2**32?_e=Me(String(ge)):typeof ge=="bigint"&&(_e=String(ge),(ge>BigInt(2)**BigInt(32)||ge<-(BigInt(2)**BigInt(32)))&&(_e=Me(_e)),_e+="n"),me+=` It must be ${be}. Received ${_e}`,me},RangeError);function Me(ve){let be="",ge=ve.length;const me=ve[0]==="-"?1:0;for(;ge>=me+4;ge-=3)be=`_${ve.slice(ge-3,ge)}${be}`;return`${ve.slice(0,ge)}${be}`}function xe(ve,be,ge){Ue(be,"offset"),(ve[be]===void 0||ve[be+ge]===void 0)&&Ke(be,ve.length-(ge+1))}function Ee(ve,be,ge,me,_e,Ae){if(ve>ge||ve<be){const Oe=typeof be=="bigint"?"n":"";let Le;throw Ae>3?be===0||be===BigInt(0)?Le=`>= 0${Oe} and < 2${Oe} ** ${(Ae+1)*8}${Oe}`:Le=`>= -(2${Oe} ** ${(Ae+1)*8-1}${Oe}) and < 2 ** ${(Ae+1)*8-1}${Oe}`:Le=`>= ${be}${Oe} and <= ${ge}${Oe}`,new Ie.ERR_OUT_OF_RANGE("value",Le,ve)}xe(me,_e,Ae)}function Ue(ve,be){if(typeof ve!="number")throw new Ie.ERR_INVALID_ARG_TYPE(be,"number",ve)}function Ke(ve,be,ge){throw Math.floor(ve)!==ve?(Ue(ve,ge),new Ie.ERR_OUT_OF_RANGE(ge||"offset","an integer",ve)):be<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE(ge||"offset",`>= ${ge?1:0} and <= ${be}`,ve)}const ze=/[^+/0-9A-Za-z-_]/g;function Ve(ve){if(ve=ve.split("=")[0],ve=ve.trim().replace(ze,""),ve.length<2)return"";for(;ve.length%4!==0;)ve=ve+"=";return ve}function Je(ve,be){be=be||1/0;let ge;const me=ve.length;let _e=null;const Ae=[];for(let Oe=0;Oe<me;++Oe){if(ge=ve.charCodeAt(Oe),ge>55295&&ge<57344){if(!_e){if(ge>56319){(be-=3)>-1&&Ae.push(239,191,189);continue}else if(Oe+1===me){(be-=3)>-1&&Ae.push(239,191,189);continue}_e=ge;continue}if(ge<56320){(be-=3)>-1&&Ae.push(239,191,189),_e=ge;continue}ge=(_e-55296<<10|ge-56320)+65536}else _e&&(be-=3)>-1&&Ae.push(239,191,189);if(_e=null,ge<128){if((be-=1)<0)break;Ae.push(ge)}else if(ge<2048){if((be-=2)<0)break;Ae.push(ge>>6|192,ge&63|128)}else if(ge<65536){if((be-=3)<0)break;Ae.push(ge>>12|224,ge>>6&63|128,ge&63|128)}else if(ge<1114112){if((be-=4)<0)break;Ae.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,ge&63|128)}else throw new Error("Invalid code point")}return Ae}function et(ve){const be=[];for(let ge=0;ge<ve.length;++ge)be.push(ve.charCodeAt(ge)&255);return be}function Ge(ve,be){let ge,me,_e;const Ae=[];for(let Oe=0;Oe<ve.length&&!((be-=2)<0);++Oe)ge=ve.charCodeAt(Oe),me=ge>>8,_e=ge%256,Ae.push(_e),Ae.push(me);return Ae}function ot(ve){return _.toByteArray(Ve(ve))}function He(ve,be,ge,me){let _e;for(_e=0;_e<me&&!(_e+ge>=be.length||_e>=ve.length);++_e)be[_e+ge]=ve[_e];return _e}function We(ve,be){return ve instanceof be||ve!=null&&ve.constructor!=null&&ve.constructor.name!=null&&ve.constructor.name===be.name}function Ze(ve){return ve!==ve}const $e=function(){const ve="0123456789abcdef",be=new Array(256);for(let ge=0;ge<16;++ge){const me=ge*16;for(let _e=0;_e<16;++_e)be[me+_e]=ve[ge]+ve[_e]}return be}();function Te(ve){return typeof BigInt>"u"?Ce:ve}function Ce(){throw new Error("BigInt not supported")}})(bufferPolyfill);var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(v){if(cachedSetTimeout===setTimeout)return setTimeout(v,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(v,0);try{return cachedSetTimeout(v,0)}catch{try{return cachedSetTimeout.call(null,v,0)}catch{return cachedSetTimeout.call(this,v,0)}}}function runClearTimeout(v){if(cachedClearTimeout===clearTimeout)return clearTimeout(v);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(v);try{return cachedClearTimeout(v)}catch{try{return cachedClearTimeout.call(null,v)}catch{return cachedClearTimeout.call(this,v)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var v=runTimeout(cleanUpNextTick);draining=!0;for(var _=queue.length;_;){for(currentQueue=queue,queue=[];++queueIndex<_;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,_=queue.length}currentQueue=null,draining=!1,runClearTimeout(v)}}process.nextTick=function(v){var _=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)_[x-1]=arguments[x];queue.push(new Item(v,_)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(v,_){this.fun=v,this.array=_}Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={};function noop$4(){}process.on=noop$4,process.addListener=noop$4,process.once=noop$4,process.off=noop$4,process.removeListener=noop$4,process.removeAllListeners=noop$4,process.emit=noop$4,process.prependListener=noop$4,process.prependOnceListener=noop$4,process.listeners=function(v){return[]},process.binding=function(v){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(v){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports$2=browser$d.exports;(function(v){Object.defineProperty(v,Symbol.toStringTag,{value:"Module"});const _=bufferPolyfill,x=browserExports$2,E=T=>T&&T.__esModule?T:{default:T},A=E(x),P=globalThis||void 0||self;Object.defineProperty(v,"Buffer",{enumerable:!0,get:()=>_.Buffer}),Object.defineProperty(v,"process",{enumerable:!0,get:()=>A.default}),v.global=P})(dist$4);var address$1={},networks$3={};Object.defineProperty(networks$3,"__esModule",{value:!0}),networks$3.testnet=networks$3.regtest=networks$3.bitcoin=void 0,networks$3.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},networks$3.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},networks$3.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};var payments$8={},embed$1={},script$1={},bip66$3={};Object.defineProperty(bip66$3,"__esModule",{value:!0}),bip66$3.encode=bip66$3.decode=bip66$3.check=void 0;function check$s(v){if(v.length<8||v.length>72||v[0]!==48||v[1]!==v.length-2||v[2]!==2)return!1;const _=v[3];if(_===0||5+_>=v.length||v[4+_]!==2)return!1;const x=v[5+_];return!(x===0||6+_+x!==v.length||v[4]&128||_>1&&v[4]===0&&!(v[5]&128)||v[_+6]&128||x>1&&v[_+6]===0&&!(v[_+7]&128))}bip66$3.check=check$s;function decode$H(v){if(v.length<8)throw new Error("DER sequence length is too short");if(v.length>72)throw new Error("DER sequence length is too long");if(v[0]!==48)throw new Error("Expected DER sequence");if(v[1]!==v.length-2)throw new Error("DER sequence length is invalid");if(v[2]!==2)throw new Error("Expected DER integer");const _=v[3];if(_===0)throw new Error("R length is zero");if(5+_>=v.length)throw new Error("R length is too long");if(v[4+_]!==2)throw new Error("Expected DER integer (2)");const x=v[5+_];if(x===0)throw new Error("S length is zero");if(6+_+x!==v.length)throw new Error("S length is invalid");if(v[4]&128)throw new Error("R value is negative");if(_>1&&v[4]===0&&!(v[5]&128))throw new Error("R value excessively padded");if(v[_+6]&128)throw new Error("S value is negative");if(x>1&&v[_+6]===0&&!(v[_+7]&128))throw new Error("S value excessively padded");return{r:v.slice(4,4+_),s:v.slice(6+_)}}bip66$3.decode=decode$H;function encode$M(v,_){const x=v.length,E=_.length;if(x===0)throw new Error("R length is zero");if(E===0)throw new Error("S length is zero");if(x>33)throw new Error("R length is too long");if(E>33)throw new Error("S length is too long");if(v[0]&128)throw new Error("R value is negative");if(_[0]&128)throw new Error("S value is negative");if(x>1&&v[0]===0&&!(v[1]&128))throw new Error("R value excessively padded");if(E>1&&_[0]===0&&!(_[1]&128))throw new Error("S value excessively padded");const A=dist$4.Buffer.allocUnsafe(6+x+E);return A[0]=48,A[1]=A.length-2,A[2]=2,A[3]=v.length,v.copy(A,4),A[4+x]=2,A[5+x]=_.length,_.copy(A,6+x),A}bip66$3.encode=encode$M;var ops$1={};Object.defineProperty(ops$1,"__esModule",{value:!0}),ops$1.REVERSE_OPS=ops$1.OPS=void 0;const OPS$h={OP_FALSE:0,OP_0:0,OP_DATA_1:1,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};ops$1.OPS=OPS$h;const REVERSE_OPS$1={};ops$1.REVERSE_OPS=REVERSE_OPS$1;for(const v of Object.keys(OPS$h)){const _=OPS$h[v];REVERSE_OPS$1[_]=v}var push_data$1={};Object.defineProperty(push_data$1,"__esModule",{value:!0}),push_data$1.decode=push_data$1.encode=push_data$1.encodingLength=void 0;const ops_1$1=ops$1;function encodingLength$5(v){return v<ops_1$1.OPS.OP_PUSHDATA1?1:v<=255?2:v<=65535?3:5}push_data$1.encodingLength=encodingLength$5;function encode$L(v,_,x){const E=encodingLength$5(_);return E===1?v.writeUInt8(_,x):E===2?(v.writeUInt8(ops_1$1.OPS.OP_PUSHDATA1,x),v.writeUInt8(_,x+1)):E===3?(v.writeUInt8(ops_1$1.OPS.OP_PUSHDATA2,x),v.writeUInt16LE(_,x+1)):(v.writeUInt8(ops_1$1.OPS.OP_PUSHDATA4,x),v.writeUInt32LE(_,x+1)),E}push_data$1.encode=encode$L;function decode$G(v,_){const x=v.readUInt8(_);let E,A;if(x<ops_1$1.OPS.OP_PUSHDATA1)E=x,A=1;else if(x===ops_1$1.OPS.OP_PUSHDATA1){if(_+2>v.length)return null;E=v.readUInt8(_+1),A=2}else if(x===ops_1$1.OPS.OP_PUSHDATA2){if(_+3>v.length)return null;E=v.readUInt16LE(_+1),A=3}else{if(_+5>v.length)return null;if(x!==ops_1$1.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");E=v.readUInt32LE(_+1),A=5}return{opcode:x,number:E,size:A}}push_data$1.decode=decode$G;var script_number$1={};Object.defineProperty(script_number$1,"__esModule",{value:!0}),script_number$1.encode=script_number$1.decode=void 0;function decode$F(v,_,x){_=_||4,x=x===void 0?!0:x;const E=v.length;if(E===0)return 0;if(E>_)throw new TypeError("Script number overflow");if(x&&!(v[E-1]&127)&&(E<=1||!(v[E-2]&128)))throw new Error("Non-minimally encoded script number");if(E===5){const P=v.readUInt32LE(0),T=v.readUInt8(4);return T&128?-((T&-129)*4294967296+P):T*4294967296+P}let A=0;for(let P=0;P<E;++P)A|=v[P]<<8*P;return v[E-1]&128?-(A&~(128<<8*(E-1))):A}script_number$1.decode=decode$F;function scriptNumSize$1(v){return v>2147483647?5:v>8388607?4:v>32767?3:v>127?2:v>0?1:0}function encode$K(v){let _=Math.abs(v);const x=scriptNumSize$1(_),E=dist$4.Buffer.allocUnsafe(x),A=v<0;for(let P=0;P<x;++P)E.writeUInt8(_&255,P),_>>=8;return E[x-1]&128?E.writeUInt8(A?128:0,x-1):A&&(E[x-1]|=128),E}script_number$1.encode=encode$K;var script_signature$1={},types$d={},dist$3={},base$8={},base58$2={},base$7={};(function(v){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(v,"__esModule",{value:!0}),v.bytes=v.stringToBytes=v.str=v.bytesToString=v.hex=v.utf8=v.bech32m=v.bech32=v.base58check=v.base58xmr=v.base58xrp=v.base58flickr=v.base58=v.base64url=v.base64=v.base32crockford=v.base32hex=v.base32=v.base16=v.utils=v.assertNumber=void 0;function _(ne){if(!Number.isSafeInteger(ne))throw new Error(`Wrong integer: ${ne}`)}v.assertNumber=_;function x(...ne){const J=(L,Z)=>Q=>L(Z(Q)),q=Array.from(ne).reverse().reduce((L,Z)=>L?J(L,Z.encode):Z.encode,void 0),F=ne.reduce((L,Z)=>L?J(L,Z.decode):Z.decode,void 0);return{encode:q,decode:F}}function E(ne){return{encode:J=>{if(!Array.isArray(J)||J.length&&typeof J[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return J.map(q=>{if(_(q),q<0||q>=ne.length)throw new Error(`Digit index outside alphabet: ${q} (alphabet: ${ne.length})`);return ne[q]})},decode:J=>{if(!Array.isArray(J)||J.length&&typeof J[0]!="string")throw new Error("alphabet.decode input should be array of strings");return J.map(q=>{if(typeof q!="string")throw new Error(`alphabet.decode: not string element=${q}`);const F=ne.indexOf(q);if(F===-1)throw new Error(`Unknown letter: "${q}". Allowed: ${ne}`);return F})}}}function A(ne=""){if(typeof ne!="string")throw new Error("join separator should be string");return{encode:J=>{if(!Array.isArray(J)||J.length&&typeof J[0]!="string")throw new Error("join.encode input should be array of strings");for(let q of J)if(typeof q!="string")throw new Error(`join.encode: non-string input=${q}`);return J.join(ne)},decode:J=>{if(typeof J!="string")throw new Error("join.decode input should be string");return J.split(ne)}}}function P(ne,J="="){if(_(ne),typeof J!="string")throw new Error("padding chr should be string");return{encode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!="string")throw new Error("padding.encode input should be array of strings");for(let F of q)if(typeof F!="string")throw new Error(`padding.encode: non-string input=${F}`);for(;q.length*ne%8;)q.push(J);return q},decode(q){if(!Array.isArray(q)||q.length&&typeof q[0]!="string")throw new Error("padding.encode input should be array of strings");for(let L of q)if(typeof L!="string")throw new Error(`padding.decode: non-string input=${L}`);let F=q.length;if(F*ne%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;F>0&&q[F-1]===J;F--)if(!((F-1)*ne%8))throw new Error("Invalid padding: string has too much padding");return q.slice(0,F)}}}function T(ne){if(typeof ne!="function")throw new Error("normalize fn should be function");return{encode:J=>J,decode:J=>ne(J)}}function O(ne,J,q){if(J<2)throw new Error(`convertRadix: wrong from=${J}, base cannot be less than 2`);if(q<2)throw new Error(`convertRadix: wrong to=${q}, base cannot be less than 2`);if(!Array.isArray(ne))throw new Error("convertRadix: data should be array");if(!ne.length)return[];let F=0;const L=[],Z=Array.from(ne);for(Z.forEach(Q=>{if(_(Q),Q<0||Q>=J)throw new Error(`Wrong integer: ${Q}`)});;){let Q=0,de=!0;for(let ye=F;ye<Z.length;ye++){const oe=Z[ye],se=J*Q+oe;if(!Number.isSafeInteger(se)||J*Q/J!==Q||se-oe!==J*Q)throw new Error("convertRadix: carry overflow");if(Q=se%q,Z[ye]=Math.floor(se/q),!Number.isSafeInteger(Z[ye])||Z[ye]*q+Q!==se)throw new Error("convertRadix: carry overflow");if(de)Z[ye]?de=!1:F=ye;else continue}if(L.push(Q),de)break}for(let Q=0;Q<ne.length-1&&ne[Q]===0;Q++)L.push(0);return L.reverse()}const k=(ne,J)=>J?k(J,ne%J):ne,C=(ne,J)=>ne+(J-k(ne,J));function U(ne,J,q,F){if(!Array.isArray(ne))throw new Error("convertRadix2: data should be array");if(J<=0||J>32)throw new Error(`convertRadix2: wrong from=${J}`);if(q<=0||q>32)throw new Error(`convertRadix2: wrong to=${q}`);if(C(J,q)>32)throw new Error(`convertRadix2: carry overflow from=${J} to=${q} carryBits=${C(J,q)}`);let L=0,Z=0;const Q=2**q-1,de=[];for(const ye of ne){if(_(ye),ye>=2**J)throw new Error(`convertRadix2: invalid data word=${ye} from=${J}`);if(L=L<<J|ye,Z+J>32)throw new Error(`convertRadix2: carry overflow pos=${Z} from=${J}`);for(Z+=J;Z>=q;Z-=q)de.push((L>>Z-q&Q)>>>0);L&=2**Z-1}if(L=L<<q-Z&Q,!F&&Z>=J)throw new Error("Excess padding");if(!F&&L)throw new Error(`Non-zero padding: ${L}`);return F&&Z>0&&de.push(L>>>0),de}function N(ne){return _(ne),{encode:J=>{if(!(J instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return O(Array.from(J),2**8,ne)},decode:J=>{if(!Array.isArray(J)||J.length&&typeof J[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(O(J,ne,2**8))}}}function H(ne,J=!1){if(_(ne),ne<=0||ne>32)throw new Error("radix2: bits should be in (0..32]");if(C(8,ne)>32||C(ne,8)>32)throw new Error("radix2: carry overflow");return{encode:q=>{if(!(q instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return U(Array.from(q),8,ne,!J)},decode:q=>{if(!Array.isArray(q)||q.length&&typeof q[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(U(q,ne,8,J))}}}function D(ne){if(typeof ne!="function")throw new Error("unsafeWrapper fn should be function");return function(...J){try{return ne.apply(null,J)}catch{}}}function j(ne,J){if(_(ne),typeof J!="function")throw new Error("checksum fn should be function");return{encode(q){if(!(q instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const F=J(q).slice(0,ne),L=new Uint8Array(q.length+ne);return L.set(q),L.set(F,q.length),L},decode(q){if(!(q instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const F=q.slice(0,-ne),L=J(F).slice(0,ne),Z=q.slice(-ne);for(let Q=0;Q<ne;Q++)if(L[Q]!==Z[Q])throw new Error("Invalid checksum");return F}}}v.utils={alphabet:E,chain:x,checksum:j,radix:N,radix2:H,join:A,padding:P},v.base16=x(H(4),E("0123456789ABCDEF"),A("")),v.base32=x(H(5),E("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),P(5),A("")),v.base32hex=x(H(5),E("0123456789ABCDEFGHIJKLMNOPQRSTUV"),P(5),A("")),v.base32crockford=x(H(5),E("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),A(""),T(ne=>ne.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),v.base64=x(H(6),E("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),P(6),A("")),v.base64url=x(H(6),E("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),P(6),A(""));const V=ne=>x(N(58),E(ne),A(""));v.base58=V("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),v.base58flickr=V("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),v.base58xrp=V("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const X=[0,2,3,5,6,7,9,10,11];v.base58xmr={encode(ne){let J="";for(let q=0;q<ne.length;q+=8){const F=ne.subarray(q,q+8);J+=v.base58.encode(F).padStart(X[F.length],"1")}return J},decode(ne){let J=[];for(let q=0;q<ne.length;q+=11){const F=ne.slice(q,q+11),L=X.indexOf(F.length),Z=v.base58.decode(F);for(let Q=0;Q<Z.length-L;Q++)if(Z[Q]!==0)throw new Error("base58xmr: wrong padding");J=J.concat(Array.from(Z.slice(Z.length-L)))}return Uint8Array.from(J)}};const re=ne=>x(j(4,J=>ne(ne(J))),v.base58);v.base58check=re;const ee=x(E("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),A("")),fe=[996825010,642813549,513874426,1027748829,705979059];function le(ne){const J=ne>>25;let q=(ne&33554431)<<5;for(let F=0;F<fe.length;F++)(J>>F&1)===1&&(q^=fe[F]);return q}function pe(ne,J,q=1){const F=ne.length;let L=1;for(let Z=0;Z<F;Z++){const Q=ne.charCodeAt(Z);if(Q<33||Q>126)throw new Error(`Invalid prefix (${ne})`);L=le(L)^Q>>5}L=le(L);for(let Z=0;Z<F;Z++)L=le(L)^ne.charCodeAt(Z)&31;for(let Z of J)L=le(L)^Z;for(let Z=0;Z<6;Z++)L=le(L);return L^=q,ee.encode(U([L%2**30],30,5,!1))}function ie(ne){const J=ne==="bech32"?1:734539939,q=H(5),F=q.decode,L=q.encode,Z=D(F);function Q(se,Y,ce=90){if(typeof se!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof se}`);if(!Array.isArray(Y)||Y.length&&typeof Y[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Y}`);const we=se.length+7+Y.length;if(ce!==!1&&we>ce)throw new TypeError(`Length ${we} exceeds limit ${ce}`);return se=se.toLowerCase(),`${se}1${ee.encode(Y)}${pe(se,Y,J)}`}function de(se,Y=90){if(typeof se!="string")throw new Error(`bech32.decode input should be string, not ${typeof se}`);if(se.length<8||Y!==!1&&se.length>Y)throw new TypeError(`Wrong string length: ${se.length} (${se}). Expected (8..${Y})`);const ce=se.toLowerCase();if(se!==ce&&se!==se.toUpperCase())throw new Error("String must be lowercase or uppercase");se=ce;const we=se.lastIndexOf("1");if(we===0||we===-1)throw new Error('Letter "1" must be present between prefix and data only');const[Pe,Se]=[se.slice(0,we),se.slice(we+1)];if(Se.length<6)throw new Error("Data must be at least 6 characters long");const Be=ee.decode(Se).slice(0,-6),Ie=pe(Pe,Be,J);if(!Se.endsWith(Ie))throw new Error(`Invalid checksum in ${se}: expected "${Ie}"`);return{prefix:Pe,words:Be}}const ye=D(de);function oe(se){const{prefix:Y,words:ce}=de(se,!1);return{prefix:Y,words:ce,bytes:F(ce)}}return{encode:Q,decode:de,decodeToBytes:oe,decodeUnsafe:ye,fromWords:F,fromWordsUnsafe:Z,toWords:L}}v.bech32=ie("bech32"),v.bech32m=ie("bech32m"),v.utf8={encode:ne=>new TextDecoder().decode(ne),decode:ne=>new TextEncoder().encode(ne)},v.hex=x(H(4),E("0123456789abcdef"),A(""),T(ne=>{if(typeof ne!="string"||ne.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof ne} with length ${ne.length}`);return ne.toLowerCase()}));const he={utf8:v.utf8,hex:v.hex,base16:v.base16,base32:v.base32,base64:v.base64,base64url:v.base64url,base58:v.base58,base58xmr:v.base58xmr},ae=`Invalid encoding type. Available types: ${Object.keys(he).join(", ")}`,te=(ne,J)=>{if(typeof ne!="string"||!he.hasOwnProperty(ne))throw new TypeError(ae);if(!(J instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return he[ne].encode(J)};v.bytesToString=te,v.str=v.bytesToString;const ue=(ne,J)=>{if(!he.hasOwnProperty(ne))throw new TypeError(ae);if(typeof J!="string")throw new TypeError("stringToBytes() expects string");return he[ne].decode(J)};v.stringToBytes=ue,v.bytes=v.stringToBytes})(base$7),function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.base58=v.fromBase58=v.toBase58=void 0;const _=base$7;Object.defineProperty(v,"base58",{enumerable:!0,get:function(){return _.base58}});function x(A){const P=dist$4.Buffer.from(A);return _.base58.encode(Uint8Array.from(P))}v.toBase58=x;function E(A){return _.base58.decode(A)}v.fromBase58=E}(base58$2);var base58Check={},hash$6={},sha256$6={},_sha2$1={};function commonjsRequire(v){throw new Error('Could not dynamically require "'+v+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var utils$G={exports:{}},cryptoBrowser={};Object.defineProperty(cryptoBrowser,"__esModule",{value:!0}),cryptoBrowser.crypto=void 0,cryptoBrowser.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$G.exports,function(v,_){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(_,"__esModule",{value:!0}),_.randomBytes=_.wrapConstructorWithOpts=_.wrapConstructor=_.checkOpts=_.Hash=_.assertHash=_.assertBytes=_.assertBool=_.assertNumber=_.concatBytes=_.toBytes=_.utf8ToBytes=_.asyncLoop=_.nextTick=_.hexToBytes=_.bytesToHex=_.isLE=_.rotr=_.createView=_.u32=_.u8=void 0;const x=cryptoBrowser,E=ae=>new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength);_.u8=E;const A=ae=>new Uint32Array(ae.buffer,ae.byteOffset,Math.floor(ae.byteLength/4));_.u32=A;const P=ae=>new DataView(ae.buffer,ae.byteOffset,ae.byteLength);_.createView=P;const T=(ae,te)=>ae<<32-te|ae>>>te;if(_.rotr=T,_.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!_.isLE)throw new Error("Non little-endian hardware is not supported");const O=Array.from({length:256},(ae,te)=>te.toString(16).padStart(2,"0"));function k(ae){let te="";for(let ue=0;ue<ae.length;ue++)te+=O[ae[ue]];return te}_.bytesToHex=k;function C(ae){if(typeof ae!="string")throw new TypeError("hexToBytes: expected string, got "+typeof ae);if(ae.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const te=new Uint8Array(ae.length/2);for(let ue=0;ue<te.length;ue++){const ne=ue*2,J=ae.slice(ne,ne+2),q=Number.parseInt(J,16);if(Number.isNaN(q))throw new Error("Invalid byte sequence");te[ue]=q}return te}_.hexToBytes=C,_.nextTick=(()=>{const ae=typeof commonjsRequire=="function"&&commonjsRequire.bind(v);try{if(ae){const{setImmediate:te}=ae("timers");return()=>new Promise(ue=>te(ue))}}catch{}return()=>new Promise(te=>setTimeout(te,0))})();async function U(ae,te,ue){let ne=Date.now();for(let J=0;J<ae;J++){ue(J);const q=Date.now()-ne;q>=0&&q<te||(await(0,_.nextTick)(),ne+=q)}}_.asyncLoop=U;function N(ae){if(typeof ae!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof ae}`);return new TextEncoder().encode(ae)}_.utf8ToBytes=N;function H(ae){if(typeof ae=="string"&&(ae=N(ae)),!(ae instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof ae})`);return ae}_.toBytes=H;function D(...ae){if(!ae.every(ne=>ne instanceof Uint8Array))throw new Error("Uint8Array list expected");if(ae.length===1)return ae[0];const te=ae.reduce((ne,J)=>ne+J.length,0),ue=new Uint8Array(te);for(let ne=0,J=0;ne<ae.length;ne++){const q=ae[ne];ue.set(q,J),J+=q.length}return ue}_.concatBytes=D;function j(ae){if(!Number.isSafeInteger(ae)||ae<0)throw new Error(`Wrong positive integer: ${ae}`)}_.assertNumber=j;function V(ae){if(typeof ae!="boolean")throw new Error(`Expected boolean, not ${ae}`)}_.assertBool=V;function X(ae,...te){if(!(ae instanceof Uint8Array&&(!te.length||te.includes(ae.length))))throw new TypeError(`Expected ${te} bytes, not ${typeof ae} with length=${ae.length}`)}_.assertBytes=X;function re(ae){if(typeof ae!="function"||typeof ae.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");j(ae.outputLen),j(ae.blockLen)}_.assertHash=re;class ee{clone(){return this._cloneInto()}}_.Hash=ee;const fe=ae=>Object.prototype.toString.call(ae)==="[object Object]"&&ae.constructor===Object;function le(ae,te){if(te!==void 0&&(typeof te!="object"||!fe(te)))throw new TypeError("Options should be object or undefined");return Object.assign(ae,te)}_.checkOpts=le;function pe(ae){const te=ne=>ae().update(H(ne)).digest(),ue=ae();return te.outputLen=ue.outputLen,te.blockLen=ue.blockLen,te.create=()=>ae(),te}_.wrapConstructor=pe;function ie(ae){const te=(ne,J)=>ae(J).update(H(ne)).digest(),ue=ae({});return te.outputLen=ue.outputLen,te.blockLen=ue.blockLen,te.create=ne=>ae(ne),te}_.wrapConstructorWithOpts=ie;function he(ae=32){if(x.crypto.web)return x.crypto.web.getRandomValues(new Uint8Array(ae));if(x.crypto.node)return new Uint8Array(x.crypto.node.randomBytes(ae).buffer);throw new Error("The environment doesn't have randomBytes function")}_.randomBytes=he}(utils$G,utils$G.exports);var utilsExports=utils$G.exports;Object.defineProperty(_sha2$1,"__esModule",{value:!0}),_sha2$1.SHA2=void 0;const utils_js_1$d=utilsExports;function setBigUint64$1(v,_,x,E){if(typeof v.setBigUint64=="function")return v.setBigUint64(_,x,E);const A=BigInt(32),P=BigInt(4294967295),T=Number(x>>A&P),O=Number(x&P),k=E?4:0,C=E?0:4;v.setUint32(_+k,T,E),v.setUint32(_+C,O,E)}let SHA2$1=class extends utils_js_1$d.Hash{constructor(_,x,E,A){super(),this.blockLen=_,this.outputLen=x,this.padOffset=E,this.isLE=A,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(_),this.view=(0,utils_js_1$d.createView)(this.buffer)}update(_){if(this.destroyed)throw new Error("instance is destroyed");const{view:x,buffer:E,blockLen:A,finished:P}=this;if(P)throw new Error("digest() was already called");_=(0,utils_js_1$d.toBytes)(_);const T=_.length;for(let O=0;O<T;){const k=Math.min(A-this.pos,T-O);if(k===A){const C=(0,utils_js_1$d.createView)(_);for(;A<=T-O;O+=A)this.process(C,O);continue}E.set(_.subarray(O,O+k),this.pos),this.pos+=k,O+=k,this.pos===A&&(this.process(x,0),this.pos=0)}return this.length+=_.length,this.roundClean(),this}digestInto(_){if(this.destroyed)throw new Error("instance is destroyed");if(!(_ instanceof Uint8Array)||_.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:x,view:E,blockLen:A,isLE:P}=this;let{pos:T}=this;x[T++]=128,this.buffer.subarray(T).fill(0),this.padOffset>A-T&&(this.process(E,0),T=0);for(let k=T;k<A;k++)x[k]=0;setBigUint64$1(E,A-8,BigInt(this.length*8),P),this.process(E,0);const O=(0,utils_js_1$d.createView)(_);this.get().forEach((k,C)=>O.setUint32(4*C,k,P))}digest(){const{buffer:_,outputLen:x}=this;this.digestInto(_);const E=_.slice(0,x);return this.destroy(),E}_cloneInto(_){_||(_=new this.constructor),_.set(...this.get());const{blockLen:x,buffer:E,length:A,finished:P,destroyed:T,pos:O}=this;return _.length=A,_.pos=O,_.finished=P,_.destroyed=T,A%x&&_.buffer.set(E),_}};_sha2$1.SHA2=SHA2$1,Object.defineProperty(sha256$6,"__esModule",{value:!0}),sha256$6.sha256=void 0;const _sha2_js_1$5=_sha2$1,utils_js_1$c=utilsExports,Chi$2=(v,_,x)=>v&_^~v&x,Maj$2=(v,_,x)=>v&_^v&x^_&x,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$3=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$3=class extends _sha2_js_1$5.SHA2{constructor(){super(64,32,8,!1),this.A=IV$3[0]|0,this.B=IV$3[1]|0,this.C=IV$3[2]|0,this.D=IV$3[3]|0,this.E=IV$3[4]|0,this.F=IV$3[5]|0,this.G=IV$3[6]|0,this.H=IV$3[7]|0}get(){const{A:_,B:x,C:E,D:A,E:P,F:T,G:O,H:k}=this;return[_,x,E,A,P,T,O,k]}set(_,x,E,A,P,T,O,k){this.A=_|0,this.B=x|0,this.C=E|0,this.D=A|0,this.E=P|0,this.F=T|0,this.G=O|0,this.H=k|0}process(_,x){for(let N=0;N<16;N++,x+=4)SHA256_W$1[N]=_.getUint32(x,!1);for(let N=16;N<64;N++){const H=SHA256_W$1[N-15],D=SHA256_W$1[N-2],j=(0,utils_js_1$c.rotr)(H,7)^(0,utils_js_1$c.rotr)(H,18)^H>>>3,V=(0,utils_js_1$c.rotr)(D,17)^(0,utils_js_1$c.rotr)(D,19)^D>>>10;SHA256_W$1[N]=V+SHA256_W$1[N-7]+j+SHA256_W$1[N-16]|0}let{A:E,B:A,C:P,D:T,E:O,F:k,G:C,H:U}=this;for(let N=0;N<64;N++){const H=(0,utils_js_1$c.rotr)(O,6)^(0,utils_js_1$c.rotr)(O,11)^(0,utils_js_1$c.rotr)(O,25),D=U+H+Chi$2(O,k,C)+SHA256_K$1[N]+SHA256_W$1[N]|0,V=((0,utils_js_1$c.rotr)(E,2)^(0,utils_js_1$c.rotr)(E,13)^(0,utils_js_1$c.rotr)(E,22))+Maj$2(E,A,P)|0;U=C,C=k,k=O,O=T+D|0,T=P,P=A,A=E,E=D+V|0}E=E+this.A|0,A=A+this.B|0,P=P+this.C|0,T=T+this.D|0,O=O+this.E|0,k=k+this.F|0,C=C+this.G|0,U=U+this.H|0,this.set(E,A,P,T,O,k,C,U)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};sha256$6.sha256=(0,utils_js_1$c.wrapConstructor)(()=>new SHA256$3);var sha512$3={},_u64={};Object.defineProperty(_u64,"__esModule",{value:!0}),_u64.add5H=_u64.add5L=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(v,_=!1){return _?{h:Number(v&U32_MASK64),l:Number(v>>_32n&U32_MASK64)}:{h:Number(v>>_32n&U32_MASK64)|0,l:Number(v&U32_MASK64)|0}}_u64.fromBig=fromBig;function split(v,_=!1){let x=new Uint32Array(v.length),E=new Uint32Array(v.length);for(let A=0;A<v.length;A++){const{h:P,l:T}=fromBig(v[A],_);[x[A],E[A]]=[P,T]}return[x,E]}_u64.split=split;const toBig=(v,_)=>BigInt(v>>>0)<<_32n|BigInt(_>>>0);_u64.toBig=toBig;const shrSH=(v,_,x)=>v>>>x;_u64.shrSH=shrSH;const shrSL=(v,_,x)=>v<<32-x|_>>>x;_u64.shrSL=shrSL;const rotrSH=(v,_,x)=>v>>>x|_<<32-x;_u64.rotrSH=rotrSH;const rotrSL=(v,_,x)=>v<<32-x|_>>>x;_u64.rotrSL=rotrSL;const rotrBH=(v,_,x)=>v<<64-x|_>>>x-32;_u64.rotrBH=rotrBH;const rotrBL=(v,_,x)=>v>>>x-32|_<<64-x;_u64.rotrBL=rotrBL;const rotr32H=(v,_)=>_;_u64.rotr32H=rotr32H;const rotr32L=(v,_)=>v;_u64.rotr32L=rotr32L;const rotlSH=(v,_,x)=>v<<x|_>>>32-x;_u64.rotlSH=rotlSH;const rotlSL=(v,_,x)=>_<<x|v>>>32-x;_u64.rotlSL=rotlSL;const rotlBH=(v,_,x)=>_<<x-32|v>>>64-x;_u64.rotlBH=rotlBH;const rotlBL=(v,_,x)=>v<<x-32|_>>>64-x;_u64.rotlBL=rotlBL;function add(v,_,x,E){const A=(_>>>0)+(E>>>0);return{h:v+x+(A/2**32|0)|0,l:A|0}}_u64.add=add;const add3L=(v,_,x)=>(v>>>0)+(_>>>0)+(x>>>0);_u64.add3L=add3L;const add3H=(v,_,x,E)=>_+x+E+(v/2**32|0)|0;_u64.add3H=add3H;const add4L=(v,_,x,E)=>(v>>>0)+(_>>>0)+(x>>>0)+(E>>>0);_u64.add4L=add4L;const add4H=(v,_,x,E,A)=>_+x+E+A+(v/2**32|0)|0;_u64.add4H=add4H;const add5L=(v,_,x,E,A)=>(v>>>0)+(_>>>0)+(x>>>0)+(E>>>0)+(A>>>0);_u64.add5L=add5L;const add5H=(v,_,x,E,A,P)=>_+x+E+A+P+(v/2**32|0)|0;_u64.add5H=add5H;var __createBinding$u=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x),Object.defineProperty(v,E,{enumerable:!0,get:function(){return _[x]}})}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$u=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$u(_,v,x);return __setModuleDefault$u(_,v),_};Object.defineProperty(sha512$3,"__esModule",{value:!0}),sha512$3.sha384=sha512$3.sha512_256=sha512$3.sha512=sha512$3.SHA512=void 0;const _sha2_js_1$4=_sha2$1,u64$3=__importStar$u(_u64),utils_js_1$b=utilsExports,[SHA512_Kh,SHA512_Kl]=u64$3.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(v=>BigInt(v))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);let SHA512$3=class extends _sha2_js_1$4.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:_,Al:x,Bh:E,Bl:A,Ch:P,Cl:T,Dh:O,Dl:k,Eh:C,El:U,Fh:N,Fl:H,Gh:D,Gl:j,Hh:V,Hl:X}=this;return[_,x,E,A,P,T,O,k,C,U,N,H,D,j,V,X]}set(_,x,E,A,P,T,O,k,C,U,N,H,D,j,V,X){this.Ah=_|0,this.Al=x|0,this.Bh=E|0,this.Bl=A|0,this.Ch=P|0,this.Cl=T|0,this.Dh=O|0,this.Dl=k|0,this.Eh=C|0,this.El=U|0,this.Fh=N|0,this.Fl=H|0,this.Gh=D|0,this.Gl=j|0,this.Hh=V|0,this.Hl=X|0}process(_,x){for(let fe=0;fe<16;fe++,x+=4)SHA512_W_H[fe]=_.getUint32(x),SHA512_W_L[fe]=_.getUint32(x+=4);for(let fe=16;fe<80;fe++){const le=SHA512_W_H[fe-15]|0,pe=SHA512_W_L[fe-15]|0,ie=u64$3.rotrSH(le,pe,1)^u64$3.rotrSH(le,pe,8)^u64$3.shrSH(le,pe,7),he=u64$3.rotrSL(le,pe,1)^u64$3.rotrSL(le,pe,8)^u64$3.shrSL(le,pe,7),ae=SHA512_W_H[fe-2]|0,te=SHA512_W_L[fe-2]|0,ue=u64$3.rotrSH(ae,te,19)^u64$3.rotrBH(ae,te,61)^u64$3.shrSH(ae,te,6),ne=u64$3.rotrSL(ae,te,19)^u64$3.rotrBL(ae,te,61)^u64$3.shrSL(ae,te,6),J=u64$3.add4L(he,ne,SHA512_W_L[fe-7],SHA512_W_L[fe-16]),q=u64$3.add4H(J,ie,ue,SHA512_W_H[fe-7],SHA512_W_H[fe-16]);SHA512_W_H[fe]=q|0,SHA512_W_L[fe]=J|0}let{Ah:E,Al:A,Bh:P,Bl:T,Ch:O,Cl:k,Dh:C,Dl:U,Eh:N,El:H,Fh:D,Fl:j,Gh:V,Gl:X,Hh:re,Hl:ee}=this;for(let fe=0;fe<80;fe++){const le=u64$3.rotrSH(N,H,14)^u64$3.rotrSH(N,H,18)^u64$3.rotrBH(N,H,41),pe=u64$3.rotrSL(N,H,14)^u64$3.rotrSL(N,H,18)^u64$3.rotrBL(N,H,41),ie=N&D^~N&V,he=H&j^~H&X,ae=u64$3.add5L(ee,pe,he,SHA512_Kl[fe],SHA512_W_L[fe]),te=u64$3.add5H(ae,re,le,ie,SHA512_Kh[fe],SHA512_W_H[fe]),ue=ae|0,ne=u64$3.rotrSH(E,A,28)^u64$3.rotrBH(E,A,34)^u64$3.rotrBH(E,A,39),J=u64$3.rotrSL(E,A,28)^u64$3.rotrBL(E,A,34)^u64$3.rotrBL(E,A,39),q=E&P^E&O^P&O,F=A&T^A&k^T&k;re=V|0,ee=X|0,V=D|0,X=j|0,D=N|0,j=H|0,{h:N,l:H}=u64$3.add(C|0,U|0,te|0,ue|0),C=O|0,U=k|0,O=P|0,k=T|0,P=E|0,T=A|0;const L=u64$3.add3L(ue,J,F);E=u64$3.add3H(L,te,ne,q),A=L|0}({h:E,l:A}=u64$3.add(this.Ah|0,this.Al|0,E|0,A|0)),{h:P,l:T}=u64$3.add(this.Bh|0,this.Bl|0,P|0,T|0),{h:O,l:k}=u64$3.add(this.Ch|0,this.Cl|0,O|0,k|0),{h:C,l:U}=u64$3.add(this.Dh|0,this.Dl|0,C|0,U|0),{h:N,l:H}=u64$3.add(this.Eh|0,this.El|0,N|0,H|0),{h:D,l:j}=u64$3.add(this.Fh|0,this.Fl|0,D|0,j|0),{h:V,l:X}=u64$3.add(this.Gh|0,this.Gl|0,V|0,X|0),{h:re,l:ee}=u64$3.add(this.Hh|0,this.Hl|0,re|0,ee|0),this.set(E,A,P,T,O,k,C,U,N,H,D,j,V,X,re,ee)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};sha512$3.SHA512=SHA512$3;class SHA512_256 extends SHA512$3{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}let SHA384$1=class extends SHA512$3{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};sha512$3.sha512=(0,utils_js_1$b.wrapConstructor)(()=>new SHA512$3),sha512$3.sha512_256=(0,utils_js_1$b.wrapConstructor)(()=>new SHA512_256),sha512$3.sha384=(0,utils_js_1$b.wrapConstructor)(()=>new SHA384$1);var ripemd160$4={};Object.defineProperty(ripemd160$4,"__esModule",{value:!0}),ripemd160$4.ripemd160=ripemd160$4.RIPEMD160=void 0;const _sha2_js_1$3=_sha2$1,utils_js_1$a=utilsExports,Rho$1=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id$1=Uint8Array.from({length:16},(v,_)=>_),Pi$1=Id$1.map(v=>(9*v+5)%16);let idxL$1=[Id$1],idxR$1=[Pi$1];for(let v=0;v<4;v++)for(let _ of[idxL$1,idxR$1])_.push(_[v].map(x=>Rho$1[x]));const shifts$1=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(v=>new Uint8Array(v)),shiftsL$1=idxL$1.map((v,_)=>v.map(x=>shifts$1[_][x])),shiftsR$1=idxR$1.map((v,_)=>v.map(x=>shifts$1[_][x])),Kl$1=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr$1=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl$5=(v,_)=>v<<_|v>>>32-_;function f$4(v,_,x,E){return v===0?_^x^E:v===1?_&x|~_&E:v===2?(_|~x)^E:v===3?_&E|x&~E:_^(x|~E)}const BUF$2=new Uint32Array(16);let RIPEMD160$6=class extends _sha2_js_1$3.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:_,h1:x,h2:E,h3:A,h4:P}=this;return[_,x,E,A,P]}set(_,x,E,A,P){this.h0=_|0,this.h1=x|0,this.h2=E|0,this.h3=A|0,this.h4=P|0}process(_,x){for(let D=0;D<16;D++,x+=4)BUF$2[D]=_.getUint32(x,!0);let E=this.h0|0,A=E,P=this.h1|0,T=P,O=this.h2|0,k=O,C=this.h3|0,U=C,N=this.h4|0,H=N;for(let D=0;D<5;D++){const j=4-D,V=Kl$1[D],X=Kr$1[D],re=idxL$1[D],ee=idxR$1[D],fe=shiftsL$1[D],le=shiftsR$1[D];for(let pe=0;pe<16;pe++){const ie=rotl$5(E+f$4(D,P,O,C)+BUF$2[re[pe]]+V,fe[pe])+N|0;E=N,N=C,C=rotl$5(O,10)|0,O=P,P=ie}for(let pe=0;pe<16;pe++){const ie=rotl$5(A+f$4(j,T,k,U)+BUF$2[ee[pe]]+X,le[pe])+H|0;A=H,H=U,U=rotl$5(k,10)|0,k=T,T=ie}}this.set(this.h1+O+U|0,this.h2+C+H|0,this.h3+N+A|0,this.h4+E+T|0,this.h0+P+k|0)}roundClean(){BUF$2.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};ripemd160$4.RIPEMD160=RIPEMD160$6,ripemd160$4.ripemd160=(0,utils_js_1$a.wrapConstructor)(()=>new RIPEMD160$6);var sha3$1={},__createBinding$t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x),Object.defineProperty(v,E,{enumerable:!0,get:function(){return _[x]}})}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$t=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$t=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$t(_,v,x);return __setModuleDefault$t(_,v),_};Object.defineProperty(sha3$1,"__esModule",{value:!0}),sha3$1.shake256=sha3$1.shake128=sha3$1.keccak_512=sha3$1.keccak_384=sha3$1.keccak_256=sha3$1.keccak_224=sha3$1.sha3_512=sha3$1.sha3_384=sha3$1.sha3_256=sha3$1.sha3_224=sha3$1.Keccak=sha3$1.keccakP=void 0;const u64$2=__importStar$t(_u64),utils_js_1$9=utilsExports,[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]],_0n$2=BigInt(0),_1n$2=BigInt(1),_2n$1=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let v=0,_=_1n$2,x=1,E=0;v<24;v++){[x,E]=[E,(2*x+3*E)%5],SHA3_PI.push(2*(5*E+x)),SHA3_ROTL.push((v+1)*(v+2)/2%64);let A=_0n$2;for(let P=0;P<7;P++)_=(_<<_1n$2^(_>>_7n)*_0x71n)%_256n,_&_2n$1&&(A^=_1n$2<<(_1n$2<<BigInt(P))-_1n$2);_SHA3_IOTA.push(A)}const[SHA3_IOTA_H,SHA3_IOTA_L]=u64$2.split(_SHA3_IOTA,!0),rotlH=(v,_,x)=>x>32?u64$2.rotlBH(v,_,x):u64$2.rotlSH(v,_,x),rotlL=(v,_,x)=>x>32?u64$2.rotlBL(v,_,x):u64$2.rotlSL(v,_,x);function keccakP(v,_=24){const x=new Uint32Array(10);for(let E=24-_;E<24;E++){for(let T=0;T<10;T++)x[T]=v[T]^v[T+10]^v[T+20]^v[T+30]^v[T+40];for(let T=0;T<10;T+=2){const O=(T+8)%10,k=(T+2)%10,C=x[k],U=x[k+1],N=rotlH(C,U,1)^x[O],H=rotlL(C,U,1)^x[O+1];for(let D=0;D<50;D+=10)v[T+D]^=N,v[T+D+1]^=H}let A=v[2],P=v[3];for(let T=0;T<24;T++){const O=SHA3_ROTL[T],k=rotlH(A,P,O),C=rotlL(A,P,O),U=SHA3_PI[T];A=v[U],P=v[U+1],v[U]=k,v[U+1]=C}for(let T=0;T<50;T+=10){for(let O=0;O<10;O++)x[O]=v[T+O];for(let O=0;O<10;O++)v[T+O]^=~x[(O+2)%10]&x[(O+4)%10]}v[0]^=SHA3_IOTA_H[E],v[1]^=SHA3_IOTA_L[E]}x.fill(0)}sha3$1.keccakP=keccakP;class Keccak extends utils_js_1$9.Hash{constructor(_,x,E,A=!1,P=24){if(super(),this.blockLen=_,this.suffix=x,this.outputLen=E,this.enableXOF=A,this.rounds=P,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,utils_js_1$9.assertNumber)(E),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,utils_js_1$9.u32)(this.state)}keccak(){keccakP(this.state32,this.rounds),this.posOut=0,this.pos=0}update(_){if(this.destroyed)throw new Error("instance is destroyed");if(this.finished)throw new Error("digest() was already called");const{blockLen:x,state:E}=this;_=(0,utils_js_1$9.toBytes)(_);const A=_.length;for(let P=0;P<A;){const T=Math.min(x-this.pos,A-P);for(let O=0;O<T;O++)E[this.pos++]^=_[P++];this.pos===x&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:_,suffix:x,pos:E,blockLen:A}=this;_[E]^=x,x&128&&E===A-1&&this.keccak(),_[A-1]^=128,this.keccak()}writeInto(_){if(this.destroyed)throw new Error("instance is destroyed");if(!(_ instanceof Uint8Array))throw new Error("Keccak: invalid output buffer");this.finish();for(let x=0,E=_.length;x<E;){this.posOut>=this.blockLen&&this.keccak();const A=Math.min(this.blockLen-this.posOut,E-x);_.set(this.state.subarray(this.posOut,this.posOut+A),x),this.posOut+=A,x+=A}return _}xofInto(_){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(_)}xof(_){return(0,utils_js_1$9.assertNumber)(_),this.xofInto(new Uint8Array(_))}digestInto(_){if(_.length<this.outputLen)throw new Error("Keccak: invalid output buffer");if(this.finished)throw new Error("digest() was already called");return this.finish(),this.writeInto(_),this.destroy(),_}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(_){const{blockLen:x,suffix:E,outputLen:A,rounds:P,enableXOF:T}=this;return _||(_=new Keccak(x,E,A,T,P)),_.state32.set(this.state32),_.pos=this.pos,_.posOut=this.posOut,_.finished=this.finished,_.rounds=P,_.suffix=E,_.outputLen=A,_.enableXOF=T,_.destroyed=this.destroyed,_}}sha3$1.Keccak=Keccak;const gen=(v,_,x)=>(0,utils_js_1$9.wrapConstructor)(()=>new Keccak(_,v,x));sha3$1.sha3_224=gen(6,144,224/8),sha3$1.sha3_256=gen(6,136,256/8),sha3$1.sha3_384=gen(6,104,384/8),sha3$1.sha3_512=gen(6,72,512/8),sha3$1.keccak_224=gen(1,144,224/8),sha3$1.keccak_256=gen(1,136,256/8),sha3$1.keccak_384=gen(1,104,384/8),sha3$1.keccak_512=gen(1,72,512/8);const genShake=(v,_,x)=>(0,utils_js_1$9.wrapConstructorWithOpts)((E={})=>new Keccak(_,v,E.dkLen!==void 0?E.dkLen:x,!0));sha3$1.shake128=genShake(31,168,128/8),sha3$1.shake256=genShake(31,136,256/8);var blake2b={},_blake2={};Object.defineProperty(_blake2,"__esModule",{value:!0}),_blake2.BLAKE2=_blake2.SIGMA=void 0;const utils_js_1$8=utilsExports;_blake2.SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class BLAKE2 extends utils_js_1$8.Hash{constructor(_,x,E={},A,P,T){if(super(),this.blockLen=_,this.outputLen=x,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,(0,utils_js_1$8.assertNumber)(_),(0,utils_js_1$8.assertNumber)(x),(0,utils_js_1$8.assertNumber)(A),x<0||x>A)throw new Error("Blake2: outputLen bigger than keyLen");if(E.key!==void 0&&(E.key.length<1||E.key.length>A))throw new Error(`Key should be up 1..${A} byte long or undefined`);if(E.salt!==void 0&&E.salt.length!==P)throw new Error(`Salt should be ${P} byte long or undefined`);if(E.personalization!==void 0&&E.personalization.length!==T)throw new Error(`Personalization should be ${T} byte long or undefined`);this.buffer32=(0,utils_js_1$8.u32)(this.buffer=new Uint8Array(_))}update(_){if(this.destroyed)throw new Error("instance is destroyed");const{finished:x,blockLen:E,buffer:A,buffer32:P}=this;if(x)throw new Error("digest() was already called");_=(0,utils_js_1$8.toBytes)(_);const T=_.length;for(let O=0;O<T;){this.pos===E&&(this.compress(P,0,!1),this.pos=0);const k=Math.min(E-this.pos,T-O),C=_.byteOffset+O;if(k===E&&!(C%4)&&O+k<T){const U=new Uint32Array(_.buffer,C,Math.floor((T-O)/4));for(let N=0;O+E<T;N+=P.length,O+=E)this.length+=E,this.compress(U,N,!1);continue}A.set(_.subarray(O,O+k),this.pos),this.pos+=k,this.length+=k,O+=k}return this}digestInto(_){if(this.destroyed)throw new Error("instance is destroyed");if(!(_ instanceof Uint8Array)||_.length<this.outputLen)throw new Error("_Blake2: Invalid output buffer");const{finished:x,pos:E,buffer32:A}=this;if(x)throw new Error("digest() was already called");this.finished=!0,this.buffer.subarray(E).fill(0),this.compress(A,0,!0);const P=(0,utils_js_1$8.u32)(_);this.get().forEach((T,O)=>P[O]=T)}digest(){const{buffer:_,outputLen:x}=this;this.digestInto(_);const E=_.slice(0,x);return this.destroy(),E}_cloneInto(_){const{buffer:x,length:E,finished:A,destroyed:P,outputLen:T,pos:O}=this;return _||(_=new this.constructor({dkLen:T})),_.set(...this.get()),_.length=E,_.finished=A,_.destroyed=P,_.outputLen=T,_.buffer.set(x),_.pos=O,_}}_blake2.BLAKE2=BLAKE2;var __createBinding$s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x),Object.defineProperty(v,E,{enumerable:!0,get:function(){return _[x]}})}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$s=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$s=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$s(_,v,x);return __setModuleDefault$s(_,v),_};Object.defineProperty(blake2b,"__esModule",{value:!0}),blake2b.blake2b=void 0;const blake2$1=__importStar$s(_blake2),u64$1=__importStar$s(_u64),utils_js_1$7=utilsExports,IV$2=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),BUF$1=new Uint32Array(32);function G1(v,_,x,E,A,P){const T=A[P],O=A[P+1];let k=BUF$1[2*v],C=BUF$1[2*v+1],U=BUF$1[2*_],N=BUF$1[2*_+1],H=BUF$1[2*x],D=BUF$1[2*x+1],j=BUF$1[2*E],V=BUF$1[2*E+1],X=u64$1.add3L(k,U,T);C=u64$1.add3H(X,C,N,O),k=X|0,{Dh:V,Dl:j}={Dh:V^C,Dl:j^k},{Dh:V,Dl:j}={Dh:u64$1.rotr32H(V,j),Dl:u64$1.rotr32L(V,j)},{h:D,l:H}=u64$1.add(D,H,V,j),{Bh:N,Bl:U}={Bh:N^D,Bl:U^H},{Bh:N,Bl:U}={Bh:u64$1.rotrSH(N,U,24),Bl:u64$1.rotrSL(N,U,24)},BUF$1[2*v]=k,BUF$1[2*v+1]=C,BUF$1[2*_]=U,BUF$1[2*_+1]=N,BUF$1[2*x]=H,BUF$1[2*x+1]=D,BUF$1[2*E]=j,BUF$1[2*E+1]=V}function G2(v,_,x,E,A,P){const T=A[P],O=A[P+1];let k=BUF$1[2*v],C=BUF$1[2*v+1],U=BUF$1[2*_],N=BUF$1[2*_+1],H=BUF$1[2*x],D=BUF$1[2*x+1],j=BUF$1[2*E],V=BUF$1[2*E+1],X=u64$1.add3L(k,U,T);C=u64$1.add3H(X,C,N,O),k=X|0,{Dh:V,Dl:j}={Dh:V^C,Dl:j^k},{Dh:V,Dl:j}={Dh:u64$1.rotrSH(V,j,16),Dl:u64$1.rotrSL(V,j,16)},{h:D,l:H}=u64$1.add(D,H,V,j),{Bh:N,Bl:U}={Bh:N^D,Bl:U^H},{Bh:N,Bl:U}={Bh:u64$1.rotrBH(N,U,63),Bl:u64$1.rotrBL(N,U,63)},BUF$1[2*v]=k,BUF$1[2*v+1]=C,BUF$1[2*_]=U,BUF$1[2*_+1]=N,BUF$1[2*x]=H,BUF$1[2*x+1]=D,BUF$1[2*E]=j,BUF$1[2*E+1]=V}class BLAKE2b extends blake2$1.BLAKE2{constructor(_={}){super(128,_.dkLen===void 0?64:_.dkLen,_,64,16,16),this.v0l=IV$2[0]|0,this.v0h=IV$2[1]|0,this.v1l=IV$2[2]|0,this.v1h=IV$2[3]|0,this.v2l=IV$2[4]|0,this.v2h=IV$2[5]|0,this.v3l=IV$2[6]|0,this.v3h=IV$2[7]|0,this.v4l=IV$2[8]|0,this.v4h=IV$2[9]|0,this.v5l=IV$2[10]|0,this.v5h=IV$2[11]|0,this.v6l=IV$2[12]|0,this.v6h=IV$2[13]|0,this.v7l=IV$2[14]|0,this.v7h=IV$2[15]|0;const x=_.key?_.key.length:0;if(this.v0l^=this.outputLen|x<<8|65536|1<<24,_.salt){const E=(0,utils_js_1$7.u32)((0,utils_js_1$7.toBytes)(_.salt));this.v4l^=E[0],this.v4h^=E[1],this.v5l^=E[2],this.v5h^=E[3]}if(_.personalization){const E=(0,utils_js_1$7.u32)((0,utils_js_1$7.toBytes)(_.personalization));this.v6l^=E[0],this.v6h^=E[1],this.v7l^=E[2],this.v7h^=E[3]}if(_.key){const E=new Uint8Array(this.blockLen);E.set((0,utils_js_1$7.toBytes)(_.key)),this.update(E)}}get(){let{v0l:_,v0h:x,v1l:E,v1h:A,v2l:P,v2h:T,v3l:O,v3h:k,v4l:C,v4h:U,v5l:N,v5h:H,v6l:D,v6h:j,v7l:V,v7h:X}=this;return[_,x,E,A,P,T,O,k,C,U,N,H,D,j,V,X]}set(_,x,E,A,P,T,O,k,C,U,N,H,D,j,V,X){this.v0l=_|0,this.v0h=x|0,this.v1l=E|0,this.v1h=A|0,this.v2l=P|0,this.v2h=T|0,this.v3l=O|0,this.v3h=k|0,this.v4l=C|0,this.v4h=U|0,this.v5l=N|0,this.v5h=H|0,this.v6l=D|0,this.v6h=j|0,this.v7l=V|0,this.v7h=X|0}compress(_,x,E){this.get().forEach((k,C)=>BUF$1[C]=k),BUF$1.set(IV$2,16);let{h:A,l:P}=u64$1.fromBig(BigInt(this.length));BUF$1[24]=IV$2[8]^P,BUF$1[25]=IV$2[9]^A,E&&(BUF$1[28]=~BUF$1[28],BUF$1[29]=~BUF$1[29]);let T=0;const O=blake2$1.SIGMA;for(let k=0;k<12;k++)G1(0,4,8,12,_,x+2*O[T++]),G2(0,4,8,12,_,x+2*O[T++]),G1(1,5,9,13,_,x+2*O[T++]),G2(1,5,9,13,_,x+2*O[T++]),G1(2,6,10,14,_,x+2*O[T++]),G2(2,6,10,14,_,x+2*O[T++]),G1(3,7,11,15,_,x+2*O[T++]),G2(3,7,11,15,_,x+2*O[T++]),G1(0,5,10,15,_,x+2*O[T++]),G2(0,5,10,15,_,x+2*O[T++]),G1(1,6,11,12,_,x+2*O[T++]),G2(1,6,11,12,_,x+2*O[T++]),G1(2,7,8,13,_,x+2*O[T++]),G2(2,7,8,13,_,x+2*O[T++]),G1(3,4,9,14,_,x+2*O[T++]),G2(3,4,9,14,_,x+2*O[T++]);this.v0l^=BUF$1[0]^BUF$1[16],this.v0h^=BUF$1[1]^BUF$1[17],this.v1l^=BUF$1[2]^BUF$1[18],this.v1h^=BUF$1[3]^BUF$1[19],this.v2l^=BUF$1[4]^BUF$1[20],this.v2h^=BUF$1[5]^BUF$1[21],this.v3l^=BUF$1[6]^BUF$1[22],this.v3h^=BUF$1[7]^BUF$1[23],this.v4l^=BUF$1[8]^BUF$1[24],this.v4h^=BUF$1[9]^BUF$1[25],this.v5l^=BUF$1[10]^BUF$1[26],this.v5h^=BUF$1[11]^BUF$1[27],this.v6l^=BUF$1[12]^BUF$1[28],this.v6h^=BUF$1[13]^BUF$1[29],this.v7l^=BUF$1[14]^BUF$1[30],this.v7h^=BUF$1[15]^BUF$1[31],BUF$1.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}blake2b.blake2b=(0,utils_js_1$7.wrapConstructorWithOpts)(v=>new BLAKE2b(v)),function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.sha3_512=v.sha3_256=v.ripemd160=v.sha512=v.sha256=v.blake2=v.keccak256=v.keccak=v.hash160=v.doubleSha256=void 0;const _=sha256$6;Object.defineProperty(v,"sha256",{enumerable:!0,get:function(){return _.sha256}});const x=sha512$3;Object.defineProperty(v,"sha512",{enumerable:!0,get:function(){return x.sha512}});const E=ripemd160$4;Object.defineProperty(v,"ripemd160",{enumerable:!0,get:function(){return E.ripemd160}});const A=sha3$1;Object.defineProperty(v,"sha3_256",{enumerable:!0,get:function(){return A.sha3_256}}),Object.defineProperty(v,"sha3_512",{enumerable:!0,get:function(){return A.sha3_512}});const P=blake2b;function T(N){const H=(0,_.sha256)(N);return(0,_.sha256)(H)}v.doubleSha256=T;function O(N){const H=(0,_.sha256)(N);return(0,E.ripemd160)(H)}v.hash160=O;const k=function(N,H=256){const D=dist$4.Buffer.from(N);switch(H){case 224:return dist$4.Buffer.from((0,A.keccak_224)(D));case 256:return dist$4.Buffer.from((0,A.keccak_256)(D));case 384:return dist$4.Buffer.from((0,A.keccak_384)(D));case 512:return dist$4.Buffer.from((0,A.keccak_512)(D));default:throw new Error(`Invald algorithm: keccak${H}`)}};v.keccak=k;const C=function(N){return(0,v.keccak)(N)};v.keccak256=C;function U(N,H,D){const j=Math.ceil(H/8);return(0,P.blake2b)(N,{dkLen:j,key:D})}v.blake2=U}(hash$6);var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(_,x){x&&(_.super_=x,_.prototype=Object.create(x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(_,x){if(x){_.super_=x;var E=function(){};E.prototype=x.prototype,_.prototype=new E,_.prototype.constructor=_}};var inherits_browserExports=inherits_browser.exports,safeBuffer$1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(v,_){var x=bufferPolyfill,E=x.Buffer;function A(T,O){for(var k in T)O[k]=T[k]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?v.exports=x:(A(x,_),_.Buffer=P);function P(T,O,k){return E(T,O,k)}P.prototype=Object.create(E.prototype),A(E,P),P.from=function(T,O,k){if(typeof T=="number")throw new TypeError("Argument must not be a number");return E(T,O,k)},P.alloc=function(T,O,k){if(typeof T!="number")throw new TypeError("Argument must be a number");var C=E(T);return O!==void 0?typeof k=="string"?C.fill(O,k):C.fill(O):C.fill(0),C},P.allocUnsafe=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return E(T)},P.allocUnsafeSlow=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return x.SlowBuffer(T)}})(safeBuffer$1,safeBuffer$1.exports);var safeBufferExports=safeBuffer$1.exports,readableBrowser={exports:{}},events={exports:{}},R$1=typeof Reflect=="object"?Reflect:null,ReflectApply=R$1&&typeof R$1.apply=="function"?R$1.apply:function(_,x,E){return Function.prototype.apply.call(_,x,E)},ReflectOwnKeys;R$1&&typeof R$1.ownKeys=="function"?ReflectOwnKeys=R$1.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_)};function ProcessEmitWarning(v){console&&console.warn&&console.warn(v)}var NumberIsNaN=Number.isNaN||function(_){return _!==_};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1,events.exports.once=once$2,EventEmitter$1.EventEmitter=EventEmitter$1,EventEmitter$1.prototype._events=void 0,EventEmitter$1.prototype._eventsCount=0,EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(v){if(typeof v!="number"||v<0||NumberIsNaN(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");defaultMaxListeners=v}}),EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter$1.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||NumberIsNaN(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function _getMaxListeners(v){return v._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:v._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter$1.prototype.emit=function(_){for(var x=[],E=1;E<arguments.length;E++)x.push(arguments[E]);var A=_==="error",P=this._events;if(P!==void 0)A=A&&P.error===void 0;else if(!A)return!1;if(A){var T;if(x.length>0&&(T=x[0]),T instanceof Error)throw T;var O=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw O.context=T,O}var k=P[_];if(k===void 0)return!1;if(typeof k=="function")ReflectApply(k,this,x);else for(var C=k.length,U=arrayClone(k,C),E=0;E<C;++E)ReflectApply(U[E],this,x);return!0};function _addListener(v,_,x,E){var A,P,T;if(checkListener(x),P=v._events,P===void 0?(P=v._events=Object.create(null),v._eventsCount=0):(P.newListener!==void 0&&(v.emit("newListener",_,x.listener?x.listener:x),P=v._events),T=P[_]),T===void 0)T=P[_]=x,++v._eventsCount;else if(typeof T=="function"?T=P[_]=E?[x,T]:[T,x]:E?T.unshift(x):T.push(x),A=_getMaxListeners(v),A>0&&T.length>A&&!T.warned){T.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=v,O.type=_,O.count=T.length,ProcessEmitWarning(O)}return v}EventEmitter$1.prototype.addListener=function(_,x){return _addListener(this,_,x,!1)},EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener,EventEmitter$1.prototype.prependListener=function(_,x){return _addListener(this,_,x,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(v,_,x){var E={fired:!1,wrapFn:void 0,target:v,type:_,listener:x},A=onceWrapper.bind(E);return A.listener=x,E.wrapFn=A,A}EventEmitter$1.prototype.once=function(_,x){return checkListener(x),this.on(_,_onceWrap(this,_,x)),this},EventEmitter$1.prototype.prependOnceListener=function(_,x){return checkListener(x),this.prependListener(_,_onceWrap(this,_,x)),this},EventEmitter$1.prototype.removeListener=function(_,x){var E,A,P,T,O;if(checkListener(x),A=this._events,A===void 0)return this;if(E=A[_],E===void 0)return this;if(E===x||E.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete A[_],A.removeListener&&this.emit("removeListener",_,E.listener||x));else if(typeof E!="function"){for(P=-1,T=E.length-1;T>=0;T--)if(E[T]===x||E[T].listener===x){O=E[T].listener,P=T;break}if(P<0)return this;P===0?E.shift():spliceOne(E,P),E.length===1&&(A[_]=E[0]),A.removeListener!==void 0&&this.emit("removeListener",_,O||x)}return this},EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener,EventEmitter$1.prototype.removeAllListeners=function(_){var x,E,A;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[_]),this;if(arguments.length===0){var P=Object.keys(E),T;for(A=0;A<P.length;++A)T=P[A],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=E[_],typeof x=="function")this.removeListener(_,x);else if(x!==void 0)for(A=x.length-1;A>=0;A--)this.removeListener(_,x[A]);return this};function _listeners(v,_,x){var E=v._events;if(E===void 0)return[];var A=E[_];return A===void 0?[]:typeof A=="function"?x?[A.listener||A]:[A]:x?unwrapListeners(A):arrayClone(A,A.length)}EventEmitter$1.prototype.listeners=function(_){return _listeners(this,_,!0)},EventEmitter$1.prototype.rawListeners=function(_){return _listeners(this,_,!1)},EventEmitter$1.listenerCount=function(v,_){return typeof v.listenerCount=="function"?v.listenerCount(_):listenerCount.call(v,_)},EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(v){var _=this._events;if(_!==void 0){var x=_[v];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(v,_){for(var x=new Array(_),E=0;E<_;++E)x[E]=v[E];return x}function spliceOne(v,_){for(;_+1<v.length;_++)v[_]=v[_+1];v.pop()}function unwrapListeners(v){for(var _=new Array(v.length),x=0;x<_.length;++x)_[x]=v[x].listener||v[x];return _}function once$2(v,_){return new Promise(function(x,E){function A(T){v.removeListener(_,P),E(T)}function P(){typeof v.removeListener=="function"&&v.removeListener("error",A),x([].slice.call(arguments))}eventTargetAgnosticAddListener(v,_,P,{once:!0}),_!=="error"&&addErrorHandlerIfEventEmitter(v,A,{once:!0})})}function addErrorHandlerIfEventEmitter(v,_,x){typeof v.on=="function"&&eventTargetAgnosticAddListener(v,"error",_,x)}function eventTargetAgnosticAddListener(v,_,x,E){if(typeof v.on=="function")E.once?v.once(_,x):v.on(_,x);else if(typeof v.addEventListener=="function")v.addEventListener(_,function A(P){E.once&&v.removeEventListener(_,A),x(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}var eventsExports=events.exports,streamBrowser=eventsExports.EventEmitter,util$9={},types$c={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},x=Symbol("test"),E=Object(x);if(typeof x=="string"||Object.prototype.toString.call(x)!=="[object Symbol]"||Object.prototype.toString.call(E)!=="[object Symbol]")return!1;var A=42;_[x]=A;for(x in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var P=Object.getOwnPropertySymbols(_);if(P.length!==1||P[0]!==x||!Object.prototype.propertyIsEnumerable.call(_,x))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var T=Object.getOwnPropertyDescriptor(_,x);if(T.value!==A||T.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function(){return hasSymbols$2()&&!!Symbol.toStringTag},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(_,x){for(var E=[],A=0;A<_.length;A+=1)E[A]=_[A];for(var P=0;P<x.length;P+=1)E[P+_.length]=x[P];return E},slicy=function(_,x){for(var E=[],A=x||0,P=0;A<_.length;A+=1,P+=1)E[P]=_[A];return E},joiny=function(v,_){for(var x="",E=0;E<v.length;E+=1)x+=v[E],E+1<v.length&&(x+=_);return x},implementation$1=function(_){var x=this;if(typeof x!="function"||toStr$3.apply(x)!==funcType)throw new TypeError(ERROR_MESSAGE+x);for(var E=slicy(arguments,1),A,P=function(){if(this instanceof A){var U=x.apply(this,concatty(E,arguments));return Object(U)===U?U:this}return x.apply(_,concatty(E,arguments))},T=max(0,x.length-E.length),O=[],k=0;k<T;k++)O[k]="$"+k;if(A=Function("binder","return function ("+joiny(O,",")+"){ return binder.apply(this,arguments); }")(P),x.prototype){var C=function(){};C.prototype=x.prototype,A.prototype=new C,C.prototype=null}return A},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call$1=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$2=functionBind,hasown=bind$2.call(call$1,$hasOwn),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(v){try{return $Function('"use strict"; return ('+v+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(v){return v.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(v){var errorProto=getProto$1(getProto$1(v));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function v(_){var x;if(_==="%AsyncFunction%")x=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")x=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")x=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var E=v("%AsyncGeneratorFunction%");E&&(x=E.prototype)}else if(_==="%AsyncIteratorPrototype%"){var A=v("%AsyncGenerator%");A&&getProto$1&&(x=getProto$1(A.prototype))}return INTRINSICS[_]=x,x},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn=hasown,$concat=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(_){var x=$strSlice(_,0,1),E=$strSlice(_,-1);if(x==="%"&&E!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(E==="%"&&x!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var A=[];return $replace(_,rePropName,function(P,T,O,k){A[A.length]=O?$replace(k,reEscapeChar,"$1"):T||P}),A},getBaseIntrinsic=function(_,x){var E=_,A;if(hasOwn(LEGACY_ALIASES,E)&&(A=LEGACY_ALIASES[E],E="%"+A[0]+"%"),hasOwn(INTRINSICS,E)){var P=INTRINSICS[E];if(P===needsEval&&(P=doEval(E)),typeof P>"u"&&!x)throw new $TypeError$2("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:A,name:E,value:P}}throw new $SyntaxError$1("intrinsic "+_+" does not exist!")},getIntrinsic=function(_,x){if(typeof _!="string"||_.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof x!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var E=stringToPath(_),A=E.length>0?E[0]:"",P=getBaseIntrinsic("%"+A+"%",x),T=P.name,O=P.value,k=!1,C=P.alias;C&&(A=C[0],$spliceApply(E,$concat([0,1],C)));for(var U=1,N=!0;U<E.length;U+=1){var H=E[U],D=$strSlice(H,0,1),j=$strSlice(H,-1);if((D==='"'||D==="'"||D==="`"||j==='"'||j==="'"||j==="`")&&D!==j)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((H==="constructor"||!N)&&(k=!0),A+="."+H,T="%"+A+"%",hasOwn(INTRINSICS,T))O=INTRINSICS[T];else if(O!=null){if(!(H in O)){if(!x)throw new $TypeError$2("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD$1&&U+1>=E.length){var V=$gOPD$1(O,H);N=!!V,N&&"get"in V&&!("originalValue"in V.get)?O=V.get:O=O[H]}else N=hasOwn(O,H),O=O[H];N&&!k&&(INTRINSICS[T]=O)}}return O},callBind$2={exports:{}},GetIntrinsic$4=getIntrinsic,$defineProperty$1=GetIntrinsic$4("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$2=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$2("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$2("%SyntaxError%"),$TypeError$1=GetIntrinsic$2("%TypeError%"),gopd=gopd$1,defineDataProperty=function(_,x,E){if(!_||typeof _!="object"&&typeof _!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof x!="string"&&typeof x!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var A=arguments.length>3?arguments[3]:null,P=arguments.length>4?arguments[4]:null,T=arguments.length>5?arguments[5]:null,O=arguments.length>6?arguments[6]:!1,k=!!gopd&&gopd(_,x);if($defineProperty)$defineProperty(_,x,{configurable:T===null&&k?k.configurable:!T,enumerable:A===null&&k?k.enumerable:!A,value:E,writable:P===null&&k?k.writable:!P});else if(O||!A&&!P&&!T)_[x]=E;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$1=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=GetIntrinsic$1("%TypeError%"),$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function(_,x){if(typeof _!="function")throw new $TypeError("`fn` is not a function");if(typeof x!="number"||x<0||x>4294967295||$floor(x)!==x)throw new $TypeError("`length` must be a positive 32-bit integer");var E=arguments.length>2&&!!arguments[2],A=!0,P=!0;if("length"in _&&gOPD$1){var T=gOPD$1(_,"length");T&&!T.configurable&&(A=!1),T&&!T.writable&&(P=!1)}return(A||P||!E)&&(hasDescriptors?define(_,"length",x,!0,!0):define(_,"length",x)),_};(function(v){var _=functionBind,x=getIntrinsic,E=setFunctionLength,A=x("%TypeError%"),P=x("%Function.prototype.apply%"),T=x("%Function.prototype.call%"),O=x("%Reflect.apply%",!0)||_.call(T,P),k=x("%Object.defineProperty%",!0),C=x("%Math.max%");if(k)try{k({},"a",{value:1})}catch{k=null}v.exports=function(H){if(typeof H!="function")throw new A("a function is required");var D=O(_,T,arguments);return E(D,1+C(0,H.length-(arguments.length-1)),!0)};var U=function(){return O(_,P,arguments)};k?k(v.exports,"apply",{value:U}):v.exports.apply=U})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$2=function(_,x){var E=GetIntrinsic(_,!!x);return typeof E=="function"&&$indexOf$1(_,".prototype.")>-1?callBind$1(E):E},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function(_){return hasToStringTag$3&&_&&typeof _=="object"&&Symbol.toStringTag in _?!1:$toString$1(_)==="[object Arguments]"},isLegacyArguments=function(_){return isStandardArguments(_)?!0:_!==null&&typeof _=="object"&&typeof _.length=="number"&&_.length>=0&&$toString$1(_)!=="[object Array]"&&$toString$1(_.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(_){if(typeof _!="function")return!1;if(isFnRegex.test(fnToStr$1.call(_)))return!0;if(!hasToStringTag$2){var x=toStr$2.call(_);return x==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var E=getGeneratorFunc();GeneratorFunction=E?getProto(E):!1}return getProto(_)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(v){v!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(_){try{var x=fnToStr.call(_);return constructorRegex.test(x)}catch{return!1}},tryFunctionObject=function(_){try{return isES6ClassFn(_)?!1:(fnToStr.call(_),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$1.call(all)===toStr$1.call(document.all)&&(isDDA=function(_){if((isIE68||!_)&&(typeof _>"u"||typeof _=="object"))try{var x=toStr$1.call(_);return(x===ddaClass||x===ddaClass2||x===ddaClass3||x===objectClass)&&_("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(_){if(isDDA(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;try{reflectApply(_,null,badArrayLike)}catch(x){if(x!==isCallableMarker)return!1}return!isES6ClassFn(_)&&tryFunctionObject(_)}:function(_){if(isDDA(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;if(hasToStringTag$1)return tryFunctionObject(_);if(isES6ClassFn(_))return!1;var x=toStr$1.call(_);return x!==fnClass&&x!==genClass&&!/^\[object HTML/.test(x)?!1:tryFunctionObject(_)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$1=Object.prototype.hasOwnProperty,forEachArray=function(_,x,E){for(var A=0,P=_.length;A<P;A++)hasOwnProperty$1.call(_,A)&&(E==null?x(_[A],A,_):x.call(E,_[A],A,_))},forEachString=function(_,x,E){for(var A=0,P=_.length;A<P;A++)E==null?x(_.charAt(A),A,_):x.call(E,_.charAt(A),A,_)},forEachObject=function(_,x,E){for(var A in _)hasOwnProperty$1.call(_,A)&&(E==null?x(_[A],A,_):x.call(E,_[A],A,_))},forEach$2=function(_,x,E){if(!isCallable(x))throw new TypeError("iterator must be a function");var A;arguments.length>=3&&(A=E),toStr.call(_)==="[object Array]"?forEachArray(_,x,A):typeof _=="string"?forEachString(_,x,A):forEachObject(_,x,A)},forEach_1=forEach$2,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$3=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var _=[],x=0;x<possibleNames.length;x++)typeof g$3[possibleNames[x]]=="function"&&(_[_.length]=possibleNames[x]);return _},forEach$1=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g$2=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf$1=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function(_,x){for(var E=0;E<_.length;E+=1)if(_[E]===x)return E;return-1},cache={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf$1?forEach$1(typedArrays,function(v){var _=new g$2[v];if(Symbol.toStringTag in _){var x=getPrototypeOf$1(_),E=gOPD(x,Symbol.toStringTag);if(!E){var A=getPrototypeOf$1(x);E=gOPD(A,Symbol.toStringTag)}cache["$"+v]=callBind(E.get)}}):forEach$1(typedArrays,function(v){var _=new g$2[v],x=_.slice||_.set;x&&(cache["$"+v]=callBind(x))});var tryTypedArrays=function(_){var x=!1;return forEach$1(cache,function(E,A){if(!x)try{"$"+E(_)===A&&(x=$slice(A,1))}catch{}}),x},trySlices=function(_){var x=!1;return forEach$1(cache,function(E,A){if(!x)try{E(_),x=$slice(A,1)}catch{}}),x},whichTypedArray$1=function(_){if(!_||typeof _!="object")return!1;if(!hasToStringTag){var x=$slice($toString(_),8,-1);return $indexOf(typedArrays,x)>-1?x:x!=="Object"?!1:trySlices(_)}return gOPD?tryTypedArrays(_):null},whichTypedArray=whichTypedArray$1,isTypedArray$1=function(_){return!!whichTypedArray(_)};(function(v){var _=isArguments,x=isGeneratorFunction,E=whichTypedArray$1,A=isTypedArray$1;function P(Ge){return Ge.call.bind(Ge)}var T=typeof BigInt<"u",O=typeof Symbol<"u",k=P(Object.prototype.toString),C=P(Number.prototype.valueOf),U=P(String.prototype.valueOf),N=P(Boolean.prototype.valueOf);if(T)var H=P(BigInt.prototype.valueOf);if(O)var D=P(Symbol.prototype.valueOf);function j(Ge,ot){if(typeof Ge!="object")return!1;try{return ot(Ge),!0}catch{return!1}}v.isArgumentsObject=_,v.isGeneratorFunction=x,v.isTypedArray=A;function V(Ge){return typeof Promise<"u"&&Ge instanceof Promise||Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"&&typeof Ge.catch=="function"}v.isPromise=V;function X(Ge){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Ge):A(Ge)||ce(Ge)}v.isArrayBufferView=X;function re(Ge){return E(Ge)==="Uint8Array"}v.isUint8Array=re;function ee(Ge){return E(Ge)==="Uint8ClampedArray"}v.isUint8ClampedArray=ee;function fe(Ge){return E(Ge)==="Uint16Array"}v.isUint16Array=fe;function le(Ge){return E(Ge)==="Uint32Array"}v.isUint32Array=le;function pe(Ge){return E(Ge)==="Int8Array"}v.isInt8Array=pe;function ie(Ge){return E(Ge)==="Int16Array"}v.isInt16Array=ie;function he(Ge){return E(Ge)==="Int32Array"}v.isInt32Array=he;function ae(Ge){return E(Ge)==="Float32Array"}v.isFloat32Array=ae;function te(Ge){return E(Ge)==="Float64Array"}v.isFloat64Array=te;function ue(Ge){return E(Ge)==="BigInt64Array"}v.isBigInt64Array=ue;function ne(Ge){return E(Ge)==="BigUint64Array"}v.isBigUint64Array=ne;function J(Ge){return k(Ge)==="[object Map]"}J.working=typeof Map<"u"&&J(new Map);function q(Ge){return typeof Map>"u"?!1:J.working?J(Ge):Ge instanceof Map}v.isMap=q;function F(Ge){return k(Ge)==="[object Set]"}F.working=typeof Set<"u"&&F(new Set);function L(Ge){return typeof Set>"u"?!1:F.working?F(Ge):Ge instanceof Set}v.isSet=L;function Z(Ge){return k(Ge)==="[object WeakMap]"}Z.working=typeof WeakMap<"u"&&Z(new WeakMap);function Q(Ge){return typeof WeakMap>"u"?!1:Z.working?Z(Ge):Ge instanceof WeakMap}v.isWeakMap=Q;function de(Ge){return k(Ge)==="[object WeakSet]"}de.working=typeof WeakSet<"u"&&de(new WeakSet);function ye(Ge){return de(Ge)}v.isWeakSet=ye;function oe(Ge){return k(Ge)==="[object ArrayBuffer]"}oe.working=typeof ArrayBuffer<"u"&&oe(new ArrayBuffer);function se(Ge){return typeof ArrayBuffer>"u"?!1:oe.working?oe(Ge):Ge instanceof ArrayBuffer}v.isArrayBuffer=se;function Y(Ge){return k(Ge)==="[object DataView]"}Y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Y(new DataView(new ArrayBuffer(1),0,1));function ce(Ge){return typeof DataView>"u"?!1:Y.working?Y(Ge):Ge instanceof DataView}v.isDataView=ce;var we=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Pe(Ge){return k(Ge)==="[object SharedArrayBuffer]"}function Se(Ge){return typeof we>"u"?!1:(typeof Pe.working>"u"&&(Pe.working=Pe(new we)),Pe.working?Pe(Ge):Ge instanceof we)}v.isSharedArrayBuffer=Se;function Be(Ge){return k(Ge)==="[object AsyncFunction]"}v.isAsyncFunction=Be;function Ie(Ge){return k(Ge)==="[object Map Iterator]"}v.isMapIterator=Ie;function Re(Ge){return k(Ge)==="[object Set Iterator]"}v.isSetIterator=Re;function Me(Ge){return k(Ge)==="[object Generator]"}v.isGeneratorObject=Me;function xe(Ge){return k(Ge)==="[object WebAssembly.Module]"}v.isWebAssemblyCompiledModule=xe;function Ee(Ge){return j(Ge,C)}v.isNumberObject=Ee;function Ue(Ge){return j(Ge,U)}v.isStringObject=Ue;function Ke(Ge){return j(Ge,N)}v.isBooleanObject=Ke;function ze(Ge){return T&&j(Ge,H)}v.isBigIntObject=ze;function Ve(Ge){return O&&j(Ge,D)}v.isSymbolObject=Ve;function Je(Ge){return Ee(Ge)||Ue(Ge)||Ke(Ge)||ze(Ge)||Ve(Ge)}v.isBoxedPrimitive=Je;function et(Ge){return typeof Uint8Array<"u"&&(se(Ge)||Se(Ge))}v.isAnyArrayBuffer=et,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Ge){Object.defineProperty(v,Ge,{enumerable:!1,value:function(){throw new Error(Ge+" is not supported in userland")}})})})(types$c);var isBufferBrowser=function(_){return _&&typeof _=="object"&&typeof _.copy=="function"&&typeof _.fill=="function"&&typeof _.readUInt8=="function"};(function(v){var _=Object.getOwnPropertyDescriptors||function(ce){for(var we=Object.keys(ce),Pe={},Se=0;Se<we.length;Se++)Pe[we[Se]]=Object.getOwnPropertyDescriptor(ce,we[Se]);return Pe},x=/%[sdj%]/g;v.format=function(Y){if(!pe(Y)){for(var ce=[],we=0;we<arguments.length;we++)ce.push(T(arguments[we]));return ce.join(" ")}for(var we=1,Pe=arguments,Se=Pe.length,Be=String(Y).replace(x,function(Re){if(Re==="%%")return"%";if(we>=Se)return Re;switch(Re){case"%s":return String(Pe[we++]);case"%d":return Number(Pe[we++]);case"%j":try{return JSON.stringify(Pe[we++])}catch{return"[Circular]"}default:return Re}}),Ie=Pe[we];we<Se;Ie=Pe[++we])ee(Ie)||!te(Ie)?Be+=" "+Ie:Be+=" "+T(Ie);return Be},v.deprecate=function(Y,ce){if(typeof dist$4.process<"u"&&dist$4.process.noDeprecation===!0)return Y;if(typeof dist$4.process>"u")return function(){return v.deprecate(Y,ce).apply(this,arguments)};var we=!1;function Pe(){if(!we){if(dist$4.process.throwDeprecation)throw new Error(ce);dist$4.process.traceDeprecation?console.trace(ce):console.error(ce),we=!0}return Y.apply(this,arguments)}return Pe};var E={},A=/^$/;if(dist$4.process.env.NODE_DEBUG){var P=dist$4.process.env.NODE_DEBUG;P=P.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),A=new RegExp("^"+P+"$","i")}v.debuglog=function(Y){if(Y=Y.toUpperCase(),!E[Y])if(A.test(Y)){var ce=dist$4.process.pid;E[Y]=function(){var we=v.format.apply(v,arguments);console.error("%s %d: %s",Y,ce,we)}}else E[Y]=function(){};return E[Y]};function T(Y,ce){var we={seen:[],stylize:k};return arguments.length>=3&&(we.depth=arguments[2]),arguments.length>=4&&(we.colors=arguments[3]),re(ce)?we.showHidden=ce:ce&&v._extend(we,ce),he(we.showHidden)&&(we.showHidden=!1),he(we.depth)&&(we.depth=2),he(we.colors)&&(we.colors=!1),he(we.customInspect)&&(we.customInspect=!0),we.colors&&(we.stylize=O),U(we,Y,we.depth)}v.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function O(Y,ce){var we=T.styles[ce];return we?"\x1B["+T.colors[we][0]+"m"+Y+"\x1B["+T.colors[we][1]+"m":Y}function k(Y,ce){return Y}function C(Y){var ce={};return Y.forEach(function(we,Pe){ce[we]=!0}),ce}function U(Y,ce,we){if(Y.customInspect&&ce&&J(ce.inspect)&&ce.inspect!==v.inspect&&!(ce.constructor&&ce.constructor.prototype===ce)){var Pe=ce.inspect(we,Y);return pe(Pe)||(Pe=U(Y,Pe,we)),Pe}var Se=N(Y,ce);if(Se)return Se;var Be=Object.keys(ce),Ie=C(Be);if(Y.showHidden&&(Be=Object.getOwnPropertyNames(ce)),ne(ce)&&(Be.indexOf("message")>=0||Be.indexOf("description")>=0))return H(ce);if(Be.length===0){if(J(ce)){var Re=ce.name?": "+ce.name:"";return Y.stylize("[Function"+Re+"]","special")}if(ae(ce))return Y.stylize(RegExp.prototype.toString.call(ce),"regexp");if(ue(ce))return Y.stylize(Date.prototype.toString.call(ce),"date");if(ne(ce))return H(ce)}var Me="",xe=!1,Ee=["{","}"];if(X(ce)&&(xe=!0,Ee=["[","]"]),J(ce)){var Ue=ce.name?": "+ce.name:"";Me=" [Function"+Ue+"]"}if(ae(ce)&&(Me=" "+RegExp.prototype.toString.call(ce)),ue(ce)&&(Me=" "+Date.prototype.toUTCString.call(ce)),ne(ce)&&(Me=" "+H(ce)),Be.length===0&&(!xe||ce.length==0))return Ee[0]+Me+Ee[1];if(we<0)return ae(ce)?Y.stylize(RegExp.prototype.toString.call(ce),"regexp"):Y.stylize("[Object]","special");Y.seen.push(ce);var Ke;return xe?Ke=D(Y,ce,we,Ie,Be):Ke=Be.map(function(ze){return j(Y,ce,we,Ie,ze,xe)}),Y.seen.pop(),V(Ke,Me,Ee)}function N(Y,ce){if(he(ce))return Y.stylize("undefined","undefined");if(pe(ce)){var we="'"+JSON.stringify(ce).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Y.stylize(we,"string")}if(le(ce))return Y.stylize(""+ce,"number");if(re(ce))return Y.stylize(""+ce,"boolean");if(ee(ce))return Y.stylize("null","null")}function H(Y){return"["+Error.prototype.toString.call(Y)+"]"}function D(Y,ce,we,Pe,Se){for(var Be=[],Ie=0,Re=ce.length;Ie<Re;++Ie)de(ce,String(Ie))?Be.push(j(Y,ce,we,Pe,String(Ie),!0)):Be.push("");return Se.forEach(function(Me){Me.match(/^\d+$/)||Be.push(j(Y,ce,we,Pe,Me,!0))}),Be}function j(Y,ce,we,Pe,Se,Be){var Ie,Re,Me;if(Me=Object.getOwnPropertyDescriptor(ce,Se)||{value:ce[Se]},Me.get?Me.set?Re=Y.stylize("[Getter/Setter]","special"):Re=Y.stylize("[Getter]","special"):Me.set&&(Re=Y.stylize("[Setter]","special")),de(Pe,Se)||(Ie="["+Se+"]"),Re||(Y.seen.indexOf(Me.value)<0?(ee(we)?Re=U(Y,Me.value,null):Re=U(Y,Me.value,we-1),Re.indexOf(`
`)>-1&&(Be?Re=Re.split(`
`).map(function(xe){return"  "+xe}).join(`
`).slice(2):Re=`
`+Re.split(`
`).map(function(xe){return"   "+xe}).join(`
`))):Re=Y.stylize("[Circular]","special")),he(Ie)){if(Be&&Se.match(/^\d+$/))return Re;Ie=JSON.stringify(""+Se),Ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ie=Ie.slice(1,-1),Ie=Y.stylize(Ie,"name")):(Ie=Ie.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ie=Y.stylize(Ie,"string"))}return Ie+": "+Re}function V(Y,ce,we){var Pe=Y.reduce(function(Se,Be){return Be.indexOf(`
`)>=0,Se+Be.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Pe>60?we[0]+(ce===""?"":ce+`
 `)+" "+Y.join(`,
  `)+" "+we[1]:we[0]+ce+" "+Y.join(", ")+" "+we[1]}v.types=types$c;function X(Y){return Array.isArray(Y)}v.isArray=X;function re(Y){return typeof Y=="boolean"}v.isBoolean=re;function ee(Y){return Y===null}v.isNull=ee;function fe(Y){return Y==null}v.isNullOrUndefined=fe;function le(Y){return typeof Y=="number"}v.isNumber=le;function pe(Y){return typeof Y=="string"}v.isString=pe;function ie(Y){return typeof Y=="symbol"}v.isSymbol=ie;function he(Y){return Y===void 0}v.isUndefined=he;function ae(Y){return te(Y)&&F(Y)==="[object RegExp]"}v.isRegExp=ae,v.types.isRegExp=ae;function te(Y){return typeof Y=="object"&&Y!==null}v.isObject=te;function ue(Y){return te(Y)&&F(Y)==="[object Date]"}v.isDate=ue,v.types.isDate=ue;function ne(Y){return te(Y)&&(F(Y)==="[object Error]"||Y instanceof Error)}v.isError=ne,v.types.isNativeError=ne;function J(Y){return typeof Y=="function"}v.isFunction=J;function q(Y){return Y===null||typeof Y=="boolean"||typeof Y=="number"||typeof Y=="string"||typeof Y=="symbol"||typeof Y>"u"}v.isPrimitive=q,v.isBuffer=isBufferBrowser;function F(Y){return Object.prototype.toString.call(Y)}function L(Y){return Y<10?"0"+Y.toString(10):Y.toString(10)}var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Q(){var Y=new Date,ce=[L(Y.getHours()),L(Y.getMinutes()),L(Y.getSeconds())].join(":");return[Y.getDate(),Z[Y.getMonth()],ce].join(" ")}v.log=function(){console.log("%s - %s",Q(),v.format.apply(v,arguments))},v.inherits=inherits_browserExports,v._extend=function(Y,ce){if(!ce||!te(ce))return Y;for(var we=Object.keys(ce),Pe=we.length;Pe--;)Y[we[Pe]]=ce[we[Pe]];return Y};function de(Y,ce){return Object.prototype.hasOwnProperty.call(Y,ce)}var ye=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;v.promisify=function(ce){if(typeof ce!="function")throw new TypeError('The "original" argument must be of type Function');if(ye&&ce[ye]){var we=ce[ye];if(typeof we!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(we,ye,{value:we,enumerable:!1,writable:!1,configurable:!0}),we}function we(){for(var Pe,Se,Be=new Promise(function(Me,xe){Pe=Me,Se=xe}),Ie=[],Re=0;Re<arguments.length;Re++)Ie.push(arguments[Re]);Ie.push(function(Me,xe){Me?Se(Me):Pe(xe)});try{ce.apply(this,Ie)}catch(Me){Se(Me)}return Be}return Object.setPrototypeOf(we,Object.getPrototypeOf(ce)),ye&&Object.defineProperty(we,ye,{value:we,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(we,_(ce))},v.promisify.custom=ye;function oe(Y,ce){if(!Y){var we=new Error("Promise was rejected with a falsy value");we.reason=Y,Y=we}return ce(Y)}function se(Y){if(typeof Y!="function")throw new TypeError('The "original" argument must be of type Function');function ce(){for(var we=[],Pe=0;Pe<arguments.length;Pe++)we.push(arguments[Pe]);var Se=we.pop();if(typeof Se!="function")throw new TypeError("The last argument must be of type Function");var Be=this,Ie=function(){return Se.apply(Be,arguments)};Y.apply(this,we).then(function(Re){dist$4.process.nextTick(Ie.bind(null,null,Re))},function(Re){dist$4.process.nextTick(oe.bind(null,Re,Ie))})}return Object.setPrototypeOf(ce,Object.getPrototypeOf(Y)),Object.defineProperties(ce,_(Y)),ce}v.callbackify=se})(util$9);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function v(j,V){var X=Object.keys(j);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(j);V&&(re=re.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),X.push.apply(X,re)}return X}function _(j){for(var V=1;V<arguments.length;V++){var X=arguments[V]!=null?arguments[V]:{};V%2?v(Object(X),!0).forEach(function(re){x(j,re,X[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(X)):v(Object(X)).forEach(function(re){Object.defineProperty(j,re,Object.getOwnPropertyDescriptor(X,re))})}return j}function x(j,V,X){return V=T(V),V in j?Object.defineProperty(j,V,{value:X,enumerable:!0,configurable:!0,writable:!0}):j[V]=X,j}function E(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function A(j,V){for(var X=0;X<V.length;X++){var re=V[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(j,T(re.key),re)}}function P(j,V,X){return V&&A(j.prototype,V),X&&A(j,X),Object.defineProperty(j,"prototype",{writable:!1}),j}function T(j){var V=O(j,"string");return typeof V=="symbol"?V:String(V)}function O(j,V){if(typeof j!="object"||j===null)return j;var X=j[Symbol.toPrimitive];if(X!==void 0){var re=X.call(j,V||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(j)}var k=bufferPolyfill,C=k.Buffer,U=util$9,N=U.inspect,H=N&&N.custom||"inspect";function D(j,V,X){C.prototype.copy.call(j,V,X)}return buffer_list=function(){function j(){E(this,j),this.head=null,this.tail=null,this.length=0}return P(j,[{key:"push",value:function(X){var re={data:X,next:null};this.length>0?this.tail.next=re:this.head=re,this.tail=re,++this.length}},{key:"unshift",value:function(X){var re={data:X,next:this.head};this.length===0&&(this.tail=re),this.head=re,++this.length}},{key:"shift",value:function(){if(this.length!==0){var X=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,X}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(X){if(this.length===0)return"";for(var re=this.head,ee=""+re.data;re=re.next;)ee+=X+re.data;return ee}},{key:"concat",value:function(X){if(this.length===0)return C.alloc(0);for(var re=C.allocUnsafe(X>>>0),ee=this.head,fe=0;ee;)D(ee.data,re,fe),fe+=ee.data.length,ee=ee.next;return re}},{key:"consume",value:function(X,re){var ee;return X<this.head.data.length?(ee=this.head.data.slice(0,X),this.head.data=this.head.data.slice(X)):X===this.head.data.length?ee=this.shift():ee=re?this._getString(X):this._getBuffer(X),ee}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(X){var re=this.head,ee=1,fe=re.data;for(X-=fe.length;re=re.next;){var le=re.data,pe=X>le.length?le.length:X;if(pe===le.length?fe+=le:fe+=le.slice(0,X),X-=pe,X===0){pe===le.length?(++ee,re.next?this.head=re.next:this.head=this.tail=null):(this.head=re,re.data=le.slice(pe));break}++ee}return this.length-=ee,fe}},{key:"_getBuffer",value:function(X){var re=C.allocUnsafe(X),ee=this.head,fe=1;for(ee.data.copy(re),X-=ee.data.length;ee=ee.next;){var le=ee.data,pe=X>le.length?le.length:X;if(le.copy(re,re.length-X,0,pe),X-=pe,X===0){pe===le.length?(++fe,ee.next?this.head=ee.next:this.head=this.tail=null):(this.head=ee,ee.data=le.slice(pe));break}++fe}return this.length-=fe,re}},{key:H,value:function(X,re){return N(this,_(_({},re),{},{depth:0,customInspect:!1}))}}]),j}(),buffer_list}function destroy(v,_){var x=this,E=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return E||A?(_?_(v):v&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,dist$4.process.nextTick(emitErrorNT,this,v)):dist$4.process.nextTick(emitErrorNT,this,v)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(v||null,function(P){!_&&P?x._writableState?x._writableState.errorEmitted?dist$4.process.nextTick(emitCloseNT,x):(x._writableState.errorEmitted=!0,dist$4.process.nextTick(emitErrorAndCloseNT,x,P)):dist$4.process.nextTick(emitErrorAndCloseNT,x,P):_?(dist$4.process.nextTick(emitCloseNT,x),_(P)):dist$4.process.nextTick(emitCloseNT,x)}),this)}function emitErrorAndCloseNT(v,_){emitErrorNT(v,_),emitCloseNT(v)}function emitCloseNT(v){v._writableState&&!v._writableState.emitClose||v._readableState&&!v._readableState.emitClose||v.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(v,_){v.emit("error",_)}function errorOrDestroy(v,_){var x=v._readableState,E=v._writableState;x&&x.autoDestroy||E&&E.autoDestroy?v.destroy(_):v.emit("error",_)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(v,_){v.prototype=Object.create(_.prototype),v.prototype.constructor=v,v.__proto__=_}var codes={};function createErrorType(v,_,x){x||(x=Error);function E(P,T,O){return typeof _=="string"?_:_(P,T,O)}var A=function(P){_inheritsLoose(T,P);function T(O,k,C){return P.call(this,E(O,k,C))||this}return T}(x);A.prototype.name=x.name,A.prototype.code=v,codes[v]=A}function oneOf(v,_){if(Array.isArray(v)){var x=v.length;return v=v.map(function(E){return String(E)}),x>2?"one of ".concat(_," ").concat(v.slice(0,x-1).join(", "),", or ")+v[x-1]:x===2?"one of ".concat(_," ").concat(v[0]," or ").concat(v[1]):"of ".concat(_," ").concat(v[0])}else return"of ".concat(_," ").concat(String(v))}function startsWith(v,_,x){return v.substr(!x||x<0?0:+x,_.length)===_}function endsWith$1(v,_,x){return(x===void 0||x>v.length)&&(x=v.length),v.substring(x-_.length,x)===_}function includes(v,_,x){return typeof x!="number"&&(x=0),x+_.length>v.length?!1:v.indexOf(_,x)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(v,_){return'The value "'+_+'" is invalid for option "'+v+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(v,_,x){var E;typeof _=="string"&&startsWith(_,"not ")?(E="must not be",_=_.replace(/^not /,"")):E="must be";var A;if(endsWith$1(v," argument"))A="The ".concat(v," ").concat(E," ").concat(oneOf(_,"type"));else{var P=includes(v,".")?"property":"argument";A='The "'.concat(v,'" ').concat(P," ").concat(E," ").concat(oneOf(_,"type"))}return A+=". Received type ".concat(typeof x),A},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(v,_,x){return v.highWaterMark!=null?v.highWaterMark:_?v[x]:null}function getHighWaterMark(v,_,x,E){var A=highWaterMarkFrom(_,E,x);if(A!=null){if(!(isFinite(A)&&Math.floor(A)===A)||A<0){var P=E?x:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(P,A)}return Math.floor(A)}return v.objectMode?16:16*1024}var state={getHighWaterMark},browser$c=deprecate;function deprecate(v,_){if(config("noDeprecation"))return v;var x=!1;function E(){if(!x){if(config("throwDeprecation"))throw new Error(_);config("traceDeprecation")?console.trace(_):console.warn(_),x=!0}return v.apply(this,arguments)}return E}function config(v){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var _=commonjsGlobal.localStorage[v];return _==null?!1:String(_).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=ae;function v(Se){var Be=this;this.next=null,this.entry=null,this.finish=function(){Pe(Be,Se)}}var _;ae.WritableState=ie;var x={deprecate:browser$c},E=streamBrowser,A=bufferPolyfill.Buffer,P=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function T(Se){return A.from(Se)}function O(Se){return A.isBuffer(Se)||Se instanceof P}var k=destroy_1,C=state,U=C.getHighWaterMark,N=errorsBrowser.codes,H=N.ERR_INVALID_ARG_TYPE,D=N.ERR_METHOD_NOT_IMPLEMENTED,j=N.ERR_MULTIPLE_CALLBACK,V=N.ERR_STREAM_CANNOT_PIPE,X=N.ERR_STREAM_DESTROYED,re=N.ERR_STREAM_NULL_VALUES,ee=N.ERR_STREAM_WRITE_AFTER_END,fe=N.ERR_UNKNOWN_ENCODING,le=k.errorOrDestroy;inherits_browserExports(ae,E);function pe(){}function ie(Se,Be,Ie){_=_||require_stream_duplex(),Se=Se||{},typeof Ie!="boolean"&&(Ie=Be instanceof _),this.objectMode=!!Se.objectMode,Ie&&(this.objectMode=this.objectMode||!!Se.writableObjectMode),this.highWaterMark=U(this,Se,"writableHighWaterMark",Ie),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Re=Se.decodeStrings===!1;this.decodeStrings=!Re,this.defaultEncoding=Se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Me){Z(Be,Me)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Se.emitClose!==!1,this.autoDestroy=!!Se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new v(this)}ie.prototype.getBuffer=function(){for(var Be=this.bufferedRequest,Ie=[];Be;)Ie.push(Be),Be=Be.next;return Ie},function(){try{Object.defineProperty(ie.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var he;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(he=Function.prototype[Symbol.hasInstance],Object.defineProperty(ae,Symbol.hasInstance,{value:function(Be){return he.call(this,Be)?!0:this!==ae?!1:Be&&Be._writableState instanceof ie}})):he=function(Be){return Be instanceof this};function ae(Se){_=_||require_stream_duplex();var Be=this instanceof _;if(!Be&&!he.call(ae,this))return new ae(Se);this._writableState=new ie(Se,this,Be),this.writable=!0,Se&&(typeof Se.write=="function"&&(this._write=Se.write),typeof Se.writev=="function"&&(this._writev=Se.writev),typeof Se.destroy=="function"&&(this._destroy=Se.destroy),typeof Se.final=="function"&&(this._final=Se.final)),E.call(this)}ae.prototype.pipe=function(){le(this,new V)};function te(Se,Be){var Ie=new ee;le(Se,Ie),dist$4.process.nextTick(Be,Ie)}function ue(Se,Be,Ie,Re){var Me;return Ie===null?Me=new re:typeof Ie!="string"&&!Be.objectMode&&(Me=new H("chunk",["string","Buffer"],Ie)),Me?(le(Se,Me),dist$4.process.nextTick(Re,Me),!1):!0}ae.prototype.write=function(Se,Be,Ie){var Re=this._writableState,Me=!1,xe=!Re.objectMode&&O(Se);return xe&&!A.isBuffer(Se)&&(Se=T(Se)),typeof Be=="function"&&(Ie=Be,Be=null),xe?Be="buffer":Be||(Be=Re.defaultEncoding),typeof Ie!="function"&&(Ie=pe),Re.ending?te(this,Ie):(xe||ue(this,Re,Se,Ie))&&(Re.pendingcb++,Me=J(this,Re,xe,Se,Be,Ie)),Me},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){var Se=this._writableState;Se.corked&&(Se.corked--,!Se.writing&&!Se.corked&&!Se.bufferProcessing&&Se.bufferedRequest&&ye(this,Se))},ae.prototype.setDefaultEncoding=function(Be){if(typeof Be=="string"&&(Be=Be.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Be+"").toLowerCase())>-1))throw new fe(Be);return this._writableState.defaultEncoding=Be,this},Object.defineProperty(ae.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ne(Se,Be,Ie){return!Se.objectMode&&Se.decodeStrings!==!1&&typeof Be=="string"&&(Be=A.from(Be,Ie)),Be}Object.defineProperty(ae.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function J(Se,Be,Ie,Re,Me,xe){if(!Ie){var Ee=ne(Be,Re,Me);Re!==Ee&&(Ie=!0,Me="buffer",Re=Ee)}var Ue=Be.objectMode?1:Re.length;Be.length+=Ue;var Ke=Be.length<Be.highWaterMark;if(Ke||(Be.needDrain=!0),Be.writing||Be.corked){var ze=Be.lastBufferedRequest;Be.lastBufferedRequest={chunk:Re,encoding:Me,isBuf:Ie,callback:xe,next:null},ze?ze.next=Be.lastBufferedRequest:Be.bufferedRequest=Be.lastBufferedRequest,Be.bufferedRequestCount+=1}else q(Se,Be,!1,Ue,Re,Me,xe);return Ke}function q(Se,Be,Ie,Re,Me,xe,Ee){Be.writelen=Re,Be.writecb=Ee,Be.writing=!0,Be.sync=!0,Be.destroyed?Be.onwrite(new X("write")):Ie?Se._writev(Me,Be.onwrite):Se._write(Me,xe,Be.onwrite),Be.sync=!1}function F(Se,Be,Ie,Re,Me){--Be.pendingcb,Ie?(dist$4.process.nextTick(Me,Re),dist$4.process.nextTick(ce,Se,Be),Se._writableState.errorEmitted=!0,le(Se,Re)):(Me(Re),Se._writableState.errorEmitted=!0,le(Se,Re),ce(Se,Be))}function L(Se){Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0}function Z(Se,Be){var Ie=Se._writableState,Re=Ie.sync,Me=Ie.writecb;if(typeof Me!="function")throw new j;if(L(Ie),Be)F(Se,Ie,Re,Be,Me);else{var xe=oe(Ie)||Se.destroyed;!xe&&!Ie.corked&&!Ie.bufferProcessing&&Ie.bufferedRequest&&ye(Se,Ie),Re?dist$4.process.nextTick(Q,Se,Ie,xe,Me):Q(Se,Ie,xe,Me)}}function Q(Se,Be,Ie,Re){Ie||de(Se,Be),Be.pendingcb--,Re(),ce(Se,Be)}function de(Se,Be){Be.length===0&&Be.needDrain&&(Be.needDrain=!1,Se.emit("drain"))}function ye(Se,Be){Be.bufferProcessing=!0;var Ie=Be.bufferedRequest;if(Se._writev&&Ie&&Ie.next){var Re=Be.bufferedRequestCount,Me=new Array(Re),xe=Be.corkedRequestsFree;xe.entry=Ie;for(var Ee=0,Ue=!0;Ie;)Me[Ee]=Ie,Ie.isBuf||(Ue=!1),Ie=Ie.next,Ee+=1;Me.allBuffers=Ue,q(Se,Be,!0,Be.length,Me,"",xe.finish),Be.pendingcb++,Be.lastBufferedRequest=null,xe.next?(Be.corkedRequestsFree=xe.next,xe.next=null):Be.corkedRequestsFree=new v(Be),Be.bufferedRequestCount=0}else{for(;Ie;){var Ke=Ie.chunk,ze=Ie.encoding,Ve=Ie.callback,Je=Be.objectMode?1:Ke.length;if(q(Se,Be,!1,Je,Ke,ze,Ve),Ie=Ie.next,Be.bufferedRequestCount--,Be.writing)break}Ie===null&&(Be.lastBufferedRequest=null)}Be.bufferedRequest=Ie,Be.bufferProcessing=!1}ae.prototype._write=function(Se,Be,Ie){Ie(new D("_write()"))},ae.prototype._writev=null,ae.prototype.end=function(Se,Be,Ie){var Re=this._writableState;return typeof Se=="function"?(Ie=Se,Se=null,Be=null):typeof Be=="function"&&(Ie=Be,Be=null),Se!=null&&this.write(Se,Be),Re.corked&&(Re.corked=1,this.uncork()),Re.ending||we(this,Re,Ie),this},Object.defineProperty(ae.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function oe(Se){return Se.ending&&Se.length===0&&Se.bufferedRequest===null&&!Se.finished&&!Se.writing}function se(Se,Be){Se._final(function(Ie){Be.pendingcb--,Ie&&le(Se,Ie),Be.prefinished=!0,Se.emit("prefinish"),ce(Se,Be)})}function Y(Se,Be){!Be.prefinished&&!Be.finalCalled&&(typeof Se._final=="function"&&!Be.destroyed?(Be.pendingcb++,Be.finalCalled=!0,dist$4.process.nextTick(se,Se,Be)):(Be.prefinished=!0,Se.emit("prefinish")))}function ce(Se,Be){var Ie=oe(Be);if(Ie&&(Y(Se,Be),Be.pendingcb===0&&(Be.finished=!0,Se.emit("finish"),Be.autoDestroy))){var Re=Se._readableState;(!Re||Re.autoDestroy&&Re.endEmitted)&&Se.destroy()}return Ie}function we(Se,Be,Ie){Be.ending=!0,ce(Se,Be),Ie&&(Be.finished?dist$4.process.nextTick(Ie):Se.once("finish",Ie)),Be.ended=!0,Se.writable=!1}function Pe(Se,Be,Ie){var Re=Se.entry;for(Se.entry=null;Re;){var Me=Re.callback;Be.pendingcb--,Me(Ie),Re=Re.next}Be.corkedRequestsFree.next=Se}return Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Be){this._writableState&&(this._writableState.destroyed=Be)}}),ae.prototype.destroy=k.destroy,ae.prototype._undestroy=k.undestroy,ae.prototype._destroy=function(Se,Be){Be(Se)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var v=Object.keys||function(C){var U=[];for(var N in C)U.push(N);return U};_stream_duplex=T;var _=require_stream_readable(),x=require_stream_writable();inherits_browserExports(T,_);for(var E=v(x.prototype),A=0;A<E.length;A++){var P=E[A];T.prototype[P]||(T.prototype[P]=x.prototype[P])}function T(C){if(!(this instanceof T))return new T(C);_.call(this,C),x.call(this,C),this.allowHalfOpen=!0,C&&(C.readable===!1&&(this.readable=!1),C.writable===!1&&(this.writable=!1),C.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",O)))}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function O(){this._writableState.ended||dist$4.process.nextTick(k,this)}function k(C){C.end()}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(U){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=U,this._writableState.destroyed=U)}}),_stream_duplex}var string_decoder={},Buffer$H=safeBufferExports.Buffer,isEncoding=Buffer$H.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(v){if(!v)return"utf8";for(var _;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(_)return;v=(""+v).toLowerCase(),_=!0}}function normalizeEncoding(v){var _=_normalizeEncoding(v);if(typeof _!="string"&&(Buffer$H.isEncoding===isEncoding||!isEncoding(v)))throw new Error("Unknown encoding: "+v);return _||v}string_decoder.StringDecoder=StringDecoder$1;function StringDecoder$1(v){this.encoding=normalizeEncoding(v);var _;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,_=4;break;case"utf8":this.fillLast=utf8FillLast,_=4;break;case"base64":this.text=base64Text,this.end=base64End,_=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$H.allocUnsafe(_)}StringDecoder$1.prototype.write=function(v){if(v.length===0)return"";var _,x;if(this.lastNeed){if(_=this.fillLast(v),_===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<v.length?_?_+this.text(v,x):this.text(v,x):_||""},StringDecoder$1.prototype.end=utf8End,StringDecoder$1.prototype.text=utf8Text,StringDecoder$1.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function utf8CheckByte(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function utf8CheckIncomplete(v,_,x){var E=_.length-1;if(E<x)return 0;var A=utf8CheckByte(_[E]);return A>=0?(A>0&&(v.lastNeed=A-1),A):--E<x||A===-2?0:(A=utf8CheckByte(_[E]),A>=0?(A>0&&(v.lastNeed=A-2),A):--E<x||A===-2?0:(A=utf8CheckByte(_[E]),A>=0?(A>0&&(A===2?A=0:v.lastNeed=A-3),A):0))}function utf8CheckExtraBytes(v,_,x){if((_[0]&192)!==128)return v.lastNeed=0,"�";if(v.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return v.lastNeed=1,"�";if(v.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return v.lastNeed=2,"�"}}function utf8FillLast(v){var _=this.lastTotal-this.lastNeed,x=utf8CheckExtraBytes(this,v);if(x!==void 0)return x;if(this.lastNeed<=v.length)return v.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,_,0,v.length),this.lastNeed-=v.length}function utf8Text(v,_){var x=utf8CheckIncomplete(this,v,_);if(!this.lastNeed)return v.toString("utf8",_);this.lastTotal=x;var E=v.length-(x-this.lastNeed);return v.copy(this.lastChar,0,E),v.toString("utf8",_,E)}function utf8End(v){var _=v&&v.length?this.write(v):"";return this.lastNeed?_+"�":_}function utf16Text(v,_){if((v.length-_)%2===0){var x=v.toString("utf16le",_);if(x){var E=x.charCodeAt(x.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",_,v.length-1)}function utf16End(v){var _=v&&v.length?this.write(v):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,x)}return _}function base64Text(v,_){var x=(v.length-_)%3;return x===0?v.toString("base64",_):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",_,v.length-x))}function base64End(v){var _=v&&v.length?this.write(v):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function simpleWrite(v){return v.toString(this.encoding)}function simpleEnd(v){return v&&v.length?this.write(v):""}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(v){var _=!1;return function(){if(!_){_=!0;for(var x=arguments.length,E=new Array(x),A=0;A<x;A++)E[A]=arguments[A];v.apply(this,E)}}}function noop$3(){}function isRequest$1(v){return v.setHeader&&typeof v.abort=="function"}function eos$1(v,_,x){if(typeof _=="function")return eos$1(v,null,_);_||(_={}),x=once$1(x||noop$3);var E=_.readable||_.readable!==!1&&v.readable,A=_.writable||_.writable!==!1&&v.writable,P=function(){v.writable||O()},T=v._writableState&&v._writableState.finished,O=function(){A=!1,T=!0,E||x.call(v)},k=v._readableState&&v._readableState.endEmitted,C=function(){E=!1,k=!0,A||x.call(v)},U=function(j){x.call(v,j)},N=function(){var j;if(E&&!k)return(!v._readableState||!v._readableState.ended)&&(j=new ERR_STREAM_PREMATURE_CLOSE),x.call(v,j);if(A&&!T)return(!v._writableState||!v._writableState.ended)&&(j=new ERR_STREAM_PREMATURE_CLOSE),x.call(v,j)},H=function(){v.req.on("finish",O)};return isRequest$1(v)?(v.on("complete",O),v.on("abort",N),v.req?H():v.on("request",H)):A&&!v._writableState&&(v.on("end",P),v.on("close",P)),v.on("end",C),v.on("finish",O),_.error!==!1&&v.on("error",U),v.on("close",N),function(){v.removeListener("complete",O),v.removeListener("abort",N),v.removeListener("request",H),v.req&&v.req.removeListener("finish",O),v.removeListener("end",P),v.removeListener("close",P),v.removeListener("finish",O),v.removeListener("end",C),v.removeListener("error",U),v.removeListener("close",N)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var v;function _(fe,le,pe){return le=x(le),le in fe?Object.defineProperty(fe,le,{value:pe,enumerable:!0,configurable:!0,writable:!0}):fe[le]=pe,fe}function x(fe){var le=E(fe,"string");return typeof le=="symbol"?le:String(le)}function E(fe,le){if(typeof fe!="object"||fe===null)return fe;var pe=fe[Symbol.toPrimitive];if(pe!==void 0){var ie=pe.call(fe,le||"default");if(typeof ie!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return(le==="string"?String:Number)(fe)}var A=endOfStream,P=Symbol("lastResolve"),T=Symbol("lastReject"),O=Symbol("error"),k=Symbol("ended"),C=Symbol("lastPromise"),U=Symbol("handlePromise"),N=Symbol("stream");function H(fe,le){return{value:fe,done:le}}function D(fe){var le=fe[P];if(le!==null){var pe=fe[N].read();pe!==null&&(fe[C]=null,fe[P]=null,fe[T]=null,le(H(pe,!1)))}}function j(fe){dist$4.process.nextTick(D,fe)}function V(fe,le){return function(pe,ie){fe.then(function(){if(le[k]){pe(H(void 0,!0));return}le[U](pe,ie)},ie)}}var X=Object.getPrototypeOf(function(){}),re=Object.setPrototypeOf((v={get stream(){return this[N]},next:function(){var le=this,pe=this[O];if(pe!==null)return Promise.reject(pe);if(this[k])return Promise.resolve(H(void 0,!0));if(this[N].destroyed)return new Promise(function(te,ue){dist$4.process.nextTick(function(){le[O]?ue(le[O]):te(H(void 0,!0))})});var ie=this[C],he;if(ie)he=new Promise(V(ie,this));else{var ae=this[N].read();if(ae!==null)return Promise.resolve(H(ae,!1));he=new Promise(this[U])}return this[C]=he,he}},_(v,Symbol.asyncIterator,function(){return this}),_(v,"return",function(){var le=this;return new Promise(function(pe,ie){le[N].destroy(null,function(he){if(he){ie(he);return}pe(H(void 0,!0))})})}),v),X),ee=function(le){var pe,ie=Object.create(re,(pe={},_(pe,N,{value:le,writable:!0}),_(pe,P,{value:null,writable:!0}),_(pe,T,{value:null,writable:!0}),_(pe,O,{value:null,writable:!0}),_(pe,k,{value:le._readableState.endEmitted,writable:!0}),_(pe,U,{value:function(ae,te){var ue=ie[N].read();ue?(ie[C]=null,ie[P]=null,ie[T]=null,ae(H(ue,!1))):(ie[P]=ae,ie[T]=te)},writable:!0}),pe));return ie[C]=null,A(le,function(he){if(he&&he.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ae=ie[T];ae!==null&&(ie[C]=null,ie[P]=null,ie[T]=null,ae(he)),ie[O]=he;return}var te=ie[P];te!==null&&(ie[C]=null,ie[P]=null,ie[T]=null,te(H(void 0,!0))),ie[k]=!0}),le.on("readable",j.bind(null,ie)),ie};return async_iterator=ee,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=te;var v;te.ReadableState=ae,eventsExports.EventEmitter;var _=function(Ee,Ue){return Ee.listeners(Ue).length},x=streamBrowser,E=bufferPolyfill.Buffer,A=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function P(xe){return E.from(xe)}function T(xe){return E.isBuffer(xe)||xe instanceof A}var O=util$9,k;O&&O.debuglog?k=O.debuglog("stream"):k=function(){};var C=requireBuffer_list(),U=destroy_1,N=state,H=N.getHighWaterMark,D=errorsBrowser.codes,j=D.ERR_INVALID_ARG_TYPE,V=D.ERR_STREAM_PUSH_AFTER_EOF,X=D.ERR_METHOD_NOT_IMPLEMENTED,re=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ee,fe,le;inherits_browserExports(te,x);var pe=U.errorOrDestroy,ie=["error","close","destroy","pause","resume"];function he(xe,Ee,Ue){if(typeof xe.prependListener=="function")return xe.prependListener(Ee,Ue);!xe._events||!xe._events[Ee]?xe.on(Ee,Ue):Array.isArray(xe._events[Ee])?xe._events[Ee].unshift(Ue):xe._events[Ee]=[Ue,xe._events[Ee]]}function ae(xe,Ee,Ue){v=v||require_stream_duplex(),xe=xe||{},typeof Ue!="boolean"&&(Ue=Ee instanceof v),this.objectMode=!!xe.objectMode,Ue&&(this.objectMode=this.objectMode||!!xe.readableObjectMode),this.highWaterMark=H(this,xe,"readableHighWaterMark",Ue),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=xe.emitClose!==!1,this.autoDestroy=!!xe.autoDestroy,this.destroyed=!1,this.defaultEncoding=xe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,xe.encoding&&(ee||(ee=string_decoder.StringDecoder),this.decoder=new ee(xe.encoding),this.encoding=xe.encoding)}function te(xe){if(v=v||require_stream_duplex(),!(this instanceof te))return new te(xe);var Ee=this instanceof v;this._readableState=new ae(xe,this,Ee),this.readable=!0,xe&&(typeof xe.read=="function"&&(this._read=xe.read),typeof xe.destroy=="function"&&(this._destroy=xe.destroy)),x.call(this)}Object.defineProperty(te.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Ee){this._readableState&&(this._readableState.destroyed=Ee)}}),te.prototype.destroy=U.destroy,te.prototype._undestroy=U.undestroy,te.prototype._destroy=function(xe,Ee){Ee(xe)},te.prototype.push=function(xe,Ee){var Ue=this._readableState,Ke;return Ue.objectMode?Ke=!0:typeof xe=="string"&&(Ee=Ee||Ue.defaultEncoding,Ee!==Ue.encoding&&(xe=E.from(xe,Ee),Ee=""),Ke=!0),ue(this,xe,Ee,!1,Ke)},te.prototype.unshift=function(xe){return ue(this,xe,null,!0,!1)};function ue(xe,Ee,Ue,Ke,ze){k("readableAddChunk",Ee);var Ve=xe._readableState;if(Ee===null)Ve.reading=!1,Z(xe,Ve);else{var Je;if(ze||(Je=J(Ve,Ee)),Je)pe(xe,Je);else if(Ve.objectMode||Ee&&Ee.length>0)if(typeof Ee!="string"&&!Ve.objectMode&&Object.getPrototypeOf(Ee)!==E.prototype&&(Ee=P(Ee)),Ke)Ve.endEmitted?pe(xe,new re):ne(xe,Ve,Ee,!0);else if(Ve.ended)pe(xe,new V);else{if(Ve.destroyed)return!1;Ve.reading=!1,Ve.decoder&&!Ue?(Ee=Ve.decoder.write(Ee),Ve.objectMode||Ee.length!==0?ne(xe,Ve,Ee,!1):ye(xe,Ve)):ne(xe,Ve,Ee,!1)}else Ke||(Ve.reading=!1,ye(xe,Ve))}return!Ve.ended&&(Ve.length<Ve.highWaterMark||Ve.length===0)}function ne(xe,Ee,Ue,Ke){Ee.flowing&&Ee.length===0&&!Ee.sync?(Ee.awaitDrain=0,xe.emit("data",Ue)):(Ee.length+=Ee.objectMode?1:Ue.length,Ke?Ee.buffer.unshift(Ue):Ee.buffer.push(Ue),Ee.needReadable&&Q(xe)),ye(xe,Ee)}function J(xe,Ee){var Ue;return!T(Ee)&&typeof Ee!="string"&&Ee!==void 0&&!xe.objectMode&&(Ue=new j("chunk",["string","Buffer","Uint8Array"],Ee)),Ue}te.prototype.isPaused=function(){return this._readableState.flowing===!1},te.prototype.setEncoding=function(xe){ee||(ee=string_decoder.StringDecoder);var Ee=new ee(xe);this._readableState.decoder=Ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ue=this._readableState.buffer.head,Ke="";Ue!==null;)Ke+=Ee.write(Ue.data),Ue=Ue.next;return this._readableState.buffer.clear(),Ke!==""&&this._readableState.buffer.push(Ke),this._readableState.length=Ke.length,this};var q=1073741824;function F(xe){return xe>=q?xe=q:(xe--,xe|=xe>>>1,xe|=xe>>>2,xe|=xe>>>4,xe|=xe>>>8,xe|=xe>>>16,xe++),xe}function L(xe,Ee){return xe<=0||Ee.length===0&&Ee.ended?0:Ee.objectMode?1:xe!==xe?Ee.flowing&&Ee.length?Ee.buffer.head.data.length:Ee.length:(xe>Ee.highWaterMark&&(Ee.highWaterMark=F(xe)),xe<=Ee.length?xe:Ee.ended?Ee.length:(Ee.needReadable=!0,0))}te.prototype.read=function(xe){k("read",xe),xe=parseInt(xe,10);var Ee=this._readableState,Ue=xe;if(xe!==0&&(Ee.emittedReadable=!1),xe===0&&Ee.needReadable&&((Ee.highWaterMark!==0?Ee.length>=Ee.highWaterMark:Ee.length>0)||Ee.ended))return k("read: emitReadable",Ee.length,Ee.ended),Ee.length===0&&Ee.ended?Ie(this):Q(this),null;if(xe=L(xe,Ee),xe===0&&Ee.ended)return Ee.length===0&&Ie(this),null;var Ke=Ee.needReadable;k("need readable",Ke),(Ee.length===0||Ee.length-xe<Ee.highWaterMark)&&(Ke=!0,k("length less than watermark",Ke)),Ee.ended||Ee.reading?(Ke=!1,k("reading or ended",Ke)):Ke&&(k("do read"),Ee.reading=!0,Ee.sync=!0,Ee.length===0&&(Ee.needReadable=!0),this._read(Ee.highWaterMark),Ee.sync=!1,Ee.reading||(xe=L(Ue,Ee)));var ze;return xe>0?ze=Be(xe,Ee):ze=null,ze===null?(Ee.needReadable=Ee.length<=Ee.highWaterMark,xe=0):(Ee.length-=xe,Ee.awaitDrain=0),Ee.length===0&&(Ee.ended||(Ee.needReadable=!0),Ue!==xe&&Ee.ended&&Ie(this)),ze!==null&&this.emit("data",ze),ze};function Z(xe,Ee){if(k("onEofChunk"),!Ee.ended){if(Ee.decoder){var Ue=Ee.decoder.end();Ue&&Ue.length&&(Ee.buffer.push(Ue),Ee.length+=Ee.objectMode?1:Ue.length)}Ee.ended=!0,Ee.sync?Q(xe):(Ee.needReadable=!1,Ee.emittedReadable||(Ee.emittedReadable=!0,de(xe)))}}function Q(xe){var Ee=xe._readableState;k("emitReadable",Ee.needReadable,Ee.emittedReadable),Ee.needReadable=!1,Ee.emittedReadable||(k("emitReadable",Ee.flowing),Ee.emittedReadable=!0,dist$4.process.nextTick(de,xe))}function de(xe){var Ee=xe._readableState;k("emitReadable_",Ee.destroyed,Ee.length,Ee.ended),!Ee.destroyed&&(Ee.length||Ee.ended)&&(xe.emit("readable"),Ee.emittedReadable=!1),Ee.needReadable=!Ee.flowing&&!Ee.ended&&Ee.length<=Ee.highWaterMark,Se(xe)}function ye(xe,Ee){Ee.readingMore||(Ee.readingMore=!0,dist$4.process.nextTick(oe,xe,Ee))}function oe(xe,Ee){for(;!Ee.reading&&!Ee.ended&&(Ee.length<Ee.highWaterMark||Ee.flowing&&Ee.length===0);){var Ue=Ee.length;if(k("maybeReadMore read 0"),xe.read(0),Ue===Ee.length)break}Ee.readingMore=!1}te.prototype._read=function(xe){pe(this,new X("_read()"))},te.prototype.pipe=function(xe,Ee){var Ue=this,Ke=this._readableState;switch(Ke.pipesCount){case 0:Ke.pipes=xe;break;case 1:Ke.pipes=[Ke.pipes,xe];break;default:Ke.pipes.push(xe);break}Ke.pipesCount+=1,k("pipe count=%d opts=%j",Ke.pipesCount,Ee);var ze=(!Ee||Ee.end!==!1)&&xe!==dist$4.process.stdout&&xe!==dist$4.process.stderr,Ve=ze?et:Ce;Ke.endEmitted?dist$4.process.nextTick(Ve):Ue.once("end",Ve),xe.on("unpipe",Je);function Je(ve,be){k("onunpipe"),ve===Ue&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,He())}function et(){k("onend"),xe.end()}var Ge=se(Ue);xe.on("drain",Ge);var ot=!1;function He(){k("cleanup"),xe.removeListener("close",$e),xe.removeListener("finish",Te),xe.removeListener("drain",Ge),xe.removeListener("error",Ze),xe.removeListener("unpipe",Je),Ue.removeListener("end",et),Ue.removeListener("end",Ce),Ue.removeListener("data",We),ot=!0,Ke.awaitDrain&&(!xe._writableState||xe._writableState.needDrain)&&Ge()}Ue.on("data",We);function We(ve){k("ondata");var be=xe.write(ve);k("dest.write",be),be===!1&&((Ke.pipesCount===1&&Ke.pipes===xe||Ke.pipesCount>1&&Me(Ke.pipes,xe)!==-1)&&!ot&&(k("false write response, pause",Ke.awaitDrain),Ke.awaitDrain++),Ue.pause())}function Ze(ve){k("onerror",ve),Ce(),xe.removeListener("error",Ze),_(xe,"error")===0&&pe(xe,ve)}he(xe,"error",Ze);function $e(){xe.removeListener("finish",Te),Ce()}xe.once("close",$e);function Te(){k("onfinish"),xe.removeListener("close",$e),Ce()}xe.once("finish",Te);function Ce(){k("unpipe"),Ue.unpipe(xe)}return xe.emit("pipe",Ue),Ke.flowing||(k("pipe resume"),Ue.resume()),xe};function se(xe){return function(){var Ue=xe._readableState;k("pipeOnDrain",Ue.awaitDrain),Ue.awaitDrain&&Ue.awaitDrain--,Ue.awaitDrain===0&&_(xe,"data")&&(Ue.flowing=!0,Se(xe))}}te.prototype.unpipe=function(xe){var Ee=this._readableState,Ue={hasUnpiped:!1};if(Ee.pipesCount===0)return this;if(Ee.pipesCount===1)return xe&&xe!==Ee.pipes?this:(xe||(xe=Ee.pipes),Ee.pipes=null,Ee.pipesCount=0,Ee.flowing=!1,xe&&xe.emit("unpipe",this,Ue),this);if(!xe){var Ke=Ee.pipes,ze=Ee.pipesCount;Ee.pipes=null,Ee.pipesCount=0,Ee.flowing=!1;for(var Ve=0;Ve<ze;Ve++)Ke[Ve].emit("unpipe",this,{hasUnpiped:!1});return this}var Je=Me(Ee.pipes,xe);return Je===-1?this:(Ee.pipes.splice(Je,1),Ee.pipesCount-=1,Ee.pipesCount===1&&(Ee.pipes=Ee.pipes[0]),xe.emit("unpipe",this,Ue),this)},te.prototype.on=function(xe,Ee){var Ue=x.prototype.on.call(this,xe,Ee),Ke=this._readableState;return xe==="data"?(Ke.readableListening=this.listenerCount("readable")>0,Ke.flowing!==!1&&this.resume()):xe==="readable"&&!Ke.endEmitted&&!Ke.readableListening&&(Ke.readableListening=Ke.needReadable=!0,Ke.flowing=!1,Ke.emittedReadable=!1,k("on readable",Ke.length,Ke.reading),Ke.length?Q(this):Ke.reading||dist$4.process.nextTick(ce,this)),Ue},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(xe,Ee){var Ue=x.prototype.removeListener.call(this,xe,Ee);return xe==="readable"&&dist$4.process.nextTick(Y,this),Ue},te.prototype.removeAllListeners=function(xe){var Ee=x.prototype.removeAllListeners.apply(this,arguments);return(xe==="readable"||xe===void 0)&&dist$4.process.nextTick(Y,this),Ee};function Y(xe){var Ee=xe._readableState;Ee.readableListening=xe.listenerCount("readable")>0,Ee.resumeScheduled&&!Ee.paused?Ee.flowing=!0:xe.listenerCount("data")>0&&xe.resume()}function ce(xe){k("readable nexttick read 0"),xe.read(0)}te.prototype.resume=function(){var xe=this._readableState;return xe.flowing||(k("resume"),xe.flowing=!xe.readableListening,we(this,xe)),xe.paused=!1,this};function we(xe,Ee){Ee.resumeScheduled||(Ee.resumeScheduled=!0,dist$4.process.nextTick(Pe,xe,Ee))}function Pe(xe,Ee){k("resume",Ee.reading),Ee.reading||xe.read(0),Ee.resumeScheduled=!1,xe.emit("resume"),Se(xe),Ee.flowing&&!Ee.reading&&xe.read(0)}te.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Se(xe){var Ee=xe._readableState;for(k("flow",Ee.flowing);Ee.flowing&&xe.read()!==null;);}te.prototype.wrap=function(xe){var Ee=this,Ue=this._readableState,Ke=!1;xe.on("end",function(){if(k("wrapped end"),Ue.decoder&&!Ue.ended){var Je=Ue.decoder.end();Je&&Je.length&&Ee.push(Je)}Ee.push(null)}),xe.on("data",function(Je){if(k("wrapped data"),Ue.decoder&&(Je=Ue.decoder.write(Je)),!(Ue.objectMode&&Je==null)&&!(!Ue.objectMode&&(!Je||!Je.length))){var et=Ee.push(Je);et||(Ke=!0,xe.pause())}});for(var ze in xe)this[ze]===void 0&&typeof xe[ze]=="function"&&(this[ze]=function(et){return function(){return xe[et].apply(xe,arguments)}}(ze));for(var Ve=0;Ve<ie.length;Ve++)xe.on(ie[Ve],this.emit.bind(this,ie[Ve]));return this._read=function(Je){k("wrapped _read",Je),Ke&&(Ke=!1,xe.resume())},this},typeof Symbol=="function"&&(te.prototype[Symbol.asyncIterator]=function(){return fe===void 0&&(fe=requireAsync_iterator()),fe(this)}),Object.defineProperty(te.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(te.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(te.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ee){this._readableState&&(this._readableState.flowing=Ee)}}),te._fromList=Be,Object.defineProperty(te.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Be(xe,Ee){if(Ee.length===0)return null;var Ue;return Ee.objectMode?Ue=Ee.buffer.shift():!xe||xe>=Ee.length?(Ee.decoder?Ue=Ee.buffer.join(""):Ee.buffer.length===1?Ue=Ee.buffer.first():Ue=Ee.buffer.concat(Ee.length),Ee.buffer.clear()):Ue=Ee.buffer.consume(xe,Ee.decoder),Ue}function Ie(xe){var Ee=xe._readableState;k("endReadable",Ee.endEmitted),Ee.endEmitted||(Ee.ended=!0,dist$4.process.nextTick(Re,Ee,xe))}function Re(xe,Ee){if(k("endReadableNT",xe.endEmitted,xe.length),!xe.endEmitted&&xe.length===0&&(xe.endEmitted=!0,Ee.readable=!1,Ee.emit("end"),xe.autoDestroy)){var Ue=Ee._writableState;(!Ue||Ue.autoDestroy&&Ue.finished)&&Ee.destroy()}}typeof Symbol=="function"&&(te.from=function(xe,Ee){return le===void 0&&(le=requireFromBrowser()),le(te,xe,Ee)});function Me(xe,Ee){for(var Ue=0,Ke=xe.length;Ue<Ke;Ue++)if(xe[Ue]===Ee)return Ue;return-1}return _stream_readable}var _stream_transform=Transform$7,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$7,Duplex);function afterTransform(v,_){var x=this._transformState;x.transforming=!1;var E=x.writecb;if(E===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);x.writechunk=null,x.writecb=null,_!=null&&this.push(_),E(v);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function Transform$7(v){if(!(this instanceof Transform$7))return new Transform$7(v);Duplex.call(this,v),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",prefinish)}function prefinish(){var v=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_,x){done(v,_,x)}):done(this,null,null)}Transform$7.prototype.push=function(v,_){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,v,_)},Transform$7.prototype._transform=function(v,_,x){x(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform$7.prototype._write=function(v,_,x){var E=this._transformState;if(E.writecb=x,E.writechunk=v,E.writeencoding=_,!E.transforming){var A=this._readableState;(E.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},Transform$7.prototype._read=function(v){var _=this._transformState;_.writechunk!==null&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0},Transform$7.prototype._destroy=function(v,_){Duplex.prototype._destroy.call(this,v,function(x){_(x)})};function done(v,_,x){if(_)return v.emit("error",_);if(x!=null&&v.push(x),v._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(v._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return v.push(null)}var _stream_passthrough=PassThrough,Transform$6=_stream_transform;inherits_browserExports(PassThrough,Transform$6);function PassThrough(v){if(!(this instanceof PassThrough))return new PassThrough(v);Transform$6.call(this,v)}PassThrough.prototype._transform=function(v,_,x){x(null,v)};var eos;function once(v){var _=!1;return function(){_||(_=!0,v.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$2(v){if(v)throw v}function isRequest(v){return v.setHeader&&typeof v.abort=="function"}function destroyer(v,_,x,E){E=once(E);var A=!1;v.on("close",function(){A=!0}),eos===void 0&&(eos=endOfStream),eos(v,{readable:_,writable:x},function(T){if(T)return E(T);A=!0,E()});var P=!1;return function(T){if(!A&&!P){if(P=!0,isRequest(v))return v.abort();if(typeof v.destroy=="function")return v.destroy();E(T||new ERR_STREAM_DESTROYED("pipe"))}}}function call(v){v()}function pipe(v,_){return v.pipe(_)}function popCallback(v){return!v.length||typeof v[v.length-1]!="function"?noop$2:v.pop()}function pipeline(){for(var v=arguments.length,_=new Array(v),x=0;x<v;x++)_[x]=arguments[x];var E=popCallback(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new ERR_MISSING_ARGS("streams");var A,P=_.map(function(T,O){var k=O<_.length-1,C=O>0;return destroyer(T,k,C,function(U){A||(A=U),U&&P.forEach(call),!k&&(P.forEach(call),E(A))})});return _.reduce(pipe)}var pipeline_1=pipeline;(function(v,_){_=v.exports=require_stream_readable(),_.Stream=_,_.Readable=_,_.Writable=require_stream_writable(),_.Duplex=require_stream_duplex(),_.Transform=_stream_transform,_.PassThrough=_stream_passthrough,_.finished=endOfStream,_.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports,Buffer$G=safeBufferExports.Buffer,Transform$5=readableBrowserExports.Transform,inherits$z=inherits_browserExports;function throwIfNotStringOrBuffer(v,_){if(!Buffer$G.isBuffer(v)&&typeof v!="string")throw new TypeError(_+" must be a string or a buffer")}function HashBase$2(v){Transform$5.call(this),this._block=Buffer$G.allocUnsafe(v),this._blockSize=v,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$z(HashBase$2,Transform$5),HashBase$2.prototype._transform=function(v,_,x){var E=null;try{this.update(v,_)}catch(A){E=A}x(E)},HashBase$2.prototype._flush=function(v){var _=null;try{this.push(this.digest())}catch(x){_=x}v(_)},HashBase$2.prototype.update=function(v,_){if(throwIfNotStringOrBuffer(v,"Data"),this._finalized)throw new Error("Digest already called");Buffer$G.isBuffer(v)||(v=Buffer$G.from(v,_));for(var x=this._block,E=0;this._blockOffset+v.length-E>=this._blockSize;){for(var A=this._blockOffset;A<this._blockSize;)x[A++]=v[E++];this._update(),this._blockOffset=0}for(;E<v.length;)x[this._blockOffset++]=v[E++];for(var P=0,T=v.length*8;T>0;++P)this._length[P]+=T,T=this._length[P]/4294967296|0,T>0&&(this._length[P]-=4294967296*T);return this},HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")},HashBase$2.prototype.digest=function(v){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var _=this._digest();v!==void 0&&(_=_.toString(v)),this._block.fill(0),this._blockOffset=0;for(var x=0;x<4;++x)this._length[x]=0;return _},HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$y=inherits_browserExports,HashBase$1=hashBase,Buffer$F=safeBufferExports.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$y(MD5$3,HashBase$1),MD5$3.prototype._update=function(){for(var v=ARRAY16$1,_=0;_<16;++_)v[_]=this._block.readInt32LE(_*4);var x=this._a,E=this._b,A=this._c,P=this._d;x=fnF(x,E,A,P,v[0],3614090360,7),P=fnF(P,x,E,A,v[1],3905402710,12),A=fnF(A,P,x,E,v[2],606105819,17),E=fnF(E,A,P,x,v[3],3250441966,22),x=fnF(x,E,A,P,v[4],4118548399,7),P=fnF(P,x,E,A,v[5],1200080426,12),A=fnF(A,P,x,E,v[6],2821735955,17),E=fnF(E,A,P,x,v[7],4249261313,22),x=fnF(x,E,A,P,v[8],1770035416,7),P=fnF(P,x,E,A,v[9],2336552879,12),A=fnF(A,P,x,E,v[10],4294925233,17),E=fnF(E,A,P,x,v[11],2304563134,22),x=fnF(x,E,A,P,v[12],1804603682,7),P=fnF(P,x,E,A,v[13],4254626195,12),A=fnF(A,P,x,E,v[14],2792965006,17),E=fnF(E,A,P,x,v[15],1236535329,22),x=fnG(x,E,A,P,v[1],4129170786,5),P=fnG(P,x,E,A,v[6],3225465664,9),A=fnG(A,P,x,E,v[11],643717713,14),E=fnG(E,A,P,x,v[0],3921069994,20),x=fnG(x,E,A,P,v[5],3593408605,5),P=fnG(P,x,E,A,v[10],38016083,9),A=fnG(A,P,x,E,v[15],3634488961,14),E=fnG(E,A,P,x,v[4],3889429448,20),x=fnG(x,E,A,P,v[9],568446438,5),P=fnG(P,x,E,A,v[14],3275163606,9),A=fnG(A,P,x,E,v[3],4107603335,14),E=fnG(E,A,P,x,v[8],1163531501,20),x=fnG(x,E,A,P,v[13],2850285829,5),P=fnG(P,x,E,A,v[2],4243563512,9),A=fnG(A,P,x,E,v[7],1735328473,14),E=fnG(E,A,P,x,v[12],2368359562,20),x=fnH(x,E,A,P,v[5],4294588738,4),P=fnH(P,x,E,A,v[8],2272392833,11),A=fnH(A,P,x,E,v[11],1839030562,16),E=fnH(E,A,P,x,v[14],4259657740,23),x=fnH(x,E,A,P,v[1],2763975236,4),P=fnH(P,x,E,A,v[4],1272893353,11),A=fnH(A,P,x,E,v[7],4139469664,16),E=fnH(E,A,P,x,v[10],3200236656,23),x=fnH(x,E,A,P,v[13],681279174,4),P=fnH(P,x,E,A,v[0],3936430074,11),A=fnH(A,P,x,E,v[3],3572445317,16),E=fnH(E,A,P,x,v[6],76029189,23),x=fnH(x,E,A,P,v[9],3654602809,4),P=fnH(P,x,E,A,v[12],3873151461,11),A=fnH(A,P,x,E,v[15],530742520,16),E=fnH(E,A,P,x,v[2],3299628645,23),x=fnI(x,E,A,P,v[0],4096336452,6),P=fnI(P,x,E,A,v[7],1126891415,10),A=fnI(A,P,x,E,v[14],2878612391,15),E=fnI(E,A,P,x,v[5],4237533241,21),x=fnI(x,E,A,P,v[12],1700485571,6),P=fnI(P,x,E,A,v[3],2399980690,10),A=fnI(A,P,x,E,v[10],4293915773,15),E=fnI(E,A,P,x,v[1],2240044497,21),x=fnI(x,E,A,P,v[8],1873313359,6),P=fnI(P,x,E,A,v[15],4264355552,10),A=fnI(A,P,x,E,v[6],2734768916,15),E=fnI(E,A,P,x,v[13],1309151649,21),x=fnI(x,E,A,P,v[4],4149444226,6),P=fnI(P,x,E,A,v[11],3174756917,10),A=fnI(A,P,x,E,v[2],718787259,15),E=fnI(E,A,P,x,v[9],3951481745,21),this._a=this._a+x|0,this._b=this._b+E|0,this._c=this._c+A|0,this._d=this._d+P|0},MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var v=Buffer$F.allocUnsafe(16);return v.writeInt32LE(this._a,0),v.writeInt32LE(this._b,4),v.writeInt32LE(this._c,8),v.writeInt32LE(this._d,12),v};function rotl$4(v,_){return v<<_|v>>>32-_}function fnF(v,_,x,E,A,P,T){return rotl$4(v+(_&x|~_&E)+A+P|0,T)+_|0}function fnG(v,_,x,E,A,P,T){return rotl$4(v+(_&E|x&~E)+A+P|0,T)+_|0}function fnH(v,_,x,E,A,P,T){return rotl$4(v+(_^x^E)+A+P|0,T)+_|0}function fnI(v,_,x,E,A,P,T){return rotl$4(v+(x^(_|~E))+A+P|0,T)+_|0}var md5_js=MD5$3,Buffer$E=bufferPolyfill.Buffer,inherits$x=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$x(RIPEMD160$5,HashBase),RIPEMD160$5.prototype._update=function(){for(var v=ARRAY16,_=0;_<16;++_)v[_]=this._block.readInt32LE(_*4);for(var x=this._a|0,E=this._b|0,A=this._c|0,P=this._d|0,T=this._e|0,O=this._a|0,k=this._b|0,C=this._c|0,U=this._d|0,N=this._e|0,H=0;H<80;H+=1){var D,j;H<16?(D=fn1(x,E,A,P,T,v[zl[H]],hl[0],sl[H]),j=fn5(O,k,C,U,N,v[zr[H]],hr[0],sr[H])):H<32?(D=fn2(x,E,A,P,T,v[zl[H]],hl[1],sl[H]),j=fn4(O,k,C,U,N,v[zr[H]],hr[1],sr[H])):H<48?(D=fn3(x,E,A,P,T,v[zl[H]],hl[2],sl[H]),j=fn3(O,k,C,U,N,v[zr[H]],hr[2],sr[H])):H<64?(D=fn4(x,E,A,P,T,v[zl[H]],hl[3],sl[H]),j=fn2(O,k,C,U,N,v[zr[H]],hr[3],sr[H])):(D=fn5(x,E,A,P,T,v[zl[H]],hl[4],sl[H]),j=fn1(O,k,C,U,N,v[zr[H]],hr[4],sr[H])),x=T,T=P,P=rotl$3(A,10),A=E,E=D,O=N,N=U,U=rotl$3(C,10),C=k,k=j}var V=this._b+A+U|0;this._b=this._c+P+N|0,this._c=this._d+T+O|0,this._d=this._e+x+k|0,this._e=this._a+E+C|0,this._a=V},RIPEMD160$5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var v=Buffer$E.alloc?Buffer$E.alloc(20):new Buffer$E(20);return v.writeInt32LE(this._a,0),v.writeInt32LE(this._b,4),v.writeInt32LE(this._c,8),v.writeInt32LE(this._d,12),v.writeInt32LE(this._e,16),v};function rotl$3(v,_){return v<<_|v>>>32-_}function fn1(v,_,x,E,A,P,T,O){return rotl$3(v+(_^x^E)+P+T|0,O)+A|0}function fn2(v,_,x,E,A,P,T,O){return rotl$3(v+(_&x|~_&E)+P+T|0,O)+A|0}function fn3(v,_,x,E,A,P,T,O){return rotl$3(v+((_|~x)^E)+P+T|0,O)+A|0}function fn4(v,_,x,E,A,P,T,O){return rotl$3(v+(_&E|x&~E)+P+T|0,O)+A|0}function fn5(v,_,x,E,A,P,T,O){return rotl$3(v+(_^(x|~E))+P+T|0,O)+A|0}var ripemd160$3=RIPEMD160$5,sha_js={exports:{}},Buffer$D=safeBufferExports.Buffer;function Hash$7(v,_){this._block=Buffer$D.alloc(v),this._finalSize=_,this._blockSize=v,this._len=0}Hash$7.prototype.update=function(v,_){typeof v=="string"&&(_=_||"utf8",v=Buffer$D.from(v,_));for(var x=this._block,E=this._blockSize,A=v.length,P=this._len,T=0;T<A;){for(var O=P%E,k=Math.min(A-T,E-O),C=0;C<k;C++)x[O+C]=v[T+C];P+=k,T+=k,P%E===0&&this._update(x)}return this._len+=A,this},Hash$7.prototype.digest=function(v){var _=this._len%this._blockSize;this._block[_]=128,this._block.fill(0,_+1),_>=this._finalSize&&(this._update(this._block),this._block.fill(0));var x=this._len*8;if(x<=4294967295)this._block.writeUInt32BE(x,this._blockSize-4);else{var E=(x&4294967295)>>>0,A=(x-E)/4294967296;this._block.writeUInt32BE(A,this._blockSize-8),this._block.writeUInt32BE(E,this._blockSize-4)}this._update(this._block);var P=this._hash();return v?P.toString(v):P},Hash$7.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$5=Hash$7,inherits$w=inherits_browserExports,Hash$6=hash$5,Buffer$C=safeBufferExports.Buffer,K$4=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$6.call(this,64,56)}inherits$w(Sha,Hash$6),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(v){return v<<5|v>>>27}function rotl30$1(v){return v<<30|v>>>2}function ft$1(v,_,x,E){return v===0?_&x|~_&E:v===2?_&x|_&E|x&E:_^x^E}Sha.prototype._update=function(v){for(var _=this._w,x=this._a|0,E=this._b|0,A=this._c|0,P=this._d|0,T=this._e|0,O=0;O<16;++O)_[O]=v.readInt32BE(O*4);for(;O<80;++O)_[O]=_[O-3]^_[O-8]^_[O-14]^_[O-16];for(var k=0;k<80;++k){var C=~~(k/20),U=rotl5$1(x)+ft$1(C,E,A,P)+T+_[k]+K$4[C]|0;T=P,P=A,A=rotl30$1(E),E=x,x=U}this._a=x+this._a|0,this._b=E+this._b|0,this._c=A+this._c|0,this._d=P+this._d|0,this._e=T+this._e|0},Sha.prototype._hash=function(){var v=Buffer$C.allocUnsafe(20);return v.writeInt32BE(this._a|0,0),v.writeInt32BE(this._b|0,4),v.writeInt32BE(this._c|0,8),v.writeInt32BE(this._d|0,12),v.writeInt32BE(this._e|0,16),v};var sha$4=Sha,inherits$v=inherits_browserExports,Hash$5=hash$5,Buffer$B=safeBufferExports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$5.call(this,64,56)}inherits$v(Sha1,Hash$5),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(v){return v<<1|v>>>31}function rotl5(v){return v<<5|v>>>27}function rotl30(v){return v<<30|v>>>2}function ft(v,_,x,E){return v===0?_&x|~_&E:v===2?_&x|_&E|x&E:_^x^E}Sha1.prototype._update=function(v){for(var _=this._w,x=this._a|0,E=this._b|0,A=this._c|0,P=this._d|0,T=this._e|0,O=0;O<16;++O)_[O]=v.readInt32BE(O*4);for(;O<80;++O)_[O]=rotl1(_[O-3]^_[O-8]^_[O-14]^_[O-16]);for(var k=0;k<80;++k){var C=~~(k/20),U=rotl5(x)+ft(C,E,A,P)+T+_[k]+K$3[C]|0;T=P,P=A,A=rotl30(E),E=x,x=U}this._a=x+this._a|0,this._b=E+this._b|0,this._c=A+this._c|0,this._d=P+this._d|0,this._e=T+this._e|0},Sha1.prototype._hash=function(){var v=Buffer$B.allocUnsafe(20);return v.writeInt32BE(this._a|0,0),v.writeInt32BE(this._b|0,4),v.writeInt32BE(this._c|0,8),v.writeInt32BE(this._d|0,12),v.writeInt32BE(this._e|0,16),v};var sha1$2=Sha1,inherits$u=inherits_browserExports,Hash$4=hash$5,Buffer$A=safeBufferExports.Buffer,K$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$4.call(this,64,56)}inherits$u(Sha256$1,Hash$4),Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(v,_,x){return x^v&(_^x)}function maj$1(v,_,x){return v&_|x&(v|_)}function sigma0$1(v){return(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10)}function sigma1$1(v){return(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7)}function gamma0(v){return(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3}function gamma1(v){return(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10}Sha256$1.prototype._update=function(v){for(var _=this._w,x=this._a|0,E=this._b|0,A=this._c|0,P=this._d|0,T=this._e|0,O=this._f|0,k=this._g|0,C=this._h|0,U=0;U<16;++U)_[U]=v.readInt32BE(U*4);for(;U<64;++U)_[U]=gamma1(_[U-2])+_[U-7]+gamma0(_[U-15])+_[U-16]|0;for(var N=0;N<64;++N){var H=C+sigma1$1(T)+ch(T,O,k)+K$2[N]+_[N]|0,D=sigma0$1(x)+maj$1(x,E,A)|0;C=k,k=O,O=T,T=P+H|0,P=A,A=E,E=x,x=H+D|0}this._a=x+this._a|0,this._b=E+this._b|0,this._c=A+this._c|0,this._d=P+this._d|0,this._e=T+this._e|0,this._f=O+this._f|0,this._g=k+this._g|0,this._h=C+this._h|0},Sha256$1.prototype._hash=function(){var v=Buffer$A.allocUnsafe(32);return v.writeInt32BE(this._a,0),v.writeInt32BE(this._b,4),v.writeInt32BE(this._c,8),v.writeInt32BE(this._d,12),v.writeInt32BE(this._e,16),v.writeInt32BE(this._f,20),v.writeInt32BE(this._g,24),v.writeInt32BE(this._h,28),v};var sha256$5=Sha256$1,inherits$t=inherits_browserExports,Sha256=sha256$5,Hash$3=hash$5,Buffer$z=safeBufferExports.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$3.call(this,64,56)}inherits$t(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var v=Buffer$z.allocUnsafe(28);return v.writeInt32BE(this._a,0),v.writeInt32BE(this._b,4),v.writeInt32BE(this._c,8),v.writeInt32BE(this._d,12),v.writeInt32BE(this._e,16),v.writeInt32BE(this._f,20),v.writeInt32BE(this._g,24),v};var sha224$2=Sha224,inherits$s=inherits_browserExports,Hash$2=hash$5,Buffer$y=safeBufferExports.Buffer,K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$2.call(this,128,112)}inherits$s(Sha512,Hash$2),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(v,_,x){return x^v&(_^x)}function maj(v,_,x){return v&_|x&(v|_)}function sigma0(v,_){return(v>>>28|_<<4)^(_>>>2|v<<30)^(_>>>7|v<<25)}function sigma1(v,_){return(v>>>14|_<<18)^(v>>>18|_<<14)^(_>>>9|v<<23)}function Gamma0(v,_){return(v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7}function Gamma0l(v,_){return(v>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)}function Gamma1(v,_){return(v>>>19|_<<13)^(_>>>29|v<<3)^v>>>6}function Gamma1l(v,_){return(v>>>19|_<<13)^(_>>>29|v<<3)^(v>>>6|_<<26)}function getCarry(v,_){return v>>>0<_>>>0?1:0}Sha512.prototype._update=function(v){for(var _=this._w,x=this._ah|0,E=this._bh|0,A=this._ch|0,P=this._dh|0,T=this._eh|0,O=this._fh|0,k=this._gh|0,C=this._hh|0,U=this._al|0,N=this._bl|0,H=this._cl|0,D=this._dl|0,j=this._el|0,V=this._fl|0,X=this._gl|0,re=this._hl|0,ee=0;ee<32;ee+=2)_[ee]=v.readInt32BE(ee*4),_[ee+1]=v.readInt32BE(ee*4+4);for(;ee<160;ee+=2){var fe=_[ee-30],le=_[ee-15*2+1],pe=Gamma0(fe,le),ie=Gamma0l(le,fe);fe=_[ee-2*2],le=_[ee-2*2+1];var he=Gamma1(fe,le),ae=Gamma1l(le,fe),te=_[ee-7*2],ue=_[ee-7*2+1],ne=_[ee-16*2],J=_[ee-16*2+1],q=ie+ue|0,F=pe+te+getCarry(q,ie)|0;q=q+ae|0,F=F+he+getCarry(q,ae)|0,q=q+J|0,F=F+ne+getCarry(q,J)|0,_[ee]=F,_[ee+1]=q}for(var L=0;L<160;L+=2){F=_[L],q=_[L+1];var Z=maj(x,E,A),Q=maj(U,N,H),de=sigma0(x,U),ye=sigma0(U,x),oe=sigma1(T,j),se=sigma1(j,T),Y=K$1[L],ce=K$1[L+1],we=Ch(T,O,k),Pe=Ch(j,V,X),Se=re+se|0,Be=C+oe+getCarry(Se,re)|0;Se=Se+Pe|0,Be=Be+we+getCarry(Se,Pe)|0,Se=Se+ce|0,Be=Be+Y+getCarry(Se,ce)|0,Se=Se+q|0,Be=Be+F+getCarry(Se,q)|0;var Ie=ye+Q|0,Re=de+Z+getCarry(Ie,ye)|0;C=k,re=X,k=O,X=V,O=T,V=j,j=D+Se|0,T=P+Be+getCarry(j,D)|0,P=A,D=H,A=E,H=N,E=x,N=U,U=Se+Ie|0,x=Be+Re+getCarry(U,Se)|0}this._al=this._al+U|0,this._bl=this._bl+N|0,this._cl=this._cl+H|0,this._dl=this._dl+D|0,this._el=this._el+j|0,this._fl=this._fl+V|0,this._gl=this._gl+X|0,this._hl=this._hl+re|0,this._ah=this._ah+x+getCarry(this._al,U)|0,this._bh=this._bh+E+getCarry(this._bl,N)|0,this._ch=this._ch+A+getCarry(this._cl,H)|0,this._dh=this._dh+P+getCarry(this._dl,D)|0,this._eh=this._eh+T+getCarry(this._el,j)|0,this._fh=this._fh+O+getCarry(this._fl,V)|0,this._gh=this._gh+k+getCarry(this._gl,X)|0,this._hh=this._hh+C+getCarry(this._hl,re)|0},Sha512.prototype._hash=function(){var v=Buffer$y.allocUnsafe(64);function _(x,E,A){v.writeInt32BE(x,A),v.writeInt32BE(E,A+4)}return _(this._ah,this._al,0),_(this._bh,this._bl,8),_(this._ch,this._cl,16),_(this._dh,this._dl,24),_(this._eh,this._el,32),_(this._fh,this._fl,40),_(this._gh,this._gl,48),_(this._hh,this._hl,56),v};var sha512$2=Sha512,inherits$r=inherits_browserExports,SHA512$2=sha512$2,Hash$1=hash$5,Buffer$x=safeBufferExports.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash$1.call(this,128,112)}inherits$r(Sha384,SHA512$2),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var v=Buffer$x.allocUnsafe(48);function _(x,E,A){v.writeInt32BE(x,A),v.writeInt32BE(E,A+4)}return _(this._ah,this._al,0),_(this._bh,this._bl,8),_(this._ch,this._cl,16),_(this._dh,this._dl,24),_(this._eh,this._el,32),_(this._fh,this._fl,40),v};var sha384$2=Sha384,exports$1=sha_js.exports=function(_){_=_.toLowerCase();var x=exports$1[_];if(!x)throw new Error(_+" is not supported (we accept pull requests)");return new x};exports$1.sha=sha$4,exports$1.sha1=sha1$2,exports$1.sha224=sha224$2,exports$1.sha256=sha256$5,exports$1.sha384=sha384$2,exports$1.sha512=sha512$2;var sha_jsExports=sha_js.exports,streamBrowserify=Stream,EE=eventsExports.EventEmitter,inherits$q=inherits_browserExports;inherits$q(Stream,EE),Stream.Readable=require_stream_readable(),Stream.Writable=require_stream_writable(),Stream.Duplex=require_stream_duplex(),Stream.Transform=_stream_transform,Stream.PassThrough=_stream_passthrough,Stream.finished=endOfStream,Stream.pipeline=pipeline_1,Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(v,_){var x=this;function E(U){v.writable&&v.write(U)===!1&&x.pause&&x.pause()}x.on("data",E);function A(){x.readable&&x.resume&&x.resume()}v.on("drain",A),!v._isStdio&&(!_||_.end!==!1)&&(x.on("end",T),x.on("close",O));var P=!1;function T(){P||(P=!0,v.end())}function O(){P||(P=!0,typeof v.destroy=="function"&&v.destroy())}function k(U){if(C(),EE.listenerCount(this,"error")===0)throw U}x.on("error",k),v.on("error",k);function C(){x.removeListener("data",E),v.removeListener("drain",A),x.removeListener("end",T),x.removeListener("close",O),x.removeListener("error",k),v.removeListener("error",k),x.removeListener("end",C),x.removeListener("close",C),v.removeListener("close",C)}return x.on("end",C),x.on("close",C),v.on("close",C),v.emit("pipe",x),v};var Buffer$w=safeBufferExports.Buffer,Transform$4=streamBrowserify.Transform,StringDecoder=string_decoder.StringDecoder,inherits$p=inherits_browserExports;function CipherBase$1(v){Transform$4.call(this),this.hashMode=typeof v=="string",this.hashMode?this[v]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$p(CipherBase$1,Transform$4),CipherBase$1.prototype.update=function(v,_,x){typeof v=="string"&&(v=Buffer$w.from(v,_));var E=this._update(v);return this.hashMode?this:(x&&(E=this._toString(E,x)),E)},CipherBase$1.prototype.setAutoPadding=function(){},CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase$1.prototype._transform=function(v,_,x){var E;try{this.hashMode?this._update(v):this.push(this._update(v))}catch(A){E=A}finally{x(E)}},CipherBase$1.prototype._flush=function(v){var _;try{this.push(this.__final())}catch(x){_=x}v(_)},CipherBase$1.prototype._finalOrDigest=function(v){var _=this.__final()||Buffer$w.alloc(0);return v&&(_=this._toString(_,v,!0)),_},CipherBase$1.prototype._toString=function(v,_,x){if(this._decoder||(this._decoder=new StringDecoder(_),this._encoding=_),this._encoding!==_)throw new Error("can't switch encodings");var E=this._decoder.write(v);return x&&(E+=this._decoder.end()),E};var cipherBase=CipherBase$1,inherits$o=inherits_browserExports,MD5$2=md5_js,RIPEMD160$4=ripemd160$3,sha$3=sha_jsExports,Base$8=cipherBase;function Hash(v){Base$8.call(this,"digest"),this._hash=v}inherits$o(Hash,Base$8),Hash.prototype._update=function(v){this._hash.update(v)},Hash.prototype._final=function(){return this._hash.digest()};var browser$b=function(_){return _=_.toLowerCase(),_==="md5"?new MD5$2:_==="rmd160"||_==="ripemd160"?new RIPEMD160$4:new Hash(sha$3(_))};Object.defineProperty(base58Check,"__esModule",{value:!0}),base58Check.fromBase58Check=base58Check.toBase58Check=void 0;const hash_1$1=hash$6,base_1$2=base$7;function toBase58Check$2(v){return(0,base_1$2.base58check)(hash_1$1.sha256).encode(dist$4.Buffer.from(v))}base58Check.toBase58Check=toBase58Check$2;function fromBase58Check$2(v){const _=(0,base_1$2.base58check)(hash_1$1.sha256);return dist$4.Buffer.from(_.decode(v))}base58Check.fromBase58Check=fromBase58Check$2;var bech32={};Object.defineProperty(bech32,"__esModule",{value:!0}),bech32.fromBech32=bech32.toBech32=void 0;const base_1$1=base$7;function toBech32$2(v,_){const x=dist$4.Buffer.from(_),E=base_1$1.bech32.toWords(Uint8Array.from(x));return base_1$1.bech32.encode(v,E)}bech32.toBech32=toBech32$2;function fromBech32$2(v,_){const x=base_1$1.bech32.decode(v,_),E=base_1$1.bech32.fromWords(x.words);return[x.prefix,dist$4.Buffer.from(E)]}bech32.fromBech32=fromBech32$2;var hex={};Object.defineProperty(hex,"__esModule",{value:!0}),hex.isHexPrefixed=hex.stripHexPrefix=hex.fromHex=hex.toHex=void 0;function toHex$1(v,_=!1){const x=dist$4.Buffer.from(v);return _?"0x"+x.toString("hex"):x.toString("hex")}hex.toHex=toHex$1;function fromHex(v){return v.startsWith("0x")&&(v=v.substring(2)),dist$4.Buffer.from(v,"hex")}hex.fromHex=fromHex;function stripHexPrefix$2(v){return v.startsWith("0x")?v.substring(2):v}hex.stripHexPrefix=stripHexPrefix$2;function isHexPrefixed$2(v){return v.startsWith("0x")}hex.isHexPrefixed=isHexPrefixed$2;var base64$2={};Object.defineProperty(base64$2,"__esModule",{value:!0}),base64$2.fromBase64=base64$2.toBase64=void 0;const base_1=base$7;function toBase64(v){const _=dist$4.Buffer.from(v);return base_1.base64.encode(Uint8Array.from(_))}base64$2.toBase64=toBase64;function fromBase64(v){return base_1.base64.decode(v)}base64$2.fromBase64=fromBase64;var hmac$3={},hmac$2={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.hmac=void 0;const _=utilsExports;class x extends _.Hash{constructor(P,T){super(),this.finished=!1,this.destroyed=!1,(0,_.assertHash)(P);const O=(0,_.toBytes)(T);if(this.iHash=P.create(),!(this.iHash instanceof _.Hash))throw new TypeError("Expected instance of class which extends utils.Hash");const k=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const C=new Uint8Array(k);C.set(O.length>this.iHash.blockLen?P.create().update(O).digest():O);for(let U=0;U<C.length;U++)C[U]^=54;this.iHash.update(C),this.oHash=P.create();for(let U=0;U<C.length;U++)C[U]^=106;this.oHash.update(C),C.fill(0)}update(P){if(this.destroyed)throw new Error("instance is destroyed");return this.iHash.update(P),this}digestInto(P){if(this.destroyed)throw new Error("instance is destroyed");if(!(P instanceof Uint8Array)||P.length!==this.outputLen)throw new Error("HMAC: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0,this.iHash.digestInto(P),this.oHash.update(P),this.oHash.digestInto(P),this.destroy()}digest(){const P=new Uint8Array(this.oHash.outputLen);return this.digestInto(P),P}_cloneInto(P){P||(P=Object.create(Object.getPrototypeOf(this),{}));const{oHash:T,iHash:O,finished:k,destroyed:C,blockLen:U,outputLen:N}=this;return P=P,P.finished=k,P.destroyed=C,P.blockLen=U,P.outputLen=N,P.oHash=T._cloneInto(P.oHash),P.iHash=O._cloneInto(P.iHash),P}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const E=(A,P,T)=>new x(A,P).update(T).digest();v.hmac=E,v.hmac.create=(A,P)=>new x(A,P)})(hmac$2),Object.defineProperty(hmac$3,"__esModule",{value:!0}),hmac$3.hmacSHA512=hmac$3.hmacSHA256=void 0;const hmac_1$1=hmac$2,hash_1=hash$6;function hmacSHA256(v,_){return dist$4.Buffer.from((0,hmac_1$1.hmac)(hash_1.sha256,v,_))}hmac$3.hmacSHA256=hmacSHA256;function hmacSHA512(v,_){return dist$4.Buffer.from((0,hmac_1$1.hmac)(hash_1.sha512,v,_))}hmac$3.hmacSHA512=hmacSHA512;var utf8$3={};Object.defineProperty(utf8$3,"__esModule",{value:!0}),utf8$3.fromUtf8=utf8$3.toUtf8=void 0;function toUtf8(v){return new TextEncoder().encode(v)}utf8$3.toUtf8=toUtf8;function fromUtf8$1(v){return new TextDecoder("utf-8",{fatal:!0}).decode(v)}utf8$3.fromUtf8=fromUtf8$1;var bignumberPlus={},precondtion={};Object.defineProperty(precondtion,"__esModule",{value:!0}),precondtion.checkIsUndefined=precondtion.checkIsDefined=precondtion.check=void 0;const check$r=(v,_)=>{if(!v)throw _=_||"Invalid statement",_=_ instanceof Error?_:new Error(_),_};precondtion.check=check$r;const checkIsDefined=(v,_)=>(check$r(typeof v<"u",_||"Expect defined but actually undefined"),v);precondtion.checkIsDefined=checkIsDefined;const checkIsUndefined=(v,_)=>{check$r(typeof v>"u",_||`Expect undefined but actually ${v}`)};precondtion.checkIsUndefined=checkIsUndefined;var hasRequiredBignumberPlus;function requireBignumberPlus(){if(hasRequiredBignumberPlus)return bignumberPlus;hasRequiredBignumberPlus=1,Object.defineProperty(bignumberPlus,"__esModule",{value:!0}),bignumberPlus.string2BigNumber=bignumberPlus.bigNumber2String=bignumberPlus.fromBigIntHex=bignumberPlus.toBigIntHex=void 0;const v=requireDist$1(),_=precondtion,x=T=>{let O=T.integerValue().toString(16);return O="0x"+O,O};bignumberPlus.toBigIntHex=x;const E=T=>((0,_.check)(T&&T.startsWith("0x"),`Invalid hex string. value: ${T}`),new v.BigNumber(T).integerValue());bignumberPlus.fromBigIntHex=E;const A=(T,O)=>T.integerValue().toString(O);bignumberPlus.bigNumber2String=A;const P=(T,O)=>new v.BigNumber(T,O);return bignumberPlus.string2BigNumber=P,bignumberPlus}var rlp={},bn$2={exports:{}};bn$2.exports,function(v){(function(_,x){function E(ne,J){if(!ne)throw new Error(J||"Assertion failed")}function A(ne,J){ne.super_=J;var q=function(){};q.prototype=J.prototype,ne.prototype=new q,ne.prototype.constructor=ne}function P(ne,J,q){if(P.isBN(ne))return ne;this.negative=0,this.words=null,this.length=0,this.red=null,ne!==null&&((J==="le"||J==="be")&&(q=J,J=10),this._init(ne||0,J||10,q||"be"))}typeof _=="object"?_.exports=P:x.BN=P,P.BN=P,P.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=bufferPolyfill.Buffer}catch{}P.isBN=function(J){return J instanceof P?!0:J!==null&&typeof J=="object"&&J.constructor.wordSize===P.wordSize&&Array.isArray(J.words)},P.max=function(J,q){return J.cmp(q)>0?J:q},P.min=function(J,q){return J.cmp(q)<0?J:q},P.prototype._init=function(J,q,F){if(typeof J=="number")return this._initNumber(J,q,F);if(typeof J=="object")return this._initArray(J,q,F);q==="hex"&&(q=16),E(q===(q|0)&&q>=2&&q<=36),J=J.toString().replace(/\s+/g,"");var L=0;J[0]==="-"&&(L++,this.negative=1),L<J.length&&(q===16?this._parseHex(J,L,F):(this._parseBase(J,q,L),F==="le"&&this._initArray(this.toArray(),q,F)))},P.prototype._initNumber=function(J,q,F){J<0&&(this.negative=1,J=-J),J<67108864?(this.words=[J&67108863],this.length=1):J<4503599627370496?(this.words=[J&67108863,J/67108864&67108863],this.length=2):(E(J<9007199254740992),this.words=[J&67108863,J/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),q,F)},P.prototype._initArray=function(J,q,F){if(E(typeof J.length=="number"),J.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(J.length/3),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var Z,Q,de=0;if(F==="be")for(L=J.length-1,Z=0;L>=0;L-=3)Q=J[L]|J[L-1]<<8|J[L-2]<<16,this.words[Z]|=Q<<de&67108863,this.words[Z+1]=Q>>>26-de&67108863,de+=24,de>=26&&(de-=26,Z++);else if(F==="le")for(L=0,Z=0;L<J.length;L+=3)Q=J[L]|J[L+1]<<8|J[L+2]<<16,this.words[Z]|=Q<<de&67108863,this.words[Z+1]=Q>>>26-de&67108863,de+=24,de>=26&&(de-=26,Z++);return this.strip()};function O(ne,J){var q=ne.charCodeAt(J);return q>=65&&q<=70?q-55:q>=97&&q<=102?q-87:q-48&15}function k(ne,J,q){var F=O(ne,q);return q-1>=J&&(F|=O(ne,q-1)<<4),F}P.prototype._parseHex=function(J,q,F){this.length=Math.ceil((J.length-q)/6),this.words=new Array(this.length);for(var L=0;L<this.length;L++)this.words[L]=0;var Z=0,Q=0,de;if(F==="be")for(L=J.length-1;L>=q;L-=2)de=k(J,q,L)<<Z,this.words[Q]|=de&67108863,Z>=18?(Z-=18,Q+=1,this.words[Q]|=de>>>26):Z+=8;else{var ye=J.length-q;for(L=ye%2===0?q+1:q;L<J.length;L+=2)de=k(J,q,L)<<Z,this.words[Q]|=de&67108863,Z>=18?(Z-=18,Q+=1,this.words[Q]|=de>>>26):Z+=8}this.strip()};function C(ne,J,q,F){for(var L=0,Z=Math.min(ne.length,q),Q=J;Q<Z;Q++){var de=ne.charCodeAt(Q)-48;L*=F,de>=49?L+=de-49+10:de>=17?L+=de-17+10:L+=de}return L}P.prototype._parseBase=function(J,q,F){this.words=[0],this.length=1;for(var L=0,Z=1;Z<=67108863;Z*=q)L++;L--,Z=Z/q|0;for(var Q=J.length-F,de=Q%L,ye=Math.min(Q,Q-de)+F,oe=0,se=F;se<ye;se+=L)oe=C(J,se,se+L,q),this.imuln(Z),this.words[0]+oe<67108864?this.words[0]+=oe:this._iaddn(oe);if(de!==0){var Y=1;for(oe=C(J,se,J.length,q),se=0;se<de;se++)Y*=q;this.imuln(Y),this.words[0]+oe<67108864?this.words[0]+=oe:this._iaddn(oe)}this.strip()},P.prototype.copy=function(J){J.words=new Array(this.length);for(var q=0;q<this.length;q++)J.words[q]=this.words[q];J.length=this.length,J.negative=this.negative,J.red=this.red},P.prototype.clone=function(){var J=new P(null);return this.copy(J),J},P.prototype._expand=function(J){for(;this.length<J;)this.words[this.length++]=0;return this},P.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},P.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},P.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],H=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];P.prototype.toString=function(J,q){J=J||10,q=q|0||1;var F;if(J===16||J==="hex"){F="";for(var L=0,Z=0,Q=0;Q<this.length;Q++){var de=this.words[Q],ye=((de<<L|Z)&16777215).toString(16);Z=de>>>24-L&16777215,Z!==0||Q!==this.length-1?F=U[6-ye.length]+ye+F:F=ye+F,L+=2,L>=26&&(L-=26,Q--)}for(Z!==0&&(F=Z.toString(16)+F);F.length%q!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(J===(J|0)&&J>=2&&J<=36){var oe=N[J],se=H[J];F="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var ce=Y.modn(se).toString(J);Y=Y.idivn(se),Y.isZero()?F=ce+F:F=U[oe-ce.length]+ce+F}for(this.isZero()&&(F="0"+F);F.length%q!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}E(!1,"Base should be between 2 and 36")},P.prototype.toNumber=function(){var J=this.words[0];return this.length===2?J+=this.words[1]*67108864:this.length===3&&this.words[2]===1?J+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-J:J},P.prototype.toJSON=function(){return this.toString(16)},P.prototype.toBuffer=function(J,q){return E(typeof T<"u"),this.toArrayLike(T,J,q)},P.prototype.toArray=function(J,q){return this.toArrayLike(Array,J,q)},P.prototype.toArrayLike=function(J,q,F){var L=this.byteLength(),Z=F||Math.max(1,L);E(L<=Z,"byte array longer than desired length"),E(Z>0,"Requested array length <= 0"),this.strip();var Q=q==="le",de=new J(Z),ye,oe,se=this.clone();if(Q){for(oe=0;!se.isZero();oe++)ye=se.andln(255),se.iushrn(8),de[oe]=ye;for(;oe<Z;oe++)de[oe]=0}else{for(oe=0;oe<Z-L;oe++)de[oe]=0;for(oe=0;!se.isZero();oe++)ye=se.andln(255),se.iushrn(8),de[Z-oe-1]=ye}return de},Math.clz32?P.prototype._countBits=function(J){return 32-Math.clz32(J)}:P.prototype._countBits=function(J){var q=J,F=0;return q>=4096&&(F+=13,q>>>=13),q>=64&&(F+=7,q>>>=7),q>=8&&(F+=4,q>>>=4),q>=2&&(F+=2,q>>>=2),F+q},P.prototype._zeroBits=function(J){if(J===0)return 26;var q=J,F=0;return q&8191||(F+=13,q>>>=13),q&127||(F+=7,q>>>=7),q&15||(F+=4,q>>>=4),q&3||(F+=2,q>>>=2),q&1||F++,F},P.prototype.bitLength=function(){var J=this.words[this.length-1],q=this._countBits(J);return(this.length-1)*26+q};function D(ne){for(var J=new Array(ne.bitLength()),q=0;q<J.length;q++){var F=q/26|0,L=q%26;J[q]=(ne.words[F]&1<<L)>>>L}return J}P.prototype.zeroBits=function(){if(this.isZero())return 0;for(var J=0,q=0;q<this.length;q++){var F=this._zeroBits(this.words[q]);if(J+=F,F!==26)break}return J},P.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},P.prototype.toTwos=function(J){return this.negative!==0?this.abs().inotn(J).iaddn(1):this.clone()},P.prototype.fromTwos=function(J){return this.testn(J-1)?this.notn(J).iaddn(1).ineg():this.clone()},P.prototype.isNeg=function(){return this.negative!==0},P.prototype.neg=function(){return this.clone().ineg()},P.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},P.prototype.iuor=function(J){for(;this.length<J.length;)this.words[this.length++]=0;for(var q=0;q<J.length;q++)this.words[q]=this.words[q]|J.words[q];return this.strip()},P.prototype.ior=function(J){return E((this.negative|J.negative)===0),this.iuor(J)},P.prototype.or=function(J){return this.length>J.length?this.clone().ior(J):J.clone().ior(this)},P.prototype.uor=function(J){return this.length>J.length?this.clone().iuor(J):J.clone().iuor(this)},P.prototype.iuand=function(J){var q;this.length>J.length?q=J:q=this;for(var F=0;F<q.length;F++)this.words[F]=this.words[F]&J.words[F];return this.length=q.length,this.strip()},P.prototype.iand=function(J){return E((this.negative|J.negative)===0),this.iuand(J)},P.prototype.and=function(J){return this.length>J.length?this.clone().iand(J):J.clone().iand(this)},P.prototype.uand=function(J){return this.length>J.length?this.clone().iuand(J):J.clone().iuand(this)},P.prototype.iuxor=function(J){var q,F;this.length>J.length?(q=this,F=J):(q=J,F=this);for(var L=0;L<F.length;L++)this.words[L]=q.words[L]^F.words[L];if(this!==q)for(;L<q.length;L++)this.words[L]=q.words[L];return this.length=q.length,this.strip()},P.prototype.ixor=function(J){return E((this.negative|J.negative)===0),this.iuxor(J)},P.prototype.xor=function(J){return this.length>J.length?this.clone().ixor(J):J.clone().ixor(this)},P.prototype.uxor=function(J){return this.length>J.length?this.clone().iuxor(J):J.clone().iuxor(this)},P.prototype.inotn=function(J){E(typeof J=="number"&&J>=0);var q=Math.ceil(J/26)|0,F=J%26;this._expand(q),F>0&&q--;for(var L=0;L<q;L++)this.words[L]=~this.words[L]&67108863;return F>0&&(this.words[L]=~this.words[L]&67108863>>26-F),this.strip()},P.prototype.notn=function(J){return this.clone().inotn(J)},P.prototype.setn=function(J,q){E(typeof J=="number"&&J>=0);var F=J/26|0,L=J%26;return this._expand(F+1),q?this.words[F]=this.words[F]|1<<L:this.words[F]=this.words[F]&~(1<<L),this.strip()},P.prototype.iadd=function(J){var q;if(this.negative!==0&&J.negative===0)return this.negative=0,q=this.isub(J),this.negative^=1,this._normSign();if(this.negative===0&&J.negative!==0)return J.negative=0,q=this.isub(J),J.negative=1,q._normSign();var F,L;this.length>J.length?(F=this,L=J):(F=J,L=this);for(var Z=0,Q=0;Q<L.length;Q++)q=(F.words[Q]|0)+(L.words[Q]|0)+Z,this.words[Q]=q&67108863,Z=q>>>26;for(;Z!==0&&Q<F.length;Q++)q=(F.words[Q]|0)+Z,this.words[Q]=q&67108863,Z=q>>>26;if(this.length=F.length,Z!==0)this.words[this.length]=Z,this.length++;else if(F!==this)for(;Q<F.length;Q++)this.words[Q]=F.words[Q];return this},P.prototype.add=function(J){var q;return J.negative!==0&&this.negative===0?(J.negative=0,q=this.sub(J),J.negative^=1,q):J.negative===0&&this.negative!==0?(this.negative=0,q=J.sub(this),this.negative=1,q):this.length>J.length?this.clone().iadd(J):J.clone().iadd(this)},P.prototype.isub=function(J){if(J.negative!==0){J.negative=0;var q=this.iadd(J);return J.negative=1,q._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(J),this.negative=1,this._normSign();var F=this.cmp(J);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var L,Z;F>0?(L=this,Z=J):(L=J,Z=this);for(var Q=0,de=0;de<Z.length;de++)q=(L.words[de]|0)-(Z.words[de]|0)+Q,Q=q>>26,this.words[de]=q&67108863;for(;Q!==0&&de<L.length;de++)q=(L.words[de]|0)+Q,Q=q>>26,this.words[de]=q&67108863;if(Q===0&&de<L.length&&L!==this)for(;de<L.length;de++)this.words[de]=L.words[de];return this.length=Math.max(this.length,de),L!==this&&(this.negative=1),this.strip()},P.prototype.sub=function(J){return this.clone().isub(J)};function j(ne,J,q){q.negative=J.negative^ne.negative;var F=ne.length+J.length|0;q.length=F,F=F-1|0;var L=ne.words[0]|0,Z=J.words[0]|0,Q=L*Z,de=Q&67108863,ye=Q/67108864|0;q.words[0]=de;for(var oe=1;oe<F;oe++){for(var se=ye>>>26,Y=ye&67108863,ce=Math.min(oe,J.length-1),we=Math.max(0,oe-ne.length+1);we<=ce;we++){var Pe=oe-we|0;L=ne.words[Pe]|0,Z=J.words[we]|0,Q=L*Z+Y,se+=Q/67108864|0,Y=Q&67108863}q.words[oe]=Y|0,ye=se|0}return ye!==0?q.words[oe]=ye|0:q.length--,q.strip()}var V=function(J,q,F){var L=J.words,Z=q.words,Q=F.words,de=0,ye,oe,se,Y=L[0]|0,ce=Y&8191,we=Y>>>13,Pe=L[1]|0,Se=Pe&8191,Be=Pe>>>13,Ie=L[2]|0,Re=Ie&8191,Me=Ie>>>13,xe=L[3]|0,Ee=xe&8191,Ue=xe>>>13,Ke=L[4]|0,ze=Ke&8191,Ve=Ke>>>13,Je=L[5]|0,et=Je&8191,Ge=Je>>>13,ot=L[6]|0,He=ot&8191,We=ot>>>13,Ze=L[7]|0,$e=Ze&8191,Te=Ze>>>13,Ce=L[8]|0,ve=Ce&8191,be=Ce>>>13,ge=L[9]|0,me=ge&8191,_e=ge>>>13,Ae=Z[0]|0,Oe=Ae&8191,Le=Ae>>>13,je=Z[1]|0,qe=je&8191,rt=je>>>13,tt=Z[2]|0,at=tt&8191,bt=tt>>>13,lt=Z[3]|0,it=lt&8191,vt=lt>>>13,dt=Z[4]|0,Fe=dt&8191,ke=dt>>>13,Ne=Z[5]|0,De=Ne&8191,Xe=Ne>>>13,Ye=Z[6]|0,Qe=Ye&8191,st=Ye>>>13,ut=Z[7]|0,nt=ut&8191,pt=ut>>>13,ht=Z[8]|0,ct=ht&8191,_t=ht>>>13,gt=Z[9]|0,yt=gt&8191,St=gt>>>13;F.negative=J.negative^q.negative,F.length=19,ye=Math.imul(ce,Oe),oe=Math.imul(ce,Le),oe=oe+Math.imul(we,Oe)|0,se=Math.imul(we,Le);var mt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(mt>>>26)|0,mt&=67108863,ye=Math.imul(Se,Oe),oe=Math.imul(Se,Le),oe=oe+Math.imul(Be,Oe)|0,se=Math.imul(Be,Le),ye=ye+Math.imul(ce,qe)|0,oe=oe+Math.imul(ce,rt)|0,oe=oe+Math.imul(we,qe)|0,se=se+Math.imul(we,rt)|0;var wt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(wt>>>26)|0,wt&=67108863,ye=Math.imul(Re,Oe),oe=Math.imul(Re,Le),oe=oe+Math.imul(Me,Oe)|0,se=Math.imul(Me,Le),ye=ye+Math.imul(Se,qe)|0,oe=oe+Math.imul(Se,rt)|0,oe=oe+Math.imul(Be,qe)|0,se=se+Math.imul(Be,rt)|0,ye=ye+Math.imul(ce,at)|0,oe=oe+Math.imul(ce,bt)|0,oe=oe+Math.imul(we,at)|0,se=se+Math.imul(we,bt)|0;var At=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(At>>>26)|0,At&=67108863,ye=Math.imul(Ee,Oe),oe=Math.imul(Ee,Le),oe=oe+Math.imul(Ue,Oe)|0,se=Math.imul(Ue,Le),ye=ye+Math.imul(Re,qe)|0,oe=oe+Math.imul(Re,rt)|0,oe=oe+Math.imul(Me,qe)|0,se=se+Math.imul(Me,rt)|0,ye=ye+Math.imul(Se,at)|0,oe=oe+Math.imul(Se,bt)|0,oe=oe+Math.imul(Be,at)|0,se=se+Math.imul(Be,bt)|0,ye=ye+Math.imul(ce,it)|0,oe=oe+Math.imul(ce,vt)|0,oe=oe+Math.imul(we,it)|0,se=se+Math.imul(we,vt)|0;var Bt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,ye=Math.imul(ze,Oe),oe=Math.imul(ze,Le),oe=oe+Math.imul(Ve,Oe)|0,se=Math.imul(Ve,Le),ye=ye+Math.imul(Ee,qe)|0,oe=oe+Math.imul(Ee,rt)|0,oe=oe+Math.imul(Ue,qe)|0,se=se+Math.imul(Ue,rt)|0,ye=ye+Math.imul(Re,at)|0,oe=oe+Math.imul(Re,bt)|0,oe=oe+Math.imul(Me,at)|0,se=se+Math.imul(Me,bt)|0,ye=ye+Math.imul(Se,it)|0,oe=oe+Math.imul(Se,vt)|0,oe=oe+Math.imul(Be,it)|0,se=se+Math.imul(Be,vt)|0,ye=ye+Math.imul(ce,Fe)|0,oe=oe+Math.imul(ce,ke)|0,oe=oe+Math.imul(we,Fe)|0,se=se+Math.imul(we,ke)|0;var xt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(xt>>>26)|0,xt&=67108863,ye=Math.imul(et,Oe),oe=Math.imul(et,Le),oe=oe+Math.imul(Ge,Oe)|0,se=Math.imul(Ge,Le),ye=ye+Math.imul(ze,qe)|0,oe=oe+Math.imul(ze,rt)|0,oe=oe+Math.imul(Ve,qe)|0,se=se+Math.imul(Ve,rt)|0,ye=ye+Math.imul(Ee,at)|0,oe=oe+Math.imul(Ee,bt)|0,oe=oe+Math.imul(Ue,at)|0,se=se+Math.imul(Ue,bt)|0,ye=ye+Math.imul(Re,it)|0,oe=oe+Math.imul(Re,vt)|0,oe=oe+Math.imul(Me,it)|0,se=se+Math.imul(Me,vt)|0,ye=ye+Math.imul(Se,Fe)|0,oe=oe+Math.imul(Se,ke)|0,oe=oe+Math.imul(Be,Fe)|0,se=se+Math.imul(Be,ke)|0,ye=ye+Math.imul(ce,De)|0,oe=oe+Math.imul(ce,Xe)|0,oe=oe+Math.imul(we,De)|0,se=se+Math.imul(we,Xe)|0;var Pt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,ye=Math.imul(He,Oe),oe=Math.imul(He,Le),oe=oe+Math.imul(We,Oe)|0,se=Math.imul(We,Le),ye=ye+Math.imul(et,qe)|0,oe=oe+Math.imul(et,rt)|0,oe=oe+Math.imul(Ge,qe)|0,se=se+Math.imul(Ge,rt)|0,ye=ye+Math.imul(ze,at)|0,oe=oe+Math.imul(ze,bt)|0,oe=oe+Math.imul(Ve,at)|0,se=se+Math.imul(Ve,bt)|0,ye=ye+Math.imul(Ee,it)|0,oe=oe+Math.imul(Ee,vt)|0,oe=oe+Math.imul(Ue,it)|0,se=se+Math.imul(Ue,vt)|0,ye=ye+Math.imul(Re,Fe)|0,oe=oe+Math.imul(Re,ke)|0,oe=oe+Math.imul(Me,Fe)|0,se=se+Math.imul(Me,ke)|0,ye=ye+Math.imul(Se,De)|0,oe=oe+Math.imul(Se,Xe)|0,oe=oe+Math.imul(Be,De)|0,se=se+Math.imul(Be,Xe)|0,ye=ye+Math.imul(ce,Qe)|0,oe=oe+Math.imul(ce,st)|0,oe=oe+Math.imul(we,Qe)|0,se=se+Math.imul(we,st)|0;var Tt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,ye=Math.imul($e,Oe),oe=Math.imul($e,Le),oe=oe+Math.imul(Te,Oe)|0,se=Math.imul(Te,Le),ye=ye+Math.imul(He,qe)|0,oe=oe+Math.imul(He,rt)|0,oe=oe+Math.imul(We,qe)|0,se=se+Math.imul(We,rt)|0,ye=ye+Math.imul(et,at)|0,oe=oe+Math.imul(et,bt)|0,oe=oe+Math.imul(Ge,at)|0,se=se+Math.imul(Ge,bt)|0,ye=ye+Math.imul(ze,it)|0,oe=oe+Math.imul(ze,vt)|0,oe=oe+Math.imul(Ve,it)|0,se=se+Math.imul(Ve,vt)|0,ye=ye+Math.imul(Ee,Fe)|0,oe=oe+Math.imul(Ee,ke)|0,oe=oe+Math.imul(Ue,Fe)|0,se=se+Math.imul(Ue,ke)|0,ye=ye+Math.imul(Re,De)|0,oe=oe+Math.imul(Re,Xe)|0,oe=oe+Math.imul(Me,De)|0,se=se+Math.imul(Me,Xe)|0,ye=ye+Math.imul(Se,Qe)|0,oe=oe+Math.imul(Se,st)|0,oe=oe+Math.imul(Be,Qe)|0,se=se+Math.imul(Be,st)|0,ye=ye+Math.imul(ce,nt)|0,oe=oe+Math.imul(ce,pt)|0,oe=oe+Math.imul(we,nt)|0,se=se+Math.imul(we,pt)|0;var It=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(It>>>26)|0,It&=67108863,ye=Math.imul(ve,Oe),oe=Math.imul(ve,Le),oe=oe+Math.imul(be,Oe)|0,se=Math.imul(be,Le),ye=ye+Math.imul($e,qe)|0,oe=oe+Math.imul($e,rt)|0,oe=oe+Math.imul(Te,qe)|0,se=se+Math.imul(Te,rt)|0,ye=ye+Math.imul(He,at)|0,oe=oe+Math.imul(He,bt)|0,oe=oe+Math.imul(We,at)|0,se=se+Math.imul(We,bt)|0,ye=ye+Math.imul(et,it)|0,oe=oe+Math.imul(et,vt)|0,oe=oe+Math.imul(Ge,it)|0,se=se+Math.imul(Ge,vt)|0,ye=ye+Math.imul(ze,Fe)|0,oe=oe+Math.imul(ze,ke)|0,oe=oe+Math.imul(Ve,Fe)|0,se=se+Math.imul(Ve,ke)|0,ye=ye+Math.imul(Ee,De)|0,oe=oe+Math.imul(Ee,Xe)|0,oe=oe+Math.imul(Ue,De)|0,se=se+Math.imul(Ue,Xe)|0,ye=ye+Math.imul(Re,Qe)|0,oe=oe+Math.imul(Re,st)|0,oe=oe+Math.imul(Me,Qe)|0,se=se+Math.imul(Me,st)|0,ye=ye+Math.imul(Se,nt)|0,oe=oe+Math.imul(Se,pt)|0,oe=oe+Math.imul(Be,nt)|0,se=se+Math.imul(Be,pt)|0,ye=ye+Math.imul(ce,ct)|0,oe=oe+Math.imul(ce,_t)|0,oe=oe+Math.imul(we,ct)|0,se=se+Math.imul(we,_t)|0;var Rt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,ye=Math.imul(me,Oe),oe=Math.imul(me,Le),oe=oe+Math.imul(_e,Oe)|0,se=Math.imul(_e,Le),ye=ye+Math.imul(ve,qe)|0,oe=oe+Math.imul(ve,rt)|0,oe=oe+Math.imul(be,qe)|0,se=se+Math.imul(be,rt)|0,ye=ye+Math.imul($e,at)|0,oe=oe+Math.imul($e,bt)|0,oe=oe+Math.imul(Te,at)|0,se=se+Math.imul(Te,bt)|0,ye=ye+Math.imul(He,it)|0,oe=oe+Math.imul(He,vt)|0,oe=oe+Math.imul(We,it)|0,se=se+Math.imul(We,vt)|0,ye=ye+Math.imul(et,Fe)|0,oe=oe+Math.imul(et,ke)|0,oe=oe+Math.imul(Ge,Fe)|0,se=se+Math.imul(Ge,ke)|0,ye=ye+Math.imul(ze,De)|0,oe=oe+Math.imul(ze,Xe)|0,oe=oe+Math.imul(Ve,De)|0,se=se+Math.imul(Ve,Xe)|0,ye=ye+Math.imul(Ee,Qe)|0,oe=oe+Math.imul(Ee,st)|0,oe=oe+Math.imul(Ue,Qe)|0,se=se+Math.imul(Ue,st)|0,ye=ye+Math.imul(Re,nt)|0,oe=oe+Math.imul(Re,pt)|0,oe=oe+Math.imul(Me,nt)|0,se=se+Math.imul(Me,pt)|0,ye=ye+Math.imul(Se,ct)|0,oe=oe+Math.imul(Se,_t)|0,oe=oe+Math.imul(Be,ct)|0,se=se+Math.imul(Be,_t)|0,ye=ye+Math.imul(ce,yt)|0,oe=oe+Math.imul(ce,St)|0,oe=oe+Math.imul(we,yt)|0,se=se+Math.imul(we,St)|0;var Ot=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,ye=Math.imul(me,qe),oe=Math.imul(me,rt),oe=oe+Math.imul(_e,qe)|0,se=Math.imul(_e,rt),ye=ye+Math.imul(ve,at)|0,oe=oe+Math.imul(ve,bt)|0,oe=oe+Math.imul(be,at)|0,se=se+Math.imul(be,bt)|0,ye=ye+Math.imul($e,it)|0,oe=oe+Math.imul($e,vt)|0,oe=oe+Math.imul(Te,it)|0,se=se+Math.imul(Te,vt)|0,ye=ye+Math.imul(He,Fe)|0,oe=oe+Math.imul(He,ke)|0,oe=oe+Math.imul(We,Fe)|0,se=se+Math.imul(We,ke)|0,ye=ye+Math.imul(et,De)|0,oe=oe+Math.imul(et,Xe)|0,oe=oe+Math.imul(Ge,De)|0,se=se+Math.imul(Ge,Xe)|0,ye=ye+Math.imul(ze,Qe)|0,oe=oe+Math.imul(ze,st)|0,oe=oe+Math.imul(Ve,Qe)|0,se=se+Math.imul(Ve,st)|0,ye=ye+Math.imul(Ee,nt)|0,oe=oe+Math.imul(Ee,pt)|0,oe=oe+Math.imul(Ue,nt)|0,se=se+Math.imul(Ue,pt)|0,ye=ye+Math.imul(Re,ct)|0,oe=oe+Math.imul(Re,_t)|0,oe=oe+Math.imul(Me,ct)|0,se=se+Math.imul(Me,_t)|0,ye=ye+Math.imul(Se,yt)|0,oe=oe+Math.imul(Se,St)|0,oe=oe+Math.imul(Be,yt)|0,se=se+Math.imul(Be,St)|0;var kt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(kt>>>26)|0,kt&=67108863,ye=Math.imul(me,at),oe=Math.imul(me,bt),oe=oe+Math.imul(_e,at)|0,se=Math.imul(_e,bt),ye=ye+Math.imul(ve,it)|0,oe=oe+Math.imul(ve,vt)|0,oe=oe+Math.imul(be,it)|0,se=se+Math.imul(be,vt)|0,ye=ye+Math.imul($e,Fe)|0,oe=oe+Math.imul($e,ke)|0,oe=oe+Math.imul(Te,Fe)|0,se=se+Math.imul(Te,ke)|0,ye=ye+Math.imul(He,De)|0,oe=oe+Math.imul(He,Xe)|0,oe=oe+Math.imul(We,De)|0,se=se+Math.imul(We,Xe)|0,ye=ye+Math.imul(et,Qe)|0,oe=oe+Math.imul(et,st)|0,oe=oe+Math.imul(Ge,Qe)|0,se=se+Math.imul(Ge,st)|0,ye=ye+Math.imul(ze,nt)|0,oe=oe+Math.imul(ze,pt)|0,oe=oe+Math.imul(Ve,nt)|0,se=se+Math.imul(Ve,pt)|0,ye=ye+Math.imul(Ee,ct)|0,oe=oe+Math.imul(Ee,_t)|0,oe=oe+Math.imul(Ue,ct)|0,se=se+Math.imul(Ue,_t)|0,ye=ye+Math.imul(Re,yt)|0,oe=oe+Math.imul(Re,St)|0,oe=oe+Math.imul(Me,yt)|0,se=se+Math.imul(Me,St)|0;var Ct=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,ye=Math.imul(me,it),oe=Math.imul(me,vt),oe=oe+Math.imul(_e,it)|0,se=Math.imul(_e,vt),ye=ye+Math.imul(ve,Fe)|0,oe=oe+Math.imul(ve,ke)|0,oe=oe+Math.imul(be,Fe)|0,se=se+Math.imul(be,ke)|0,ye=ye+Math.imul($e,De)|0,oe=oe+Math.imul($e,Xe)|0,oe=oe+Math.imul(Te,De)|0,se=se+Math.imul(Te,Xe)|0,ye=ye+Math.imul(He,Qe)|0,oe=oe+Math.imul(He,st)|0,oe=oe+Math.imul(We,Qe)|0,se=se+Math.imul(We,st)|0,ye=ye+Math.imul(et,nt)|0,oe=oe+Math.imul(et,pt)|0,oe=oe+Math.imul(Ge,nt)|0,se=se+Math.imul(Ge,pt)|0,ye=ye+Math.imul(ze,ct)|0,oe=oe+Math.imul(ze,_t)|0,oe=oe+Math.imul(Ve,ct)|0,se=se+Math.imul(Ve,_t)|0,ye=ye+Math.imul(Ee,yt)|0,oe=oe+Math.imul(Ee,St)|0,oe=oe+Math.imul(Ue,yt)|0,se=se+Math.imul(Ue,St)|0;var Ft=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,ye=Math.imul(me,Fe),oe=Math.imul(me,ke),oe=oe+Math.imul(_e,Fe)|0,se=Math.imul(_e,ke),ye=ye+Math.imul(ve,De)|0,oe=oe+Math.imul(ve,Xe)|0,oe=oe+Math.imul(be,De)|0,se=se+Math.imul(be,Xe)|0,ye=ye+Math.imul($e,Qe)|0,oe=oe+Math.imul($e,st)|0,oe=oe+Math.imul(Te,Qe)|0,se=se+Math.imul(Te,st)|0,ye=ye+Math.imul(He,nt)|0,oe=oe+Math.imul(He,pt)|0,oe=oe+Math.imul(We,nt)|0,se=se+Math.imul(We,pt)|0,ye=ye+Math.imul(et,ct)|0,oe=oe+Math.imul(et,_t)|0,oe=oe+Math.imul(Ge,ct)|0,se=se+Math.imul(Ge,_t)|0,ye=ye+Math.imul(ze,yt)|0,oe=oe+Math.imul(ze,St)|0,oe=oe+Math.imul(Ve,yt)|0,se=se+Math.imul(Ve,St)|0;var Mt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,ye=Math.imul(me,De),oe=Math.imul(me,Xe),oe=oe+Math.imul(_e,De)|0,se=Math.imul(_e,Xe),ye=ye+Math.imul(ve,Qe)|0,oe=oe+Math.imul(ve,st)|0,oe=oe+Math.imul(be,Qe)|0,se=se+Math.imul(be,st)|0,ye=ye+Math.imul($e,nt)|0,oe=oe+Math.imul($e,pt)|0,oe=oe+Math.imul(Te,nt)|0,se=se+Math.imul(Te,pt)|0,ye=ye+Math.imul(He,ct)|0,oe=oe+Math.imul(He,_t)|0,oe=oe+Math.imul(We,ct)|0,se=se+Math.imul(We,_t)|0,ye=ye+Math.imul(et,yt)|0,oe=oe+Math.imul(et,St)|0,oe=oe+Math.imul(Ge,yt)|0,se=se+Math.imul(Ge,St)|0;var Nt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,ye=Math.imul(me,Qe),oe=Math.imul(me,st),oe=oe+Math.imul(_e,Qe)|0,se=Math.imul(_e,st),ye=ye+Math.imul(ve,nt)|0,oe=oe+Math.imul(ve,pt)|0,oe=oe+Math.imul(be,nt)|0,se=se+Math.imul(be,pt)|0,ye=ye+Math.imul($e,ct)|0,oe=oe+Math.imul($e,_t)|0,oe=oe+Math.imul(Te,ct)|0,se=se+Math.imul(Te,_t)|0,ye=ye+Math.imul(He,yt)|0,oe=oe+Math.imul(He,St)|0,oe=oe+Math.imul(We,yt)|0,se=se+Math.imul(We,St)|0;var Ut=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,ye=Math.imul(me,nt),oe=Math.imul(me,pt),oe=oe+Math.imul(_e,nt)|0,se=Math.imul(_e,pt),ye=ye+Math.imul(ve,ct)|0,oe=oe+Math.imul(ve,_t)|0,oe=oe+Math.imul(be,ct)|0,se=se+Math.imul(be,_t)|0,ye=ye+Math.imul($e,yt)|0,oe=oe+Math.imul($e,St)|0,oe=oe+Math.imul(Te,yt)|0,se=se+Math.imul(Te,St)|0;var Ht=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,ye=Math.imul(me,ct),oe=Math.imul(me,_t),oe=oe+Math.imul(_e,ct)|0,se=Math.imul(_e,_t),ye=ye+Math.imul(ve,yt)|0,oe=oe+Math.imul(ve,St)|0,oe=oe+Math.imul(be,yt)|0,se=se+Math.imul(be,St)|0;var Dt=(de+ye|0)+((oe&8191)<<13)|0;de=(se+(oe>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,ye=Math.imul(me,yt),oe=Math.imul(me,St),oe=oe+Math.imul(_e,yt)|0,se=Math.imul(_e,St);var Kt=(de+ye|0)+((oe&8191)<<13)|0;return de=(se+(oe>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,Q[0]=mt,Q[1]=wt,Q[2]=At,Q[3]=Bt,Q[4]=xt,Q[5]=Pt,Q[6]=Tt,Q[7]=It,Q[8]=Rt,Q[9]=Ot,Q[10]=kt,Q[11]=Ct,Q[12]=Ft,Q[13]=Mt,Q[14]=Nt,Q[15]=Ut,Q[16]=Ht,Q[17]=Dt,Q[18]=Kt,de!==0&&(Q[19]=de,F.length++),F};Math.imul||(V=j);function X(ne,J,q){q.negative=J.negative^ne.negative,q.length=ne.length+J.length;for(var F=0,L=0,Z=0;Z<q.length-1;Z++){var Q=L;L=0;for(var de=F&67108863,ye=Math.min(Z,J.length-1),oe=Math.max(0,Z-ne.length+1);oe<=ye;oe++){var se=Z-oe,Y=ne.words[se]|0,ce=J.words[oe]|0,we=Y*ce,Pe=we&67108863;Q=Q+(we/67108864|0)|0,Pe=Pe+de|0,de=Pe&67108863,Q=Q+(Pe>>>26)|0,L+=Q>>>26,Q&=67108863}q.words[Z]=de,F=Q,Q=L}return F!==0?q.words[Z]=F:q.length--,q.strip()}function re(ne,J,q){var F=new ee;return F.mulp(ne,J,q)}P.prototype.mulTo=function(J,q){var F,L=this.length+J.length;return this.length===10&&J.length===10?F=V(this,J,q):L<63?F=j(this,J,q):L<1024?F=X(this,J,q):F=re(this,J,q),F};function ee(ne,J){this.x=ne,this.y=J}ee.prototype.makeRBT=function(J){for(var q=new Array(J),F=P.prototype._countBits(J)-1,L=0;L<J;L++)q[L]=this.revBin(L,F,J);return q},ee.prototype.revBin=function(J,q,F){if(J===0||J===F-1)return J;for(var L=0,Z=0;Z<q;Z++)L|=(J&1)<<q-Z-1,J>>=1;return L},ee.prototype.permute=function(J,q,F,L,Z,Q){for(var de=0;de<Q;de++)L[de]=q[J[de]],Z[de]=F[J[de]]},ee.prototype.transform=function(J,q,F,L,Z,Q){this.permute(Q,J,q,F,L,Z);for(var de=1;de<Z;de<<=1)for(var ye=de<<1,oe=Math.cos(2*Math.PI/ye),se=Math.sin(2*Math.PI/ye),Y=0;Y<Z;Y+=ye)for(var ce=oe,we=se,Pe=0;Pe<de;Pe++){var Se=F[Y+Pe],Be=L[Y+Pe],Ie=F[Y+Pe+de],Re=L[Y+Pe+de],Me=ce*Ie-we*Re;Re=ce*Re+we*Ie,Ie=Me,F[Y+Pe]=Se+Ie,L[Y+Pe]=Be+Re,F[Y+Pe+de]=Se-Ie,L[Y+Pe+de]=Be-Re,Pe!==ye&&(Me=oe*ce-se*we,we=oe*we+se*ce,ce=Me)}},ee.prototype.guessLen13b=function(J,q){var F=Math.max(q,J)|1,L=F&1,Z=0;for(F=F/2|0;F;F=F>>>1)Z++;return 1<<Z+1+L},ee.prototype.conjugate=function(J,q,F){if(!(F<=1))for(var L=0;L<F/2;L++){var Z=J[L];J[L]=J[F-L-1],J[F-L-1]=Z,Z=q[L],q[L]=-q[F-L-1],q[F-L-1]=-Z}},ee.prototype.normalize13b=function(J,q){for(var F=0,L=0;L<q/2;L++){var Z=Math.round(J[2*L+1]/q)*8192+Math.round(J[2*L]/q)+F;J[L]=Z&67108863,Z<67108864?F=0:F=Z/67108864|0}return J},ee.prototype.convert13b=function(J,q,F,L){for(var Z=0,Q=0;Q<q;Q++)Z=Z+(J[Q]|0),F[2*Q]=Z&8191,Z=Z>>>13,F[2*Q+1]=Z&8191,Z=Z>>>13;for(Q=2*q;Q<L;++Q)F[Q]=0;E(Z===0),E((Z&-8192)===0)},ee.prototype.stub=function(J){for(var q=new Array(J),F=0;F<J;F++)q[F]=0;return q},ee.prototype.mulp=function(J,q,F){var L=2*this.guessLen13b(J.length,q.length),Z=this.makeRBT(L),Q=this.stub(L),de=new Array(L),ye=new Array(L),oe=new Array(L),se=new Array(L),Y=new Array(L),ce=new Array(L),we=F.words;we.length=L,this.convert13b(J.words,J.length,de,L),this.convert13b(q.words,q.length,se,L),this.transform(de,Q,ye,oe,L,Z),this.transform(se,Q,Y,ce,L,Z);for(var Pe=0;Pe<L;Pe++){var Se=ye[Pe]*Y[Pe]-oe[Pe]*ce[Pe];oe[Pe]=ye[Pe]*ce[Pe]+oe[Pe]*Y[Pe],ye[Pe]=Se}return this.conjugate(ye,oe,L),this.transform(ye,oe,we,Q,L,Z),this.conjugate(we,Q,L),this.normalize13b(we,L),F.negative=J.negative^q.negative,F.length=J.length+q.length,F.strip()},P.prototype.mul=function(J){var q=new P(null);return q.words=new Array(this.length+J.length),this.mulTo(J,q)},P.prototype.mulf=function(J){var q=new P(null);return q.words=new Array(this.length+J.length),re(this,J,q)},P.prototype.imul=function(J){return this.clone().mulTo(J,this)},P.prototype.imuln=function(J){E(typeof J=="number"),E(J<67108864);for(var q=0,F=0;F<this.length;F++){var L=(this.words[F]|0)*J,Z=(L&67108863)+(q&67108863);q>>=26,q+=L/67108864|0,q+=Z>>>26,this.words[F]=Z&67108863}return q!==0&&(this.words[F]=q,this.length++),this},P.prototype.muln=function(J){return this.clone().imuln(J)},P.prototype.sqr=function(){return this.mul(this)},P.prototype.isqr=function(){return this.imul(this.clone())},P.prototype.pow=function(J){var q=D(J);if(q.length===0)return new P(1);for(var F=this,L=0;L<q.length&&q[L]===0;L++,F=F.sqr());if(++L<q.length)for(var Z=F.sqr();L<q.length;L++,Z=Z.sqr())q[L]!==0&&(F=F.mul(Z));return F},P.prototype.iushln=function(J){E(typeof J=="number"&&J>=0);var q=J%26,F=(J-q)/26,L=67108863>>>26-q<<26-q,Z;if(q!==0){var Q=0;for(Z=0;Z<this.length;Z++){var de=this.words[Z]&L,ye=(this.words[Z]|0)-de<<q;this.words[Z]=ye|Q,Q=de>>>26-q}Q&&(this.words[Z]=Q,this.length++)}if(F!==0){for(Z=this.length-1;Z>=0;Z--)this.words[Z+F]=this.words[Z];for(Z=0;Z<F;Z++)this.words[Z]=0;this.length+=F}return this.strip()},P.prototype.ishln=function(J){return E(this.negative===0),this.iushln(J)},P.prototype.iushrn=function(J,q,F){E(typeof J=="number"&&J>=0);var L;q?L=(q-q%26)/26:L=0;var Z=J%26,Q=Math.min((J-Z)/26,this.length),de=67108863^67108863>>>Z<<Z,ye=F;if(L-=Q,L=Math.max(0,L),ye){for(var oe=0;oe<Q;oe++)ye.words[oe]=this.words[oe];ye.length=Q}if(Q!==0)if(this.length>Q)for(this.length-=Q,oe=0;oe<this.length;oe++)this.words[oe]=this.words[oe+Q];else this.words[0]=0,this.length=1;var se=0;for(oe=this.length-1;oe>=0&&(se!==0||oe>=L);oe--){var Y=this.words[oe]|0;this.words[oe]=se<<26-Z|Y>>>Z,se=Y&de}return ye&&se!==0&&(ye.words[ye.length++]=se),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},P.prototype.ishrn=function(J,q,F){return E(this.negative===0),this.iushrn(J,q,F)},P.prototype.shln=function(J){return this.clone().ishln(J)},P.prototype.ushln=function(J){return this.clone().iushln(J)},P.prototype.shrn=function(J){return this.clone().ishrn(J)},P.prototype.ushrn=function(J){return this.clone().iushrn(J)},P.prototype.testn=function(J){E(typeof J=="number"&&J>=0);var q=J%26,F=(J-q)/26,L=1<<q;if(this.length<=F)return!1;var Z=this.words[F];return!!(Z&L)},P.prototype.imaskn=function(J){E(typeof J=="number"&&J>=0);var q=J%26,F=(J-q)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(q!==0&&F++,this.length=Math.min(F,this.length),q!==0){var L=67108863^67108863>>>q<<q;this.words[this.length-1]&=L}return this.strip()},P.prototype.maskn=function(J){return this.clone().imaskn(J)},P.prototype.iaddn=function(J){return E(typeof J=="number"),E(J<67108864),J<0?this.isubn(-J):this.negative!==0?this.length===1&&(this.words[0]|0)<J?(this.words[0]=J-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(J),this.negative=1,this):this._iaddn(J)},P.prototype._iaddn=function(J){this.words[0]+=J;for(var q=0;q<this.length&&this.words[q]>=67108864;q++)this.words[q]-=67108864,q===this.length-1?this.words[q+1]=1:this.words[q+1]++;return this.length=Math.max(this.length,q+1),this},P.prototype.isubn=function(J){if(E(typeof J=="number"),E(J<67108864),J<0)return this.iaddn(-J);if(this.negative!==0)return this.negative=0,this.iaddn(J),this.negative=1,this;if(this.words[0]-=J,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var q=0;q<this.length&&this.words[q]<0;q++)this.words[q]+=67108864,this.words[q+1]-=1;return this.strip()},P.prototype.addn=function(J){return this.clone().iaddn(J)},P.prototype.subn=function(J){return this.clone().isubn(J)},P.prototype.iabs=function(){return this.negative=0,this},P.prototype.abs=function(){return this.clone().iabs()},P.prototype._ishlnsubmul=function(J,q,F){var L=J.length+F,Z;this._expand(L);var Q,de=0;for(Z=0;Z<J.length;Z++){Q=(this.words[Z+F]|0)+de;var ye=(J.words[Z]|0)*q;Q-=ye&67108863,de=(Q>>26)-(ye/67108864|0),this.words[Z+F]=Q&67108863}for(;Z<this.length-F;Z++)Q=(this.words[Z+F]|0)+de,de=Q>>26,this.words[Z+F]=Q&67108863;if(de===0)return this.strip();for(E(de===-1),de=0,Z=0;Z<this.length;Z++)Q=-(this.words[Z]|0)+de,de=Q>>26,this.words[Z]=Q&67108863;return this.negative=1,this.strip()},P.prototype._wordDiv=function(J,q){var F=this.length-J.length,L=this.clone(),Z=J,Q=Z.words[Z.length-1]|0,de=this._countBits(Q);F=26-de,F!==0&&(Z=Z.ushln(F),L.iushln(F),Q=Z.words[Z.length-1]|0);var ye=L.length-Z.length,oe;if(q!=="mod"){oe=new P(null),oe.length=ye+1,oe.words=new Array(oe.length);for(var se=0;se<oe.length;se++)oe.words[se]=0}var Y=L.clone()._ishlnsubmul(Z,1,ye);Y.negative===0&&(L=Y,oe&&(oe.words[ye]=1));for(var ce=ye-1;ce>=0;ce--){var we=(L.words[Z.length+ce]|0)*67108864+(L.words[Z.length+ce-1]|0);for(we=Math.min(we/Q|0,67108863),L._ishlnsubmul(Z,we,ce);L.negative!==0;)we--,L.negative=0,L._ishlnsubmul(Z,1,ce),L.isZero()||(L.negative^=1);oe&&(oe.words[ce]=we)}return oe&&oe.strip(),L.strip(),q!=="div"&&F!==0&&L.iushrn(F),{div:oe||null,mod:L}},P.prototype.divmod=function(J,q,F){if(E(!J.isZero()),this.isZero())return{div:new P(0),mod:new P(0)};var L,Z,Q;return this.negative!==0&&J.negative===0?(Q=this.neg().divmod(J,q),q!=="mod"&&(L=Q.div.neg()),q!=="div"&&(Z=Q.mod.neg(),F&&Z.negative!==0&&Z.iadd(J)),{div:L,mod:Z}):this.negative===0&&J.negative!==0?(Q=this.divmod(J.neg(),q),q!=="mod"&&(L=Q.div.neg()),{div:L,mod:Q.mod}):this.negative&J.negative?(Q=this.neg().divmod(J.neg(),q),q!=="div"&&(Z=Q.mod.neg(),F&&Z.negative!==0&&Z.isub(J)),{div:Q.div,mod:Z}):J.length>this.length||this.cmp(J)<0?{div:new P(0),mod:this}:J.length===1?q==="div"?{div:this.divn(J.words[0]),mod:null}:q==="mod"?{div:null,mod:new P(this.modn(J.words[0]))}:{div:this.divn(J.words[0]),mod:new P(this.modn(J.words[0]))}:this._wordDiv(J,q)},P.prototype.div=function(J){return this.divmod(J,"div",!1).div},P.prototype.mod=function(J){return this.divmod(J,"mod",!1).mod},P.prototype.umod=function(J){return this.divmod(J,"mod",!0).mod},P.prototype.divRound=function(J){var q=this.divmod(J);if(q.mod.isZero())return q.div;var F=q.div.negative!==0?q.mod.isub(J):q.mod,L=J.ushrn(1),Z=J.andln(1),Q=F.cmp(L);return Q<0||Z===1&&Q===0?q.div:q.div.negative!==0?q.div.isubn(1):q.div.iaddn(1)},P.prototype.modn=function(J){E(J<=67108863);for(var q=(1<<26)%J,F=0,L=this.length-1;L>=0;L--)F=(q*F+(this.words[L]|0))%J;return F},P.prototype.idivn=function(J){E(J<=67108863);for(var q=0,F=this.length-1;F>=0;F--){var L=(this.words[F]|0)+q*67108864;this.words[F]=L/J|0,q=L%J}return this.strip()},P.prototype.divn=function(J){return this.clone().idivn(J)},P.prototype.egcd=function(J){E(J.negative===0),E(!J.isZero());var q=this,F=J.clone();q.negative!==0?q=q.umod(J):q=q.clone();for(var L=new P(1),Z=new P(0),Q=new P(0),de=new P(1),ye=0;q.isEven()&&F.isEven();)q.iushrn(1),F.iushrn(1),++ye;for(var oe=F.clone(),se=q.clone();!q.isZero();){for(var Y=0,ce=1;!(q.words[0]&ce)&&Y<26;++Y,ce<<=1);if(Y>0)for(q.iushrn(Y);Y-- >0;)(L.isOdd()||Z.isOdd())&&(L.iadd(oe),Z.isub(se)),L.iushrn(1),Z.iushrn(1);for(var we=0,Pe=1;!(F.words[0]&Pe)&&we<26;++we,Pe<<=1);if(we>0)for(F.iushrn(we);we-- >0;)(Q.isOdd()||de.isOdd())&&(Q.iadd(oe),de.isub(se)),Q.iushrn(1),de.iushrn(1);q.cmp(F)>=0?(q.isub(F),L.isub(Q),Z.isub(de)):(F.isub(q),Q.isub(L),de.isub(Z))}return{a:Q,b:de,gcd:F.iushln(ye)}},P.prototype._invmp=function(J){E(J.negative===0),E(!J.isZero());var q=this,F=J.clone();q.negative!==0?q=q.umod(J):q=q.clone();for(var L=new P(1),Z=new P(0),Q=F.clone();q.cmpn(1)>0&&F.cmpn(1)>0;){for(var de=0,ye=1;!(q.words[0]&ye)&&de<26;++de,ye<<=1);if(de>0)for(q.iushrn(de);de-- >0;)L.isOdd()&&L.iadd(Q),L.iushrn(1);for(var oe=0,se=1;!(F.words[0]&se)&&oe<26;++oe,se<<=1);if(oe>0)for(F.iushrn(oe);oe-- >0;)Z.isOdd()&&Z.iadd(Q),Z.iushrn(1);q.cmp(F)>=0?(q.isub(F),L.isub(Z)):(F.isub(q),Z.isub(L))}var Y;return q.cmpn(1)===0?Y=L:Y=Z,Y.cmpn(0)<0&&Y.iadd(J),Y},P.prototype.gcd=function(J){if(this.isZero())return J.abs();if(J.isZero())return this.abs();var q=this.clone(),F=J.clone();q.negative=0,F.negative=0;for(var L=0;q.isEven()&&F.isEven();L++)q.iushrn(1),F.iushrn(1);do{for(;q.isEven();)q.iushrn(1);for(;F.isEven();)F.iushrn(1);var Z=q.cmp(F);if(Z<0){var Q=q;q=F,F=Q}else if(Z===0||F.cmpn(1)===0)break;q.isub(F)}while(!0);return F.iushln(L)},P.prototype.invm=function(J){return this.egcd(J).a.umod(J)},P.prototype.isEven=function(){return(this.words[0]&1)===0},P.prototype.isOdd=function(){return(this.words[0]&1)===1},P.prototype.andln=function(J){return this.words[0]&J},P.prototype.bincn=function(J){E(typeof J=="number");var q=J%26,F=(J-q)/26,L=1<<q;if(this.length<=F)return this._expand(F+1),this.words[F]|=L,this;for(var Z=L,Q=F;Z!==0&&Q<this.length;Q++){var de=this.words[Q]|0;de+=Z,Z=de>>>26,de&=67108863,this.words[Q]=de}return Z!==0&&(this.words[Q]=Z,this.length++),this},P.prototype.isZero=function(){return this.length===1&&this.words[0]===0},P.prototype.cmpn=function(J){var q=J<0;if(this.negative!==0&&!q)return-1;if(this.negative===0&&q)return 1;this.strip();var F;if(this.length>1)F=1;else{q&&(J=-J),E(J<=67108863,"Number is too big");var L=this.words[0]|0;F=L===J?0:L<J?-1:1}return this.negative!==0?-F|0:F},P.prototype.cmp=function(J){if(this.negative!==0&&J.negative===0)return-1;if(this.negative===0&&J.negative!==0)return 1;var q=this.ucmp(J);return this.negative!==0?-q|0:q},P.prototype.ucmp=function(J){if(this.length>J.length)return 1;if(this.length<J.length)return-1;for(var q=0,F=this.length-1;F>=0;F--){var L=this.words[F]|0,Z=J.words[F]|0;if(L!==Z){L<Z?q=-1:L>Z&&(q=1);break}}return q},P.prototype.gtn=function(J){return this.cmpn(J)===1},P.prototype.gt=function(J){return this.cmp(J)===1},P.prototype.gten=function(J){return this.cmpn(J)>=0},P.prototype.gte=function(J){return this.cmp(J)>=0},P.prototype.ltn=function(J){return this.cmpn(J)===-1},P.prototype.lt=function(J){return this.cmp(J)===-1},P.prototype.lten=function(J){return this.cmpn(J)<=0},P.prototype.lte=function(J){return this.cmp(J)<=0},P.prototype.eqn=function(J){return this.cmpn(J)===0},P.prototype.eq=function(J){return this.cmp(J)===0},P.red=function(J){return new te(J)},P.prototype.toRed=function(J){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),J.convertTo(this)._forceRed(J)},P.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},P.prototype._forceRed=function(J){return this.red=J,this},P.prototype.forceRed=function(J){return E(!this.red,"Already a number in reduction context"),this._forceRed(J)},P.prototype.redAdd=function(J){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,J)},P.prototype.redIAdd=function(J){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,J)},P.prototype.redSub=function(J){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,J)},P.prototype.redISub=function(J){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,J)},P.prototype.redShl=function(J){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,J)},P.prototype.redMul=function(J){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,J),this.red.mul(this,J)},P.prototype.redIMul=function(J){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,J),this.red.imul(this,J)},P.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},P.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},P.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},P.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},P.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},P.prototype.redPow=function(J){return E(this.red&&!J.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,J)};var fe={k256:null,p224:null,p192:null,p25519:null};function le(ne,J){this.name=ne,this.p=new P(J,16),this.n=this.p.bitLength(),this.k=new P(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}le.prototype._tmp=function(){var J=new P(null);return J.words=new Array(Math.ceil(this.n/13)),J},le.prototype.ireduce=function(J){var q=J,F;do this.split(q,this.tmp),q=this.imulK(q),q=q.iadd(this.tmp),F=q.bitLength();while(F>this.n);var L=F<this.n?-1:q.ucmp(this.p);return L===0?(q.words[0]=0,q.length=1):L>0?q.isub(this.p):q.strip!==void 0?q.strip():q._strip(),q},le.prototype.split=function(J,q){J.iushrn(this.n,0,q)},le.prototype.imulK=function(J){return J.imul(this.k)};function pe(){le.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}A(pe,le),pe.prototype.split=function(J,q){for(var F=4194303,L=Math.min(J.length,9),Z=0;Z<L;Z++)q.words[Z]=J.words[Z];if(q.length=L,J.length<=9){J.words[0]=0,J.length=1;return}var Q=J.words[9];for(q.words[q.length++]=Q&F,Z=10;Z<J.length;Z++){var de=J.words[Z]|0;J.words[Z-10]=(de&F)<<4|Q>>>22,Q=de}Q>>>=22,J.words[Z-10]=Q,Q===0&&J.length>10?J.length-=10:J.length-=9},pe.prototype.imulK=function(J){J.words[J.length]=0,J.words[J.length+1]=0,J.length+=2;for(var q=0,F=0;F<J.length;F++){var L=J.words[F]|0;q+=L*977,J.words[F]=q&67108863,q=L*64+(q/67108864|0)}return J.words[J.length-1]===0&&(J.length--,J.words[J.length-1]===0&&J.length--),J};function ie(){le.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}A(ie,le);function he(){le.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}A(he,le);function ae(){le.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}A(ae,le),ae.prototype.imulK=function(J){for(var q=0,F=0;F<J.length;F++){var L=(J.words[F]|0)*19+q,Z=L&67108863;L>>>=26,J.words[F]=Z,q=L}return q!==0&&(J.words[J.length++]=q),J},P._prime=function(J){if(fe[J])return fe[J];var q;if(J==="k256")q=new pe;else if(J==="p224")q=new ie;else if(J==="p192")q=new he;else if(J==="p25519")q=new ae;else throw new Error("Unknown prime "+J);return fe[J]=q,q};function te(ne){if(typeof ne=="string"){var J=P._prime(ne);this.m=J.p,this.prime=J}else E(ne.gtn(1),"modulus must be greater than 1"),this.m=ne,this.prime=null}te.prototype._verify1=function(J){E(J.negative===0,"red works only with positives"),E(J.red,"red works only with red numbers")},te.prototype._verify2=function(J,q){E((J.negative|q.negative)===0,"red works only with positives"),E(J.red&&J.red===q.red,"red works only with red numbers")},te.prototype.imod=function(J){return this.prime?this.prime.ireduce(J)._forceRed(this):J.umod(this.m)._forceRed(this)},te.prototype.neg=function(J){return J.isZero()?J.clone():this.m.sub(J)._forceRed(this)},te.prototype.add=function(J,q){this._verify2(J,q);var F=J.add(q);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},te.prototype.iadd=function(J,q){this._verify2(J,q);var F=J.iadd(q);return F.cmp(this.m)>=0&&F.isub(this.m),F},te.prototype.sub=function(J,q){this._verify2(J,q);var F=J.sub(q);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},te.prototype.isub=function(J,q){this._verify2(J,q);var F=J.isub(q);return F.cmpn(0)<0&&F.iadd(this.m),F},te.prototype.shl=function(J,q){return this._verify1(J),this.imod(J.ushln(q))},te.prototype.imul=function(J,q){return this._verify2(J,q),this.imod(J.imul(q))},te.prototype.mul=function(J,q){return this._verify2(J,q),this.imod(J.mul(q))},te.prototype.isqr=function(J){return this.imul(J,J.clone())},te.prototype.sqr=function(J){return this.mul(J,J)},te.prototype.sqrt=function(J){if(J.isZero())return J.clone();var q=this.m.andln(3);if(E(q%2===1),q===3){var F=this.m.add(new P(1)).iushrn(2);return this.pow(J,F)}for(var L=this.m.subn(1),Z=0;!L.isZero()&&L.andln(1)===0;)Z++,L.iushrn(1);E(!L.isZero());var Q=new P(1).toRed(this),de=Q.redNeg(),ye=this.m.subn(1).iushrn(1),oe=this.m.bitLength();for(oe=new P(2*oe*oe).toRed(this);this.pow(oe,ye).cmp(de)!==0;)oe.redIAdd(de);for(var se=this.pow(oe,L),Y=this.pow(J,L.addn(1).iushrn(1)),ce=this.pow(J,L),we=Z;ce.cmp(Q)!==0;){for(var Pe=ce,Se=0;Pe.cmp(Q)!==0;Se++)Pe=Pe.redSqr();E(Se<we);var Be=this.pow(se,new P(1).iushln(we-Se-1));Y=Y.redMul(Be),se=Be.redSqr(),ce=ce.redMul(se),we=Se}return Y},te.prototype.invm=function(J){var q=J._invmp(this.m);return q.negative!==0?(q.negative=0,this.imod(q).redNeg()):this.imod(q)},te.prototype.pow=function(J,q){if(q.isZero())return new P(1).toRed(this);if(q.cmpn(1)===0)return J.clone();var F=4,L=new Array(1<<F);L[0]=new P(1).toRed(this),L[1]=J;for(var Z=2;Z<L.length;Z++)L[Z]=this.mul(L[Z-1],J);var Q=L[0],de=0,ye=0,oe=q.bitLength()%26;for(oe===0&&(oe=26),Z=q.length-1;Z>=0;Z--){for(var se=q.words[Z],Y=oe-1;Y>=0;Y--){var ce=se>>Y&1;if(Q!==L[0]&&(Q=this.sqr(Q)),ce===0&&de===0){ye=0;continue}de<<=1,de|=ce,ye++,!(ye!==F&&(Z!==0||Y!==0))&&(Q=this.mul(Q,L[de]),ye=0,de=0)}oe=26}return Q},te.prototype.convertTo=function(J){var q=J.umod(this.m);return q===J?q.clone():q},te.prototype.convertFrom=function(J){var q=J.clone();return q.red=null,q},P.mont=function(J){return new ue(J)};function ue(ne){te.call(this,ne),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new P(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A(ue,te),ue.prototype.convertTo=function(J){return this.imod(J.ushln(this.shift))},ue.prototype.convertFrom=function(J){var q=this.imod(J.mul(this.rinv));return q.red=null,q},ue.prototype.imul=function(J,q){if(J.isZero()||q.isZero())return J.words[0]=0,J.length=1,J;var F=J.imul(q),L=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=F.isub(L).iushrn(this.shift),Q=Z;return Z.cmp(this.m)>=0?Q=Z.isub(this.m):Z.cmpn(0)<0&&(Q=Z.iadd(this.m)),Q._forceRed(this)},ue.prototype.mul=function(J,q){if(J.isZero()||q.isZero())return new P(0)._forceRed(this);var F=J.mul(q),L=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=F.isub(L).iushrn(this.shift),Q=Z;return Z.cmp(this.m)>=0?Q=Z.isub(this.m):Z.cmpn(0)<0&&(Q=Z.iadd(this.m)),Q._forceRed(this)},ue.prototype.invm=function(J){var q=this.imod(J._invmp(this.m).mul(this.r2));return q._forceRed(this)}})(v,commonjsGlobal)}(bn$2);var bnExports$2=bn$2.exports,__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(rlp,"__esModule",{value:!0}),rlp.stripHexPrefix=rlp.isHexPrefixed=rlp.getLength=rlp.decode=rlp.encode=void 0;const bn_js_1$3=__importDefault$3(bnExports$2);function encode$J(v){if(Array.isArray(v)){const _=[];for(let E=0;E<v.length;E++)_.push(encode$J(v[E]));const x=dist$4.Buffer.concat(_);return dist$4.Buffer.concat([encodeLength(x.length,192),x])}else{const _=toBuffer$5(v);return _.length===1&&_[0]<128?_:dist$4.Buffer.concat([encodeLength(_.length,128),_])}}rlp.encode=encode$J;function safeParseInt(v,_){if(v[0]==="0"&&v[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(v,_)}function encodeLength(v,_){if(v<56)return dist$4.Buffer.from([v+_]);{const x=intToHex(v),E=x.length/2,A=intToHex(_+55+E);return dist$4.Buffer.from(A+x,"hex")}}function decode$E(v,_=!1){if(!v||v.length===0)return dist$4.Buffer.from([]);const x=toBuffer$5(v),E=_decode(x);if(_)return E;if(E.remainder.length!==0)throw new Error("invalid remainder");return E.data}rlp.decode=decode$E;function getLength$2(v){if(!v||v.length===0)return dist$4.Buffer.from([]);const _=toBuffer$5(v),x=_[0];if(x<=127)return _.length;if(x<=183)return x-127;if(x<=191)return x-182;if(x<=247)return x-191;{const E=x-246,A=safeParseInt(_.slice(1,E).toString("hex"),16);return E+A}}rlp.getLength=getLength$2;function _decode(v){let _,x,E,A,P;const T=[],O=v[0];if(O<=127)return{data:v.slice(0,1),remainder:v.slice(1)};if(O<=183){if(_=O-127,O===128?E=dist$4.Buffer.from([]):E=v.slice(1,_),_===2&&E[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:E,remainder:v.slice(_)}}else if(O<=191){if(x=O-182,v.length-1<x)throw new Error("invalid RLP: not enough bytes for string length");if(_=safeParseInt(v.slice(1,x).toString("hex"),16),_<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(E=v.slice(x,_+x),E.length<_)throw new Error("invalid RLP: not enough bytes for string");return{data:E,remainder:v.slice(_+x)}}else if(O<=247){for(_=O-191,A=v.slice(1,_);A.length;)P=_decode(A),T.push(P.data),A=P.remainder;return{data:T,remainder:v.slice(_)}}else{x=O-246,_=safeParseInt(v.slice(1,x).toString("hex"),16);const k=x+_;if(k>v.length)throw new Error("invalid rlp: total length is larger than the data");if(A=v.slice(x,k),A.length===0)throw new Error("invalid rlp, List has a invalid length");for(;A.length;)P=_decode(A),T.push(P.data),A=P.remainder;return{data:T,remainder:v.slice(k)}}}function isHexPrefixed$1(v){return v.slice(0,2)==="0x"}rlp.isHexPrefixed=isHexPrefixed$1;function stripHexPrefix$1(v){return isHexPrefixed$1(v)?v.slice(2):v}rlp.stripHexPrefix=stripHexPrefix$1;function intToHex(v){if(v<0)throw new Error("Invalid integer as argument, must be unsigned!");const _=v.toString(16);return _.length%2?`0${_}`:_}function padToEven$1(v){return v.length%2?`0${v}`:v}function intToBuffer(v){const _=intToHex(v);return dist$4.Buffer.from(_,"hex")}function toBuffer$5(v){if(!dist$4.Buffer.isBuffer(v)){if(typeof v=="string")return isHexPrefixed$1(v)?dist$4.Buffer.from(padToEven$1(stripHexPrefix$1(v)),"hex"):dist$4.Buffer.from(v);if(typeof v=="number"||typeof v=="bigint")return v?intToBuffer(v):dist$4.Buffer.from([]);if(v==null)return dist$4.Buffer.from([]);if(v instanceof Uint8Array)return dist$4.Buffer.from(v);if(bn_js_1$3.default.isBN(v))return dist$4.Buffer.from(v.toArray());throw new Error("invalid type")}return v}var helper={};Object.defineProperty(helper,"__esModule",{value:!0}),helper.isHexString=void 0;function isHexString$1(v,_){return v.match(/^0x[0-9A-Fa-f]*$/)?!(_&&v.length!==2+2*_):!1}helper.isHexString=isHexString$1;var md5$4={};Object.defineProperty(md5$4,"__esModule",{value:!0}),md5$4.encode=void 0;function encode$I(v){var _="0123456789abcdef";function x(pe){var ie,he="";for(ie=0;ie<=3;ie++)he+=_.charAt(pe>>ie*8+4&15)+_.charAt(pe>>ie*8&15);return he}function E(pe,ie){var he=(pe&65535)+(ie&65535),ae=(pe>>16)+(ie>>16)+(he>>16);return ae<<16|he&65535}function A(pe,ie){return pe<<ie|pe>>>32-ie}function P(pe,ie,he,ae,te,ue){return E(A(E(E(ie,pe),E(ae,ue)),te),he)}function T(pe,ie,he,ae,te,ue,ne){return P(ie&he|~ie&ae,pe,ie,te,ue,ne)}function O(pe,ie,he,ae,te,ue,ne){return P(ie&ae|he&~ae,pe,ie,te,ue,ne)}function k(pe,ie,he,ae,te,ue,ne){return P(ie^he^ae,pe,ie,te,ue,ne)}function C(pe,ie,he,ae,te,ue,ne){return P(he^(ie|~ae),pe,ie,te,ue,ne)}function U(pe){var ie,he=(pe.length+8>>6)+1,ae=new Array(he*16);for(ie=0;ie<he*16;ie++)ae[ie]=0;for(ie=0;ie<pe.length;ie++)ae[ie>>2]|=pe.charCodeAt(ie)<<ie%4*8;return ae[ie>>2]|=128<<ie%4*8,ae[he*16-2]=pe.length*8,ae}var N,H=U(""+v),D=1732584193,j=-271733879,V=-1732584194,X=271733878,re,ee,fe,le;for(N=0;N<H.length;N+=16)re=D,ee=j,fe=V,le=X,D=T(D,j,V,X,H[N+0],7,-680876936),X=T(X,D,j,V,H[N+1],12,-389564586),V=T(V,X,D,j,H[N+2],17,606105819),j=T(j,V,X,D,H[N+3],22,-1044525330),D=T(D,j,V,X,H[N+4],7,-176418897),X=T(X,D,j,V,H[N+5],12,1200080426),V=T(V,X,D,j,H[N+6],17,-1473231341),j=T(j,V,X,D,H[N+7],22,-45705983),D=T(D,j,V,X,H[N+8],7,1770035416),X=T(X,D,j,V,H[N+9],12,-1958414417),V=T(V,X,D,j,H[N+10],17,-42063),j=T(j,V,X,D,H[N+11],22,-1990404162),D=T(D,j,V,X,H[N+12],7,1804603682),X=T(X,D,j,V,H[N+13],12,-40341101),V=T(V,X,D,j,H[N+14],17,-1502002290),j=T(j,V,X,D,H[N+15],22,1236535329),D=O(D,j,V,X,H[N+1],5,-165796510),X=O(X,D,j,V,H[N+6],9,-1069501632),V=O(V,X,D,j,H[N+11],14,643717713),j=O(j,V,X,D,H[N+0],20,-373897302),D=O(D,j,V,X,H[N+5],5,-701558691),X=O(X,D,j,V,H[N+10],9,38016083),V=O(V,X,D,j,H[N+15],14,-660478335),j=O(j,V,X,D,H[N+4],20,-405537848),D=O(D,j,V,X,H[N+9],5,568446438),X=O(X,D,j,V,H[N+14],9,-1019803690),V=O(V,X,D,j,H[N+3],14,-187363961),j=O(j,V,X,D,H[N+8],20,1163531501),D=O(D,j,V,X,H[N+13],5,-1444681467),X=O(X,D,j,V,H[N+2],9,-51403784),V=O(V,X,D,j,H[N+7],14,1735328473),j=O(j,V,X,D,H[N+12],20,-1926607734),D=k(D,j,V,X,H[N+5],4,-378558),X=k(X,D,j,V,H[N+8],11,-2022574463),V=k(V,X,D,j,H[N+11],16,1839030562),j=k(j,V,X,D,H[N+14],23,-35309556),D=k(D,j,V,X,H[N+1],4,-1530992060),X=k(X,D,j,V,H[N+4],11,1272893353),V=k(V,X,D,j,H[N+7],16,-155497632),j=k(j,V,X,D,H[N+10],23,-1094730640),D=k(D,j,V,X,H[N+13],4,681279174),X=k(X,D,j,V,H[N+0],11,-358537222),V=k(V,X,D,j,H[N+3],16,-722521979),j=k(j,V,X,D,H[N+6],23,76029189),D=k(D,j,V,X,H[N+9],4,-640364487),X=k(X,D,j,V,H[N+12],11,-421815835),V=k(V,X,D,j,H[N+15],16,530742520),j=k(j,V,X,D,H[N+2],23,-995338651),D=C(D,j,V,X,H[N+0],6,-198630844),X=C(X,D,j,V,H[N+7],10,1126891415),V=C(V,X,D,j,H[N+14],15,-1416354905),j=C(j,V,X,D,H[N+5],21,-57434055),D=C(D,j,V,X,H[N+12],6,1700485571),X=C(X,D,j,V,H[N+3],10,-1894986606),V=C(V,X,D,j,H[N+10],15,-1051523),j=C(j,V,X,D,H[N+1],21,-2054922799),D=C(D,j,V,X,H[N+8],6,1873313359),X=C(X,D,j,V,H[N+15],10,-30611744),V=C(V,X,D,j,H[N+6],15,-1560198380),j=C(j,V,X,D,H[N+13],21,1309151649),D=C(D,j,V,X,H[N+4],6,-145523070),X=C(X,D,j,V,H[N+11],10,-1120210379),V=C(V,X,D,j,H[N+2],15,718787259),j=C(j,V,X,D,H[N+9],21,-343485551),D=E(D,re),j=E(j,ee),V=E(V,fe),X=E(X,le);return x(D)+x(j)+x(V)+x(X)}md5$4.encode=encode$I;var aes$7={},cryptoJs={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(v,_){(function(x,E){v.exports=E()})(commonjsGlobal,function(){var x=x||function(E,A){var P=Object.create||function(){function X(){}return function(re){var ee;return X.prototype=re,ee=new X,X.prototype=null,ee}}(),T={},O=T.lib={},k=O.Base=function(){return{extend:function(X){var re=P(this);return X&&re.mixIn(X),(!re.hasOwnProperty("init")||this.init===re.init)&&(re.init=function(){re.$super.init.apply(this,arguments)}),re.init.prototype=re,re.$super=this,re},create:function(){var X=this.extend();return X.init.apply(X,arguments),X},init:function(){},mixIn:function(X){for(var re in X)X.hasOwnProperty(re)&&(this[re]=X[re]);X.hasOwnProperty("toString")&&(this.toString=X.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),C=O.WordArray=k.extend({init:function(X,re){X=this.words=X||[],re!=A?this.sigBytes=re:this.sigBytes=X.length*4},toString:function(X){return(X||N).stringify(this)},concat:function(X){var re=this.words,ee=X.words,fe=this.sigBytes,le=X.sigBytes;if(this.clamp(),fe%4)for(var pe=0;pe<le;pe++){var ie=ee[pe>>>2]>>>24-pe%4*8&255;re[fe+pe>>>2]|=ie<<24-(fe+pe)%4*8}else for(var pe=0;pe<le;pe+=4)re[fe+pe>>>2]=ee[pe>>>2];return this.sigBytes+=le,this},clamp:function(){var X=this.words,re=this.sigBytes;X[re>>>2]&=4294967295<<32-re%4*8,X.length=E.ceil(re/4)},clone:function(){var X=k.clone.call(this);return X.words=this.words.slice(0),X},random:function(X){for(var re=[],ee=function(he){var he=he,ae=987654321,te=4294967295;return function(){ae=36969*(ae&65535)+(ae>>16)&te,he=18e3*(he&65535)+(he>>16)&te;var ue=(ae<<16)+he&te;return ue/=4294967296,ue+=.5,ue*(E.random()>.5?1:-1)}},fe=0,le;fe<X;fe+=4){var pe=ee((le||E.random())*4294967296);le=pe()*987654071,re.push(pe()*4294967296|0)}return new C.init(re,X)}}),U=T.enc={},N=U.Hex={stringify:function(X){for(var re=X.words,ee=X.sigBytes,fe=[],le=0;le<ee;le++){var pe=re[le>>>2]>>>24-le%4*8&255;fe.push((pe>>>4).toString(16)),fe.push((pe&15).toString(16))}return fe.join("")},parse:function(X){for(var re=X.length,ee=[],fe=0;fe<re;fe+=2)ee[fe>>>3]|=parseInt(X.substr(fe,2),16)<<24-fe%8*4;return new C.init(ee,re/2)}},H=U.Latin1={stringify:function(X){for(var re=X.words,ee=X.sigBytes,fe=[],le=0;le<ee;le++){var pe=re[le>>>2]>>>24-le%4*8&255;fe.push(String.fromCharCode(pe))}return fe.join("")},parse:function(X){for(var re=X.length,ee=[],fe=0;fe<re;fe++)ee[fe>>>2]|=(X.charCodeAt(fe)&255)<<24-fe%4*8;return new C.init(ee,re)}},D=U.Utf8={stringify:function(X){try{return decodeURIComponent(escape(H.stringify(X)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(X){return H.parse(unescape(encodeURIComponent(X)))}},j=O.BufferedBlockAlgorithm=k.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(X){typeof X=="string"&&(X=D.parse(X)),this._data.concat(X),this._nDataBytes+=X.sigBytes},_process:function(X){var re=this._data,ee=re.words,fe=re.sigBytes,le=this.blockSize,pe=le*4,ie=fe/pe;X?ie=E.ceil(ie):ie=E.max((ie|0)-this._minBufferSize,0);var he=ie*le,ae=E.min(he*4,fe);if(he){for(var te=0;te<he;te+=le)this._doProcessBlock(ee,te);var ue=ee.splice(0,he);re.sigBytes-=ae}return new C.init(ue,ae)},clone:function(){var X=k.clone.call(this);return X._data=this._data.clone(),X},_minBufferSize:0});O.Hasher=j.extend({cfg:k.extend(),init:function(X){this.cfg=this.cfg.extend(X),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(X){return this._append(X),this._process(),this},finalize:function(X){X&&this._append(X);var re=this._doFinalize();return re},blockSize:16,_createHelper:function(X){return function(re,ee){return new X.init(ee).finalize(re)}},_createHmacHelper:function(X){return function(re,ee){return new V.HMAC.init(X,ee).finalize(re)}}});var V=T.algo={};return T}(Math);return x})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(E){var A=x,P=A.lib,T=P.Base,O=P.WordArray,k=A.x64={};k.Word=T.extend({init:function(C,U){this.high=C,this.low=U}}),k.WordArray=T.extend({init:function(C,U){C=this.words=C||[],U!=E?this.sigBytes=U:this.sigBytes=C.length*8},toX32:function(){for(var C=this.words,U=C.length,N=[],H=0;H<U;H++){var D=C[H];N.push(D.high),N.push(D.low)}return O.create(N,this.sigBytes)},clone:function(){for(var C=T.clone.call(this),U=C.words=this.words.slice(0),N=U.length,H=0;H<N;H++)U[H]=U[H].clone();return C}})}(),x})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(){if(typeof ArrayBuffer=="function"){var E=x,A=E.lib,P=A.WordArray,T=P.init,O=P.init=function(k){if(k instanceof ArrayBuffer&&(k=new Uint8Array(k)),(k instanceof Int8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)&&(k=new Uint8Array(k.buffer,k.byteOffset,k.byteLength)),k instanceof Uint8Array){for(var C=k.byteLength,U=[],N=0;N<C;N++)U[N>>>2]|=k[N]<<24-N%4*8;T.call(this,U,C)}else T.apply(this,arguments)};O.prototype=P}}(),x.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.WordArray,T=E.enc;T.Utf16=T.Utf16BE={stringify:function(k){for(var C=k.words,U=k.sigBytes,N=[],H=0;H<U;H+=2){var D=C[H>>>2]>>>16-H%4*8&65535;N.push(String.fromCharCode(D))}return N.join("")},parse:function(k){for(var C=k.length,U=[],N=0;N<C;N++)U[N>>>1]|=k.charCodeAt(N)<<16-N%2*16;return P.create(U,C*2)}},T.Utf16LE={stringify:function(k){for(var C=k.words,U=k.sigBytes,N=[],H=0;H<U;H+=2){var D=O(C[H>>>2]>>>16-H%4*8&65535);N.push(String.fromCharCode(D))}return N.join("")},parse:function(k){for(var C=k.length,U=[],N=0;N<C;N++)U[N>>>1]|=O(k.charCodeAt(N)<<16-N%2*16);return P.create(U,C*2)}};function O(k){return k<<8&4278255360|k>>>8&16711935}}(),x.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.WordArray,T=E.enc;T.Base64={stringify:function(k){var C=k.words,U=k.sigBytes,N=this._map;k.clamp();for(var H=[],D=0;D<U;D+=3)for(var j=C[D>>>2]>>>24-D%4*8&255,V=C[D+1>>>2]>>>24-(D+1)%4*8&255,X=C[D+2>>>2]>>>24-(D+2)%4*8&255,re=j<<16|V<<8|X,ee=0;ee<4&&D+ee*.75<U;ee++)H.push(N.charAt(re>>>6*(3-ee)&63));var fe=N.charAt(64);if(fe)for(;H.length%4;)H.push(fe);return H.join("")},parse:function(k){var C=k.length,U=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var H=0;H<U.length;H++)N[U.charCodeAt(H)]=H}var D=U.charAt(64);if(D){var j=k.indexOf(D);j!==-1&&(C=j)}return O(k,C,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function O(k,C,U){for(var N=[],H=0,D=0;D<C;D++)if(D%4){var j=U[k.charCodeAt(D-1)]<<D%4*2,V=U[k.charCodeAt(D)]>>>6-D%4*2;N[H>>>2]|=(j|V)<<24-H%4*8,H++}return P.create(N,H)}}(),x.enc.Base64})}(encBase64)),encBase64.exports}var md5$3={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(E){var A=x,P=A.lib,T=P.WordArray,O=P.Hasher,k=A.algo,C=[];(function(){for(var V=0;V<64;V++)C[V]=E.abs(E.sin(V+1))*4294967296|0})();var U=k.MD5=O.extend({_doReset:function(){this._hash=new T.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(V,X){for(var re=0;re<16;re++){var ee=X+re,fe=V[ee];V[ee]=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360}var le=this._hash.words,pe=V[X+0],ie=V[X+1],he=V[X+2],ae=V[X+3],te=V[X+4],ue=V[X+5],ne=V[X+6],J=V[X+7],q=V[X+8],F=V[X+9],L=V[X+10],Z=V[X+11],Q=V[X+12],de=V[X+13],ye=V[X+14],oe=V[X+15],se=le[0],Y=le[1],ce=le[2],we=le[3];se=N(se,Y,ce,we,pe,7,C[0]),we=N(we,se,Y,ce,ie,12,C[1]),ce=N(ce,we,se,Y,he,17,C[2]),Y=N(Y,ce,we,se,ae,22,C[3]),se=N(se,Y,ce,we,te,7,C[4]),we=N(we,se,Y,ce,ue,12,C[5]),ce=N(ce,we,se,Y,ne,17,C[6]),Y=N(Y,ce,we,se,J,22,C[7]),se=N(se,Y,ce,we,q,7,C[8]),we=N(we,se,Y,ce,F,12,C[9]),ce=N(ce,we,se,Y,L,17,C[10]),Y=N(Y,ce,we,se,Z,22,C[11]),se=N(se,Y,ce,we,Q,7,C[12]),we=N(we,se,Y,ce,de,12,C[13]),ce=N(ce,we,se,Y,ye,17,C[14]),Y=N(Y,ce,we,se,oe,22,C[15]),se=H(se,Y,ce,we,ie,5,C[16]),we=H(we,se,Y,ce,ne,9,C[17]),ce=H(ce,we,se,Y,Z,14,C[18]),Y=H(Y,ce,we,se,pe,20,C[19]),se=H(se,Y,ce,we,ue,5,C[20]),we=H(we,se,Y,ce,L,9,C[21]),ce=H(ce,we,se,Y,oe,14,C[22]),Y=H(Y,ce,we,se,te,20,C[23]),se=H(se,Y,ce,we,F,5,C[24]),we=H(we,se,Y,ce,ye,9,C[25]),ce=H(ce,we,se,Y,ae,14,C[26]),Y=H(Y,ce,we,se,q,20,C[27]),se=H(se,Y,ce,we,de,5,C[28]),we=H(we,se,Y,ce,he,9,C[29]),ce=H(ce,we,se,Y,J,14,C[30]),Y=H(Y,ce,we,se,Q,20,C[31]),se=D(se,Y,ce,we,ue,4,C[32]),we=D(we,se,Y,ce,q,11,C[33]),ce=D(ce,we,se,Y,Z,16,C[34]),Y=D(Y,ce,we,se,ye,23,C[35]),se=D(se,Y,ce,we,ie,4,C[36]),we=D(we,se,Y,ce,te,11,C[37]),ce=D(ce,we,se,Y,J,16,C[38]),Y=D(Y,ce,we,se,L,23,C[39]),se=D(se,Y,ce,we,de,4,C[40]),we=D(we,se,Y,ce,pe,11,C[41]),ce=D(ce,we,se,Y,ae,16,C[42]),Y=D(Y,ce,we,se,ne,23,C[43]),se=D(se,Y,ce,we,F,4,C[44]),we=D(we,se,Y,ce,Q,11,C[45]),ce=D(ce,we,se,Y,oe,16,C[46]),Y=D(Y,ce,we,se,he,23,C[47]),se=j(se,Y,ce,we,pe,6,C[48]),we=j(we,se,Y,ce,J,10,C[49]),ce=j(ce,we,se,Y,ye,15,C[50]),Y=j(Y,ce,we,se,ue,21,C[51]),se=j(se,Y,ce,we,Q,6,C[52]),we=j(we,se,Y,ce,ae,10,C[53]),ce=j(ce,we,se,Y,L,15,C[54]),Y=j(Y,ce,we,se,ie,21,C[55]),se=j(se,Y,ce,we,q,6,C[56]),we=j(we,se,Y,ce,oe,10,C[57]),ce=j(ce,we,se,Y,ne,15,C[58]),Y=j(Y,ce,we,se,de,21,C[59]),se=j(se,Y,ce,we,te,6,C[60]),we=j(we,se,Y,ce,Z,10,C[61]),ce=j(ce,we,se,Y,he,15,C[62]),Y=j(Y,ce,we,se,F,21,C[63]),le[0]=le[0]+se|0,le[1]=le[1]+Y|0,le[2]=le[2]+ce|0,le[3]=le[3]+we|0},_doFinalize:function(){var V=this._data,X=V.words,re=this._nDataBytes*8,ee=V.sigBytes*8;X[ee>>>5]|=128<<24-ee%32;var fe=E.floor(re/4294967296),le=re;X[(ee+64>>>9<<4)+15]=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360,X[(ee+64>>>9<<4)+14]=(le<<8|le>>>24)&16711935|(le<<24|le>>>8)&4278255360,V.sigBytes=(X.length+1)*4,this._process();for(var pe=this._hash,ie=pe.words,he=0;he<4;he++){var ae=ie[he];ie[he]=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360}return pe},clone:function(){var V=O.clone.call(this);return V._hash=this._hash.clone(),V}});function N(V,X,re,ee,fe,le,pe){var ie=V+(X&re|~X&ee)+fe+pe;return(ie<<le|ie>>>32-le)+X}function H(V,X,re,ee,fe,le,pe){var ie=V+(X&ee|re&~ee)+fe+pe;return(ie<<le|ie>>>32-le)+X}function D(V,X,re,ee,fe,le,pe){var ie=V+(X^re^ee)+fe+pe;return(ie<<le|ie>>>32-le)+X}function j(V,X,re,ee,fe,le,pe){var ie=V+(re^(X|~ee))+fe+pe;return(ie<<le|ie>>>32-le)+X}A.MD5=O._createHelper(U),A.HmacMD5=O._createHmacHelper(U)}(Math),x.MD5})}(md5$3)),md5$3.exports}var sha1$1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.WordArray,T=A.Hasher,O=E.algo,k=[],C=O.SHA1=T.extend({_doReset:function(){this._hash=new P.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,N){for(var H=this._hash.words,D=H[0],j=H[1],V=H[2],X=H[3],re=H[4],ee=0;ee<80;ee++){if(ee<16)k[ee]=U[N+ee]|0;else{var fe=k[ee-3]^k[ee-8]^k[ee-14]^k[ee-16];k[ee]=fe<<1|fe>>>31}var le=(D<<5|D>>>27)+re+k[ee];ee<20?le+=(j&V|~j&X)+1518500249:ee<40?le+=(j^V^X)+1859775393:ee<60?le+=(j&V|j&X|V&X)-1894007588:le+=(j^V^X)-899497514,re=X,X=V,V=j<<30|j>>>2,j=D,D=le}H[0]=H[0]+D|0,H[1]=H[1]+j|0,H[2]=H[2]+V|0,H[3]=H[3]+X|0,H[4]=H[4]+re|0},_doFinalize:function(){var U=this._data,N=U.words,H=this._nDataBytes*8,D=U.sigBytes*8;return N[D>>>5]|=128<<24-D%32,N[(D+64>>>9<<4)+14]=Math.floor(H/4294967296),N[(D+64>>>9<<4)+15]=H,U.sigBytes=N.length*4,this._process(),this._hash},clone:function(){var U=T.clone.call(this);return U._hash=this._hash.clone(),U}});E.SHA1=T._createHelper(C),E.HmacSHA1=T._createHmacHelper(C)}(),x.SHA1})}(sha1$1)),sha1$1.exports}var sha256$4={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){return function(E){var A=x,P=A.lib,T=P.WordArray,O=P.Hasher,k=A.algo,C=[],U=[];(function(){function D(re){for(var ee=E.sqrt(re),fe=2;fe<=ee;fe++)if(!(re%fe))return!1;return!0}function j(re){return(re-(re|0))*4294967296|0}for(var V=2,X=0;X<64;)D(V)&&(X<8&&(C[X]=j(E.pow(V,1/2))),U[X]=j(E.pow(V,1/3)),X++),V++})();var N=[],H=k.SHA256=O.extend({_doReset:function(){this._hash=new T.init(C.slice(0))},_doProcessBlock:function(D,j){for(var V=this._hash.words,X=V[0],re=V[1],ee=V[2],fe=V[3],le=V[4],pe=V[5],ie=V[6],he=V[7],ae=0;ae<64;ae++){if(ae<16)N[ae]=D[j+ae]|0;else{var te=N[ae-15],ue=(te<<25|te>>>7)^(te<<14|te>>>18)^te>>>3,ne=N[ae-2],J=(ne<<15|ne>>>17)^(ne<<13|ne>>>19)^ne>>>10;N[ae]=ue+N[ae-7]+J+N[ae-16]}var q=le&pe^~le&ie,F=X&re^X&ee^re&ee,L=(X<<30|X>>>2)^(X<<19|X>>>13)^(X<<10|X>>>22),Z=(le<<26|le>>>6)^(le<<21|le>>>11)^(le<<7|le>>>25),Q=he+Z+q+U[ae]+N[ae],de=L+F;he=ie,ie=pe,pe=le,le=fe+Q|0,fe=ee,ee=re,re=X,X=Q+de|0}V[0]=V[0]+X|0,V[1]=V[1]+re|0,V[2]=V[2]+ee|0,V[3]=V[3]+fe|0,V[4]=V[4]+le|0,V[5]=V[5]+pe|0,V[6]=V[6]+ie|0,V[7]=V[7]+he|0},_doFinalize:function(){var D=this._data,j=D.words,V=this._nDataBytes*8,X=D.sigBytes*8;return j[X>>>5]|=128<<24-X%32,j[(X+64>>>9<<4)+14]=E.floor(V/4294967296),j[(X+64>>>9<<4)+15]=V,D.sigBytes=j.length*4,this._process(),this._hash},clone:function(){var D=O.clone.call(this);return D._hash=this._hash.clone(),D}});A.SHA256=O._createHelper(H),A.HmacSHA256=O._createHmacHelper(H)}(Math),x.SHA256})}(sha256$4)),sha256$4.exports}var sha224$1={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireSha256())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.WordArray,T=E.algo,O=T.SHA256,k=T.SHA224=O.extend({_doReset:function(){this._hash=new P.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var C=O._doFinalize.call(this);return C.sigBytes-=4,C}});E.SHA224=O._createHelper(k),E.HmacSHA224=O._createHmacHelper(k)}(),x.SHA224})}(sha224$1)),sha224$1.exports}var sha512$1={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireX64Core())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.Hasher,T=E.x64,O=T.Word,k=T.WordArray,C=E.algo;function U(){return O.create.apply(O,arguments)}var N=[U(1116352408,3609767458),U(1899447441,602891725),U(3049323471,3964484399),U(3921009573,2173295548),U(961987163,4081628472),U(1508970993,3053834265),U(2453635748,2937671579),U(2870763221,3664609560),U(3624381080,2734883394),U(310598401,1164996542),U(607225278,1323610764),U(1426881987,3590304994),U(1925078388,4068182383),U(2162078206,991336113),U(2614888103,633803317),U(3248222580,3479774868),U(3835390401,2666613458),U(4022224774,944711139),U(264347078,2341262773),U(604807628,2007800933),U(770255983,1495990901),U(1249150122,1856431235),U(1555081692,3175218132),U(1996064986,2198950837),U(2554220882,3999719339),U(2821834349,766784016),U(2952996808,2566594879),U(3210313671,3203337956),U(3336571891,1034457026),U(3584528711,2466948901),U(113926993,3758326383),U(338241895,168717936),U(666307205,1188179964),U(773529912,1546045734),U(1294757372,1522805485),U(1396182291,2643833823),U(1695183700,2343527390),U(1986661051,1014477480),U(2177026350,1206759142),U(2456956037,344077627),U(2730485921,1290863460),U(2820302411,3158454273),U(3259730800,3505952657),U(3345764771,106217008),U(3516065817,3606008344),U(3600352804,1432725776),U(4094571909,1467031594),U(275423344,851169720),U(430227734,3100823752),U(506948616,1363258195),U(659060556,3750685593),U(883997877,3785050280),U(958139571,3318307427),U(1322822218,3812723403),U(1537002063,2003034995),U(1747873779,3602036899),U(1955562222,1575990012),U(2024104815,1125592928),U(2227730452,2716904306),U(2361852424,442776044),U(2428436474,593698344),U(2756734187,3733110249),U(3204031479,2999351573),U(3329325298,3815920427),U(3391569614,3928383900),U(3515267271,566280711),U(3940187606,3454069534),U(4118630271,4000239992),U(116418474,1914138554),U(174292421,2731055270),U(289380356,3203993006),U(460393269,320620315),U(685471733,587496836),U(852142971,1086792851),U(1017036298,365543100),U(1126000580,2618297676),U(1288033470,3409855158),U(1501505948,4234509866),U(1607167915,987167468),U(1816402316,1246189591)],H=[];(function(){for(var j=0;j<80;j++)H[j]=U()})();var D=C.SHA512=P.extend({_doReset:function(){this._hash=new k.init([new O.init(1779033703,4089235720),new O.init(3144134277,2227873595),new O.init(1013904242,4271175723),new O.init(2773480762,1595750129),new O.init(1359893119,2917565137),new O.init(2600822924,725511199),new O.init(528734635,4215389547),new O.init(1541459225,327033209)])},_doProcessBlock:function(j,V){for(var X=this._hash.words,re=X[0],ee=X[1],fe=X[2],le=X[3],pe=X[4],ie=X[5],he=X[6],ae=X[7],te=re.high,ue=re.low,ne=ee.high,J=ee.low,q=fe.high,F=fe.low,L=le.high,Z=le.low,Q=pe.high,de=pe.low,ye=ie.high,oe=ie.low,se=he.high,Y=he.low,ce=ae.high,we=ae.low,Pe=te,Se=ue,Be=ne,Ie=J,Re=q,Me=F,xe=L,Ee=Z,Ue=Q,Ke=de,ze=ye,Ve=oe,Je=se,et=Y,Ge=ce,ot=we,He=0;He<80;He++){var We=H[He];if(He<16)var Ze=We.high=j[V+He*2]|0,$e=We.low=j[V+He*2+1]|0;else{var Te=H[He-15],Ce=Te.high,ve=Te.low,be=(Ce>>>1|ve<<31)^(Ce>>>8|ve<<24)^Ce>>>7,ge=(ve>>>1|Ce<<31)^(ve>>>8|Ce<<24)^(ve>>>7|Ce<<25),me=H[He-2],_e=me.high,Ae=me.low,Oe=(_e>>>19|Ae<<13)^(_e<<3|Ae>>>29)^_e>>>6,Le=(Ae>>>19|_e<<13)^(Ae<<3|_e>>>29)^(Ae>>>6|_e<<26),je=H[He-7],qe=je.high,rt=je.low,tt=H[He-16],at=tt.high,bt=tt.low,$e=ge+rt,Ze=be+qe+($e>>>0<ge>>>0?1:0),$e=$e+Le,Ze=Ze+Oe+($e>>>0<Le>>>0?1:0),$e=$e+bt,Ze=Ze+at+($e>>>0<bt>>>0?1:0);We.high=Ze,We.low=$e}var lt=Ue&ze^~Ue&Je,it=Ke&Ve^~Ke&et,vt=Pe&Be^Pe&Re^Be&Re,dt=Se&Ie^Se&Me^Ie&Me,Fe=(Pe>>>28|Se<<4)^(Pe<<30|Se>>>2)^(Pe<<25|Se>>>7),ke=(Se>>>28|Pe<<4)^(Se<<30|Pe>>>2)^(Se<<25|Pe>>>7),Ne=(Ue>>>14|Ke<<18)^(Ue>>>18|Ke<<14)^(Ue<<23|Ke>>>9),De=(Ke>>>14|Ue<<18)^(Ke>>>18|Ue<<14)^(Ke<<23|Ue>>>9),Xe=N[He],Ye=Xe.high,Qe=Xe.low,st=ot+De,ut=Ge+Ne+(st>>>0<ot>>>0?1:0),st=st+it,ut=ut+lt+(st>>>0<it>>>0?1:0),st=st+Qe,ut=ut+Ye+(st>>>0<Qe>>>0?1:0),st=st+$e,ut=ut+Ze+(st>>>0<$e>>>0?1:0),nt=ke+dt,pt=Fe+vt+(nt>>>0<ke>>>0?1:0);Ge=Je,ot=et,Je=ze,et=Ve,ze=Ue,Ve=Ke,Ke=Ee+st|0,Ue=xe+ut+(Ke>>>0<Ee>>>0?1:0)|0,xe=Re,Ee=Me,Re=Be,Me=Ie,Be=Pe,Ie=Se,Se=st+nt|0,Pe=ut+pt+(Se>>>0<st>>>0?1:0)|0}ue=re.low=ue+Se,re.high=te+Pe+(ue>>>0<Se>>>0?1:0),J=ee.low=J+Ie,ee.high=ne+Be+(J>>>0<Ie>>>0?1:0),F=fe.low=F+Me,fe.high=q+Re+(F>>>0<Me>>>0?1:0),Z=le.low=Z+Ee,le.high=L+xe+(Z>>>0<Ee>>>0?1:0),de=pe.low=de+Ke,pe.high=Q+Ue+(de>>>0<Ke>>>0?1:0),oe=ie.low=oe+Ve,ie.high=ye+ze+(oe>>>0<Ve>>>0?1:0),Y=he.low=Y+et,he.high=se+Je+(Y>>>0<et>>>0?1:0),we=ae.low=we+ot,ae.high=ce+Ge+(we>>>0<ot>>>0?1:0)},_doFinalize:function(){var j=this._data,V=j.words,X=this._nDataBytes*8,re=j.sigBytes*8;V[re>>>5]|=128<<24-re%32,V[(re+128>>>10<<5)+30]=Math.floor(X/4294967296),V[(re+128>>>10<<5)+31]=X,j.sigBytes=V.length*4,this._process();var ee=this._hash.toX32();return ee},clone:function(){var j=P.clone.call(this);return j._hash=this._hash.clone(),j},blockSize:1024/32});E.SHA512=P._createHelper(D),E.HmacSHA512=P._createHmacHelper(D)}(),x.SHA512})}(sha512$1)),sha512$1.exports}var sha384$1={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal,function(x){return function(){var E=x,A=E.x64,P=A.Word,T=A.WordArray,O=E.algo,k=O.SHA512,C=O.SHA384=k.extend({_doReset:function(){this._hash=new T.init([new P.init(3418070365,3238371032),new P.init(1654270250,914150663),new P.init(2438529370,812702999),new P.init(355462360,4144912697),new P.init(1731405415,4290775857),new P.init(2394180231,1750603025),new P.init(3675008525,1694076839),new P.init(1203062813,3204075428)])},_doFinalize:function(){var U=k._doFinalize.call(this);return U.sigBytes-=16,U}});E.SHA384=k._createHelper(C),E.HmacSHA384=k._createHmacHelper(C)}(),x.SHA384})}(sha384$1)),sha384$1.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireX64Core())})(commonjsGlobal,function(x){return function(E){var A=x,P=A.lib,T=P.WordArray,O=P.Hasher,k=A.x64,C=k.Word,U=A.algo,N=[],H=[],D=[];(function(){for(var X=1,re=0,ee=0;ee<24;ee++){N[X+5*re]=(ee+1)*(ee+2)/2%64;var fe=re%5,le=(2*X+3*re)%5;X=fe,re=le}for(var X=0;X<5;X++)for(var re=0;re<5;re++)H[X+5*re]=re+(2*X+3*re)%5*5;for(var pe=1,ie=0;ie<24;ie++){for(var he=0,ae=0,te=0;te<7;te++){if(pe&1){var ue=(1<<te)-1;ue<32?ae^=1<<ue:he^=1<<ue-32}pe&128?pe=pe<<1^113:pe<<=1}D[ie]=C.create(he,ae)}})();var j=[];(function(){for(var X=0;X<25;X++)j[X]=C.create()})();var V=U.SHA3=O.extend({cfg:O.cfg.extend({outputLength:512}),_doReset:function(){for(var X=this._state=[],re=0;re<25;re++)X[re]=new C.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(X,re){for(var ee=this._state,fe=this.blockSize/2,le=0;le<fe;le++){var pe=X[re+2*le],ie=X[re+2*le+1];pe=(pe<<8|pe>>>24)&16711935|(pe<<24|pe>>>8)&4278255360,ie=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360;var he=ee[le];he.high^=ie,he.low^=pe}for(var ae=0;ae<24;ae++){for(var te=0;te<5;te++){for(var ue=0,ne=0,J=0;J<5;J++){var he=ee[te+5*J];ue^=he.high,ne^=he.low}var q=j[te];q.high=ue,q.low=ne}for(var te=0;te<5;te++)for(var F=j[(te+4)%5],L=j[(te+1)%5],Z=L.high,Q=L.low,ue=F.high^(Z<<1|Q>>>31),ne=F.low^(Q<<1|Z>>>31),J=0;J<5;J++){var he=ee[te+5*J];he.high^=ue,he.low^=ne}for(var de=1;de<25;de++){var he=ee[de],ye=he.high,oe=he.low,se=N[de];if(se<32)var ue=ye<<se|oe>>>32-se,ne=oe<<se|ye>>>32-se;else var ue=oe<<se-32|ye>>>64-se,ne=ye<<se-32|oe>>>64-se;var Y=j[H[de]];Y.high=ue,Y.low=ne}var ce=j[0],we=ee[0];ce.high=we.high,ce.low=we.low;for(var te=0;te<5;te++)for(var J=0;J<5;J++){var de=te+5*J,he=ee[de],Pe=j[de],Se=j[(te+1)%5+5*J],Be=j[(te+2)%5+5*J];he.high=Pe.high^~Se.high&Be.high,he.low=Pe.low^~Se.low&Be.low}var he=ee[0],Ie=D[ae];he.high^=Ie.high,he.low^=Ie.low}},_doFinalize:function(){var X=this._data,re=X.words;this._nDataBytes*8;var ee=X.sigBytes*8,fe=this.blockSize*32;re[ee>>>5]|=1<<24-ee%32,re[(E.ceil((ee+1)/fe)*fe>>>5)-1]|=128,X.sigBytes=re.length*4,this._process();for(var le=this._state,pe=this.cfg.outputLength/8,ie=pe/8,he=[],ae=0;ae<ie;ae++){var te=le[ae],ue=te.high,ne=te.low;ue=(ue<<8|ue>>>24)&16711935|(ue<<24|ue>>>8)&4278255360,ne=(ne<<8|ne>>>24)&16711935|(ne<<24|ne>>>8)&4278255360,he.push(ne),he.push(ue)}return new T.init(he,pe)},clone:function(){for(var X=O.clone.call(this),re=X._state=this._state.slice(0),ee=0;ee<25;ee++)re[ee]=re[ee].clone();return X}});A.SHA3=O._createHelper(V),A.HmacSHA3=O._createHmacHelper(V)}(Math),x.SHA3})}(sha3)),sha3.exports}var ripemd160$2={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){/** @preserve
				(c) 2012 by Cédric Mesnil. All rights reserved.

				Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

				    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
				    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

				THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
				*/return function(E){var A=x,P=A.lib,T=P.WordArray,O=P.Hasher,k=A.algo,C=T.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),U=T.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),N=T.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),H=T.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),D=T.create([0,1518500249,1859775393,2400959708,2840853838]),j=T.create([1352829926,1548603684,1836072691,2053994217,0]),V=k.RIPEMD160=O.extend({_doReset:function(){this._hash=T.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ie,he){for(var ae=0;ae<16;ae++){var te=he+ae,ue=ie[te];ie[te]=(ue<<8|ue>>>24)&16711935|(ue<<24|ue>>>8)&4278255360}var ne=this._hash.words,J=D.words,q=j.words,F=C.words,L=U.words,Z=N.words,Q=H.words,de,ye,oe,se,Y,ce,we,Pe,Se,Be;ce=de=ne[0],we=ye=ne[1],Pe=oe=ne[2],Se=se=ne[3],Be=Y=ne[4];for(var Ie,ae=0;ae<80;ae+=1)Ie=de+ie[he+F[ae]]|0,ae<16?Ie+=X(ye,oe,se)+J[0]:ae<32?Ie+=re(ye,oe,se)+J[1]:ae<48?Ie+=ee(ye,oe,se)+J[2]:ae<64?Ie+=fe(ye,oe,se)+J[3]:Ie+=le(ye,oe,se)+J[4],Ie=Ie|0,Ie=pe(Ie,Z[ae]),Ie=Ie+Y|0,de=Y,Y=se,se=pe(oe,10),oe=ye,ye=Ie,Ie=ce+ie[he+L[ae]]|0,ae<16?Ie+=le(we,Pe,Se)+q[0]:ae<32?Ie+=fe(we,Pe,Se)+q[1]:ae<48?Ie+=ee(we,Pe,Se)+q[2]:ae<64?Ie+=re(we,Pe,Se)+q[3]:Ie+=X(we,Pe,Se)+q[4],Ie=Ie|0,Ie=pe(Ie,Q[ae]),Ie=Ie+Be|0,ce=Be,Be=Se,Se=pe(Pe,10),Pe=we,we=Ie;Ie=ne[1]+oe+Se|0,ne[1]=ne[2]+se+Be|0,ne[2]=ne[3]+Y+ce|0,ne[3]=ne[4]+de+we|0,ne[4]=ne[0]+ye+Pe|0,ne[0]=Ie},_doFinalize:function(){var ie=this._data,he=ie.words,ae=this._nDataBytes*8,te=ie.sigBytes*8;he[te>>>5]|=128<<24-te%32,he[(te+64>>>9<<4)+14]=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,ie.sigBytes=(he.length+1)*4,this._process();for(var ue=this._hash,ne=ue.words,J=0;J<5;J++){var q=ne[J];ne[J]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}return ue},clone:function(){var ie=O.clone.call(this);return ie._hash=this._hash.clone(),ie}});function X(ie,he,ae){return ie^he^ae}function re(ie,he,ae){return ie&he|~ie&ae}function ee(ie,he,ae){return(ie|~he)^ae}function fe(ie,he,ae){return ie&ae|he&~ae}function le(ie,he,ae){return ie^(he|~ae)}function pe(ie,he){return ie<<he|ie>>>32-he}A.RIPEMD160=O._createHelper(V),A.HmacRIPEMD160=O._createHmacHelper(V)}(),x.RIPEMD160})}(ripemd160$2)),ripemd160$2.exports}var hmac$1={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(v,_){(function(x,E){v.exports=E(requireCore())})(commonjsGlobal,function(x){(function(){var E=x,A=E.lib,P=A.Base,T=E.enc,O=T.Utf8,k=E.algo;k.HMAC=P.extend({init:function(C,U){C=this._hasher=new C.init,typeof U=="string"&&(U=O.parse(U));var N=C.blockSize,H=N*4;U.sigBytes>H&&(U=C.finalize(U)),U.clamp();for(var D=this._oKey=U.clone(),j=this._iKey=U.clone(),V=D.words,X=j.words,re=0;re<N;re++)V[re]^=1549556828,X[re]^=909522486;D.sigBytes=j.sigBytes=H,this.reset()},reset:function(){var C=this._hasher;C.reset(),C.update(this._iKey)},update:function(C){return this._hasher.update(C),this},finalize:function(C){var U=this._hasher,N=U.finalize(C);U.reset();var H=U.finalize(this._oKey.clone().concat(N));return H}})})()})}(hmac$1)),hmac$1.exports}var pbkdf2$3={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.Base,T=A.WordArray,O=E.algo,k=O.SHA1,C=O.HMAC,U=O.PBKDF2=P.extend({cfg:P.extend({keySize:128/32,hasher:k,iterations:1}),init:function(N){this.cfg=this.cfg.extend(N)},compute:function(N,H){for(var D=this.cfg,j=C.create(D.hasher,N),V=T.create(),X=T.create([1]),re=V.words,ee=X.words,fe=D.keySize,le=D.iterations;re.length<fe;){var pe=j.update(H).finalize(X);j.reset();for(var ie=pe.words,he=ie.length,ae=pe,te=1;te<le;te++){ae=j.finalize(ae),j.reset();for(var ue=ae.words,ne=0;ne<he;ne++)ie[ne]^=ue[ne]}V.concat(pe),ee[0]++}return V.sigBytes=fe*4,V}});E.PBKDF2=function(N,H,D){return U.create(D).compute(N,H)}}(),x.PBKDF2})}(pbkdf2$3)),pbkdf2$3.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.Base,T=A.WordArray,O=E.algo,k=O.MD5,C=O.EvpKDF=P.extend({cfg:P.extend({keySize:128/32,hasher:k,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,N){for(var H=this.cfg,D=H.hasher.create(),j=T.create(),V=j.words,X=H.keySize,re=H.iterations;V.length<X;){ee&&D.update(ee);var ee=D.update(U).finalize(N);D.reset();for(var fe=1;fe<re;fe++)ee=D.finalize(ee),D.reset();j.concat(ee)}return j.sigBytes=X*4,j}});E.EvpKDF=function(U,N,H){return C.create(H).compute(U,N)}}(),x.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEvpkdf())})(commonjsGlobal,function(x){x.lib.Cipher||function(E){var A=x,P=A.lib,T=P.Base,O=P.WordArray,k=P.BufferedBlockAlgorithm,C=A.enc;C.Utf8;var U=C.Base64,N=A.algo,H=N.EvpKDF,D=P.Cipher=k.extend({cfg:T.extend(),createEncryptor:function(ue,ne){return this.create(this._ENC_XFORM_MODE,ue,ne)},createDecryptor:function(ue,ne){return this.create(this._DEC_XFORM_MODE,ue,ne)},init:function(ue,ne,J){this.cfg=this.cfg.extend(J),this._xformMode=ue,this._key=ne,this.reset()},reset:function(){k.reset.call(this),this._doReset()},process:function(ue){return this._append(ue),this._process()},finalize:function(ue){ue&&this._append(ue);var ne=this._doFinalize();return ne},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ue(ne){return typeof ne=="string"?te:ie}return function(ne){return{encrypt:function(J,q,F){return ue(q).encrypt(ne,J,q,F)},decrypt:function(J,q,F){return ue(q).decrypt(ne,J,q,F)}}}}()});P.StreamCipher=D.extend({_doFinalize:function(){var ue=this._process(!0);return ue},blockSize:1});var j=A.mode={},V=P.BlockCipherMode=T.extend({createEncryptor:function(ue,ne){return this.Encryptor.create(ue,ne)},createDecryptor:function(ue,ne){return this.Decryptor.create(ue,ne)},init:function(ue,ne){this._cipher=ue,this._iv=ne}}),X=j.CBC=function(){var ue=V.extend();ue.Encryptor=ue.extend({processBlock:function(J,q){var F=this._cipher,L=F.blockSize;ne.call(this,J,q,L),F.encryptBlock(J,q),this._prevBlock=J.slice(q,q+L)}}),ue.Decryptor=ue.extend({processBlock:function(J,q){var F=this._cipher,L=F.blockSize,Z=J.slice(q,q+L);F.decryptBlock(J,q),ne.call(this,J,q,L),this._prevBlock=Z}});function ne(J,q,F){var L=this._iv;if(L){var Z=L;this._iv=E}else var Z=this._prevBlock;for(var Q=0;Q<F;Q++)J[q+Q]^=Z[Q]}return ue}(),re=A.pad={},ee=re.Pkcs7={pad:function(ue,ne){for(var J=ne*4,q=J-ue.sigBytes%J,F=q<<24|q<<16|q<<8|q,L=[],Z=0;Z<q;Z+=4)L.push(F);var Q=O.create(L,q);ue.concat(Q)},unpad:function(ue){var ne=ue.words[ue.sigBytes-1>>>2]&255;ue.sigBytes-=ne}};P.BlockCipher=D.extend({cfg:D.cfg.extend({mode:X,padding:ee}),reset:function(){D.reset.call(this);var ue=this.cfg,ne=ue.iv,J=ue.mode;if(this._xformMode==this._ENC_XFORM_MODE)var q=J.createEncryptor;else{var q=J.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==q?this._mode.init(this,ne&&ne.words):(this._mode=q.call(J,this,ne&&ne.words),this._mode.__creator=q)},_doProcessBlock:function(ue,ne){this._mode.processBlock(ue,ne)},_doFinalize:function(){var ue=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){ue.pad(this._data,this.blockSize);var ne=this._process(!0)}else{var ne=this._process(!0);ue.unpad(ne)}return ne},blockSize:128/32});var fe=P.CipherParams=T.extend({init:function(ue){this.mixIn(ue)},toString:function(ue){return(ue||this.formatter).stringify(this)}}),le=A.format={},pe=le.OpenSSL={stringify:function(ue){var ne=ue.ciphertext,J=ue.salt;if(J)var q=O.create([1398893684,1701076831]).concat(J).concat(ne);else var q=ne;return q.toString(U)},parse:function(ue){var ne=U.parse(ue),J=ne.words;if(J[0]==1398893684&&J[1]==1701076831){var q=O.create(J.slice(2,4));J.splice(0,4),ne.sigBytes-=16}return fe.create({ciphertext:ne,salt:q})}},ie=P.SerializableCipher=T.extend({cfg:T.extend({format:pe}),encrypt:function(ue,ne,J,q){q=this.cfg.extend(q);var F=ue.createEncryptor(J,q),L=F.finalize(ne),Z=F.cfg;return fe.create({ciphertext:L,key:J,iv:Z.iv,algorithm:ue,mode:Z.mode,padding:Z.padding,blockSize:ue.blockSize,formatter:q.format})},decrypt:function(ue,ne,J,q){q=this.cfg.extend(q),ne=this._parse(ne,q.format);var F=ue.createDecryptor(J,q).finalize(ne.ciphertext);return F},_parse:function(ue,ne){return typeof ue=="string"?ne.parse(ue,this):ue}}),he=A.kdf={},ae=he.OpenSSL={execute:function(ue,ne,J,q){q||(q=O.random(64/8));var F=H.create({keySize:ne+J}).compute(ue,q),L=O.create(F.words.slice(ne),J*4);return F.sigBytes=ne*4,fe.create({key:F,iv:L,salt:q})}},te=P.PasswordBasedCipher=ie.extend({cfg:ie.cfg.extend({kdf:ae}),encrypt:function(ue,ne,J,q){q=this.cfg.extend(q);var F=q.kdf.execute(J,ue.keySize,ue.ivSize);q.iv=F.iv;var L=ie.encrypt.call(this,ue,ne,F.key,q);return L.mixIn(F),L},decrypt:function(ue,ne,J,q){q=this.cfg.extend(q),ne=this._parse(ne,q.format);var F=q.kdf.execute(J,ue.keySize,ue.ivSize,ne.salt);q.iv=F.iv;var L=ie.decrypt.call(this,ue,ne,F.key,q);return L}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.mode.CFB=function(){var E=x.lib.BlockCipherMode.extend();E.Encryptor=E.extend({processBlock:function(P,T){var O=this._cipher,k=O.blockSize;A.call(this,P,T,k,O),this._prevBlock=P.slice(T,T+k)}}),E.Decryptor=E.extend({processBlock:function(P,T){var O=this._cipher,k=O.blockSize,C=P.slice(T,T+k);A.call(this,P,T,k,O),this._prevBlock=C}});function A(P,T,O,k){var C=this._iv;if(C){var U=C.slice(0);this._iv=void 0}else var U=this._prevBlock;k.encryptBlock(U,0);for(var N=0;N<O;N++)P[T+N]^=U[N]}return E}(),x.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.mode.CTR=function(){var E=x.lib.BlockCipherMode.extend(),A=E.Encryptor=E.extend({processBlock:function(P,T){var O=this._cipher,k=O.blockSize,C=this._iv,U=this._counter;C&&(U=this._counter=C.slice(0),this._iv=void 0);var N=U.slice(0);O.encryptBlock(N,0),U[k-1]=U[k-1]+1|0;for(var H=0;H<k;H++)P[T+H]^=N[H]}});return E.Decryptor=A,E}(),x.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return x.mode.CTRGladman=function(){var E=x.lib.BlockCipherMode.extend();function A(O){if((O>>24&255)===255){var k=O>>16&255,C=O>>8&255,U=O&255;k===255?(k=0,C===255?(C=0,U===255?U=0:++U):++C):++k,O=0,O+=k<<16,O+=C<<8,O+=U}else O+=1<<24;return O}function P(O){return(O[0]=A(O[0]))===0&&(O[1]=A(O[1])),O}var T=E.Encryptor=E.extend({processBlock:function(O,k){var C=this._cipher,U=C.blockSize,N=this._iv,H=this._counter;N&&(H=this._counter=N.slice(0),this._iv=void 0),P(H);var D=H.slice(0);C.encryptBlock(D,0);for(var j=0;j<U;j++)O[k+j]^=D[j]}});return E.Decryptor=T,E}(),x.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.mode.OFB=function(){var E=x.lib.BlockCipherMode.extend(),A=E.Encryptor=E.extend({processBlock:function(P,T){var O=this._cipher,k=O.blockSize,C=this._iv,U=this._keystream;C&&(U=this._keystream=C.slice(0),this._iv=void 0),O.encryptBlock(U,0);for(var N=0;N<k;N++)P[T+N]^=U[N]}});return E.Decryptor=A,E}(),x.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.mode.ECB=function(){var E=x.lib.BlockCipherMode.extend();return E.Encryptor=E.extend({processBlock:function(A,P){this._cipher.encryptBlock(A,P)}}),E.Decryptor=E.extend({processBlock:function(A,P){this._cipher.decryptBlock(A,P)}}),E}(),x.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.pad.AnsiX923={pad:function(E,A){var P=E.sigBytes,T=A*4,O=T-P%T,k=P+O-1;E.clamp(),E.words[k>>>2]|=O<<24-k%4*8,E.sigBytes+=O},unpad:function(E){var A=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=A}},x.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.pad.Iso10126={pad:function(E,A){var P=A*4,T=P-E.sigBytes%P;E.concat(x.lib.WordArray.random(T-1)).concat(x.lib.WordArray.create([T<<24],1))},unpad:function(E){var A=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=A}},x.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.pad.Iso97971={pad:function(E,A){E.concat(x.lib.WordArray.create([2147483648],1)),x.pad.ZeroPadding.pad(E,A)},unpad:function(E){x.pad.ZeroPadding.unpad(E),E.sigBytes--}},x.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.pad.ZeroPadding={pad:function(E,A){var P=A*4;E.clamp(),E.sigBytes+=P-(E.sigBytes%P||P)},unpad:function(E){for(var A=E.words,P=E.sigBytes-1;!(A[P>>>2]>>>24-P%4*8&255);)P--;E.sigBytes=P+1}},x.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return x.pad.NoPadding={pad:function(){},unpad:function(){}},x.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireCipherCore())})(commonjsGlobal,function(x){return function(E){var A=x,P=A.lib,T=P.CipherParams,O=A.enc,k=O.Hex,C=A.format;C.Hex={stringify:function(U){return U.ciphertext.toString(k)},parse:function(U){var N=k.parse(U);return T.create({ciphertext:N})}}}(),x.format.Hex})}(formatHex)),formatHex.exports}var aes$6={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.BlockCipher,T=E.algo,O=[],k=[],C=[],U=[],N=[],H=[],D=[],j=[],V=[],X=[];(function(){for(var fe=[],le=0;le<256;le++)le<128?fe[le]=le<<1:fe[le]=le<<1^283;for(var pe=0,ie=0,le=0;le<256;le++){var he=ie^ie<<1^ie<<2^ie<<3^ie<<4;he=he>>>8^he&255^99,O[pe]=he,k[he]=pe;var ae=fe[pe],te=fe[ae],ue=fe[te],ne=fe[he]*257^he*16843008;C[pe]=ne<<24|ne>>>8,U[pe]=ne<<16|ne>>>16,N[pe]=ne<<8|ne>>>24,H[pe]=ne;var ne=ue*16843009^te*65537^ae*257^pe*16843008;D[he]=ne<<24|ne>>>8,j[he]=ne<<16|ne>>>16,V[he]=ne<<8|ne>>>24,X[he]=ne,pe?(pe=ae^fe[fe[fe[ue^ae]]],ie^=fe[fe[ie]]):pe=ie=1}})();var re=[0,1,2,4,8,16,32,64,128,27,54],ee=T.AES=P.extend({_doReset:function(){if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var fe=this._keyPriorReset=this._key,le=fe.words,pe=fe.sigBytes/4,ie=this._nRounds=pe+6,he=(ie+1)*4,ae=this._keySchedule=[],te=0;te<he;te++)if(te<pe)ae[te]=le[te];else{var ue=ae[te-1];te%pe?pe>6&&te%pe==4&&(ue=O[ue>>>24]<<24|O[ue>>>16&255]<<16|O[ue>>>8&255]<<8|O[ue&255]):(ue=ue<<8|ue>>>24,ue=O[ue>>>24]<<24|O[ue>>>16&255]<<16|O[ue>>>8&255]<<8|O[ue&255],ue^=re[te/pe|0]<<24),ae[te]=ae[te-pe]^ue}for(var ne=this._invKeySchedule=[],J=0;J<he;J++){var te=he-J;if(J%4)var ue=ae[te];else var ue=ae[te-4];J<4||te<=4?ne[J]=ue:ne[J]=D[O[ue>>>24]]^j[O[ue>>>16&255]]^V[O[ue>>>8&255]]^X[O[ue&255]]}}},encryptBlock:function(fe,le){this._doCryptBlock(fe,le,this._keySchedule,C,U,N,H,O)},decryptBlock:function(fe,le){var pe=fe[le+1];fe[le+1]=fe[le+3],fe[le+3]=pe,this._doCryptBlock(fe,le,this._invKeySchedule,D,j,V,X,k);var pe=fe[le+1];fe[le+1]=fe[le+3],fe[le+3]=pe},_doCryptBlock:function(fe,le,pe,ie,he,ae,te,ue){for(var ne=this._nRounds,J=fe[le]^pe[0],q=fe[le+1]^pe[1],F=fe[le+2]^pe[2],L=fe[le+3]^pe[3],Z=4,Q=1;Q<ne;Q++){var de=ie[J>>>24]^he[q>>>16&255]^ae[F>>>8&255]^te[L&255]^pe[Z++],ye=ie[q>>>24]^he[F>>>16&255]^ae[L>>>8&255]^te[J&255]^pe[Z++],oe=ie[F>>>24]^he[L>>>16&255]^ae[J>>>8&255]^te[q&255]^pe[Z++],se=ie[L>>>24]^he[J>>>16&255]^ae[q>>>8&255]^te[F&255]^pe[Z++];J=de,q=ye,F=oe,L=se}var de=(ue[J>>>24]<<24|ue[q>>>16&255]<<16|ue[F>>>8&255]<<8|ue[L&255])^pe[Z++],ye=(ue[q>>>24]<<24|ue[F>>>16&255]<<16|ue[L>>>8&255]<<8|ue[J&255])^pe[Z++],oe=(ue[F>>>24]<<24|ue[L>>>16&255]<<16|ue[J>>>8&255]<<8|ue[q&255])^pe[Z++],se=(ue[L>>>24]<<24|ue[J>>>16&255]<<16|ue[q>>>8&255]<<8|ue[F&255])^pe[Z++];fe[le]=de,fe[le+1]=ye,fe[le+2]=oe,fe[le+3]=se},keySize:256/32});E.AES=P._createHelper(ee)}(),x.AES})}(aes$6)),aes$6.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.WordArray,T=A.BlockCipher,O=E.algo,k=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],C=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],N=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],H=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],D=O.DES=T.extend({_doReset:function(){for(var re=this._key,ee=re.words,fe=[],le=0;le<56;le++){var pe=k[le]-1;fe[le]=ee[pe>>>5]>>>31-pe%32&1}for(var ie=this._subKeys=[],he=0;he<16;he++){for(var ae=ie[he]=[],te=U[he],le=0;le<24;le++)ae[le/6|0]|=fe[(C[le]-1+te)%28]<<31-le%6,ae[4+(le/6|0)]|=fe[28+(C[le+24]-1+te)%28]<<31-le%6;ae[0]=ae[0]<<1|ae[0]>>>31;for(var le=1;le<7;le++)ae[le]=ae[le]>>>(le-1)*4+3;ae[7]=ae[7]<<5|ae[7]>>>27}for(var ue=this._invSubKeys=[],le=0;le<16;le++)ue[le]=ie[15-le]},encryptBlock:function(re,ee){this._doCryptBlock(re,ee,this._subKeys)},decryptBlock:function(re,ee){this._doCryptBlock(re,ee,this._invSubKeys)},_doCryptBlock:function(re,ee,fe){this._lBlock=re[ee],this._rBlock=re[ee+1],j.call(this,4,252645135),j.call(this,16,65535),V.call(this,2,858993459),V.call(this,8,16711935),j.call(this,1,1431655765);for(var le=0;le<16;le++){for(var pe=fe[le],ie=this._lBlock,he=this._rBlock,ae=0,te=0;te<8;te++)ae|=N[te][((he^pe[te])&H[te])>>>0];this._lBlock=he,this._rBlock=ie^ae}var ue=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ue,j.call(this,1,1431655765),V.call(this,8,16711935),V.call(this,2,858993459),j.call(this,16,65535),j.call(this,4,252645135),re[ee]=this._lBlock,re[ee+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function j(re,ee){var fe=(this._lBlock>>>re^this._rBlock)&ee;this._rBlock^=fe,this._lBlock^=fe<<re}function V(re,ee){var fe=(this._rBlock>>>re^this._lBlock)&ee;this._lBlock^=fe,this._rBlock^=fe<<re}E.DES=T._createHelper(D);var X=O.TripleDES=T.extend({_doReset:function(){var re=this._key,ee=re.words;this._des1=D.createEncryptor(P.create(ee.slice(0,2))),this._des2=D.createEncryptor(P.create(ee.slice(2,4))),this._des3=D.createEncryptor(P.create(ee.slice(4,6)))},encryptBlock:function(re,ee){this._des1.encryptBlock(re,ee),this._des2.decryptBlock(re,ee),this._des3.encryptBlock(re,ee)},decryptBlock:function(re,ee){this._des3.decryptBlock(re,ee),this._des2.encryptBlock(re,ee),this._des1.decryptBlock(re,ee)},keySize:192/32,ivSize:64/32,blockSize:64/32});E.TripleDES=T._createHelper(X)}(),x.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.StreamCipher,T=E.algo,O=T.RC4=P.extend({_doReset:function(){for(var U=this._key,N=U.words,H=U.sigBytes,D=this._S=[],j=0;j<256;j++)D[j]=j;for(var j=0,V=0;j<256;j++){var X=j%H,re=N[X>>>2]>>>24-X%4*8&255;V=(V+D[j]+re)%256;var ee=D[j];D[j]=D[V],D[V]=ee}this._i=this._j=0},_doProcessBlock:function(U,N){U[N]^=k.call(this)},keySize:256/32,ivSize:0});function k(){for(var U=this._S,N=this._i,H=this._j,D=0,j=0;j<4;j++){N=(N+1)%256,H=(H+U[N])%256;var V=U[N];U[N]=U[H],U[H]=V,D|=U[(U[N]+U[H])%256]<<24-j*8}return this._i=N,this._j=H,D}E.RC4=P._createHelper(O);var C=T.RC4Drop=O.extend({cfg:O.cfg.extend({drop:192}),_doReset:function(){O._doReset.call(this);for(var U=this.cfg.drop;U>0;U--)k.call(this)}});E.RC4Drop=P._createHelper(C)}(),x.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.StreamCipher,T=E.algo,O=[],k=[],C=[],U=T.Rabbit=P.extend({_doReset:function(){for(var H=this._key.words,D=this.cfg.iv,j=0;j<4;j++)H[j]=(H[j]<<8|H[j]>>>24)&16711935|(H[j]<<24|H[j]>>>8)&4278255360;var V=this._X=[H[0],H[3]<<16|H[2]>>>16,H[1],H[0]<<16|H[3]>>>16,H[2],H[1]<<16|H[0]>>>16,H[3],H[2]<<16|H[1]>>>16],X=this._C=[H[2]<<16|H[2]>>>16,H[0]&4294901760|H[1]&65535,H[3]<<16|H[3]>>>16,H[1]&4294901760|H[2]&65535,H[0]<<16|H[0]>>>16,H[2]&4294901760|H[3]&65535,H[1]<<16|H[1]>>>16,H[3]&4294901760|H[0]&65535];this._b=0;for(var j=0;j<4;j++)N.call(this);for(var j=0;j<8;j++)X[j]^=V[j+4&7];if(D){var re=D.words,ee=re[0],fe=re[1],le=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,pe=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360,ie=le>>>16|pe&4294901760,he=pe<<16|le&65535;X[0]^=le,X[1]^=ie,X[2]^=pe,X[3]^=he,X[4]^=le,X[5]^=ie,X[6]^=pe,X[7]^=he;for(var j=0;j<4;j++)N.call(this)}},_doProcessBlock:function(H,D){var j=this._X;N.call(this),O[0]=j[0]^j[5]>>>16^j[3]<<16,O[1]=j[2]^j[7]>>>16^j[5]<<16,O[2]=j[4]^j[1]>>>16^j[7]<<16,O[3]=j[6]^j[3]>>>16^j[1]<<16;for(var V=0;V<4;V++)O[V]=(O[V]<<8|O[V]>>>24)&16711935|(O[V]<<24|O[V]>>>8)&4278255360,H[D+V]^=O[V]},blockSize:128/32,ivSize:64/32});function N(){for(var H=this._X,D=this._C,j=0;j<8;j++)k[j]=D[j];D[0]=D[0]+1295307597+this._b|0,D[1]=D[1]+3545052371+(D[0]>>>0<k[0]>>>0?1:0)|0,D[2]=D[2]+886263092+(D[1]>>>0<k[1]>>>0?1:0)|0,D[3]=D[3]+1295307597+(D[2]>>>0<k[2]>>>0?1:0)|0,D[4]=D[4]+3545052371+(D[3]>>>0<k[3]>>>0?1:0)|0,D[5]=D[5]+886263092+(D[4]>>>0<k[4]>>>0?1:0)|0,D[6]=D[6]+1295307597+(D[5]>>>0<k[5]>>>0?1:0)|0,D[7]=D[7]+3545052371+(D[6]>>>0<k[6]>>>0?1:0)|0,this._b=D[7]>>>0<k[7]>>>0?1:0;for(var j=0;j<8;j++){var V=H[j]+D[j],X=V&65535,re=V>>>16,ee=((X*X>>>17)+X*re>>>15)+re*re,fe=((V&4294901760)*V|0)+((V&65535)*V|0);C[j]=ee^fe}H[0]=C[0]+(C[7]<<16|C[7]>>>16)+(C[6]<<16|C[6]>>>16)|0,H[1]=C[1]+(C[0]<<8|C[0]>>>24)+C[7]|0,H[2]=C[2]+(C[1]<<16|C[1]>>>16)+(C[0]<<16|C[0]>>>16)|0,H[3]=C[3]+(C[2]<<8|C[2]>>>24)+C[1]|0,H[4]=C[4]+(C[3]<<16|C[3]>>>16)+(C[2]<<16|C[2]>>>16)|0,H[5]=C[5]+(C[4]<<8|C[4]>>>24)+C[3]|0,H[6]=C[6]+(C[5]<<16|C[5]>>>16)+(C[4]<<16|C[4]>>>16)|0,H[7]=C[7]+(C[6]<<8|C[6]>>>24)+C[5]|0}E.Rabbit=P._createHelper(U)}(),x.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(x){return function(){var E=x,A=E.lib,P=A.StreamCipher,T=E.algo,O=[],k=[],C=[],U=T.RabbitLegacy=P.extend({_doReset:function(){var H=this._key.words,D=this.cfg.iv,j=this._X=[H[0],H[3]<<16|H[2]>>>16,H[1],H[0]<<16|H[3]>>>16,H[2],H[1]<<16|H[0]>>>16,H[3],H[2]<<16|H[1]>>>16],V=this._C=[H[2]<<16|H[2]>>>16,H[0]&4294901760|H[1]&65535,H[3]<<16|H[3]>>>16,H[1]&4294901760|H[2]&65535,H[0]<<16|H[0]>>>16,H[2]&4294901760|H[3]&65535,H[1]<<16|H[1]>>>16,H[3]&4294901760|H[0]&65535];this._b=0;for(var X=0;X<4;X++)N.call(this);for(var X=0;X<8;X++)V[X]^=j[X+4&7];if(D){var re=D.words,ee=re[0],fe=re[1],le=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,pe=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360,ie=le>>>16|pe&4294901760,he=pe<<16|le&65535;V[0]^=le,V[1]^=ie,V[2]^=pe,V[3]^=he,V[4]^=le,V[5]^=ie,V[6]^=pe,V[7]^=he;for(var X=0;X<4;X++)N.call(this)}},_doProcessBlock:function(H,D){var j=this._X;N.call(this),O[0]=j[0]^j[5]>>>16^j[3]<<16,O[1]=j[2]^j[7]>>>16^j[5]<<16,O[2]=j[4]^j[1]>>>16^j[7]<<16,O[3]=j[6]^j[3]>>>16^j[1]<<16;for(var V=0;V<4;V++)O[V]=(O[V]<<8|O[V]>>>24)&16711935|(O[V]<<24|O[V]>>>8)&4278255360,H[D+V]^=O[V]},blockSize:128/32,ivSize:64/32});function N(){for(var H=this._X,D=this._C,j=0;j<8;j++)k[j]=D[j];D[0]=D[0]+1295307597+this._b|0,D[1]=D[1]+3545052371+(D[0]>>>0<k[0]>>>0?1:0)|0,D[2]=D[2]+886263092+(D[1]>>>0<k[1]>>>0?1:0)|0,D[3]=D[3]+1295307597+(D[2]>>>0<k[2]>>>0?1:0)|0,D[4]=D[4]+3545052371+(D[3]>>>0<k[3]>>>0?1:0)|0,D[5]=D[5]+886263092+(D[4]>>>0<k[4]>>>0?1:0)|0,D[6]=D[6]+1295307597+(D[5]>>>0<k[5]>>>0?1:0)|0,D[7]=D[7]+3545052371+(D[6]>>>0<k[6]>>>0?1:0)|0,this._b=D[7]>>>0<k[7]>>>0?1:0;for(var j=0;j<8;j++){var V=H[j]+D[j],X=V&65535,re=V>>>16,ee=((X*X>>>17)+X*re>>>15)+re*re,fe=((V&4294901760)*V|0)+((V&65535)*V|0);C[j]=ee^fe}H[0]=C[0]+(C[7]<<16|C[7]>>>16)+(C[6]<<16|C[6]>>>16)|0,H[1]=C[1]+(C[0]<<8|C[0]>>>24)+C[7]|0,H[2]=C[2]+(C[1]<<16|C[1]>>>16)+(C[0]<<16|C[0]>>>16)|0,H[3]=C[3]+(C[2]<<8|C[2]>>>24)+C[1]|0,H[4]=C[4]+(C[3]<<16|C[3]>>>16)+(C[2]<<16|C[2]>>>16)|0,H[5]=C[5]+(C[4]<<8|C[4]>>>24)+C[3]|0,H[6]=C[6]+(C[5]<<16|C[5]>>>16)+(C[4]<<16|C[4]>>>16)|0,H[7]=C[7]+(C[6]<<8|C[6]>>>24)+C[5]|0}E.RabbitLegacy=P._createHelper(U)}(),x.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}(function(v,_){(function(x,E,A){v.exports=E(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy())})(commonjsGlobal,function(x){return x})})(cryptoJs);var cryptoJsExports=cryptoJs.exports,__createBinding$r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$r=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$r(_,v,x);return __setModuleDefault$r(_,v),_};Object.defineProperty(aes$7,"__esModule",{value:!0}),aes$7.decrypt=aes$7.encrypt=void 0;const cryptoJS=__importStar$r(cryptoJsExports);function encrypt(v,_){const x=cryptoJS.enc.Utf8.parse(_);return cryptoJS.AES.encrypt(v,x,{iv:x,mode:cryptoJS.mode.CBC,padding:cryptoJS.pad.Pkcs7}).toString()}aes$7.encrypt=encrypt;function decrypt$1(v,_){const x=cryptoJS.enc.Utf8.parse(_);return cryptoJS.AES.decrypt(v,x,{iv:x,mode:cryptoJS.mode.CBC,padding:cryptoJS.pad.Pkcs7}).toString(cryptoJS.enc.Utf8)}aes$7.decrypt=decrypt$1;var rsa={},jsrsasign$1={},navigator$1={};navigator$1.userAgent=!1;var window$1={},VERSION$1="10.8.6",VERSION_FULL="jsrsasign(all) 10.8.6 (2023-04-26) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */var CryptoJS=CryptoJS||function(v,_){var x={},E=x.lib={},A=E.Base=function(){function H(){}return{extend:function(D){H.prototype=this;var j=new H;return D&&j.mixIn(D),j.hasOwnProperty("init")||(j.init=function(){j.$super.init.apply(this,arguments)}),j.init.prototype=j,j.$super=this,j},create:function(){var D=this.extend();return D.init.apply(D,arguments),D},init:function(){},mixIn:function(D){for(var j in D)D.hasOwnProperty(j)&&(this[j]=D[j]);D.hasOwnProperty("toString")&&(this.toString=D.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),P=E.WordArray=A.extend({init:function(H,D){H=this.words=H||[],D!=_?this.sigBytes=D:this.sigBytes=H.length*4},toString:function(H){return(H||O).stringify(this)},concat:function(H){var D=this.words,j=H.words,V=this.sigBytes,X=H.sigBytes;if(this.clamp(),V%4)for(var re=0;re<X;re++){var ee=j[re>>>2]>>>24-re%4*8&255;D[V+re>>>2]|=ee<<24-(V+re)%4*8}else for(var re=0;re<X;re+=4)D[V+re>>>2]=j[re>>>2];return this.sigBytes+=X,this},clamp:function(){var H=this.words,D=this.sigBytes;H[D>>>2]&=4294967295<<32-D%4*8,H.length=v.ceil(D/4)},clone:function(){var H=A.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var D=[],j=0;j<H;j+=4)D.push(v.random()*4294967296|0);return new P.init(D,H)}}),T=x.enc={},O=T.Hex={stringify:function(H){for(var D=H.words,j=H.sigBytes,V=[],X=0;X<j;X++){var re=D[X>>>2]>>>24-X%4*8&255;V.push((re>>>4).toString(16)),V.push((re&15).toString(16))}return V.join("")},parse:function(H){for(var D=H.length,j=[],V=0;V<D;V+=2)j[V>>>3]|=parseInt(H.substr(V,2),16)<<24-V%8*4;return new P.init(j,D/2)}},k=T.Latin1={stringify:function(H){for(var D=H.words,j=H.sigBytes,V=[],X=0;X<j;X++){var re=D[X>>>2]>>>24-X%4*8&255;V.push(String.fromCharCode(re))}return V.join("")},parse:function(H){for(var D=H.length,j=[],V=0;V<D;V++)j[V>>>2]|=(H.charCodeAt(V)&255)<<24-V%4*8;return new P.init(j,D)}},C=T.Utf8={stringify:function(H){try{return decodeURIComponent(escape(k.stringify(H)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(H){return k.parse(unescape(encodeURIComponent(H)))}},U=E.BufferedBlockAlgorithm=A.extend({reset:function(){this._data=new P.init,this._nDataBytes=0},_append:function(H){typeof H=="string"&&(H=C.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var D=this._data,j=D.words,V=D.sigBytes,X=this.blockSize,re=X*4,ee=V/re;H?ee=v.ceil(ee):ee=v.max((ee|0)-this._minBufferSize,0);var fe=ee*X,le=v.min(fe*4,V);if(fe){for(var pe=0;pe<fe;pe+=X)this._doProcessBlock(j,pe);var ie=j.splice(0,fe);D.sigBytes-=le}return new P.init(ie,le)},clone:function(){var H=A.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0});E.Hasher=U.extend({cfg:A.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){H&&this._append(H);var D=this._doFinalize();return D},blockSize:512/32,_createHelper:function(H){return function(D,j){return new H.init(j).finalize(D)}},_createHmacHelper:function(H){return function(D,j){return new N.HMAC.init(H,j).finalize(D)}}});var N=x.algo={};return x}(Math);(function(v){var A=CryptoJS,_=A.lib,x=_.Base,E=_.WordArray,A=A.x64={};A.Word=x.extend({init:function(P,T){this.high=P,this.low=T}}),A.WordArray=x.extend({init:function(P,T){P=this.words=P||[],this.sigBytes=T!=v?T:8*P.length},toX32:function(){for(var P=this.words,T=P.length,O=[],k=0;k<T;k++){var C=P[k];O.push(C.high),O.push(C.low)}return E.create(O,this.sigBytes)},clone:function(){for(var P=x.clone.call(this),T=P.words=this.words.slice(0),O=T.length,k=0;k<O;k++)T[k]=T[k].clone();return P}})})(),CryptoJS.lib.Cipher||function(v){var D=CryptoJS,_=D.lib,x=_.Base,E=_.WordArray,A=_.BufferedBlockAlgorithm,P=D.enc.Base64,T=D.algo.EvpKDF,O=_.Cipher=A.extend({cfg:x.extend(),createEncryptor:function(V,X){return this.create(this._ENC_XFORM_MODE,V,X)},createDecryptor:function(V,X){return this.create(this._DEC_XFORM_MODE,V,X)},init:function(V,X,re){this.cfg=this.cfg.extend(re),this._xformMode=V,this._key=X,this.reset()},reset:function(){A.reset.call(this),this._doReset()},process:function(V){return this._append(V),this._process()},finalize:function(V){return V&&this._append(V),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(V){return{encrypt:function(X,re,ee){return(typeof re=="string"?j:H).encrypt(V,X,re,ee)},decrypt:function(X,re,ee){return(typeof re=="string"?j:H).decrypt(V,X,re,ee)}}}});_.StreamCipher=O.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var N=D.mode={},k=function(V,X,re){var ee=this._iv;ee?this._iv=v:ee=this._prevBlock;for(var fe=0;fe<re;fe++)V[X+fe]^=ee[fe]},C=(_.BlockCipherMode=x.extend({createEncryptor:function(V,X){return this.Encryptor.create(V,X)},createDecryptor:function(V,X){return this.Decryptor.create(V,X)},init:function(V,X){this._cipher=V,this._iv=X}})).extend();C.Encryptor=C.extend({processBlock:function(V,X){var re=this._cipher,ee=re.blockSize;k.call(this,V,X,ee),re.encryptBlock(V,X),this._prevBlock=V.slice(X,X+ee)}}),C.Decryptor=C.extend({processBlock:function(V,X){var re=this._cipher,ee=re.blockSize,fe=V.slice(X,X+ee);re.decryptBlock(V,X),k.call(this,V,X,ee),this._prevBlock=fe}}),N=N.CBC=C,C=(D.pad={}).Pkcs7={pad:function(V,X){for(var re=4*X,re=re-V.sigBytes%re,ee=re<<24|re<<16|re<<8|re,fe=[],le=0;le<re;le+=4)fe.push(ee);re=E.create(fe,re),V.concat(re)},unpad:function(V){V.sigBytes-=V.words[V.sigBytes-1>>>2]&255}},_.BlockCipher=O.extend({cfg:O.cfg.extend({mode:N,padding:C}),reset:function(){O.reset.call(this);var X=this.cfg,V=X.iv,X=X.mode;if(this._xformMode==this._ENC_XFORM_MODE)var re=X.createEncryptor;else re=X.createDecryptor,this._minBufferSize=1;this._mode=re.call(X,this,V&&V.words)},_doProcessBlock:function(V,X){this._mode.processBlock(V,X)},_doFinalize:function(){var V=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){V.pad(this._data,this.blockSize);var X=this._process(!0)}else X=this._process(!0),V.unpad(X);return X},blockSize:4});var U=_.CipherParams=x.extend({init:function(V){this.mixIn(V)},toString:function(V){return(V||this.formatter).stringify(this)}}),N=(D.format={}).OpenSSL={stringify:function(V){var X=V.ciphertext;return V=V.salt,(V?E.create([1398893684,1701076831]).concat(V).concat(X):X).toString(P)},parse:function(V){V=P.parse(V);var X=V.words;if(X[0]==1398893684&&X[1]==1701076831){var re=E.create(X.slice(2,4));X.splice(0,4),V.sigBytes-=16}return U.create({ciphertext:V,salt:re})}},H=_.SerializableCipher=x.extend({cfg:x.extend({format:N}),encrypt:function(V,X,re,ee){ee=this.cfg.extend(ee);var fe=V.createEncryptor(re,ee);return X=fe.finalize(X),fe=fe.cfg,U.create({ciphertext:X,key:re,iv:fe.iv,algorithm:V,mode:fe.mode,padding:fe.padding,blockSize:V.blockSize,formatter:ee.format})},decrypt:function(V,X,re,ee){return ee=this.cfg.extend(ee),X=this._parse(X,ee.format),V.createDecryptor(re,ee).finalize(X.ciphertext)},_parse:function(V,X){return typeof V=="string"?X.parse(V,this):V}}),D=(D.kdf={}).OpenSSL={execute:function(V,X,re,ee){return ee||(ee=E.random(8)),V=T.create({keySize:X+re}).compute(V,ee),re=E.create(V.words.slice(X),4*re),V.sigBytes=4*X,U.create({key:V,iv:re,salt:ee})}},j=_.PasswordBasedCipher=H.extend({cfg:H.cfg.extend({kdf:D}),encrypt:function(V,X,re,ee){return ee=this.cfg.extend(ee),re=ee.kdf.execute(re,V.keySize,V.ivSize),ee.iv=re.iv,V=H.encrypt.call(this,V,X,re.key,ee),V.mixIn(re),V},decrypt:function(V,X,re,ee){return ee=this.cfg.extend(ee),X=this._parse(X,ee.format),re=ee.kdf.execute(re,V.keySize,V.ivSize,X.salt),ee.iv=re.iv,H.decrypt.call(this,V,X,re.key,ee)}})}(),function(){for(var v=CryptoJS,_=v.lib.BlockCipher,ie=v.algo,x=[],E=[],A=[],P=[],T=[],O=[],k=[],C=[],U=[],N=[],H=[],D=0;256>D;D++)H[D]=128>D?D<<1:D<<1^283;for(var j=0,V=0,D=0;256>D;D++){var X=V^V<<1^V<<2^V<<3^V<<4,X=X>>>8^X&255^99;x[j]=X,E[X]=j;var re=H[j],ee=H[re],fe=H[ee],le=257*H[X]^16843008*X;A[j]=le<<24|le>>>8,P[j]=le<<16|le>>>16,T[j]=le<<8|le>>>24,O[j]=le,le=16843009*fe^65537*ee^257*re^16843008*j,k[X]=le<<24|le>>>8,C[X]=le<<16|le>>>16,U[X]=le<<8|le>>>24,N[X]=le,j?(j=re^H[H[H[fe^re]]],V^=H[H[V]]):j=V=1}var pe=[0,1,2,4,8,16,32,64,128,27,54],ie=ie.AES=_.extend({_doReset:function(){for(var te=this._key,he=te.words,ae=te.sigBytes/4,te=4*((this._nRounds=ae+6)+1),ue=this._keySchedule=[],ne=0;ne<te;ne++)if(ne<ae)ue[ne]=he[ne];else{var J=ue[ne-1];ne%ae?6<ae&&ne%ae==4&&(J=x[J>>>24]<<24|x[J>>>16&255]<<16|x[J>>>8&255]<<8|x[J&255]):(J=J<<8|J>>>24,J=x[J>>>24]<<24|x[J>>>16&255]<<16|x[J>>>8&255]<<8|x[J&255],J^=pe[ne/ae|0]<<24),ue[ne]=ue[ne-ae]^J}for(he=this._invKeySchedule=[],ae=0;ae<te;ae++)ne=te-ae,J=ae%4?ue[ne]:ue[ne-4],he[ae]=4>ae||4>=ne?J:k[x[J>>>24]]^C[x[J>>>16&255]]^U[x[J>>>8&255]]^N[x[J&255]]},encryptBlock:function(he,ae){this._doCryptBlock(he,ae,this._keySchedule,A,P,T,O,x)},decryptBlock:function(he,ae){var te=he[ae+1];he[ae+1]=he[ae+3],he[ae+3]=te,this._doCryptBlock(he,ae,this._invKeySchedule,k,C,U,N,E),te=he[ae+1],he[ae+1]=he[ae+3],he[ae+3]=te},_doCryptBlock:function(he,ae,te,ue,ne,J,q,F){for(var L=this._nRounds,Y=he[ae]^te[0],ce=he[ae+1]^te[1],we=he[ae+2]^te[2],se=he[ae+3]^te[3],Z=4,Q=1;Q<L;Q++)var de=ue[Y>>>24]^ne[ce>>>16&255]^J[we>>>8&255]^q[se&255]^te[Z++],ye=ue[ce>>>24]^ne[we>>>16&255]^J[se>>>8&255]^q[Y&255]^te[Z++],oe=ue[we>>>24]^ne[se>>>16&255]^J[Y>>>8&255]^q[ce&255]^te[Z++],se=ue[se>>>24]^ne[Y>>>16&255]^J[ce>>>8&255]^q[we&255]^te[Z++],Y=de,ce=ye,we=oe;de=(F[Y>>>24]<<24|F[ce>>>16&255]<<16|F[we>>>8&255]<<8|F[se&255])^te[Z++],ye=(F[ce>>>24]<<24|F[we>>>16&255]<<16|F[se>>>8&255]<<8|F[Y&255])^te[Z++],oe=(F[we>>>24]<<24|F[se>>>16&255]<<16|F[Y>>>8&255]<<8|F[ce&255])^te[Z++],se=(F[se>>>24]<<24|F[Y>>>16&255]<<16|F[ce>>>8&255]<<8|F[we&255])^te[Z++],he[ae]=de,he[ae+1]=ye,he[ae+2]=oe,he[ae+3]=se},keySize:8});v.AES=_._createHelper(ie)}(),function(){function v(H,D){var j=(this._lBlock>>>H^this._rBlock)&D;this._rBlock^=j,this._lBlock^=j<<H}function _(H,D){var j=(this._rBlock>>>H^this._lBlock)&D;this._lBlock^=j,this._rBlock^=j<<H}var x=CryptoJS,A=x.lib,E=A.WordArray,A=A.BlockCipher,P=x.algo,T=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],O=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],k=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],C=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],U=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],N=P.DES=A.extend({_doReset:function(){for(var H=this._key.words,D=[],j=0;56>j;j++){var V=T[j]-1;D[j]=H[V>>>5]>>>31-V%32&1}for(H=this._subKeys=[],V=0;16>V;V++){for(var X=H[V]=[],re=k[V],j=0;24>j;j++)X[j/6|0]|=D[(O[j]-1+re)%28]<<31-j%6,X[4+(j/6|0)]|=D[28+(O[j+24]-1+re)%28]<<31-j%6;for(X[0]=X[0]<<1|X[0]>>>31,j=1;7>j;j++)X[j]>>>=4*(j-1)+3;X[7]=X[7]<<5|X[7]>>>27}for(D=this._invSubKeys=[],j=0;16>j;j++)D[j]=H[15-j]},encryptBlock:function(H,D){this._doCryptBlock(H,D,this._subKeys)},decryptBlock:function(H,D){this._doCryptBlock(H,D,this._invSubKeys)},_doCryptBlock:function(H,D,j){this._lBlock=H[D],this._rBlock=H[D+1],v.call(this,4,252645135),v.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),v.call(this,1,1431655765);for(var V=0;16>V;V++){for(var X=j[V],re=this._lBlock,ee=this._rBlock,fe=0,le=0;8>le;le++)fe|=C[le][((ee^X[le])&U[le])>>>0];this._lBlock=ee,this._rBlock=re^fe}j=this._lBlock,this._lBlock=this._rBlock,this._rBlock=j,v.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),H[D]=this._lBlock,H[D+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});x.DES=A._createHelper(N),P=P.TripleDES=A.extend({_doReset:function(){var H=this._key.words;this._des1=N.createEncryptor(E.create(H.slice(0,2))),this._des2=N.createEncryptor(E.create(H.slice(2,4))),this._des3=N.createEncryptor(E.create(H.slice(4,6)))},encryptBlock:function(H,D){this._des1.encryptBlock(H,D),this._des2.decryptBlock(H,D),this._des3.encryptBlock(H,D)},decryptBlock:function(H,D){this._des3.decryptBlock(H,D),this._des2.encryptBlock(H,D),this._des1.decryptBlock(H,D)},keySize:6,ivSize:2,blockSize:2}),x.TripleDES=A._createHelper(P)}(),function(){var v=CryptoJS,_=v.lib.WordArray;v.enc.Base64={stringify:function(x){var E=x.words,A=x.sigBytes,P=this._map;x.clamp(),x=[];for(var T=0;T<A;T+=3)for(var O=(E[T>>>2]>>>24-8*(T%4)&255)<<16|(E[T+1>>>2]>>>24-8*((T+1)%4)&255)<<8|E[T+2>>>2]>>>24-8*((T+2)%4)&255,k=0;4>k&&T+.75*k<A;k++)x.push(P.charAt(O>>>6*(3-k)&63));if(E=P.charAt(64))for(;x.length%4;)x.push(E);return x.join("")},parse:function(x){var E=x.length,A=this._map,P=A.charAt(64);P&&(P=x.indexOf(P),P!=-1&&(E=P));for(var P=[],T=0,O=0;O<E;O++)if(O%4){var k=A.indexOf(x.charAt(O-1))<<2*(O%4),C=A.indexOf(x.charAt(O))>>>6-2*(O%4);P[T>>>2]|=(k|C)<<24-8*(T%4),T++}return _.create(P,T)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(v){function _(N,H,D,j,V,X,re){return N=N+(H&D|~H&j)+V+re,(N<<X|N>>>32-X)+H}function x(N,H,D,j,V,X,re){return N=N+(H&j|D&~j)+V+re,(N<<X|N>>>32-X)+H}function E(N,H,D,j,V,X,re){return N=N+(H^D^j)+V+re,(N<<X|N>>>32-X)+H}function A(N,H,D,j,V,X,re){return N=N+(D^(H|~j))+V+re,(N<<X|N>>>32-X)+H}for(var P=CryptoJS,k=P.lib,T=k.WordArray,O=k.Hasher,k=P.algo,C=[],U=0;64>U;U++)C[U]=4294967296*v.abs(v.sin(U+1))|0;k=k.MD5=O.extend({_doReset:function(){this._hash=new T.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(N,H){for(var D=0;16>D;D++){var j=H+D,V=N[j];N[j]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360}var D=this._hash.words,j=N[H+0],V=N[H+1],X=N[H+2],re=N[H+3],ee=N[H+4],fe=N[H+5],le=N[H+6],pe=N[H+7],ie=N[H+8],he=N[H+9],ae=N[H+10],te=N[H+11],ue=N[H+12],ne=N[H+13],J=N[H+14],q=N[H+15],F=D[0],Q=D[1],Z=D[2],L=D[3],F=_(F,Q,Z,L,j,7,C[0]),L=_(L,F,Q,Z,V,12,C[1]),Z=_(Z,L,F,Q,X,17,C[2]),Q=_(Q,Z,L,F,re,22,C[3]),F=_(F,Q,Z,L,ee,7,C[4]),L=_(L,F,Q,Z,fe,12,C[5]),Z=_(Z,L,F,Q,le,17,C[6]),Q=_(Q,Z,L,F,pe,22,C[7]),F=_(F,Q,Z,L,ie,7,C[8]),L=_(L,F,Q,Z,he,12,C[9]),Z=_(Z,L,F,Q,ae,17,C[10]),Q=_(Q,Z,L,F,te,22,C[11]),F=_(F,Q,Z,L,ue,7,C[12]),L=_(L,F,Q,Z,ne,12,C[13]),Z=_(Z,L,F,Q,J,17,C[14]),Q=_(Q,Z,L,F,q,22,C[15]),F=x(F,Q,Z,L,V,5,C[16]),L=x(L,F,Q,Z,le,9,C[17]),Z=x(Z,L,F,Q,te,14,C[18]),Q=x(Q,Z,L,F,j,20,C[19]),F=x(F,Q,Z,L,fe,5,C[20]),L=x(L,F,Q,Z,ae,9,C[21]),Z=x(Z,L,F,Q,q,14,C[22]),Q=x(Q,Z,L,F,ee,20,C[23]),F=x(F,Q,Z,L,he,5,C[24]),L=x(L,F,Q,Z,J,9,C[25]),Z=x(Z,L,F,Q,re,14,C[26]),Q=x(Q,Z,L,F,ie,20,C[27]),F=x(F,Q,Z,L,ne,5,C[28]),L=x(L,F,Q,Z,X,9,C[29]),Z=x(Z,L,F,Q,pe,14,C[30]),Q=x(Q,Z,L,F,ue,20,C[31]),F=E(F,Q,Z,L,fe,4,C[32]),L=E(L,F,Q,Z,ie,11,C[33]),Z=E(Z,L,F,Q,te,16,C[34]),Q=E(Q,Z,L,F,J,23,C[35]),F=E(F,Q,Z,L,V,4,C[36]),L=E(L,F,Q,Z,ee,11,C[37]),Z=E(Z,L,F,Q,pe,16,C[38]),Q=E(Q,Z,L,F,ae,23,C[39]),F=E(F,Q,Z,L,ne,4,C[40]),L=E(L,F,Q,Z,j,11,C[41]),Z=E(Z,L,F,Q,re,16,C[42]),Q=E(Q,Z,L,F,le,23,C[43]),F=E(F,Q,Z,L,he,4,C[44]),L=E(L,F,Q,Z,ue,11,C[45]),Z=E(Z,L,F,Q,q,16,C[46]),Q=E(Q,Z,L,F,X,23,C[47]),F=A(F,Q,Z,L,j,6,C[48]),L=A(L,F,Q,Z,pe,10,C[49]),Z=A(Z,L,F,Q,J,15,C[50]),Q=A(Q,Z,L,F,fe,21,C[51]),F=A(F,Q,Z,L,ue,6,C[52]),L=A(L,F,Q,Z,re,10,C[53]),Z=A(Z,L,F,Q,ae,15,C[54]),Q=A(Q,Z,L,F,V,21,C[55]),F=A(F,Q,Z,L,ie,6,C[56]),L=A(L,F,Q,Z,q,10,C[57]),Z=A(Z,L,F,Q,le,15,C[58]),Q=A(Q,Z,L,F,ne,21,C[59]),F=A(F,Q,Z,L,ee,6,C[60]),L=A(L,F,Q,Z,te,10,C[61]),Z=A(Z,L,F,Q,X,15,C[62]),Q=A(Q,Z,L,F,he,21,C[63]);D[0]=D[0]+F|0,D[1]=D[1]+Q|0,D[2]=D[2]+Z|0,D[3]=D[3]+L|0},_doFinalize:function(){var N=this._data,H=N.words,D=8*this._nDataBytes,j=8*N.sigBytes;H[j>>>5]|=128<<24-j%32;var V=v.floor(D/4294967296);for(H[(j+64>>>9<<4)+15]=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,H[(j+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,N.sigBytes=4*(H.length+1),this._process(),N=this._hash,H=N.words,D=0;4>D;D++)j=H[D],H[D]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360;return N},clone:function(){var N=O.clone.call(this);return N._hash=this._hash.clone(),N}}),P.MD5=O._createHelper(k),P.HmacMD5=O._createHmacHelper(k)}(Math),function(){var v=CryptoJS,A=v.lib,_=A.WordArray,x=A.Hasher,E=[],A=v.algo.SHA1=x.extend({_doReset:function(){this._hash=new _.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,T){for(var O=this._hash.words,k=O[0],C=O[1],U=O[2],N=O[3],H=O[4],D=0;80>D;D++){if(16>D)E[D]=P[T+D]|0;else{var j=E[D-3]^E[D-8]^E[D-14]^E[D-16];E[D]=j<<1|j>>>31}j=(k<<5|k>>>27)+H+E[D],j=20>D?j+((C&U|~C&N)+1518500249):40>D?j+((C^U^N)+1859775393):60>D?j+((C&U|C&N|U&N)-1894007588):j+((C^U^N)-899497514),H=N,N=U,U=C<<30|C>>>2,C=k,k=j}O[0]=O[0]+k|0,O[1]=O[1]+C|0,O[2]=O[2]+U|0,O[3]=O[3]+N|0,O[4]=O[4]+H|0},_doFinalize:function(){var P=this._data,T=P.words,O=8*this._nDataBytes,k=8*P.sigBytes;return T[k>>>5]|=128<<24-k%32,T[(k+64>>>9<<4)+14]=Math.floor(O/4294967296),T[(k+64>>>9<<4)+15]=O,P.sigBytes=4*T.length,this._process(),this._hash},clone:function(){var P=x.clone.call(this);return P._hash=this._hash.clone(),P}});v.SHA1=x._createHelper(A),v.HmacSHA1=x._createHmacHelper(A)}(),function(v){for(var _=CryptoJS,D=_.lib,x=D.WordArray,E=D.Hasher,D=_.algo,A=[],P=[],T=function(V){return 4294967296*(V-(V|0))|0},O=2,k=0;64>k;){var C;e:{C=O;for(var U=v.sqrt(C),N=2;N<=U;N++)if(!(C%N)){C=!1;break e}C=!0}C&&(8>k&&(A[k]=T(v.pow(O,.5))),P[k]=T(v.pow(O,1/3)),k++),O++}var H=[],D=D.SHA256=E.extend({_doReset:function(){this._hash=new x.init(A.slice(0))},_doProcessBlock:function(j,V){for(var X=this._hash.words,re=X[0],ee=X[1],fe=X[2],le=X[3],pe=X[4],ie=X[5],he=X[6],ae=X[7],te=0;64>te;te++){if(16>te)H[te]=j[V+te]|0;else{var ue=H[te-15],ne=H[te-2];H[te]=((ue<<25|ue>>>7)^(ue<<14|ue>>>18)^ue>>>3)+H[te-7]+((ne<<15|ne>>>17)^(ne<<13|ne>>>19)^ne>>>10)+H[te-16]}ue=ae+((pe<<26|pe>>>6)^(pe<<21|pe>>>11)^(pe<<7|pe>>>25))+(pe&ie^~pe&he)+P[te]+H[te],ne=((re<<30|re>>>2)^(re<<19|re>>>13)^(re<<10|re>>>22))+(re&ee^re&fe^ee&fe),ae=he,he=ie,ie=pe,pe=le+ue|0,le=fe,fe=ee,ee=re,re=ue+ne|0}X[0]=X[0]+re|0,X[1]=X[1]+ee|0,X[2]=X[2]+fe|0,X[3]=X[3]+le|0,X[4]=X[4]+pe|0,X[5]=X[5]+ie|0,X[6]=X[6]+he|0,X[7]=X[7]+ae|0},_doFinalize:function(){var j=this._data,V=j.words,X=8*this._nDataBytes,re=8*j.sigBytes;return V[re>>>5]|=128<<24-re%32,V[(re+64>>>9<<4)+14]=v.floor(X/4294967296),V[(re+64>>>9<<4)+15]=X,j.sigBytes=4*V.length,this._process(),this._hash},clone:function(){var j=E.clone.call(this);return j._hash=this._hash.clone(),j}});_.SHA256=E._createHelper(D),_.HmacSHA256=E._createHmacHelper(D)}(Math),function(){var v=CryptoJS,_=v.lib.WordArray,E=v.algo,x=E.SHA256,E=E.SHA224=x.extend({_doReset:function(){this._hash=new _.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var A=x._doFinalize.call(this);return A.sigBytes-=4,A}});v.SHA224=x._createHelper(E),v.HmacSHA224=x._createHmacHelper(E)}(),function(){function v(){return E.create.apply(E,arguments)}for(var _=CryptoJS,x=_.lib.Hasher,P=_.x64,E=P.Word,A=P.WordArray,P=_.algo,T=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],O=[],k=0;80>k;k++)O[k]=v();P=P.SHA512=x.extend({_doReset:function(){this._hash=new A.init([new E.init(1779033703,4089235720),new E.init(3144134277,2227873595),new E.init(1013904242,4271175723),new E.init(2773480762,1595750129),new E.init(1359893119,2917565137),new E.init(2600822924,725511199),new E.init(528734635,4215389547),new E.init(1541459225,327033209)])},_doProcessBlock:function(C,U){for(var ee=this._hash.words,N=ee[0],H=ee[1],D=ee[2],j=ee[3],V=ee[4],X=ee[5],re=ee[6],ee=ee[7],fe=N.high,le=N.low,pe=H.high,ie=H.low,he=D.high,ae=D.low,te=j.high,ue=j.low,ne=V.high,J=V.low,q=X.high,F=X.low,L=re.high,Z=re.low,Q=ee.high,de=ee.low,ye=fe,oe=le,se=pe,Y=ie,ce=he,we=ae,Pe=te,Se=ue,Be=ne,Ie=J,Re=q,Me=F,xe=L,Ee=Z,Ue=Q,Ke=de,ze=0;80>ze;ze++){var ve=O[ze];if(16>ze)var Ve=ve.high=C[U+2*ze]|0,Ce=ve.low=C[U+2*ze+1]|0;else{var Ve=O[ze-15],Ce=Ve.high,ot=Ve.low,Ve=(Ce>>>1|ot<<31)^(Ce>>>8|ot<<24)^Ce>>>7,ot=(ot>>>1|Ce<<31)^(ot>>>8|Ce<<24)^(ot>>>7|Ce<<25),He=O[ze-2],Ce=He.high,$e=He.low,He=(Ce>>>19|$e<<13)^(Ce<<3|$e>>>29)^Ce>>>6,$e=($e>>>19|Ce<<13)^($e<<3|Ce>>>29)^($e>>>6|Ce<<26),Ce=O[ze-7],Je=Ce.high,et=O[ze-16],Te=et.high,et=et.low,Ce=ot+Ce.low,Ve=Ve+Je+(Ce>>>0<ot>>>0?1:0),Ce=Ce+$e,Ve=Ve+He+(Ce>>>0<$e>>>0?1:0),Ce=Ce+et,Ve=Ve+Te+(Ce>>>0<et>>>0?1:0);ve.high=Ve,ve.low=Ce}var Je=Be&Re^~Be&xe,et=Ie&Me^~Ie&Ee,ve=ye&se^ye&ce^se&ce,Ge=oe&Y^oe&we^Y&we,ot=(ye>>>28|oe<<4)^(ye<<30|oe>>>2)^(ye<<25|oe>>>7),He=(oe>>>28|ye<<4)^(oe<<30|ye>>>2)^(oe<<25|ye>>>7),$e=T[ze],We=$e.high,Ze=$e.low,$e=Ke+((Ie>>>14|Be<<18)^(Ie>>>18|Be<<14)^(Ie<<23|Be>>>9)),Te=Ue+((Be>>>14|Ie<<18)^(Be>>>18|Ie<<14)^(Be<<23|Ie>>>9))+($e>>>0<Ke>>>0?1:0),$e=$e+et,Te=Te+Je+($e>>>0<et>>>0?1:0),$e=$e+Ze,Te=Te+We+($e>>>0<Ze>>>0?1:0),$e=$e+Ce,Te=Te+Ve+($e>>>0<Ce>>>0?1:0),Ce=He+Ge,ve=ot+ve+(Ce>>>0<He>>>0?1:0),Ue=xe,Ke=Ee,xe=Re,Ee=Me,Re=Be,Me=Ie,Ie=Se+$e|0,Be=Pe+Te+(Ie>>>0<Se>>>0?1:0)|0,Pe=ce,Se=we,ce=se,we=Y,se=ye,Y=oe,oe=$e+Ce|0,ye=Te+ve+(oe>>>0<$e>>>0?1:0)|0}le=N.low=le+oe,N.high=fe+ye+(le>>>0<oe>>>0?1:0),ie=H.low=ie+Y,H.high=pe+se+(ie>>>0<Y>>>0?1:0),ae=D.low=ae+we,D.high=he+ce+(ae>>>0<we>>>0?1:0),ue=j.low=ue+Se,j.high=te+Pe+(ue>>>0<Se>>>0?1:0),J=V.low=J+Ie,V.high=ne+Be+(J>>>0<Ie>>>0?1:0),F=X.low=F+Me,X.high=q+Re+(F>>>0<Me>>>0?1:0),Z=re.low=Z+Ee,re.high=L+xe+(Z>>>0<Ee>>>0?1:0),de=ee.low=de+Ke,ee.high=Q+Ue+(de>>>0<Ke>>>0?1:0)},_doFinalize:function(){var C=this._data,U=C.words,N=8*this._nDataBytes,H=8*C.sigBytes;return U[H>>>5]|=128<<24-H%32,U[(H+128>>>10<<5)+30]=Math.floor(N/4294967296),U[(H+128>>>10<<5)+31]=N,C.sigBytes=4*U.length,this._process(),this._hash.toX32()},clone:function(){var C=x.clone.call(this);return C._hash=this._hash.clone(),C},blockSize:32}),_.SHA512=x._createHelper(P),_.HmacSHA512=x._createHmacHelper(P)}(),function(){var v=CryptoJS,A=v.x64,_=A.Word,x=A.WordArray,A=v.algo,E=A.SHA512,A=A.SHA384=E.extend({_doReset:function(){this._hash=new x.init([new _.init(3418070365,3238371032),new _.init(1654270250,914150663),new _.init(2438529370,812702999),new _.init(355462360,4144912697),new _.init(1731405415,4290775857),new _.init(2394180231,1750603025),new _.init(3675008525,1694076839),new _.init(1203062813,3204075428)])},_doFinalize:function(){var P=E._doFinalize.call(this);return P.sigBytes-=16,P}});v.SHA384=E._createHelper(A),v.HmacSHA384=E._createHmacHelper(A)}(),function(){var v=CryptoJS,C=v.lib,_=C.WordArray,x=C.Hasher,C=v.algo,E=_.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),A=_.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),P=_.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),T=_.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=_.create([0,1518500249,1859775393,2400959708,2840853838]),k=_.create([1352829926,1548603684,1836072691,2053994217,0]),C=C.RIPEMD160=x.extend({_doReset:function(){this._hash=_.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,N){for(var H=0;16>H;H++){var D=N+H,j=U[D];U[D]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360}var D=this._hash.words,j=O.words,V=k.words,X=E.words,re=A.words,ee=P.words,fe=T.words,le,pe,ie,he,ae,te,ue,ne,J,q;te=le=D[0],ue=pe=D[1],ne=ie=D[2],J=he=D[3],q=ae=D[4];for(var F,H=0;80>H;H+=1)F=le+U[N+X[H]]|0,F=16>H?F+((pe^ie^he)+j[0]):32>H?F+((pe&ie|~pe&he)+j[1]):48>H?F+(((pe|~ie)^he)+j[2]):64>H?F+((pe&he|ie&~he)+j[3]):F+((pe^(ie|~he))+j[4]),F|=0,F=F<<ee[H]|F>>>32-ee[H],F=F+ae|0,le=ae,ae=he,he=ie<<10|ie>>>22,ie=pe,pe=F,F=te+U[N+re[H]]|0,F=16>H?F+((ue^(ne|~J))+V[0]):32>H?F+((ue&J|ne&~J)+V[1]):48>H?F+(((ue|~ne)^J)+V[2]):64>H?F+((ue&ne|~ue&J)+V[3]):F+((ue^ne^J)+V[4]),F|=0,F=F<<fe[H]|F>>>32-fe[H],F=F+q|0,te=q,q=J,J=ne<<10|ne>>>22,ne=ue,ue=F;F=D[1]+ie+J|0,D[1]=D[2]+he+q|0,D[2]=D[3]+ae+te|0,D[3]=D[4]+le+ue|0,D[4]=D[0]+pe+ne|0,D[0]=F},_doFinalize:function(){var U=this._data,N=U.words,H=8*this._nDataBytes,D=8*U.sigBytes;for(N[D>>>5]|=128<<24-D%32,N[(D+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,U.sigBytes=4*(N.length+1),this._process(),U=this._hash,N=U.words,H=0;5>H;H++)D=N[H],N[H]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;return U},clone:function(){var U=x.clone.call(this);return U._hash=this._hash.clone(),U}});v.RIPEMD160=x._createHelper(C),v.HmacRIPEMD160=x._createHmacHelper(C)}(),function(){var v=CryptoJS,_=v.enc.Utf8;v.algo.HMAC=v.lib.Base.extend({init:function(x,E){x=this._hasher=new x.init,typeof E=="string"&&(E=_.parse(E));var A=x.blockSize,P=4*A;E.sigBytes>P&&(E=x.finalize(E)),E.clamp();for(var T=this._oKey=E.clone(),O=this._iKey=E.clone(),k=T.words,C=O.words,U=0;U<A;U++)k[U]^=1549556828,C[U]^=909522486;T.sigBytes=O.sigBytes=P,this.reset()},reset:function(){var x=this._hasher;x.reset(),x.update(this._iKey)},update:function(x){return this._hasher.update(x),this},finalize:function(x){var E=this._hasher;return x=E.finalize(x),E.reset(),E.finalize(this._oKey.clone().concat(x))}})}(),function(){var v=CryptoJS,E=v.lib,_=E.Base,x=E.WordArray,E=v.algo,A=E.HMAC,P=E.PBKDF2=_.extend({cfg:_.extend({keySize:4,hasher:E.SHA1,iterations:1}),init:function(T){this.cfg=this.cfg.extend(T)},compute:function(T,O){for(var j=this.cfg,k=A.create(j.hasher,T),C=x.create(),U=x.create([1]),N=C.words,H=U.words,D=j.keySize,j=j.iterations;N.length<D;){var V=k.update(O).finalize(U);k.reset();for(var X=V.words,re=X.length,ee=V,fe=1;fe<j;fe++){ee=k.finalize(ee),k.reset();for(var le=ee.words,pe=0;pe<re;pe++)X[pe]^=le[pe]}C.concat(V),H[0]++}return C.sigBytes=4*D,C}});v.PBKDF2=function(T,O,k){return P.create(k).compute(T,O)}}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=";function hex2b64(v){var _,x,E="";for(_=0;_+3<=v.length;_+=3)x=parseInt(v.substring(_,_+3),16),E+=b64map.charAt(x>>6)+b64map.charAt(x&63);for(_+1==v.length?(x=parseInt(v.substring(_,_+1),16),E+=b64map.charAt(x<<2)):_+2==v.length&&(x=parseInt(v.substring(_,_+2),16),E+=b64map.charAt(x>>2)+b64map.charAt((x&3)<<4));(E.length&3)>0;)E+=b64pad;return E}function b64tohex(v){var _="",x,E=0,A,P;for(x=0;x<v.length&&v.charAt(x)!=b64pad;++x)P=b64map.indexOf(v.charAt(x)),!(P<0)&&(E==0?(_+=int2char(P>>2),A=P&3,E=1):E==1?(_+=int2char(A<<2|P>>4),A=P&15,E=2):E==2?(_+=int2char(A),_+=int2char(P>>2),A=P&3,E=3):(_+=int2char(A<<2|P>>4),_+=int2char(P&15),E=0));return E==1&&(_+=int2char(A<<2)),_}function b64toBA(v){var _=b64tohex(v),x,E=new Array;for(x=0;2*x<_.length;++x)E[x]=parseInt(_.substring(2*x,2*x+2),16);return E}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/var dbits;function BigInteger$2(v,_,x){v!=null&&(typeof v=="number"?this.fromNumber(v,_,x):_==null&&typeof v!="string"?this.fromString(v,256):this.fromString(v,_))}function nbi(){return new BigInteger$2(null)}function am1(v,_,x,E,A,P){for(;--P>=0;){var T=_*this[v++]+x[E]+A;A=Math.floor(T/67108864),x[E++]=T&67108863}return A}function am2(v,_,x,E,A,P){for(var T=_&32767,O=_>>15;--P>=0;){var k=this[v]&32767,C=this[v++]>>15,U=O*k+C*T;k=T*k+((U&32767)<<15)+x[E]+(A&1073741823),A=(k>>>30)+(U>>>15)+O*C+(A>>>30),x[E++]=k&1073741823}return A}function am3(v,_,x,E,A,P){for(var T=_&16383,O=_>>14;--P>=0;){var k=this[v]&16383,C=this[v++]>>14,U=O*k+C*T;k=T*k+((U&16383)<<14)+x[E]+A,A=(k>>28)+(U>>14)+O*C,x[E++]=k&268435455}return A}navigator$1.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator$1.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28),BigInteger$2.prototype.DB=dbits,BigInteger$2.prototype.DM=(1<<dbits)-1,BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP),BigInteger$2.prototype.F1=BI_FP-dbits,BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(v){return BI_RM.charAt(v)}function intAt(v,_){var x=BI_RC[v.charCodeAt(_)];return x??-1}function bnpCopyTo(v){for(var _=this.t-1;_>=0;--_)v[_]=this[_];v.t=this.t,v.s=this.s}function bnpFromInt(v){this.t=1,this.s=v<0?-1:0,v>0?this[0]=v:v<-1?this[0]=v+this.DV:this.t=0}function nbv(v){var _=nbi();return _.fromInt(v),_}function bnpFromString(v,_){var x;if(_==16)x=4;else if(_==8)x=3;else if(_==256)x=8;else if(_==2)x=1;else if(_==32)x=5;else if(_==4)x=2;else{this.fromRadix(v,_);return}this.t=0,this.s=0;for(var E=v.length,A=!1,P=0;--E>=0;){var T=x==8?v[E]&255:intAt(v,E);if(T<0){v.charAt(E)=="-"&&(A=!0);continue}A=!1,P==0?this[this.t++]=T:P+x>this.DB?(this[this.t-1]|=(T&(1<<this.DB-P)-1)<<P,this[this.t++]=T>>this.DB-P):this[this.t-1]|=T<<P,P+=x,P>=this.DB&&(P-=this.DB)}x==8&&v[0]&128&&(this.s=-1,P>0&&(this[this.t-1]|=(1<<this.DB-P)-1<<P)),this.clamp(),A&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var v=this.s&this.DM;this.t>0&&this[this.t-1]==v;)--this.t}function bnToString(v){if(this.s<0)return"-"+this.negate().toString(v);var _;if(v==16)_=4;else if(v==8)_=3;else if(v==2)_=1;else if(v==32)_=5;else if(v==4)_=2;else return this.toRadix(v);var x=(1<<_)-1,E,A=!1,P="",T=this.t,O=this.DB-T*this.DB%_;if(T-- >0)for(O<this.DB&&(E=this[T]>>O)>0&&(A=!0,P=int2char(E));T>=0;)O<_?(E=(this[T]&(1<<O)-1)<<_-O,E|=this[--T]>>(O+=this.DB-_)):(E=this[T]>>(O-=_)&x,O<=0&&(O+=this.DB,--T)),E>0&&(A=!0),A&&(P+=int2char(E));return A?P:"0"}function bnNegate(){var v=nbi();return BigInteger$2.ZERO.subTo(this,v),v}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(v){var _=this.s-v.s;if(_!=0)return _;var x=this.t;if(_=x-v.t,_!=0)return this.s<0?-_:_;for(;--x>=0;)if((_=this[x]-v[x])!=0)return _;return 0}function nbits(v){var _=1,x;return(x=v>>>16)!=0&&(v=x,_+=16),(x=v>>8)!=0&&(v=x,_+=8),(x=v>>4)!=0&&(v=x,_+=4),(x=v>>2)!=0&&(v=x,_+=2),(x=v>>1)!=0&&(v=x,_+=1),_}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(v,_){var x;for(x=this.t-1;x>=0;--x)_[x+v]=this[x];for(x=v-1;x>=0;--x)_[x]=0;_.t=this.t+v,_.s=this.s}function bnpDRShiftTo(v,_){for(var x=v;x<this.t;++x)_[x-v]=this[x];_.t=Math.max(this.t-v,0),_.s=this.s}function bnpLShiftTo(v,_){var x=v%this.DB,E=this.DB-x,A=(1<<E)-1,P=Math.floor(v/this.DB),T=this.s<<x&this.DM,O;for(O=this.t-1;O>=0;--O)_[O+P+1]=this[O]>>E|T,T=(this[O]&A)<<x;for(O=P-1;O>=0;--O)_[O]=0;_[P]=T,_.t=this.t+P+1,_.s=this.s,_.clamp()}function bnpRShiftTo(v,_){_.s=this.s;var x=Math.floor(v/this.DB);if(x>=this.t){_.t=0;return}var E=v%this.DB,A=this.DB-E,P=(1<<E)-1;_[0]=this[x]>>E;for(var T=x+1;T<this.t;++T)_[T-x-1]|=(this[T]&P)<<A,_[T-x]=this[T]>>E;E>0&&(_[this.t-x-1]|=(this.s&P)<<A),_.t=this.t-x,_.clamp()}function bnpSubTo(v,_){for(var x=0,E=0,A=Math.min(v.t,this.t);x<A;)E+=this[x]-v[x],_[x++]=E&this.DM,E>>=this.DB;if(v.t<this.t){for(E-=v.s;x<this.t;)E+=this[x],_[x++]=E&this.DM,E>>=this.DB;E+=this.s}else{for(E+=this.s;x<v.t;)E-=v[x],_[x++]=E&this.DM,E>>=this.DB;E-=v.s}_.s=E<0?-1:0,E<-1?_[x++]=this.DV+E:E>0&&(_[x++]=E),_.t=x,_.clamp()}function bnpMultiplyTo(v,_){var x=this.abs(),E=v.abs(),A=x.t;for(_.t=A+E.t;--A>=0;)_[A]=0;for(A=0;A<E.t;++A)_[A+x.t]=x.am(0,E[A],_,A,0,x.t);_.s=0,_.clamp(),this.s!=v.s&&BigInteger$2.ZERO.subTo(_,_)}function bnpSquareTo(v){for(var _=this.abs(),x=v.t=2*_.t;--x>=0;)v[x]=0;for(x=0;x<_.t-1;++x){var E=_.am(x,_[x],v,2*x,0,1);(v[x+_.t]+=_.am(x+1,2*_[x],v,2*x+1,E,_.t-x-1))>=_.DV&&(v[x+_.t]-=_.DV,v[x+_.t+1]=1)}v.t>0&&(v[v.t-1]+=_.am(x,_[x],v,2*x,0,1)),v.s=0,v.clamp()}function bnpDivRemTo(v,_,x){var E=v.abs();if(!(E.t<=0)){var A=this.abs();if(A.t<E.t){_!=null&&_.fromInt(0),x!=null&&this.copyTo(x);return}x==null&&(x=nbi());var P=nbi(),T=this.s,O=v.s,k=this.DB-nbits(E[E.t-1]);k>0?(E.lShiftTo(k,P),A.lShiftTo(k,x)):(E.copyTo(P),A.copyTo(x));var C=P.t,U=P[C-1];if(U!=0){var N=U*(1<<this.F1)+(C>1?P[C-2]>>this.F2:0),H=this.FV/N,D=(1<<this.F1)/N,j=1<<this.F2,V=x.t,X=V-C,re=_??nbi();for(P.dlShiftTo(X,re),x.compareTo(re)>=0&&(x[x.t++]=1,x.subTo(re,x)),BigInteger$2.ONE.dlShiftTo(C,re),re.subTo(P,P);P.t<C;)P[P.t++]=0;for(;--X>=0;){var ee=x[--V]==U?this.DM:Math.floor(x[V]*H+(x[V-1]+j)*D);if((x[V]+=P.am(0,ee,x,X,0,C))<ee)for(P.dlShiftTo(X,re),x.subTo(re,x);x[V]<--ee;)x.subTo(re,x)}_!=null&&(x.drShiftTo(C,_),T!=O&&BigInteger$2.ZERO.subTo(_,_)),x.t=C,x.clamp(),k>0&&x.rShiftTo(k,x),T<0&&BigInteger$2.ZERO.subTo(x,x)}}}function bnMod(v){var _=nbi();return this.abs().divRemTo(v,null,_),this.s<0&&_.compareTo(BigInteger$2.ZERO)>0&&v.subTo(_,_),_}function Classic(v){this.m=v}function cConvert(v){return v.s<0||v.compareTo(this.m)>=0?v.mod(this.m):v}function cRevert(v){return v}function cReduce(v){v.divRemTo(this.m,null,v)}function cMulTo(v,_,x){v.multiplyTo(_,x),this.reduce(x)}function cSqrTo(v,_){v.squareTo(_),this.reduce(_)}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var v=this[0];if(!(v&1))return 0;var _=v&3;return _=_*(2-(v&15)*_)&15,_=_*(2-(v&255)*_)&255,_=_*(2-((v&65535)*_&65535))&65535,_=_*(2-v*_%this.DV)%this.DV,_>0?this.DV-_:-_}function Montgomery(v){this.m=v,this.mp=v.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<v.DB-15)-1,this.mt2=2*v.t}function montConvert(v){var _=nbi();return v.abs().dlShiftTo(this.m.t,_),_.divRemTo(this.m,null,_),v.s<0&&_.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(_,_),_}function montRevert(v){var _=nbi();return v.copyTo(_),this.reduce(_),_}function montReduce(v){for(;v.t<=this.mt2;)v[v.t++]=0;for(var _=0;_<this.m.t;++_){var x=v[_]&32767,E=x*this.mpl+((x*this.mph+(v[_]>>15)*this.mpl&this.um)<<15)&v.DM;for(x=_+this.m.t,v[x]+=this.m.am(0,E,v,_,0,this.m.t);v[x]>=v.DV;)v[x]-=v.DV,v[++x]++}v.clamp(),v.drShiftTo(this.m.t,v),v.compareTo(this.m)>=0&&v.subTo(this.m,v)}function montSqrTo(v,_){v.squareTo(_),this.reduce(_)}function montMulTo(v,_,x){v.multiplyTo(_,x),this.reduce(x)}Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(v,_){if(v>4294967295||v<1)return BigInteger$2.ONE;var x=nbi(),E=nbi(),A=_.convert(this),P=nbits(v)-1;for(A.copyTo(x);--P>=0;)if(_.sqrTo(x,E),(v&1<<P)>0)_.mulTo(E,A,x);else{var T=x;x=E,E=T}return _.revert(x)}function bnModPowInt(v,_){var x;return v<256||_.isEven()?x=new Classic(_):x=new Montgomery(_),this.exp(v,x)}BigInteger$2.prototype.copyTo=bnpCopyTo,BigInteger$2.prototype.fromInt=bnpFromInt,BigInteger$2.prototype.fromString=bnpFromString,BigInteger$2.prototype.clamp=bnpClamp,BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo,BigInteger$2.prototype.drShiftTo=bnpDRShiftTo,BigInteger$2.prototype.lShiftTo=bnpLShiftTo,BigInteger$2.prototype.rShiftTo=bnpRShiftTo,BigInteger$2.prototype.subTo=bnpSubTo,BigInteger$2.prototype.multiplyTo=bnpMultiplyTo,BigInteger$2.prototype.squareTo=bnpSquareTo,BigInteger$2.prototype.divRemTo=bnpDivRemTo,BigInteger$2.prototype.invDigit=bnpInvDigit,BigInteger$2.prototype.isEven=bnpIsEven,BigInteger$2.prototype.exp=bnpExp,BigInteger$2.prototype.toString=bnToString,BigInteger$2.prototype.negate=bnNegate,BigInteger$2.prototype.abs=bnAbs,BigInteger$2.prototype.compareTo=bnCompareTo,BigInteger$2.prototype.bitLength=bnBitLength,BigInteger$2.prototype.mod=bnMod,BigInteger$2.prototype.modPowInt=bnModPowInt,BigInteger$2.ZERO=nbv(0),BigInteger$2.ONE=nbv(1);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function bnClone(){var v=nbi();return this.copyTo(v),v}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(v){return Math.floor(Math.LN2*this.DB/Math.log(v))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function bnpToRadix(v){if(v==null&&(v=10),this.signum()==0||v<2||v>36)return"0";var _=this.chunkSize(v),x=Math.pow(v,_),E=nbv(x),A=nbi(),P=nbi(),T="";for(this.divRemTo(E,A,P);A.signum()>0;)T=(x+P.intValue()).toString(v).substr(1)+T,A.divRemTo(E,A,P);return P.intValue().toString(v)+T}function bnpFromRadix(v,_){this.fromInt(0),_==null&&(_=10);for(var x=this.chunkSize(_),E=Math.pow(_,x),A=!1,P=0,T=0,O=0;O<v.length;++O){var k=intAt(v,O);if(k<0){v.charAt(O)=="-"&&this.signum()==0&&(A=!0);continue}T=_*T+k,++P>=x&&(this.dMultiply(E),this.dAddOffset(T,0),P=0,T=0)}P>0&&(this.dMultiply(Math.pow(_,P)),this.dAddOffset(T,0)),A&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(v,_,x){if(typeof _=="number")if(v<2)this.fromInt(1);else for(this.fromNumber(v,x),this.testBit(v-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(v-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_);)this.dAddOffset(2,0),this.bitLength()>v&&this.subTo(BigInteger$2.ONE.shiftLeft(v-1),this);else{var E=new Array,A=v&7;E.length=(v>>3)+1,_.nextBytes(E),A>0?E[0]&=(1<<A)-1:E[0]=0,this.fromString(E,256)}}function bnToByteArray(){var v=this.t,_=new Array;_[0]=this.s;var x=this.DB-v*this.DB%8,E,A=0;if(v-- >0)for(x<this.DB&&(E=this[v]>>x)!=(this.s&this.DM)>>x&&(_[A++]=E|this.s<<this.DB-x);v>=0;)x<8?(E=(this[v]&(1<<x)-1)<<8-x,E|=this[--v]>>(x+=this.DB-8)):(E=this[v]>>(x-=8)&255,x<=0&&(x+=this.DB,--v)),E&128&&(E|=-256),A==0&&(this.s&128)!=(E&128)&&++A,(A>0||E!=this.s)&&(_[A++]=E);return _}function bnEquals(v){return this.compareTo(v)==0}function bnMin(v){return this.compareTo(v)<0?this:v}function bnMax(v){return this.compareTo(v)>0?this:v}function bnpBitwiseTo(v,_,x){var E,A,P=Math.min(v.t,this.t);for(E=0;E<P;++E)x[E]=_(this[E],v[E]);if(v.t<this.t){for(A=v.s&this.DM,E=P;E<this.t;++E)x[E]=_(this[E],A);x.t=this.t}else{for(A=this.s&this.DM,E=P;E<v.t;++E)x[E]=_(A,v[E]);x.t=v.t}x.s=_(this.s,v.s),x.clamp()}function op_and(v,_){return v&_}function bnAnd(v){var _=nbi();return this.bitwiseTo(v,op_and,_),_}function op_or(v,_){return v|_}function bnOr(v){var _=nbi();return this.bitwiseTo(v,op_or,_),_}function op_xor(v,_){return v^_}function bnXor(v){var _=nbi();return this.bitwiseTo(v,op_xor,_),_}function op_andnot(v,_){return v&~_}function bnAndNot(v){var _=nbi();return this.bitwiseTo(v,op_andnot,_),_}function bnNot(){for(var v=nbi(),_=0;_<this.t;++_)v[_]=this.DM&~this[_];return v.t=this.t,v.s=~this.s,v}function bnShiftLeft(v){var _=nbi();return v<0?this.rShiftTo(-v,_):this.lShiftTo(v,_),_}function bnShiftRight(v){var _=nbi();return v<0?this.lShiftTo(-v,_):this.rShiftTo(v,_),_}function lbit(v){if(v==0)return-1;var _=0;return v&65535||(v>>=16,_+=16),v&255||(v>>=8,_+=8),v&15||(v>>=4,_+=4),v&3||(v>>=2,_+=2),v&1||++_,_}function bnGetLowestSetBit(){for(var v=0;v<this.t;++v)if(this[v]!=0)return v*this.DB+lbit(this[v]);return this.s<0?this.t*this.DB:-1}function cbit(v){for(var _=0;v!=0;)v&=v-1,++_;return _}function bnBitCount(){for(var v=0,_=this.s&this.DM,x=0;x<this.t;++x)v+=cbit(this[x]^_);return v}function bnTestBit(v){var _=Math.floor(v/this.DB);return _>=this.t?this.s!=0:(this[_]&1<<v%this.DB)!=0}function bnpChangeBit(v,_){var x=BigInteger$2.ONE.shiftLeft(v);return this.bitwiseTo(x,_,x),x}function bnSetBit(v){return this.changeBit(v,op_or)}function bnClearBit(v){return this.changeBit(v,op_andnot)}function bnFlipBit(v){return this.changeBit(v,op_xor)}function bnpAddTo(v,_){for(var x=0,E=0,A=Math.min(v.t,this.t);x<A;)E+=this[x]+v[x],_[x++]=E&this.DM,E>>=this.DB;if(v.t<this.t){for(E+=v.s;x<this.t;)E+=this[x],_[x++]=E&this.DM,E>>=this.DB;E+=this.s}else{for(E+=this.s;x<v.t;)E+=v[x],_[x++]=E&this.DM,E>>=this.DB;E+=v.s}_.s=E<0?-1:0,E>0?_[x++]=E:E<-1&&(_[x++]=this.DV+E),_.t=x,_.clamp()}function bnAdd(v){var _=nbi();return this.addTo(v,_),_}function bnSubtract(v){var _=nbi();return this.subTo(v,_),_}function bnMultiply(v){var _=nbi();return this.multiplyTo(v,_),_}function bnSquare(){var v=nbi();return this.squareTo(v),v}function bnDivide(v){var _=nbi();return this.divRemTo(v,_,null),_}function bnRemainder(v){var _=nbi();return this.divRemTo(v,null,_),_}function bnDivideAndRemainder(v){var _=nbi(),x=nbi();return this.divRemTo(v,_,x),new Array(_,x)}function bnpDMultiply(v){this[this.t]=this.am(0,v-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(v,_){if(v!=0){for(;this.t<=_;)this[this.t++]=0;for(this[_]+=v;this[_]>=this.DV;)this[_]-=this.DV,++_>=this.t&&(this[this.t++]=0),++this[_]}}function NullExp(){}function nNop(v){return v}function nMulTo(v,_,x){v.multiplyTo(_,x)}function nSqrTo(v,_){v.squareTo(_)}NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo;function bnPow(v){return this.exp(v,new NullExp)}function bnpMultiplyLowerTo(v,_,x){var E=Math.min(this.t+v.t,_);for(x.s=0,x.t=E;E>0;)x[--E]=0;var A;for(A=x.t-this.t;E<A;++E)x[E+this.t]=this.am(0,v[E],x,E,0,this.t);for(A=Math.min(v.t,_);E<A;++E)this.am(0,v[E],x,E,0,_-E);x.clamp()}function bnpMultiplyUpperTo(v,_,x){--_;var E=x.t=this.t+v.t-_;for(x.s=0;--E>=0;)x[E]=0;for(E=Math.max(_-this.t,0);E<v.t;++E)x[this.t+E-_]=this.am(_-E,v[E],x,0,0,this.t+E-_);x.clamp(),x.drShiftTo(1,x)}function Barrett(v){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*v.t,this.r2),this.mu=this.r2.divide(v),this.m=v}function barrettConvert(v){if(v.s<0||v.t>2*this.m.t)return v.mod(this.m);if(v.compareTo(this.m)<0)return v;var _=nbi();return v.copyTo(_),this.reduce(_),_}function barrettRevert(v){return v}function barrettReduce(v){for(v.drShiftTo(this.m.t-1,this.r2),v.t>this.m.t+1&&(v.t=this.m.t+1,v.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);v.compareTo(this.r2)<0;)v.dAddOffset(1,this.m.t+1);for(v.subTo(this.r2,v);v.compareTo(this.m)>=0;)v.subTo(this.m,v)}function barrettSqrTo(v,_){v.squareTo(_),this.reduce(_)}function barrettMulTo(v,_,x){v.multiplyTo(_,x),this.reduce(x)}Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(v,_){var x=v.bitLength(),E,A=nbv(1),P;if(x<=0)return A;x<18?E=1:x<48?E=3:x<144?E=4:x<768?E=5:E=6,x<8?P=new Classic(_):_.isEven()?P=new Barrett(_):P=new Montgomery(_);var T=new Array,O=3,k=E-1,C=(1<<E)-1;if(T[1]=P.convert(this),E>1){var U=nbi();for(P.sqrTo(T[1],U);O<=C;)T[O]=nbi(),P.mulTo(U,T[O-2],T[O]),O+=2}var N=v.t-1,H,D=!0,j=nbi(),V;for(x=nbits(v[N])-1;N>=0;){for(x>=k?H=v[N]>>x-k&C:(H=(v[N]&(1<<x+1)-1)<<k-x,N>0&&(H|=v[N-1]>>this.DB+x-k)),O=E;!(H&1);)H>>=1,--O;if((x-=O)<0&&(x+=this.DB,--N),D)T[H].copyTo(A),D=!1;else{for(;O>1;)P.sqrTo(A,j),P.sqrTo(j,A),O-=2;O>0?P.sqrTo(A,j):(V=A,A=j,j=V),P.mulTo(j,T[H],A)}for(;N>=0&&!(v[N]&1<<x);)P.sqrTo(A,j),V=A,A=j,j=V,--x<0&&(x=this.DB-1,--N)}return P.revert(A)}function bnGCD(v){var _=this.s<0?this.negate():this.clone(),x=v.s<0?v.negate():v.clone();if(_.compareTo(x)<0){var E=_;_=x,x=E}var A=_.getLowestSetBit(),P=x.getLowestSetBit();if(P<0)return _;for(A<P&&(P=A),P>0&&(_.rShiftTo(P,_),x.rShiftTo(P,x));_.signum()>0;)(A=_.getLowestSetBit())>0&&_.rShiftTo(A,_),(A=x.getLowestSetBit())>0&&x.rShiftTo(A,x),_.compareTo(x)>=0?(_.subTo(x,_),_.rShiftTo(1,_)):(x.subTo(_,x),x.rShiftTo(1,x));return P>0&&x.lShiftTo(P,x),x}function bnpModInt(v){if(v<=0)return 0;var _=this.DV%v,x=this.s<0?v-1:0;if(this.t>0)if(_==0)x=this[0]%v;else for(var E=this.t-1;E>=0;--E)x=(_*x+this[E])%v;return x}function bnModInverse(v){var _=v.isEven();if(this.isEven()&&_||v.signum()==0)return BigInteger$2.ZERO;for(var x=v.clone(),E=this.clone(),A=nbv(1),P=nbv(0),T=nbv(0),O=nbv(1);x.signum()!=0;){for(;x.isEven();)x.rShiftTo(1,x),_?((!A.isEven()||!P.isEven())&&(A.addTo(this,A),P.subTo(v,P)),A.rShiftTo(1,A)):P.isEven()||P.subTo(v,P),P.rShiftTo(1,P);for(;E.isEven();)E.rShiftTo(1,E),_?((!T.isEven()||!O.isEven())&&(T.addTo(this,T),O.subTo(v,O)),T.rShiftTo(1,T)):O.isEven()||O.subTo(v,O),O.rShiftTo(1,O);x.compareTo(E)>=0?(x.subTo(E,x),_&&A.subTo(T,A),P.subTo(O,P)):(E.subTo(x,E),_&&T.subTo(A,T),O.subTo(P,O))}if(E.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(O.compareTo(v)>=0)return O.subtract(v);if(O.signum()<0)O.addTo(v,O);else return O;return O.signum()<0?O.add(v):O}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(v){var _,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(_=0;_<lowprimes.length;++_)if(x[0]==lowprimes[_])return!0;return!1}if(x.isEven())return!1;for(_=1;_<lowprimes.length;){for(var E=lowprimes[_],A=_+1;A<lowprimes.length&&E<lplim;)E*=lowprimes[A++];for(E=x.modInt(E);_<A;)if(E%lowprimes[_++]==0)return!1}return x.millerRabin(v)}function bnpMillerRabin(v){var _=this.subtract(BigInteger$2.ONE),x=_.getLowestSetBit();if(x<=0)return!1;var E=_.shiftRight(x);v=v+1>>1,v>lowprimes.length&&(v=lowprimes.length);for(var A=nbi(),P=0;P<v;++P){A.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var T=A.modPow(E,this);if(T.compareTo(BigInteger$2.ONE)!=0&&T.compareTo(_)!=0){for(var O=1;O++<x&&T.compareTo(_)!=0;)if(T=T.modPowInt(2,this),T.compareTo(BigInteger$2.ONE)==0)return!1;if(T.compareTo(_)!=0)return!1}}return!0}BigInteger$2.prototype.chunkSize=bnpChunkSize,BigInteger$2.prototype.toRadix=bnpToRadix,BigInteger$2.prototype.fromRadix=bnpFromRadix,BigInteger$2.prototype.fromNumber=bnpFromNumber,BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo,BigInteger$2.prototype.changeBit=bnpChangeBit,BigInteger$2.prototype.addTo=bnpAddTo,BigInteger$2.prototype.dMultiply=bnpDMultiply,BigInteger$2.prototype.dAddOffset=bnpDAddOffset,BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger$2.prototype.modInt=bnpModInt,BigInteger$2.prototype.millerRabin=bnpMillerRabin,BigInteger$2.prototype.clone=bnClone,BigInteger$2.prototype.intValue=bnIntValue,BigInteger$2.prototype.byteValue=bnByteValue,BigInteger$2.prototype.shortValue=bnShortValue,BigInteger$2.prototype.signum=bnSigNum,BigInteger$2.prototype.toByteArray=bnToByteArray,BigInteger$2.prototype.equals=bnEquals,BigInteger$2.prototype.min=bnMin,BigInteger$2.prototype.max=bnMax,BigInteger$2.prototype.and=bnAnd,BigInteger$2.prototype.or=bnOr,BigInteger$2.prototype.xor=bnXor,BigInteger$2.prototype.andNot=bnAndNot,BigInteger$2.prototype.not=bnNot,BigInteger$2.prototype.shiftLeft=bnShiftLeft,BigInteger$2.prototype.shiftRight=bnShiftRight,BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger$2.prototype.bitCount=bnBitCount,BigInteger$2.prototype.testBit=bnTestBit,BigInteger$2.prototype.setBit=bnSetBit,BigInteger$2.prototype.clearBit=bnClearBit,BigInteger$2.prototype.flipBit=bnFlipBit,BigInteger$2.prototype.add=bnAdd,BigInteger$2.prototype.subtract=bnSubtract,BigInteger$2.prototype.multiply=bnMultiply,BigInteger$2.prototype.divide=bnDivide,BigInteger$2.prototype.remainder=bnRemainder,BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger$2.prototype.modPow=bnModPow,BigInteger$2.prototype.modInverse=bnModInverse,BigInteger$2.prototype.pow=bnPow,BigInteger$2.prototype.gcd=bnGCD,BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime,BigInteger$2.prototype.square=bnSquare;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(v){var _,x,E;for(_=0;_<256;++_)this.S[_]=_;for(x=0,_=0;_<256;++_)x=x+this.S[_]+v[_%v.length]&255,E=this.S[_],this.S[_]=this.S[x],this.S[x]=E;this.i=0,this.j=0}function ARC4next(){var v;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,v=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=v,this.S[v+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour}var rng_psize=256;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var rng_state,rng_pool,rng_pptr;function rng_seed_int(v){rng_pool[rng_pptr++]^=v&255,rng_pool[rng_pptr++]^=v>>8&255,rng_pool[rng_pptr++]^=v>>16&255,rng_pool[rng_pptr++]^=v>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int(new Date().getTime())}if(rng_pool==null){rng_pool=new Array,rng_pptr=0;var t$2;if(window$1!==void 0&&(window$1.crypto!==void 0||window$1.msCrypto!==void 0)){var crypto$7=window$1.crypto||window$1.msCrypto;if(crypto$7.getRandomValues){var ua=new Uint8Array(32);for(crypto$7.getRandomValues(ua),t$2=0;t$2<32;++t$2)rng_pool[rng_pptr++]=ua[t$2]}else if(navigator$1.appName=="Netscape"&&navigator$1.appVersion<"5"){var z=window$1.crypto.random(32);for(t$2=0;t$2<z.length;++t$2)rng_pool[rng_pptr++]=z.charCodeAt(t$2)&255}}for(;rng_pptr<rng_psize;)t$2=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t$2>>>8,rng_pool[rng_pptr++]=t$2&255;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(rng_state==null){for(rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(v){var _;for(_=0;_<v.length;++_)v[_]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function parseBigInt(v,_){return new BigInteger$2(v,_)}function pkcs1pad2(v,_){if(_<v.length+11)throw"Message too long for RSA";for(var x=new Array,E=v.length-1;E>=0&&_>0;){var A=v.charCodeAt(E--);A<128?x[--_]=A:A>127&&A<2048?(x[--_]=A&63|128,x[--_]=A>>6|192):(x[--_]=A&63|128,x[--_]=A>>6&63|128,x[--_]=A>>12|224)}x[--_]=0;for(var P=new SecureRandom,T=new Array;_>2;){for(T[0]=0;T[0]==0;)P.nextBytes(T);x[--_]=T[0]}return x[--_]=2,x[--_]=0,new BigInteger$2(x)}function oaep_mgf1_arr(v,_,x){for(var E="",A=0;E.length<_;)E+=x(String.fromCharCode.apply(String,v.concat([(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255]))),A+=1;return E}function oaep_pad(v,_,x,E){var A=KJUR.crypto.MessageDigest,P=KJUR.crypto.Util,T=null;if(x||(x="sha1"),typeof x=="string"&&(T=A.getCanonicalAlgName(x),E=A.getHashLength(T),x=function(V){return hextorstr(P.hashHex(rstrtohex(V),T))}),v.length+2*E+2>_)throw"Message too long for RSA";var O="",k;for(k=0;k<_-v.length-2*E-2;k+=1)O+="\0";var C=x("")+O+""+v,U=new Array(E);new SecureRandom().nextBytes(U);var N=oaep_mgf1_arr(U,C.length,x),H=[];for(k=0;k<C.length;k+=1)H[k]=C.charCodeAt(k)^N.charCodeAt(k);var D=oaep_mgf1_arr(H,U.length,x),j=[0];for(k=0;k<U.length;k+=1)j[k+1]=U[k]^D.charCodeAt(k);return new BigInteger$2(j.concat(H))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(v,_){if(this.isPublic=!0,this.isPrivate=!1,typeof v!="string")this.n=v,this.e=_;else if(v!=null&&_!=null&&v.length>0&&_.length>0)this.n=parseBigInt(v,16),this.e=parseInt(_,16);else throw"Invalid RSA public key"}function RSADoPublic(v){return v.modPowInt(this.e,this.n)}function RSAEncrypt(v){var _=pkcs1pad2(v,this.n.bitLength()+7>>3);if(_==null)return null;var x=this.doPublic(_);if(x==null)return null;var E=x.toString(16);return E.length&1?"0"+E:E}function RSAEncryptOAEP(v,_,x){var E=this.n.bitLength()+7>>3,A=oaep_pad(v,E,_,x);if(A==null)return null;var P=this.doPublic(A);if(P==null)return null;for(var T=P.toString(16);T.length<E*2;)T="0"+T;return T}RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA";/*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function pkcs1unpad2(v,_){for(var x=v.toByteArray(),E=0;E<x.length&&x[E]==0;)++E;if(x.length-E!=_-1||x[E]!=2)return null;for(++E;x[E]!=0;)if(++E>=x.length)return null;for(var A="";++E<x.length;){var P=x[E]&255;P<128?A+=String.fromCharCode(P):P>191&&P<224?(A+=String.fromCharCode((P&31)<<6|x[E+1]&63),++E):(A+=String.fromCharCode((P&15)<<12|(x[E+1]&63)<<6|x[E+2]&63),E+=2)}return A}function oaep_mgf1_str(v,_,x){for(var E="",A=0;E.length<_;)E+=x(v+String.fromCharCode.apply(String,[(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255])),A+=1;return E}function oaep_unpad(v,_,x,E){var A=KJUR.crypto.MessageDigest,P=KJUR.crypto.Util,T=null;x||(x="sha1"),typeof x=="string"&&(T=A.getCanonicalAlgName(x),E=A.getHashLength(T),x=function(X){return hextorstr(P.hashHex(rstrtohex(X),T))}),v=v.toByteArray();var N;for(N=0;N<v.length;N+=1)v[N]&=255;for(;v.length<_;)v.unshift(0);if(v=String.fromCharCode.apply(String,v),v.length<2*E+2)throw"Cipher too short";var O=v.substr(1,E),k=v.substr(E+1),C=oaep_mgf1_str(k,E,x),U=[],N;for(N=0;N<O.length;N+=1)U[N]=O.charCodeAt(N)^C.charCodeAt(N);var H=oaep_mgf1_str(String.fromCharCode.apply(String,U),v.length-E,x),D=[];for(N=0;N<k.length;N+=1)D[N]=k.charCodeAt(N)^H.charCodeAt(N);if(D=String.fromCharCode.apply(String,D),D.substr(0,E)!==x(""))throw"Hash mismatch";D=D.substr(E);var j=D.indexOf(""),V=j!=-1?D.substr(0,j).lastIndexOf("\0"):-1;if(V+1!=j)throw"Malformed data";return D.substr(j+1)}function RSASetPrivate(v,_,x){if(this.isPrivate=!0,typeof v!="string")this.n=v,this.e=_,this.d=x;else if(v!=null&&_!=null&&v.length>0&&_.length>0)this.n=parseBigInt(v,16),this.e=parseInt(_,16),this.d=parseBigInt(x,16);else throw"Invalid RSA private key"}function RSASetPrivateEx(v,_,x,E,A,P,T,O){if(this.isPrivate=!0,this.isPublic=!1,v==null)throw"RSASetPrivateEx N == null";if(_==null)throw"RSASetPrivateEx E == null";if(v.length==0)throw"RSASetPrivateEx N.length == 0";if(_.length==0)throw"RSASetPrivateEx E.length == 0";if(v!=null&&_!=null&&v.length>0&&_.length>0)this.n=parseBigInt(v,16),this.e=parseInt(_,16),this.d=parseBigInt(x,16),this.p=parseBigInt(E,16),this.q=parseBigInt(A,16),this.dmp1=parseBigInt(P,16),this.dmq1=parseBigInt(T,16),this.coeff=parseBigInt(O,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function RSAGenerate(v,_){var x=new SecureRandom,E=v>>1;this.e=parseInt(_,16);for(var A=new BigInteger$2(_,16),P=v/2-100,T=BigInteger$2.ONE.shiftLeft(P);;){for(;this.p=new BigInteger$2(v-E,1,x),!(this.p.subtract(BigInteger$2.ONE).gcd(A).compareTo(BigInteger$2.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new BigInteger$2(E,1,x),!(this.q.subtract(BigInteger$2.ONE).gcd(A).compareTo(BigInteger$2.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var O=this.p;this.p=this.q,this.q=O}var k=this.q.subtract(this.p).abs();if(!(k.bitLength()<P||k.compareTo(T)<=0)){var C=this.p.subtract(BigInteger$2.ONE),U=this.q.subtract(BigInteger$2.ONE),N=C.multiply(U);if(N.gcd(A).compareTo(BigInteger$2.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==v)){this.d=A.modInverse(N),this.dmp1=this.d.mod(C),this.dmq1=this.d.mod(U),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function RSADoPrivate(v){if(this.p==null||this.q==null)return v.modPow(this.d,this.n);for(var _=v.mod(this.p).modPow(this.dmp1,this.p),x=v.mod(this.q).modPow(this.dmq1,this.q);_.compareTo(x)<0;)_=_.add(this.p);return _.subtract(x).multiply(this.coeff).mod(this.p).multiply(this.q).add(x)}function RSADecrypt(v){if(v.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var _=parseBigInt(v,16),x=this.doPrivate(_);return x==null?null:pkcs1unpad2(x,this.n.bitLength()+7>>3)}function RSADecryptOAEP(v,_,x){if(v.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var E=parseBigInt(v,16),A=this.doPrivate(E);return A==null?null:oaep_unpad(A,this.n.bitLength()+7>>3,_,x)}RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function ECFieldElementFp(v,_){this.x=_,this.q=v}function feFpEquals(v){return v==this?!0:this.q.equals(v.q)&&this.x.equals(v.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(v){return new ECFieldElementFp(this.q,this.x.add(v.toBigInteger()).mod(this.q))}function feFpSubtract(v){return new ECFieldElementFp(this.q,this.x.subtract(v.toBigInteger()).mod(this.q))}function feFpMultiply(v){return new ECFieldElementFp(this.q,this.x.multiply(v.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(v){return new ECFieldElementFp(this.q,this.x.multiply(v.toBigInteger().modInverse(this.q)).mod(this.q))}ECFieldElementFp.prototype.equals=feFpEquals,ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger,ECFieldElementFp.prototype.negate=feFpNegate,ECFieldElementFp.prototype.add=feFpAdd,ECFieldElementFp.prototype.subtract=feFpSubtract,ECFieldElementFp.prototype.multiply=feFpMultiply,ECFieldElementFp.prototype.square=feFpSquare,ECFieldElementFp.prototype.divide=feFpDivide,ECFieldElementFp.prototype.sqrt=function(){return new ECFieldElementFp(this.q,this.x.sqrt().mod(this.q))};function ECPointFp(v,_,x,E){this.curve=v,this.x=_,this.y=x,E==null?this.z=BigInteger$2.ONE:this.z=E,this.zinv=null}function pointFpGetX(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(v){if(v==this)return!0;if(this.isInfinity())return v.isInfinity();if(v.isInfinity())return this.isInfinity();var _,x;return _=v.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(v.z)).mod(this.curve.q),_.equals(BigInteger$2.ZERO)?(x=v.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(v.z)).mod(this.curve.q),x.equals(BigInteger$2.ZERO)):!1}function pointFpIsInfinity(){return this.x==null&&this.y==null?!0:this.z.equals(BigInteger$2.ZERO)&&!this.y.toBigInteger().equals(BigInteger$2.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(v){if(this.isInfinity())return v;if(v.isInfinity())return this;var _=v.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(v.z)).mod(this.curve.q),x=v.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(v.z)).mod(this.curve.q);if(BigInteger$2.ZERO.equals(x))return BigInteger$2.ZERO.equals(_)?this.twice():this.curve.getInfinity();var E=new BigInteger$2("3"),A=this.x.toBigInteger(),P=this.y.toBigInteger();v.x.toBigInteger(),v.y.toBigInteger();var T=x.square(),O=T.multiply(x),k=A.multiply(T),C=_.square().multiply(this.z),U=C.subtract(k.shiftLeft(1)).multiply(v.z).subtract(O).multiply(x).mod(this.curve.q),N=k.multiply(E).multiply(_).subtract(P.multiply(O)).subtract(C.multiply(_)).multiply(v.z).add(_.multiply(O)).mod(this.curve.q),H=O.multiply(this.z).multiply(v.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(U),this.curve.fromBigInteger(N),H)}function pointFpTwice(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var v=new BigInteger$2("3"),_=this.x.toBigInteger(),x=this.y.toBigInteger(),E=x.multiply(this.z),A=E.multiply(x).mod(this.curve.q),P=this.curve.a.toBigInteger(),T=_.square().multiply(v);BigInteger$2.ZERO.equals(P)||(T=T.add(this.z.square().multiply(P))),T=T.mod(this.curve.q);var O=T.square().subtract(_.shiftLeft(3).multiply(A)).shiftLeft(1).multiply(E).mod(this.curve.q),k=T.multiply(v).multiply(_).subtract(A.shiftLeft(1)).shiftLeft(2).multiply(A).subtract(T.square().multiply(T)).mod(this.curve.q),C=E.square().multiply(E).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(O),this.curve.fromBigInteger(k),C)}function pointFpMultiply(v){if(this.isInfinity())return this;if(v.signum()==0)return this.curve.getInfinity();var _=v,x=_.multiply(new BigInteger$2("3")),E=this.negate(),A=this,P=this.curve.q.subtract(v),T=P.multiply(new BigInteger$2("3")),O=new ECPointFp(this.curve,this.x,this.y),k=O.negate(),C;for(C=x.bitLength()-2;C>0;--C){A=A.twice();var U=x.testBit(C),N=_.testBit(C);U!=N&&(A=A.add(U?this:E))}for(C=T.bitLength()-2;C>0;--C){O=O.twice();var H=T.testBit(C),D=P.testBit(C);H!=D&&(O=O.add(H?O:k))}return A}function pointFpMultiplyTwo(v,_,x){var E;v.bitLength()>x.bitLength()?E=v.bitLength()-1:E=x.bitLength()-1;for(var A=this.curve.getInfinity(),P=this.add(_);E>=0;)A=A.twice(),v.testBit(E)?x.testBit(E)?A=A.add(P):A=A.add(this):x.testBit(E)&&(A=A.add(_)),--E;return A}ECPointFp.prototype.getX=pointFpGetX,ECPointFp.prototype.getY=pointFpGetY,ECPointFp.prototype.equals=pointFpEquals,ECPointFp.prototype.isInfinity=pointFpIsInfinity,ECPointFp.prototype.negate=pointFpNegate,ECPointFp.prototype.add=pointFpAdd,ECPointFp.prototype.twice=pointFpTwice,ECPointFp.prototype.multiply=pointFpMultiply,ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo;function ECCurveFp(v,_,x){this.q=v,this.a=this.fromBigInteger(_),this.b=this.fromBigInteger(x),this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(v){return v==this?!0:this.q.equals(v.q)&&this.a.equals(v.a)&&this.b.equals(v.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(v){return new ECFieldElementFp(this.q,v)}function curveFpDecodePointHex(v){switch(parseInt(v.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var _=v.substr(0,2);v.substr(2);var x=this.fromBigInteger(new BigInteger$2(k,16)),E=this.getA(),A=this.getB(),P=x.square().add(E).multiply(x).add(A),T=P.sqrt();return _=="03"&&(T=T.negate()),new ECPointFp(this,x,T);case 4:case 6:case 7:var O=(v.length-2)/2,k=v.substr(2,O),C=v.substr(O+2,O);return new ECPointFp(this,this.fromBigInteger(new BigInteger$2(k,16)),this.fromBigInteger(new BigInteger$2(C,16)));default:return null}}ECCurveFp.prototype.getQ=curveFpGetQ,ECCurveFp.prototype.getA=curveFpGetA,ECCurveFp.prototype.getB=curveFpGetB,ECCurveFp.prototype.equals=curveFpEquals,ECCurveFp.prototype.getInfinity=curveFpGetInfinity,ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger,ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex;/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(v){var _=function(P,T){var O=P.toByteArrayUnsigned();if(T<O.length)O=O.slice(O.length-T);else for(;T>O.length;)O.unshift(0);return O},x=this.getX().toBigInteger(),E=this.getY().toBigInteger(),A=_(x,32);return v?E.isEven()?A.unshift(2):A.unshift(3):(A.unshift(4),A=A.concat(_(E,32))),A},ECPointFp.decodeFrom=function(v,_){_[0];var x=_.length-1,E=_.slice(1,1+x/2),A=_.slice(1+x/2,1+x);E.unshift(0),A.unshift(0);var P=new BigInteger$2(E),T=new BigInteger$2(A);return new ECPointFp(v,v.fromBigInteger(P),v.fromBigInteger(T))},ECPointFp.decodeFromHex=function(v,_){_.substr(0,2);var x=_.length-2,E=_.substr(2,x/2),A=_.substr(2+x/2,x/2),P=new BigInteger$2(E,16),T=new BigInteger$2(A,16);return new ECPointFp(v,v.fromBigInteger(P),v.fromBigInteger(T))},ECPointFp.prototype.add2D=function(v){if(this.isInfinity())return v;if(v.isInfinity())return this;if(this.x.equals(v.x))return this.y.equals(v.y)?this.twice():this.curve.getInfinity();var _=v.x.subtract(this.x),x=v.y.subtract(this.y),E=x.divide(_),A=E.square().subtract(this.x).subtract(v.x),P=E.multiply(this.x.subtract(A)).subtract(this.y);return new ECPointFp(this.curve,A,P)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var v=this.curve.fromBigInteger(BigInteger$2.valueOf(2)),_=this.curve.fromBigInteger(BigInteger$2.valueOf(3)),x=this.x.square().multiply(_).add(this.curve.a).divide(this.y.multiply(v)),E=x.square().subtract(this.x.multiply(v)),A=x.multiply(this.x.subtract(E)).subtract(this.y);return new ECPointFp(this.curve,E,A)},ECPointFp.prototype.multiply2D=function(v){if(this.isInfinity())return this;if(v.signum()==0)return this.curve.getInfinity();var _=v,x=_.multiply(new BigInteger$2("3")),E=this.negate(),A=this,P;for(P=x.bitLength()-2;P>0;--P){A=A.twice();var T=x.testBit(P),O=_.testBit(P);T!=O&&(A=A.add2D(T?this:E))}return A},ECPointFp.prototype.isOnCurve=function(){var v=this.getX().toBigInteger(),_=this.getY().toBigInteger(),x=this.curve.getA().toBigInteger(),E=this.curve.getB().toBigInteger(),A=this.curve.getQ(),P=_.multiply(_).mod(A),T=v.multiply(v).multiply(v).add(x.multiply(v)).add(E).mod(A);return P.equals(T)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var v=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var _=this.getX().toBigInteger(),x=this.getY().toBigInteger();if(_.compareTo(BigInteger$2.ONE)<0||_.compareTo(v.subtract(BigInteger$2.ONE))>0)throw new Error("x coordinate out of bounds");if(x.compareTo(BigInteger$2.ONE)<0||x.compareTo(v.subtract(BigInteger$2.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(v).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var jsonParse=function(){var v="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",_='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',x='(?:"'+_+'*")',E=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+v+"|"+x+")","g"),A=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),P={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function T(U,N,H){return N?P[N]:String.fromCharCode(parseInt(H,16))}var O=new String(""),k="\\",C=Object.hasOwnProperty;return function(U,N){var H=U.match(E),D,j=H[0],V=!1;j==="{"?D={}:j==="["?D=[]:(D=[],V=!0);for(var X,re=[D],ee=1-V,fe=H.length;ee<fe;++ee){j=H[ee];var le;switch(j.charCodeAt(0)){default:le=re[0],le[X||le.length]=+j,X=void 0;break;case 34:if(j=j.substring(1,j.length-1),j.indexOf(k)!==-1&&(j=j.replace(A,T)),le=re[0],!X)if(le instanceof Array)X=le.length;else{X=j||O;break}le[X]=j,X=void 0;break;case 91:le=re[0],re.unshift(le[X||le.length]=[]),X=void 0;break;case 93:re.shift();break;case 102:le=re[0],le[X||le.length]=!1,X=void 0;break;case 110:le=re[0],le[X||le.length]=null,X=void 0;break;case 116:le=re[0],le[X||le.length]=!0,X=void 0;break;case 123:le=re[0],re.unshift(le[X||le.length]={}),X=void 0;break;case 125:re.shift();break}}if(V){if(re.length!==1)throw new Error;D=D[0]}else if(re.length)throw new Error;if(N){var pe=function(ie,he){var ae=ie[he];if(ae&&typeof ae=="object"){var te=null;for(var ue in ae)if(C.call(ae,ue)&&ae!==ie){var ne=pe(ae,ue);ne!==void 0?ae[ue]=ne:(te||(te=[]),te.push(ue))}if(te)for(var J=te.length;--J>=0;)delete ae[te[J]]}return N.call(ie,he,ae)};D=pe({"":D},"")}return D}}();(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(v){var _=v.toString(16);return _.length%2==1&&(_="0"+_),_},this.bigIntToMinTwosComplementsHex=function(v){var _=v.toString(16);if(_.substr(0,1)!="-")_.length%2==1?_="0"+_:_.match(/^[0-7]/)||(_="00"+_);else{var x=_.substr(1),E=x.length;E%2==1?E+=1:_.match(/^[0-7]/)||(E+=2);for(var A="",P=0;P<E;P++)A+="f";var T=new BigInteger$2(A,16),O=T.xor(v).add(BigInteger$2.ONE);_=O.toString(16).replace(/^-/,"")}return _},this.getPEMStringFromHex=function(v,_){return hextopem(v,_)},this.newObject=function(v){var _=KJUR,x=_.asn1,E=x.ASN1Object,A=x.DERBoolean,P=x.DERInteger,T=x.DERBitString,O=x.DEROctetString,k=x.DERNull,C=x.DERObjectIdentifier,U=x.DEREnumerated,N=x.DERUTF8String,H=x.DERNumericString,D=x.DERPrintableString,j=x.DERTeletexString,V=x.DERIA5String,X=x.DERUTCTime,re=x.DERGeneralizedTime,ee=x.DERVisibleString,fe=x.DERBMPString,le=x.DERSequence,pe=x.DERSet,ie=x.DERTaggedObject,he=x.ASN1Util.newObject;if(v instanceof x.ASN1Object)return v;var ae=Object.keys(v);if(ae.length!=1)throw new Error("key of param shall be only one.");var te=ae[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+te+":")==-1)throw new Error("undefined key: "+te);if(te=="bool")return new A(v[te]);if(te=="int")return new P(v[te]);if(te=="bitstr")return new T(v[te]);if(te=="octstr")return new O(v[te]);if(te=="null")return new k(v[te]);if(te=="oid")return new C(v[te]);if(te=="enum")return new U(v[te]);if(te=="utf8str")return new N(v[te]);if(te=="numstr")return new H(v[te]);if(te=="prnstr")return new D(v[te]);if(te=="telstr")return new j(v[te]);if(te=="ia5str")return new V(v[te]);if(te=="utctime")return new X(v[te]);if(te=="gentime")return new re(v[te]);if(te=="visstr")return new ee(v[te]);if(te=="bmpstr")return new fe(v[te]);if(te=="asn1")return new E(v[te]);if(te=="seq"){for(var ue=v[te],ne=[],J=0;J<ue.length;J++){var q=he(ue[J]);ne.push(q)}return new le({array:ne})}if(te=="set"){for(var ue=v[te],ne=[],J=0;J<ue.length;J++){var q=he(ue[J]);ne.push(q)}return new pe({array:ne})}if(te=="tag"){var F=v[te];if(Object.prototype.toString.call(F)==="[object Array]"&&F.length==3){var L=he(F[2]);return new ie({tag:F[0],explicit:F[1],obj:L})}else return new ie(F)}},this.jsonToASN1HEX=function(v){var _=this.newObject(v);return _.tohex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(v){for(var A="",_=parseInt(v.substr(0,2),16),x=Math.floor(_/40),E=_%40,A=x+"."+E,P="",T=2;T<v.length;T+=2){var O=parseInt(v.substr(T,2),16),k=("00000000"+O.toString(2)).slice(-8);if(P=P+k.substr(1,7),k.substr(0,1)=="0"){var C=new BigInteger$2(P,2);A=A+"."+C.toString(10),P=""}}return A},KJUR.asn1.ASN1Util.oidIntToHex=function(v){var _=function(O){var k=O.toString(16);return k.length==1&&(k="0"+k),k},x=function(O){var k="",C=new BigInteger$2(O,10),U=C.toString(2),N=7-U.length%7;N==7&&(N=0);for(var H="",D=0;D<N;D++)H+="0";U=H+U;for(var D=0;D<U.length-1;D+=7){var j=U.substr(D,7);D!=U.length-7&&(j="1"+j),k+=_(parseInt(j,2))}return k};if(!v.match(/^[0-9.]+$/))throw"malformed oid string: "+v;var E="",A=v.split("."),P=parseInt(A[0])*40+parseInt(A[1]);E+=_(P),A.splice(0,2);for(var T=0;T<A.length;T++)E+=x(A[T]);return E},KJUR.asn1.ASN1Object=function(v){var _="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+_.length+",v="+this.hV);var x=this.hV.length/2,E=x.toString(16);if(E.length%2==1&&(E="0"+E),x<128)return E;var A=E.length/2;if(A>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+x.toString(16));var P=128+A;return P.toString(16)+E},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(x){this.params=x},v!=null&&v.tlv!=null&&(this.hTLV=v.tlv,this.isModified=!1)},KJUR.asn1.DERAbstractString=function(v){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(_){this.hTLV=null,this.isModified=!0,this.s=_,this.hV=utf8tohex(this.s).toLowerCase()},this.setStringHex=function(_){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_},this.getFreshValueHex=function(){return this.hV},typeof v<"u"&&(typeof v=="string"?this.setString(v):typeof v.str<"u"?this.setString(v.str):typeof v.hex<"u"&&this.setStringHex(v.hex))},extendClass(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(v){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(_){var x=_.getTime()+_.getTimezoneOffset()*6e4,E=new Date(x);return E},this.formatDate=function(_,x,E){var A=this.zeroPadding,P=this.localDateToUTC(_),T=String(P.getFullYear());x=="utc"&&(T=T.substr(2,2));var O=A(String(P.getMonth()+1),2),k=A(String(P.getDate()),2),C=A(String(P.getHours()),2),U=A(String(P.getMinutes()),2),N=A(String(P.getSeconds()),2),H=T+O+k+C+U+N;if(E===!0){var D=P.getMilliseconds();if(D!=0){var j=A(String(D),3);j=j.replace(/[0]+$/,""),H=H+"."+j}}return H+"Z"},this.zeroPadding=function(_,x){return _.length>=x?_:new Array(x-_.length+1).join("0")+_},this.setByParam=function(_){this.hV=null,this.hTLV=null,this.params=_},this.getString=function(){},this.setString=function(_){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=_},this.setByDate=function(_){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=_},this.setByDateValue=function(_,x,E,A,P,T){var O=new Date(Date.UTC(_,x-1,E,A,P,T,0));this.setByDate(O)},this.getFreshValueHex=function(){return this.hV}},extendClass(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(v){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(_){this.hTLV=null,this.isModified=!0,this.asn1Array=_},this.appendASN1Object=function(_){this.hTLV=null,this.isModified=!0,this.asn1Array.push(_)},this.asn1Array=new Array,typeof v<"u"&&typeof v.array<"u"&&(this.asn1Array=v.array)},extendClass(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(v){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",v==!1?this.hTLV="010100":this.hTLV="0101ff"},extendClass(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(v){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var _=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex;this.setByBigInteger=function(x){this.isModified=!0,this.params={bigint:x}},this.setByInteger=function(x){this.isModified=!0,this.params=x},this.setValueHex=function(x){this.isModified=!0,this.params={hex:x}},this.getFreshValueHex=function(){var x=this.params,E=null;if(x==null)throw new Error("value not set");if(typeof x=="object"&&x.hex!=null)return this.hV=x.hex,this.hV;if(typeof x=="number")E=new BigInteger$2(String(x),10);else if(x.int!=null)E=new BigInteger$2(String(x.int),10);else if(x.bigint!=null)E=x.bigint;else throw new Error("wrong parameter");return this.hV=_(E),this.hV},v!=null&&(this.params=v)},extendClass(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(v){if(v!==void 0&&typeof v.obj<"u"){var _=KJUR.asn1.ASN1Util.newObject(v.obj);v.hex="00"+_.tohex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(x){this.hTLV=null,this.isModified=!0,this.hV=x},this.setUnusedBitsAndHexValue=function(x,E){if(x<0||7<x)throw"unused bits shall be from 0 to 7: u = "+x;var A="0"+x;this.hTLV=null,this.isModified=!0,this.hV=A+E},this.setByBinaryString=function(x){x=x.replace(/0+$/,"");var E=8-x.length%8;E==8&&(E=0),x+="0000000".substr(0,E);for(var A="",P=0;P<x.length-1;P+=8){var T=x.substr(P,8),O=parseInt(T,2).toString(16);O.length==1&&(O="0"+O),A+=O}this.hTLV=null,this.isModified=!0,this.hV="0"+E+A},this.setByBooleanArray=function(x){for(var E="",A=0;A<x.length;A++)x[A]==!0?E+="1":E+="0";this.setByBinaryString(E)},this.newFalseArray=function(x){for(var E=new Array(x),A=0;A<x;A++)E[A]=!1;return E},this.getFreshValueHex=function(){return this.hV},typeof v<"u"&&(typeof v=="string"&&v.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(v):typeof v.hex<"u"?this.setHexValueIncludingUnusedBits(v.hex):typeof v.bin<"u"?this.setByBinaryString(v.bin):typeof v.array<"u"&&this.setByBooleanArray(v.array))},extendClass(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(v){if(v!==void 0&&typeof v.obj<"u"){var _=KJUR.asn1.ASN1Util.newObject(v.obj);v.hex=_.tohex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,v),this.hT="04"},extendClass(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},extendClass(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(v){KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(_){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_},this.setValueOidString=function(_){var x=oidtohex(_);if(x==null)throw new Error("malformed oid string: "+_);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=x},this.setValueName=function(_){var x=KJUR.asn1.x509.OID.name2oid(_);if(x!=="")this.setValueOidString(x);else throw new Error("DERObjectIdentifier oidName undefined: "+_)},this.setValueNameOrOid=function(_){_.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(_):this.setValueName(_)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_){typeof _=="string"?this.setValueNameOrOid(_):_.oid!==void 0?this.setValueNameOrOid(_.oid):_.name!==void 0?this.setValueNameOrOid(_.name):_.hex!==void 0&&this.setValueHex(_.hex)},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(v){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(_){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_)},this.setByInteger=function(_){var x=new BigInteger$2(String(_),10);this.setByBigInteger(x)},this.setValueHex=function(_){this.hV=_},this.getFreshValueHex=function(){return this.hV},typeof v<"u"&&(typeof v.int<"u"?this.setByInteger(v.int):typeof v=="number"?this.setByInteger(v):typeof v.hex<"u"&&this.setValueHex(v.hex))},extendClass(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(v){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,v),this.hT="0c"},extendClass(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(v){KJUR.asn1.DERNumericString.superclass.constructor.call(this,v),this.hT="12"},extendClass(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(v){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,v),this.hT="13"},extendClass(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(v){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,v),this.hT="14"},extendClass(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(v){KJUR.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="16"},extendClass(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERVisibleString=function(v){KJUR.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="1a"},extendClass(KJUR.asn1.DERVisibleString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERBMPString=function(v){KJUR.asn1.DERBMPString.superclass.constructor.call(this,v),this.hT="1e"},extendClass(KJUR.asn1.DERBMPString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(v){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,v),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var _=this.params;if(this.params==null&&(_={date:new Date}),typeof _=="string")if(_.match(/^[0-9]{12}Z$/)||_.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=stohex(_);else throw new Error("malformed string for UTCTime: "+_);else if(_.str!=null)this.hV=stohex(_.str);else if(_.date==null&&_.millis==!0){var x=new Date;this.hV=stohex(this.formatDate(x,"utc",!0))}else if(_.date!=null&&_.date instanceof Date){var E=_.millis===!0;this.hV=stohex(this.formatDate(_.date,"utc",E))}else _ instanceof Date&&(this.hV=stohex(this.formatDate(_,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(v){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,v),this.hT="18",this.params=v,this.getFreshValueHex=function(){var _=this.params;if(this.params==null&&(_={date:new Date}),typeof _=="string")if(_.match(/^[0-9]{14}Z$/)||_.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=stohex(_);else throw new Error("malformed string for GeneralizedTime: "+_);else if(_.str!=null)this.hV=stohex(_.str);else if(_.date==null&&_.millis==!0){var x=new Date;this.hV=stohex(this.formatDate(x,"gen",!0))}else if(_.date!=null&&_.date instanceof Date){var E=_.millis===!0;this.hV=stohex(this.formatDate(_.date,"gen",E))}else _ instanceof Date&&(this.hV=stohex(this.formatDate(_,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(v){KJUR.asn1.DERSequence.superclass.constructor.call(this,v),this.hT="30",this.getFreshValueHex=function(){for(var _="",x=0;x<this.asn1Array.length;x++){var E=this.asn1Array[x];_+=E.tohex()}return this.hV=_,this.hV}},extendClass(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(v){KJUR.asn1.DERSet.superclass.constructor.call(this,v),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var _=new Array,x=0;x<this.asn1Array.length;x++){var E=this.asn1Array[x];_.push(E.tohex())}return this.sortFlag==!0&&_.sort(),this.hV=_.join(""),this.hV},typeof v<"u"&&typeof v.sortflag<"u"&&v.sortflag==!1&&(this.sortFlag=!1)},extendClass(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(v){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);var _=KJUR.asn1,x=ASN1HEX,E=x.getV;x.isASN1HEX;var A=_.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(P,T,O){this.params={tag:T,explicit:P,obj:O}},this.getFreshValueHex=function(){var P=this.params;if(P.explicit==null&&(P.explicit=!0),P.tage!=null&&(P.tag=P.tage,P.explicit=!0),P.tagi!=null&&(P.tag=P.tagi,P.explicit=!1),P.str!=null)this.hV=utf8tohex(P.str);else if(P.hex!=null)this.hV=P.hex;else if(P.obj!=null){var T;P.obj instanceof _.ASN1Object?T=P.obj.tohex():typeof P.obj=="object"&&(T=A(P.obj).tohex()),P.explicit?this.hV=T:this.hV=E(T,0)}else throw new Error("str, hex nor obj not specified");return P.tag==null&&(P.tag="a0"),this.hT=P.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(P){this.params=P},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var ASN1HEX=new function(){};ASN1HEX.getLblen=function(v,_){if(v.substr(_+2,1)!="8")return 1;var x=parseInt(v.substr(_+3,1));return x==0?-1:0<x&&x<10?x+1:-2},ASN1HEX.getL=function(v,_){var x=ASN1HEX.getLblen(v,_);return x<1?"":v.substr(_+2,x*2)},ASN1HEX.getVblen=function(v,_){var x,E;return x=ASN1HEX.getL(v,_),x==""?-1:(x.substr(0,1)==="8"?E=new BigInteger$2(x.substr(2),16):E=new BigInteger$2(x,16),E.intValue())},ASN1HEX.getVidx=function(v,_){var x=ASN1HEX.getLblen(v,_);return x<0?x:_+(x+1)*2},ASN1HEX.getV=function(v,_){var x=ASN1HEX.getVidx(v,_),E=ASN1HEX.getVblen(v,_);return v.substr(x,E*2)},ASN1HEX.getTLV=function(v,_){return v.substr(_,2)+ASN1HEX.getL(v,_)+ASN1HEX.getV(v,_)},ASN1HEX.getTLVblen=function(v,_){return 2+ASN1HEX.getLblen(v,_)*2+ASN1HEX.getVblen(v,_)*2},ASN1HEX.getNextSiblingIdx=function(v,_){var x=ASN1HEX.getVidx(v,_),E=ASN1HEX.getVblen(v,_);return x+E*2},ASN1HEX.getChildIdx=function(v,_){var x=ASN1HEX,E=[],A,P,T;A=x.getVidx(v,_),P=x.getVblen(v,_)*2,v.substr(_,2)=="03"&&(A+=2,P-=2),T=0;for(var O=A;T<=P;){var k=x.getTLVblen(v,O);if(T+=k,T<=P&&E.push(O),O+=k,T>=P)break}return E},ASN1HEX.getNthChildIdx=function(v,_,x){var E=ASN1HEX.getChildIdx(v,_);return E[x]},ASN1HEX.getIdxbyList=function(v,_,x,E){var A=ASN1HEX,P,T;return x.length==0?E!==void 0&&v.substr(_,2)!==E?-1:_:(P=x.shift(),T=A.getChildIdx(v,_),P>=T.length?-1:A.getIdxbyList(v,T[P],x,E))},ASN1HEX.getIdxbyListEx=function(v,_,x,E){var A=ASN1HEX,P,T;if(x.length==0)return E!==void 0&&v.substr(_,2)!==E?-1:_;P=x.shift(),T=A.getChildIdx(v,_);for(var O=0,k=0;k<T.length;k++){var C=v.substr(T[k],2);if(typeof P=="number"&&!A.isContextTag(C)&&O==P||typeof P=="string"&&A.isContextTag(C,P))return A.getIdxbyListEx(v,T[k],x,E);A.isContextTag(C)||O++}return-1},ASN1HEX.getTLVbyList=function(v,_,x,E){var A=ASN1HEX,P=A.getIdxbyList(v,_,x,E);return P==-1||P>=v.length?null:A.getTLV(v,P)},ASN1HEX.getTLVbyListEx=function(v,_,x,E){var A=ASN1HEX,P=A.getIdxbyListEx(v,_,x,E);return P==-1?null:A.getTLV(v,P)},ASN1HEX.getVbyList=function(v,_,x,E,A){var P=ASN1HEX,T,O;return T=P.getIdxbyList(v,_,x,E),T==-1||T>=v.length?null:(O=P.getV(v,T),A===!0&&(O=O.substr(2)),O)},ASN1HEX.getVbyListEx=function(v,_,x,E,A){var P=ASN1HEX,T,O;return T=P.getIdxbyListEx(v,_,x,E),T==-1?null:(O=P.getV(v,T),v.substr(T,2)=="03"&&A!==!1&&(O=O.substr(2)),O)},ASN1HEX.getInt=function(v,_,x){x==null&&(x=-1);try{var E=v.substr(_,2);if(E!="02"&&E!="03")return x;var A=ASN1HEX.getV(v,_);return E=="02"?parseInt(A,16):bitstrtoint(A)}catch{return x}},ASN1HEX.getOID=function(v,_,x){x==null&&(x=null);try{if(v.substr(_,2)!="06")return x;var E=ASN1HEX.getV(v,_);return hextooid(E)}catch{return x}},ASN1HEX.getOIDName=function(v,_,x){x==null&&(x=null);try{var E=ASN1HEX.getOID(v,_,x);if(E==x)return x;var A=KJUR.asn1.x509.OID.oid2name(E);return A==""?E:A}catch{return x}},ASN1HEX.getString=function(v,_,x){x==null&&(x=null);try{var E=ASN1HEX.getV(v,_);return hextorstr(E)}catch{return x}},ASN1HEX.hextooidstr=function(v){var _=function(N,H){return N.length>=H?N:new Array(H-N.length+1).join("0")+N},x=[],E=v.substr(0,2),A=parseInt(E,16);x[0]=new String(Math.floor(A/40)),x[1]=new String(A%40);for(var P=v.substr(2),T=[],O=0;O<P.length/2;O++)T.push(parseInt(P.substr(O*2,2),16));for(var k=[],C="",O=0;O<T.length;O++)T[O]&128?C=C+_((T[O]&127).toString(2),7):(C=C+_((T[O]&127).toString(2),7),k.push(new String(parseInt(C,2))),C="");var U=x.join(".");return k.length>0&&(U=U+"."+k.join(".")),U},ASN1HEX.dump=function(v,_,x,E){var A=ASN1HEX,P=A.getV,T=A.dump,O=A.getChildIdx,k=v;v instanceof KJUR.asn1.ASN1Object&&(k=v.tohex());var C=function(he,ae){if(he.length<=ae*2)return he;var te=he.substr(0,ae)+"..(total "+he.length/2+"bytes).."+he.substr(he.length-ae,ae);return te};_===void 0&&(_={ommit_long_octet:32}),x===void 0&&(x=0),E===void 0&&(E="");var U=_.ommit_long_octet,pe=k.substr(x,2);if(pe=="01"){var N=P(k,x);return N=="00"?E+`BOOLEAN FALSE
`:E+`BOOLEAN TRUE
`}if(pe=="02"){var N=P(k,x);return E+"INTEGER "+C(N,U)+`
`}if(pe=="03"){var N=P(k,x);if(A.isASN1HEX(N.substr(2))){var H=E+`BITSTRING, encapsulates
`;return H=H+T(N.substr(2),_,0,E+"  "),H}else return E+"BITSTRING "+C(N,U)+`
`}if(pe=="04"){var N=P(k,x);if(A.isASN1HEX(N)){var H=E+`OCTETSTRING, encapsulates
`;return H=H+T(N,_,0,E+"  "),H}else return E+"OCTETSTRING "+C(N,U)+`
`}if(pe=="05")return E+`NULL
`;if(pe=="06"){var D=P(k,x),j=KJUR.asn1.ASN1Util.oidHexToInt(D),V=KJUR.asn1.x509.OID.oid2name(j),X=j.replace(/\./g," ");return V!=""?E+"ObjectIdentifier "+V+" ("+X+`)
`:E+"ObjectIdentifier ("+X+`)
`}if(pe=="0a")return E+"ENUMERATED "+parseInt(P(k,x))+`
`;if(pe=="0c")return E+"UTF8String '"+hextoutf8(P(k,x))+`'
`;if(pe=="13")return E+"PrintableString '"+hextoutf8(P(k,x))+`'
`;if(pe=="14")return E+"TeletexString '"+hextoutf8(P(k,x))+`'
`;if(pe=="16")return E+"IA5String '"+hextoutf8(P(k,x))+`'
`;if(pe=="17")return E+"UTCTime "+hextoutf8(P(k,x))+`
`;if(pe=="18")return E+"GeneralizedTime "+hextoutf8(P(k,x))+`
`;if(pe=="1a")return E+"VisualString '"+hextoutf8(P(k,x))+`'
`;if(pe=="1e")return E+"BMPString '"+ucs2hextoutf8(P(k,x))+`'
`;if(pe=="30"){if(k.substr(x,4)=="3000")return E+`SEQUENCE {}
`;var H=E+`SEQUENCE
`,re=O(k,x),ee=_;if((re.length==2||re.length==3)&&k.substr(re[0],2)=="06"&&k.substr(re[re.length-1],2)=="04"){var V=A.oidname(P(k,re[0])),fe=JSON.parse(JSON.stringify(_));fe.x509ExtName=V,ee=fe}for(var le=0;le<re.length;le++)H=H+T(k,ee,re[le],E+"  ");return H}if(pe=="31"){for(var H=E+`SET
`,re=O(k,x),le=0;le<re.length;le++)H=H+T(k,_,re[le],E+"  ");return H}var pe=parseInt(pe,16);if(pe&128){var ie=pe&31;if(pe&32){for(var H=E+"["+ie+`]
`,re=O(k,x),le=0;le<re.length;le++)H=H+T(k,_,re[le],E+"  ");return H}else{var N=P(k,x);if(ASN1HEX.isASN1HEX(N)){var H=E+"["+ie+`]
`;return H=H+T(N,_,0,E+"  "),H}else(N.substr(0,8)=="68747470"||_.x509ExtName==="subjectAltName"&&ie==2)&&(N=hextoutf8(N));var H=E+"["+ie+"] "+N+`
`;return H}}return E+"UNKNOWN("+pe+") "+P(k,x)+`
`},ASN1HEX.parse=function(v){var _=ASN1HEX,x=_.parse,E=_.isASN1HEX,A=_.getV,P=_.getTLV,T=_.getChildIdx,O=KJUR.asn1,k=O.ASN1Util.oidHexToInt,C=O.x509.OID.oid2name,U=hextoutf8,N=ucs2hextoutf8,H=iso88591hextoutf8,D={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},j=function(te){for(var ue=[],ne=T(te,0),J=0;J<ne.length;J++){var q=ne[J],F=P(te,q),L=x(F);ue.push(L)}return ue},V=v.substr(0,2),X={},re=A(v,0);if(V=="01")return v=="0101ff"?{bool:!0}:{bool:!1};if(V=="02")return{int:{hex:re}};if(V=="03")try{if(re.substr(0,2)!="00")throw"not encap";var ee=re.substr(2);if(!E(ee))throw"not encap";return{bitstr:{obj:x(ee)}}}catch{var fe=null;return re.length<=10&&(fe=bitstrtobinstr(re)),fe==null?{bitstr:{hex:re}}:{bitstr:{bin:fe}}}else if(V=="04")try{if(!E(re))throw"not encap";return{octstr:{obj:x(re)}}}catch{return{octstr:{hex:re}}}else{if(V=="05")return{null:""};if(V=="06"){var le=k(re),pe=C(le);return pe==""?{oid:le}:{oid:pe}}else{if(V=="0a")return re.length>4?{enum:{hex:re}}:{enum:parseInt(re,16)};if(V=="30"||V=="31")return X[D[V]]=j(v),X;if(V=="14"){var ie=H(re);return X[D[V]]={str:ie},X}else if(V=="1e"){var ie=N(re);return X[D[V]]={str:ie},X}else if(":0c:12:13:16:17:18:1a:".indexOf(V)!=-1){var ie=U(re);return X[D[V]]={str:ie},X}else if(V.match(/^8[0-9]$/)){var ie=U(re);return ie==null|ie==""?{tag:{tag:V,explicit:!1,hex:re}}:ie.match(/[\x00-\x1F\x7F-\x9F]/)!=null||ie.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:V,explicit:!1,hex:re}}:{tag:{tag:V,explicit:!1,str:ie}}}else if(V.match(/^a[0-9]$/))try{if(!E(re))throw new Error("not encap");return{tag:{tag:V,explicit:!0,obj:x(re)}}}catch{return{tag:{tag:V,explicit:!0,hex:re}}}else{var he=new KJUR.asn1.ASN1Object;he.hV=re;var ae=he.getLengthHexFromValue();return{asn1:{tlv:V+ae+re}}}}}},ASN1HEX.isContextTag=function(v,_){v=v.toLowerCase();var x,E;try{x=parseInt(v,16)}catch{return-1}if(_===void 0)return(x&192)==128;try{var A=_.match(/^\[[0-9]+\]$/);return A==null||(E=parseInt(_.substr(1,_.length-1),10),E>31)?!1:(x&192)==128&&(x&31)==E}catch{return!1}},ASN1HEX.isASN1HEX=function(v){var _=ASN1HEX;if(v.length%2==1)return!1;var x=_.getVblen(v,0),E=v.substr(0,2),A=_.getL(v,0),P=v.length-E.length-A.length;return P==x*2},ASN1HEX.checkStrictDER=function(v,_,x,E,A){var P=ASN1HEX;if(x===void 0){if(typeof v!="string")throw new Error("not hex string");if(v=v.toLowerCase(),!KJUR.lang.String.isHex(v))throw new Error("not hex string");x=v.length,E=v.length/2,E<128?A=1:A=Math.ceil(E.toString(16))+1}var T=P.getL(v,_);if(T.length>A*2)throw new Error("L of TLV too long: idx="+_);var O=P.getVblen(v,_);if(O>E)throw new Error("value of L too long than hex: idx="+_);var k=P.getTLV(v,_),C=k.length-2-P.getL(v,_).length;if(C!==O*2)throw new Error("V string length and L's value not the same:"+C+"/"+O*2);if(_===0&&v.length!=k.length)throw new Error("total length and TLV length unmatch:"+v.length+"!="+k.length);var U=v.substr(_,2);if(U==="02"){var N=P.getVidx(v,_);if(v.substr(N,2)=="00"&&v.charCodeAt(N+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(U,16)&32){for(var H=P.getVblen(v,_),D=0,j=P.getChildIdx(v,_),V=0;V<j.length;V++){var X=P.getTLV(v,j[V]);D+=X.length,P.checkStrictDER(v,j[V],x,E,A)}if(H*2!=D)throw new Error("sum of children's TLV length and L unmatch: "+H*2+"!="+D)}},ASN1HEX.oidname=function(v){var _=KJUR.asn1;KJUR.lang.String.isHex(v)&&(v=_.ASN1Util.oidHexToInt(v));var x=_.x509.OID.oid2name(v);return x===""&&(x=v),x},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),(typeof KJUR.asn1.x509>"u"||!KJUR.asn1.x509)&&(KJUR.asn1.x509={}),KJUR.asn1.x509.Certificate=function(v){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERBitString,A=x.DERSequence,P=x.x509,T=P.TBSCertificate,O=P.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(k){this.params=k},this.sign=function(){var k=this.params,C=k.sigalg;k.sigalg.name!=null&&(C=k.sigalg.name);var U=k.tbsobj.tohex(),N=new KJUR.crypto.Signature({alg:C});N.init(k.cakey),N.updateHex(U),k.sighex=N.sign()},this.getPEM=function(){return hextopem(this.tohex(),"CERTIFICATE")},this.tohex=function(){var k=this.params;if((k.tbsobj==null||k.tbsobj==null)&&(k.tbsobj=new T(k)),k.sighex==null&&k.cakey!=null&&this.sign(),k.sighex==null)throw new Error("sighex or cakey parameter not defined");var C=[];C.push(k.tbsobj),C.push(new O({name:k.sigalg})),C.push(new E({hex:"00"+k.sighex}));var U=new A({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertificate=function(v){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.x509,A=x.DERTaggedObject,P=x.DERInteger,T=x.DERSequence,O=E.AlgorithmIdentifier,k=E.Time,C=E.X500Name,U=E.Extensions,N=E.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(H){this.params=H},this.tohex=function(){var H=[],D=this.params;if(D.version!=null||D.version!=1){var j=2;D.version!=null&&(j=D.version-1);var V=new A({obj:new P({int:j})});H.push(V)}H.push(new P(D.serial)),H.push(new O({name:D.sigalg})),H.push(new C(D.issuer)),H.push(new T({array:[new k(D.notbefore),new k(D.notafter)]})),H.push(new C(D.subject)),H.push(new N(KEYUTIL.getKey(D.sbjpubkey))),D.ext!==void 0&&D.ext.length>0&&H.push(new A({tag:"a3",obj:new U(D.ext)}));var X=new KJUR.asn1.DERSequence({array:H});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extensions=function(v){KJUR.asn1.x509.Extensions.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.x509;this.aParam=[],this.setByParam=function(P){this.aParam=P},this.tohex=function(){for(var P=[],T=0;T<this.aParam.length;T++){var O=this.aParam[T],k=O.extname,C=null;if(O.extn!=null)C=new A.PrivateExtension(O);else if(k=="subjectKeyIdentifier")C=new A.SubjectKeyIdentifier(O);else if(k=="keyUsage")C=new A.KeyUsage(O);else if(k=="subjectAltName")C=new A.SubjectAltName(O);else if(k=="issuerAltName")C=new A.IssuerAltName(O);else if(k=="basicConstraints")C=new A.BasicConstraints(O);else if(k=="nameConstraints")C=new A.NameConstraints(O);else if(k=="cRLDistributionPoints")C=new A.CRLDistributionPoints(O);else if(k=="certificatePolicies")C=new A.CertificatePolicies(O);else if(k=="policyMappings")C=new A.PolicyMappings(O);else if(k=="policyConstraints")C=new A.PolicyConstraints(O);else if(k=="inhibitAnyPolicy")C=new A.InhibitAnyPolicy(O);else if(k=="authorityKeyIdentifier")C=new A.AuthorityKeyIdentifier(O);else if(k=="extKeyUsage")C=new A.ExtKeyUsage(O);else if(k=="authorityInfoAccess")C=new A.AuthorityInfoAccess(O);else if(k=="cRLNumber")C=new A.CRLNumber(O);else if(k=="cRLReason")C=new A.CRLReason(O);else if(k=="ocspNonce")C=new A.OCSPNonce(O);else if(k=="ocspNoCheck")C=new A.OCSPNoCheck(O);else if(k=="adobeTimeStamp")C=new A.AdobeTimeStamp(O);else if(k=="subjectDirectoryAttributes")C=new A.SubjectDirectoryAttributes(O);else throw new Error("extension not supported:"+JSON.stringify(O));C!=null&&P.push(C)}var U=new E({array:P});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.x509.Extensions,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension=function(v){KJUR.asn1.x509.Extension.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERObjectIdentifier,A=x.DEROctetString;x.DERBitString;var P=x.DERBoolean,T=x.DERSequence;this.tohex=function(){var O=new E({oid:this.oid}),k=new A({hex:this.getExtnValueHex()}),C=new Array;C.push(O),this.critical&&C.push(new P),C.push(k);var U=new T({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,v!==void 0&&v.critical!==void 0&&(this.critical=v.critical)},extendClass(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object),KJUR.asn1.x509.KeyUsage=function(v){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,v);var _=Error,x={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var E=this.getBinValue();return this.asn1ExtnValue=new KJUR.asn1.DERBitString({bin:E}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var E=this.params;if(typeof E!="object"||typeof E.names!="object"&&typeof E.bin!="string")throw new _("parameter not yet set");if(E.names!=null)return namearraytobinstr(E.names,x);if(E.bin!=null)return E.bin;throw new _("parameter not set properly")},this.oid="2.5.29.15",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.BasicConstraints=function(v){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,v);var _=KJUR.asn1,x=_.DERBoolean,E=_.DERInteger,A=_.DERSequence;this.getExtnValueHex=function(){var P=new Array;this.cA&&P.push(new x),this.pathLen>-1&&P.push(new E({int:this.pathLen}));var T=new A({array:P});return this.asn1ExtnValue=T,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,v!==void 0&&(v.cA!==void 0&&(this.cA=v.cA),v.pathLen!==void 0&&(this.pathLen=v.pathLen))},extendClass(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLDistributionPoints=function(v){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(A){for(var P=[],T=0;T<A.length;T++)if(A[T]instanceof KJUR.asn1.ASN1Object)P.push(A[T]);else{var O=new E.DistributionPoint(A[T]);P.push(O)}this.asn1ExtnValue=new x.DERSequence({array:P})},this.setByOneURI=function(A){var P=new E.DistributionPoint({fulluri:A});this.setByDPArray([P])},this.oid="2.5.29.31",v!==void 0&&(v.array!==void 0?this.setByDPArray(v.array):v.uri!==void 0&&this.setByOneURI(v.uri))},extendClass(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.DistributionPoint=function(v){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.x509.DistributionPointName;this.tohex=function(){var A=new x.DERSequence;if(this.asn1DP!=null){var P=new x.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});A.appendASN1Object(P)}return this.hTLV=A.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(v.dpobj!==void 0?this.asn1DP=v.dpobj:v.dpname!==void 0?this.asn1DP=new E(v.dpname):v.fulluri!==void 0&&(this.asn1DP=new E({full:[{uri:v.fulluri}]})))},extendClass(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPointName=function(v){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new E({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0)if(x.x509.GeneralNames.prototype.isPrototypeOf(v))this.type="full",this.tag="a0",this.asn1V=v;else if(v.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new x.x509.GeneralNames(v.full);else throw new Error("This class supports GeneralNames only as argument")},extendClass(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CertificatePolicies=function(v){KJUR.asn1.x509.CertificatePolicies.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.x509,A=x.DERSequence,P=E.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var T=[],O=0;O<this.params.array.length;O++)T.push(new P(this.params.array[O]));var k=new A({array:T});return this.asn1ExtnValue=k,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.CertificatePolicies,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PolicyInformation=function(v){KJUR.asn1.x509.PolicyInformation.superclass.constructor.call(this,v);var _=KJUR.asn1,x=_.DERSequence,E=_.DERObjectIdentifier,A=_.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var P=[new E(this.params.policyoid)];if(this.params.array!==void 0){for(var T=[],O=0;O<this.params.array.length;O++)T.push(new A(this.params.array[O]));T.length>0&&P.push(new x({array:T}))}var k=new x({array:P});return k.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.PolicyInformation,KJUR.asn1.ASN1Object),KJUR.asn1.x509.PolicyQualifierInfo=function(v){KJUR.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,v);var _=KJUR.asn1,x=_.DERSequence,E=_.DERIA5String,A=_.DERObjectIdentifier,P=_.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var T=new x({array:[new A({oid:"1.3.6.1.5.5.7.2.1"}),new E({str:this.params.cps})]});return T.tohex()}if(this.params.unotice!=null){var T=new x({array:[new A({oid:"1.3.6.1.5.5.7.2.2"}),new P(this.params.unotice)]});return T.tohex()}},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.PolicyQualifierInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.UserNotice=function(v){KJUR.asn1.x509.UserNotice.superclass.constructor.call(this,v);var _=KJUR.asn1.DERSequence;KJUR.asn1.DERInteger;var x=KJUR.asn1.x509.DisplayText,E=KJUR.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var A=[];this.params.noticeref!==void 0&&A.push(new E(this.params.noticeref)),this.params.exptext!==void 0&&A.push(new x(this.params.exptext));var P=new _({array:A});return P.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.UserNotice,KJUR.asn1.ASN1Object),KJUR.asn1.x509.NoticeReference=function(v){KJUR.asn1.x509.NoticeReference.superclass.constructor.call(this,v);var _=KJUR.asn1.DERSequence,x=KJUR.asn1.DERInteger,E=KJUR.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var A=[];if(this.params.org!==void 0&&A.push(new E(this.params.org)),this.params.noticenum!==void 0){for(var P=[],T=this.params.noticenum,O=0;O<T.length;O++)P.push(new x(T[O]));A.push(new _({array:P}))}if(A.length==0)throw new Error("parameter is empty");var k=new _({array:A});return k.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.NoticeReference,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DisplayText=function(v){KJUR.asn1.x509.DisplayText.superclass.constructor.call(this,v),this.hT="0c",v!==void 0&&(v.type==="ia5"?this.hT="16":v.type==="vis"?this.hT="1a":v.type==="bmp"&&(this.hT="1e"))},extendClass(KJUR.asn1.x509.DisplayText,KJUR.asn1.DERAbstractString),KJUR.asn1.x509.PolicyMappings=function(v){KJUR.asn1.x509.PolicyMappings.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1;x.x509;var E=x.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var A=this.params,P=[],T=0;T<A.array.length;T++){var O=A.array[T];P.push({seq:[{oid:O[0]},{oid:O[1]}]})}return this.asn1ExtnValue=E({seq:P}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.PolicyMappings,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PolicyConstraints=function(v){KJUR.asn1.x509.PolicyConstraints.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1;x.x509;var E=x.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var A=this.params,P=[];return A.reqexp!=null&&P.push({tag:{tagi:"80",obj:{int:A.reqexp}}}),A.inhibit!=null&&P.push({tag:{tagi:"81",obj:{int:A.inhibit}}}),this.asn1ExtnValue=E({seq:P}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.PolicyConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.InhibitAnyPolicy=function(v){KJUR.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1;x.x509;var E=x.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=E({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.InhibitAnyPolicy,KJUR.asn1.x509.Extension),KJUR.asn1.x509.NameConstraints=function(v){KJUR.asn1.x509.NameConstraints.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.x509,A=x.ASN1Util.newObject,P=E.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var T=this.params,O=[];if(T.permit!=null&&T.permit.length!=null){for(var k=[],C=0;C<T.permit.length;C++)k.push(new P(T.permit[C]));O.push({tag:{tagi:"a0",obj:{seq:k}}})}if(T.exclude!=null&&T.exclude.length!=null){for(var U=[],C=0;C<T.exclude.length;C++)U.push(new P(T.exclude[C]));O.push({tag:{tagi:"a1",obj:{seq:U}}})}return this.asn1ExtnValue=A({seq:O}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.NameConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.GeneralSubtree=function(v){KJUR.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var _=KJUR.asn1,x=_.x509,E=x.GeneralName,A=_.ASN1Util.newObject;this.params=null,this.setByParam=function(P){this.params=P},this.tohex=function(){var P=this.params,T=[new E(P)];P.min!=null&&T.push({tag:{tagi:"80",obj:{int:P.min}}}),P.max!=null&&T.push({tag:{tagi:"81",obj:{int:P.max}}});var O=A({seq:T});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.GeneralSubtree,KJUR.asn1.ASN1Object),KJUR.asn1.x509.ExtKeyUsage=function(v){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1;this.setPurposeArray=function(E){this.asn1ExtnValue=new x.DERSequence;for(var A=0;A<E.length;A++){var P=new x.DERObjectIdentifier(E[A]);this.asn1ExtnValue.appendASN1Object(P)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",v!==void 0&&v.array!==void 0&&this.setPurposeArray(v.array)},extendClass(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityKeyIdentifier=function(v){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.DERTaggedObject,A=x.x509.GeneralNames;_.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var P=new Array;this.asn1KID&&P.push(new E({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&P.push(new E({explicit:!1,tag:"a1",obj:new A([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&P.push(new E({explicit:!1,tag:"82",obj:this.asn1CertSN}));var T=new x.DERSequence({array:P});return this.asn1ExtnValue=T,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(P){if(P.str!==void 0||P.hex!==void 0)this.asn1KID=new KJUR.asn1.DEROctetString(P);else if(typeof P=="object"&&KJUR.crypto.Util.isKey(P)||typeof P=="string"&&P.indexOf("BEGIN ")!=-1){var T=P;typeof P=="string"&&(T=KEYUTIL.getKey(P));var O=KEYUTIL.getKeyID(T);this.asn1KID=new KJUR.asn1.DEROctetString({hex:O})}},this.setCertIssuerByParam=function(P){P.str!==void 0||P.ldapstr!==void 0||P.hex!==void 0||P.certsubject!==void 0||P.certissuer!==void 0?this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(P):typeof P=="string"&&P.indexOf("BEGIN ")!=-1&&P.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new KJUR.asn1.x509.X500Name({certissuer:P}))},this.setCertSNByParam=function(P){if(P.str!==void 0||P.bigint!==void 0||P.hex!==void 0)this.asn1CertSN=new KJUR.asn1.DERInteger(P);else if(typeof P=="string"&&P.indexOf("BEGIN ")!=-1&&P.indexOf("CERTIFICATE")){var T=new X509;T.readCertPEM(P);var O=T.getSerialNumberHex();this.asn1CertSN=new KJUR.asn1.DERInteger({hex:O})}},this.oid="2.5.29.35",v!==void 0&&(v.kid!==void 0&&this.setKIDByParam(v.kid),v.issuer!==void 0&&this.setCertIssuerByParam(v.issuer),v.sn!==void 0&&this.setCertSNByParam(v.sn),v.issuersn!==void 0&&typeof v.issuersn=="string"&&v.issuersn.indexOf("BEGIN ")!=-1&&v.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(v.issuersn),this.setCertIssuerByParam(v.issuersn)))},extendClass(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectKeyIdentifier=function(v){KJUR.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(A){if(A.str!==void 0||A.hex!==void 0)this.asn1KID=new E(A);else if(typeof A=="object"&&KJUR.crypto.Util.isKey(A)||typeof A=="string"&&A.indexOf("BEGIN")!=-1){var P=A;typeof A=="string"&&(P=KEYUTIL.getKey(A));var T=KEYUTIL.getKeyID(P);this.asn1KID=new KJUR.asn1.DEROctetString({hex:T})}},this.oid="2.5.29.14",v!==void 0&&v.kid!==void 0&&this.setKIDByParam(v.kid)},extendClass(KJUR.asn1.x509.SubjectKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityInfoAccess=function(v){KJUR.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,v),this.setAccessDescriptionArray=function(_){for(var x=new Array,E=KJUR,A=E.asn1,P=A.DERSequence,T=A.DERObjectIdentifier,O=A.x509.GeneralName,k=0;k<_.length;k++){var C,U=_[k];if(U.ocsp!==void 0)C=new P({array:[new T({oid:"1.3.6.1.5.5.7.48.1"}),new O({uri:U.ocsp})]});else if(U.caissuer!==void 0)C=new P({array:[new T({oid:"1.3.6.1.5.5.7.48.2"}),new O({uri:U.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(U));x.push(C)}this.asn1ExtnValue=new P({array:x})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",v!==void 0&&v.array!==void 0&&this.setAccessDescriptionArray(v.array)},extendClass(KJUR.asn1.x509.AuthorityInfoAccess,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectAltName=function(v){KJUR.asn1.x509.SubjectAltName.superclass.constructor.call(this,v),this.setNameArray=function(_){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(_)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",v!==void 0&&v.array!==void 0&&this.setNameArray(v.array)},extendClass(KJUR.asn1.x509.SubjectAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.IssuerAltName=function(v){KJUR.asn1.x509.IssuerAltName.superclass.constructor.call(this,v),this.setNameArray=function(_){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(_)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",v!==void 0&&v.array!==void 0&&this.setNameArray(v.array)},extendClass(KJUR.asn1.x509.IssuerAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectDirectoryAttributes=function(v){KJUR.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,v);var _=KJUR.asn1,x=_.DERSequence,E=_.ASN1Util.newObject,A=_.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var P=[],T=0;T<this.params.array.length;T++){var O=this.params.array[T];if(O.attr!=null&&O.array!=null){var k={seq:[{oid:O.attr},{set:O.array}]};P.push(E(k));continue}var C={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(O.attr=="dateOfBirth")C.seq[0].oid=A(O.attr),C.seq[1].set[0]={gentime:O.str};else if(O.attr=="placeOfBirth")C.seq[0].oid=A(O.attr),C.seq[1].set[0]={utf8str:O.str};else if(O.attr=="gender")C.seq[0].oid=A(O.attr),C.seq[1].set[0]={prnstr:O.str};else if(O.attr=="countryOfCitizenship")C.seq[0].oid=A(O.attr),C.seq[1].set[0]={prnstr:O.str};else if(O.attr=="countryOfResidence")C.seq[0].oid=A(O.attr),C.seq[1].set[0]={prnstr:O.str};else throw new Error("unsupported attribute: "+O.attr);P.push(new E(C))}var U=new x({array:P});return this.asn1ExtnValue=U,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.x509.SubjectDirectoryAttributes,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PrivateExtension=function(v){KJUR.asn1.x509.PrivateExtension.superclass.constructor.call(this,v);var _=KJUR,x=_.lang.String.isHex,E=_.asn1,A=E.x509.OID.name2oid,P=E.ASN1Util.newObject;this.params=null,this.setByParam=function(T){this.oid=A(T.extname),this.params=T},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var T=this.params.extn;if(typeof T=="string"&&x(T))return T;if(typeof T=="object")try{return P(T).tohex()}catch{}throw new Error("unsupported extn value")},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.x509.PrivateExtension,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRL=function(v){KJUR.asn1.x509.CRL.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DERBitString,P=x.x509,T=P.AlgorithmIdentifier,O=P.TBSCertList;this.params=void 0,this.setByParam=function(k){this.params=k},this.sign=function(){var k=new O(this.params).tohex(),C=new KJUR.crypto.Signature({alg:this.params.sigalg});C.init(this.params.cakey),C.updateHex(k);var U=C.sign();this.params.sighex=U},this.getPEM=function(){return hextopem(this.tohex(),"X509 CRL")},this.tohex=function(){var k=this.params;if(k.tbsobj==null&&(k.tbsobj=new O(k)),k.sighex==null&&k.cakey!=null&&this.sign(),k.sighex==null)throw new Error("sighex or cakey parameter not defined");var C=[];C.push(k.tbsobj),C.push(new T({name:k.sigalg})),C.push(new A({hex:"00"+k.sighex}));var U=new E({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertList=function(v){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERInteger,A=x.DERSequence,P=x.DERTaggedObject;x.DERObjectIdentifier;var T=x.x509,O=T.AlgorithmIdentifier,k=T.Time,C=T.Extensions,U=T.X500Name;this.params=null,this.setByParam=function(N){this.params=N},this.getRevCertSequence=function(){for(var N=[],H=this.params.revcert,D=0;D<H.length;D++){var j=[new E(H[D].sn),new k(H[D].date)];H[D].ext!=null&&j.push(new C(H[D].ext)),N.push(new A({array:j}))}return new A({array:N})},this.tohex=function(){var N=[],H=this.params;if(H.version!=null){var D=H.version-1,j=new E({int:D});N.push(j)}if(N.push(new O({name:H.sigalg})),N.push(new U(H.issuer)),N.push(new k(H.thisupdate)),H.nextupdate!=null&&N.push(new k(H.nextupdate)),H.revcert!=null&&N.push(this.getRevCertSequence()),H.ext!=null){var V=new C(H.ext);N.push(new P({tag:"a0",explicit:!0,obj:V}))}var X=new A({array:N});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLEntry=function(v){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);var _=KJUR,x=_.asn1;this.setCertSerial=function(E){this.sn=new x.DERInteger(E)},this.setRevocationDate=function(E){this.time=new x.x509.Time(E)},this.tohex=function(){var E=new x.DERSequence({array:[this.sn,this.time]});return this.TLV=E.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(v.time!==void 0&&this.setRevocationDate(v.time),v.sn!==void 0&&this.setCertSerial(v.sn))},extendClass(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLNumber=function(v){KJUR.asn1.x509.CRLNumber.superclass.constructor.call(this,v),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.CRLNumber,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLReason=function(v){KJUR.asn1.x509.CRLReason.superclass.constructor.call(this,v),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.CRLReason,KJUR.asn1.x509.Extension),KJUR.asn1.x509.OCSPNonce=function(v){KJUR.asn1.x509.OCSPNonce.superclass.constructor.call(this,v),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.OCSPNonce,KJUR.asn1.x509.Extension),KJUR.asn1.x509.OCSPNoCheck=function(v){KJUR.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,v),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new KJUR.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",v!=null&&(this.params=v)},extendClass(KJUR.asn1.x509.OCSPNoCheck,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AdobeTimeStamp=function(v){KJUR.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,v);var _=KJUR,x=_.asn1,E=x.DERInteger,A=x.DERBoolean,P=x.DERSequence,T=x.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var O=this.params,k=[new E(1)];return k.push(new T({uri:O.uri})),O.reqauth!=null&&k.push(new A(O.reqauth)),this.asn1ExtnValue=new P({array:k}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.AdobeTimeStamp,KJUR.asn1.x509.Extension),KJUR.asn1.x509.X500Name=function(v){KJUR.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _=KJUR,x=_.asn1,E=x.x509,A=E.RDN;this.setByString=function(P,T){T!==void 0&&(this.sRule=T);var O=P.split("/");O.shift();for(var k=[],C=0;C<O.length;C++)if(O[C].match(/^[^=]+=.+$/))k.push(O[C]);else{var U=k.length-1;k[U]=k[U]+"/"+O[C]}for(var C=0;C<k.length;C++)this.asn1Array.push(new A({str:k[C],rule:this.sRule}))},this.setByLdapString=function(P,T){T!==void 0&&(this.sRule=T);var O=E.X500Name.ldapToCompat(P);this.setByString(O,T)},this.setByObject=function(P,T){T!==void 0&&(this.sRule=T);for(var O in P)if(P.hasOwnProperty(O)){var k=new A({str:O+"="+P[O],rule:this.sRule});this.asn1Array?this.asn1Array.push(k):this.asn1Array=[k]}},this.setByParam=function(P){if(P.rule!==void 0&&(this.sRule=P.rule),P.array!==void 0)this.paramArray=P.array;else if(P.str!==void 0)this.setByString(P.str);else if(P.ldapstr!==void 0)this.setByLdapString(P.ldapstr);else if(P.hex!==void 0)this.hTLV=P.hex;else if(P.certissuer!==void 0){var T=new X509;T.readCertPEM(P.certissuer),this.hTLV=T.getIssuerHex()}else if(P.certsubject!==void 0){var T=new X509;T.readCertPEM(P.certsubject),this.hTLV=T.getSubjectHex()}else typeof P=="object"&&P.certsubject===void 0&&P.certissuer===void 0&&this.setByObject(P)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var P=0;P<this.paramArray.length;P++){var T={array:this.paramArray[P]};this.sRule!="utf8"&&(T.rule=this.sRule);var O=new A(T);this.asn1Array.push(O)}var k=new x.DERSequence({array:this.asn1Array});return this.hTLV=k.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name.compatToLDAP=function(v){if(v.substr(0,1)!=="/")throw"malformed input";v=v.substr(1);var _=v.split("/");return _.reverse(),_=_.map(function(x){return x.replace(/,/,"\\,")}),_.join(",")},KJUR.asn1.x509.X500Name.onelineToLDAP=function(v){return KJUR.asn1.x509.X500Name.compatToLDAP(v)},KJUR.asn1.x509.X500Name.ldapToCompat=function(v){for(var _=v.split(","),x=!1,E=[],A=0;_.length>0;A++){var P=_.shift();if(x===!0){var T=E.pop(),O=(T+","+P).replace(/\\,/g,",");E.push(O),x=!1}else E.push(P);P.substr(-1,1)==="\\"&&(x=!0)}return E=E.map(function(k){return k.replace("/","\\/")}),E.reverse(),"/"+E.join("/")},KJUR.asn1.x509.X500Name.ldapToOneline=function(v){return KJUR.asn1.x509.X500Name.ldapToCompat(v)},KJUR.asn1.x509.RDN=function(v){KJUR.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var _=KJUR.asn1.x509.AttributeTypeAndValue;this.setByParam=function(x){x.rule!==void 0&&(this.sRule=x.rule),x.str!==void 0&&this.addByMultiValuedString(x.str),x.array!==void 0&&(this.paramArray=x.array)},this.addByString=function(x){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:x,rule:this.sRule}))},this.addByMultiValuedString=function(x){for(var E=KJUR.asn1.x509.RDN.parseString(x),A=0;A<E.length;A++)this.addByString(E[A])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var x=0;x<this.paramArray.length;x++){var E=this.paramArray[x];E.rule!==void 0&&this.sRule!="utf8"&&(E.rule=this.sRule);var A=new _(E);this.asn1Array.push(A)}var P=new KJUR.asn1.DERSet({array:this.asn1Array});return this.TLV=P.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object),KJUR.asn1.x509.RDN.parseString=function(v){for(var _=v.split(/\+/),x=!1,E=[],A=0;_.length>0;A++){var P=_.shift();if(x===!0){var T=E.pop(),O=(T+"+"+P).replace(/\\\+/g,"+");E.push(O),x=!1}else E.push(P);P.substr(-1,1)==="\\"&&(x=!0)}for(var k=!1,C=[],A=0;E.length>0;A++){var P=E.shift();if(k===!0){var U=C.pop();if(P.match(/"$/)){var O=(U+"+"+P).replace(/^([^=]+)="(.*)"$/,"$1=$2");C.push(O),k=!1}else C.push(U+"+"+P)}else C.push(P);P.match(/^[^=]+="/)&&(k=!0)}return C},KJUR.asn1.x509.AttributeTypeAndValue=function(v){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DERUTF8String,P=x.DERPrintableString,T=x.DERTeletexString,O=x.DERIA5String,k=x.DERVisibleString,C=x.DERBMPString,U=_.lang.String.isMail,N=_.lang.String.isPrintable;this.setByParam=function(H){if(H.rule!==void 0&&(this.sRule=H.rule),H.ds!==void 0&&(this.dsType=H.ds),H.value===void 0&&H.str!==void 0){var D=H.str,j=D.match(/^([^=]+)=(.+)$/);if(j)this.sType=j[1],this.sValue=j[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=H.type,this.sValue=H.value},this.setByString=function(H,D){D!==void 0&&(this.sRule=D);var j=H.match(/^([^=]+)=(.+)$/);if(j)this.setByAttrTypeAndValueStr(j[1],j[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var H=this.sType,D=this.sValue,j=this.sRule;return j==="prn"?H=="CN"&&U(D)?"ia5":N(D)?"prn":"utf8":j==="utf8"?H=="CN"&&U(D)?"ia5":H=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(H,D,j){j!==void 0&&(this.sRule=j),this.sType=H,this.sValue=D},this.getValueObj=function(H,D){if(H=="utf8")return new A({str:D});if(H=="prn")return new P({str:D});if(H=="tel")return new T({str:D});if(H=="ia5")return new O({str:D});if(H=="vis")return new k({str:D});if(H=="bmp")return new C({str:D});throw new Error("unsupported directory string type: type="+H+" value="+D)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var H=KJUR.asn1.x509.OID.atype2obj(this.sType),D=this.getValueObj(this.dsType,this.sValue),j=new E({array:[H,D]});return this.TLV=j.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.x509.SubjectPublicKeyInfo=function(v){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERInteger,A=x.DERBitString,P=x.DERObjectIdentifier,T=x.DERSequence,O=x.ASN1Util.newObject,k=x.x509,C=k.AlgorithmIdentifier,U=_.crypto;U.ECDSA,U.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var N=new T({array:[this.asn1AlgId,this.asn1SubjPKey]});return N},this.tohex=function(){var N=this.getASN1Object();return this.hTLV=N.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(N){try{if(N instanceof RSAKey){var H=O({seq:[{int:{bigint:N.n}},{int:{int:N.e}}]}),D=H.tohex();this.asn1AlgId=new C({name:"rsaEncryption"}),this.asn1SubjPKey=new A({hex:"00"+D})}}catch{}try{if(N instanceof KJUR.crypto.ECDSA){var j=new P({name:N.curveName});this.asn1AlgId=new C({name:"ecPublicKey",asn1params:j}),this.asn1SubjPKey=new A({hex:"00"+N.pubKeyHex})}}catch{}try{if(N instanceof KJUR.crypto.DSA){var j=new O({seq:[{int:{bigint:N.p}},{int:{bigint:N.q}},{int:{bigint:N.g}}]});this.asn1AlgId=new C({name:"dsa",asn1params:j});var V=new E({bigint:N.y});this.asn1SubjPKey=new A({hex:"00"+V.tohex()})}}catch{}},v!==void 0&&this.setPubKey(v)},extendClass(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Time=function(v){KJUR.asn1.x509.Time.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERUTCTime,A=x.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(P){this.timeParams=P},this.setByParam=function(P){this.params=P},this.getType=function(P){return P.match(/^[0-9]{12}Z$/)?"utc":P.match(/^[0-9]{14}Z$/)?"gen":P.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":P.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var P=this.params,T=null;if(typeof P=="string"&&(P={str:P}),P!=null&&P.str&&(P.type==null||P.type==null)&&(P.type=this.getType(P.str)),P!=null&&P.str?(P.type=="utc"&&(T=new E(P.str)),P.type=="gen"&&(T=new A(P.str))):this.type=="gen"?T=new A:T=new E,T==null)throw new Error("wrong setting for Time");return this.TLV=T.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},KJUR.asn1.x509.Time_bak=function(v){KJUR.asn1.x509.Time_bak.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERUTCTime,A=x.DERGeneralizedTime;this.setTimeParams=function(P){this.timeParams=P},this.tohex=function(){var P=null;return this.timeParams!=null?this.type=="utc"?P=new E(this.timeParams):P=new A(this.timeParams):this.type=="utc"?P=new E:P=new A,this.TLV=P.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",v!==void 0&&(v.type!==void 0?this.type=v.type:v.str!==void 0&&(v.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),v.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=v)},extendClass(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier=function(v){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var _=KJUR,x=_.asn1,E=x.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var P=null;for(var T in E)T===this.nameAlg&&(P=E[T]);if(P!==null)return this.hTLV=P,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=x.x509.OID.name2obj(this.nameAlg));var O=[this.asn1Alg];this.asn1Params!==null&&O.push(this.asn1Params);var k=new x.DERSequence({array:O});return this.hTLV=k.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&(v.name!==void 0&&(this.nameAlg=v.name),v.asn1params!==void 0&&(this.asn1Params=v.asn1params),v.paramempty!==void 0&&(this.paramEmpty=v.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var A=this.nameAlg.toLowerCase();A.substr(-7,7)!=="withdsa"&&A.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new x.DERNull)}},extendClass(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},KJUR.asn1.x509.GeneralName=function(v){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.x509,A=E.X500Name,P=E.OtherName,T=x.DERIA5String;x.DERPrintableString;var O=x.DEROctetString,k=x.DERTaggedObject,C=x.ASN1Object,U=Error;this.params=null,this.setByParam=function(N){this.params=N},this.tohex=function(){var N=this.params,H,j,D,j=!1;if(N.other!==void 0)H="a0",D=new P(N.other);else if(N.rfc822!==void 0)H="81",D=new T({str:N.rfc822});else if(N.dns!==void 0)H="82",D=new T({str:N.dns});else if(N.dn!==void 0)H="a4",j=!0,typeof N.dn=="string"?D=new A({str:N.dn}):N.dn instanceof KJUR.asn1.x509.X500Name?D=N.dn:D=new A(N.dn);else if(N.ldapdn!==void 0)H="a4",j=!0,D=new A({ldapstr:N.ldapdn});else if(N.certissuer!==void 0||N.certsubj!==void 0){H="a4",j=!0;var V,X,re=null;if(N.certsubj!==void 0?(V=!1,X=N.certsubj):(V=!0,X=N.certissuer),X.match(/^[0-9A-Fa-f]+$/),X.indexOf("-----BEGIN ")!=-1&&(re=pemtohex(X)),re==null)throw new Error("certsubj/certissuer not cert");var ee=new X509;ee.hex=re;var fe;V?fe=ee.getIssuerHex():fe=ee.getSubjectHex(),D=new C,D.hTLV=fe}else if(N.uri!==void 0)H="86",D=new T({str:N.uri});else if(N.ip!==void 0){H="87";var le,pe=N.ip;try{if(pe.match(/^[0-9a-f]+$/)){var ie=pe.length;if(ie==8||ie==16||ie==32||ie==64)le=pe;else throw"err"}else le=iptohex(pe)}catch(ae){throw new U("malformed IP address: "+N.ip+":"+ae.message)}D=new O({hex:le})}else throw new U("improper params");var he=new k({tag:H,explicit:j,obj:D});return he.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralNames=function(v){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);var _=KJUR,x=_.asn1;this.setByParamArray=function(E){for(var A=0;A<E.length;A++){var P=new x.x509.GeneralName(E[A]);this.asn1Array.push(P)}},this.tohex=function(){var E=new x.DERSequence({array:this.asn1Array});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof v<"u"&&this.setByParamArray(v)},extendClass(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OtherName=function(v){KJUR.asn1.x509.OtherName.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DERObjectIdentifier,A=x.DERSequence,P=x.ASN1Util.newObject;this.params=null,this.setByParam=function(T){this.params=T},this.tohex=function(){var T=this.params;if(T.oid==null||T.value==null)throw new Error("oid or value not specified");var O=new E({oid:T.oid}),k=P({tag:{tag:"a0",explicit:!0,obj:T.value}}),C=new A({array:[O,k]});return C.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.x509.OtherName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OID=new function(){var v=KJUR.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(_){if(typeof this.objCache[_]<"u")return this.objCache[_];if(typeof this.name2oidList[_]>"u")throw"Name of ObjectIdentifier not defined: "+_;var x=this.name2oidList[_],E=new v({oid:x});return this.objCache[_]=E,E},this.atype2obj=function(_){if(this.objCache[_]!==void 0)return this.objCache[_];var x;if(_.match(/^\d+\.\d+\.[0-9.]+$/))x=_;else if(this.atype2oidList[_]!==void 0)x=this.atype2oidList[_];else if(this.name2oidList[_]!==void 0)x=this.name2oidList[_];else throw new Error("AttributeType name undefined: "+_);var E=new v({oid:x});return this.objCache[_]=E,E},this.registerOIDs=function(_){if(this.checkOIDs(_))for(var x in _)this.name2oidList[x]=_[x]},this.checkOIDs=function(_){try{var x=Object.keys(_);return x.length==0?!1:(x.map(function(E,A,P){var T=this[E];if(!T.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},_),!0)}catch{return!1}}},KJUR.asn1.x509.OID.oid2name=function(v){var _=KJUR.asn1.x509.OID.name2oidList;for(var x in _)if(_[x]==v)return x;return""},KJUR.asn1.x509.OID.oid2atype=function(v){var _=KJUR.asn1.x509.OID.atype2oidList;for(var x in _)if(_[x]==v)return x;return v},KJUR.asn1.x509.OID.name2oid=function(v){if(v.match(/^[0-9.]+$/))return v;var _=KJUR.asn1.x509.OID.name2oidList;return _[v]===void 0?"":_[v]},KJUR.asn1.x509.X509Util={},KJUR.asn1.x509.X509Util.newCertPEM=function(v){var _=KJUR.asn1.x509;_.TBSCertificate;var x=_.Certificate,E=new x(v);return E.getPEM()},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),(typeof KJUR.asn1.cms>"u"||!KJUR.asn1.cms)&&(KJUR.asn1.cms={}),KJUR.asn1.cms.Attribute=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.DERSet,T=E.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(O){this.params=O},this.getValueArray=function(){throw new _("not yet implemented abstract")},this.tohex=function(){var O=new T({oid:this.typeOid}),k=new P({array:this.getValueArray()}),C=new A({array:[O,k]});return C.tohex()},this.getEncodedHex=function(){return this.tohex()}},extendClass(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentType=function(v){var _=KJUR,x=_.asn1;x.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var E=new x.DERObjectIdentifier(this.params.type);return[E]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.MessageDigest=function(v){var _=KJUR,x=_.asn1,E=x.DEROctetString,A=x.cms;A.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var P=new E(this.params);return[P]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningTime=function(v){var _=KJUR,x=_.asn1;x.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var E=new x.x509.Time(this.params);return[E]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificate=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.cms,T=P.ESSCertID;x.crypto,P.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new _("parameter 'array' not specified");for(var O=this.params.array,k=[],C=0;C<O.length;C++){var U=O[C];v.hasis==!1&&typeof U=="string"&&(U.indexOf("-----BEGIN")!=-1||ASN1HEX.isASN1HEX(U))&&(U={cert:U}),U.hasis!=!1&&v.hasis==!1&&(U.hasis=!1),k.push(new T(U))}var N=new A({array:k}),H=new A({array:[N]});return[H]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.ESSCertID=function(v){KJUR.asn1.cms.ESSCertID.superclass.constructor.call(this);var _=Error,x=KJUR,E=x.asn1,A=E.DEROctetString,P=E.DERSequence,T=E.cms.IssuerSerial;this.params=null,this.getCertHash=function(O,k){if(O.hash!=null)return O.hash;if(typeof O=="string"&&O.indexOf("-----BEGIN")==-1&&!ASN1HEX.isASN1HEX(O))return O;var C;if(typeof O=="string")C=O;else if(O.cert!=null)C=O.cert;else throw new _("hash nor cert unspecified");var U;C.indexOf("-----BEGIN")!=-1?U=pemtohex(C):U=C,typeof O=="string"&&(O.indexOf("-----BEGIN")!=-1?U=pemtohex(O):ASN1HEX.isASN1HEX(O)&&(U=O));var N;if(O.alg!=null)N=O.alg;else if(k!=null)N=k;else throw new _("hash alg unspecified");return x.crypto.Util.hashHex(U,N)},this.tohex=function(){var O=this.params,k=this.getCertHash(O,"sha1"),C=[];C.push(new A({hex:k})),(typeof O=="string"&&O.indexOf("-----BEGIN")!=-1||O.cert!=null&&O.hasis!=!1||O.issuer!=null&&O.serial!=null)&&C.push(new T(O));var U=new P({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.ESSCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SigningCertificateV2=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence;E.x509;var P=E.cms,T=P.ESSCertIDv2;x.crypto,P.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new _("parameter 'array' not specified");for(var O=this.params.array,k=[],C=0;C<O.length;C++){var U=O[C];(v.alg!=null||v.hasis==!1)&&typeof U=="string"&&(U.indexOf("-----BEGIN")!=-1||ASN1HEX.isASN1HEX(U))&&(U={cert:U}),U.alg==null&&v.alg!=null&&(U.alg=v.alg),U.hasis!=!1&&v.hasis==!1&&(U.hasis=!1),k.push(new T(U))}var N=new A({array:k}),H=new A({array:[N]});return[H]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.ESSCertIDv2=function(v){KJUR.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.DEROctetString,A=x.DERSequence,P=x.cms.IssuerSerial,T=x.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var O=this.params,k=this.getCertHash(O,"sha256"),C=[];O.alg!=null&&O.alg!="sha256"&&C.push(new T({name:O.alg})),C.push(new E({hex:k})),(typeof O=="string"&&O.indexOf("-----BEGIN")!=-1||O.cert!=null&&O.hasis!=!1||O.issuer!=null&&O.serial!=null)&&C.push(new P(O));var U=new A({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.ESSCertIDv2,KJUR.asn1.cms.ESSCertID),KJUR.asn1.cms.IssuerSerial=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERInteger,P=E.DERSequence,T=E.cms,O=E.x509,k=O.GeneralNames,C=X509;T.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(U){this.params=U},this.tohex=function(){var U=this.params,N,H;if(typeof U=="string"&&U.indexOf("-----BEGIN")!=-1||U.cert!=null){var D;U.cert!=null?D=U.cert:D=U;var j=new C;j.readCertPEM(D),N=j.getIssuer(),H={hex:j.getSerialNumberHex()}}else if(U.issuer!=null&&U.serial)N=U.issuer,H=U.serial;else throw new _("cert or issuer and serial parameter not specified");var V=new k([{dn:N}]),X=new A(H),re=new P({array:[V,X]});return re.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.IssuerSerial,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerIdentifier=function(v){var _=KJUR,x=_.asn1;x.DERInteger,x.DERSequence;var E=x.cms,A=E.IssuerAndSerialNumber,P=E.SubjectKeyIdentifier,T=x.x509;T.X500Name,E.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params;if(O.type=="isssn"){var k=new A(O);return k.tohex()}else if(O.type=="skid"){var C=new P(O);return C.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SignerIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.cms.IssuerAndSerialNumber=function(v){var _=KJUR,x=_.asn1,E=x.DERInteger,A=x.DERSequence,P=x.cms,T=x.x509,O=T.X500Name,k=X509,C=Error;P.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params,N,H;if(typeof U=="string"&&U.indexOf("-----BEGIN")!=-1||U.cert!=null){var D;U.cert!=null?D=U.cert:D=U;var j=new k;j.readCertPEM(D),N=j.getIssuer(),H={hex:j.getSerialNumberHex()}}else if(U.issuer!=null&&U.serial)N=U.issuer,H=U.serial;else throw new C("cert or issuer and serial parameter not specified");var V=new O(N),X=new E(H),re=new A({array:[V,X]});return re.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(U){this.params=U},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SubjectKeyIdentifier=function(v){var _=KJUR,x=_.asn1;x.DERInteger,x.DERSequence;var E=x.ASN1Util.newObject,A=x.cms;A.IssuerAndSerialName,A.SubjectKeyIdentifier;var P=x.x509;P.X500Name;var T=X509,O=Error;A.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var k=this.params;if(k.cert==null&&k.skid==null)throw new O("property cert nor skid undefined");var C;if(k.cert!=null){var U=new T(k.cert),N=U.getExtSubjectKeyIdentifier();C=N.kid.hex}else k.skid!=null&&(C=k.skid);var H=E({tag:{tage:"a0",obj:{octstr:{hex:C}}}});return H.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SubjectKeyIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.cms.AttributeList=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSet,P=E.cms;P.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(T){this.params=T},this.tohex=function(){var T=this.params;if(this.hTLV!=null)return this.hTLV;var O=!0;T.sortflag!=null&&(O=T.sortflag);for(var k=T.array,C=[],U=0;U<k.length;U++){var N=k[U],H=N.attr;if(H=="contentType")C.push(new P.ContentType(N));else if(H=="messageDigest")C.push(new P.MessageDigest(N));else if(H=="signingTime")C.push(new P.SigningTime(N));else if(H=="signingCertificate")C.push(new P.SigningCertificate(N));else if(H=="signingCertificateV2")C.push(new P.SigningCertificateV2(N));else if(H=="signaturePolicyIdentifier")C.push(new KJUR.asn1.cades.SignaturePolicyIdentifier(N));else if(H=="signatureTimeStamp"||H=="timeStampToken")C.push(new KJUR.asn1.cades.SignatureTimeStamp(N));else throw new _("unknown attr: "+H)}var D=new A({array:C,sortflag:O});return this.hTLV=D.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerInfo=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERInteger,P=E.DEROctetString,T=E.DERSequence,O=E.DERTaggedObject,k=E.cms,C=k.SignerIdentifier,U=k.AttributeList;k.ContentType,k.EncapsulatedContentInfo,k.MessageDigest,k.SignedData;var N=E.x509,H=N.AlgorithmIdentifier,D=x.crypto,j=KEYUTIL;k.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var V=this.params,X=V.sigalg,re=new U(V.sattrs).tohex(),ee=j.getKey(V.signkey),fe=new D.Signature({alg:X});fe.init(ee),fe.updateHex(re);var le=fe.sign();V.sighex=le},this.tohex=function(){var V=this.params,X=[];if(X.push(new A({int:V.version})),X.push(new C(V.id)),X.push(new H({name:V.hashalg})),V.sattrs!=null){var re=new U(V.sattrs);try{X.push(new O({tag:"a0",explicit:!1,obj:re}))}catch(fe){throw new _("si sattr error: "+fe)}}if(V.sigalgfield!=null?X.push(new H({name:V.sigalgfield})):X.push(new H({name:V.sigalg})),V.sighex==null&&V.signkey!=null&&this.sign(),X.push(new P({hex:V.sighex})),V.uattrs!=null){var re=new U(V.uattrs);try{X.push(new O({tag:"a1",explicit:!1,obj:re}))}catch(le){throw new _("si uattr error: "+le)}}var ee=new T({array:X});return ee.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.EncapsulatedContentInfo=function(v){var _=KJUR,x=_.asn1,E=x.DERTaggedObject,A=x.DERSequence,P=x.DERObjectIdentifier,T=x.DEROctetString,O=x.cms;O.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var k=this.params,C=[];if(C.push(new P(k.type)),k.content!=null&&(k.content.hex!=null||k.content.str!=null)&&k.isDetached!=!0){var U=new T(k.content),N=new E({tag:"a0",explicit:!0,obj:U});C.push(N)}var H=new A({array:C});return H.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(k){this.params=k},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentInfo=function(v){var _=KJUR,x=_.asn1,E=x.DERTaggedObject,A=x.DERSequence,P=x.DERObjectIdentifier,T=x.x509;T.OID.name2obj,KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params,k=[];k.push(new P(O.type));var C=new E({tag:"a0",explicit:!0,obj:O.obj});k.push(C);var U=new A({array:k});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(O){this.params=O},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignedData=function(v){var _=KJUR,x=_.asn1;x.ASN1Object;var E=x.DERInteger,A=x.DERSet,P=x.DERSequence;x.DERTaggedObject;var T=x.cms,O=T.EncapsulatedContentInfo,k=T.SignerInfo,C=T.ContentInfo,U=T.CertificateSet,N=T.RevocationInfoChoices,H=x.x509,D=H.AlgorithmIdentifier;KJUR.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var j=this.params;this._setDigestAlgs(j),this._setContentTypeByEContent(j),this._setMessageDigestByEContent(j),this._setSignerInfoVersion(j),this._setSignedDataVersion(j)},this._setDigestAlgs=function(j){for(var V={},X=j.sinfos,re=0;re<X.length;re++){var ee=X[re];V[ee.hashalg]=1}j.hashalgs=Object.keys(V).sort()},this._setContentTypeByEContent=function(j){for(var V=j.econtent.type,X=j.sinfos,re=0;re<X.length;re++){var ee=X[re],fe=this._getAttrParamByName(ee,"contentType");fe.type=V}},this._setMessageDigestByEContent=function(j){var V=j.econtent;j.econtent.type;var X=V.content.hex;X==null&&V.type=="data"&&V.content.str!=null&&(X=rstrtohex(V.content.str));for(var re=j.sinfos,ee=0;ee<re.length;ee++){var fe=re[ee],le=fe.hashalg,pe=this._getAttrParamByName(fe,"messageDigest"),ie=KJUR.crypto.Util.hashHex(X,le);pe.hex=ie}},this._getAttrParamByName=function(j,V){for(var X=j.sattrs.array,re=0;re<X.length;re++)if(X[re].attr==V)return X[re]},this._setSignerInfoVersion=function(j){for(var V=j.sinfos,X=0;X<V.length;X++){var re=V[X],ee=1;re.id.type=="skid"&&(ee=3),re.version=ee}},this._setSignedDataVersion=function(j){var V=this._getSignedDataVersion(j);j.version=V},this._getSignedDataVersion=function(j){if(j.revinfos!=null)for(var V=j.revinfos,X=0;X<V.length;X++){var re=V[X];if(re.ocsp!=null)return 5}for(var ee=j.sinfos,X=0;X<ee.length;X++){var fe=j.sinfos[X];if(fe.version==3)return 3}return j.econtent.type!="data"?3:1},this.tohex=function(){var j=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),j.fixed!=!0&&this.checkAndFixParam();var V=[];V.push(new E({int:j.version}));for(var X=[],re=0;re<j.hashalgs.length;re++){var ee=j.hashalgs[re];X.push(new D({name:ee}))}V.push(new A({array:X})),V.push(new O(j.econtent)),j.certs!=null&&V.push(new U(j.certs)),j.revinfos!=null&&V.push(new N(j.revinfos));for(var fe=[],re=0;re<j.sinfos.length;re++){var le=j.sinfos[re];fe.push(new k(le))}V.push(new A({array:fe}));var pe=new P({array:V});return pe.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var j=new C({type:"signed-data",obj:this});return j},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CertificateSet=function(v){KJUR.asn1.cms.CertificateSet.superclass.constructor.call(this);var _=Error,x=KJUR.asn1,E=x.DERTaggedObject,A=x.DERSet,P=x.ASN1Object;this.params=null,this.tohex=function(){var T=this.params,O=[],k;if(T instanceof Array)k=T;else if(T.array!=null)k=T.array;else throw new _("cert array not specified");for(var C=0;C<k.length;C++){var U=k[C],N=pemtohex(U),H=new P;H.hTLV=N,O.push(H)}var D={array:O};T.sortflag==!1&&(D.sortflag=!1);var j=new A(D),V=new E({tag:"a0",explicit:!1,obj:j});return V.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.CertificateSet,KJUR.asn1.ASN1Object),KJUR.asn1.cms.RevocationInfoChoices=function(v){KJUR.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(!_ instanceof Array)throw new Error("params is not array");for(var x=[],E=0;E<_.length;E++)x.push(new KJUR.asn1.cms.RevocationInfoChoice(_[E]));var A=KJUR.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:x}}});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.RevocationInfoChoices,KJUR.asn1.ASN1Object),KJUR.asn1.cms.RevocationInfoChoice=function(v){KJUR.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(_.crl!=null&&typeof _.crl=="string"){var x=_.crl;return _.crl.indexOf("-----BEGIN")!=-1&&(x=pemtohex(_.crl)),x}else if(_.ocsp!=null){var E=KJUR.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new KJUR.asn1.cms.OtherRevocationFormat(_)}});return E.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.RevocationInfoChoice,KJUR.asn1.ASN1Object),KJUR.asn1.cms.OtherRevocationFormat=function(v){KJUR.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var _=Error,x=KJUR,E=x.asn1,A=E.ASN1Util.newObject,P=x.lang.String.isHex;this.params=null,this.tohex=function(){var T=this.params;if(T.ocsp==null)throw new _("property ocsp not specified");if(!P(T.ocsp)||!ASN1HEX.isASN1HEX(T.ocsp))throw new _("ocsp value not ASN.1 hex string");var O=A({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:T.ocsp}}]});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cms.OtherRevocationFormat,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CMSUtil=new function(){},KJUR.asn1.cms.CMSUtil.newSignedData=function(v){return new KJUR.asn1.cms.SignedData(v)},KJUR.asn1.cms.CMSUtil.verifySignedData=function(v){var _=KJUR,x=_.asn1,E=x.cms;E.SignerInfo,E.SignedData,E.SigningTime,E.SigningCertificate,E.SigningCertificateV2;var A=x.cades;A.SignaturePolicyIdentifier;var P=_.lang.String.isHex,T=ASN1HEX,O=T.getVbyList,k=T.getTLVbyList,C=T.getIdxbyList,U=T.getChildIdx,N=T.getTLV,H=T.oidname,D=_.crypto.Util.hashHex;v.cms===void 0&&P(v.cms);var j=v.cms,V=function(ae,te){for(var ue,ne=3;ne<6;ne++)if(ue=C(ae,0,[1,0,ne]),ue!==void 0){var J=ae.substr(ue,2);J==="a0"&&(te.certsIdx=ue),J==="a1"&&(te.revinfosIdx=ue),J==="31"&&(te.signerinfosIdx=ue)}},X=function(ae,te){var ue=te.signerinfosIdx;if(ue!==void 0){var ne=U(ae,ue);te.signerInfoIdxList=ne;for(var J=0;J<ne.length;J++){var q=ne[J],F={idx:q};re(ae,F),te.signerInfos.push(F)}}},re=function(ae,te){var ue=te.idx;te.signerid_issuer1=k(ae,ue,[1,0],"30"),te.signerid_serial1=O(ae,ue,[1,1],"02"),te.hashalg=H(O(ae,ue,[2,0],"06"));var ne=C(ae,ue,[3],"a0");te.idxSignedAttrs=ne,ee(ae,te,ne);var J=U(ae,ue),q=J.length;if(q<6)throw"malformed SignerInfo";te.sigalg=H(O(ae,ue,[q-2,0],"06")),te.sigval=O(ae,ue,[q-1],"04")},ee=function(ae,te,ue){var ne=U(ae,ue);te.signedAttrIdxList=ne;for(var J=0;J<ne.length;J++){var q=ne[J],F=O(ae,q,[0],"06"),L;F==="2a864886f70d010905"?(L=hextoutf8(O(ae,q,[1,0])),te.saSigningTime=L):F==="2a864886f70d010904"&&(L=O(ae,q,[1,0],"04"),te.saMessageDigest=L)}},fe=function(ae,te){if(O(ae,0,[0],"06")!=="2a864886f70d010702")return te;te.cmsType="signedData",te.econtent=O(ae,0,[1,0,2,1,0]),V(ae,te),te.signerInfos=[],X(ae,te)},le=function(ae,te){for(var ue=te.parse.signerInfos,ne=ue.length,J=!0,q=0;q<ne;q++){var F=ue[q];ie(ae,te,F),F.isValid||(J=!1)}te.isValid=J},pe=function(ae,te,ue,ne){var J=te.parse.certsIdx,q;if(te.certs===void 0){q=[],te.certkeys=[];for(var F=U(ae,J),L=0;L<F.length;L++){var Z=N(ae,F[L]),Q=new X509;Q.readCertHex(Z),q[L]=Q,te.certkeys[L]=Q.getPublicKey()}te.certs=q}else q=te.certs;te.cccc=q.length,te.cccci=F.length;for(var L=0;L<q.length;L++){var de=Q.getIssuerHex(),ye=Q.getSerialNumberHex();ue.signerid_issuer1===de&&ue.signerid_serial1===ye&&(ue.certkey_idx=L)}},ie=function(ae,te,ue,ne){ue.verifyDetail={};var J=ue.verifyDetail,q=te.parse.econtent,F=ue.hashalg,L=ue.saMessageDigest;J.validMessageDigest=!1,D(q,F)===L&&(J.validMessageDigest=!0),pe(ae,te,ue),J.validSignatureValue=!1;var Z=ue.sigalg,Q="31"+N(ae,ue.idxSignedAttrs).substr(2);ue.signedattrshex=Q;var de=te.certs[ue.certkey_idx].getPublicKey(),ye=new KJUR.crypto.Signature({alg:Z});ye.init(de),ye.updateHex(Q);var oe=ye.verify(ue.sigval);J.validSignatureValue_isValid=oe,oe===!0&&(J.validSignatureValue=!0),ue.isValid=!1,J.validMessageDigest&&J.validSignatureValue&&(ue.isValid=!0)},he={isValid:!1,parse:{}};return fe(j,he.parse),le(j,he),he},KJUR.asn1.cms.CMSParser=function(){var v=Error,_=X509,x=new _,E=ASN1HEX,A=E.getV,P=E.getTLV;E.getIdxbyList;var T=E.getTLVbyList,O=E.getTLVbyListEx,k=E.getVbyList,C=E.getVbyListEx,U=E.getChildIdx;this.getCMSSignedData=function(N){var H=T(N,0,[1,0]),D=this.getSignedData(H);return D},this.getSignedData=function(N){var H=U(N,0),D={},j=A(N,H[0]),V=parseInt(j,16);D.version=V;var X=P(N,H[1]);D.hashalgs=this.getHashAlgArray(X);var re=P(N,H[2]);D.econtent=this.getEContent(re);var ee=O(N,0,["[0]"]);ee!=null&&(D.certs=this.getCertificateSet(ee)),O(N,0,["[1]"]);var fe=O(N,0,[3]);return D.sinfos=this.getSignerInfos(fe),D},this.getHashAlgArray=function(N){for(var H=U(N,0),D=new _,j=[],V=0;V<H.length;V++){var X=P(N,H[V]),re=D.getAlgorithmIdentifierName(X);j.push(re)}return j},this.getEContent=function(N){var H={},D=k(N,0,[0]),j=k(N,0,[1,0]);return H.type=KJUR.asn1.x509.OID.oid2name(ASN1HEX.hextooidstr(D)),H.content={hex:j},H},this.getSignerInfos=function(N){for(var H=[],D=U(N,0),j=0;j<D.length;j++){var V=P(N,D[j]),X=this.getSignerInfo(V);H.push(X)}return H},this.getSignerInfo=function(N){var H={},D=U(N,0),j=E.getInt(N,D[0],-1);j!=-1&&(H.version=j);var V=P(N,D[1]),X=this.getIssuerAndSerialNumber(V);H.id=X;var re=P(N,D[2]),ee=x.getAlgorithmIdentifierName(re);H.hashalg=ee;var fe=O(N,0,["[0]"]);if(fe!=null){var le=this.getAttributeList(fe);H.sattrs=le}var pe=O(N,0,[3]),ie=x.getAlgorithmIdentifierName(pe);H.sigalg=ie;var he=C(N,0,[4]);H.sighex=he;var ae=O(N,0,["[1]"]);if(ae!=null){var te=this.getAttributeList(ae);H.uattrs=te}return H},this.getSignerIdentifier=function(N){if(N.substr(0,2)=="30")return this.getIssuerAndSerialNumber(N);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(N){var H={type:"isssn"},D=U(N,0),j=P(N,D[0]);H.issuer=x.getX500Name(j);var V=A(N,D[1]);return H.serial={hex:V},H},this.getAttributeList=function(N){for(var H=[],D=U(N,0),j=0;j<D.length;j++){var V=P(N,D[j]),X=this.getAttribute(V);H.push(X)}return{array:H}},this.getAttribute=function(N){var H={},D=U(N,0),j=E.getOID(N,D[0]),V=KJUR.asn1.x509.OID.oid2name(j);H.attr=V;var X=P(N,D[1]),re=U(X,0);if(re.length==1)H.valhex=P(X,re[0]);else{for(var ee=[],fe=0;fe<re.length;fe++)ee.push(P(X,re[fe]));H.valhex=ee}return V=="contentType"?this.setContentType(H):V=="messageDigest"?this.setMessageDigest(H):V=="signingTime"?this.setSigningTime(H):V=="signingCertificate"?this.setSigningCertificate(H):V=="signingCertificateV2"?this.setSigningCertificateV2(H):V=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(H),H},this.setContentType=function(N){var H=E.getOIDName(N.valhex,0,null);H!=null&&(N.type=H,delete N.valhex)},this.setSigningTime=function(N){var H=A(N.valhex,0),D=hextoutf8(H);N.str=D,delete N.valhex},this.setMessageDigest=function(N){var H=A(N.valhex,0);N.hex=H,delete N.valhex},this.setSigningCertificate=function(N){var H=U(N.valhex,0);if(H.length>0){for(var D=P(N.valhex,H[0]),j=U(D,0),V=[],X=0;X<j.length;X++){var re=P(D,j[X]),ee=this.getESSCertID(re);V.push(ee)}N.array=V}if(H.length>1){var fe=P(N.valhex,H[1]);N.polhex=fe}delete N.valhex},this.setSignaturePolicyIdentifier=function(N){var H=U(N.valhex,0);if(H.length>0){var D=E.getOID(N.valhex,H[0]);N.oid=D}if(H.length>1){var j=new _,V=U(N.valhex,H[1]),X=P(N.valhex,V[0]),re=j.getAlgorithmIdentifierName(X);N.alg=re;var ee=A(N.valhex,V[1]);N.hash=ee}delete N.valhex},this.setSigningCertificateV2=function(N){var H=U(N.valhex,0);if(H.length>0){for(var D=P(N.valhex,H[0]),j=U(D,0),V=[],X=0;X<j.length;X++){var re=P(D,j[X]),ee=this.getESSCertIDv2(re);V.push(ee)}N.array=V}if(H.length>1){var fe=P(N.valhex,H[1]);N.polhex=fe}delete N.valhex},this.getESSCertID=function(N){var H={},D=U(N,0);if(D.length>0){var j=A(N,D[0]);H.hash=j}if(D.length>1){var V=P(N,D[1]),X=this.getIssuerSerial(V);X.serial!=null&&(H.serial=X.serial),X.issuer!=null&&(H.issuer=X.issuer)}return H},this.getESSCertIDv2=function(N){var H={},D=U(N,0);if(D.length<1||3<D.length)throw new v("wrong number of elements");var j=0;if(N.substr(D[0],2)=="30"){var V=P(N,D[0]);H.alg=x.getAlgorithmIdentifierName(V),j++}else H.alg="sha256";var X=A(N,D[j]);if(H.hash=X,D.length>j+1){var re=P(N,D[j+1]),ee=this.getIssuerSerial(re);H.issuer=ee.issuer,H.serial=ee.serial}return H},this.getIssuerSerial=function(N){var H={},D=U(N,0),j=P(N,D[0]),V=x.getGeneralNames(j),X=V[0].dn;H.issuer=X;var re=A(N,D[1]);return H.serial={hex:re},H},this.getCertificateSet=function(N){for(var H=U(N,0),D=[],j=0;j<H.length;j++){var V=P(N,H[j]);if(V.substr(0,2)=="30"){var X=hextopem(V,"CERTIFICATE");D.push(X)}}return{array:D,sortflag:!1}}},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),(typeof KJUR.asn1.tsp>"u"||!KJUR.asn1.tsp)&&(KJUR.asn1.tsp={}),KJUR.asn1.tsp.TimeStampToken=function(v){var _=KJUR,x=_.asn1,E=x.tsp;E.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var A=new E.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=A.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.TimeStampToken,KJUR.asn1.cms.SignedData),KJUR.asn1.tsp.TSTInfo=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DERInteger,P=x.DERBoolean,T=x.DERGeneralizedTime,O=x.DERObjectIdentifier,k=x.DERTaggedObject,C=x.tsp,U=C.MessageImprint,N=C.Accuracy;x.x509.X500Name;var H=x.x509.GeneralName;if(C.TSTInfo.superclass.constructor.call(this),this.dVersion=new A({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var D=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(D.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(D.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(D.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");D.push(this.dGenTime),this.dAccuracy!=null&&D.push(this.dAccuracy),this.dOrdering!=null&&D.push(this.dOrdering),this.dNonce!=null&&D.push(this.dNonce),this.dTsa!=null&&D.push(this.dTsa);var j=new E({array:D});return this.hTLV=j.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0){if(typeof v.policy=="string"){if(!v.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new O({oid:v.policy})}v.messageImprint!==void 0&&(this.dMessageImprint=new U(v.messageImprint)),v.serial!==void 0&&(this.dSerial=new A(v.serial)),v.genTime!==void 0&&(this.dGenTime=new T(v.genTime)),v.accuracy!==void 0&&(this.dAccuracy=new N(v.accuracy)),v.ordering!==void 0&&v.ordering==!0&&(this.dOrdering=new P),v.nonce!==void 0&&(this.dNonce=new A(v.nonce)),v.tsa!==void 0&&(this.dTsa=new k({tag:"a0",explicit:!0,obj:new H({dn:v.tsa})}))}},extendClass(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.Accuracy=function(v){var _=KJUR,x=_.asn1,E=x.ASN1Util.newObject;x.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var A=this.params,P=[];return A.seconds!=null&&typeof A.seconds=="number"&&P.push({int:A.seconds}),A.millis!=null&&typeof A.millis=="number"&&P.push({tag:{tagi:"80",obj:{int:A.millis}}}),A.micros!=null&&typeof A.micros=="number"&&P.push({tag:{tagi:"81",obj:{int:A.micros}}}),E({seq:P}).tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.MessageImprint=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DEROctetString,P=x.x509,T=P.AlgorithmIdentifier;x.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params,k=new T({name:O.alg}),C=new A({hex:O.hash}),U=new E({array:[k,C]});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampReq=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DERInteger,P=x.DERBoolean;x.ASN1Object;var T=x.DERObjectIdentifier,O=x.tsp,k=O.MessageImprint;O.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var C=this.params,U=[];U.push(new A({int:1})),C.messageImprint instanceof KJUR.asn1.ASN1Object?U.push(C.messageImprint):U.push(new k(C.messageImprint)),C.policy!=null&&U.push(new T(C.policy)),C.nonce!=null&&U.push(new A(C.nonce)),C.certreq==!0&&U.push(new P);var N=new E({array:U});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampResp=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence;x.ASN1Object;var A=x.tsp,P=A.PKIStatusInfo;A.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var T=this.params,O=[];if(T.econtent!=null||T.tst!=null)if(T.statusinfo!=null?O.push(new P(T.statusinfo)):O.push(new P("granted")),T.econtent!=null)O.push(new A.TimeStampToken(T).getContentInfo());else if(T.tst instanceof x.ASN1Object)O.push(T.tst);else throw new Error("improper member tst value");else if(T.statusinfo!=null)O.push(new P(T.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var k=new E({array:O});return k.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatusInfo=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.tsp,T=P.PKIStatus,O=P.PKIFreeText,k=P.PKIFailureInfo;P.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var C=this.params,U=[];if(typeof C=="string")U.push(new T(C));else{if(C.status==null)throw new _("property 'status' unspecified");U.push(new T(C.status)),C.statusstr!=null&&U.push(new O(C.statusstr)),C.failinfo!=null&&U.push(new k(C.failinfo))}var N=new A({array:U});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERInteger,P=E.tsp;P.PKIStatus.superclass.constructor.call(this);var T={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var O=this.params,k;if(typeof O=="string")try{k=T[O]}catch{throw new _("undefined name: "+O)}else if(typeof O=="number")k=O;else throw new _("unsupported params");return new A({int:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFreeText=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.DERUTF8String,T=E.tsp;T.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params;if(!O instanceof Array)throw new _("wrong params: not array");for(var k=[],C=0;C<O.length;C++)k.push(new P({str:O[C]}));var U=new A({array:k});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERBitString,P=E.tsp,T=P.PKIFailureInfo,O={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};T.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var k=this.params,C=0;if(typeof k=="number"&&0<=k&&k<=25){C|=1<<k;for(var U=C.toString(2),N="",H=U.length-1;H>=0;H--)N+=U[H];return N}else{if(typeof k=="string"&&O[k]!=null)return namearraytobinstr([k],O);if(typeof k=="object"&&k.length!=null)return namearraytobinstr(k,O);throw new _("wrong params")}},this.tohex=function(){this.params;var k=this.getBinValue();return new A({bin:k}).tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.AbstractTSAAdapter=function(v){this.getTSTHex=function(_,x){throw"not implemented yet"}},KJUR.asn1.tsp.SimpleTSAAdapter=function(v){var _=KJUR,x=_.asn1,E=x.tsp,A=_.crypto.Util.hashHex;E.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(P,T){var O=A(P,T);this.params.econtent.content.messageImprint={alg:T,hash:O},this.params.econtent.content.serial={int:this.serial++};var k=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:k};var C=new E.TimeStampToken(this.params);return C.getContentInfoEncodedHex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.FixedTSAAdapter=function(v){var _=KJUR,x=_.asn1,E=x.tsp,A=_.crypto.Util.hashHex;E.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(P,T){var O=A(P,T);this.params.econtent.content.messageImprint={alg:T,hash:O};var k=new E.TimeStampToken(this.params);return k.getContentInfoEncodedHex()},v!==void 0&&(this.params=v)},extendClass(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.TSPUtil=new function(){},KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(v){return new KJUR.asn1.tsp.TimeStampToken(v)},KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(v){var _=new KJUR.asn1.tsp.TSPParser;return _.getTimeStampReq(v)},KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(v){var _=new KJUR.asn1.tsp.TSPParser;return _.getMessageImprint(v)},KJUR.asn1.tsp.TSPParser=function(){var v=X509,_=new v,x=ASN1HEX,E=x.getV,A=x.getTLV,P=x.getIdxbyList;x.getTLVbyListEx;var T=x.getChildIdx,O=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],k={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(C){var U=T(C,0);if(U.length==1)return this.getPKIStatusInfo(A(C,U[0]));if(U.length>1){var N=this.getPKIStatusInfo(A(C,U[0])),H=A(C,U[1]),D=this.getToken(H);return D.statusinfo=N,D}},this.getToken=function(C){var U=new KJUR.asn1.cms.CMSParser,N=U.getCMSSignedData(C);return this.setTSTInfo(N),N},this.setTSTInfo=function(C){var U=C.econtent;if(U.type=="tstinfo"){var N=U.content.hex,H=this.getTSTInfo(N);U.content=H}},this.getTSTInfo=function(C){var U={},N=T(C,0),H=E(C,N[1]);U.policy=hextooid(H);var D=A(C,N[2]);U.messageImprint=this.getMessageImprint(D);var j=E(C,N[3]);U.serial={hex:j};var V=E(C,N[4]);U.genTime={str:hextoutf8(V)};var X=0;if(N.length>5&&C.substr(N[5],2)=="30"){var re=A(C,N[5]);U.accuracy=this.getAccuracy(re),X++}if(N.length>5+X&&C.substr(N[5+X],2)=="01"){var ee=E(C,N[5+X]);ee=="ff"&&(U.ordering=!0),X++}if(N.length>5+X&&C.substr(N[5+X],2)=="02"){var fe=E(C,N[5+X]);U.nonce={hex:fe},X++}if(N.length>5+X&&C.substr(N[5+X],2)=="a0"){var le=A(C,N[5+X]);le="30"+le.substr(2),pGeneralNames=_.getGeneralNames(le);var pe=pGeneralNames[0].dn;U.tsa=pe,X++}if(N.length>5+X&&C.substr(N[5+X],2)=="a1"){var ie=A(C,N[5+X]);ie="30"+ie.substr(2);var he=_.getExtParamArray(ie);U.ext=he,X++}return U},this.getAccuracy=function(C){for(var U={},N=T(C,0),H=0;H<N.length;H++){var D=C.substr(N[H],2),j=E(C,N[H]),V=parseInt(j,16);D=="02"?U.seconds=V:D=="80"?U.millis=V:D=="81"&&(U.micros=V)}return U},this.getMessageImprint=function(C){if(C.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var U={};T(C,0);var N=P(C,0,[0,0]),H=E(C,N),D=x.hextooidstr(H),j=KJUR.asn1.x509.OID.oid2name(D);if(j=="")throw new Error("hashAlg name undefined: "+D);var V=j,X=P(C,0,[1]);return U.alg=V,U.hash=E(C,X),U},this.getPKIStatusInfo=function(C){var U={},N=T(C,0),H=0;try{var D=E(C,N[0]),j=parseInt(D,16);U.status=O[j]}catch{}if(N.length>1&&C.substr(N[1],2)=="30"){var V=A(C,N[1]);U.statusstr=this.getPKIFreeText(V),H++}if(N.length>H&&C.substr(N[1+H],2)=="03"){var X=A(C,N[1+H]);U.failinfo=this.getPKIFailureInfo(X)}return U},this.getPKIFreeText=function(C){for(var U=[],N=T(C,0),H=0;H<N.length;H++)U.push(x.getString(C,N[H]));return U},this.getPKIFailureInfo=function(C){var U=x.getInt(C,0);return k[U]!=null?k[U]:U},this.getTimeStampReq=function(C){var U={};U.certreq=!1;var N=T(C,0);if(N.length<2)throw new Error("TimeStampReq must have at least 2 items");var H=A(C,N[1]);U.messageImprint=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(H);for(var D=2;D<N.length;D++){var j=N[D],V=C.substr(j,2);if(V=="06"){var X=E(C,j);U.policy=x.hextooidstr(X)}V=="02"&&(U.nonce=E(C,j)),V=="01"&&(U.certreq=!0)}return U}},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),(typeof KJUR.asn1.cades>"u"||!KJUR.asn1.cades)&&(KJUR.asn1.cades={}),KJUR.asn1.cades.SignaturePolicyIdentifier=function(v){var _=KJUR,x=_.asn1,E=x.cades,A=E.SignaturePolicyId;E.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new A(this.params)]},this.setByParam=function(P){this.params=P},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.SignaturePolicyId=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.DERObjectIdentifier,P=x.x509;P.AlgorithmIdentifier;var T=x.cades,O=T.SignaturePolicyId,k=T.OtherHashAlgAndValue;O.superclass.constructor.call(this),this.params=null,this.tohex=function(){var C=this.params,U=[];U.push(new A(C.oid)),U.push(new k(C));var N=new E({array:U});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(C){this.params=C},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.SignaturePolicyId,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHashAlgAndValue=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.DEROctetString,T=E.x509,O=T.AlgorithmIdentifier,k=E.cades,C=k.OtherHashAlgAndValue;C.superclass.constructor.call(this),this.params=null,this.tohex=function(){var U=this.params;if(U.alg==null)throw new _("property 'alg' not specified");if(U.hash==null&&U.cert==null)throw new _("property 'hash' nor 'cert' not specified");var N=null;if(U.hash!=null)N=U.hash;else if(U.cert!=null){if(typeof U.cert!="string")throw new _("cert not string");var H=U.cert;U.cert.indexOf("-----BEGIN")!=-1&&(H=pemtohex(U.cert)),N=KJUR.crypto.Util.hashHex(H,U.alg)}var D=[];D.push(new O({name:U.alg})),D.push(new P({hex:N}));var j=new A({array:D});return j.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHashValue=function(v){KJUR.asn1.cades.OtherHashValue.superclass.constructor.call(this);var _=Error,x=KJUR;x.lang.String.isHex;var E=x.asn1,A=E.DEROctetString;x.crypto.Util.hashHex,this.params=null,this.tohex=function(){var P=this.params;if(P.hash==null&&P.cert==null)throw new _("hash or cert not specified");var T=null;if(P.hash!=null)T=P.hash;else if(P.cert!=null){if(typeof P.cert!="string")throw new _("cert not string");var O=P.cert;P.cert.indexOf("-----BEGIN")!=-1&&(O=pemtohex(P.cert)),T=KJUR.crypto.Util.hashHex(O,"sha1")}return new A({hex:T}).tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.OtherHashValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.SignatureTimeStamp=function(v){var _=Error,x=KJUR,E=x.lang.String.isHex,A=x.asn1,P=A.ASN1Object;A.x509;var T=A.cades;T.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var O=this.params;if(O.tst!=null)if(E(O.tst)){var k=new P;return k.hTLV=O.tst,[k]}else{if(O.tst instanceof P)return[O.tst];throw new _("params.tst has wrong value")}else if(O.res!=null){var C=O.res;if(C instanceof P&&(C=C.tohex()),typeof C!="string"||!E(C))throw new _("params.res has wrong value");ASN1HEX.getTLVbyList(C,0,[1]);var k=new P;return k.hTLV=O.tst,[k]}},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.CompleteCertificateRefs=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.cades,T=P.OtherCertID,O=x.lang.String.isHex;P.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var k=this.params,C=[],U=0;U<k.array.length;U++){var N=k.array[U];if(typeof N=="string")if(N.indexOf("-----BEGIN")!=-1)N={cert:N};else if(O(N))N={hash:N};else throw new _("unsupported value: "+N);k.alg!=null&&N.alg==null&&(N.alg=k.alg),k.hasis!=null&&N.hasis==null&&(N.hasis=k.hasis);var H=new T(N);C.push(H)}var D=new A({array:C});return[D]},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherCertID=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.cms,P=A.IssuerSerial,T=x.cades,O=T.OtherHashValue,k=T.OtherHashAlgAndValue;T.OtherCertID.superclass.constructor.call(this),this.params=v,this.tohex=function(){var C=this.params;typeof C=="string"&&(C.indexOf("-----BEGIN")!=-1?C={cert:C}:_isHex(C)&&(C={hash:C}));var U=[],N=null;if(C.alg!=null?N=new k(C):N=new O(C),U.push(N),C.cert!=null&&C.hasis==!0||C.issuer!=null&&C.serial!=null){var H=new P(C);U.push(H)}var D=new E({array:U});return D.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHash=function(v){var _=KJUR,x=_.asn1;x.cms;var E=x.cades,A=E.OtherHashAlgAndValue,P=E.OtherHashValue;_.crypto.Util.hashHex;var T=_.lang.String.isHex;E.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var O=this.params;typeof O=="string"&&(O.indexOf("-----BEGIN")!=-1?O={cert:O}:T(O)&&(O={hash:O}));var k=null;return O.alg!=null?k=new A(O):k=new P(O),k.tohex()},this.getEncodedHex=function(){return this.tohex()},v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object),KJUR.asn1.cades.CAdESUtil=new function(){},KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(v){var _=new KJUR.asn1.cms.CMSParser,x=_.getCMSSignedData(v);return x},KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(v,_,x){var E=ASN1HEX,A=E.getChildIdx,P=E.getTLV,T=E.getV,O=KJUR,k=O.asn1,C=k.ASN1Object,U=k.cms,N=U.AttributeList,H=U.SignerInfo,D={},j=A(v,_);if(j.length!=6)throw"not supported items for SignerInfo (!=6)";var V=j.shift();D.version=P(v,V);var X=j.shift();D.si=P(v,X);var re=j.shift();D.digalg=P(v,re);var ee=j.shift();D.sattrs=P(v,ee);var fe=j.shift();D.sigalg=P(v,fe);var le=j.shift();D.sig=P(v,le),D.sigval=T(v,le);var pe=null;return D.obj=new H,pe=new C,pe.hTLV=D.version,D.obj.dCMSVersion=pe,pe=new C,pe.hTLV=D.si,D.obj.dSignerIdentifier=pe,pe=new C,pe.hTLV=D.digalg,D.obj.dDigestAlgorithm=pe,pe=new C,pe.hTLV=D.sattrs,D.obj.dSignedAttrs=pe,pe=new C,pe.hTLV=D.sigalg,D.obj.dSigAlg=pe,pe=new C,pe.hTLV=D.sig,D.obj.dSig=pe,D.obj.dUnsignedAttrs=new N,D},(typeof KJUR.asn1.csr>"u"||!KJUR.asn1.csr)&&(KJUR.asn1.csr={}),KJUR.asn1.csr.CertificationRequest=function(v){var _=KJUR,x=_.asn1,E=x.DERBitString,A=x.DERSequence,P=x.csr;x.x509;var T=P.CertificationRequestInfo;P.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(O){this.params=O},this.sign=function(){var O=new T(this.params).tohex(),k=new KJUR.crypto.Signature({alg:this.params.sigalg});k.init(this.params.sbjprvkey),k.updateHex(O);var C=k.sign();this.params.sighex=C},this.getPEM=function(){return hextopem(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var O=this.params,k=new KJUR.asn1.csr.CertificationRequestInfo(this.params),C=new KJUR.asn1.x509.AlgorithmIdentifier({name:O.sigalg});if(O.sighex==null&&O.sbjprvkey!=null&&this.sign(),O.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var U=new E({hex:"00"+O.sighex}),N=new A({array:[k,C,U]});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CertificationRequestInfo=function(v){var _=KJUR,x=_.asn1;x.DERBitString;var E=x.DERSequence,A=x.DERInteger,P=x.DERUTF8String,T=x.DERTaggedObject,O=x.ASN1Util.newObject,k=x.csr,C=x.x509,U=C.X500Name,N=C.Extensions,H=C.SubjectPublicKeyInfo;k.AttributeList,k.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(j){j!=null&&(this.params=j)},this.tohex=function(){var j=this.params,V=[];if(V.push(new A({int:0})),V.push(new U(j.subject)),V.push(new H(KEYUTIL.getKey(j.sbjpubkey))),j.attrs!=null){var X=D(j.attrs),re=O({tag:{tage:"a0",obj:X}});V.push(re)}else if(j.extreq!=null){var ee=new N(j.extreq),re=O({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[ee]}]}}});V.push(re)}else V.push(new T({tag:"a0",explicit:!1,obj:new P({str:""})}));var fe=new E({array:V});return fe.tohex()},this.getEncodedHex=function(){return this.tohex()};function D(j){for(var V=Error,X=KJUR.asn1.x509.Extensions,re=[],ee=0;ee<j.length;ee++){var fe=j[ee],le=fe.attr;if(le=="extensionRequest"){var pe=new X(fe.ext),ie={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[pe]}]};re.push(ie)}else if(le=="unstructuredName"){var ie={seq:[{oid:"1.2.840.113549.1.9.2"},{set:fe.names}]};re.push(ie)}else if(le=="challengePassword"){var ie={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:fe.password}]}]};re.push(ie)}else throw new V("unknown CSR attribute")}return{set:re}}v!=null&&this.setByParam(v)},extendClass(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object),KJUR.asn1.csr.AttributeList=function(v){},extendClass(KJUR.asn1.csr.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CSRUtil=new function(){},KJUR.asn1.csr.CSRUtil.newCSRPEM=function(v){var _=KJUR.asn1.csr,x=new _.CertificationRequest(v),E=x.getPEM();return E},KJUR.asn1.csr.CSRUtil.getParam=function(v,_){var x=ASN1HEX,E=x.getV,A=x.getIdxbyList,P=x.getTLVbyList,T=x.getTLVbyListEx,O=x.getVbyListEx,k=function(ee){var fe=A(ee,0,[0,3,0,0],"06");return E(ee,fe)!="2a864886f70d01090e"?null:P(ee,0,[0,3,0,1,0],"30")},C={};if(v.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var U=pemtohex(v,"CERTIFICATE REQUEST");_&&(C.tbs=P(U,0,[0]));try{var N=T(U,0,[0,1]);if(N=="3000")C.subject={};else{var V=new X509;C.subject=V.getX500Name(N)}}catch{}var H=T(U,0,[0,2]),D=KEYUTIL.getKey(H,null,"pkcs8pub");C.sbjpubkey=KEYUTIL.getPEM(D,"PKCS8PUB");var j=k(U),V=new X509;j!=null&&(C.extreq=V.getExtParamArray(j));try{var X=T(U,0,[1],"30"),V=new X509;C.sigalg=V.getAlgorithmIdentifierName(X)}catch{}try{var re=O(U,0,[2]);C.sighex=re}catch{}return C},KJUR.asn1.csr.CSRUtil.verifySignature=function(v){try{var _=null;if(typeof v=="string"&&v.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?_=KJUR.asn1.csr.CSRUtil.getParam(v,!0):typeof v=="object"&&v.sbjpubkey!=null&&v.sigalg!=null&&v.sighex!=null&&v.tbs!=null&&(_=v),_==null)return!1;var x=new KJUR.crypto.Signature({alg:_.sigalg});return x.init(_.sbjpubkey),x.updateHex(_.tbs),x.verify(_.sighex)}catch(E){return alert(E),!1}},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.asn1>"u"||!KJUR.asn1)&&(KJUR.asn1={}),(typeof KJUR.asn1.ocsp>"u"||!KJUR.asn1.ocsp)&&(KJUR.asn1.ocsp={}),KJUR.asn1.ocsp.DEFAULT_HASH="sha1",KJUR.asn1.ocsp.OCSPResponse=function(v){KJUR.asn1.ocsp.OCSPResponse.superclass.constructor.call(this),KJUR.asn1.DEREnumerated;var _=KJUR.asn1.ASN1Util.newObject,x=KJUR.asn1.ocsp.ResponseBytes,E=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var A=this.params.resstatus;return typeof A=="number"?A:typeof A!="string"?-1:E.indexOf(A)},this.setByParam=function(A){this.params=A},this.tohex=function(){var A=this.params,P=this._getStatusCode();if(P==-1)throw new Error("responseStatus not supported: "+A.resstatus);if(P!=0)return _({seq:[{enum:{int:P}}]}).tohex();var T=new x(A);return _({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:T}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.OCSPResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponseBytes=function(v){KJUR.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var _=KJUR.asn1,x=_.DERSequence,E=_.DERObjectIdentifier,A=_.DEROctetString,P=_.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(T){this.params=T},this.tohex=function(){var T=this.params;if(T.restype!="ocspBasic")throw new Error("not supported responseType: "+T.restype);var O=new P(T),k=[];k.push(new E({name:"ocspBasic"})),k.push(new A({hex:O.tohex()}));var C=new x({array:k});return C.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.ResponseBytes,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.BasicOCSPResponse=function(v){KJUR.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var _=Error,x=KJUR.asn1,E=x.ASN1Object,A=x.DERSequence;x.DERGeneralizedTime;var P=x.DERTaggedObject,T=x.DERBitString;x.x509.Extensions;var O=x.x509.AlgorithmIdentifier,k=x.ocsp;k.ResponderID,_SingleResponseList=k.SingleResponseList,_ResponseData=k.ResponseData,this.params=null,this.setByParam=function(C){this.params=C},this.sign=function(){var C=this.params,U=C.tbsresp.tohex(),N=new KJUR.crypto.Signature({alg:C.sigalg});N.init(C.reskey),N.updateHex(U),C.sighex=N.sign()},this.tohex=function(){var C=this.params;C.tbsresp==null&&(C.tbsresp=new _ResponseData(C)),C.sighex==null&&C.reskey!=null&&this.sign();var U=[];if(U.push(C.tbsresp),U.push(new O({name:C.sigalg})),U.push(new T({hex:"00"+C.sighex})),C.certs!=null&&C.certs.length!=null){for(var N=[],H=0;H<C.certs.length;H++){var D=C.certs[H],j=null;if(ASN1HEX.isASN1HEX(D))j=D;else if(D.match(/-----BEGIN/))j=pemtohex(D);else throw new _("certs["+H+"] not hex or PEM");N.push(new E({tlv:j}))}var V=new A({array:N});U.push(new P({tag:"a0",explicit:!0,obj:V}))}var X=new A({array:U});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.BasicOCSPResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponseData=function(v){KJUR.asn1.ocsp.ResponseData.superclass.constructor.call(this);var _=KJUR.asn1,x=_.DERSequence,E=_.DERGeneralizedTime,A=_.DERTaggedObject,P=_.x509.Extensions,T=_.ocsp,O=T.ResponderID;_SingleResponseList=T.SingleResponseList,this.params=null,this.tohex=function(){var k=this.params;k.respid!=null,k.prodat!=null,k.array!=null;var C=[];if(C.push(new O(k.respid)),C.push(new E(k.prodat)),C.push(new _SingleResponseList(k.array)),k.ext!=null){var U=new P(k.ext);C.push(new A({tag:"a1",explicit:!0,obj:U}))}var N=new x({array:C});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(k){this.params=k},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.ResponseData,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.ResponderID=function(v){KJUR.asn1.ocsp.ResponderID.superclass.constructor.call(this);var _=KJUR,x=_.asn1,E=x.ASN1Util.newObject,A=x.x509.X500Name,P=_.lang.String.isHex,T=Error;this.params=null,this.tohex=function(){var O=this.params;if(O.key!=null){var k=null;if(typeof O.key=="string"){if(P(O.key)&&(k=O.key),O.key.match(/-----BEGIN CERTIFICATE/)){var C=new X509(O.key),U=C.getExtSubjectKeyIdentifier();U!=null&&(k=U.kid.hex)}}else if(O.key instanceof X509){var U=O.key.getExtSubjectKeyIdentifier();U!=null&&(k=U.kid.hex)}if(k==null)throw new T("wrong key member value");var N=E({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:k}}}});return N.tohex()}else if(O.name!=null){var H=null;if(typeof O.name=="string"&&O.name.match(/-----BEGIN CERTIFICATE/)){var C=new X509(O.name);H=C.getSubject()}else O.name instanceof X509?H=O.name.getSubject():typeof O.name=="object"&&(O.name.array!=null||O.name.str!=null)&&(H=O.name);if(H==null)throw new T("wrong name member value");var N=E({tag:{tag:"a1",explicit:!0,obj:new A(H)}});return N.tohex()}throw new T("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(O){this.params=O},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.ResponderID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.SingleResponseList=function(v){KJUR.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var _=KJUR.asn1,x=_.DERSequence,E=_.ocsp.SingleResponse;this.params=null,this.tohex=function(){var A=this.params;if(typeof A!="object"||A.length==null)throw new Error("params not specified properly");for(var P=[],T=0;T<A.length;T++)P.push(new E(A[T]));var O=new x({array:P});return O.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(A){this.params=A},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.SingleResponseList,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.SingleResponse=function(v){var _=Error,x=KJUR,E=x.asn1,A=E.DERSequence,P=E.DERGeneralizedTime,T=E.DERTaggedObject,O=E.ocsp,k=O.CertID,C=O.CertStatus,U=E.x509,N=U.Extensions;O.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var H=this.params,D=[];if(H.certid==null)throw new _("certid unspecified");if(H.status==null)throw new _("status unspecified");if(H.thisupdate==null)throw new _("thisupdate unspecified");if(D.push(new k(H.certid)),D.push(new C(H.status)),D.push(new P(H.thisupdate)),H.nextupdate!=null){var j=new P(H.nextupdate);D.push(new T({tag:"a0",explicit:!0,obj:j}))}if(H.ext!=null){var V=new N(H.ext);D.push(new T({tag:"a1",explicit:!0,obj:V}))}var X=new A({array:D});return X.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(H){this.params=H},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.SingleResponse,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.CertID=function(v){var _=KJUR,x=_.asn1,E=x.DEROctetString,A=x.DERInteger,P=x.DERSequence,T=x.x509,O=T.AlgorithmIdentifier,k=x.ocsp;k.DEFAULT_HASH;var C=_.crypto,U=C.Util.hashHex,N=X509,H=ASN1HEX,D=H.getVbyList;k.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(j,V,X,re){re==null&&(re=this.DEFAULT_HASH),this.params={alg:re,issname:j,isskey:V,sbjsn:X}},this.setByCert=function(j,V,X){X==null&&(X=this.DEFAULT_HASH),this.params={alg:X,issuerCert:j,subjectCert:V}},this.getParamByCerts=function(j,V,X){X==null&&(X=this.DEFAULT_HASH);var re=new N(j),ee=new N(V),fe=U(re.getSubjectHex(),X),le=re.getPublicKeyHex(),pe=U(D(le,0,[1],"03",!0),X),ie=ee.getSerialNumberHex(),he={alg:X,issname:fe,isskey:pe,sbjsn:ie};return he},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var j=this.params,V,X,re,ee;if(j.alg==null?ee=this.DEFAULT_HASH:ee=j.alg,j.issuerCert!=null&&j.subjectCert!=null){var fe=this.getParamByCerts(j.issuerCert,j.subjectCert,ee);V=fe.issname,X=fe.isskey,re=fe.sbjsn}else if(j.issname!=null&&j.isskey!=null&&j.sbjsn!=null)V=j.issname,X=j.isskey,re=j.sbjsn;else throw new Error("required param members not defined");var le=new O({name:ee}),pe=new E({hex:V}),ie=new E({hex:X}),he=new A({hex:re}),ae=new P({array:[le,pe,ie,he]});return this.hTLV=ae.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.CertStatus=function(v){KJUR.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var _=this.params;if(_.status=="good")return"8000";if(_.status=="unknown")return"8200";if(_.status=="revoked"){var x=[{gentime:{str:_.time}}];_.reason!=null&&x.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:_.reason}}}});var E={tag:"a1",explicit:!1,obj:{seq:x}};return KJUR.asn1.ASN1Util.newObject({tag:E}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(_){this.params=_},v!==void 0&&this.setByParam(v)},extendClass(KJUR.asn1.ocsp.CertStatus,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.Request=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.ocsp;if(A.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var T=[];if(this.dReqCert===null)throw"reqCert not set";T.push(this.dReqCert);var O=new E({array:T});return this.hTLV=O.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof v<"u"){var P=new A.CertID(v);this.dReqCert=P}},extendClass(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.TBSRequest=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.ocsp;A.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(P){for(var T=[],O=0;O<P.length;O++){var k=new A.Request(P[0]);T.push(k)}this.dRequestList=T},this.tohex=function(){var P=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var T=new E({array:this.dRequestList});if(P.push(T),this.dRequestExt!==null)throw"requestExtensions not supported";var O=new E({array:P});return this.hTLV=O.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&v.reqList!==void 0&&this.setRequestListByParam(v.reqList)},extendClass(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPRequest=function(v){var _=KJUR,x=_.asn1,E=x.DERSequence,A=x.ocsp;if(A.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var T=[];if(this.dTbsRequest!==null)T.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var O=new E({array:T});return this.hTLV=O.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},v!==void 0&&v.reqList!==void 0){var P=new A.TBSRequest(v);this.dTbsRequest=P}},extendClass(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPUtil={},KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(v,_,x){var E=KJUR,A=E.asn1,P=A.ocsp;x===void 0&&(x=P.DEFAULT_HASH);var T={alg:x,issuerCert:v,subjectCert:_},O=new P.OCSPRequest({reqList:[T]});return O.tohex()},KJUR.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(v){var _=ASN1HEX,x=_.getVbyList,E=_.getVbyListEx,A=_.getIdxbyList;_.getIdxbyListEx;var P=_.getV,T={};try{var O=E(v,0,[0],"0a");T.responseStatus=parseInt(O,16)}catch{}if(T.responseStatus!==0)return T;try{var k=A(v,0,[1,0,1,0,0,2,0,1]);v.substr(k,2)==="80"?T.certStatus="good":v.substr(k,2)==="a1"?(T.certStatus="revoked",T.revocationTime=hextoutf8(x(v,k,[0]))):v.substr(k,2)==="82"&&(T.certStatus="unknown")}catch{}try{var C=A(v,0,[1,0,1,0,0,2,0,2]);T.thisUpdate=hextoutf8(P(v,C))}catch{}try{var U=A(v,0,[1,0,1,0,0,2,0,3]);v.substr(U,2)==="a0"&&(T.nextUpdate=hextoutf8(x(v,U,[0])))}catch{}return T},KJUR.asn1.ocsp.OCSPParser=function(){var v=Error,_=X509,x=new _,E=ASN1HEX,A=E.getV,P=E.getTLV,T=E.getIdxbyList,O=E.getVbyList,k=E.getTLVbyList,C=E.getVbyListEx,U=E.getTLVbyListEx,N=E.getChildIdx;this.getOCSPRequest=function(H){var D=N(H,0);if(D.length!=1&&D.length!=2)throw new v("wrong number elements: "+D.length);var j=this.getTBSRequest(P(H,D[0]));return j},this.getTBSRequest=function(H){var D={},j=U(H,0,[0],"30");D.array=this.getRequestList(j);var V=U(H,0,["[2]",0],"30");return V!=null&&(D.ext=x.getExtParamArray(V)),D},this.getRequestList=function(H){for(var D=[],j=N(H,0),V=0;V<j.length;V++){var H=P(H,j[V]);D.push(this.getRequest(H))}return D},this.getRequest=function(H){var D=N(H,0);if(D.length!=1&&D.length!=2)throw new v("wrong number elements: "+D.length);var j=this.getCertID(P(H,D[0]));if(D.length==2){var V=T(H,0,[1,0]);j.ext=x.getExtParamArray(P(H,V))}return j},this.getCertID=function(H){var D=N(H,0);if(D.length!=4)throw new v("wrong number elements: "+D.length);var j=new _,V={};return V.alg=j.getAlgorithmIdentifierName(P(H,D[0])),V.issname=A(H,D[1]),V.isskey=A(H,D[2]),V.sbjsn=A(H,D[3]),V},this.getOCSPResponse=function(H){var D=N(H,0),j,V=A(H,D[0]),X=parseInt(V);if(D.length==1)return{resstatus:X};var re=k(H,0,[1,0]);return j=this.getResponseBytes(re),j.resstatus=X,j},this.getResponseBytes=function(H){var D=N(H,0),j,V=k(H,0,[1,0]);j=this.getBasicOCSPResponse(V);var X=A(H,D[0]);return j.restype=KJUR.asn1.x509.OID.oid2name(hextooid(X)),j},this.getBasicOCSPResponse=function(H){var D=N(H,0),j;j=this.getResponseData(P(H,D[0]));var V=new X509;j.alg=V.getAlgorithmIdentifierName(P(H,D[1]));var X=A(H,D[2]);j.sighex=X.substr(2);var re=C(H,0,["[0]"]);if(re!=null){for(var ee=N(re,0),fe=[],le=0;le<ee.length;le++){var pe=P(re,ee[le]);fe.push(pe)}j.certs=fe}return j},this.getResponseData=function(H){var D=N(H,0),j=D.length,V={},X=0;H.substr(D[0],2)=="a0"&&X++,V.respid=this.getResponderID(P(H,D[X++]));var re=A(H,D[X++]);if(V.prodat=hextoutf8(re),V.array=this.getSingleResponseList(P(H,D[X++])),H.substr(D[j-1],2)=="a1"){var ee=k(H,D[j-1],[0]),fe=new X509;V.ext=fe.getExtParamArray(ee)}return V},this.getResponderID=function(H){var D={};if(H.substr(0,2)=="a2"){var j=O(H,0,[0]);D.key=j}if(H.substr(0,2)=="a1"){var V=k(H,0,[0]),X=new X509;D.name=X.getX500Name(V)}return D},this.getSingleResponseList=function(H){for(var D=N(H,0),j=[],V=0;V<D.length;V++){var X=this.getSingleResponse(P(H,D[V]));j.push(X)}return j},this.getSingleResponse=function(H){var D=N(H,0),j={},V=this.getCertID(P(H,D[0]));j.certid=V;var X=this.getCertStatus(P(H,D[1]));if(j.status=X,H.substr(D[2],2)=="18"){var re=A(H,D[2]);j.thisupdate=hextoutf8(re)}for(var ee=3;ee<D.length;ee++){if(H.substr(D[ee],2)=="a0"){var fe=O(H,D[ee],[0],"18");j.nextupdate=hextoutf8(fe)}if(H.substr(D[ee],2)=="a1"){var le=new X509,pe=k(H,0,[ee,0]);j.ext=le.getExtParamArray(pe)}}return j},this.getCertStatus=function(H){var D={};if(H=="8000")return{status:"good"};if(H=="8200")return{status:"unknown"};if(H.substr(0,2)=="a1"){D.status="revoked";var j=O(H,0,[0]),V=hextoutf8(j);D.time=V}return D}};var KJUR;(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.lang>"u"||!KJUR.lang)&&(KJUR.lang={}),KJUR.lang.String=function(){};function stoBA(v){for(var _=new Array,x=0;x<v.length;x++)_[x]=v.charCodeAt(x);return _}function BAtos(v){for(var _="",x=0;x<v.length;x++)_=_+String.fromCharCode(v[x]);return _}function BAtohex(v){for(var _="",x=0;x<v.length;x++){var E=v[x].toString(16);E.length==1&&(E="0"+E),_=_+E}return _}function stohex(v){return BAtohex(stoBA(v))}function stob64(v){return hex2b64(stohex(v))}function stob64u(v){return b64tob64u(hex2b64(stohex(v)))}function b64utos(v){return BAtos(b64toBA(b64utob64(v)))}function b64tob64u(v){return v=v.replace(/\=/g,""),v=v.replace(/\+/g,"-"),v=v.replace(/\//g,"_"),v}function b64utob64(v){return v.length%4==2?v=v+"==":v.length%4==3&&(v=v+"="),v=v.replace(/-/g,"+"),v=v.replace(/_/g,"/"),v}function hextob64u(v){return v.length%2==1&&(v="0"+v),b64tob64u(hex2b64(v))}function b64utohex(v){return b64tohex(b64utob64(v))}var utf8tob64u,b64utoutf8;typeof dist$4.Buffer=="function"?(utf8tob64u=function(v){return b64tob64u(dist$4.Buffer.from(v,"utf8").toString("base64"))},b64utoutf8=function(v){return dist$4.Buffer.from(b64utob64(v),"base64").toString("utf8")}):(utf8tob64u=function(v){return hextob64u(uricmptohex(encodeURIComponentAll(v)))},b64utoutf8=function(v){return decodeURIComponent(hextouricmp(b64utohex(v)))});function utf8tob64(v){return hex2b64(uricmptohex(encodeURIComponentAll(v)))}function b64toutf8(v){return decodeURIComponent(hextouricmp(b64tohex(v)))}function utf8tohex(v){return uricmptohex(encodeURIComponentAll(v)).toLowerCase()}function hextoutf8(v){try{return decodeURIComponent(hextouricmp(v))}catch{return null}}function iso88591hextoutf8(v){return hextoutf8(iso88591hextoutf8hex(v))}function iso88591hextoutf8hex(v){for(var _=v.match(/.{1,2}/g),x=[],E=0;E<_.length;E++){var A=parseInt(_[E],16);161<=A&&A<=191?(x.push("c2"),x.push(_[E])):192<=A&&A<=255?(x.push("c3"),x.push((A-64).toString(16))):x.push(_[E])}return x.join("")}function hextorstr(v){for(var _="",x=0;x<v.length-1;x+=2)_+=String.fromCharCode(parseInt(v.substr(x,2),16));return _}function rstrtohex(v){for(var _="",x=0;x<v.length;x++)_+=("0"+v.charCodeAt(x).toString(16)).slice(-2);return _}function hextob64(v){return hex2b64(v)}function hextob64nl(v){return foldnl(hextob64(v),64)}function foldnl(v,_){return v=v.replace(new RegExp("(.{"+_+"})","g"),`$1\r
`),v=v.replace(/\s+$/,""),v}function b64nltohex(v){var _=v.replace(/[^0-9A-Za-z\/+=]*/g,""),x=b64tohex(_);return x}function b64topem(v,_){return"-----BEGIN "+_+`-----\r
`+foldnl(v,64)+`\r
-----END `+_+`-----\r
`}function hextopem(v,_){return"-----BEGIN "+_+`-----\r
`+foldnl(hextob64(v),64)+`\r
-----END `+_+`-----\r
`}function pemtohex(v,_){if(v.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return _!==void 0?(v=v.replace(new RegExp("^[^]*-----BEGIN "+_+"-----"),""),v=v.replace(new RegExp("-----END "+_+"-----[^]*$"),"")):(v=v.replace(/^[^]*-----BEGIN [^-]+-----/,""),v=v.replace(/-----END [^-]+-----[^]*$/,"")),b64nltohex(v)}function pemtob64(v){return v.indexOf("-----BEGIN ")==-1||v.indexOf("-----END ")==-1?null:(v=v.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),v=v.replace(/-----END [\s\S]+$/m,""),v=v.replace(/\s+/g,""),v.match(/^[0-9a-zA-Z+/=]+$/)?v:null)}function hextoArrayBuffer(v){if(v.length%2!=0)throw"input is not even length";if(v.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var _=new ArrayBuffer(v.length/2),x=new DataView(_),E=0;E<v.length/2;E++)x.setUint8(E,parseInt(v.substr(E*2,2),16));return _}function ArrayBuffertohex(v){for(var _="",x=new DataView(v),E=0;E<v.byteLength;E++)_+=("00"+x.getUint8(E).toString(16)).slice(-2);return _}function zulutomsec(v){var _,x,E,A,P,T,O,k,C,U;if(v=timetogen(v),U=v.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),U)return _=parseInt(U[1]),x=parseInt(U[2])-1,E=parseInt(U[3]),A=parseInt(U[4]),P=parseInt(U[5]),T=parseInt(U[6]),O=0,k=U[7],k!==""&&(C=(k.substr(1)+"00").substr(0,3),O=parseInt(C)),Date.UTC(_,x,E,A,P,T,O);throw new Error("unsupported zulu format: "+v)}function msectozulu(v){var _=new Date(v),x=("0000"+_.getUTCFullYear()).slice(-4),E=("00"+(_.getUTCMonth()+1)).slice(-2),A=("00"+_.getUTCDate()).slice(-2),P=("00"+_.getUTCHours()).slice(-2),T=("00"+_.getUTCMinutes()).slice(-2),O=("00"+_.getUTCSeconds()).slice(-2),k=("000"+_.getUTCMilliseconds()).slice(-3);return k=k.replace(/0+$/,""),k=k!=""?"."+k:k,x+E+A+P+T+O+k+"Z"}function zulutosec(v){return Math.round(zulutomsec(v)/1e3)}function zulutodate(v){return new Date(zulutomsec(v))}function datetozulu(v,_,x){var E,A=v.getUTCFullYear();if(_){if(A<1950||2049<A)throw"not proper year for UTCTime: "+A;E=(""+A).slice(-2)}else E=("000"+A).slice(-4);if(E+=("0"+(v.getUTCMonth()+1)).slice(-2),E+=("0"+v.getUTCDate()).slice(-2),E+=("0"+v.getUTCHours()).slice(-2),E+=("0"+v.getUTCMinutes()).slice(-2),E+=("0"+v.getUTCSeconds()).slice(-2),x){var P=v.getUTCMilliseconds();P!==0&&(P=("00"+P).slice(-3),P=P.replace(/0+$/g,""),E+="."+P)}return E+="Z",E}function timetogen(v){return v.match(/^[0-9]{12}Z$/)||v.match(/^[0-9]{12}[.][0-9]*Z$/)?v.match(/^[0-4]/)?"20"+v:"19"+v:v}function uricmptohex(v){return v.replace(/%/g,"")}function hextouricmp(v){return v.replace(/(..)/g,"%$1")}function ipv6tohex(v){var _="malformed IPv6 address";if(!v.match(/^[0-9A-Fa-f:]+$/))throw _;v=v.toLowerCase();var x=v.split(":").length-1;if(x<2)throw _;var E=":".repeat(7-x+2);v=v.replace("::",E);var A=v.split(":");if(A.length!=8)throw _;for(var P=0;P<8;P++)A[P]=("0000"+A[P]).slice(-4);return A.join("")}function hextoipv6(v){if(!v.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+v);v=v.toLowerCase();var _=v.match(/.{1,4}/g);_=_.map(function(A){return A.replace(/^0+/,"")}),_=_.map(function(A){return A==""?"0":A}),v=":"+_.join(":")+":";var x=v.match(/:(0:){2,}/g);if(x==null)return v.slice(1,-1);var E=x.sort().slice(-1)[0];return v=v.replace(E.substr(0,E.length-1),":"),v.substr(0,2)!="::"&&(v=v.substr(1)),v.substr(-2,2)!="::"&&(v=v.substr(0,v.length-1)),v}function hextoip(v){var _=new Error("malformed hex value");if(!v.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw _;if(v.length==8){var x;try{return x=parseInt(v.substr(0,2),16)+"."+parseInt(v.substr(2,2),16)+"."+parseInt(v.substr(4,2),16)+"."+parseInt(v.substr(6,2),16),x}catch{throw _}}else if(v.length==16)try{return hextoip(v.substr(0,8))+"/"+ipprefixlen(v.substr(8))}catch{throw _}else{if(v.length==32)return hextoipv6(v);if(v.length==64){try{return hextoipv6(v.substr(0,32))+"/"+ipprefixlen(v.substr(32))}catch{throw _}return}else return v}}function ipprefixlen(v){var _=new Error("malformed mask"),x;try{x=new BigInteger$2(v,16).toString(2)}catch{throw _}if(!x.match(/^1*0*$/))throw _;return x.replace(/0+$/,"").length}function iptohex(v){var _=new Error("malformed IP address");if(v=v.toLowerCase(v),!v.match(/^[0-9a-f.:/]+$/))throw _;if(v.match(/^[0-9.]+$/)){var x=v.split(".");if(x.length!==4)throw _;var E="";try{for(var A=0;A<4;A++){var P=parseInt(x[A]);E+=("0"+P.toString(16)).slice(-2)}return E}catch{throw _}}else if(v.match(/^[0-9.]+\/[0-9]+$/)){var T=v.split("/");return iptohex(T[0])+ipnetmask(parseInt(T[1]),32)}else{if(v.match(/^[0-9a-f:]+$/)&&v.indexOf(":")!==-1)return ipv6tohex(v);if(v.match(/^[0-9a-f:]+\/[0-9]+$/)&&v.indexOf(":")!==-1){var T=v.split("/");return ipv6tohex(T[0])+ipnetmask(parseInt(T[1]),128)}else throw _}}function ipnetmask(v,_){if(_==32&&v==0)return"00000000";if(_==128&&v==0)return"00000000000000000000000000000000";var x=Array(v+1).join("1")+Array(_-v+1).join("0");return new BigInteger$2(x,2).toString(16)}function ucs2hextoutf8(v){function _(A){var P=parseInt(A.substr(0,2),16),T=parseInt(A.substr(2),16);if(P==0&T<128)return String.fromCharCode(T);if(P<8){var O=192|(P&7)<<3|(T&192)>>6,k=128|T&63;return hextoutf8(O.toString(16)+k.toString(16))}var O=224|(P&240)>>4,k=128|(P&15)<<2|(T&192)>>6,C=128|T&63;return hextoutf8(O.toString(16)+k.toString(16)+C.toString(16))}var x=v.match(/.{4}/g),E=x.map(_);return E.join("")}function encodeURIComponentAll(v){for(var _=encodeURIComponent(v),x="",E=0;E<_.length;E++)_[E]=="%"?(x=x+_.substr(E,3),E=E+2):x=x+"%"+stohex(_[E]);return x}function newline_toUnix(v){return v=v.replace(/\r\n/mg,`
`),v}function newline_toDos(v){return v=v.replace(/\r\n/mg,`
`),v=v.replace(/\n/mg,`\r
`),v}KJUR.lang.String.isInteger=function(v){return v.match(/^[0-9]+$/)?!0:!!v.match(/^-[0-9]+$/)},KJUR.lang.String.isHex=function(v){return ishex(v)};function ishex(v){return!!(v.length%2==0&&(v.match(/^[0-9a-f]+$/)||v.match(/^[0-9A-F]+$/)))}KJUR.lang.String.isBase64=function(v){return v=v.replace(/\s+/g,""),!!(v.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&v.length%4==0)},KJUR.lang.String.isBase64URL=function(v){return v.match(/[+/=]/)?!1:(v=b64utob64(v),KJUR.lang.String.isBase64(v))};function isBase64URLDot(v){return!!v.match(/^[0-9A-Za-z-_.]+$/)}KJUR.lang.String.isIntegerArray=function(v){return v=v.replace(/\s+/g,""),!!v.match(/^\[[0-9,]+\]$/)},KJUR.lang.String.isPrintable=function(v){return v.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},KJUR.lang.String.isIA5=function(v){return v.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},KJUR.lang.String.isMail=function(v){return v.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function hextoposhex(v){return v.length%2==1?"0"+v:v.substr(0,1)>"7"?"00"+v:v}function intarystrtohex(v){v=v.replace(/^\s*\[\s*/,""),v=v.replace(/\s*\]\s*$/,""),v=v.replace(/\s*/g,"");try{var _=v.split(/,/).map(function(x,E,A){var P=parseInt(x);if(P<0||255<P)throw"integer not in range 0-255";var T=("00"+P.toString(16)).slice(-2);return T}).join("");return _}catch(x){throw"malformed integer array string: "+x}}var strdiffidx=function(v,_){var x=v.length;v.length>_.length&&(x=_.length);for(var E=0;E<x;E++)if(v.charCodeAt(E)!=_.charCodeAt(E))return E;return v.length!=_.length?x:-1};function oidtohex(v){var _=function(O){var k=O.toString(16);return k.length==1&&(k="0"+k),k},x=function(O){var k="",C=parseInt(O,10),U=C.toString(2),N=7-U.length%7;N==7&&(N=0);for(var H="",D=0;D<N;D++)H+="0";U=H+U;for(var D=0;D<U.length-1;D+=7){var j=U.substr(D,7);D!=U.length-7&&(j="1"+j),k+=_(parseInt(j,2))}return k};try{if(!v.match(/^[0-9.]+$/))return null;var E="",A=v.split("."),P=parseInt(A[0],10)*40+parseInt(A[1],10);E+=_(P),A.splice(0,2);for(var T=0;T<A.length;T++)E+=x(A[T]);return E}catch{return null}}function hextooid(v){if(!ishex(v))return null;try{var _=[],x=v.substr(0,2),E=parseInt(x,16);_[0]=new String(Math.floor(E/40)),_[1]=new String(E%40);for(var A=v.substr(2),P=[],T=0;T<A.length/2;T++)P.push(parseInt(A.substr(T*2,2),16));for(var O=[],k="",T=0;T<P.length;T++)P[T]&128?k=k+strpad((P[T]&127).toString(2),7):(k=k+strpad((P[T]&127).toString(2),7),O.push(new String(parseInt(k,2))),k="");var C=_.join(".");return O.length>0&&(C=C+"."+O.join(".")),C}catch{return null}}var strpad=function(v,_,x){return x==null&&(x="0"),v.length>=_?v:new Array(_-v.length+1).join(x)+v};function bitstrtoint(v){if(v.length%2!=0||(v=v.toLowerCase(),v.match(/^[0-9a-f]+$/)==null))return-1;try{var _=v.substr(0,2);if(_=="00")return parseInt(v.substr(2),16);var x=parseInt(_,16);if(x>7)return-1;var E=v.substr(2),A=parseInt(E,16).toString(2);A=="0"&&(A="00000000"),A=A.slice(0,0-x);var P=parseInt(A,2);return P==NaN?-1:P}catch{return-1}}function inttobitstr(v){if(typeof v!="number"||v<0)return null;var _=Number(v).toString(2),x=8-_.length%8;x==8&&(x=0),_=_+strpad("",x,"0");var E=parseInt(_,2).toString(16);E.length%2==1&&(E="0"+E);var A="0"+x;return A+E}function bitstrtobinstr(v){if(typeof v!="string"||v.length%2!=0||!v.match(/^[0-9a-f]+$/))return null;try{var _=parseInt(v.substr(0,2),16);if(_<0||7<_)return null;for(var x=v.substr(2),E="",A=0;A<x.length;A+=2){var P=x.substr(A,2),T=parseInt(P,16).toString(2);T=("0000000"+T).slice(-8),E+=T}return E.substr(0,E.length-_)}catch{return null}}function binstrtobitstr(v){if(typeof v!="string"||v.match(/^[01]+$/)==null)return null;try{var _=parseInt(v,2);return inttobitstr(_)}catch{return null}}function namearraytobinstr(v,_){for(var x=0,E=0;E<v.length;E++)x|=1<<_[v[E]];for(var A=x.toString(2),P="",E=A.length-1;E>=0;E--)P+=A[E];return P}function aryval(v,E,x){if(typeof v=="object"){for(var E=String(E).split("."),A=0;A<E.length&&v;A++){var P=E[A];P.match(/^[0-9]+$/)&&(P=parseInt(P)),v=v[P]}return v||v===!1?v:x}}function extendClass(v,_){var x=function(){};x.prototype=_.prototype,v.prototype=new x,v.prototype.constructor=v,v.superclass=_.prototype,_.prototype.constructor==Object.prototype.constructor&&(_.prototype.constructor=_)}(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.crypto>"u"||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(v,_){if(typeof this.DIGESTINFOHEAD[_]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+_;return this.DIGESTINFOHEAD[_]+v},this.getPaddedDigestInfoHex=function(v,_,x){var E=this.getDigestInfoHex(v,_),A=x/4;if(E.length+22>A)throw"key is too short for SigAlg: keylen="+x+","+_;for(var P="0001",T="00"+E,O="",k=A-P.length-T.length,C=0;C<k;C+=2)O+="ff";var U=P+O+T;return U},this.hashString=function(v,_){var x=new KJUR.crypto.MessageDigest({alg:_});return x.digestString(v)},this.hashHex=function(v,_){var x=new KJUR.crypto.MessageDigest({alg:_});return x.digestHex(v)},this.sha1=function(v){return this.hashString(v,"sha1")},this.sha256=function(v){return this.hashString(v,"sha256")},this.sha256Hex=function(v){return this.hashHex(v,"sha256")},this.sha512=function(v){return this.hashString(v,"sha512")},this.sha512Hex=function(v){return this.hashHex(v,"sha512")},this.isKey=function(v){return v instanceof RSAKey||v instanceof KJUR.crypto.DSA||v instanceof KJUR.crypto.ECDSA}},KJUR.crypto.Util.md5=function(v){var _=new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return _.digestString(v)},KJUR.crypto.Util.ripemd160=function(v){var _=new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return _.digestString(v)},KJUR.crypto.Util.SECURERANDOMGEN=new SecureRandom,KJUR.crypto.Util.getRandomHexOfNbytes=function(v){var _=new Array(v);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(_),BAtohex(_)},KJUR.crypto.Util.getRandomBigIntegerOfNbytes=function(v){return new BigInteger$2(KJUR.crypto.Util.getRandomHexOfNbytes(v),16)},KJUR.crypto.Util.getRandomHexOfNbits=function(v){var _=v%8,x=(v-_)/8,E=new Array(x+1);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(E),E[0]=(255<<_&255^255)&E[0],BAtohex(E)},KJUR.crypto.Util.getRandomBigIntegerOfNbits=function(v){return new BigInteger$2(KJUR.crypto.Util.getRandomHexOfNbits(v),16)},KJUR.crypto.Util.getRandomBigIntegerZeroToMax=function(v){for(var _=v.bitLength();;){var x=KJUR.crypto.Util.getRandomBigIntegerOfNbits(_);if(v.compareTo(x)!=-1)return x}},KJUR.crypto.Util.getRandomBigIntegerMinToMax=function(v,_){var x=v.compareTo(_);if(x==1)throw"biMin is greater than biMax";if(x==0)return v;var E=_.subtract(v),A=KJUR.crypto.Util.getRandomBigIntegerZeroToMax(E);return A.add(v)},KJUR.crypto.MessageDigest=function(v){this.setAlgAndProvider=function(_,x){if(_=KJUR.crypto.MessageDigest.getCanonicalAlgName(_),_!==null&&x===void 0&&(x=KJUR.crypto.Util.DEFAULTPROVIDER[_]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(_)!=-1&&x=="cryptojs"){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[_].create()}catch(E){throw"setAlgAndProvider hash alg set fail alg="+_+"/"+E}this.updateString=function(E){this.md.update(E)},this.updateHex=function(E){var A=CryptoJS.enc.Hex.parse(E);this.md.update(A)},this.digest=function(){var E=this.md.finalize();return E.toString(CryptoJS.enc.Hex)},this.digestString=function(E){return this.updateString(E),this.digest()},this.digestHex=function(E){return this.updateHex(E),this.digest()}}if(":sha256:".indexOf(_)!=-1&&x=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(E){throw"setAlgAndProvider hash alg set fail alg="+_+"/"+E}this.updateString=function(E){this.md.update(E)},this.updateHex=function(E){var A=sjcl.codec.hex.toBits(E);this.md.update(A)},this.digest=function(){var E=this.md.finalize();return sjcl.codec.hex.fromBits(E)},this.digestString=function(E){return this.updateString(E),this.digest()},this.digestHex=function(E){return this.updateHex(E),this.digest()}}},this.updateString=function(_){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(_){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(_){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(_){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},v!==void 0&&v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.MessageDigest.getCanonicalAlgName=function(v){return typeof v=="string"&&(v=v.toLowerCase(),v=v.replace(/-/,"")),v},KJUR.crypto.MessageDigest.getHashLength=function(v){var _=KJUR.crypto.MessageDigest,x=_.getCanonicalAlgName(v);if(_.HASHLENGTH[x]===void 0)throw"not supported algorithm: "+v;return _.HASHLENGTH[x]},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(v){this.setAlgAndProvider=function(_,x){if(_=_.toLowerCase(),_==null&&(_="hmacsha1"),_=_.toLowerCase(),_.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+_;x===void 0&&(x=KJUR.crypto.Util.DEFAULTPROVIDER[_]),this.algProv=_+"/"+x;var E=_.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(E)!=-1&&x=="cryptojs"){try{var A=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[E];this.mac=CryptoJS.algo.HMAC.create(A,this.pass)}catch(P){throw"setAlgAndProvider hash alg set fail hashAlg="+E+"/"+P}this.updateString=function(P){this.mac.update(P)},this.updateHex=function(P){var T=CryptoJS.enc.Hex.parse(P);this.mac.update(T)},this.doFinal=function(){var P=this.mac.finalize();return P.toString(CryptoJS.enc.Hex)},this.doFinalString=function(P){return this.updateString(P),this.doFinal()},this.doFinalHex=function(P){return this.updateHex(P),this.doFinal()}}},this.updateString=function(_){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(_){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(_){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(_){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(_){if(typeof _=="string"){var x=_;(_.length%2==1||!_.match(/^[0-9A-Fa-f]+$/))&&(x=rstrtohex(_)),this.pass=CryptoJS.enc.Hex.parse(x);return}if(typeof _!="object")throw"KJUR.crypto.Mac unsupported password type: "+_;var x=null;if(_.hex!==void 0){if(_.hex.length%2!=0||!_.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+_.hex;x=_.hex}if(_.utf8!==void 0&&(x=utf8tohex(_.utf8)),_.rstr!==void 0&&(x=rstrtohex(_.rstr)),_.b64!==void 0&&(x=b64tohex(_.b64)),_.b64u!==void 0&&(x=b64utohex(_.b64u)),x==null)throw"KJUR.crypto.Mac unsupported password type: "+_;this.pass=CryptoJS.enc.Hex.parse(x)},v!==void 0&&(v.pass!==void 0&&this.setPassword(v.pass),v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(v){var _=null;if(this._setAlgNames=function(){var x=this.algName.match(/^(.+)with(.+)$/);x&&(this.mdAlgName=x[1].toLowerCase(),this.pubkeyAlgName=x[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(x,E){for(var A="",P=E/4-x.length,T=0;T<P;T++)A=A+"0";return A+x},this.setAlgAndProvider=function(x,E){if(this._setAlgNames(),E!="cryptojs/jsrsa")throw new Error("provider not supported: "+E);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(A){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+A)}this.init=function(A,P){var T=null;try{P===void 0?T=KEYUTIL.getKey(A):T=KEYUTIL.getKey(A,P)}catch(O){throw"init failed:"+O}if(T.isPrivate===!0)this.prvKey=T,this.state="SIGN";else if(T.isPublic===!0)this.pubKey=T,this.state="VERIFY";else throw"init failed.:"+T},this.updateString=function(A){this.md.updateString(A)},this.updateHex=function(A){this.md.updateHex(A)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&KJUR.crypto.ECDSA!==void 0&&(this.prvKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof RSAKey&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof KJUR.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(A){return this.updateString(A),this.sign()},this.signHex=function(A){return this.updateHex(A),this.sign()},this.verify=function(A){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&KJUR.crypto.ECDSA!==void 0&&(this.pubKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof RSAKey&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,A,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,A);if(KJUR.crypto.ECDSA!==void 0&&this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,A);if(KJUR.crypto.DSA!==void 0&&this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,A);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(x,E){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(x){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(x){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(x){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(x){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(x){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=v,v!==void 0&&(v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0?this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=v.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),v.psssaltlen!==void 0&&(this.pssSaltLen=v.psssaltlen),v.prvkeypem!==void 0)){if(v.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var _=KEYUTIL.getKey(v.prvkeypem);this.init(_)}catch(x){throw"fatal error to load pem private key: "+x}}},KJUR.crypto.Cipher=function(v){},KJUR.crypto.Cipher.encrypt=function(v,_,x){if(_ instanceof RSAKey&&_.isPublic){var E=KJUR.crypto.Cipher.getAlgByKeyAndName(_,x);if(E==="RSA")return _.encrypt(v);if(E==="RSAOAEP")return _.encryptOAEP(v,"sha1");var A=E.match(/^RSAOAEP(\d+)$/);if(A!==null)return _.encryptOAEP(v,"sha"+A[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+x}else throw"Cipher.encrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.decrypt=function(v,_,x){if(_ instanceof RSAKey&&_.isPrivate){var E=KJUR.crypto.Cipher.getAlgByKeyAndName(_,x);if(E==="RSA")return _.decrypt(v);if(E==="RSAOAEP")return _.decryptOAEP(v,"sha1");var A=E.match(/^RSAOAEP(\d+)$/);if(A!==null)return _.decryptOAEP(v,"sha"+A[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+x}else throw"Cipher.decrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.getAlgByKeyAndName=function(v,_){if(v instanceof RSAKey){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(_)!=-1)return _;if(_==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+_}throw"getAlgByKeyAndName: not supported algorithm name: "+_},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.crypto>"u"||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.ECDSA=function(v){var _="secp256r1",x=Error,E=BigInteger$2,A=ECPointFp,P=KJUR.crypto.ECDSA,T=KJUR.crypto.ECParameterDB,O=P.getName,k=ASN1HEX,C=k.getVbyListEx,U=k.isASN1HEX,N=new SecureRandom;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(H){return new E(H.bitLength(),N).mod(H.subtract(E.ONE)).add(E.ONE)},this.setNamedCurve=function(H){this.ecparams=T.getByName(H),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=H},this.setPrivateKeyHex=function(H){this.isPrivate=!0,this.prvKeyHex=H},this.setPublicKeyHex=function(H){this.isPublic=!0,this.pubKeyHex=H},this.getPublicKeyXYHex=function(){var H=this.pubKeyHex;if(H.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var D=this.ecparams.keycharlen;if(H.length!==2+D*2)throw"malformed public key hex length";var j={};return j.x=H.substr(2,D),j.y=H.substr(2+D),j},this.getShortNISTPCurveName=function(){var H=this.curveName;return H==="secp256r1"||H==="NIST P-256"||H==="P-256"||H==="prime256v1"?"P-256":H==="secp384r1"||H==="NIST P-384"||H==="P-384"?"P-384":H==="secp521r1"||H==="NIST P-521"||H==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var H=this.ecparams.n,D=this.getBigRandom(H),j=this.ecparams.keycharlen,V=("0000000000"+D.toString(16)).slice(-j);this.setPrivateKeyHex(V);var X=this.generatePublicKeyHex();return{ecprvhex:V,ecpubhex:X}},this.generatePublicKeyHex=function(){var H=new E(this.prvKeyHex,16),D=this.ecparams.G.multiply(H),j=D.getX().toBigInteger(),V=D.getY().toBigInteger(),X=this.ecparams.keycharlen,re=("0000000000"+j.toString(16)).slice(-X),ee=("0000000000"+V.toString(16)).slice(-X),fe="04"+re+ee;return this.setPublicKeyHex(fe),fe},this.signWithMessageHash=function(H){return this.signHex(H,this.prvKeyHex)},this.signHex=function(H,D){var j=new E(D,16),V=this.ecparams.n,X=new E(H.substring(0,this.ecparams.keycharlen),16);do var re=this.getBigRandom(V),ee=this.ecparams.G,fe=ee.multiply(re),le=fe.getX().toBigInteger().mod(V);while(le.compareTo(E.ZERO)<=0);var pe=re.modInverse(V).multiply(X.add(j.multiply(le))).mod(V);return P.biRSSigToASN1Sig(le,pe)},this.sign=function(H,D){var j=D,V=this.ecparams.n,X=E.fromByteArrayUnsigned(H);do var re=this.getBigRandom(V),ee=this.ecparams.G,fe=ee.multiply(re),le=fe.getX().toBigInteger().mod(V);while(le.compareTo(BigInteger$2.ZERO)<=0);var pe=re.modInverse(V).multiply(X.add(j.multiply(le))).mod(V);return this.serializeSig(le,pe)},this.verifyWithMessageHash=function(H,D){return this.verifyHex(H,D,this.pubKeyHex)},this.verifyHex=function(H,D,j){try{var V,X,re=P.parseSigHex(D);V=re.r,X=re.s;var ee=A.decodeFromHex(this.ecparams.curve,j),fe=new E(H.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(fe,V,X,ee)}catch{return!1}},this.verify=function(H,D,j){var V,X;if(Bitcoin.Util.isArray(D)){var re=this.parseSig(D);V=re.r,X=re.s}else if(typeof D=="object"&&D.r&&D.s)V=D.r,X=D.s;else throw"Invalid value for signature";var ee;if(j instanceof ECPointFp)ee=j;else if(Bitcoin.Util.isArray(j))ee=A.decodeFrom(this.ecparams.curve,j);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var fe=E.fromByteArrayUnsigned(H);return this.verifyRaw(fe,V,X,ee)},this.verifyRaw=function(H,D,j,V){var X=this.ecparams.n,re=this.ecparams.G;if(D.compareTo(E.ONE)<0||D.compareTo(X)>=0||j.compareTo(E.ONE)<0||j.compareTo(X)>=0)return!1;var ee=j.modInverse(X),fe=H.multiply(ee).mod(X),le=D.multiply(ee).mod(X),pe=re.multiply(fe).add(V.multiply(le)),ie=pe.getX().toBigInteger().mod(X);return ie.equals(D)},this.serializeSig=function(H,D){var j=H.toByteArraySigned(),V=D.toByteArraySigned(),X=[];return X.push(2),X.push(j.length),X=X.concat(j),X.push(2),X.push(V.length),X=X.concat(V),X.unshift(X.length),X.unshift(48),X},this.parseSig=function(H){var D;if(H[0]!=48)throw new Error("Signature not a valid DERSequence");if(D=2,H[D]!=2)throw new Error("First element in signature must be a DERInteger");var j=H.slice(D+2,D+2+H[D+1]);if(D+=2+H[D+1],H[D]!=2)throw new Error("Second element in signature must be a DERInteger");var V=H.slice(D+2,D+2+H[D+1]);D+=2+H[D+1];var X=E.fromByteArrayUnsigned(j),re=E.fromByteArrayUnsigned(V);return{r:X,s:re}},this.parseSigCompact=function(H){if(H.length!==65)throw"Signature has the wrong length";var D=H[0]-27;if(D<0||D>7)throw"Invalid signature type";var j=this.ecparams.n,V=E.fromByteArrayUnsigned(H.slice(1,33)).mod(j),X=E.fromByteArrayUnsigned(H.slice(33,65)).mod(j);return{r:V,s:X,i:D}},this.readPKCS5PrvKeyHex=function(H){if(U(H)===!1)throw new Error("not ASN.1 hex string");var D,j,V;try{D=C(H,0,["[0]",0],"06"),j=C(H,0,[1],"04");try{V=C(H,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=O(D),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(V),this.setPrivateKeyHex(j),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(H){if(U(H)===!1)throw new x("not ASN.1 hex string");var D,j,V,X;try{D=C(H,0,[1,0],"06"),j=C(H,0,[1,1],"06"),V=C(H,0,[2,0,1],"04");try{X=C(H,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new x("malformed PKCS#8 plain ECC private key")}if(this.curveName=O(j),this.curveName===void 0)throw new x("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(X),this.setPrivateKeyHex(V),this.isPublic=!1},this.readPKCS8PubKeyHex=function(H){if(U(H)===!1)throw new x("not ASN.1 hex string");var D,j,V;try{D=C(H,0,[0,0],"06"),j=C(H,0,[0,1],"06"),V=C(H,0,[1],"03")}catch{throw new x("malformed PKCS#8 ECC public key")}if(this.curveName=O(j),this.curveName===null)throw new x("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(V)},this.readCertPubKeyHex=function(H,D){if(U(H)===!1)throw new x("not ASN.1 hex string");var j,V;try{j=C(H,0,[0,5,0,1],"06"),V=C(H,0,[0,5,1],"03")}catch{throw new x("malformed X.509 certificate ECC public key")}if(this.curveName=O(j),this.curveName===null)throw new x("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(V)},v!==void 0&&v.curve!==void 0&&(this.curveName=v.curve),this.curveName===void 0&&(this.curveName=_),this.setNamedCurve(this.curveName),v!==void 0&&(v.prv!==void 0&&this.setPrivateKeyHex(v.prv),v.pub!==void 0&&this.setPublicKeyHex(v.pub))},KJUR.crypto.ECDSA.parseSigHex=function(v){var _=KJUR.crypto.ECDSA.parseSigHexInHexRS(v),x=new BigInteger$2(_.r,16),E=new BigInteger$2(_.s,16);return{r:x,s:E}},KJUR.crypto.ECDSA.parseSigHexInHexRS=function(v){var _=ASN1HEX,x=_.getChildIdx,E=_.getV;if(_.checkStrictDER(v,0),v.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var A=x(v,0);if(A.length!=2)throw new Error("signature shall have two elements");var P=A[0],T=A[1];if(v.substr(P,2)!="02")throw new Error("1st item not ASN.1 integer");if(v.substr(T,2)!="02")throw new Error("2nd item not ASN.1 integer");var O=E(v,P),k=E(v,T);return{r:O,s:k}},KJUR.crypto.ECDSA.asn1SigToConcatSig=function(v){var _=KJUR.crypto.ECDSA.parseSigHexInHexRS(v),x=_.r,E=_.s;if(x.length>=130&&x.length<=134){if(x.length%2!=0)throw Error("unknown ECDSA sig r length error");if(E.length%2!=0)throw Error("unknown ECDSA sig s length error");x.substr(0,2)=="00"&&(x=x.substr(2)),E.substr(0,2)=="00"&&(E=E.substr(2));var A=Math.max(x.length,E.length);return x=("000000"+x).slice(-A),E=("000000"+E).slice(-A),x+E}if(x.substr(0,2)=="00"&&x.length%32==2&&(x=x.substr(2)),E.substr(0,2)=="00"&&E.length%32==2&&(E=E.substr(2)),x.length%32==30&&(x="00"+x),E.length%32==30&&(E="00"+E),x.length%32!=0)throw Error("unknown ECDSA sig r length error");if(E.length%32!=0)throw Error("unknown ECDSA sig s length error");return x+E},KJUR.crypto.ECDSA.concatSigToASN1Sig=function(v){if(v.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var _=v.substr(0,v.length/2),x=v.substr(v.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(_,x)},KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(v,_){var x=new BigInteger$2(v,16),E=new BigInteger$2(_,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(x,E)},KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(v,_){var x=KJUR.asn1,E=new x.DERInteger({bigint:v}),A=new x.DERInteger({bigint:_}),P=new x.DERSequence({array:[E,A]});return P.tohex()},KJUR.crypto.ECDSA.getName=function(v){return v==="2b8104001f"?"secp192k1":v==="2a8648ce3d030107"?"secp256r1":v==="2b8104000a"?"secp256k1":v==="2b81040021"?"secp224r1":v==="2b81040022"?"secp384r1":v==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(v)!==-1?"secp256r1":"|secp256k1|".indexOf(v)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(v)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(v)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(v)!==-1?"secp521r1":null},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.crypto>"u"||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.ECParameterDB=new function(){var v={},_={};function x(E){return new BigInteger$2(E,16)}this.getByName=function(E){var A=E;if(typeof _[A]<"u"&&(A=_[E]),typeof v[A]<"u")return v[A];throw"unregistered EC curve name: "+A},this.regist=function(E,A,P,T,O,k,C,U,N,H,D,j){v[E]={};var V=x(P),X=x(T),re=x(O),ee=x(k),fe=x(C),le=new ECCurveFp(V,X,re),pe=le.decodePointHex("04"+U+N);v[E].name=E,v[E].keylen=A,v[E].keycharlen=Math.ceil(A/8)*2,v[E].curve=le,v[E].G=pe,v[E].n=ee,v[E].h=fe,v[E].oid=D,v[E].info=j;for(var ie=0;ie<H.length;ie++)_[H[ie]]=E}},KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.crypto>"u"||!KJUR.crypto)&&(KJUR.crypto={}),KJUR.crypto.DSA=function(){var v=ASN1HEX;v.getVbyList;var _=v.getVbyListEx,x=v.isASN1HEX,E=BigInteger$2;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(A,P,T,O,k){this.isPrivate=!0,this.p=A,this.q=P,this.g=T,this.y=O,this.x=k},this.setPrivateHex=function(A,P,T,O,k){var C,U,N,H,D;C=new BigInteger$2(A,16),U=new BigInteger$2(P,16),N=new BigInteger$2(T,16),typeof O=="string"&&O.length>1?H=new BigInteger$2(O,16):H=null,D=new BigInteger$2(k,16),this.setPrivate(C,U,N,H,D)},this.setPublic=function(A,P,T,O){this.isPublic=!0,this.p=A,this.q=P,this.g=T,this.y=O,this.x=null},this.setPublicHex=function(A,P,T,O){var k,C,U,N;k=new BigInteger$2(A,16),C=new BigInteger$2(P,16),U=new BigInteger$2(T,16),N=new BigInteger$2(O,16),this.setPublic(k,C,U,N)},this.signWithMessageHash=function(A){var P=this.p,T=this.q,O=this.g;this.y;var k=this.x,C=KJUR.crypto.Util.getRandomBigIntegerMinToMax(BigInteger$2.ONE.add(BigInteger$2.ONE),T.subtract(BigInteger$2.ONE)),U=A.substr(0,T.bitLength()/4),N=new BigInteger$2(U,16),H=O.modPow(C,P).mod(T),D=C.modInverse(T).multiply(N.add(k.multiply(H))).mod(T),j=KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:H}},{int:{bigint:D}}]});return j},this.verifyWithMessageHash=function(A,P){var T=this.p,O=this.q,k=this.g,C=this.y,U=this.parseASN1Signature(P),N=U[0],H=U[1],D=A.substr(0,O.bitLength()/4),j=new BigInteger$2(D,16);if(BigInteger$2.ZERO.compareTo(N)>0||N.compareTo(O)>0||BigInteger$2.ZERO.compareTo(H)>=0||H.compareTo(O)>0)throw"invalid DSA signature";var V=H.modInverse(O),X=j.multiply(V).mod(O),re=N.multiply(V).mod(O),ee=k.modPow(X,T).multiply(C.modPow(re,T)).mod(T).mod(O);return ee.compareTo(N)==0},this.parseASN1Signature=function(A){try{var P=new E(_(A,0,[0],"02"),16),T=new E(_(A,0,[1],"02"),16);return[P,T]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(A){var P,T,O,k,C;if(x(A)===!1)throw new Error("not ASN.1 hex string");try{P=_(A,0,[1],"02"),T=_(A,0,[2],"02"),O=_(A,0,[3],"02"),k=_(A,0,[4],"02"),C=_(A,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(P,T,O,k,C)},this.readPKCS8PrvKeyHex=function(A){var P,T,O,k;if(x(A)===!1)throw new Error("not ASN.1 hex string");try{P=_(A,0,[1,1,0],"02"),T=_(A,0,[1,1,1],"02"),O=_(A,0,[1,1,2],"02"),k=_(A,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(P,T,O,null,k)},this.readPKCS8PubKeyHex=function(A){var P,T,O,k;if(x(A)===!1)throw new Error("not ASN.1 hex string");try{P=_(A,0,[0,1,0],"02"),T=_(A,0,[0,1,1],"02"),O=_(A,0,[0,1,2],"02"),k=_(A,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(P,T,O,k)},this.readCertPubKeyHex=function(A,P){var T,O,k,C;if(x(A)===!1)throw new Error("not ASN.1 hex string");try{T=_(A,0,[0,5,0,1,0],"02"),O=_(A,0,[0,5,0,1,1],"02"),k=_(A,0,[0,5,0,1,2],"02"),C=_(A,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(T,O,k,C)}};var KEYUTIL=function(){var v=function(j,V,X){return E(CryptoJS.AES,j,V,X)},_=function(j,V,X){return E(CryptoJS.TripleDES,j,V,X)},x=function(j,V,X){return E(CryptoJS.DES,j,V,X)},E=function(j,V,X,re){var ee=CryptoJS.enc.Hex.parse(V),fe=CryptoJS.enc.Hex.parse(X),le=CryptoJS.enc.Hex.parse(re),pe={};pe.key=fe,pe.iv=le,pe.ciphertext=ee;var ie=j.decrypt(pe,fe,{iv:le});return CryptoJS.enc.Hex.stringify(ie)},A=function(j,V,X){return O(CryptoJS.AES,j,V,X)},P=function(j,V,X){return O(CryptoJS.TripleDES,j,V,X)},T=function(j,V,X){return O(CryptoJS.DES,j,V,X)},O=function(j,V,X,re){var ee=CryptoJS.enc.Hex.parse(V),fe=CryptoJS.enc.Hex.parse(X),le=CryptoJS.enc.Hex.parse(re),pe=j.encrypt(ee,fe,{iv:le}),ie=CryptoJS.enc.Hex.parse(pe.toString()),he=CryptoJS.enc.Base64.stringify(ie);return he},k={"AES-256-CBC":{proc:v,eproc:A,keylen:32,ivlen:16},"AES-192-CBC":{proc:v,eproc:A,keylen:24,ivlen:16},"AES-128-CBC":{proc:v,eproc:A,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:_,eproc:P,keylen:24,ivlen:8},"DES-CBC":{proc:x,eproc:T,keylen:8,ivlen:8}},C=function(j){var V=CryptoJS.lib.WordArray.random(j),X=CryptoJS.enc.Hex.stringify(V);return X},U=function(j){var V={},X=j.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));X&&(V.cipher=X[1],V.ivsalt=X[2]);var re=j.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));re&&(V.type=re[1]);var ee=-1,fe=0;j.indexOf(`\r
\r
`)!=-1&&(ee=j.indexOf(`\r
\r
`),fe=2),j.indexOf(`

`)!=-1&&(ee=j.indexOf(`

`),fe=1);var le=j.indexOf("-----END");if(ee!=-1&&le!=-1){var pe=j.substring(ee+fe*2,le-fe);pe=pe.replace(/\s+/g,""),V.data=pe}return V},N=function(j,V,X){for(var re=X.substring(0,16),ee=CryptoJS.enc.Hex.parse(re),fe=CryptoJS.enc.Utf8.parse(V),le=k[j].keylen+k[j].ivlen,pe="",ie=null;;){var he=CryptoJS.algo.MD5.create();if(ie!=null&&he.update(ie),he.update(fe),he.update(ee),ie=he.finalize(),pe=pe+CryptoJS.enc.Hex.stringify(ie),pe.length>=le*2)break}var ae={};return ae.keyhex=pe.substr(0,k[j].keylen*2),ae.ivhex=pe.substr(k[j].keylen*2,k[j].ivlen*2),ae},H=function(j,V,X,re){var ee=CryptoJS.enc.Base64.parse(j),fe=CryptoJS.enc.Hex.stringify(ee),le=k[V].proc,pe=le(fe,X,re);return pe},D=function(j,V,X,re){var ee=k[V].eproc,fe=ee(j,X,re);return fe};return{version:"1.0.0",parsePKCS5PEM:function(j){return U(j)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(j,V,X){return N(j,V,X)},decryptKeyB64:function(j,V,X,re){return H(j,V,X,re)},getDecryptedKeyHex:function(j,V){var X=U(j),re=X.cipher,ee=X.ivsalt,fe=X.data,le=N(re,V,ee),pe=le.keyhex,ie=H(fe,re,pe,ee);return ie},getEncryptedPKCS5PEMFromPrvKeyHex:function(j,V,X,re,ee){var te="";if((typeof re>"u"||re==null)&&(re="AES-256-CBC"),typeof k[re]>"u")throw new Error("KEYUTIL unsupported algorithm: "+re);if(typeof ee>"u"||ee==null){var fe=k[re].ivlen,le=C(fe);ee=le.toUpperCase()}var pe=N(re,X,ee),ie=pe.keyhex,he=D(V,re,ie,ee),ae=he.replace(/(.{64})/g,`$1\r
`),te="-----BEGIN "+j+` PRIVATE KEY-----\r
`;return te+=`Proc-Type: 4,ENCRYPTED\r
`,te+="DEK-Info: "+re+","+ee+`\r
`,te+=`\r
`,te+=ae,te+=`\r
-----END `+j+` PRIVATE KEY-----\r
`,te},parseHexOfEncryptedPKCS8:function(j){var V=ASN1HEX,X=V.getChildIdx,re=V.getV,ee={},fe=X(j,0);if(fe.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+fe.length);ee.ciphertext=re(j,fe[1]);var le=X(j,fe[0]);if(le.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+le.length);if(re(j,le[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var pe=X(j,le[1]);if(le.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+pe.length);var ie=X(j,pe[1]);if(ie.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+ie.length);if(re(j,ie[0])!="2a864886f70d0307")throw"this only supports TripleDES";ee.encryptionSchemeAlg="TripleDES",ee.encryptionSchemeIV=re(j,ie[1]);var he=X(j,pe[0]);if(he.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+he.length);if(re(j,he[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var ae=X(j,he[1]);if(ae.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+ae.length);ee.pbkdf2Salt=re(j,ae[0]);var te=re(j,ae[1]);try{ee.pbkdf2Iter=parseInt(te,16)}catch{throw new Error("malformed format pbkdf2Iter: "+te)}return ee},getPBKDF2KeyHexFromParam:function(j,V){var X=CryptoJS.enc.Hex.parse(j.pbkdf2Salt),re=j.pbkdf2Iter,ee=CryptoJS.PBKDF2(V,X,{keySize:192/32,iterations:re}),fe=CryptoJS.enc.Hex.stringify(ee);return fe},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(j,V){var X=pemtohex(j,"ENCRYPTED PRIVATE KEY"),re=this.parseHexOfEncryptedPKCS8(X),ee=KEYUTIL.getPBKDF2KeyHexFromParam(re,V),fe={};fe.ciphertext=CryptoJS.enc.Hex.parse(re.ciphertext);var le=CryptoJS.enc.Hex.parse(ee),pe=CryptoJS.enc.Hex.parse(re.encryptionSchemeIV),ie=CryptoJS.TripleDES.decrypt(fe,le,{iv:pe}),he=CryptoJS.enc.Hex.stringify(ie);return he},getKeyFromEncryptedPKCS8PEM:function(j,V){var X=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(j,V),re=this.getKeyFromPlainPrivatePKCS8Hex(X);return re},parsePlainPrivatePKCS8Hex:function(j){var V=ASN1HEX,X=V.getChildIdx,re=V.getV,ee={};if(ee.algparam=null,j.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var fe=X(j,0);if(fe.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(j.substr(fe[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var le=X(j,fe[1]);if(le.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(j.substr(le[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(ee.algoid=re(j,le[0]),j.substr(le[1],2)=="06"&&(ee.algparam=re(j,le[1])),j.substr(fe[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return ee.keyidx=V.getVidx(j,fe[2]),ee},getKeyFromPlainPrivatePKCS8PEM:function(j){var V=pemtohex(j,"PRIVATE KEY"),X=this.getKeyFromPlainPrivatePKCS8Hex(V);return X},getKeyFromPlainPrivatePKCS8Hex:function(j){var V=this.parsePlainPrivatePKCS8Hex(j),X;if(V.algoid=="2a864886f70d010101")X=new RSAKey;else if(V.algoid=="2a8648ce380401")X=new KJUR.crypto.DSA;else if(V.algoid=="2a8648ce3d0201")X=new KJUR.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return X.readPKCS8PrvKeyHex(j),X},_getKeyFromPublicPKCS8Hex:function(j){var V,X=ASN1HEX.getVbyList(j,0,[0,0],"06");if(X==="2a864886f70d010101")V=new RSAKey;else if(X==="2a8648ce380401")V=new KJUR.crypto.DSA;else if(X==="2a8648ce3d0201")V=new KJUR.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return V.readPKCS8PubKeyHex(j),V},parsePublicRawRSAKeyHex:function(j){var V=ASN1HEX,X=V.getChildIdx,re=V.getV,ee={};if(j.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var fe=X(j,0);if(fe.length!=2)throw new Error("malformed RSA key(code:002)");if(j.substr(fe[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(ee.n=re(j,fe[0]),j.substr(fe[1],2)!="02")throw new Error("malformed RSA key(code:004)");return ee.e=re(j,fe[1]),ee},parsePublicPKCS8Hex:function(j){var V=ASN1HEX,X=V.getChildIdx,re=V.getV,ee={};ee.algparam=null;var fe=X(j,0);if(fe.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+fe.length);var le=fe[0];if(j.substr(le,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var pe=X(j,le);if(pe.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(j.substr(pe[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(ee.algoid=re(j,pe[0]),j.substr(pe[1],2)=="06"?ee.algparam=re(j,pe[1]):j.substr(pe[1],2)=="30"&&(ee.algparam={},ee.algparam.p=V.getVbyList(j,pe[1],[0],"02"),ee.algparam.q=V.getVbyList(j,pe[1],[1],"02"),ee.algparam.g=V.getVbyList(j,pe[1],[2],"02")),j.substr(fe[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return ee.key=re(j,fe[1]).substr(2),ee}}}();KEYUTIL.getKey=function(v,_,x){var E=ASN1HEX,A=E.getChildIdx;E.getV;var P=E.getVbyList,T=KJUR.crypto,O=T.ECDSA,k=T.DSA,C=RSAKey,U=pemtohex,N=KEYUTIL;if(typeof C<"u"&&v instanceof C||typeof O<"u"&&v instanceof O||typeof k<"u"&&v instanceof k)return v;if(v.curve!==void 0&&v.xy!==void 0&&v.d===void 0)return new O({pub:v.xy,curve:v.curve});if(v.curve!==void 0&&v.d!==void 0)return new O({prv:v.d,curve:v.curve});if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d===void 0){var H=new C;return H.setPublic(v.n,v.e),H}if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.co!==void 0&&v.qi===void 0){var H=new C;return H.setPrivateEx(v.n,v.e,v.d,v.p,v.q,v.dp,v.dq,v.co),H}if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p===void 0){var H=new C;return H.setPrivate(v.n,v.e,v.d),H}if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x===void 0){var H=new k;return H.setPublic(v.p,v.q,v.g,v.y),H}if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x!==void 0){var H=new k;return H.setPrivate(v.p,v.q,v.g,v.y,v.x),H}if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d===void 0){var H=new C;return H.setPublic(b64utohex(v.n),b64utohex(v.e)),H}if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.qi!==void 0){var H=new C;return H.setPrivateEx(b64utohex(v.n),b64utohex(v.e),b64utohex(v.d),b64utohex(v.p),b64utohex(v.q),b64utohex(v.dp),b64utohex(v.dq),b64utohex(v.qi)),H}if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0){var H=new C;return H.setPrivate(b64utohex(v.n),b64utohex(v.e),b64utohex(v.d)),H}if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d===void 0){var D=new O({curve:v.crv}),j=D.ecparams.keycharlen,V=("0000000000"+b64utohex(v.x)).slice(-j),X=("0000000000"+b64utohex(v.y)).slice(-j),re="04"+V+X;return D.setPublicKeyHex(re),D}if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d!==void 0){var D=new O({curve:v.crv}),j=D.ecparams.keycharlen,V=("0000000000"+b64utohex(v.x)).slice(-j),X=("0000000000"+b64utohex(v.y)).slice(-j),re="04"+V+X,ee=("0000000000"+b64utohex(v.d)).slice(-j);return D.setPublicKeyHex(re),D.setPrivateKeyHex(ee),D}if(x==="pkcs5prv"){var fe=v,E=ASN1HEX,le,H;if(le=A(fe,0),le.length===9)H=new C,H.readPKCS5PrvKeyHex(fe);else if(le.length===6)H=new k,H.readPKCS5PrvKeyHex(fe);else if(le.length>2&&fe.substr(le[1],2)==="04")H=new O,H.readPKCS5PrvKeyHex(fe);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return H}if(x==="pkcs8prv"){var H=N.getKeyFromPlainPrivatePKCS8Hex(v);return H}if(x==="pkcs8pub")return N._getKeyFromPublicPKCS8Hex(v);if(x==="x509pub")return X509.getPublicKeyFromCertHex(v);if(v.indexOf("-END CERTIFICATE-",0)!=-1||v.indexOf("-END X509 CERTIFICATE-",0)!=-1||v.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return X509.getPublicKeyFromCertPEM(v);if(v.indexOf("-END PUBLIC KEY-")!=-1){var pe=pemtohex(v,"PUBLIC KEY");return N._getKeyFromPublicPKCS8Hex(pe)}if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var ie=U(v,"RSA PRIVATE KEY");return N.getKey(ie,null,"pkcs5prv")}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var he=U(v,"DSA PRIVATE KEY"),ae=P(he,0,[1],"02"),te=P(he,0,[2],"02"),ue=P(he,0,[3],"02"),ne=P(he,0,[4],"02"),J=P(he,0,[5],"02"),H=new k;return H.setPrivate(new BigInteger$2(ae,16),new BigInteger$2(te,16),new BigInteger$2(ue,16),new BigInteger$2(ne,16),new BigInteger$2(J,16)),H}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var ie=U(v,"EC PRIVATE KEY");return N.getKey(ie,null,"pkcs5prv")}if(v.indexOf("-END PRIVATE KEY-")!=-1)return N.getKeyFromPlainPrivatePKCS8PEM(v);if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var q=N.getDecryptedKeyHex(v,_),F=new RSAKey;return F.readPKCS5PrvKeyHex(q),F}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var he=N.getDecryptedKeyHex(v,_),H=P(he,0,[1],"04"),L=P(he,0,[2,0],"06"),Z=P(he,0,[3,0],"03").substr(2),Q="";if(KJUR.crypto.OID.oidhex2name[L]!==void 0)Q=KJUR.crypto.OID.oidhex2name[L];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+L);var D=new O({curve:Q});return D.setPublicKeyHex(Z),D.setPrivateKeyHex(H),D.isPublic=!1,D}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var he=N.getDecryptedKeyHex(v,_),ae=P(he,0,[1],"02"),te=P(he,0,[2],"02"),ue=P(he,0,[3],"02"),ne=P(he,0,[4],"02"),J=P(he,0,[5],"02"),H=new k;return H.setPrivate(new BigInteger$2(ae,16),new BigInteger$2(te,16),new BigInteger$2(ue,16),new BigInteger$2(ne,16),new BigInteger$2(J,16)),H}if(v.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return N.getKeyFromEncryptedPKCS8PEM(v,_);throw new Error("not supported argument")},KEYUTIL.generateKeypair=function(v,_){if(v=="RSA"){var x=_,E=new RSAKey;E.generate(x,"10001"),E.isPrivate=!0,E.isPublic=!0;var A=new RSAKey,P=E.n.toString(16),T=E.e.toString(16);A.setPublic(P,T),A.isPrivate=!1,A.isPublic=!0;var O={};return O.prvKeyObj=E,O.pubKeyObj=A,O}else if(v=="EC"){var k=_,C=new KJUR.crypto.ECDSA({curve:k}),U=C.generateKeyPairHex(),E=new KJUR.crypto.ECDSA({curve:k});E.setPublicKeyHex(U.ecpubhex),E.setPrivateKeyHex(U.ecprvhex),E.isPrivate=!0,E.isPublic=!1;var A=new KJUR.crypto.ECDSA({curve:k});A.setPublicKeyHex(U.ecpubhex),A.isPrivate=!1,A.isPublic=!0;var O={};return O.prvKeyObj=E,O.pubKeyObj=A,O}else throw new Error("unknown algorithm: "+v)},KEYUTIL.getPEM=function(v,_,x,E,A,P){var T=KJUR,O=T.asn1,k=O.DERObjectIdentifier,C=O.DERInteger,U=O.ASN1Util.newObject,N=O.x509,H=N.SubjectPublicKeyInfo,D=T.crypto,j=D.DSA,V=D.ECDSA,X=RSAKey;function re(Z){var Q=U({seq:[{int:0},{int:{bigint:Z.n}},{int:Z.e},{int:{bigint:Z.d}},{int:{bigint:Z.p}},{int:{bigint:Z.q}},{int:{bigint:Z.dmp1}},{int:{bigint:Z.dmq1}},{int:{bigint:Z.coeff}}]});return Q}function ee(Z){var Q=U({seq:[{int:1},{octstr:{hex:Z.prvKeyHex}},{tag:["a0",!0,{oid:{name:Z.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Z.pubKeyHex}}]}]});return Q}function fe(Z){var Q=U({seq:[{int:0},{int:{bigint:Z.p}},{int:{bigint:Z.q}},{int:{bigint:Z.g}},{int:{bigint:Z.y}},{int:{bigint:Z.x}}]});return Q}if((X!==void 0&&v instanceof X||j!==void 0&&v instanceof j||V!==void 0&&v instanceof V)&&v.isPublic==!0&&(_===void 0||_=="PKCS8PUB")){var le=new H(v),pe=le.tohex();return hextopem(pe,"PUBLIC KEY")}if(_=="PKCS1PRV"&&X!==void 0&&v instanceof X&&(x===void 0||x==null)&&v.isPrivate==!0){var le=re(v),pe=le.tohex();return hextopem(pe,"RSA PRIVATE KEY")}if(_=="PKCS1PRV"&&V!==void 0&&v instanceof V&&(x===void 0||x==null)&&v.isPrivate==!0){var ie=new k({name:v.curveName}),he=ie.tohex(),ae=ee(v),te=ae.tohex(),ue="";return ue+=hextopem(he,"EC PARAMETERS"),ue+=hextopem(te,"EC PRIVATE KEY"),ue}if(_=="PKCS1PRV"&&j!==void 0&&v instanceof j&&(x===void 0||x==null)&&v.isPrivate==!0){var le=fe(v),pe=le.tohex();return hextopem(pe,"DSA PRIVATE KEY")}if(_=="PKCS5PRV"&&X!==void 0&&v instanceof X&&x!==void 0&&x!=null&&v.isPrivate==!0){var le=re(v),pe=le.tohex();return E===void 0&&(E="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",pe,x,E,P)}if(_=="PKCS5PRV"&&V!==void 0&&v instanceof V&&x!==void 0&&x!=null&&v.isPrivate==!0){var le=ee(v),pe=le.tohex();return E===void 0&&(E="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",pe,x,E,P)}if(_=="PKCS5PRV"&&j!==void 0&&v instanceof j&&x!==void 0&&x!=null&&v.isPrivate==!0){var le=fe(v),pe=le.tohex();return E===void 0&&(E="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",pe,x,E,P)}var ne=function(Z,Q){var de=J(Z,Q),ye=new U({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:de.pbkdf2Salt}},{int:de.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:de.encryptionSchemeIV}}]}]}]},{octstr:{hex:de.ciphertext}}]});return ye.tohex()},J=function(Z,Q){var de=100,ye=CryptoJS.lib.WordArray.random(8),oe="DES-EDE3-CBC",se=CryptoJS.lib.WordArray.random(8),Y=CryptoJS.PBKDF2(Q,ye,{keySize:192/32,iterations:de}),ce=CryptoJS.enc.Hex.parse(Z),we=CryptoJS.TripleDES.encrypt(ce,Y,{iv:se})+"",Pe={};return Pe.ciphertext=we,Pe.pbkdf2Salt=CryptoJS.enc.Hex.stringify(ye),Pe.pbkdf2Iter=de,Pe.encryptionSchemeAlg=oe,Pe.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(se),Pe};if(_=="PKCS8PRV"&&X!=null&&v instanceof X&&v.isPrivate==!0){var q=re(v),F=q.tohex(),le=U({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:F}}]}),pe=le.tohex();if(x===void 0||x==null)return hextopem(pe,"PRIVATE KEY");var te=ne(pe,x);return hextopem(te,"ENCRYPTED PRIVATE KEY")}if(_=="PKCS8PRV"&&V!==void 0&&v instanceof V&&v.isPrivate==!0){var L={seq:[{int:1},{octstr:{hex:v.prvKeyHex}}]};typeof v.pubKeyHex=="string"&&L.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+v.pubKeyHex}}]});var q=new U(L),F=q.tohex(),le=U({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:v.curveName}}]},{octstr:{hex:F}}]}),pe=le.tohex();if(x===void 0||x==null)return hextopem(pe,"PRIVATE KEY");var te=ne(pe,x);return hextopem(te,"ENCRYPTED PRIVATE KEY")}if(_=="PKCS8PRV"&&j!==void 0&&v instanceof j&&v.isPrivate==!0){var q=new C({bigint:v.x}),F=q.tohex(),le=U({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]}]},{octstr:{hex:F}}]}),pe=le.tohex();if(x===void 0||x==null)return hextopem(pe,"PRIVATE KEY");var te=ne(pe,x);return hextopem(te,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},KEYUTIL.getKeyFromCSRPEM=function(v){var _=pemtohex(v,"CERTIFICATE REQUEST"),x=KEYUTIL.getKeyFromCSRHex(_);return x},KEYUTIL.getKeyFromCSRHex=function(v){var _=KEYUTIL.parseCSRHex(v),x=KEYUTIL.getKey(_.p8pubkeyhex,null,"pkcs8pub");return x},KEYUTIL.parseCSRHex=function(v){var _=ASN1HEX,x=_.getChildIdx,E=_.getTLV,A={},P=v;if(P.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var T=x(P,0);if(T.length<1)throw new Error("malformed CSR(code:002)");if(P.substr(T[0],2)!="30")throw new Error("malformed CSR(code:003)");var O=x(P,T[0]);if(O.length<3)throw new Error("malformed CSR(code:004)");return A.p8pubkeyhex=E(P,O[2]),A},KEYUTIL.getKeyID=function(v){var _=KEYUTIL,x=ASN1HEX;typeof v=="string"&&v.indexOf("BEGIN ")!=-1&&(v=_.getKey(v));var E=pemtohex(_.getPEM(v)),A=x.getIdxbyList(E,0,[1]),P=x.getV(E,A).substring(2);return KJUR.crypto.Util.hashHex(P,"sha1")},KEYUTIL.getJWK=function(v,_,x,E,A){var P,T={},O,k=KJUR.crypto.Util.hashHex;if(typeof v=="string")P=KEYUTIL.getKey(v),v.indexOf("CERTIFICATE")!=-1&&(O=pemtohex(v));else if(typeof v=="object")v instanceof X509?(P=v.getPublicKey(),O=v.hex):P=v;else throw new Error("unsupported keyinfo type");if(P instanceof RSAKey&&P.isPrivate)T.kty="RSA",T.n=hextob64u(P.n.toString(16)),T.e=hextob64u(P.e.toString(16)),T.d=hextob64u(P.d.toString(16)),T.p=hextob64u(P.p.toString(16)),T.q=hextob64u(P.q.toString(16)),T.dp=hextob64u(P.dmp1.toString(16)),T.dq=hextob64u(P.dmq1.toString(16)),T.qi=hextob64u(P.coeff.toString(16));else if(P instanceof RSAKey&&P.isPublic)T.kty="RSA",T.n=hextob64u(P.n.toString(16)),T.e=hextob64u(P.e.toString(16));else if(P instanceof KJUR.crypto.ECDSA&&P.isPrivate){var C=P.getShortNISTPCurveName();if(C!=="P-256"&&C!=="P-384"&&C!=="P-521")throw new Error("unsupported curve name for JWT: "+C);var U=P.getPublicKeyXYHex();T.kty="EC",T.crv=C,T.x=hextob64u(U.x),T.y=hextob64u(U.y),T.d=hextob64u(P.prvKeyHex)}else if(P instanceof KJUR.crypto.ECDSA&&P.isPublic){var C=P.getShortNISTPCurveName();if(C!=="P-256"&&C!=="P-384"&&C!=="P-521")throw new Error("unsupported curve name for JWT: "+C);var U=P.getPublicKeyXYHex();T.kty="EC",T.crv=C,T.x=hextob64u(U.x),T.y=hextob64u(U.y)}if(T.kty==null)throw new Error("unsupported keyinfo");return!P.isPrivate&&_!=!0&&(T.kid=KJUR.jws.JWS.getJWKthumbprint(T)),O!=null&&x!=!0&&(T.x5c=[hex2b64(O)]),O!=null&&E!=!0&&(T.x5t=b64tob64u(hex2b64(k(O,"sha1")))),O!=null&&A!=!0&&(T["x5t#S256"]=b64tob64u(hex2b64(k(O,"sha256")))),T},KEYUTIL.getJWKFromKey=function(v){return KEYUTIL.getJWK(v,!0,!0,!0,!0)},RSAKey.getPosArrayOfChildrenFromHex=function(v){return ASN1HEX.getChildIdx(v,0)},RSAKey.getHexValueArrayOfChildrenFromHex=function(v){var _=ASN1HEX,x=_.getV,H=RSAKey.getPosArrayOfChildrenFromHex(v),E=x(v,H[0]),A=x(v,H[1]),P=x(v,H[2]),T=x(v,H[3]),O=x(v,H[4]),k=x(v,H[5]),C=x(v,H[6]),U=x(v,H[7]),N=x(v,H[8]),H=new Array;return H.push(E,A,P,T,O,k,C,U,N),H},RSAKey.prototype.readPrivateKeyFromPEMString=function(v){var _=pemtohex(v),x=RSAKey.getHexValueArrayOfChildrenFromHex(_);this.setPrivateEx(x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8])},RSAKey.prototype.readPKCS5PrvKeyHex=function(v){var _=RSAKey.getHexValueArrayOfChildrenFromHex(v);this.setPrivateEx(_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8])},RSAKey.prototype.readPKCS8PrvKeyHex=function(v){var _,x,E,A,P,T,O,k,C=ASN1HEX,U=C.getVbyListEx;if(C.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");try{_=U(v,0,[2,0,1],"02"),x=U(v,0,[2,0,2],"02"),E=U(v,0,[2,0,3],"02"),A=U(v,0,[2,0,4],"02"),P=U(v,0,[2,0,5],"02"),T=U(v,0,[2,0,6],"02"),O=U(v,0,[2,0,7],"02"),k=U(v,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(_,x,E,A,P,T,O,k)},RSAKey.prototype.readPKCS5PubKeyHex=function(v){var _=ASN1HEX,x=_.getV;if(_.isASN1HEX(v)===!1)throw new Error("keyHex is not ASN.1 hex string");var E=_.getChildIdx(v,0);if(E.length!==2||v.substr(E[0],2)!=="02"||v.substr(E[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var A=x(v,E[0]),P=x(v,E[1]);this.setPublic(A,P)},RSAKey.prototype.readPKCS8PubKeyHex=function(v){var _=ASN1HEX;if(_.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");if(_.getTLVbyListEx(v,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var x=_.getTLVbyListEx(v,0,[1,0]);this.readPKCS5PubKeyHex(x)},RSAKey.prototype.readCertPubKeyHex=function(v,_){var x,E;x=new X509,x.readCertHex(v),E=x.getPublicKeyHex(),this.readPKCS8PubKeyHex(E)};function _zeroPaddingOfSignature(v,_){for(var x="",E=_/4-v.length,A=0;A<E;A++)x=x+"0";return x+v}RSAKey.prototype.sign=function(v,_){var x=function(A){return KJUR.crypto.Util.hashString(A,_)},E=x(v);return this.signWithMessageHash(E,_)},RSAKey.prototype.signWithMessageHash=function(v,_){var x=KJUR.crypto.Util.getPaddedDigestInfoHex(v,_,this.n.bitLength()),E=parseBigInt(x,16),A=this.doPrivate(E),P=A.toString(16);return _zeroPaddingOfSignature(P,this.n.bitLength())};function pss_mgf1_str(v,_,x){for(var E="",A=0;E.length<_;)E+=hextorstr(x(rstrtohex(v+String.fromCharCode.apply(String,[(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255])))),A+=1;return E}RSAKey.prototype.signPSS=function(v,_,x){var E=function(P){return KJUR.crypto.Util.hashHex(P,_)},A=E(rstrtohex(v));return x===void 0&&(x=-1),this.signWithMessageHashPSS(A,_,x)},RSAKey.prototype.signWithMessageHashPSS=function(v,_,x){var E=hextorstr(v),A=E.length,P=this.n.bitLength()-1,T=Math.ceil(P/8),O,k=function(X){return KJUR.crypto.Util.hashHex(X,_)};if(x===-1||x===void 0)x=A;else if(x===-2)x=T-A-2;else if(x<-2)throw new Error("invalid salt length");if(T<A+x+2)throw new Error("data too long");var C="";x>0&&(C=new Array(x),new SecureRandom().nextBytes(C),C=String.fromCharCode.apply(String,C));var U=hextorstr(k(rstrtohex("\0\0\0\0\0\0\0\0"+E+C))),N=[];for(O=0;O<T-x-A-2;O+=1)N[O]=0;var H=String.fromCharCode.apply(String,N)+""+C,D=pss_mgf1_str(U,H.length,k),j=[];for(O=0;O<H.length;O+=1)j[O]=H.charCodeAt(O)^D.charCodeAt(O);var V=65280>>8*T-P&255;for(j[0]&=~V,O=0;O<A;O++)j.push(U.charCodeAt(O));return j.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger$2(j)).toString(16),this.n.bitLength())};function _rsasign_getAlgNameAndHashFromHexDisgestInfo(v){for(var _ in KJUR.crypto.Util.DIGESTINFOHEAD){var x=KJUR.crypto.Util.DIGESTINFOHEAD[_],E=x.length;if(v.substring(0,E)==x){var A=[_,v.substring(E)];return A}}return[]}RSAKey.prototype.verify=function(v,_){if(_=_.toLowerCase(),_.match(/^[0-9a-f]+$/)==null)return!1;var x=parseBigInt(_,16),E=this.n.bitLength();if(x.bitLength()>E)return!1;var A=this.doPublic(x),P=A.toString(16);if(P.length+3!=E/4)return!1;var T=P.replace(/^1f+00/,""),O=_rsasign_getAlgNameAndHashFromHexDisgestInfo(T);if(O.length==0)return!1;var k=O[0],C=O[1],U=function(H){return KJUR.crypto.Util.hashString(H,k)},N=U(v);return C==N},RSAKey.prototype.verifyWithMessageHash=function(v,_){if(_.length!=Math.ceil(this.n.bitLength()/4))return!1;var x=parseBigInt(_,16);if(x.bitLength()>this.n.bitLength())return 0;var E=this.doPublic(x),A=E.toString(16).replace(/^1f+00/,""),P=_rsasign_getAlgNameAndHashFromHexDisgestInfo(A);if(P.length==0)return!1;P[0];var T=P[1];return T==v},RSAKey.prototype.verifyPSS=function(v,_,x,E){var A=function(T){return KJUR.crypto.Util.hashHex(T,x)},P=A(rstrtohex(v));return E===void 0&&(E=-1),this.verifyWithMessageHashPSS(P,_,x,E)},RSAKey.prototype.verifyWithMessageHashPSS=function(v,_,x,E){if(_.length!=Math.ceil(this.n.bitLength()/4))return!1;var A=new BigInteger$2(_,16),P=function(ee){return KJUR.crypto.Util.hashHex(ee,x)},T=hextorstr(v),O=T.length,k=this.n.bitLength()-1,C=Math.ceil(k/8),U;if(E===-1||E===void 0)E=O;else if(E===-2)E=C-O-2;else if(E<-2)throw new Error("invalid salt length");if(C<O+E+2)throw new Error("data too long");var N=this.doPublic(A).toByteArray();for(U=0;U<N.length;U+=1)N[U]&=255;for(;N.length<C;)N.unshift(0);if(N[C-1]!==188)throw new Error("encoded message does not end in 0xbc");N=String.fromCharCode.apply(String,N);var H=N.substr(0,C-O-1),D=N.substr(H.length,O),j=65280>>8*C-k&255;if(H.charCodeAt(0)&j)throw new Error("bits beyond keysize not zero");var V=pss_mgf1_str(D,H.length,P),X=[];for(U=0;U<H.length;U+=1)X[U]=H.charCodeAt(U)^V.charCodeAt(U);X[0]&=~j;var re=C-O-E-2;for(U=0;U<re;U+=1)if(X[U]!==0)throw new Error("leftmost octets not zero");if(X[re]!==1)throw new Error("0x01 marker not found");return D===hextorstr(P(rstrtohex("\0\0\0\0\0\0\0\0"+T+String.fromCharCode.apply(String,X.slice(-E)))))},RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.SALT_LEN_RECOVER=-2;function X509(v){var _=ASN1HEX,x=_.getChildIdx,E=_.getV;_.dump;var A=_.parse,P=_.getTLV,T=_.getVbyList,O=_.getVbyListEx,k=_.getTLVbyList,C=_.getTLVbyListEx,U=_.getIdxbyList,N=_.getIdxbyListEx,H=_.getVidx,D=_.getInt,j=_.oidname,V=_.hextooidstr,X=pemtohex,re,ee=Error;try{re=KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var ie=k(this.hex,0,[0,0]);if(ie.substr(0,2)=="a0"){var he=k(ie,0,[0]),ae=D(he,0);if(ae<0||2<ae)throw new Error("malformed version field");return this.version=ae+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return O(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ie=C(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ie)},this.getAlgorithmIdentifierName=function(ie){for(var he in re)if(ie===re[he])return he;return j(O(ie,0,[0],"06"))},this.getIssuer=function(ie,he){return this.getX500Name(this.getIssuerHex(),ie,he)},this.getIssuerHex=function(){return k(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var ie=this.getIssuer();return ie.str},this.getSubject=function(ie,he){return this.getX500Name(this.getSubjectHex(),ie,he)},this.getSubjectHex=function(){return k(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var ie=this.getSubject();return ie.str},this.getNotBefore=function(){var ie=T(this.hex,0,[0,4+this.foffset,0]);return ie=ie.replace(/(..)/g,"%$1"),ie=decodeURIComponent(ie),ie},this.getNotAfter=function(){var ie=T(this.hex,0,[0,4+this.foffset,1]);return ie=ie.replace(/(..)/g,"%$1"),ie=decodeURIComponent(ie),ie},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return k(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var ie=this.getSPKI();return ie==null?null:T(ie,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return U(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ie=this.getPublicKeyIdx();return U(this.hex,ie,[1,0],"30")},this.getPublicKey=function(){return KEYUTIL.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ie=k(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ie)},this.getSignatureValueHex=function(){return T(this.hex,0,[2],"03",!0)},this.verifySignature=function(ie){var he=this.getSignatureAlgorithmField(),ae=this.getSignatureValueHex(),te=k(this.hex,0,[0],"30"),ue=new KJUR.crypto.Signature({alg:he});return ue.init(ie),ue.updateHex(te),ue.verify(ae)},this.parseExt=function(ie){var he,ae,te;if(ie===void 0){if(te=this.hex,this.version!==3)return-1;he=U(te,0,[0,7,0],"30"),ae=x(te,he)}else{te=pemtohex(ie);var ue=U(te,0,[0,3,0,0],"06");if(E(te,ue)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}he=U(te,0,[0,3,0,1,0],"30"),ae=x(te,he),this.hex=te}this.aExtInfo=new Array;for(var ne=0;ne<ae.length;ne++){var J={};J.critical=!1;var q=x(te,ae[ne]),F=0;q.length===3&&(J.critical=!0,F=1),J.oid=_.hextooidstr(T(te,ae[ne],[0],"06"));var L=U(te,ae[ne],[1+F]);J.vidx=H(te,L),this.aExtInfo.push(J)}},this.getExtInfo=function(ie){var he=this.aExtInfo,ae=ie;if(ie.match(/^[0-9.]+$/)||(ae=KJUR.asn1.x509.OID.name2oid(ie)),ae!==""){for(var te=0;te<he.length;te++)if(he[te].oid===ae)return he[te]}},this.getCriticalExtV=function(ie,he,ae){if(he!=null)return[he,ae];var te=this.getExtInfo(ie);return te==null?[null,null]:[P(this.hex,te.vidx),te.critical]},this.getExtBasicConstraints=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("basicConstraints");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"basicConstraints"};if(he&&(te.critical=!0),ie==="3000")return te;if(ie==="30030101ff")return te.cA=!0,te;if(ie.substr(0,12)==="30060101ff02"){var ue=E(ie,10),ne=parseInt(ue,16);return te.cA=!0,te.pathLen=ne,te}throw new Error("hExtV parse error: "+ie)},this.getExtNameConstraints=function(ie,he){var ae=this.getCriticalExtV("nameConstraints",ie,he);if(ie=ae[0],he=ae[1],ie!=null){var te={extname:"nameConstraints"};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++){for(var J=[],q=x(ie,ue[ne]),F=0;F<q.length;F++){var L=P(ie,q[F]),Z=this.getGeneralSubtree(L);J.push(Z)}var Q=ie.substr(ue[ne],2);Q=="a0"?te.permit=J:Q=="a1"&&(te.exclude=J)}return te}},this.getGeneralSubtree=function(ie){var he=x(ie,0),ae=he.length;if(ae<1||2<ae)throw new Error("wrong num elements");for(var te=this.getGeneralName(P(ie,he[0])),ue=1;ue<ae;ue++){var ne=ie.substr(he[ue],2),J=E(ie,he[ue]),q=parseInt(J,16);ne=="80"&&(te.min=q),ne=="81"&&(te.max=q)}return te},this.getExtKeyUsage=function(ie,he){var ae=this.getCriticalExtV("keyUsage",ie,he);if(ie=ae[0],he=ae[1],ie!=null){var te={extname:"keyUsage"};return he&&(te.critical=!0),te.names=this.getExtKeyUsageString(ie).split(","),te}},this.getExtKeyUsageBin=function(ie){if(ie===void 0){var he=this.getExtInfo("keyUsage");if(he===void 0)return"";ie=P(this.hex,he.vidx)}if(ie.length!=8&&ie.length!=10)throw new Error("malformed key usage value: "+ie);var ae="000000000000000"+parseInt(ie.substr(6),16).toString(2);return ie.length==8&&(ae=ae.slice(-8)),ie.length==10&&(ae=ae.slice(-16)),ae=ae.replace(/0+$/,""),ae==""&&(ae="0"),ae},this.getExtKeyUsageString=function(ie){for(var he=this.getExtKeyUsageBin(ie),ae=new Array,te=0;te<he.length;te++)he.substr(te,1)=="1"&&ae.push(X509.KEYUSAGE_NAME[te]);return ae.join(",")},this.getExtSubjectKeyIdentifier=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("subjectKeyIdentifier");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"subjectKeyIdentifier"};he&&(te.critical=!0);var ue=E(ie,0);return te.kid={hex:ue},te},this.getExtAuthorityKeyIdentifier=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("authorityKeyIdentifier");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"authorityKeyIdentifier"};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++){var J=ie.substr(ue[ne],2);if(J==="80"&&(te.kid={hex:E(ie,ue[ne])}),J==="a1"){var q=P(ie,ue[ne]),F=this.getGeneralNames(q);te.issuer=F[0].dn}J==="82"&&(te.sn={hex:E(ie,ue[ne])})}return te},this.getExtExtKeyUsage=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("extKeyUsage");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"extKeyUsage",array:[]};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++)te.array.push(j(E(ie,ue[ne])));return te},this.getExtExtKeyUsageName=function(){var ie=this.getExtInfo("extKeyUsage");if(ie===void 0)return ie;var he=new Array,ae=P(this.hex,ie.vidx);if(ae==="")return he;for(var te=x(ae,0),ue=0;ue<te.length;ue++)he.push(j(E(ae,te[ue])));return he},this.getExtSubjectAltName=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("subjectAltName");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"subjectAltName",array:[]};return he&&(te.critical=!0),te.array=this.getGeneralNames(ie),te},this.getExtIssuerAltName=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("issuerAltName");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"issuerAltName",array:[]};return he&&(te.critical=!0),te.array=this.getGeneralNames(ie),te},this.getGeneralNames=function(ie){for(var he=x(ie,0),ae=[],te=0;te<he.length;te++){var ue=this.getGeneralName(P(ie,he[te]));ue!==void 0&&ae.push(ue)}return ae},this.getGeneralName=function(ie){var he=ie.substr(0,2),ae=E(ie,0),te=hextorstr(ae);if(he=="81")return{rfc822:te};if(he=="82")return{dns:te};if(he=="86")return{uri:te};if(he=="87")return{ip:hextoip(ae)};if(he=="a4")return{dn:this.getX500Name(ae)};if(he=="a0")return{other:this.getOtherName(ie)}},this.getExtSubjectAltName2=function(){var ie,he,ae,te=this.getExtInfo("subjectAltName");if(te===void 0)return te;for(var ue=new Array,ne=P(this.hex,te.vidx),J=x(ne,0),q=0;q<J.length;q++)ae=ne.substr(J[q],2),ie=E(ne,J[q]),ae==="81"&&(he=hextoutf8(ie),ue.push(["MAIL",he])),ae==="82"&&(he=hextoutf8(ie),ue.push(["DNS",he])),ae==="84"&&(he=X509.hex2dn(ie,0),ue.push(["DN",he])),ae==="86"&&(he=hextoutf8(ie),ue.push(["URI",he])),ae==="87"&&(he=hextoip(ie),ue.push(["IP",he]));return ue},this.getExtCRLDistributionPoints=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("cRLDistributionPoints");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"cRLDistributionPoints",array:[]};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++){var J=P(ie,ue[ne]);te.array.push(this.getDistributionPoint(J))}return te},this.getDistributionPoint=function(ie){for(var he={},ae=x(ie,0),te=0;te<ae.length;te++){var ue=ie.substr(ae[te],2),ne=P(ie,ae[te]);ue=="a0"&&(he.dpname=this.getDistributionPointName(ne))}return he},this.getDistributionPointName=function(ie){for(var he={},ae=x(ie,0),te=0;te<ae.length;te++){var ue=ie.substr(ae[te],2),ne=P(ie,ae[te]);ue=="a0"&&(he.full=this.getGeneralNames(ne))}return he},this.getExtCRLDistributionPointsURI=function(){var ie=this.getExtCRLDistributionPoints();if(ie==null)return ie;for(var he=ie.array,ae=[],te=0;te<he.length;te++)try{he[te].dpname.full[0].uri!=null&&ae.push(he[te].dpname.full[0].uri)}catch{}return ae},this.getExtAIAInfo=function(){var ie=this.getExtInfo("authorityInfoAccess");if(ie===void 0)return ie;for(var he={ocsp:[],caissuer:[]},ae=x(this.hex,ie.vidx),te=0;te<ae.length;te++){var ue=T(this.hex,ae[te],[0],"06"),ne=T(this.hex,ae[te],[1],"86");ue==="2b06010505073001"&&he.ocsp.push(hextoutf8(ne)),ue==="2b06010505073002"&&he.caissuer.push(hextoutf8(ne))}return he},this.getExtAuthorityInfoAccess=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("authorityInfoAccess");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"authorityInfoAccess",array:[]};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++){var J=O(ie,ue[ne],[0],"06"),q=T(ie,ue[ne],[1],"86"),F=hextoutf8(q);if(J=="2b06010505073001")te.array.push({ocsp:F});else if(J=="2b06010505073002")te.array.push({caissuer:F});else throw new Error("unknown method: "+J)}return te},this.getExtCertificatePolicies=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("certificatePolicies");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"certificatePolicies",array:[]};he&&(te.critical=!0);for(var ue=x(ie,0),ne=0;ne<ue.length;ne++){var J=P(ie,ue[ne]),q=this.getPolicyInformation(J);te.array.push(q)}return te},this.getPolicyInformation=function(ie){var he={},ae=T(ie,0,[0],"06");he.policyoid=j(ae);var te=N(ie,0,[1],"30");if(te!=-1){he.array=[];for(var ue=x(ie,te),ne=0;ne<ue.length;ne++){var J=P(ie,ue[ne]),q=this.getPolicyQualifierInfo(J);he.array.push(q)}}return he},this.getOtherName=function(ie){var he={},ae=x(ie,0),te=T(ie,ae[0],[],"06"),ue=T(ie,ae[1],[]);return he.oid=j(te),he.value=A(ue),he},this.getPolicyQualifierInfo=function(ie){var he={},ae=T(ie,0,[0],"06");if(ae==="2b06010505070201"){var te=O(ie,0,[1],"16");he.cps=hextorstr(te)}else if(ae==="2b06010505070202"){var ue=k(ie,0,[1],"30");he.unotice=this.getUserNotice(ue)}return he},this.getUserNotice=function(ie){var he=null;try{he=_.parse(ie);var ae=this._asn1ToUnotice(he);return ae}catch{return}},this._asn1ToUnotice=function(ie){try{for(var he={},ae=aryval(ie,"seq"),te=0;te<ae.length;te++){var ue=this._asn1ToNoticeRef(ae[te]);ue!=null&&(he.noticeref=ue);var ne=this.asn1ToDisplayText(ae[te]);ne!=null&&(he.exptext=ne)}return Object.keys(he).length>0?he:void 0}catch{return}},this._asn1ToNoticeRef=function(ie){try{for(var he={},ae=aryval(ie,"seq"),te=0;te<ae.length;te++){var ue=this._asn1ToNoticeNum(ae[te]);ue!=null&&(he.noticenum=ue);var ne=this.asn1ToDisplayText(ae[te]);ne!=null&&(he.org=ne)}return Object.keys(he).length>0?he:void 0}catch{return}},this._asn1ToNoticeNum=function(ie){try{for(var he=aryval(ie,"seq"),ae=[],te=0;te<he.length;te++){var ue=he[te];ae.push(parseInt(aryval(ue,"int.hex"),16))}return ae}catch{return}},this.getDisplayText=function(ie){var he={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},ae={};return ae.type=he[ie.substr(0,2)],ae.str=hextorstr(E(ie,0)),ae},this.asn1ToDisplayText=function(ie){if(ie.utf8str!=null)return{type:"utf8",str:ie.utf8str.str};if(ie.ia5str!=null)return{type:"ia5",str:ie.ia5str.str};if(ie.visstr!=null)return{type:"vis",str:ie.visstr.str};if(ie.bmpstr!=null)return{type:"bmp",str:ie.bmpstr.str};if(ie.prnstr!=null)return{type:"prn",str:ie.prnstr.str}},this.getExtPolicyMappings=function(ie,he){var ae=this.getCriticalExtV("policyMappings",ie,he);if(ie=ae[0],he=ae[1],ie!=null){var te={extname:"policyMappings"};he&&(te.critical=!0);try{for(var ue=A(ie),ne=ue.seq,J=[],q=0;q<ne.length;q++){var F=ne[q].seq;J.push([F[0].oid,F[1].oid])}te.array=J}catch{throw new ee("malformed policyMappings")}return te}},this.getExtPolicyConstraints=function(ie,he){var ae=this.getCriticalExtV("policyConstraints",ie,he);if(ie=ae[0],he=ae[1],ie!=null){var te={extname:"policyConstraints"};he&&(te.critical=!0);var ue=A(ie);try{for(var ne=ue.seq,J=0;J<ne.length;J++){var q=ne[J].tag;q.explicit==!1&&(q.tag=="80"&&(te.reqexp=parseInt(q.hex,16)),q.tag=="81"&&(te.inhibit=parseInt(q.hex,16)))}}catch{return new ee("malformed policyConstraints value")}return te}},this.getExtInhibitAnyPolicy=function(ie,he){var ae=this.getCriticalExtV("inhibitAnyPolicy",ie,he);if(ie=ae[0],he=ae[1],ie!=null){var te={extname:"inhibitAnyPolicy"};he&&(te.critical=!0);var ue=D(ie,0);return ue==-1?new ee("wrong value"):(te.skip=ue,te)}},this.getExtCRLNumber=function(ie,he){var ae={extname:"cRLNumber"};if(he&&(ae.critical=!0),ie.substr(0,2)=="02")return ae.num={hex:E(ie,0)},ae;throw new ee("hExtV parse error: "+ie)},this.getExtCRLReason=function(ie,he){var ae={extname:"cRLReason"};if(he&&(ae.critical=!0),ie.substr(0,2)=="0a")return ae.code=parseInt(E(ie,0),16),ae;throw new Error("hExtV parse error: "+ie)},this.getExtOcspNonce=function(ie,he){var ae={extname:"ocspNonce"};he&&(ae.critical=!0);var te=E(ie,0);return ae.hex=te,ae},this.getExtOcspNoCheck=function(ie,he){var ae={extname:"ocspNoCheck"};return he&&(ae.critical=!0),ae},this.getExtAdobeTimeStamp=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("adobeTimeStamp");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"adobeTimeStamp"};he&&(te.critical=!0);var ue=x(ie,0);if(ue.length>1){var ne=P(ie,ue[1]),J=this.getGeneralName(ne);J.uri!=null&&(te.uri=J.uri)}if(ue.length>2){var q=P(ie,ue[2]);q=="0101ff"&&(te.reqauth=!0),q=="010100"&&(te.reqauth=!1)}return te},this.getExtSubjectDirectoryAttributes=function(ie,he){if(ie===void 0&&he===void 0){var ae=this.getExtInfo("subjectDirectoryAttributes");if(ae===void 0)return;ie=P(this.hex,ae.vidx),he=ae.critical}var te={extname:"subjectDirectoryAttributes"};he&&(te.critical=!0);try{for(var ue=A(ie),ne=[],J=0;J<ue.seq.length;J++){var q=ue.seq[J],F=aryval(q,"seq.0.oid"),L=aryval(q,"seq.1.set");if(F==null||L==null)throw"error";ne.push({attr:F,array:L})}return te.array=ne,te}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var fe=function(ie){var he={};try{var ae=ie.seq[0].oid,te=KJUR.asn1.x509.OID.name2oid(ae);he.type=KJUR.asn1.x509.OID.oid2atype(te);var ue=ie.seq[1];if(ue.utf8str!=null)he.ds="utf8",he.value=ue.utf8str.str;else if(ue.numstr!=null)he.ds="num",he.value=ue.numstr.str;else if(ue.telstr!=null)he.ds="tel",he.value=ue.telstr.str;else if(ue.prnstr!=null)he.ds="prn",he.value=ue.prnstr.str;else if(ue.ia5str!=null)he.ds="ia5",he.value=ue.ia5str.str;else if(ue.visstr!=null)he.ds="vis",he.value=ue.visstr.str;else if(ue.bmpstr!=null)he.ds="bmp",he.value=ue.bmpstr.str;else throw"error";return he}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},le=function(ie){try{return ie.set.map(function(he){return fe(he)})}catch(he){throw new Error("improper ASN.1 parsed RDN: "+he)}},pe=function(ie){try{return ie.seq.map(function(he){return le(he)})}catch(he){throw new Error("improper ASN.1 parsed X500Name: "+he)}};this.getX500NameRule=function(ie){for(var he=null,ae=[],te=0;te<ie.length;te++)for(var ue=ie[te],ne=0;ne<ue.length;ne++)ae.push(ue[ne]);for(var te=0;te<ae.length;te++){var J=ae[te],q=J.ds,F=J.value,L=J.type;if(q!="prn"&&q!="utf8"&&q!="ia5")return"mixed";if(q=="ia5"){if(L!="CN")return"mixed";if(KJUR.lang.String.isMail(F))continue;return"mixed"}if(L=="C"){if(q=="prn")continue;return"mixed"}if(he==null)he=q;else if(he!==q)return"mixed"}return he??"prn"},this.getAttrTypeAndValue=function(ie){var he=A(ie);return fe(he)},this.getRDN=function(ie){var he=A(ie);return le(he)},this.getX500NameArray=function(ie){var he=A(ie);return pe(he)},this.getX500Name=function(ie,he,ae){var te=this.getX500NameArray(ie),ue=this.dnarraytostr(te),ne={str:ue};return ne.array=te,ae==!0&&(ne.hex=ie),he==!0&&(ne.canon=this.c14nRDNArray(te)),ne},this.readCertPEM=function(ie){this.readCertHex(X(ie))},this.readCertHex=function(ie){this.hex=ie,this.getVersion();try{U(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(ie){var he={};return ie==null&&(ie={}),he.version=this.getVersion(),he.serial={hex:this.getSerialNumberHex()},he.sigalg=this.getSignatureAlgorithmField(),he.issuer=this.getIssuer(ie.dncanon,ie.dnhex),he.notbefore=this.getNotBefore(),he.notafter=this.getNotAfter(),he.subject=this.getSubject(ie.dncanon,ie.dnhex),he.sbjpubkey=hextopem(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(he.ext=this.getExtParamArray()),he.sighex=this.getSignatureValueHex(),ie.tbshex==!0&&(he.tbshex=k(this.hex,0,[0])),ie.nodnarray==!0&&(delete he.issuer.array,delete he.subject.array),he},this.getExtParamArray=function(ie){if(ie==null){var he=N(this.hex,0,[0,"[3]"]);he!=-1&&(ie=C(this.hex,0,[0,"[3]",0],"30"))}for(var ae=[],te=x(ie,0),ue=0;ue<te.length;ue++){var ne=P(ie,te[ue]),J=this.getExtParam(ne);J!=null&&ae.push(J)}return ae},this.getExtParam=function(ie){var he=x(ie,0),ae=he.length;if(ae!=2&&ae!=3)throw new Error("wrong number elements in Extension: "+ae+" "+ie);var te=V(T(ie,0,[0],"06")),ue=!1;ae==3&&k(ie,0,[1])=="0101ff"&&(ue=!0);var ne=k(ie,0,[ae-1,0]),J=void 0;if(te=="2.5.29.14"?J=this.getExtSubjectKeyIdentifier(ne,ue):te=="2.5.29.15"?J=this.getExtKeyUsage(ne,ue):te=="2.5.29.17"?J=this.getExtSubjectAltName(ne,ue):te=="2.5.29.18"?J=this.getExtIssuerAltName(ne,ue):te=="2.5.29.19"?J=this.getExtBasicConstraints(ne,ue):te=="2.5.29.30"?J=this.getExtNameConstraints(ne,ue):te=="2.5.29.31"?J=this.getExtCRLDistributionPoints(ne,ue):te=="2.5.29.32"?J=this.getExtCertificatePolicies(ne,ue):te=="2.5.29.33"?J=this.getExtPolicyMappings(ne,ue):te=="2.5.29.35"?J=this.getExtAuthorityKeyIdentifier(ne,ue):te=="2.5.29.36"?J=this.getExtPolicyConstraints(ne,ue):te=="2.5.29.37"?J=this.getExtExtKeyUsage(ne,ue):te=="2.5.29.54"?J=this.getExtInhibitAnyPolicy(ne,ue):te=="1.3.6.1.5.5.7.1.1"?J=this.getExtAuthorityInfoAccess(ne,ue):te=="2.5.29.20"?J=this.getExtCRLNumber(ne,ue):te=="2.5.29.21"?J=this.getExtCRLReason(ne,ue):te=="2.5.29.9"?J=this.getExtSubjectDirectoryAttributes(ne,ue):te=="1.3.6.1.5.5.7.48.1.2"?J=this.getExtOcspNonce(ne,ue):te=="1.3.6.1.5.5.7.48.1.5"?J=this.getExtOcspNoCheck(ne,ue):te=="1.2.840.113583.1.1.9.1"?J=this.getExtAdobeTimeStamp(ne,ue):X509.EXT_PARSER[te]!=null&&(J=X509.EXT_PARSER[te](te,ue,ne)),J!=null)return J;var q={extname:te,extn:ne};try{q.extn=A(ne)}catch{}return ue&&(q.critical=!0),q},this.findExt=function(ie,he){for(var ae=0;ae<ie.length;ae++)if(ie[ae].extname==he)return ie[ae];return null},this.updateExtCDPFullURI=function(ie,he){var ae=this.findExt(ie,"cRLDistributionPoints");if(ae!=null&&ae.array!=null){for(var te=ae.array,ue=0;ue<te.length;ue++)if(te[ue].dpname!=null&&te[ue].dpname.full!=null)for(var ne=te[ue].dpname.full,J=0;J<ne.length;J++){var q=ne[ue];q.uri!=null&&(q.uri=he)}}},this.updateExtAIAOCSP=function(ie,he){var ae=this.findExt(ie,"authorityInfoAccess");if(ae!=null&&ae.array!=null)for(var te=ae.array,ue=0;ue<te.length;ue++)te[ue].ocsp!=null&&(te[ue].ocsp=he)},this.updateExtAIACAIssuer=function(ie,he){var ae=this.findExt(ie,"authorityInfoAccess");if(ae!=null&&ae.array!=null)for(var te=ae.array,ue=0;ue<te.length;ue++)te[ue].caissuer!=null&&(te[ue].caissuer=he)},this.dnarraytostr=function(ie){function he(te){return te.map(function(ue){return ae(ue).replace(/\+/,"\\+")}).join("+")}function ae(te){return te.type+"="+te.value}return"/"+ie.map(function(te){return he(te).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(ie){var he;if(ie.str!=null&&ie.array==null){var ae=new KJUR.asn1.x509.X500Name({str:ie.str}),te=ae.tohex();he=this.getX500NameArray(te)}else he=ie.array;ie.canon==null&&(ie.canon=this.c14nRDNArray(he))},this.c14nRDNArray=function(ie){for(var he=[],ae=0;ae<ie.length;ae++){for(var te=ie[ae],ue=[],ne=0;ne<te.length;ne++){var J=te[ne],q=J.value;q=q.replace(/^\s*/,""),q=q.replace(/\s*$/,""),q=q.replace(/\s+/g," "),q=q.toLowerCase(),ue.push(J.type.toLowerCase()+"="+q)}he.push(ue.join("+"))}return"/"+he.join("/")},this.getInfo=function(){var ie=function(Se){for(var Be="",Ie="    ",Re=`
`,Me=Se.array,xe=0;xe<Me.length;xe++){var Ee=Me[xe];if(Ee.dn!=null&&(Be+=Ie+"dn: "+Ee.dn.str+Re),Ee.ip!=null&&(Be+=Ie+"ip: "+Ee.ip+Re),Ee.rfc822!=null&&(Be+=Ie+"rfc822: "+Ee.rfc822+Re),Ee.dns!=null&&(Be+=Ie+"dns: "+Ee.dns+Re),Ee.uri!=null&&(Be+=Ie+"uri: "+Ee.uri+Re),Ee.other!=null){var Ue=Ee.other.oid,Ke=JSON.stringify(Ee.other.value).replace(/\"/g,"");Be+=Ie+"other: "+Ue+"="+Ke+Re}}return Be=Be.replace(/\n$/,""),Be},he=function(Se){for(var Be="",Ie=Se.array,Re=0;Re<Ie.length;Re++){var Me=Ie[Re];if(Be+="    policy oid: "+Me.policyoid+`
`,Me.array!==void 0)for(var xe=0;xe<Me.array.length;xe++){var Ee=Me.array[xe];Ee.cps!==void 0&&(Be+="    cps: "+Ee.cps+`
`)}}return Be},ae=function(Se){for(var Be="",Ie=Se.array,Re=0;Re<Ie.length;Re++){var Me=Ie[Re];try{Me.dpname.full[0].uri!==void 0&&(Be+="    "+Me.dpname.full[0].uri+`
`)}catch{}try{Me.dname.full[0].dn.hex!==void 0&&(Be+="    "+X509.hex2dn(Me.dpname.full[0].dn.hex)+`
`)}catch{}}return Be},te=function(Se){for(var Be="",Ie=Se.array,Re=0;Re<Ie.length;Re++){var Me=Ie[Re];Me.caissuer!==void 0&&(Be+="    caissuer: "+Me.caissuer+`
`),Me.ocsp!==void 0&&(Be+="    ocsp: "+Me.ocsp+`
`)}return Be},ue,ne,J;if(ue=`Basic Fields
`,ue+="  serial number: "+this.getSerialNumberHex()+`
`,ue+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,ue+="  issuer: "+this.getIssuerString()+`
`,ue+="  notBefore: "+this.getNotBefore()+`
`,ue+="  notAfter: "+this.getNotAfter()+`
`,ue+="  subject: "+this.getSubjectString()+`
`,ue+=`  subject public key info: 
`,ne=this.getPublicKey(),ue+="    key algorithm: "+ne.type+`
`,ne.type==="RSA"&&(ue+="    n="+hextoposhex(ne.n.toString(16)).substr(0,16)+`...
`,ue+="    e="+hextoposhex(ne.e.toString(16))+`
`),J=this.aExtInfo,J!=null){ue+=`X509v3 Extensions:
`;for(var q=0;q<J.length;q++){var F=J[q],L=KJUR.asn1.x509.OID.oid2name(F.oid);L===""&&(L=F.oid);var Z="";if(F.critical===!0&&(Z="CRITICAL"),ue+="  "+L+" "+Z+`:
`,L==="basicConstraints"){var Q=this.getExtBasicConstraints();Q.cA===void 0?ue+=`    {}
`:(ue+="    cA=true",Q.pathLen!==void 0&&(ue+=", pathLen="+Q.pathLen),ue+=`
`)}else if(L=="policyMappings"){var de=this.getExtPolicyMappings().array,ye=de.map(function(Se){var Be=Se;return Be[0]+":"+Be[1]}).join(", ");ue+="    "+ye+`
`}else if(L=="policyConstraints"){var oe=this.getExtPolicyConstraints();ue+="    ",oe.reqexp!=null&&(ue+=" reqexp="+oe.reqexp),oe.inhibit!=null&&(ue+=" inhibit="+oe.inhibit),ue+=`
`}else if(L=="inhibitAnyPolicy"){var oe=this.getExtInhibitAnyPolicy();ue+="    skip="+oe.skip+`
`}else if(L=="keyUsage")ue+="    "+this.getExtKeyUsageString()+`
`;else if(L=="subjectKeyIdentifier")ue+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(L=="authorityKeyIdentifier"){var se=this.getExtAuthorityKeyIdentifier();se.kid!==void 0&&(ue+="    kid="+se.kid.hex+`
`)}else if(L=="extKeyUsage"){var Y=this.getExtExtKeyUsage().array;ue+="    "+Y.join(", ")+`
`}else if(L=="subjectAltName"){var ce=ie(this.getExtSubjectAltName());ue+=ce+`
`}else if(L=="cRLDistributionPoints"){var we=this.getExtCRLDistributionPoints();ue+=ae(we)}else if(L=="authorityInfoAccess"){var Pe=this.getExtAuthorityInfoAccess();ue+=te(Pe)}else L=="certificatePolicies"&&(ue+=he(this.getExtCertificatePolicies()))}}return ue+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,ue+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,ue},typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1?this.readCertPEM(v):KJUR.lang.String.isHex(v)&&this.readCertHex(v))}X509.EXT_PARSER={},X509.registExtParser=function(v,_){X509.EXT_PARSER[v]=_},X509.hex2dn=function(v,_){_===void 0&&(_=0);var x=new X509;ASN1HEX.getTLV(v,_);var E=x.getX500Name(v);return E.str},X509.hex2rdn=function(v,_){if(_===void 0&&(_=0),v.substr(_,2)!=="31")throw new Error("malformed RDN");for(var x=new Array,E=ASN1HEX.getChildIdx(v,_),A=0;A<E.length;A++)x.push(X509.hex2attrTypeValue(v,E[A]));return x=x.map(function(P){return P.replace("+","\\+")}),x.join("+")},X509.hex2attrTypeValue=function(v,_){var x=ASN1HEX,E=x.getV;if(_===void 0&&(_=0),v.substr(_,2)!=="30")throw new Error("malformed attribute type and value");var A=x.getChildIdx(v,_);A.length!==2||v.substr(A[0],2);var P=E(v,A[0]),T=KJUR.asn1.ASN1Util.oidHexToInt(P),O=KJUR.asn1.x509.OID.oid2atype(T),k=E(v,A[1]),C=hextorstr(k);return O+"="+C},X509.getPublicKeyFromCertHex=function(v){var _=new X509;return _.readCertHex(v),_.getPublicKey()},X509.getPublicKeyFromCertPEM=function(v){var _=new X509;return _.readCertPEM(v),_.getPublicKey()},X509.getPublicKeyInfoPropOfCertPEM=function(v){var _=ASN1HEX,x=_.getVbyList,E={},A,P;return E.algparam=null,A=new X509,A.readCertPEM(v),P=A.getPublicKeyHex(),E.keyhex=x(P,0,[1],"03").substr(2),E.algoid=x(P,0,[0,0],"06"),E.algoid==="2a8648ce3d0201"&&(E.algparam=x(P,0,[0,1],"06")),E},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var X509CRL=function(v){var _=KJUR,x=_.lang.String.isHex,E=ASN1HEX,A=E.getV,P=E.getTLV,T=E.getVbyList,O=E.getTLVbyList,k=E.getTLVbyListEx,C=E.getIdxbyList,U=E.getIdxbyListEx,N=E.getChildIdx,H=new X509;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var D=C(this.hex,0,[0,0]),j=this.hex.substr(D,2);if(j=="02")this.posSigAlg=1;else if(j=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+j);var V=C(this.hex,0,[0,this.posSigAlg+3]),X=this.hex.substr(V,2);if(X=="17"||X=="18"){var re,ee;re=C(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,re!=-1&&(ee=this.hex.substr(re,2),ee=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(X=="30")this.posRevCert=this.posSigAlg+3;else if(X=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+X)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(T(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var D=O(this.hex,0,[0,this.posSigAlg],"30");return H.getAlgorithmIdentifierName(D)},this.getIssuer=function(){return H.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return O(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var D=T(this.hex,0,[0,this.posSigAlg+2]);return result=hextorstr(D)},this.getNextUpdate=function(){var D=C(this.hex,0,[0,this.posSigAlg+3]),j=this.hex.substr(D,2);return j!="17"&&j!="18"?null:hextorstr(A(this.hex,D))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var D=[],j=C(this.hex,0,[0,this.posRevCert]),V=N(this.hex,j),X=0;X<V.length;X++){var re=P(this.hex,V[X]);D.push(this.getRevCert(re))}return D},this.getRevCert=function(D){var j={},V=N(D,0);return j.sn={hex:T(D,0,[0],"02")},j.date=hextorstr(T(D,0,[1])),V.length==3&&(j.ext=H.getExtParamArray(O(D,0,[2]))),j},this.findRevCert=function(D){var j=new X509(D),V=j.getSerialNumberHex();return this.findRevCertBySN(V)},this.findRevCertBySN=function(D){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var j=this.parsed.revcert,V=0;V<j.length;V++)if(D==j[V].sn.hex)return j[V];return null},this.getSignatureValueHex=function(){return T(this.hex,0,[2],"03",!0)},this.verifySignature=function(D){var j=this.getSignatureAlgorithmField(),V=this.getSignatureValueHex(),X=O(this.hex,0,[0],"30"),re=new KJUR.crypto.Signature({alg:j});return re.init(D),re.updateHex(X),re.verify(V)},this.getParam=function(D){var j={},V=this.getVersion();V!=null&&(j.version=V),j.sigalg=this.getSignatureAlgorithmField(),j.issuer=this.getIssuer(),j.thisupdate=this.getThisUpdate();var X=this.getNextUpdate();X!=null&&(j.nextupdate=X);var re=this.getRevCertArray();re!=null&&(j.revcert=re);var ee=U(this.hex,0,[0,"[0]"]);if(ee!=-1){var fe=k(this.hex,0,[0,"[0]",0]);j.ext=H.getExtParamArray(fe)}return j.sighex=this.getSignatureValueHex(),this.parsed=j,typeof D=="object"&&(D.tbshex==!0&&(j.tbshex=O(this.hex,0,[0])),D.nodnarray==!0&&delete j.issuer.array),j},typeof v=="string"&&(x(v)?this.hex=v:v.match(/-----BEGIN X509 CRL/)&&(this.hex=pemtohex(v)),this._setPos())};(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.jws>"u"||!KJUR.jws)&&(KJUR.jws={}),KJUR.jws.JWS=function(){var v=KJUR,_=v.jws.JWS,x=_.isSafeJSONString;this.parseJWS=function(E,A){if(!(this.parsedJWS!==void 0&&(A||this.parsedJWS.sigvalH!==void 0))){var P=E.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(P==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var T=P[1],O=P[2],k=P[3],C=T+"."+O;if(this.parsedJWS={},this.parsedJWS.headB64U=T,this.parsedJWS.payloadB64U=O,this.parsedJWS.sigvalB64U=k,this.parsedJWS.si=C,!A){var U=b64utohex(k),N=parseBigInt(U,16);this.parsedJWS.sigvalH=U,this.parsedJWS.sigvalBI=N}var H=b64utoutf8(T),D=b64utoutf8(O);if(this.parsedJWS.headS=H,this.parsedJWS.payloadS=D,!x(H,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+H}}},KJUR.jws.JWS.sign=function(v,_,x,E,A){var P=KJUR,T=P.jws,O=T.JWS,k=O.readSafeJSONString,C=O.isSafeJSONString,U=P.crypto;U.ECDSA;var N=U.Mac,H=U.Signature,D=JSON,j,V,X;if(typeof _!="string"&&typeof _!="object")throw"spHeader must be JSON string or object: "+_;if(typeof _=="object"&&(V=_,j=D.stringify(V)),typeof _=="string"){if(j=_,!C(j))throw"JWS Head is not safe JSON string: "+j;V=k(j)}if(X=x,typeof x=="object"&&(X=D.stringify(x)),(v==""||v==null)&&V.alg!==void 0&&(v=V.alg),v!=""&&v!=null&&V.alg===void 0&&(V.alg=v,j=D.stringify(V)),v!==V.alg)throw"alg and sHeader.alg doesn't match: "+v+"!="+V.alg;var re=null;if(O.jwsalg2sigalg[v]===void 0)throw"unsupported alg name: "+v;re=O.jwsalg2sigalg[v];var ee=utf8tob64u(j),fe=utf8tob64u(X),le=ee+"."+fe,pe="";if(re.substr(0,4)=="Hmac"){if(E===void 0)throw"mac key shall be specified for HS* alg";var ie=new N({alg:re,prov:"cryptojs",pass:E});ie.updateString(le),pe=ie.doFinal()}else if(re.indexOf("withECDSA")!=-1){var he=new H({alg:re});he.init(E,A),he.updateString(le);var ae=he.sign();pe=KJUR.crypto.ECDSA.asn1SigToConcatSig(ae)}else if(re!="none"){var he=new H({alg:re});he.init(E,A),he.updateString(le),pe=he.sign()}var te=hextob64u(pe);return le+"."+te},KJUR.jws.JWS.verify=function(v,_,x){var E=KJUR,A=E.jws,P=A.JWS,T=P.readSafeJSONString,O=E.crypto,k=O.ECDSA,C=O.Mac,U=O.Signature,N;if(typeof RSAKey!==void 0&&(N=RSAKey),!isBase64URLDot(v))return!1;var H=v.split(".");if(H.length!==3)return!1;var D=H[0],j=H[1],V=D+"."+j,X=b64utohex(H[2]),re=T(b64utoutf8(H[0])),ee=null,fe=null;if(re.alg===void 0)throw"algorithm not specified in header";if(ee=re.alg,fe=ee.substr(0,2),x!=null&&Object.prototype.toString.call(x)==="[object Array]"&&x.length>0){var le=":"+x.join(":")+":";if(le.indexOf(":"+ee+":")==-1)throw"algorithm '"+ee+"' not accepted in the list"}if(ee!="none"&&_===null)throw"key shall be specified to verify.";if(typeof _=="string"&&_.indexOf("-----BEGIN ")!=-1&&(_=KEYUTIL.getKey(_)),(fe=="RS"||fe=="PS")&&!(_ instanceof N))throw"key shall be a RSAKey obj for RS* and PS* algs";if(fe=="ES"&&!(_ instanceof k))throw"key shall be a ECDSA obj for ES* algs";var pe=null;if(P.jwsalg2sigalg[re.alg]===void 0)throw"unsupported alg name: "+ee;if(pe=P.jwsalg2sigalg[ee],pe=="none")throw"not supported";if(pe.substr(0,4)=="Hmac"){var ie=null;if(_===void 0)throw"hexadecimal key shall be specified for HMAC";var he=new C({alg:pe,pass:_});return he.updateString(V),ie=he.doFinal(),X==ie}else if(pe.indexOf("withECDSA")!=-1){var ae=null;try{ae=k.concatSigToASN1Sig(X)}catch{return!1}var te=new U({alg:pe});return te.init(_),te.updateString(V),te.verify(ae)}else{var te=new U({alg:pe});return te.init(_),te.updateString(V),te.verify(X)}},KJUR.jws.JWS.parse=function(v){var _=v.split("."),x={},E,A,P;if(_.length!=2&&_.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return E=_[0],A=_[1],_.length==3&&(P=_[2]),x.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(E)),x.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(A)),x.headerPP=JSON.stringify(x.headerObj,null,"  "),x.payloadObj==null?x.payloadPP=b64utoutf8(A):x.payloadPP=JSON.stringify(x.payloadObj,null,"  "),P!==void 0&&(x.sigHex=b64utohex(P)),x},KJUR.jws.JWS.verifyJWT=function(v,_,x){var E=KJUR,A=E.jws,P=A.JWS,T=P.readSafeJSONString,O=P.inArray,k=P.includedArray;if(!isBase64URLDot(v))return!1;var C=v.split(".");if(C.length!=3)return!1;var U=C[0],N=C[1];b64utohex(C[2]);var H=T(b64utoutf8(U)),D=T(b64utoutf8(N));if(H.alg===void 0)return!1;if(x.alg===void 0)throw"acceptField.alg shall be specified";if(!O(H.alg,x.alg)||D.iss!==void 0&&typeof x.iss=="object"&&!O(D.iss,x.iss)||D.sub!==void 0&&typeof x.sub=="object"&&!O(D.sub,x.sub))return!1;if(D.aud!==void 0&&typeof x.aud=="object"){if(typeof D.aud=="string"){if(!O(D.aud,x.aud))return!1}else if(typeof D.aud=="object"&&!k(D.aud,x.aud))return!1}var j=A.IntDate.getNow();return x.verifyAt!==void 0&&typeof x.verifyAt=="number"&&(j=x.verifyAt),(x.gracePeriod===void 0||typeof x.gracePeriod!="number")&&(x.gracePeriod=0),!(D.exp!==void 0&&typeof D.exp=="number"&&D.exp+x.gracePeriod<j||D.nbf!==void 0&&typeof D.nbf=="number"&&j<D.nbf-x.gracePeriod||D.iat!==void 0&&typeof D.iat=="number"&&j<D.iat-x.gracePeriod||D.jti!==void 0&&x.jti!==void 0&&D.jti!==x.jti||!P.verify(v,_,x.alg))},KJUR.jws.JWS.includedArray=function(v,_){var x=KJUR.jws.JWS.inArray;if(v===null||typeof v!="object"||typeof v.length!="number")return!1;for(var E=0;E<v.length;E++)if(!x(v[E],_))return!1;return!0},KJUR.jws.JWS.inArray=function(v,_){if(_===null||typeof _!="object"||typeof _.length!="number")return!1;for(var x=0;x<_.length;x++)if(_[x]==v)return!0;return!1},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(v,_,x){var E=null;try{return E=jsonParse(v),typeof E!="object"||E.constructor===Array?0:(_&&(_[x]=E),1)}catch{return 0}},KJUR.jws.JWS.readSafeJSONString=function(v){var _=null;try{return _=jsonParse(v),typeof _!="object"||_.constructor===Array?null:_}catch{return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(v){var _=v.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(_==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return _[1]},KJUR.jws.JWS.getJWKthumbprint=function(v){if(v.kty!=="RSA"&&v.kty!=="EC"&&v.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var _="{";if(v.kty==="RSA"){if(typeof v.n!="string"||typeof v.e!="string")throw"wrong n and e value for RSA key";_+='"e":"'+v.e+'",',_+='"kty":"'+v.kty+'",',_+='"n":"'+v.n+'"}'}else if(v.kty==="EC"){if(typeof v.crv!="string"||typeof v.x!="string"||typeof v.y!="string")throw"wrong crv, x and y value for EC key";_+='"crv":"'+v.crv+'",',_+='"kty":"'+v.kty+'",',_+='"x":"'+v.x+'",',_+='"y":"'+v.y+'"}'}else if(v.kty==="oct"){if(typeof v.k!="string")throw"wrong k value for oct(symmetric) key";_+='"kty":"'+v.kty+'",',_+='"k":"'+v.k+'"}'}var x=rstrtohex(_),E=KJUR.crypto.Util.hashHex(x,"sha256"),A=hextob64u(E);return A},KJUR.jws.IntDate={},KJUR.jws.IntDate.get=function(v){var _=KJUR.jws.IntDate,x=_.getNow,E=_.getZulu;if(v=="now")return x();if(v=="now + 1hour")return x()+60*60;if(v=="now + 1day")return x()+60*60*24;if(v=="now + 1month")return x()+60*60*24*30;if(v=="now + 1year")return x()+60*60*24*365;if(v.match(/Z$/))return E(v);if(v.match(/^[0-9]+$/))return parseInt(v);throw"unsupported format: "+v},KJUR.jws.IntDate.getZulu=function(v){return zulutosec(v)},KJUR.jws.IntDate.getNow=function(){var v=~~(new Date/1e3);return v},KJUR.jws.IntDate.intDate2UTCString=function(v){var _=new Date(v*1e3);return _.toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(v){var _=new Date(v*1e3),x=("0000"+_.getUTCFullYear()).slice(-4),E=("00"+(_.getUTCMonth()+1)).slice(-2),A=("00"+_.getUTCDate()).slice(-2),P=("00"+_.getUTCHours()).slice(-2),T=("00"+_.getUTCMinutes()).slice(-2),O=("00"+_.getUTCSeconds()).slice(-2);return x+E+A+P+T+O+"Z"},(typeof KJUR>"u"||!KJUR)&&(KJUR={}),(typeof KJUR.jws>"u"||!KJUR.jws)&&(KJUR.jws={}),KJUR.jws.JWSJS=function(){var v=KJUR,_=v.jws,x=_.JWS,E=x.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(A){this.init();var P=A.split(".");if(P.length!=3)throw"malformed input JWS";this.aHeader.push(P[0]),this.sPayload=P[1],this.aSignature.push(P[2])},this.addSignature=function(A,P,T,O){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var k=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var C=KJUR.jws.JWS.sign(A,P,this.sPayload,T,O),U=C.split("."),N=U[0],H=U[2];this.aHeader.push(U[0]),this.aSignature.push(U[2])}catch(D){throw this.aHeader.length>k&&this.aHeader.pop(),this.aSignature.length>k&&this.aSignature.pop(),"addSignature failed: "+D}},this.verifyAll=function(A){if(this.aHeader.length!==A.length||this.aSignature.length!==A.length)return!1;for(var P=0;P<A.length;P++){var T=A[P];if(T.length!==2)return!1;var O=this.verifyNth(P,T[0],T[1]);if(O===!1)return!1}return!0},this.verifyNth=function(A,P,T){if(this.aHeader.length<=A||this.aSignature.length<=A)return!1;var O=this.aHeader[A],k=this.aSignature[A],C=O+"."+this.sPayload+"."+k,U=!1;try{U=x.verify(C,P,T)}catch{return!1}return U},this.readJWSJS=function(A){if(typeof A=="string"){var P=E(A);if(P==null)throw"argument is not safe JSON object string";this.aHeader=P.headers,this.sPayload=P.payload,this.aSignature=P.signatures}else try{if(A.headers.length>0)this.aHeader=A.headers;else throw"malformed header";if(typeof A.payload=="string")this.sPayload=A.payload;else throw"malformed signatures";if(A.signatures.length>0)this.aSignature=A.signatures;else throw"malformed signatures"}catch(T){throw"malformed JWS-JS JSON object: "+T}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}},jsrsasign$1.SecureRandom=SecureRandom,jsrsasign$1.rng_seed_time=rng_seed_time,jsrsasign$1.BigInteger=BigInteger$2,jsrsasign$1.RSAKey=RSAKey,jsrsasign$1.ECDSA=KJUR.crypto.ECDSA,jsrsasign$1.DSA=KJUR.crypto.DSA,jsrsasign$1.Signature=KJUR.crypto.Signature,jsrsasign$1.MessageDigest=KJUR.crypto.MessageDigest,jsrsasign$1.Mac=KJUR.crypto.Mac,jsrsasign$1.Cipher=KJUR.crypto.Cipher,jsrsasign$1.KEYUTIL=KEYUTIL,jsrsasign$1.ASN1HEX=ASN1HEX,jsrsasign$1.X509=X509,jsrsasign$1.X509CRL=X509CRL,jsrsasign$1.CryptoJS=CryptoJS,jsrsasign$1.b64tohex=b64tohex,jsrsasign$1.b64toBA=b64toBA,jsrsasign$1.ECFieldElementFp=ECFieldElementFp,jsrsasign$1.ECPointFp=ECPointFp,jsrsasign$1.ECCurveFp=ECCurveFp,jsrsasign$1.stoBA=stoBA,jsrsasign$1.BAtos=BAtos,jsrsasign$1.BAtohex=BAtohex,jsrsasign$1.stohex=stohex,jsrsasign$1.stob64=stob64,jsrsasign$1.stob64u=stob64u,jsrsasign$1.b64utos=b64utos,jsrsasign$1.b64tob64u=b64tob64u,jsrsasign$1.b64utob64=b64utob64,jsrsasign$1.hex2b64=hex2b64,jsrsasign$1.hextob64u=hextob64u,jsrsasign$1.b64utohex=b64utohex,jsrsasign$1.utf8tob64u=utf8tob64u,jsrsasign$1.b64utoutf8=b64utoutf8,jsrsasign$1.utf8tob64=utf8tob64,jsrsasign$1.b64toutf8=b64toutf8,jsrsasign$1.utf8tohex=utf8tohex,jsrsasign$1.hextoutf8=hextoutf8,jsrsasign$1.hextorstr=hextorstr,jsrsasign$1.rstrtohex=rstrtohex,jsrsasign$1.hextob64=hextob64,jsrsasign$1.hextob64nl=hextob64nl,jsrsasign$1.b64nltohex=b64nltohex,jsrsasign$1.hextopem=hextopem,jsrsasign$1.pemtohex=pemtohex,jsrsasign$1.hextoArrayBuffer=hextoArrayBuffer,jsrsasign$1.ArrayBuffertohex=ArrayBuffertohex,jsrsasign$1.zulutomsec=zulutomsec,jsrsasign$1.msectozulu=msectozulu,jsrsasign$1.zulutosec=zulutosec,jsrsasign$1.zulutodate=zulutodate,jsrsasign$1.datetozulu=datetozulu,jsrsasign$1.uricmptohex=uricmptohex,jsrsasign$1.hextouricmp=hextouricmp,jsrsasign$1.ipv6tohex=ipv6tohex,jsrsasign$1.hextoipv6=hextoipv6,jsrsasign$1.hextoip=hextoip,jsrsasign$1.iptohex=iptohex,jsrsasign$1.ucs2hextoutf8=ucs2hextoutf8,jsrsasign$1.encodeURIComponentAll=encodeURIComponentAll,jsrsasign$1.newline_toUnix=newline_toUnix,jsrsasign$1.newline_toDos=newline_toDos,jsrsasign$1.hextoposhex=hextoposhex,jsrsasign$1.intarystrtohex=intarystrtohex,jsrsasign$1.strdiffidx=strdiffidx,jsrsasign$1.oidtohex=oidtohex,jsrsasign$1.hextooid=hextooid,jsrsasign$1.strpad=strpad,jsrsasign$1.bitstrtoint=bitstrtoint,jsrsasign$1.inttobitstr=inttobitstr,jsrsasign$1.bitstrtobinstr=bitstrtobinstr,jsrsasign$1.binstrtobitstr=binstrtobitstr,jsrsasign$1.isBase64URLDot=isBase64URLDot,jsrsasign$1.namearraytobinstr=namearraytobinstr,jsrsasign$1.extendClass=extendClass,jsrsasign$1.foldnl=foldnl,jsrsasign$1.b64topem=b64topem,jsrsasign$1.pemtob64=pemtob64,jsrsasign$1.timeogen=timetogen,jsrsasign$1.aryval=aryval,jsrsasign$1.KJUR=KJUR,jsrsasign$1.crypto=KJUR.crypto,jsrsasign$1.asn1=KJUR.asn1,jsrsasign$1.jws=KJUR.jws,jsrsasign$1.lang=KJUR.lang,jsrsasign$1.VERSION=VERSION$1,jsrsasign$1.VERSION_FULL=VERSION_FULL;var __createBinding$q=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$q=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$q=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$q(_,v,x);return __setModuleDefault$q(_,v),_};Object.defineProperty(rsa,"__esModule",{value:!0}),rsa.wrapPEM=rsa.unwrapPEM=rsa.covertPublicKeyFromPkcs8ToPkcs1=rsa.covertPublicKeyFromPkcs8ToPkix=rsa.genKeyPair=rsa.decodeAny=rsa.encodeAny=rsa.decode=rsa.encode=void 0;const jsrsasign=__importStar$q(jsrsasign$1);var BigInteger$1=jsrsasign.BigInteger;const hex_1=hex,base64_1=base64$2;function encode$H(v,_){let x=jsrsasign.KJUR.crypto.Cipher.encrypt(v,_,"RSA");return(0,hex_1.fromHex)(x)}rsa.encode=encode$H;function decode$D(v,_){return jsrsasign.KJUR.crypto.Cipher.decrypt(v,_,"RSA")}rsa.decode=decode$D;function encodeAny(v,_){const x=loadRsaKeyFromPkcs1(_),E=Math.floor((x.n.bitLength()+7)/8),A=v.length;let P=0;const T=E-11,O=[];for(;;){if(P+T>=A){const C=encode$H(v.slice(P),x);O.push(C);break}const k=encode$H(v.slice(P,P+T),x);O.push(k),P+=T}return jsrsasign.hextob64((0,hex_1.toHex)(dist$4.Buffer.concat(O)))}rsa.encodeAny=encodeAny;function decodeAny(v,_){const x=jsrsasign.RSAKey.getHexValueArrayOfChildrenFromHex(jsrsasign.b64tohex(_)),E=new jsrsasign.RSAKey;E.setPrivateEx(x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8]);const A=Math.floor((E.n.bitLength()+7)/8),P=(0,base64_1.fromBase64)(v),T=P.length;let O=0;const k=[];for(;;){if(O+A>=T){const U=decode$D((0,hex_1.toHex)(P.slice(O)),E);k.push(U);break}const C=decode$D((0,hex_1.toHex)(P.slice(O,O+A)),E);k.push(C),O+=A}return k.join("")}rsa.decodeAny=decodeAny;function genKeyPair(v){let _=jsrsasign.KEYUTIL.generateKeypair("RSA",v),x=jsrsasign.KEYUTIL.getPEM(_.prvKeyObj,"PKCS1PRV"),E=jsrsasign.KEYUTIL.getPEM(_.pubKeyObj);const A=covertPublicKeyFromPkcs8ToPkcs1(unwrapPEM(E,!0));return{privateKey:unwrapPEM(x,!1),publicKey:A}}rsa.genKeyPair=genKeyPair;function covertPublicKeyFromPkcs8ToPkix(v){let _=jsrsasign.KEYUTIL.getKey(wrapPEM(v,!0));const x=new jsrsasign.KJUR.asn1.DERSequence({array:[new jsrsasign.KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new jsrsasign.KJUR.asn1.DERNull]}),E=new jsrsasign.KJUR.asn1.DERSequence({array:[new jsrsasign.KJUR.asn1.DERInteger({bigint:_.n}),new jsrsasign.KJUR.asn1.DERInteger({int:_.e})]}),A=new jsrsasign.KJUR.asn1.DERBitString({hex:"00"+E.getEncodedHex()}),P=new jsrsasign.KJUR.asn1.DERSequence({array:[x,A]});return jsrsasign.hextob64(P.getEncodedHex())}rsa.covertPublicKeyFromPkcs8ToPkix=covertPublicKeyFromPkcs8ToPkix;function covertPublicKeyFromPkcs8ToPkcs1(v){let _=jsrsasign.KEYUTIL.getKey(wrapPEM(v,!0));const x=new jsrsasign.KJUR.asn1.DERSequence({array:[new jsrsasign.KJUR.asn1.DERInteger({bigint:_.n}),new jsrsasign.KJUR.asn1.DERInteger({int:_.e})]});return jsrsasign.hextob64(x.getEncodedHex())}rsa.covertPublicKeyFromPkcs8ToPkcs1=covertPublicKeyFromPkcs8ToPkcs1;function loadRsaKeyFromPkcs1(v){const _=jsrsasign.b64tohex(v);if(!jsrsasign.ASN1HEX.isASN1HEX(_))throw new Error("keyHex is not ASN.1 hex string");let x=jsrsasign.ASN1HEX.getChildIdx(_,0);const E=new jsrsasign.RSAKey,A=jsrsasign.ASN1HEX.getV(_,x[0]);E.n=new BigInteger$1(A,16);const P=jsrsasign.ASN1HEX.getV(_,x[1]);return E.e=parseInt(P,16),E.isPublic=!0,E.isPrivate=!1,E}function unwrapPEM(v,_){const x=_?"PUBLIC KEY":"RSA PRIVATE KEY";return jsrsasign.hextob64(jsrsasign.pemtohex(v,x))}rsa.unwrapPEM=unwrapPEM;function wrapPEM(v,_){const x=_?"PUBLIC KEY":"RSA PRIVATE KEY";return jsrsasign.hextopem(jsrsasign.b64tohex(v),x)}rsa.wrapPEM=wrapPEM;var blake2s$1={};(function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(N,H,D,j){j===void 0&&(j=D),Object.defineProperty(N,j,{enumerable:!0,get:function(){return H[D]}})}:function(N,H,D,j){j===void 0&&(j=D),N[j]=H[D]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(N,H){Object.defineProperty(N,"default",{enumerable:!0,value:H})}:function(N,H){N.default=H}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(N){if(N&&N.__esModule)return N;var H={};if(N!=null)for(var D in N)D!=="default"&&Object.prototype.hasOwnProperty.call(N,D)&&_(H,N,D);return x(H,N),H};Object.defineProperty(v,"__esModule",{value:!0}),v.blake2s=v.compress=v.IV=void 0;const A=E(_u64),P=E(_blake2),T=utilsExports;v.IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);function O(N,H,D,j,V){return N=N+H+V|0,j=(0,T.rotr)(j^N,16),D=D+j|0,H=(0,T.rotr)(H^D,12),{a:N,b:H,c:D,d:j}}function k(N,H,D,j,V){return N=N+H+V|0,j=(0,T.rotr)(j^N,8),D=D+j|0,H=(0,T.rotr)(H^D,7),{a:N,b:H,c:D,d:j}}function C(N,H,D,j,V,X,re,ee,fe,le,pe,ie,he,ae,te,ue,ne,J,q,F){let L=0;for(let Z=0;Z<j;Z++)({a:V,b:fe,c:he,d:ne}=O(V,fe,he,ne,D[H+N[L++]])),{a:V,b:fe,c:he,d:ne}=k(V,fe,he,ne,D[H+N[L++]]),{a:X,b:le,c:ae,d:J}=O(X,le,ae,J,D[H+N[L++]]),{a:X,b:le,c:ae,d:J}=k(X,le,ae,J,D[H+N[L++]]),{a:re,b:pe,c:te,d:q}=O(re,pe,te,q,D[H+N[L++]]),{a:re,b:pe,c:te,d:q}=k(re,pe,te,q,D[H+N[L++]]),{a:ee,b:ie,c:ue,d:F}=O(ee,ie,ue,F,D[H+N[L++]]),{a:ee,b:ie,c:ue,d:F}=k(ee,ie,ue,F,D[H+N[L++]]),{a:V,b:le,c:te,d:F}=O(V,le,te,F,D[H+N[L++]]),{a:V,b:le,c:te,d:F}=k(V,le,te,F,D[H+N[L++]]),{a:X,b:pe,c:ue,d:ne}=O(X,pe,ue,ne,D[H+N[L++]]),{a:X,b:pe,c:ue,d:ne}=k(X,pe,ue,ne,D[H+N[L++]]),{a:re,b:ie,c:he,d:J}=O(re,ie,he,J,D[H+N[L++]]),{a:re,b:ie,c:he,d:J}=k(re,ie,he,J,D[H+N[L++]]),{a:ee,b:fe,c:ae,d:q}=O(ee,fe,ae,q,D[H+N[L++]]),{a:ee,b:fe,c:ae,d:q}=k(ee,fe,ae,q,D[H+N[L++]]);return{v0:V,v1:X,v2:re,v3:ee,v4:fe,v5:le,v6:pe,v7:ie,v8:he,v9:ae,v10:te,v11:ue,v12:ne,v13:J,v14:q,v15:F}}v.compress=C;class U extends P.BLAKE2{constructor(H={}){super(64,H.dkLen===void 0?32:H.dkLen,H,32,8,8),this.v0=v.IV[0]|0,this.v1=v.IV[1]|0,this.v2=v.IV[2]|0,this.v3=v.IV[3]|0,this.v4=v.IV[4]|0,this.v5=v.IV[5]|0,this.v6=v.IV[6]|0,this.v7=v.IV[7]|0;const D=H.key?H.key.length:0;if(this.v0^=this.outputLen|D<<8|65536|1<<24,H.salt){const j=(0,T.u32)((0,T.toBytes)(H.salt));this.v4^=j[0],this.v5^=j[1]}if(H.personalization){const j=(0,T.u32)((0,T.toBytes)(H.personalization));this.v6^=j[0],this.v7^=j[1]}if(H.key){const j=new Uint8Array(this.blockLen);j.set((0,T.toBytes)(H.key)),this.update(j)}}get(){const{v0:H,v1:D,v2:j,v3:V,v4:X,v5:re,v6:ee,v7:fe}=this;return[H,D,j,V,X,re,ee,fe]}set(H,D,j,V,X,re,ee,fe){this.v0=H|0,this.v1=D|0,this.v2=j|0,this.v3=V|0,this.v4=X|0,this.v5=re|0,this.v6=ee|0,this.v7=fe|0}compress(H,D,j){const{h:V,l:X}=A.fromBig(BigInt(this.length)),{v0:re,v1:ee,v2:fe,v3:le,v4:pe,v5:ie,v6:he,v7:ae,v8:te,v9:ue,v10:ne,v11:J,v12:q,v13:F,v14:L,v15:Z}=C(P.SIGMA,D,H,10,this.v0,this.v1,this.v2,this.v3,this.v4,this.v5,this.v6,this.v7,v.IV[0],v.IV[1],v.IV[2],v.IV[3],X^v.IV[4],V^v.IV[5],j?~v.IV[6]:v.IV[6],v.IV[7]);this.v0^=re^te,this.v1^=ee^ue,this.v2^=fe^ne,this.v3^=le^J,this.v4^=pe^q,this.v5^=ie^F,this.v6^=he^L,this.v7^=ae^Z}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0)}}v.blake2s=(0,T.wrapConstructorWithOpts)(N=>new U(N))})(blake2s$1);var pbkdf2$2={};Object.defineProperty(pbkdf2$2,"__esModule",{value:!0}),pbkdf2$2.pbkdf2Async=pbkdf2$2.pbkdf2=void 0;const hmac_js_1=hmac$2,utils_js_1$6=utilsExports;function pbkdf2Init(v,_,x,E){(0,utils_js_1$6.assertHash)(v);const A=(0,utils_js_1$6.checkOpts)({dkLen:32,asyncTick:10},E),{c:P,dkLen:T,asyncTick:O}=A;if((0,utils_js_1$6.assertNumber)(P),(0,utils_js_1$6.assertNumber)(T),(0,utils_js_1$6.assertNumber)(O),P<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const k=(0,utils_js_1$6.toBytes)(_),C=(0,utils_js_1$6.toBytes)(x),U=new Uint8Array(T),N=hmac_js_1.hmac.create(v,k),H=N._cloneInto().update(C);return{c:P,dkLen:T,asyncTick:O,DK:U,PRF:N,PRFSalt:H}}function pbkdf2Output(v,_,x,E,A){return v.destroy(),_.destroy(),E&&E.destroy(),A.fill(0),x}function pbkdf2$1(v,_,x,E){const{c:A,dkLen:P,DK:T,PRF:O,PRFSalt:k}=pbkdf2Init(v,_,x,E);let C;const U=new Uint8Array(4),N=(0,utils_js_1$6.createView)(U),H=new Uint8Array(O.outputLen);for(let D=1,j=0;j<P;D++,j+=O.outputLen){const V=T.subarray(j,j+O.outputLen);N.setInt32(0,D,!1),(C=k._cloneInto(C)).update(U).digestInto(H),V.set(H.subarray(0,V.length));for(let X=1;X<A;X++){O._cloneInto(C).update(H).digestInto(H);for(let re=0;re<V.length;re++)V[re]^=H[re]}}return pbkdf2Output(O,k,T,C,H)}pbkdf2$2.pbkdf2=pbkdf2$1;async function pbkdf2Async(v,_,x,E){const{c:A,dkLen:P,asyncTick:T,DK:O,PRF:k,PRFSalt:C}=pbkdf2Init(v,_,x,E);let U;const N=new Uint8Array(4),H=(0,utils_js_1$6.createView)(N),D=new Uint8Array(k.outputLen);for(let j=1,V=0;V<P;j++,V+=k.outputLen){const X=O.subarray(V,V+k.outputLen);H.setInt32(0,j,!1),(U=C._cloneInto(U)).update(N).digestInto(D),X.set(D.subarray(0,X.length)),await(0,utils_js_1$6.asyncLoop)(A-1,T,re=>{k._cloneInto(U).update(D).digestInto(D);for(let ee=0;ee<X.length;ee++)X[ee]^=D[ee]})}return pbkdf2Output(k,C,O,U,D)}pbkdf2$2.pbkdf2Async=pbkdf2Async;var scrypt$1={};Object.defineProperty(scrypt$1,"__esModule",{value:!0}),scrypt$1.scryptAsync=scrypt$1.scrypt=void 0;const sha256_js_1=sha256$6,pbkdf2_js_1=pbkdf2$2,utils_js_1$5=utilsExports,rotl$2=(v,_)=>v<<_|v>>>32-_;function XorAndSalsa(v,_,x,E,A,P){let T=v[_++]^x[E++],O=v[_++]^x[E++],k=v[_++]^x[E++],C=v[_++]^x[E++],U=v[_++]^x[E++],N=v[_++]^x[E++],H=v[_++]^x[E++],D=v[_++]^x[E++],j=v[_++]^x[E++],V=v[_++]^x[E++],X=v[_++]^x[E++],re=v[_++]^x[E++],ee=v[_++]^x[E++],fe=v[_++]^x[E++],le=v[_++]^x[E++],pe=v[_++]^x[E++],ie=T,he=O,ae=k,te=C,ue=U,ne=N,J=H,q=D,F=j,L=V,Z=X,Q=re,de=ee,ye=fe,oe=le,se=pe;for(let Y=0;Y<8;Y+=2)ue^=rotl$2(ie+de|0,7),F^=rotl$2(ue+ie|0,9),de^=rotl$2(F+ue|0,13),ie^=rotl$2(de+F|0,18),L^=rotl$2(ne+he|0,7),ye^=rotl$2(L+ne|0,9),he^=rotl$2(ye+L|0,13),ne^=rotl$2(he+ye|0,18),oe^=rotl$2(Z+J|0,7),ae^=rotl$2(oe+Z|0,9),J^=rotl$2(ae+oe|0,13),Z^=rotl$2(J+ae|0,18),te^=rotl$2(se+Q|0,7),q^=rotl$2(te+se|0,9),Q^=rotl$2(q+te|0,13),se^=rotl$2(Q+q|0,18),he^=rotl$2(ie+te|0,7),ae^=rotl$2(he+ie|0,9),te^=rotl$2(ae+he|0,13),ie^=rotl$2(te+ae|0,18),J^=rotl$2(ne+ue|0,7),q^=rotl$2(J+ne|0,9),ue^=rotl$2(q+J|0,13),ne^=rotl$2(ue+q|0,18),Q^=rotl$2(Z+L|0,7),F^=rotl$2(Q+Z|0,9),L^=rotl$2(F+Q|0,13),Z^=rotl$2(L+F|0,18),de^=rotl$2(se+oe|0,7),ye^=rotl$2(de+se|0,9),oe^=rotl$2(ye+de|0,13),se^=rotl$2(oe+ye|0,18);A[P++]=T+ie|0,A[P++]=O+he|0,A[P++]=k+ae|0,A[P++]=C+te|0,A[P++]=U+ue|0,A[P++]=N+ne|0,A[P++]=H+J|0,A[P++]=D+q|0,A[P++]=j+F|0,A[P++]=V+L|0,A[P++]=X+Z|0,A[P++]=re+Q|0,A[P++]=ee+de|0,A[P++]=fe+ye|0,A[P++]=le+oe|0,A[P++]=pe+se|0}function BlockMix(v,_,x,E,A){let P=E+0,T=E+16*A;for(let O=0;O<16;O++)x[T+O]=v[_+(2*A-1)*16+O];for(let O=0;O<A;O++,P+=16,_+=16)XorAndSalsa(x,T,v,_,x,P),O>0&&(T+=16),XorAndSalsa(x,P,v,_+=16,x,T)}function scryptInit(v,_,x){const E=(0,utils_js_1$5.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},x),{N:A,r:P,p:T,dkLen:O,asyncTick:k,maxmem:C,onProgress:U}=E;if((0,utils_js_1$5.assertNumber)(A),(0,utils_js_1$5.assertNumber)(P),(0,utils_js_1$5.assertNumber)(T),(0,utils_js_1$5.assertNumber)(O),(0,utils_js_1$5.assertNumber)(k),(0,utils_js_1$5.assertNumber)(C),U!==void 0&&typeof U!="function")throw new Error("progressCb should be function");const N=128*P,H=N/4;if(A<=1||A&A-1||A>=2**(N/8)||A>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(T<0||T>(2**32-1)*32/N)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(O<0||O>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const D=N*(A+T);if(D>C)throw new Error(`Scrypt: parameters too large, ${D} (128 * r * (N + p)) > ${C} (maxmem)`);const j=(0,pbkdf2_js_1.pbkdf2)(sha256_js_1.sha256,v,_,{c:1,dkLen:N*T}),V=(0,utils_js_1$5.u32)(j),X=(0,utils_js_1$5.u32)(new Uint8Array(N*A)),re=(0,utils_js_1$5.u32)(new Uint8Array(N));let ee=()=>{};if(U){const fe=2*A*T,le=Math.max(Math.floor(fe/1e4),1);let pe=0;ee=()=>{pe++,U&&(!(pe%le)||pe===fe)&&U(pe/fe)}}return{N:A,r:P,p:T,dkLen:O,blockSize32:H,V:X,B32:V,B:j,tmp:re,blockMixCb:ee,asyncTick:k}}function scryptOutput(v,_,x,E,A){const P=(0,pbkdf2_js_1.pbkdf2)(sha256_js_1.sha256,v,x,{c:1,dkLen:_});return x.fill(0),E.fill(0),A.fill(0),P}function scrypt(v,_,x){const{N:E,r:A,p:P,dkLen:T,blockSize32:O,V:k,B32:C,B:U,tmp:N,blockMixCb:H}=scryptInit(v,_,x);for(let D=0;D<P;D++){const j=O*D;for(let V=0;V<O;V++)k[V]=C[j+V];for(let V=0,X=0;V<E-1;V++)BlockMix(k,X,k,X+=O,A),H();BlockMix(k,(E-1)*O,C,j,A),H();for(let V=0;V<E;V++){const X=C[j+O-16]%E;for(let re=0;re<O;re++)N[re]=C[j+re]^k[X*O+re];BlockMix(N,0,C,j,A),H()}}return scryptOutput(v,T,U,k,N)}scrypt$1.scrypt=scrypt;async function scryptAsync(v,_,x){const{N:E,r:A,p:P,dkLen:T,blockSize32:O,V:k,B32:C,B:U,tmp:N,blockMixCb:H,asyncTick:D}=scryptInit(v,_,x);for(let j=0;j<P;j++){const V=O*j;for(let re=0;re<O;re++)k[re]=C[V+re];let X=0;await(0,utils_js_1$5.asyncLoop)(E-1,D,re=>{BlockMix(k,X,k,X+=O,A),H()}),BlockMix(k,(E-1)*O,C,V,A),H(),await(0,utils_js_1$5.asyncLoop)(E,D,re=>{const ee=C[V+O-16]%E;for(let fe=0;fe<O;fe++)N[fe]=C[V+fe]^k[ee*O+fe];BlockMix(N,0,C,V,A),H()})}return scryptOutput(v,T,U,k,N)}scrypt$1.scryptAsync=scryptAsync;var blake3={},__createBinding$p=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x),Object.defineProperty(v,E,{enumerable:!0,get:function(){return _[x]}})}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$p=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$p=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$p(_,v,x);return __setModuleDefault$p(_,v),_};Object.defineProperty(blake3,"__esModule",{value:!0}),blake3.blake3=void 0;const u64=__importStar$p(_u64),blake2=__importStar$p(_blake2),blake2s=__importStar$p(blake2s$1),utils_js_1$4=utilsExports;var Flags;(function(v){v[v.CHUNK_START=1]="CHUNK_START",v[v.CHUNK_END=2]="CHUNK_END",v[v.PARENT=4]="PARENT",v[v.ROOT=8]="ROOT",v[v.KEYED_HASH=16]="KEYED_HASH",v[v.DERIVE_KEY_CONTEXT=32]="DERIVE_KEY_CONTEXT",v[v.DERIVE_KEY_MATERIAL=64]="DERIVE_KEY_MATERIAL"})(Flags||(Flags={}));const SIGMA=(()=>{const v=Array.from({length:16},(E,A)=>A),_=E=>[2,6,3,10,7,0,4,13,1,11,12,5,9,14,15,8].map(A=>E[A]),x=[];for(let E=0,A=v;E<7;E++,A=_(A))x.push(...A);return Uint8Array.from(x)})();class BLAKE3 extends blake2.BLAKE2{constructor(_={},x=0){if(super(64,_.dkLen===void 0?32:_.dkLen,{},Number.MAX_SAFE_INTEGER,0,0),this.flags=0,this.chunkPos=0,this.chunksDone=0,this.stack=[],this.posOut=0,this.bufferOut32=new Uint32Array(16),this.chunkOut=0,this.enableXOF=!0,this.outputLen=_.dkLen===void 0?32:_.dkLen,(0,utils_js_1$4.assertNumber)(this.outputLen),_.key!==void 0&&_.context!==void 0)throw new Error("Blake3: only key or context can be specified at same time");if(_.key!==void 0){const E=(0,utils_js_1$4.toBytes)(_.key);if(E.length!==32)throw new Error("Blake3: key should be 32 byte");this.IV=(0,utils_js_1$4.u32)(E),this.flags=x|Flags.KEYED_HASH}else if(_.context!==void 0){const E=new BLAKE3({dkLen:32},Flags.DERIVE_KEY_CONTEXT).update(_.context).digest();this.IV=(0,utils_js_1$4.u32)(E),this.flags=x|Flags.DERIVE_KEY_MATERIAL}else this.IV=blake2s.IV.slice(),this.flags=x;this.state=this.IV.slice(),this.bufferOut=(0,utils_js_1$4.u8)(this.bufferOut32)}get(){return[]}set(){}b2Compress(_,x,E,A=0){const{state:P,pos:T}=this,{h:O,l:k}=u64.fromBig(BigInt(_),!0),{v0:C,v1:U,v2:N,v3:H,v4:D,v5:j,v6:V,v7:X,v8:re,v9:ee,v10:fe,v11:le,v12:pe,v13:ie,v14:he,v15:ae}=blake2s.compress(SIGMA,A,E,7,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],blake2s.IV[0],blake2s.IV[1],blake2s.IV[2],blake2s.IV[3],O,k,T,x);P[0]=C^re,P[1]=U^ee,P[2]=N^fe,P[3]=H^le,P[4]=D^pe,P[5]=j^ie,P[6]=V^he,P[7]=X^ae}compress(_,x=0,E=!1){let A=this.flags;if(this.chunkPos||(A|=Flags.CHUNK_START),(this.chunkPos===15||E)&&(A|=Flags.CHUNK_END),E||(this.pos=this.blockLen),this.b2Compress(this.chunksDone,A,_,x),this.chunkPos+=1,this.chunkPos===16||E){let P=this.state;this.state=this.IV.slice();for(let T,O=this.chunksDone+1;(E||!(O&1))&&(T=this.stack.pop());O>>=1)this.buffer32.set(T,0),this.buffer32.set(P,8),this.pos=this.blockLen,this.b2Compress(0,this.flags|Flags.PARENT,this.buffer32,0),P=this.state,this.state=this.IV.slice();this.chunksDone++,this.chunkPos=0,this.stack.push(P)}this.pos=0}_cloneInto(_){_=super._cloneInto(_);const{IV:x,flags:E,state:A,chunkPos:P,posOut:T,chunkOut:O,stack:k,chunksDone:C}=this;return _.state.set(A.slice()),_.stack=k.map(U=>Uint32Array.from(U)),_.IV.set(x),_.flags=E,_.chunkPos=P,_.chunksDone=C,_.posOut=T,_.chunkOut=O,_.enableXOF=this.enableXOF,_.bufferOut32.set(this.bufferOut32),_}destroy(){this.destroyed=!0,this.state.fill(0),this.buffer32.fill(0),this.IV.fill(0),this.bufferOut32.fill(0);for(let _ of this.stack)_.fill(0)}b2CompressOut(){const{state:_,pos:x,flags:E,buffer32:A,bufferOut32:P}=this,{h:T,l:O}=u64.fromBig(BigInt(this.chunkOut++)),{v0:k,v1:C,v2:U,v3:N,v4:H,v5:D,v6:j,v7:V,v8:X,v9:re,v10:ee,v11:fe,v12:le,v13:pe,v14:ie,v15:he}=blake2s.compress(SIGMA,0,A,7,_[0],_[1],_[2],_[3],_[4],_[5],_[6],_[7],blake2s.IV[0],blake2s.IV[1],blake2s.IV[2],blake2s.IV[3],O,T,x,E);P[0]=k^X,P[1]=C^re,P[2]=U^ee,P[3]=N^fe,P[4]=H^le,P[5]=D^pe,P[6]=j^ie,P[7]=V^he,P[8]=_[0]^X,P[9]=_[1]^re,P[10]=_[2]^ee,P[11]=_[3]^fe,P[12]=_[4]^le,P[13]=_[5]^pe,P[14]=_[6]^ie,P[15]=_[7]^he,this.posOut=0}finish(){if(this.finished)return;this.finished=!0,this.buffer.fill(0,this.pos);let _=this.flags|Flags.ROOT;this.stack.length?(_|=Flags.PARENT,this.compress(this.buffer32,0,!0),this.chunksDone=0,this.pos=this.blockLen):_|=(this.chunkPos?0:Flags.CHUNK_START)|Flags.CHUNK_END,this.flags=_,this.b2CompressOut()}writeInto(_){if(this.destroyed)throw new Error("instance is destroyed");if(!(_ instanceof Uint8Array))throw new Error("Blake3: Invalid output buffer");this.finish();const{blockLen:x,bufferOut:E}=this;for(let A=0,P=_.length;A<P;){this.posOut>=x&&this.b2CompressOut();const T=Math.min(this.blockLen-this.posOut,P-A);_.set(E.subarray(this.posOut,this.posOut+T),A),this.posOut+=T,A+=T}return _}xofInto(_){if(!this.enableXOF)throw new Error("XOF impossible after digest call");return this.writeInto(_)}xof(_){return(0,utils_js_1$4.assertNumber)(_),this.xofInto(new Uint8Array(_))}digestInto(_){if(_.length<this.outputLen)throw new Error("Blake3: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");return this.enableXOF=!1,this.writeInto(_),this.destroy(),_}digest(){return this.digestInto(new Uint8Array(this.outputLen))}}blake3.blake3=(0,utils_js_1$4.wrapConstructorWithOpts)(v=>new BLAKE3(v));var browser$a={exports:{}},MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$2(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$v=safeBufferExports.Buffer,crypto$6=commonjsGlobal.crypto||commonjsGlobal.msCrypto;crypto$6&&crypto$6.getRandomValues?browser$a.exports=randomBytes$4:browser$a.exports=oldBrowser$2;function randomBytes$4(v,_){if(v>MAX_UINT32)throw new RangeError("requested too many random bytes");var x=Buffer$v.allocUnsafe(v);if(v>0)if(v>MAX_BYTES)for(var E=0;E<v;E+=MAX_BYTES)crypto$6.getRandomValues(x.slice(E,E+MAX_BYTES));else crypto$6.getRandomValues(x);return typeof _=="function"?dist$4.process.nextTick(function(){_(null,x)}):x}var browserExports$1=browser$a.exports,hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(U,N,H,D){D===void 0&&(D=H);var j=Object.getOwnPropertyDescriptor(N,H);(!j||("get"in j?!N.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return N[H]}}),Object.defineProperty(U,D,j)}:function(U,N,H,D){D===void 0&&(D=H),U[D]=N[H]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(U,N){Object.defineProperty(U,"default",{enumerable:!0,value:N})}:function(U,N){U.default=N}),E=commonjsGlobal&&commonjsGlobal.__exportStar||function(U,N){for(var H in U)H!=="default"&&!Object.prototype.hasOwnProperty.call(N,H)&&_(N,U,H)},A=commonjsGlobal&&commonjsGlobal.__importStar||function(U){if(U&&U.__esModule)return U;var N={};if(U!=null)for(var H in U)H!=="default"&&Object.prototype.hasOwnProperty.call(U,H)&&_(N,U,H);return x(N,U),N};Object.defineProperty(v,"__esModule",{value:!0}),v.randomBytes=v.concatBytes=v.reverseBuffer=v.rsa=v.aes=v.md5=v.rlp=void 0,E(base58$2,v),E(base58Check,v),E(bech32,v),E(hex,v),E(base64$2,v),E(hash$6,v),E(hmac$3,v),E(utf8$3,v),E(requireBignumberPlus(),v),E(precondtion,v),v.rlp=A(rlp),E(helper,v),v.md5=A(md5$4),v.aes=A(aes$7),v.rsa=A(rsa),E(base$7,v),E(sha256$6,v),E(hmac$2,v),E(ripemd160$4,v),E(sha512$3,v),E(sha3$1,v),E(blake2b,v),E(blake2s$1,v),E(pbkdf2$2,v),E(scrypt$1,v),E(blake3,v);const P=A(utilsExports),T=browserExports$1;function O(U){if(U.length<1)return U;let N=U.length-1,H=0;for(let D=0;D<U.length/2;D++)H=U[D],U[D]=U[N],U[N]=H,N--;return U}v.reverseBuffer=O;function k(U,N){return P.concatBytes(Uint8Array.from(U),Uint8Array.from(N))}v.concatBytes=k;function C(U){return T(U)}v.randomBytes=C}(base$8)),base$8}var bip32$1={},bip32={},api$2={exports:{}},elliptic$2={},curve$4={},utils$F={},minimalisticAssert=assert$u;function assert$u(v,_){if(!v)throw new Error(_||"Assertion failed")}assert$u.equal=function(_,x,E){if(_!=x)throw new Error(E||"Assertion failed: "+_+" != "+x)};var utils$E={};(function(v){var _=v;function x(P,T){if(Array.isArray(P))return P.slice();if(!P)return[];var O=[];if(typeof P!="string"){for(var k=0;k<P.length;k++)O[k]=P[k]|0;return O}if(T==="hex"){P=P.replace(/[^a-z0-9]+/ig,""),P.length%2!==0&&(P="0"+P);for(var k=0;k<P.length;k+=2)O.push(parseInt(P[k]+P[k+1],16))}else for(var k=0;k<P.length;k++){var C=P.charCodeAt(k),U=C>>8,N=C&255;U?O.push(U,N):O.push(N)}return O}_.toArray=x;function E(P){return P.length===1?"0"+P:P}_.zero2=E;function A(P){for(var T="",O=0;O<P.length;O++)T+=E(P[O].toString(16));return T}_.toHex=A,_.encode=function(T,O){return O==="hex"?A(T):T}})(utils$E),function(v){var _=v,x=bnExports$2,E=minimalisticAssert,A=utils$E;_.assert=E,_.toArray=A.toArray,_.zero2=A.zero2,_.toHex=A.toHex,_.encode=A.encode;function P(U,N,H){var D=new Array(Math.max(U.bitLength(),H)+1);D.fill(0);for(var j=1<<N+1,V=U.clone(),X=0;X<D.length;X++){var re,ee=V.andln(j-1);V.isOdd()?(ee>(j>>1)-1?re=(j>>1)-ee:re=ee,V.isubn(re)):re=0,D[X]=re,V.iushrn(1)}return D}_.getNAF=P;function T(U,N){var H=[[],[]];U=U.clone(),N=N.clone();for(var D=0,j=0,V;U.cmpn(-D)>0||N.cmpn(-j)>0;){var X=U.andln(3)+D&3,re=N.andln(3)+j&3;X===3&&(X=-1),re===3&&(re=-1);var ee;X&1?(V=U.andln(7)+D&7,(V===3||V===5)&&re===2?ee=-X:ee=X):ee=0,H[0].push(ee);var fe;re&1?(V=N.andln(7)+j&7,(V===3||V===5)&&X===2?fe=-re:fe=re):fe=0,H[1].push(fe),2*D===ee+1&&(D=1-D),2*j===fe+1&&(j=1-j),U.iushrn(1),N.iushrn(1)}return H}_.getJSF=T;function O(U,N,H){var D="_"+N;U.prototype[N]=function(){return this[D]!==void 0?this[D]:this[D]=H.call(this)}}_.cachedProperty=O;function k(U){return typeof U=="string"?_.toArray(U,"hex"):U}_.parseBytes=k;function C(U){return new x(U,"hex","le")}_.intFromLE=C}(utils$F);var utils$D=utils$F,BN$j=bnExports$2,getNAF$1=utils$D.getNAF,getJSF$1=utils$D.getJSF,assert$t=utils$D.assert;function BaseCurve$1(v,_){this.type=v,this.p=new BN$j(_.p,16),this.red=_.prime?BN$j.red(_.prime):BN$j.mont(this.p),this.zero=new BN$j(0).toRed(this.red),this.one=new BN$j(1).toRed(this.red),this.two=new BN$j(2).toRed(this.red),this.n=_.n&&new BN$j(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$6=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")},BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve$1.prototype._fixedNafMul=function(_,x){assert$t(_.precomputed);var E=_._getDoubles(),A=getNAF$1(x,1,this._bitLength),P=(1<<E.step+1)-(E.step%2===0?2:1);P/=3;var T=[],O,k;for(O=0;O<A.length;O+=E.step){k=0;for(var C=O+E.step-1;C>=O;C--)k=(k<<1)+A[C];T.push(k)}for(var U=this.jpoint(null,null,null),N=this.jpoint(null,null,null),H=P;H>0;H--){for(O=0;O<T.length;O++)k=T[O],k===H?N=N.mixedAdd(E.points[O]):k===-H&&(N=N.mixedAdd(E.points[O].neg()));U=U.add(N)}return U.toP()},BaseCurve$1.prototype._wnafMul=function(_,x){var E=4,A=_._getNAFPoints(E);E=A.wnd;for(var P=A.points,T=getNAF$1(x,E,this._bitLength),O=this.jpoint(null,null,null),k=T.length-1;k>=0;k--){for(var C=0;k>=0&&T[k]===0;k--)C++;if(k>=0&&C++,O=O.dblp(C),k<0)break;var U=T[k];assert$t(U!==0),_.type==="affine"?U>0?O=O.mixedAdd(P[U-1>>1]):O=O.mixedAdd(P[-U-1>>1].neg()):U>0?O=O.add(P[U-1>>1]):O=O.add(P[-U-1>>1].neg())}return _.type==="affine"?O.toP():O},BaseCurve$1.prototype._wnafMulAdd=function(_,x,E,A,P){var T=this._wnafT1,O=this._wnafT2,k=this._wnafT3,C=0,U,N,H;for(U=0;U<A;U++){H=x[U];var D=H._getNAFPoints(_);T[U]=D.wnd,O[U]=D.points}for(U=A-1;U>=1;U-=2){var j=U-1,V=U;if(T[j]!==1||T[V]!==1){k[j]=getNAF$1(E[j],T[j],this._bitLength),k[V]=getNAF$1(E[V],T[V],this._bitLength),C=Math.max(k[j].length,C),C=Math.max(k[V].length,C);continue}var X=[x[j],null,null,x[V]];x[j].y.cmp(x[V].y)===0?(X[1]=x[j].add(x[V]),X[2]=x[j].toJ().mixedAdd(x[V].neg())):x[j].y.cmp(x[V].y.redNeg())===0?(X[1]=x[j].toJ().mixedAdd(x[V]),X[2]=x[j].add(x[V].neg())):(X[1]=x[j].toJ().mixedAdd(x[V]),X[2]=x[j].toJ().mixedAdd(x[V].neg()));var re=[-3,-1,-5,-7,0,7,5,1,3],ee=getJSF$1(E[j],E[V]);for(C=Math.max(ee[0].length,C),k[j]=new Array(C),k[V]=new Array(C),N=0;N<C;N++){var fe=ee[0][N]|0,le=ee[1][N]|0;k[j][N]=re[(fe+1)*3+(le+1)],k[V][N]=0,O[j]=X}}var pe=this.jpoint(null,null,null),ie=this._wnafT4;for(U=C;U>=0;U--){for(var he=0;U>=0;){var ae=!0;for(N=0;N<A;N++)ie[N]=k[N][U]|0,ie[N]!==0&&(ae=!1);if(!ae)break;he++,U--}if(U>=0&&he++,pe=pe.dblp(he),U<0)break;for(N=0;N<A;N++){var te=ie[N];te!==0&&(te>0?H=O[N][te-1>>1]:te<0&&(H=O[N][-te-1>>1].neg()),H.type==="affine"?pe=pe.mixedAdd(H):pe=pe.add(H))}}for(U=0;U<A;U++)O[U]=null;return P?pe:pe.toP()};function BasePoint$1(v,_){this.curve=v,this.type=_,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1,BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")},BasePoint$1.prototype.validate=function(){return this.curve.validate(this)},BaseCurve$1.prototype.decodePoint=function(_,x){_=utils$D.toArray(_,x);var E=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*E){_[0]===6?assert$t(_[_.length-1]%2===0):_[0]===7&&assert$t(_[_.length-1]%2===1);var A=this.point(_.slice(1,1+E),_.slice(1+E,1+2*E));return A}else if((_[0]===2||_[0]===3)&&_.length-1===E)return this.pointFromX(_.slice(1,1+E),_[0]===3);throw new Error("Unknown point format")},BasePoint$1.prototype.encodeCompressed=function(_){return this.encode(_,!0)},BasePoint$1.prototype._encode=function(_){var x=this.curve.p.byteLength(),E=this.getX().toArray("be",x);return _?[this.getY().isEven()?2:3].concat(E):[4].concat(E,this.getY().toArray("be",x))},BasePoint$1.prototype.encode=function(_,x){return utils$D.encode(this._encode(x),_)},BasePoint$1.prototype.precompute=function(_){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,_),x.beta=this._getBeta(),this.precomputed=x,this},BasePoint$1.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return x?x.points.length>=Math.ceil((_.bitLength()+1)/x.step):!1},BasePoint$1.prototype._getDoubles=function(_,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var E=[this],A=this,P=0;P<x;P+=_){for(var T=0;T<_;T++)A=A.dbl();E.push(A)}return{step:_,points:E}},BasePoint$1.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],E=(1<<_)-1,A=E===1?null:this.dbl(),P=1;P<E;P++)x[P]=x[P-1].add(A);return{wnd:_,points:x}},BasePoint$1.prototype._getBeta=function(){return null},BasePoint$1.prototype.dblp=function(_){for(var x=this,E=0;E<_;E++)x=x.dbl();return x};var utils$C=utils$F,BN$i=bnExports$2,inherits$n=inherits_browserExports,Base$7=base$6,assert$s=utils$C.assert;function ShortCurve$1(v){Base$7.call(this,"short",v),this.a=new BN$i(v.a,16).toRed(this.red),this.b=new BN$i(v.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(v),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$n(ShortCurve$1,Base$7);var short$1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(_){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var x,E;if(_.beta)x=new BN$i(_.beta,16).toRed(this.red);else{var A=this._getEndoRoots(this.p);x=A[0].cmp(A[1])<0?A[0]:A[1],x=x.toRed(this.red)}if(_.lambda)E=new BN$i(_.lambda,16);else{var P=this._getEndoRoots(this.n);this.g.mul(P[0]).x.cmp(this.g.x.redMul(x))===0?E=P[0]:(E=P[1],assert$s(this.g.mul(E).x.cmp(this.g.x.redMul(x))===0))}var T;return _.basis?T=_.basis.map(function(O){return{a:new BN$i(O.a,16),b:new BN$i(O.b,16)}}):T=this._getEndoBasis(E),{beta:x,lambda:E,basis:T}}},ShortCurve$1.prototype._getEndoRoots=function(_){var x=_===this.p?this.red:BN$i.mont(_),E=new BN$i(2).toRed(x).redInvm(),A=E.redNeg(),P=new BN$i(3).toRed(x).redNeg().redSqrt().redMul(E),T=A.redAdd(P).fromRed(),O=A.redSub(P).fromRed();return[T,O]},ShortCurve$1.prototype._getEndoBasis=function(_){for(var x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),E=_,A=this.n.clone(),P=new BN$i(1),T=new BN$i(0),O=new BN$i(0),k=new BN$i(1),C,U,N,H,D,j,V,X=0,re,ee;E.cmpn(0)!==0;){var fe=A.div(E);re=A.sub(fe.mul(E)),ee=O.sub(fe.mul(P));var le=k.sub(fe.mul(T));if(!N&&re.cmp(x)<0)C=V.neg(),U=P,N=re.neg(),H=ee;else if(N&&++X===2)break;V=re,A=E,E=re,O=P,P=ee,k=T,T=le}D=re.neg(),j=ee;var pe=N.sqr().add(H.sqr()),ie=D.sqr().add(j.sqr());return ie.cmp(pe)>=0&&(D=C,j=U),N.negative&&(N=N.neg(),H=H.neg()),D.negative&&(D=D.neg(),j=j.neg()),[{a:N,b:H},{a:D,b:j}]},ShortCurve$1.prototype._endoSplit=function(_){var x=this.endo.basis,E=x[0],A=x[1],P=A.b.mul(_).divRound(this.n),T=E.b.neg().mul(_).divRound(this.n),O=P.mul(E.a),k=T.mul(A.a),C=P.mul(E.b),U=T.mul(A.b),N=_.sub(O).sub(k),H=C.add(U).neg();return{k1:N,k2:H}},ShortCurve$1.prototype.pointFromX=function(_,x){_=new BN$i(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr().redMul(_).redIAdd(_.redMul(this.a)).redIAdd(this.b),A=E.redSqrt();if(A.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var P=A.fromRed().isOdd();return(x&&!P||!x&&P)&&(A=A.redNeg()),this.point(_,A)},ShortCurve$1.prototype.validate=function(_){if(_.inf)return!0;var x=_.x,E=_.y,A=this.a.redMul(x),P=x.redSqr().redMul(x).redIAdd(A).redIAdd(this.b);return E.redSqr().redISub(P).cmpn(0)===0},ShortCurve$1.prototype._endoWnafMulAdd=function(_,x,E){for(var A=this._endoWnafT1,P=this._endoWnafT2,T=0;T<_.length;T++){var O=this._endoSplit(x[T]),k=_[T],C=k._getBeta();O.k1.negative&&(O.k1.ineg(),k=k.neg(!0)),O.k2.negative&&(O.k2.ineg(),C=C.neg(!0)),A[T*2]=k,A[T*2+1]=C,P[T*2]=O.k1,P[T*2+1]=O.k2}for(var U=this._wnafMulAdd(1,A,P,T*2,E),N=0;N<T*2;N++)A[N]=null,P[N]=null;return U};function Point$5(v,_,x,E){Base$7.BasePoint.call(this,v,"affine"),_===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$i(_,16),this.y=new BN$i(x,16),E&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$n(Point$5,Base$7.BasePoint),ShortCurve$1.prototype.point=function(_,x,E){return new Point$5(this,_,x,E)},ShortCurve$1.prototype.pointFromJSON=function(_,x){return Point$5.fromJSON(this,_,x)},Point$5.prototype._getBeta=function(){if(this.curve.endo){var _=this.precomputed;if(_&&_.beta)return _.beta;var x=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(_){var E=this.curve,A=function(P){return E.point(P.x.redMul(E.endo.beta),P.y)};_.beta=x,x.precomputed={beta:null,naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(A)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(A)}}}return x}},Point$5.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point$5.fromJSON=function(_,x,E){typeof x=="string"&&(x=JSON.parse(x));var A=_.point(x[0],x[1],E);if(!x[2])return A;function P(O){return _.point(O[0],O[1],E)}var T=x[2];return A.precomputed={beta:null,doubles:T.doubles&&{step:T.doubles.step,points:[A].concat(T.doubles.points.map(P))},naf:T.naf&&{wnd:T.naf.wnd,points:[A].concat(T.naf.points.map(P))}},A},Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point$5.prototype.isInfinity=function(){return this.inf},Point$5.prototype.add=function(_){if(this.inf)return _;if(_.inf)return this;if(this.eq(_))return this.dbl();if(this.neg().eq(_))return this.curve.point(null,null);if(this.x.cmp(_.x)===0)return this.curve.point(null,null);var x=this.y.redSub(_.y);x.cmpn(0)!==0&&(x=x.redMul(this.x.redSub(_.x).redInvm()));var E=x.redSqr().redISub(this.x).redISub(_.x),A=x.redMul(this.x.redSub(E)).redISub(this.y);return this.curve.point(E,A)},Point$5.prototype.dbl=function(){if(this.inf)return this;var _=this.y.redAdd(this.y);if(_.cmpn(0)===0)return this.curve.point(null,null);var x=this.curve.a,E=this.x.redSqr(),A=_.redInvm(),P=E.redAdd(E).redIAdd(E).redIAdd(x).redMul(A),T=P.redSqr().redISub(this.x.redAdd(this.x)),O=P.redMul(this.x.redSub(T)).redISub(this.y);return this.curve.point(T,O)},Point$5.prototype.getX=function(){return this.x.fromRed()},Point$5.prototype.getY=function(){return this.y.fromRed()},Point$5.prototype.mul=function(_){return _=new BN$i(_,16),this.isInfinity()?this:this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve.endo?this.curve._endoWnafMulAdd([this],[_]):this.curve._wnafMul(this,_)},Point$5.prototype.mulAdd=function(_,x,E){var A=[this,x],P=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(A,P):this.curve._wnafMulAdd(1,A,P,2)},Point$5.prototype.jmulAdd=function(_,x,E){var A=[this,x],P=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(A,P,!0):this.curve._wnafMulAdd(1,A,P,2,!0)},Point$5.prototype.eq=function(_){return this===_||this.inf===_.inf&&(this.inf||this.x.cmp(_.x)===0&&this.y.cmp(_.y)===0)},Point$5.prototype.neg=function(_){if(this.inf)return this;var x=this.curve.point(this.x,this.y.redNeg());if(_&&this.precomputed){var E=this.precomputed,A=function(P){return P.neg()};x.precomputed={naf:E.naf&&{wnd:E.naf.wnd,points:E.naf.points.map(A)},doubles:E.doubles&&{step:E.doubles.step,points:E.doubles.points.map(A)}}}return x},Point$5.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var _=this.curve.jpoint(this.x,this.y,this.curve.one);return _};function JPoint$1(v,_,x,E){Base$7.BasePoint.call(this,v,"jacobian"),_===null&&x===null&&E===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$i(0)):(this.x=new BN$i(_,16),this.y=new BN$i(x,16),this.z=new BN$i(E,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$n(JPoint$1,Base$7.BasePoint),ShortCurve$1.prototype.jpoint=function(_,x,E){return new JPoint$1(this,_,x,E)},JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var _=this.z.redInvm(),x=_.redSqr(),E=this.x.redMul(x),A=this.y.redMul(x).redMul(_);return this.curve.point(E,A)},JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint$1.prototype.add=function(_){if(this.isInfinity())return _;if(_.isInfinity())return this;var x=_.z.redSqr(),E=this.z.redSqr(),A=this.x.redMul(x),P=_.x.redMul(E),T=this.y.redMul(x.redMul(_.z)),O=_.y.redMul(E.redMul(this.z)),k=A.redSub(P),C=T.redSub(O);if(k.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var U=k.redSqr(),N=U.redMul(k),H=A.redMul(U),D=C.redSqr().redIAdd(N).redISub(H).redISub(H),j=C.redMul(H.redISub(D)).redISub(T.redMul(N)),V=this.z.redMul(_.z).redMul(k);return this.curve.jpoint(D,j,V)},JPoint$1.prototype.mixedAdd=function(_){if(this.isInfinity())return _.toJ();if(_.isInfinity())return this;var x=this.z.redSqr(),E=this.x,A=_.x.redMul(x),P=this.y,T=_.y.redMul(x).redMul(this.z),O=E.redSub(A),k=P.redSub(T);if(O.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var C=O.redSqr(),U=C.redMul(O),N=E.redMul(C),H=k.redSqr().redIAdd(U).redISub(N).redISub(N),D=k.redMul(N.redISub(H)).redISub(P.redMul(U)),j=this.z.redMul(O);return this.curve.jpoint(H,D,j)},JPoint$1.prototype.dblp=function(_){if(_===0)return this;if(this.isInfinity())return this;if(!_)return this.dbl();var x;if(this.curve.zeroA||this.curve.threeA){var E=this;for(x=0;x<_;x++)E=E.dbl();return E}var A=this.curve.a,P=this.curve.tinv,T=this.x,O=this.y,k=this.z,C=k.redSqr().redSqr(),U=O.redAdd(O);for(x=0;x<_;x++){var N=T.redSqr(),H=U.redSqr(),D=H.redSqr(),j=N.redAdd(N).redIAdd(N).redIAdd(A.redMul(C)),V=T.redMul(H),X=j.redSqr().redISub(V.redAdd(V)),re=V.redISub(X),ee=j.redMul(re);ee=ee.redIAdd(ee).redISub(D);var fe=U.redMul(k);x+1<_&&(C=C.redMul(D)),T=X,k=fe,U=ee}return this.curve.jpoint(T,U.redMul(P),k)},JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint$1.prototype._zeroDbl=function(){var _,x,E;if(this.zOne){var A=this.x.redSqr(),P=this.y.redSqr(),T=P.redSqr(),O=this.x.redAdd(P).redSqr().redISub(A).redISub(T);O=O.redIAdd(O);var k=A.redAdd(A).redIAdd(A),C=k.redSqr().redISub(O).redISub(O),U=T.redIAdd(T);U=U.redIAdd(U),U=U.redIAdd(U),_=C,x=k.redMul(O.redISub(C)).redISub(U),E=this.y.redAdd(this.y)}else{var N=this.x.redSqr(),H=this.y.redSqr(),D=H.redSqr(),j=this.x.redAdd(H).redSqr().redISub(N).redISub(D);j=j.redIAdd(j);var V=N.redAdd(N).redIAdd(N),X=V.redSqr(),re=D.redIAdd(D);re=re.redIAdd(re),re=re.redIAdd(re),_=X.redISub(j).redISub(j),x=V.redMul(j.redISub(_)).redISub(re),E=this.y.redMul(this.z),E=E.redIAdd(E)}return this.curve.jpoint(_,x,E)},JPoint$1.prototype._threeDbl=function(){var _,x,E;if(this.zOne){var A=this.x.redSqr(),P=this.y.redSqr(),T=P.redSqr(),O=this.x.redAdd(P).redSqr().redISub(A).redISub(T);O=O.redIAdd(O);var k=A.redAdd(A).redIAdd(A).redIAdd(this.curve.a),C=k.redSqr().redISub(O).redISub(O);_=C;var U=T.redIAdd(T);U=U.redIAdd(U),U=U.redIAdd(U),x=k.redMul(O.redISub(C)).redISub(U),E=this.y.redAdd(this.y)}else{var N=this.z.redSqr(),H=this.y.redSqr(),D=this.x.redMul(H),j=this.x.redSub(N).redMul(this.x.redAdd(N));j=j.redAdd(j).redIAdd(j);var V=D.redIAdd(D);V=V.redIAdd(V);var X=V.redAdd(V);_=j.redSqr().redISub(X),E=this.y.redAdd(this.z).redSqr().redISub(H).redISub(N);var re=H.redSqr();re=re.redIAdd(re),re=re.redIAdd(re),re=re.redIAdd(re),x=j.redMul(V.redISub(_)).redISub(re)}return this.curve.jpoint(_,x,E)},JPoint$1.prototype._dbl=function(){var _=this.curve.a,x=this.x,E=this.y,A=this.z,P=A.redSqr().redSqr(),T=x.redSqr(),O=E.redSqr(),k=T.redAdd(T).redIAdd(T).redIAdd(_.redMul(P)),C=x.redAdd(x);C=C.redIAdd(C);var U=C.redMul(O),N=k.redSqr().redISub(U.redAdd(U)),H=U.redISub(N),D=O.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var j=k.redMul(H).redISub(D),V=E.redAdd(E).redMul(A);return this.curve.jpoint(N,j,V)},JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr(),A=x.redSqr(),P=_.redAdd(_).redIAdd(_),T=P.redSqr(),O=this.x.redAdd(x).redSqr().redISub(_).redISub(A);O=O.redIAdd(O),O=O.redAdd(O).redIAdd(O),O=O.redISub(T);var k=O.redSqr(),C=A.redIAdd(A);C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C);var U=P.redIAdd(O).redSqr().redISub(T).redISub(k).redISub(C),N=x.redMul(U);N=N.redIAdd(N),N=N.redIAdd(N);var H=this.x.redMul(k).redISub(N);H=H.redIAdd(H),H=H.redIAdd(H);var D=this.y.redMul(U.redMul(C.redISub(U)).redISub(O.redMul(k)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var j=this.z.redAdd(O).redSqr().redISub(E).redISub(k);return this.curve.jpoint(H,D,j)},JPoint$1.prototype.mul=function(_,x){return _=new BN$i(_,x),this.curve._wnafMul(this,_)},JPoint$1.prototype.eq=function(_){if(_.type==="affine")return this.eq(_.toJ());if(this===_)return!0;var x=this.z.redSqr(),E=_.z.redSqr();if(this.x.redMul(E).redISub(_.x.redMul(x)).cmpn(0)!==0)return!1;var A=x.redMul(this.z),P=E.redMul(_.z);return this.y.redMul(P).redISub(_.y.redMul(A)).cmpn(0)===0},JPoint$1.prototype.eqXToP=function(_){var x=this.z.redSqr(),E=_.toRed(this.curve.red).redMul(x);if(this.x.cmp(E)===0)return!0;for(var A=_.clone(),P=this.curve.redN.redMul(x);;){if(A.iadd(this.curve.n),A.cmp(this.curve.p)>=0)return!1;if(E.redIAdd(P),this.x.cmp(E)===0)return!0}},JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$h=bnExports$2,inherits$m=inherits_browserExports,Base$6=base$6,utils$B=utils$F;function MontCurve$1(v){Base$6.call(this,"mont",v),this.a=new BN$h(v.a,16).toRed(this.red),this.b=new BN$h(v.b,16).toRed(this.red),this.i4=new BN$h(4).toRed(this.red).redInvm(),this.two=new BN$h(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$m(MontCurve$1,Base$6);var mont$1=MontCurve$1;MontCurve$1.prototype.validate=function(_){var x=_.normalize().x,E=x.redSqr(),A=E.redMul(x).redAdd(E.redMul(this.a)).redAdd(x),P=A.redSqrt();return P.redSqr().cmp(A)===0};function Point$4(v,_,x){Base$6.BasePoint.call(this,v,"projective"),_===null&&x===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$h(_,16),this.z=new BN$h(x,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$m(Point$4,Base$6.BasePoint),MontCurve$1.prototype.decodePoint=function(_,x){return this.point(utils$B.toArray(_,x),1)},MontCurve$1.prototype.point=function(_,x){return new Point$4(this,_,x)},MontCurve$1.prototype.pointFromJSON=function(_){return Point$4.fromJSON(this,_)},Point$4.prototype.precompute=function(){},Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point$4.fromJSON=function(_,x){return new Point$4(_,x[0],x[1]||_.one)},Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$4.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Point$4.prototype.dbl=function(){var _=this.x.redAdd(this.z),x=_.redSqr(),E=this.x.redSub(this.z),A=E.redSqr(),P=x.redSub(A),T=x.redMul(A),O=P.redMul(A.redAdd(this.curve.a24.redMul(P)));return this.curve.point(T,O)},Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.diffAdd=function(_,x){var E=this.x.redAdd(this.z),A=this.x.redSub(this.z),P=_.x.redAdd(_.z),T=_.x.redSub(_.z),O=T.redMul(E),k=P.redMul(A),C=x.z.redMul(O.redAdd(k).redSqr()),U=x.x.redMul(O.redISub(k).redSqr());return this.curve.point(C,U)},Point$4.prototype.mul=function(_){for(var x=_.clone(),E=this,A=this.curve.point(null,null),P=this,T=[];x.cmpn(0)!==0;x.iushrn(1))T.push(x.andln(1));for(var O=T.length-1;O>=0;O--)T[O]===0?(E=E.diffAdd(A,P),A=A.dbl()):(A=E.diffAdd(A,P),E=E.dbl());return A},Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$4.prototype.eq=function(_){return this.getX().cmp(_.getX())===0},Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$A=utils$F,BN$g=bnExports$2,inherits$l=inherits_browserExports,Base$5=base$6,assert$r=utils$A.assert;function EdwardsCurve$1(v){this.twisted=(v.a|0)!==1,this.mOneA=this.twisted&&(v.a|0)===-1,this.extended=this.mOneA,Base$5.call(this,"edwards",v),this.a=new BN$g(v.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$g(v.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$g(v.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$r(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(v.c|0)===1}inherits$l(EdwardsCurve$1,Base$5);var edwards$1=EdwardsCurve$1;EdwardsCurve$1.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)},EdwardsCurve$1.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)},EdwardsCurve$1.prototype.jpoint=function(_,x,E,A){return this.point(_,x,E,A)},EdwardsCurve$1.prototype.pointFromX=function(_,x){_=new BN$g(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),A=this.c2.redSub(this.a.redMul(E)),P=this.one.redSub(this.c2.redMul(this.d).redMul(E)),T=A.redMul(P.redInvm()),O=T.redSqrt();if(O.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");var k=O.fromRed().isOdd();return(x&&!k||!x&&k)&&(O=O.redNeg()),this.point(_,O)},EdwardsCurve$1.prototype.pointFromY=function(_,x){_=new BN$g(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),A=E.redSub(this.c2),P=E.redMul(this.d).redMul(this.c2).redSub(this.a),T=A.redMul(P.redInvm());if(T.cmp(this.zero)===0){if(x)throw new Error("invalid point");return this.point(this.zero,_)}var O=T.redSqrt();if(O.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");return O.fromRed().isOdd()!==x&&(O=O.redNeg()),this.point(O,_)},EdwardsCurve$1.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var x=_.x.redSqr(),E=_.y.redSqr(),A=x.redMul(this.a).redAdd(E),P=this.c2.redMul(this.one.redAdd(this.d.redMul(x).redMul(E)));return A.cmp(P)===0};function Point$3(v,_,x,E,A){Base$5.BasePoint.call(this,v,"projective"),_===null&&x===null&&E===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$g(_,16),this.y=new BN$g(x,16),this.z=E?new BN$g(E,16):this.curve.one,this.t=A&&new BN$g(A,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$l(Point$3,Base$5.BasePoint),EdwardsCurve$1.prototype.pointFromJSON=function(_){return Point$3.fromJSON(this,_)},EdwardsCurve$1.prototype.point=function(_,x,E,A){return new Point$3(this,_,x,E,A)},Point$3.fromJSON=function(_,x){return new Point$3(_,x[0],x[1],x[2])},Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$3.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Point$3.prototype._extDbl=function(){var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr();E=E.redIAdd(E);var A=this.curve._mulA(_),P=this.x.redAdd(this.y).redSqr().redISub(_).redISub(x),T=A.redAdd(x),O=T.redSub(E),k=A.redSub(x),C=P.redMul(O),U=T.redMul(k),N=P.redMul(k),H=O.redMul(T);return this.curve.point(C,U,H,N)},Point$3.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),E=this.y.redSqr(),A,P,T,O,k,C;if(this.curve.twisted){O=this.curve._mulA(x);var U=O.redAdd(E);this.zOne?(A=_.redSub(x).redSub(E).redMul(U.redSub(this.curve.two)),P=U.redMul(O.redSub(E)),T=U.redSqr().redSub(U).redSub(U)):(k=this.z.redSqr(),C=U.redSub(k).redISub(k),A=_.redSub(x).redISub(E).redMul(C),P=U.redMul(O.redSub(E)),T=U.redMul(C))}else O=x.redAdd(E),k=this.curve._mulC(this.z).redSqr(),C=O.redSub(k).redSub(k),A=this.curve._mulC(_.redISub(O)).redMul(C),P=this.curve._mulC(O).redMul(x.redISub(E)),T=O.redMul(C);return this.curve.point(A,P,T)},Point$3.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point$3.prototype._extAdd=function(_){var x=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),E=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),A=this.t.redMul(this.curve.dd).redMul(_.t),P=this.z.redMul(_.z.redAdd(_.z)),T=E.redSub(x),O=P.redSub(A),k=P.redAdd(A),C=E.redAdd(x),U=T.redMul(O),N=k.redMul(C),H=T.redMul(C),D=O.redMul(k);return this.curve.point(U,N,D,H)},Point$3.prototype._projAdd=function(_){var x=this.z.redMul(_.z),E=x.redSqr(),A=this.x.redMul(_.x),P=this.y.redMul(_.y),T=this.curve.d.redMul(A).redMul(P),O=E.redSub(T),k=E.redAdd(T),C=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(A).redISub(P),U=x.redMul(O).redMul(C),N,H;return this.curve.twisted?(N=x.redMul(k).redMul(P.redSub(this.curve._mulA(A))),H=O.redMul(k)):(N=x.redMul(k).redMul(P.redSub(A)),H=this.curve._mulC(O).redMul(k)),this.curve.point(U,N,H)},Point$3.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)},Point$3.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)},Point$3.prototype.mulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!1)},Point$3.prototype.jmulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!0)},Point$3.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this},Point$3.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point$3.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point$3.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point$3.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0},Point$3.prototype.eqXToP=function(_){var x=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(x)===0)return!0;for(var E=_.clone(),A=this.curve.redN.redMul(this.z);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(A),this.x.cmp(x)===0)return!0}},Point$3.prototype.toP=Point$3.prototype.normalize,Point$3.prototype.mixedAdd=Point$3.prototype.add,function(v){var _=v;_.base=base$6,_.short=short$1,_.mont=mont$1,_.edwards=edwards$1}(curve$4);var curves$5={},hash$4={},utils$z={},assert$q=minimalisticAssert,inherits$k=inherits_browserExports;utils$z.inherits=inherits$k;function isSurrogatePair(v,_){return(v.charCodeAt(_)&64512)!==55296||_<0||_+1>=v.length?!1:(v.charCodeAt(_+1)&64512)===56320}function toArray$2(v,_){if(Array.isArray(v))return v.slice();if(!v)return[];var x=[];if(typeof v=="string")if(_){if(_==="hex")for(v=v.replace(/[^a-z0-9]+/ig,""),v.length%2!==0&&(v="0"+v),A=0;A<v.length;A+=2)x.push(parseInt(v[A]+v[A+1],16))}else for(var E=0,A=0;A<v.length;A++){var P=v.charCodeAt(A);P<128?x[E++]=P:P<2048?(x[E++]=P>>6|192,x[E++]=P&63|128):isSurrogatePair(v,A)?(P=65536+((P&1023)<<10)+(v.charCodeAt(++A)&1023),x[E++]=P>>18|240,x[E++]=P>>12&63|128,x[E++]=P>>6&63|128,x[E++]=P&63|128):(x[E++]=P>>12|224,x[E++]=P>>6&63|128,x[E++]=P&63|128)}else for(A=0;A<v.length;A++)x[A]=v[A]|0;return x}utils$z.toArray=toArray$2;function toHex(v){for(var _="",x=0;x<v.length;x++)_+=zero2(v[x].toString(16));return _}utils$z.toHex=toHex;function htonl(v){var _=v>>>24|v>>>8&65280|v<<8&16711680|(v&255)<<24;return _>>>0}utils$z.htonl=htonl;function toHex32(v,_){for(var x="",E=0;E<v.length;E++){var A=v[E];_==="little"&&(A=htonl(A)),x+=zero8(A.toString(16))}return x}utils$z.toHex32=toHex32;function zero2(v){return v.length===1?"0"+v:v}utils$z.zero2=zero2;function zero8(v){return v.length===7?"0"+v:v.length===6?"00"+v:v.length===5?"000"+v:v.length===4?"0000"+v:v.length===3?"00000"+v:v.length===2?"000000"+v:v.length===1?"0000000"+v:v}utils$z.zero8=zero8;function join32(v,_,x,E){var A=x-_;assert$q(A%4===0);for(var P=new Array(A/4),T=0,O=_;T<P.length;T++,O+=4){var k;E==="big"?k=v[O]<<24|v[O+1]<<16|v[O+2]<<8|v[O+3]:k=v[O+3]<<24|v[O+2]<<16|v[O+1]<<8|v[O],P[T]=k>>>0}return P}utils$z.join32=join32;function split32(v,_){for(var x=new Array(v.length*4),E=0,A=0;E<v.length;E++,A+=4){var P=v[E];_==="big"?(x[A]=P>>>24,x[A+1]=P>>>16&255,x[A+2]=P>>>8&255,x[A+3]=P&255):(x[A+3]=P>>>24,x[A+2]=P>>>16&255,x[A+1]=P>>>8&255,x[A]=P&255)}return x}utils$z.split32=split32;function rotr32$1(v,_){return v>>>_|v<<32-_}utils$z.rotr32=rotr32$1;function rotl32$2(v,_){return v<<_|v>>>32-_}utils$z.rotl32=rotl32$2;function sum32$3(v,_){return v+_>>>0}utils$z.sum32=sum32$3;function sum32_3$1(v,_,x){return v+_+x>>>0}utils$z.sum32_3=sum32_3$1;function sum32_4$2(v,_,x,E){return v+_+x+E>>>0}utils$z.sum32_4=sum32_4$2;function sum32_5$2(v,_,x,E,A){return v+_+x+E+A>>>0}utils$z.sum32_5=sum32_5$2;function sum64$1(v,_,x,E){var A=v[_],P=v[_+1],T=E+P>>>0,O=(T<E?1:0)+x+A;v[_]=O>>>0,v[_+1]=T}utils$z.sum64=sum64$1;function sum64_hi$1(v,_,x,E){var A=_+E>>>0,P=(A<_?1:0)+v+x;return P>>>0}utils$z.sum64_hi=sum64_hi$1;function sum64_lo$1(v,_,x,E){var A=_+E;return A>>>0}utils$z.sum64_lo=sum64_lo$1;function sum64_4_hi$1(v,_,x,E,A,P,T,O){var k=0,C=_;C=C+E>>>0,k+=C<_?1:0,C=C+P>>>0,k+=C<P?1:0,C=C+O>>>0,k+=C<O?1:0;var U=v+x+A+T+k;return U>>>0}utils$z.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(v,_,x,E,A,P,T,O){var k=_+E+P+O;return k>>>0}utils$z.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(v,_,x,E,A,P,T,O,k,C){var U=0,N=_;N=N+E>>>0,U+=N<_?1:0,N=N+P>>>0,U+=N<P?1:0,N=N+O>>>0,U+=N<O?1:0,N=N+C>>>0,U+=N<C?1:0;var H=v+x+A+T+k+U;return H>>>0}utils$z.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(v,_,x,E,A,P,T,O,k,C){var U=_+E+P+O+C;return U>>>0}utils$z.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(v,_,x){var E=_<<32-x|v>>>x;return E>>>0}utils$z.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(v,_,x){var E=v<<32-x|_>>>x;return E>>>0}utils$z.rotr64_lo=rotr64_lo$1;function shr64_hi$1(v,_,x){return v>>>x}utils$z.shr64_hi=shr64_hi$1;function shr64_lo$1(v,_,x){var E=v<<32-x|_>>>x;return E>>>0}utils$z.shr64_lo=shr64_lo$1;var common$7={},utils$y=utils$z,assert$p=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$7.BlockHash=BlockHash$4,BlockHash$4.prototype.update=function(_,x){if(_=utils$y.toArray(_,x),this.pending?this.pending=this.pending.concat(_):this.pending=_,this.pendingTotal+=_.length,this.pending.length>=this._delta8){_=this.pending;var E=_.length%this._delta8;this.pending=_.slice(_.length-E,_.length),this.pending.length===0&&(this.pending=null),_=utils$y.join32(_,0,_.length-E,this.endian);for(var A=0;A<_.length;A+=this._delta32)this._update(_,A,A+this._delta32)}return this},BlockHash$4.prototype.digest=function(_){return this.update(this._pad()),assert$p(this.pending===null),this._digest(_)},BlockHash$4.prototype._pad=function(){var _=this.pendingTotal,x=this._delta8,E=x-(_+this.padLength)%x,A=new Array(E+this.padLength);A[0]=128;for(var P=1;P<E;P++)A[P]=0;if(_<<=3,this.endian==="big"){for(var T=8;T<this.padLength;T++)A[P++]=0;A[P++]=0,A[P++]=0,A[P++]=0,A[P++]=0,A[P++]=_>>>24&255,A[P++]=_>>>16&255,A[P++]=_>>>8&255,A[P++]=_&255}else for(A[P++]=_&255,A[P++]=_>>>8&255,A[P++]=_>>>16&255,A[P++]=_>>>24&255,A[P++]=0,A[P++]=0,A[P++]=0,A[P++]=0,T=8;T<this.padLength;T++)A[P++]=0;return A};var sha$2={},common$6={},utils$x=utils$z,rotr32=utils$x.rotr32;function ft_1$1(v,_,x,E){if(v===0)return ch32$1(_,x,E);if(v===1||v===3)return p32(_,x,E);if(v===2)return maj32$1(_,x,E)}common$6.ft_1=ft_1$1;function ch32$1(v,_,x){return v&_^~v&x}common$6.ch32=ch32$1;function maj32$1(v,_,x){return v&_^v&x^_&x}common$6.maj32=maj32$1;function p32(v,_,x){return v^_^x}common$6.p32=p32;function s0_256$1(v){return rotr32(v,2)^rotr32(v,13)^rotr32(v,22)}common$6.s0_256=s0_256$1;function s1_256$1(v){return rotr32(v,6)^rotr32(v,11)^rotr32(v,25)}common$6.s1_256=s1_256$1;function g0_256$1(v){return rotr32(v,7)^rotr32(v,18)^v>>>3}common$6.g0_256=g0_256$1;function g1_256$1(v){return rotr32(v,17)^rotr32(v,19)^v>>>10}common$6.g1_256=g1_256$1;var utils$w=utils$z,common$5=common$7,shaCommon$1=common$6,rotl32$1=utils$w.rotl32,sum32$2=utils$w.sum32,sum32_5$1=utils$w.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$5.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1$1(){if(!(this instanceof SHA1$1))return new SHA1$1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$w.inherits(SHA1$1,BlockHash$3);var _1=SHA1$1;SHA1$1.blockSize=512,SHA1$1.outSize=160,SHA1$1.hmacStrength=80,SHA1$1.padLength=64,SHA1$1.prototype._update=function(_,x){for(var E=this.W,A=0;A<16;A++)E[A]=_[x+A];for(;A<E.length;A++)E[A]=rotl32$1(E[A-3]^E[A-8]^E[A-14]^E[A-16],1);var P=this.h[0],T=this.h[1],O=this.h[2],k=this.h[3],C=this.h[4];for(A=0;A<E.length;A++){var U=~~(A/20),N=sum32_5$1(rotl32$1(P,5),ft_1(U,T,O,k),C,E[A],sha1_K[U]);C=k,k=O,O=rotl32$1(T,30),T=P,P=N}this.h[0]=sum32$2(this.h[0],P),this.h[1]=sum32$2(this.h[1],T),this.h[2]=sum32$2(this.h[2],O),this.h[3]=sum32$2(this.h[3],k),this.h[4]=sum32$2(this.h[4],C)},SHA1$1.prototype._digest=function(_){return _==="hex"?utils$w.toHex32(this.h,"big"):utils$w.split32(this.h,"big")};var utils$v=utils$z,common$4=common$7,shaCommon=common$6,assert$o=minimalisticAssert,sum32$1=utils$v.sum32,sum32_4$1=utils$v.sum32_4,sum32_5=utils$v.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$4.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$v.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512,SHA256$2.outSize=256,SHA256$2.hmacStrength=192,SHA256$2.padLength=64,SHA256$2.prototype._update=function(_,x){for(var E=this.W,A=0;A<16;A++)E[A]=_[x+A];for(;A<E.length;A++)E[A]=sum32_4$1(g1_256(E[A-2]),E[A-7],g0_256(E[A-15]),E[A-16]);var P=this.h[0],T=this.h[1],O=this.h[2],k=this.h[3],C=this.h[4],U=this.h[5],N=this.h[6],H=this.h[7];for(assert$o(this.k.length===E.length),A=0;A<E.length;A++){var D=sum32_5(H,s1_256(C),ch32(C,U,N),this.k[A],E[A]),j=sum32$1(s0_256(P),maj32(P,T,O));H=N,N=U,U=C,C=sum32$1(k,D),k=O,O=T,T=P,P=sum32$1(D,j)}this.h[0]=sum32$1(this.h[0],P),this.h[1]=sum32$1(this.h[1],T),this.h[2]=sum32$1(this.h[2],O),this.h[3]=sum32$1(this.h[3],k),this.h[4]=sum32$1(this.h[4],C),this.h[5]=sum32$1(this.h[5],U),this.h[6]=sum32$1(this.h[6],N),this.h[7]=sum32$1(this.h[7],H)},SHA256$2.prototype._digest=function(_){return _==="hex"?utils$v.toHex32(this.h,"big"):utils$v.split32(this.h,"big")};var utils$u=utils$z,SHA256$1=_256;function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;SHA256$1.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$u.inherits(SHA224$1,SHA256$1);var _224=SHA224$1;SHA224$1.blockSize=512,SHA224$1.outSize=224,SHA224$1.hmacStrength=192,SHA224$1.padLength=64,SHA224$1.prototype._digest=function(_){return _==="hex"?utils$u.toHex32(this.h.slice(0,7),"big"):utils$u.split32(this.h.slice(0,7),"big")};var utils$t=utils$z,common$3=common$7,assert$n=minimalisticAssert,rotr64_hi=utils$t.rotr64_hi,rotr64_lo=utils$t.rotr64_lo,shr64_hi=utils$t.shr64_hi,shr64_lo=utils$t.shr64_lo,sum64=utils$t.sum64,sum64_hi=utils$t.sum64_hi,sum64_lo=utils$t.sum64_lo,sum64_4_hi=utils$t.sum64_4_hi,sum64_4_lo=utils$t.sum64_4_lo,sum64_5_hi=utils$t.sum64_5_hi,sum64_5_lo=utils$t.sum64_5_lo,BlockHash$1=common$3.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$t.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024,SHA512$1.outSize=512,SHA512$1.hmacStrength=192,SHA512$1.padLength=128,SHA512$1.prototype._prepareBlock=function(_,x){for(var E=this.W,A=0;A<32;A++)E[A]=_[x+A];for(;A<E.length;A+=2){var P=g1_512_hi(E[A-4],E[A-3]),T=g1_512_lo(E[A-4],E[A-3]),O=E[A-14],k=E[A-13],C=g0_512_hi(E[A-30],E[A-29]),U=g0_512_lo(E[A-30],E[A-29]),N=E[A-32],H=E[A-31];E[A]=sum64_4_hi(P,T,O,k,C,U,N,H),E[A+1]=sum64_4_lo(P,T,O,k,C,U,N,H)}},SHA512$1.prototype._update=function(_,x){this._prepareBlock(_,x);var E=this.W,A=this.h[0],P=this.h[1],T=this.h[2],O=this.h[3],k=this.h[4],C=this.h[5],U=this.h[6],N=this.h[7],H=this.h[8],D=this.h[9],j=this.h[10],V=this.h[11],X=this.h[12],re=this.h[13],ee=this.h[14],fe=this.h[15];assert$n(this.k.length===E.length);for(var le=0;le<E.length;le+=2){var pe=ee,ie=fe,he=s1_512_hi(H,D),ae=s1_512_lo(H,D),te=ch64_hi(H,D,j,V,X),ue=ch64_lo(H,D,j,V,X,re),ne=this.k[le],J=this.k[le+1],q=E[le],F=E[le+1],L=sum64_5_hi(pe,ie,he,ae,te,ue,ne,J,q,F),Z=sum64_5_lo(pe,ie,he,ae,te,ue,ne,J,q,F);pe=s0_512_hi(A,P),ie=s0_512_lo(A,P),he=maj64_hi(A,P,T,O,k),ae=maj64_lo(A,P,T,O,k,C);var Q=sum64_hi(pe,ie,he,ae),de=sum64_lo(pe,ie,he,ae);ee=X,fe=re,X=j,re=V,j=H,V=D,H=sum64_hi(U,N,L,Z),D=sum64_lo(N,N,L,Z),U=k,N=C,k=T,C=O,T=A,O=P,A=sum64_hi(L,Z,Q,de),P=sum64_lo(L,Z,Q,de)}sum64(this.h,0,A,P),sum64(this.h,2,T,O),sum64(this.h,4,k,C),sum64(this.h,6,U,N),sum64(this.h,8,H,D),sum64(this.h,10,j,V),sum64(this.h,12,X,re),sum64(this.h,14,ee,fe)},SHA512$1.prototype._digest=function(_){return _==="hex"?utils$t.toHex32(this.h,"big"):utils$t.split32(this.h,"big")};function ch64_hi(v,_,x,E,A){var P=v&x^~v&A;return P<0&&(P+=4294967296),P}function ch64_lo(v,_,x,E,A,P){var T=_&E^~_&P;return T<0&&(T+=4294967296),T}function maj64_hi(v,_,x,E,A){var P=v&x^v&A^x&A;return P<0&&(P+=4294967296),P}function maj64_lo(v,_,x,E,A,P){var T=_&E^_&P^E&P;return T<0&&(T+=4294967296),T}function s0_512_hi(v,_){var x=rotr64_hi(v,_,28),E=rotr64_hi(_,v,2),A=rotr64_hi(_,v,7),P=x^E^A;return P<0&&(P+=4294967296),P}function s0_512_lo(v,_){var x=rotr64_lo(v,_,28),E=rotr64_lo(_,v,2),A=rotr64_lo(_,v,7),P=x^E^A;return P<0&&(P+=4294967296),P}function s1_512_hi(v,_){var x=rotr64_hi(v,_,14),E=rotr64_hi(v,_,18),A=rotr64_hi(_,v,9),P=x^E^A;return P<0&&(P+=4294967296),P}function s1_512_lo(v,_){var x=rotr64_lo(v,_,14),E=rotr64_lo(v,_,18),A=rotr64_lo(_,v,9),P=x^E^A;return P<0&&(P+=4294967296),P}function g0_512_hi(v,_){var x=rotr64_hi(v,_,1),E=rotr64_hi(v,_,8),A=shr64_hi(v,_,7),P=x^E^A;return P<0&&(P+=4294967296),P}function g0_512_lo(v,_){var x=rotr64_lo(v,_,1),E=rotr64_lo(v,_,8),A=shr64_lo(v,_,7),P=x^E^A;return P<0&&(P+=4294967296),P}function g1_512_hi(v,_){var x=rotr64_hi(v,_,19),E=rotr64_hi(_,v,29),A=shr64_hi(v,_,6),P=x^E^A;return P<0&&(P+=4294967296),P}function g1_512_lo(v,_){var x=rotr64_lo(v,_,19),E=rotr64_lo(_,v,29),A=shr64_lo(v,_,6),P=x^E^A;return P<0&&(P+=4294967296),P}var utils$s=utils$z,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$s.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(_){return _==="hex"?utils$s.toHex32(this.h.slice(0,12),"big"):utils$s.split32(this.h.slice(0,12),"big")},sha$2.sha1=_1,sha$2.sha224=_224,sha$2.sha256=_256,sha$2.sha384=_384,sha$2.sha512=_512;var ripemd={},utils$r=utils$z,common$2=common$7,rotl32=utils$r.rotl32,sum32=utils$r.sum32,sum32_3=utils$r.sum32_3,sum32_4=utils$r.sum32_4,BlockHash=common$2.BlockHash;function RIPEMD160$3(){if(!(this instanceof RIPEMD160$3))return new RIPEMD160$3;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$r.inherits(RIPEMD160$3,BlockHash),ripemd.ripemd160=RIPEMD160$3,RIPEMD160$3.blockSize=512,RIPEMD160$3.outSize=160,RIPEMD160$3.hmacStrength=192,RIPEMD160$3.padLength=64,RIPEMD160$3.prototype._update=function(_,x){for(var E=this.h[0],A=this.h[1],P=this.h[2],T=this.h[3],O=this.h[4],k=E,C=A,U=P,N=T,H=O,D=0;D<80;D++){var j=sum32(rotl32(sum32_4(E,f$3(D,A,P,T),_[r$3[D]+x],K(D)),s$2[D]),O);E=O,O=T,T=rotl32(P,10),P=A,A=j,j=sum32(rotl32(sum32_4(k,f$3(79-D,C,U,N),_[rh[D]+x],Kh(D)),sh[D]),H),k=H,H=N,N=rotl32(U,10),U=C,C=j}j=sum32_3(this.h[1],P,N),this.h[1]=sum32_3(this.h[2],T,H),this.h[2]=sum32_3(this.h[3],O,k),this.h[3]=sum32_3(this.h[4],E,C),this.h[4]=sum32_3(this.h[0],A,U),this.h[0]=j},RIPEMD160$3.prototype._digest=function(_){return _==="hex"?utils$r.toHex32(this.h,"little"):utils$r.split32(this.h,"little")};function f$3(v,_,x,E){return v<=15?_^x^E:v<=31?_&x|~_&E:v<=47?(_|~x)^E:v<=63?_&E|x&~E:_^(x|~E)}function K(v){return v<=15?0:v<=31?1518500249:v<=47?1859775393:v<=63?2400959708:2840853838}function Kh(v){return v<=15?1352829926:v<=31?1548603684:v<=47?1836072691:v<=63?2053994217:0}var r$3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$q=utils$z,assert$m=minimalisticAssert;function Hmac$3(v,_,x){if(!(this instanceof Hmac$3))return new Hmac$3(v,_,x);this.Hash=v,this.blockSize=v.blockSize/8,this.outSize=v.outSize/8,this.inner=null,this.outer=null,this._init(utils$q.toArray(_,x))}var hmac=Hmac$3;Hmac$3.prototype._init=function(_){_.length>this.blockSize&&(_=new this.Hash().update(_).digest()),assert$m(_.length<=this.blockSize);for(var x=_.length;x<this.blockSize;x++)_.push(0);for(x=0;x<_.length;x++)_[x]^=54;for(this.inner=new this.Hash().update(_),x=0;x<_.length;x++)_[x]^=106;this.outer=new this.Hash().update(_)},Hmac$3.prototype.update=function(_,x){return this.inner.update(_,x),this},Hmac$3.prototype.digest=function(_){return this.outer.update(this.inner.digest()),this.outer.digest(_)},function(v){var _=v;_.utils=utils$z,_.common=common$7,_.sha=sha$2,_.ripemd=ripemd,_.hmac=hmac,_.sha1=_.sha.sha1,_.sha256=_.sha.sha256,_.sha224=_.sha.sha224,_.sha384=_.sha.sha384,_.sha512=_.sha.sha512,_.ripemd160=_.ripemd.ripemd160}(hash$4);var secp256k1$5,hasRequiredSecp256k1$2;function requireSecp256k1$2(){return hasRequiredSecp256k1$2||(hasRequiredSecp256k1$2=1,secp256k1$5={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$5}(function(v){var _=v,x=hash$4,E=curve$4,A=utils$F,P=A.assert;function T(C){C.type==="short"?this.curve=new E.short(C):C.type==="edwards"?this.curve=new E.edwards(C):this.curve=new E.mont(C),this.g=this.curve.g,this.n=this.curve.n,this.hash=C.hash,P(this.g.validate(),"Invalid curve"),P(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}_.PresetCurve=T;function O(C,U){Object.defineProperty(_,C,{configurable:!0,enumerable:!0,get:function(){var N=new T(U);return Object.defineProperty(_,C,{configurable:!0,enumerable:!0,value:N}),N}})}O("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:x.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),O("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:x.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),O("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:x.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),O("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:x.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),O("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:x.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),O("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["9"]}),O("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var k;try{k=requireSecp256k1$2()}catch{k=void 0}O("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:x.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",k]})})(curves$5);var hash$3=hash$4,utils$p=utils$E,assert$l=minimalisticAssert;function HmacDRBG$1(v){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(v);this.hash=v.hash,this.predResist=!!v.predResist,this.outLen=this.hash.outSize,this.minEntropy=v.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var _=utils$p.toArray(v.entropy,v.entropyEnc||"hex"),x=utils$p.toArray(v.nonce,v.nonceEnc||"hex"),E=utils$p.toArray(v.pers,v.persEnc||"hex");assert$l(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(_,x,E)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function(_,x,E){var A=_.concat(x).concat(E);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var P=0;P<this.V.length;P++)this.K[P]=0,this.V[P]=1;this._update(A),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG$1.prototype._hmac=function(){return new hash$3.hmac(this.hash,this.K)},HmacDRBG$1.prototype._update=function(_){var x=this._hmac().update(this.V).update([0]);_&&(x=x.update(_)),this.K=x.digest(),this.V=this._hmac().update(this.V).digest(),_&&(this.K=this._hmac().update(this.V).update([1]).update(_).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG$1.prototype.reseed=function(_,x,E,A){typeof x!="string"&&(A=E,E=x,x=null),_=utils$p.toArray(_,x),E=utils$p.toArray(E,A),assert$l(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(_.concat(E||[])),this._reseed=1},HmacDRBG$1.prototype.generate=function(_,x,E,A){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof x!="string"&&(A=E,E=x,x=null),E&&(E=utils$p.toArray(E,A||"hex"),this._update(E));for(var P=[];P.length<_;)this.V=this._hmac().update(this.V).digest(),P=P.concat(this.V);var T=P.slice(0,_);return this._update(E),this._reseed++,utils$p.encode(T,x)};var brorand={exports:{}},cryptoBrowserify={},inherits$j=inherits_browserExports,Buffer$u=safeBufferExports.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$u.alloc(128),blocksize=64;function Hmac$2(v,_){Base$4.call(this,"digest"),typeof _=="string"&&(_=Buffer$u.from(_)),this._alg=v,this._key=_,_.length>blocksize?_=v(_):_.length<blocksize&&(_=Buffer$u.concat([_,ZEROS$2],blocksize));for(var x=this._ipad=Buffer$u.allocUnsafe(blocksize),E=this._opad=Buffer$u.allocUnsafe(blocksize),A=0;A<blocksize;A++)x[A]=_[A]^54,E[A]=_[A]^92;this._hash=[x]}inherits$j(Hmac$2,Base$4),Hmac$2.prototype._update=function(v){this._hash.push(v)},Hmac$2.prototype._final=function(){var v=this._alg(Buffer$u.concat(this._hash));return this._alg(Buffer$u.concat([this._opad,v]))};var legacy=Hmac$2,MD5$1=md5_js,md5$2=function(v){return new MD5$1().update(v).digest()},inherits$i=inherits_browserExports,Legacy=legacy,Base$3=cipherBase,Buffer$t=safeBufferExports.Buffer,md5$1=md5$2,RIPEMD160$2=ripemd160$3,sha$1=sha_jsExports,ZEROS$1=Buffer$t.alloc(128);function Hmac$1(v,_){Base$3.call(this,"digest"),typeof _=="string"&&(_=Buffer$t.from(_));var x=v==="sha512"||v==="sha384"?128:64;if(this._alg=v,this._key=_,_.length>x){var E=v==="rmd160"?new RIPEMD160$2:sha$1(v);_=E.update(_).digest()}else _.length<x&&(_=Buffer$t.concat([_,ZEROS$1],x));for(var A=this._ipad=Buffer$t.allocUnsafe(x),P=this._opad=Buffer$t.allocUnsafe(x),T=0;T<x;T++)A[T]=_[T]^54,P[T]=_[T]^92;this._hash=v==="rmd160"?new RIPEMD160$2:sha$1(v),this._hash.update(A)}inherits$i(Hmac$1,Base$3),Hmac$1.prototype._update=function(v){this._hash.update(v)},Hmac$1.prototype._final=function(){var v=this._hash.digest(),_=this._alg==="rmd160"?new RIPEMD160$2:sha$1(this._alg);return _.update(this._opad).update(v).digest()};var browser$9=function(_,x){return _=_.toLowerCase(),_==="rmd160"||_==="ripemd160"?new Hmac$1("rmd160",x):_==="md5"?new Legacy(md5$1,x):new Hmac$1(_,x)};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$3={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$3,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos=require$$6,browser$8={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(v,_){if(typeof v!="number")throw new TypeError("Iterations not a number");if(v<0)throw new TypeError("Bad iterations");if(typeof _!="number")throw new TypeError("Key length not a number");if(_<0||_>MAX_ALLOC||_!==_)throw new TypeError("Bad key length")},defaultEncoding$2;if(commonjsGlobal.process&&commonjsGlobal.process.browser)defaultEncoding$2="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var pVersionMajor=parseInt(dist$4.process.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$s=safeBufferExports.Buffer,toBuffer$4=function(v,_,x){if(Buffer$s.isBuffer(v))return v;if(typeof v=="string")return Buffer$s.from(v,_);if(ArrayBuffer.isView(v))return Buffer$s.from(v.buffer);throw new TypeError(x+" must be a string, a Buffer, a typed array or a DataView")},md5=md5$2,RIPEMD160$1=ripemd160$3,sha=sha_jsExports,Buffer$r=safeBufferExports.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$3=toBuffer$4,ZEROS=Buffer$r.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(v,_,x){var E=getDigest(v),A=v==="sha512"||v==="sha384"?128:64;_.length>A?_=E(_):_.length<A&&(_=Buffer$r.concat([_,ZEROS],A));for(var P=Buffer$r.allocUnsafe(A+sizes[v]),T=Buffer$r.allocUnsafe(A+sizes[v]),O=0;O<A;O++)P[O]=_[O]^54,T[O]=_[O]^92;var k=Buffer$r.allocUnsafe(A+x+4);P.copy(k,0,0,A),this.ipad1=k,this.ipad2=P,this.opad=T,this.alg=v,this.blocksize=A,this.hash=E,this.size=sizes[v]}Hmac.prototype.run=function(v,_){v.copy(_,this.blocksize);var x=this.hash(_);return x.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(v){function _(E){return sha(v).update(E).digest()}function x(E){return new RIPEMD160$1().update(E).digest()}return v==="rmd160"||v==="ripemd160"?x:v==="md5"?md5:_}function pbkdf2(v,_,x,E,A){checkParameters$1(x,E),v=toBuffer$3(v,defaultEncoding$1,"Password"),_=toBuffer$3(_,defaultEncoding$1,"Salt"),A=A||"sha1";var P=new Hmac(A,v,_.length),T=Buffer$r.allocUnsafe(E),O=Buffer$r.allocUnsafe(_.length+4);_.copy(O,0,0,_.length);for(var k=0,C=sizes[A],U=Math.ceil(E/C),N=1;N<=U;N++){O.writeUInt32BE(N,_.length);for(var H=P.run(O,P.ipad1),D=H,j=1;j<x;j++){D=P.run(D,P.ipad2);for(var V=0;V<C;V++)H[V]^=D[V]}H.copy(T,k),k+=C}return T}var syncBrowser=pbkdf2,Buffer$q=safeBufferExports.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync=syncBrowser,toBuffer$2=toBuffer$4,ZERO_BUF,subtle=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(v){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[v]!==void 0)return checks[v];ZERO_BUF=ZERO_BUF||Buffer$q.alloc(8);var _=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,v).then(function(){return!0}).catch(function(){return!1});return checks[v]=_,_}var nextTick;function getNextTick(){return nextTick||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?nextTick=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?nextTick=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?nextTick=commonjsGlobal.setImmediate:nextTick=commonjsGlobal.setTimeout,nextTick)}function browserPbkdf2(v,_,x,E,A){return subtle.importKey("raw",v,{name:"PBKDF2"},!1,["deriveBits"]).then(function(P){return subtle.deriveBits({name:"PBKDF2",salt:_,iterations:x,hash:{name:A}},P,E<<3)}).then(function(P){return Buffer$q.from(P)})}function resolvePromise(v,_){v.then(function(x){getNextTick()(function(){_(null,x)})},function(x){getNextTick()(function(){_(x)})})}var async=function(v,_,x,E,A,P){typeof A=="function"&&(P=A,A=void 0),A=A||"sha1";var T=toBrowser[A.toLowerCase()];if(!T||typeof commonjsGlobal.Promise!="function"){getNextTick()(function(){var O;try{O=sync(v,_,x,E,A)}catch(k){return P(k)}P(null,O)});return}if(checkParameters(x,E),v=toBuffer$2(v,defaultEncoding,"Password"),_=toBuffer$2(_,defaultEncoding,"Salt"),typeof P!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(T).then(function(O){return O?browserPbkdf2(v,_,x,E,T):sync(v,_,x,E,A)}),P)};browser$8.pbkdf2=async,browser$8.pbkdf2Sync=syncBrowser;var browser$7={},des$2={},utils$o={};utils$o.readUInt32BE=function(_,x){var E=_[0+x]<<24|_[1+x]<<16|_[2+x]<<8|_[3+x];return E>>>0},utils$o.writeUInt32BE=function(_,x,E){_[0+E]=x>>>24,_[1+E]=x>>>16&255,_[2+E]=x>>>8&255,_[3+E]=x&255},utils$o.ip=function(_,x,E,A){for(var P=0,T=0,O=6;O>=0;O-=2){for(var k=0;k<=24;k+=8)P<<=1,P|=x>>>k+O&1;for(var k=0;k<=24;k+=8)P<<=1,P|=_>>>k+O&1}for(var O=6;O>=0;O-=2){for(var k=1;k<=25;k+=8)T<<=1,T|=x>>>k+O&1;for(var k=1;k<=25;k+=8)T<<=1,T|=_>>>k+O&1}E[A+0]=P>>>0,E[A+1]=T>>>0},utils$o.rip=function(_,x,E,A){for(var P=0,T=0,O=0;O<4;O++)for(var k=24;k>=0;k-=8)P<<=1,P|=x>>>k+O&1,P<<=1,P|=_>>>k+O&1;for(var O=4;O<8;O++)for(var k=24;k>=0;k-=8)T<<=1,T|=x>>>k+O&1,T<<=1,T|=_>>>k+O&1;E[A+0]=P>>>0,E[A+1]=T>>>0},utils$o.pc1=function(_,x,E,A){for(var P=0,T=0,O=7;O>=5;O--){for(var k=0;k<=24;k+=8)P<<=1,P|=x>>k+O&1;for(var k=0;k<=24;k+=8)P<<=1,P|=_>>k+O&1}for(var k=0;k<=24;k+=8)P<<=1,P|=x>>k+O&1;for(var O=1;O<=3;O++){for(var k=0;k<=24;k+=8)T<<=1,T|=x>>k+O&1;for(var k=0;k<=24;k+=8)T<<=1,T|=_>>k+O&1}for(var k=0;k<=24;k+=8)T<<=1,T|=_>>k+O&1;E[A+0]=P>>>0,E[A+1]=T>>>0},utils$o.r28shl=function(_,x){return _<<x&268435455|_>>>28-x};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$o.pc2=function(_,x,E,A){for(var P=0,T=0,O=pc2table.length>>>1,k=0;k<O;k++)P<<=1,P|=_>>>pc2table[k]&1;for(var k=O;k<pc2table.length;k++)T<<=1,T|=x>>>pc2table[k]&1;E[A+0]=P>>>0,E[A+1]=T>>>0},utils$o.expand=function(_,x,E){var A=0,P=0;A=(_&1)<<5|_>>>27;for(var T=23;T>=15;T-=4)A<<=6,A|=_>>>T&63;for(var T=11;T>=3;T-=4)P|=_>>>T&63,P<<=6;P|=(_&31)<<1|_>>>31,x[E+0]=A>>>0,x[E+1]=P>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$o.substitute=function(_,x){for(var E=0,A=0;A<4;A++){var P=_>>>18-A*6&63,T=sTable[A*64+P];E<<=4,E|=T}for(var A=0;A<4;A++){var P=x>>>18-A*6&63,T=sTable[4*64+A*64+P];E<<=4,E|=T}return E>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$o.permute=function(_){for(var x=0,E=0;E<permuteTable.length;E++)x<<=1,x|=_>>>permuteTable[E]&1;return x>>>0},utils$o.padSplit=function(_,x,E){for(var A=_.toString(2);A.length<x;)A="0"+A;for(var P=[],T=0;T<x;T+=E)P.push(A.slice(T,T+E));return P.join(" ")};var assert$k=minimalisticAssert;function Cipher$3(v){this.options=v,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=v.padding!==!1}var cipher=Cipher$3;Cipher$3.prototype._init=function(){},Cipher$3.prototype.update=function(_){return _.length===0?[]:this.type==="decrypt"?this._updateDecrypt(_):this._updateEncrypt(_)},Cipher$3.prototype._buffer=function(_,x){for(var E=Math.min(this.buffer.length-this.bufferOff,_.length-x),A=0;A<E;A++)this.buffer[this.bufferOff+A]=_[x+A];return this.bufferOff+=E,E},Cipher$3.prototype._flushBuffer=function(_,x){return this._update(this.buffer,0,_,x),this.bufferOff=0,this.blockSize},Cipher$3.prototype._updateEncrypt=function(_){var x=0,E=0,A=(this.bufferOff+_.length)/this.blockSize|0,P=new Array(A*this.blockSize);this.bufferOff!==0&&(x+=this._buffer(_,x),this.bufferOff===this.buffer.length&&(E+=this._flushBuffer(P,E)));for(var T=_.length-(_.length-x)%this.blockSize;x<T;x+=this.blockSize)this._update(_,x,P,E),E+=this.blockSize;for(;x<_.length;x++,this.bufferOff++)this.buffer[this.bufferOff]=_[x];return P},Cipher$3.prototype._updateDecrypt=function(_){for(var x=0,E=0,A=Math.ceil((this.bufferOff+_.length)/this.blockSize)-1,P=new Array(A*this.blockSize);A>0;A--)x+=this._buffer(_,x),E+=this._flushBuffer(P,E);return x+=this._buffer(_,x),P},Cipher$3.prototype.final=function(_){var x;_&&(x=this.update(_));var E;return this.type==="encrypt"?E=this._finalEncrypt():E=this._finalDecrypt(),x?x.concat(E):E},Cipher$3.prototype._pad=function(_,x){if(x===0)return!1;for(;x<_.length;)_[x++]=0;return!0},Cipher$3.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var _=new Array(this.blockSize);return this._update(this.buffer,0,_,0),_},Cipher$3.prototype._unpad=function(_){return _},Cipher$3.prototype._finalDecrypt=function(){assert$k.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var _=new Array(this.blockSize);return this._flushBuffer(_,0),this._unpad(_)};var assert$j=minimalisticAssert,inherits$h=inherits_browserExports,utils$n=utils$o,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(v){Cipher$2.call(this,v);var _=new DESState;this._desState=_,this.deriveKeys(_,v.key)}inherits$h(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function(_){return new DES$3(_)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function(_,x){_.keys=new Array(16*2),assert$j.equal(x.length,this.blockSize,"Invalid key length");var E=utils$n.readUInt32BE(x,0),A=utils$n.readUInt32BE(x,4);utils$n.pc1(E,A,_.tmp,0),E=_.tmp[0],A=_.tmp[1];for(var P=0;P<_.keys.length;P+=2){var T=shiftTable[P>>>1];E=utils$n.r28shl(E,T),A=utils$n.r28shl(A,T),utils$n.pc2(E,A,_.keys,P)}},DES$3.prototype._update=function(_,x,E,A){var P=this._desState,T=utils$n.readUInt32BE(_,x),O=utils$n.readUInt32BE(_,x+4);utils$n.ip(T,O,P.tmp,0),T=P.tmp[0],O=P.tmp[1],this.type==="encrypt"?this._encrypt(P,T,O,P.tmp,0):this._decrypt(P,T,O,P.tmp,0),T=P.tmp[0],O=P.tmp[1],utils$n.writeUInt32BE(E,T,A),utils$n.writeUInt32BE(E,O,A+4)},DES$3.prototype._pad=function(_,x){if(this.padding===!1)return!1;for(var E=_.length-x,A=x;A<_.length;A++)_[A]=E;return!0},DES$3.prototype._unpad=function(_){if(this.padding===!1)return _;for(var x=_[_.length-1],E=_.length-x;E<_.length;E++)assert$j.equal(_[E],x);return _.slice(0,_.length-x)},DES$3.prototype._encrypt=function(_,x,E,A,P){for(var T=x,O=E,k=0;k<_.keys.length;k+=2){var C=_.keys[k],U=_.keys[k+1];utils$n.expand(O,_.tmp,0),C^=_.tmp[0],U^=_.tmp[1];var N=utils$n.substitute(C,U),H=utils$n.permute(N),D=O;O=(T^H)>>>0,T=D}utils$n.rip(O,T,A,P)},DES$3.prototype._decrypt=function(_,x,E,A,P){for(var T=E,O=x,k=_.keys.length-2;k>=0;k-=2){var C=_.keys[k],U=_.keys[k+1];utils$n.expand(T,_.tmp,0),C^=_.tmp[0],U^=_.tmp[1];var N=utils$n.substitute(C,U),H=utils$n.permute(N),D=T;T=(O^H)>>>0,O=D}utils$n.rip(T,O,A,P)};var cbc$1={},assert$i=minimalisticAssert,inherits$g=inherits_browserExports,proto={};function CBCState(v){assert$i.equal(v.length,8,"Invalid IV length"),this.iv=new Array(8);for(var _=0;_<this.iv.length;_++)this.iv[_]=v[_]}function instantiate(v){function _(P){v.call(this,P),this._cbcInit()}inherits$g(_,v);for(var x=Object.keys(proto),E=0;E<x.length;E++){var A=x[E];_.prototype[A]=proto[A]}return _.create=function(T){return new _(T)},_}cbc$1.instantiate=instantiate,proto._cbcInit=function(){var _=new CBCState(this.options.iv);this._cbcState=_},proto._update=function(_,x,E,A){var P=this._cbcState,T=this.constructor.super_.prototype,O=P.iv;if(this.type==="encrypt"){for(var k=0;k<this.blockSize;k++)O[k]^=_[x+k];T._update.call(this,O,0,E,A);for(var k=0;k<this.blockSize;k++)O[k]=E[A+k]}else{T._update.call(this,_,x,E,A);for(var k=0;k<this.blockSize;k++)E[A+k]^=O[k];for(var k=0;k<this.blockSize;k++)O[k]=_[x+k]}};var assert$h=minimalisticAssert,inherits$f=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(v,_){assert$h.equal(_.length,24,"Invalid key length");var x=_.slice(0,8),E=_.slice(8,16),A=_.slice(16,24);v==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:x}),DES$2.create({type:"decrypt",key:E}),DES$2.create({type:"encrypt",key:A})]:this.ciphers=[DES$2.create({type:"decrypt",key:A}),DES$2.create({type:"encrypt",key:E}),DES$2.create({type:"decrypt",key:x})]}function EDE(v){Cipher$1.call(this,v);var _=new EDEState(this.type,this.options.key);this._edeState=_}inherits$f(EDE,Cipher$1);var ede=EDE;EDE.create=function(_){return new EDE(_)},EDE.prototype._update=function(_,x,E,A){var P=this._edeState;P.ciphers[0]._update(_,x,E,A),P.ciphers[1]._update(E,A,E,A),P.ciphers[2]._update(E,A,E,A)},EDE.prototype._pad=DES$2.prototype._pad,EDE.prototype._unpad=DES$2.prototype._unpad,des$2.utils=utils$o,des$2.Cipher=cipher,des$2.DES=des$1,des$2.CBC=cbc$1,des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$e=inherits_browserExports,Buffer$p=safeBufferExports.Buffer,modes$3={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$3.des=modes$3["des-cbc"],modes$3.des3=modes$3["des-ede3-cbc"];var browserifyDes=DES$1;inherits$e(DES$1,CipherBase);function DES$1(v){CipherBase.call(this);var _=v.mode.toLowerCase(),x=modes$3[_],E;v.decrypt?E="decrypt":E="encrypt";var A=v.key;Buffer$p.isBuffer(A)||(A=Buffer$p.from(A)),(_==="des-ede"||_==="des-ede-cbc")&&(A=Buffer$p.concat([A,A.slice(0,8)]));var P=v.iv;Buffer$p.isBuffer(P)||(P=Buffer$p.from(P)),this._des=x.create({key:A,iv:P,type:E})}DES$1.prototype._update=function(v){return Buffer$p.from(this._des.update(v))},DES$1.prototype._final=function(){return Buffer$p.from(this._des.final())};var browser$6={},encrypter={},ecb={};ecb.encrypt=function(v,_){return v._cipher.encryptBlock(_)},ecb.decrypt=function(v,_){return v._cipher.decryptBlock(_)};var cbc={},bufferXor=function(_,x){for(var E=Math.min(_.length,x.length),A=new dist$4.Buffer(E),P=0;P<E;++P)A[P]=_[P]^x[P];return A},xor$7=bufferXor;cbc.encrypt=function(v,_){var x=xor$7(_,v._prev);return v._prev=v._cipher.encryptBlock(x),v._prev},cbc.decrypt=function(v,_){var x=v._prev;v._prev=_;var E=v._cipher.decryptBlock(_);return xor$7(E,x)};var cfb={},Buffer$o=safeBufferExports.Buffer,xor$6=bufferXor;function encryptStart(v,_,x){var E=_.length,A=xor$6(_,v._cache);return v._cache=v._cache.slice(E),v._prev=Buffer$o.concat([v._prev,x?_:A]),A}cfb.encrypt=function(v,_,x){for(var E=Buffer$o.allocUnsafe(0),A;_.length;)if(v._cache.length===0&&(v._cache=v._cipher.encryptBlock(v._prev),v._prev=Buffer$o.allocUnsafe(0)),v._cache.length<=_.length)A=v._cache.length,E=Buffer$o.concat([E,encryptStart(v,_.slice(0,A),x)]),_=_.slice(A);else{E=Buffer$o.concat([E,encryptStart(v,_,x)]);break}return E};var cfb8={},Buffer$n=safeBufferExports.Buffer;function encryptByte$1(v,_,x){var E=v._cipher.encryptBlock(v._prev),A=E[0]^_;return v._prev=Buffer$n.concat([v._prev.slice(1),Buffer$n.from([x?_:A])]),A}cfb8.encrypt=function(v,_,x){for(var E=_.length,A=Buffer$n.allocUnsafe(E),P=-1;++P<E;)A[P]=encryptByte$1(v,_[P],x);return A};var cfb1={},Buffer$m=safeBufferExports.Buffer;function encryptByte(v,_,x){for(var E,A=-1,P=8,T=0,O,k;++A<P;)E=v._cipher.encryptBlock(v._prev),O=_&1<<7-A?128:0,k=E[0]^O,T+=(k&128)>>A%8,v._prev=shiftIn(v._prev,x?O:k);return T}function shiftIn(v,_){var x=v.length,E=-1,A=Buffer$m.allocUnsafe(v.length);for(v=Buffer$m.concat([v,Buffer$m.from([_])]);++E<x;)A[E]=v[E]<<1|v[E+1]>>7;return A}cfb1.encrypt=function(v,_,x){for(var E=_.length,A=Buffer$m.allocUnsafe(E),P=-1;++P<E;)A[P]=encryptByte(v,_[P],x);return A};var ofb={},xor$5=bufferXor;function getBlock$1(v){return v._prev=v._cipher.encryptBlock(v._prev),v._prev}ofb.encrypt=function(v,_){for(;v._cache.length<_.length;)v._cache=dist$4.Buffer.concat([v._cache,getBlock$1(v)]);var x=v._cache.slice(0,_.length);return v._cache=v._cache.slice(_.length),xor$5(_,x)};var ctr={};function incr32$2(v){for(var _=v.length,x;_--;)if(x=v.readUInt8(_),x===255)v.writeUInt8(0,_);else{x++,v.writeUInt8(x,_);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$l=safeBufferExports.Buffer,incr32$1=incr32_1;function getBlock(v){var _=v._cipher.encryptBlockRaw(v._prev);return incr32$1(v._prev),_}var blockSize=16;ctr.encrypt=function(v,_){var x=Math.ceil(_.length/blockSize),E=v._cache.length;v._cache=Buffer$l.concat([v._cache,Buffer$l.allocUnsafe(x*blockSize)]);for(var A=0;A<x;A++){var P=getBlock(v),T=E+A*blockSize;v._cache.writeUInt32BE(P[0],T+0),v._cache.writeUInt32BE(P[1],T+4),v._cache.writeUInt32BE(P[2],T+8),v._cache.writeUInt32BE(P[3],T+12)}var O=v._cache.slice(0,_.length);return v._cache=v._cache.slice(_.length),xor$4(_,O)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$2=require$$2;for(var key$5 in modes$2)modes$2[key$5].module=modeModules[modes$2[key$5].mode];var modes_1=modes$2,aes$5={},Buffer$k=safeBufferExports.Buffer;function asUInt32Array(v){Buffer$k.isBuffer(v)||(v=Buffer$k.from(v));for(var _=v.length/4|0,x=new Array(_),E=0;E<_;E++)x[E]=v.readUInt32BE(E*4);return x}function scrubVec(v){for(var _=0;_<v.length;v++)v[_]=0}function cryptBlock(v,_,x,E,A){for(var P=x[0],T=x[1],O=x[2],k=x[3],C=v[0]^_[0],U=v[1]^_[1],N=v[2]^_[2],H=v[3]^_[3],D,j,V,X,re=4,ee=1;ee<A;ee++)D=P[C>>>24]^T[U>>>16&255]^O[N>>>8&255]^k[H&255]^_[re++],j=P[U>>>24]^T[N>>>16&255]^O[H>>>8&255]^k[C&255]^_[re++],V=P[N>>>24]^T[H>>>16&255]^O[C>>>8&255]^k[U&255]^_[re++],X=P[H>>>24]^T[C>>>16&255]^O[U>>>8&255]^k[N&255]^_[re++],C=D,U=j,N=V,H=X;return D=(E[C>>>24]<<24|E[U>>>16&255]<<16|E[N>>>8&255]<<8|E[H&255])^_[re++],j=(E[U>>>24]<<24|E[N>>>16&255]<<16|E[H>>>8&255]<<8|E[C&255])^_[re++],V=(E[N>>>24]<<24|E[H>>>16&255]<<16|E[C>>>8&255]<<8|E[U&255])^_[re++],X=(E[H>>>24]<<24|E[C>>>16&255]<<16|E[U>>>8&255]<<8|E[N&255])^_[re++],D=D>>>0,j=j>>>0,V=V>>>0,X=X>>>0,[D,j,V,X]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var v=new Array(256),_=0;_<256;_++)_<128?v[_]=_<<1:v[_]=_<<1^283;for(var x=[],E=[],A=[[],[],[],[]],P=[[],[],[],[]],T=0,O=0,k=0;k<256;++k){var C=O^O<<1^O<<2^O<<3^O<<4;C=C>>>8^C&255^99,x[T]=C,E[C]=T;var U=v[T],N=v[U],H=v[N],D=v[C]*257^C*16843008;A[0][T]=D<<24|D>>>8,A[1][T]=D<<16|D>>>16,A[2][T]=D<<8|D>>>24,A[3][T]=D,D=H*16843009^N*65537^U*257^T*16843008,P[0][C]=D<<24|D>>>8,P[1][C]=D<<16|D>>>16,P[2][C]=D<<8|D>>>24,P[3][C]=D,T===0?T=O=1:(T=U^v[v[v[H^U]]],O^=v[v[O]])}return{SBOX:x,INV_SBOX:E,SUB_MIX:A,INV_SUB_MIX:P}}();function AES(v){this._key=asUInt32Array(v),this._reset()}AES.blockSize=4*4,AES.keySize=256/8,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){for(var v=this._key,_=v.length,x=_+6,E=(x+1)*4,A=[],P=0;P<_;P++)A[P]=v[P];for(P=_;P<E;P++){var T=A[P-1];P%_===0?(T=T<<8|T>>>24,T=G.SBOX[T>>>24]<<24|G.SBOX[T>>>16&255]<<16|G.SBOX[T>>>8&255]<<8|G.SBOX[T&255],T^=RCON[P/_|0]<<24):_>6&&P%_===4&&(T=G.SBOX[T>>>24]<<24|G.SBOX[T>>>16&255]<<16|G.SBOX[T>>>8&255]<<8|G.SBOX[T&255]),A[P]=A[P-_]^T}for(var O=[],k=0;k<E;k++){var C=E-k,U=A[C-(k%4?0:4)];k<4||C<=4?O[k]=U:O[k]=G.INV_SUB_MIX[0][G.SBOX[U>>>24]]^G.INV_SUB_MIX[1][G.SBOX[U>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[U>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[U&255]]}this._nRounds=x,this._keySchedule=A,this._invKeySchedule=O},AES.prototype.encryptBlockRaw=function(v){return v=asUInt32Array(v),cryptBlock(v,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(v){var _=this.encryptBlockRaw(v),x=Buffer$k.allocUnsafe(16);return x.writeUInt32BE(_[0],0),x.writeUInt32BE(_[1],4),x.writeUInt32BE(_[2],8),x.writeUInt32BE(_[3],12),x},AES.prototype.decryptBlock=function(v){v=asUInt32Array(v);var _=v[1];v[1]=v[3],v[3]=_;var x=cryptBlock(v,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),E=Buffer$k.allocUnsafe(16);return E.writeUInt32BE(x[0],0),E.writeUInt32BE(x[3],4),E.writeUInt32BE(x[2],8),E.writeUInt32BE(x[1],12),E},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},aes$5.AES=AES;var Buffer$j=safeBufferExports.Buffer,ZEROES=Buffer$j.alloc(16,0);function toArray$1(v){return[v.readUInt32BE(0),v.readUInt32BE(4),v.readUInt32BE(8),v.readUInt32BE(12)]}function fromArray(v){var _=Buffer$j.allocUnsafe(16);return _.writeUInt32BE(v[0]>>>0,0),_.writeUInt32BE(v[1]>>>0,4),_.writeUInt32BE(v[2]>>>0,8),_.writeUInt32BE(v[3]>>>0,12),_}function GHASH$1(v){this.h=v,this.state=Buffer$j.alloc(16,0),this.cache=Buffer$j.allocUnsafe(0)}GHASH$1.prototype.ghash=function(v){for(var _=-1;++_<v.length;)this.state[_]^=v[_];this._multiply()},GHASH$1.prototype._multiply=function(){for(var v=toArray$1(this.h),_=[0,0,0,0],x,E,A,P=-1;++P<128;){for(E=(this.state[~~(P/8)]&1<<7-P%8)!==0,E&&(_[0]^=v[0],_[1]^=v[1],_[2]^=v[2],_[3]^=v[3]),A=(v[3]&1)!==0,x=3;x>0;x--)v[x]=v[x]>>>1|(v[x-1]&1)<<31;v[0]=v[0]>>>1,A&&(v[0]=v[0]^225<<24)}this.state=fromArray(_)},GHASH$1.prototype.update=function(v){this.cache=Buffer$j.concat([this.cache,v]);for(var _;this.cache.length>=16;)_=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(_)},GHASH$1.prototype.final=function(v,_){return this.cache.length&&this.ghash(Buffer$j.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,v,0,_])),this.state};var ghash=GHASH$1,aes$4=aes$5,Buffer$i=safeBufferExports.Buffer,Transform$3=cipherBase,inherits$d=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(v,_){var x=0;v.length!==_.length&&x++;for(var E=Math.min(v.length,_.length),A=0;A<E;++A)x+=v[A]^_[A];return x}function calcIv(v,_,x){if(_.length===12)return v._finID=Buffer$i.concat([_,Buffer$i.from([0,0,0,1])]),Buffer$i.concat([_,Buffer$i.from([0,0,0,2])]);var E=new GHASH(x),A=_.length,P=A%16;E.update(_),P&&(P=16-P,E.update(Buffer$i.alloc(P,0))),E.update(Buffer$i.alloc(8,0));var T=A*8,O=Buffer$i.alloc(8);O.writeUIntBE(T,0,8),E.update(O),v._finID=E.state;var k=Buffer$i.from(v._finID);return incr32(k),k}function StreamCipher$3(v,_,x,E){Transform$3.call(this);var A=Buffer$i.alloc(4,0);this._cipher=new aes$4.AES(_);var P=this._cipher.encryptBlock(A);this._ghash=new GHASH(P),x=calcIv(this,x,P),this._prev=Buffer$i.from(x),this._cache=Buffer$i.allocUnsafe(0),this._secCache=Buffer$i.allocUnsafe(0),this._decrypt=E,this._alen=0,this._len=0,this._mode=v,this._authTag=null,this._called=!1}inherits$d(StreamCipher$3,Transform$3),StreamCipher$3.prototype._update=function(v){if(!this._called&&this._alen){var _=16-this._alen%16;_<16&&(_=Buffer$i.alloc(_,0),this._ghash.update(_))}this._called=!0;var x=this._mode.encrypt(this,v);return this._decrypt?this._ghash.update(v):this._ghash.update(x),this._len+=v.length,x},StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var v=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(v,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=v,this._cipher.scrub()},StreamCipher$3.prototype.getAuthTag=function(){if(this._decrypt||!Buffer$i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},StreamCipher$3.prototype.setAuthTag=function(_){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=_},StreamCipher$3.prototype.setAAD=function(_){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(_),this._alen+=_.length};var authCipher=StreamCipher$3,aes$3=aes$5,Buffer$h=safeBufferExports.Buffer,Transform$2=cipherBase,inherits$c=inherits_browserExports;function StreamCipher$2(v,_,x,E){Transform$2.call(this),this._cipher=new aes$3.AES(_),this._prev=Buffer$h.from(x),this._cache=Buffer$h.allocUnsafe(0),this._secCache=Buffer$h.allocUnsafe(0),this._decrypt=E,this._mode=v}inherits$c(StreamCipher$2,Transform$2),StreamCipher$2.prototype._update=function(v){return this._mode.encrypt(this,v,this._decrypt)},StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$g=safeBufferExports.Buffer,MD5=md5_js;function EVP_BytesToKey(v,_,x,E){if(Buffer$g.isBuffer(v)||(v=Buffer$g.from(v,"binary")),_&&(Buffer$g.isBuffer(_)||(_=Buffer$g.from(_,"binary")),_.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var A=x/8,P=Buffer$g.alloc(A),T=Buffer$g.alloc(E||0),O=Buffer$g.alloc(0);A>0||E>0;){var k=new MD5;k.update(O),k.update(v),_&&k.update(_),O=k.digest();var C=0;if(A>0){var U=P.length-A;C=Math.min(A,O.length),O.copy(P,U,0,C),A-=C}if(C<O.length&&E>0){var N=T.length-E,H=Math.min(E,O.length-C);O.copy(T,N,C,C+H),E-=H}}return O.fill(0),{key:P,iv:T}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$f=safeBufferExports.Buffer,StreamCipher$1=streamCipher,Transform$1=cipherBase,aes$2=aes$5,ebtk$2=evp_bytestokey,inherits$b=inherits_browserExports;function Cipher(v,_,x){Transform$1.call(this),this._cache=new Splitter$1,this._cipher=new aes$2.AES(_),this._prev=Buffer$f.from(x),this._mode=v,this._autopadding=!0}inherits$b(Cipher,Transform$1),Cipher.prototype._update=function(v){this._cache.add(v);for(var _,x,E=[];_=this._cache.get();)x=this._mode.encrypt(this,_),E.push(x);return Buffer$f.concat(E)};var PADDING=Buffer$f.alloc(16,16);Cipher.prototype._final=function(){var v=this._cache.flush();if(this._autopadding)return v=this._mode.encrypt(this,v),this._cipher.scrub(),v;if(!v.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")},Cipher.prototype.setAutoPadding=function(v){return this._autopadding=!!v,this};function Splitter$1(){this.cache=Buffer$f.allocUnsafe(0)}Splitter$1.prototype.add=function(v){this.cache=Buffer$f.concat([this.cache,v])},Splitter$1.prototype.get=function(){if(this.cache.length>15){var v=this.cache.slice(0,16);return this.cache=this.cache.slice(16),v}return null},Splitter$1.prototype.flush=function(){for(var v=16-this.cache.length,_=Buffer$f.allocUnsafe(v),x=-1;++x<v;)_.writeUInt8(v,x);return Buffer$f.concat([this.cache,_])};function createCipheriv$1(v,_,x){var E=MODES$1[v.toLowerCase()];if(!E)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=Buffer$f.from(_)),_.length!==E.key/8)throw new TypeError("invalid key length "+_.length);if(typeof x=="string"&&(x=Buffer$f.from(x)),E.mode!=="GCM"&&x.length!==E.iv)throw new TypeError("invalid iv length "+x.length);return E.type==="stream"?new StreamCipher$1(E.module,_,x):E.type==="auth"?new AuthCipher$1(E.module,_,x):new Cipher(E.module,_,x)}function createCipher$1(v,_){var x=MODES$1[v.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var E=ebtk$2(_,!1,x.key,x.iv);return createCipheriv$1(v,E.key,E.iv)}encrypter.createCipheriv=createCipheriv$1,encrypter.createCipher=createCipher$1;var decrypter={},AuthCipher=authCipher,Buffer$e=safeBufferExports.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform=cipherBase,aes$1=aes$5,ebtk$1=evp_bytestokey,inherits$a=inherits_browserExports;function Decipher(v,_,x){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$1.AES(_),this._prev=Buffer$e.from(x),this._mode=v,this._autopadding=!0}inherits$a(Decipher,Transform),Decipher.prototype._update=function(v){this._cache.add(v);for(var _,x,E=[];_=this._cache.get(this._autopadding);)x=this._mode.decrypt(this,_),E.push(x);return Buffer$e.concat(E)},Decipher.prototype._final=function(){var v=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,v));if(v)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(v){return this._autopadding=!!v,this};function Splitter(){this.cache=Buffer$e.allocUnsafe(0)}Splitter.prototype.add=function(v){this.cache=Buffer$e.concat([this.cache,v])},Splitter.prototype.get=function(v){var _;if(v){if(this.cache.length>16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_}else if(this.cache.length>=16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_;return null},Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(v){var _=v[15];if(_<1||_>16)throw new Error("unable to decrypt data");for(var x=-1;++x<_;)if(v[x+(16-_)]!==_)throw new Error("unable to decrypt data");if(_!==16)return v.slice(0,16-_)}function createDecipheriv$1(v,_,x){var E=MODES[v.toLowerCase()];if(!E)throw new TypeError("invalid suite type");if(typeof x=="string"&&(x=Buffer$e.from(x)),E.mode!=="GCM"&&x.length!==E.iv)throw new TypeError("invalid iv length "+x.length);if(typeof _=="string"&&(_=Buffer$e.from(_)),_.length!==E.key/8)throw new TypeError("invalid key length "+_.length);return E.type==="stream"?new StreamCipher(E.module,_,x,!0):E.type==="auth"?new AuthCipher(E.module,_,x,!0):new Decipher(E.module,_,x)}function createDecipher$1(v,_){var x=MODES[v.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var E=ebtk$1(_,!1,x.key,x.iv);return createDecipheriv$1(v,E.key,E.iv)}decrypter.createDecipher=createDecipher$1,decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$1=require$$2;function getCiphers$1(){return Object.keys(modes$1)}browser$6.createCipher=browser$6.Cipher=ciphers$2.createCipher,browser$6.createCipheriv=browser$6.Cipheriv=ciphers$2.createCipheriv,browser$6.createDecipher=browser$6.Decipher=deciphers.createDecipher,browser$6.createDecipheriv=browser$6.Decipheriv=deciphers.createDecipheriv,browser$6.listCiphers=browser$6.getCiphers=getCiphers$1;var modes={};(function(v){v["des-ecb"]={key:8,iv:0},v["des-cbc"]=v.des={key:8,iv:8},v["des-ede3-cbc"]=v.des3={key:24,iv:8},v["des-ede3"]={key:24,iv:0},v["des-ede-cbc"]={key:16,iv:8},v["des-ede"]={key:16,iv:0}})(modes);var DES=browserifyDes,aes=browser$6,aesModes=modes_1,desModes=modes,ebtk=evp_bytestokey;function createCipher(v,_){v=v.toLowerCase();var x,E;if(aesModes[v])x=aesModes[v].key,E=aesModes[v].iv;else if(desModes[v])x=desModes[v].key*8,E=desModes[v].iv;else throw new TypeError("invalid suite type");var A=ebtk(_,!1,x,E);return createCipheriv(v,A.key,A.iv)}function createDecipher(v,_){v=v.toLowerCase();var x,E;if(aesModes[v])x=aesModes[v].key,E=aesModes[v].iv;else if(desModes[v])x=desModes[v].key*8,E=desModes[v].iv;else throw new TypeError("invalid suite type");var A=ebtk(_,!1,x,E);return createDecipheriv(v,A.key,A.iv)}function createCipheriv(v,_,x){if(v=v.toLowerCase(),aesModes[v])return aes.createCipheriv(v,_,x);if(desModes[v])return new DES({key:_,iv:x,mode:v});throw new TypeError("invalid suite type")}function createDecipheriv(v,_,x){if(v=v.toLowerCase(),aesModes[v])return aes.createDecipheriv(v,_,x);if(desModes[v])return new DES({key:_,iv:x,mode:v,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}browser$7.createCipher=browser$7.Cipher=createCipher,browser$7.createCipheriv=browser$7.Cipheriv=createCipheriv,browser$7.createDecipher=browser$7.Decipher=createDecipher,browser$7.createDecipheriv=browser$7.Decipheriv=createDecipheriv,browser$7.listCiphers=browser$7.getCiphers=getCiphers;var browser$5={},mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var v=bnExports$2,_=requireBrorand();function x(E){this.rand=E||new _.Rand}return mr=x,x.create=function(A){return new x(A)},x.prototype._randbelow=function(A){var P=A.bitLength(),T=Math.ceil(P/8);do var O=new v(this.rand.generate(T));while(O.cmp(A)>=0);return O},x.prototype._randrange=function(A,P){var T=P.sub(A);return A.add(this._randbelow(T))},x.prototype.test=function(A,P,T){var O=A.bitLength(),k=v.mont(A),C=new v(1).toRed(k);P||(P=Math.max(1,O/48|0));for(var U=A.subn(1),N=0;!U.testn(N);N++);for(var H=A.shrn(N),D=U.toRed(k),j=!0;P>0;P--){var V=this._randrange(new v(2),U);T&&T(V);var X=V.toRed(k).redPow(H);if(!(X.cmp(C)===0||X.cmp(D)===0)){for(var re=1;re<N;re++){if(X=X.redSqr(),X.cmp(C)===0)return!1;if(X.cmp(D)===0)break}if(re===N)return!1}}return j},x.prototype.getDivisor=function(A,P){var T=A.bitLength(),O=v.mont(A),k=new v(1).toRed(O);P||(P=Math.max(1,T/48|0));for(var C=A.subn(1),U=0;!C.testn(U);U++);for(var N=A.shrn(U),H=C.toRed(O);P>0;P--){var D=this._randrange(new v(2),C),j=A.gcd(D);if(j.cmpn(1)!==0)return j;var V=D.toRed(O).redPow(N);if(!(V.cmp(k)===0||V.cmp(H)===0)){for(var X=1;X<U;X++){if(V=V.redSqr(),V.cmp(k)===0)return V.fromRed().subn(1).gcd(A);if(V.cmp(H)===0)break}if(X===U)return V=V.redSqr(),V.fromRed().subn(1).gcd(A)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var v=browserExports$1;generatePrime=X,X.simpleSieve=j,X.fermatTest=V;var _=bnExports$2,x=new _(24),E=requireMr(),A=new E,P=new _(1),T=new _(2),O=new _(5);new _(16),new _(8);var k=new _(10),C=new _(3);new _(7);var U=new _(11),N=new _(4);new _(12);var H=null;function D(){if(H!==null)return H;var re=1048576,ee=[];ee[0]=2;for(var fe=1,le=3;le<re;le+=2){for(var pe=Math.ceil(Math.sqrt(le)),ie=0;ie<fe&&ee[ie]<=pe&&le%ee[ie]!==0;ie++);fe!==ie&&ee[ie]<=pe||(ee[fe++]=le)}return H=ee,ee}function j(re){for(var ee=D(),fe=0;fe<ee.length;fe++)if(re.modn(ee[fe])===0)return re.cmpn(ee[fe])===0;return!0}function V(re){var ee=_.mont(re);return T.toRed(ee).redPow(re.subn(1)).fromRed().cmpn(1)===0}function X(re,ee){if(re<16)return ee===2||ee===5?new _([140,123]):new _([140,39]);ee=new _(ee);for(var fe,le;;){for(fe=new _(v(Math.ceil(re/8)));fe.bitLength()>re;)fe.ishrn(1);if(fe.isEven()&&fe.iadd(P),fe.testn(1)||fe.iadd(T),ee.cmp(T)){if(!ee.cmp(O))for(;fe.mod(k).cmp(C);)fe.iadd(N)}else for(;fe.mod(x).cmp(U);)fe.iadd(N);if(le=fe.shrn(1),j(le)&&j(fe)&&V(le)&&V(fe)&&A.test(le)&&A.test(fe))return fe}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var v=bnExports$2,_=requireMr(),x=new _,E=new v(24),A=new v(11),P=new v(10),T=new v(3),O=new v(7),k=requireGeneratePrime(),C=browserExports$1;dh=j;function U(X,re){return re=re||"utf8",dist$4.Buffer.isBuffer(X)||(X=new dist$4.Buffer(X,re)),this._pub=new v(X),this}function N(X,re){return re=re||"utf8",dist$4.Buffer.isBuffer(X)||(X=new dist$4.Buffer(X,re)),this._priv=new v(X),this}var H={};function D(X,re){var ee=re.toString("hex"),fe=[ee,X.toString(16)].join("_");if(fe in H)return H[fe];var le=0;if(X.isEven()||!k.simpleSieve||!k.fermatTest(X)||!x.test(X))return le+=1,ee==="02"||ee==="05"?le+=8:le+=4,H[fe]=le,le;x.test(X.shrn(1))||(le+=2);var pe;switch(ee){case"02":X.mod(E).cmp(A)&&(le+=8);break;case"05":pe=X.mod(P),pe.cmp(T)&&pe.cmp(O)&&(le+=8);break;default:le+=4}return H[fe]=le,le}function j(X,re,ee){this.setGenerator(re),this.__prime=new v(X),this._prime=v.mont(this.__prime),this._primeLen=X.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,ee?(this.setPublicKey=U,this.setPrivateKey=N):this._primeCode=8}Object.defineProperty(j.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=D(this.__prime,this.__gen)),this._primeCode}}),j.prototype.generateKeys=function(){return this._priv||(this._priv=new v(C(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},j.prototype.computeSecret=function(X){X=new v(X),X=X.toRed(this._prime);var re=X.redPow(this._priv).fromRed(),ee=new dist$4.Buffer(re.toArray()),fe=this.getPrime();if(ee.length<fe.length){var le=new dist$4.Buffer(fe.length-ee.length);le.fill(0),ee=dist$4.Buffer.concat([le,ee])}return ee},j.prototype.getPublicKey=function(re){return V(this._pub,re)},j.prototype.getPrivateKey=function(re){return V(this._priv,re)},j.prototype.getPrime=function(X){return V(this.__prime,X)},j.prototype.getGenerator=function(X){return V(this._gen,X)},j.prototype.setGenerator=function(X,re){return re=re||"utf8",dist$4.Buffer.isBuffer(X)||(X=new dist$4.Buffer(X,re)),this.__gen=X,this._gen=new v(X),this};function V(X,re){var ee=new dist$4.Buffer(X.toArray());return re?ee.toString(re):ee}return dh}var hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$5;hasRequiredBrowser$2=1;var v=requireGeneratePrime(),_=require$$1$1,x=requireDh();function E(T){var O=new dist$4.Buffer(_[T].prime,"hex"),k=new dist$4.Buffer(_[T].gen,"hex");return new x(O,k)}var A={binary:!0,hex:!0,base64:!0};function P(T,O,k,C){return dist$4.Buffer.isBuffer(O)||A[O]===void 0?P(T,"binary",O,k):(O=O||"binary",C=C||"binary",k=k||new dist$4.Buffer([2]),dist$4.Buffer.isBuffer(k)||(k=new dist$4.Buffer(k,C)),typeof T=="number"?new x(v(T,k),k,!0):(dist$4.Buffer.isBuffer(T)||(T=new dist$4.Buffer(T,O)),new x(T,k,!0)))}return browser$5.DiffieHellmanGroup=browser$5.createDiffieHellmanGroup=browser$5.getDiffieHellman=E,browser$5.createDiffieHellman=browser$5.DiffieHellman=P,browser$5}var sign$2={exports:{}},bn$1={exports:{}};bn$1.exports,function(v){(function(_,x){function E(q,F){if(!q)throw new Error(F||"Assertion failed")}function A(q,F){q.super_=F;var L=function(){};L.prototype=F.prototype,q.prototype=new L,q.prototype.constructor=q}function P(q,F,L){if(P.isBN(q))return q;this.negative=0,this.words=null,this.length=0,this.red=null,q!==null&&((F==="le"||F==="be")&&(L=F,F=10),this._init(q||0,F||10,L||"be"))}typeof _=="object"?_.exports=P:x.BN=P,P.BN=P,P.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=bufferPolyfill.Buffer}catch{}P.isBN=function(F){return F instanceof P?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===P.wordSize&&Array.isArray(F.words)},P.max=function(F,L){return F.cmp(L)>0?F:L},P.min=function(F,L){return F.cmp(L)<0?F:L},P.prototype._init=function(F,L,Z){if(typeof F=="number")return this._initNumber(F,L,Z);if(typeof F=="object")return this._initArray(F,L,Z);L==="hex"&&(L=16),E(L===(L|0)&&L>=2&&L<=36),F=F.toString().replace(/\s+/g,"");var Q=0;F[0]==="-"&&(Q++,this.negative=1),Q<F.length&&(L===16?this._parseHex(F,Q,Z):(this._parseBase(F,L,Q),Z==="le"&&this._initArray(this.toArray(),L,Z)))},P.prototype._initNumber=function(F,L,Z){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),L,Z)},P.prototype._initArray=function(F,L,Z){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var de,ye,oe=0;if(Z==="be")for(Q=F.length-1,de=0;Q>=0;Q-=3)ye=F[Q]|F[Q-1]<<8|F[Q-2]<<16,this.words[de]|=ye<<oe&67108863,this.words[de+1]=ye>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,de++);else if(Z==="le")for(Q=0,de=0;Q<F.length;Q+=3)ye=F[Q]|F[Q+1]<<8|F[Q+2]<<16,this.words[de]|=ye<<oe&67108863,this.words[de+1]=ye>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,de++);return this._strip()};function O(q,F){var L=q.charCodeAt(F);if(L>=48&&L<=57)return L-48;if(L>=65&&L<=70)return L-55;if(L>=97&&L<=102)return L-87;E(!1,"Invalid character in "+q)}function k(q,F,L){var Z=O(q,L);return L-1>=F&&(Z|=O(q,L-1)<<4),Z}P.prototype._parseHex=function(F,L,Z){this.length=Math.ceil((F.length-L)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var de=0,ye=0,oe;if(Z==="be")for(Q=F.length-1;Q>=L;Q-=2)oe=k(F,L,Q)<<de,this.words[ye]|=oe&67108863,de>=18?(de-=18,ye+=1,this.words[ye]|=oe>>>26):de+=8;else{var se=F.length-L;for(Q=se%2===0?L+1:L;Q<F.length;Q+=2)oe=k(F,L,Q)<<de,this.words[ye]|=oe&67108863,de>=18?(de-=18,ye+=1,this.words[ye]|=oe>>>26):de+=8}this._strip()};function C(q,F,L,Z){for(var Q=0,de=0,ye=Math.min(q.length,L),oe=F;oe<ye;oe++){var se=q.charCodeAt(oe)-48;Q*=Z,se>=49?de=se-49+10:se>=17?de=se-17+10:de=se,E(se>=0&&de<Z,"Invalid character"),Q+=de}return Q}P.prototype._parseBase=function(F,L,Z){this.words=[0],this.length=1;for(var Q=0,de=1;de<=67108863;de*=L)Q++;Q--,de=de/L|0;for(var ye=F.length-Z,oe=ye%Q,se=Math.min(ye,ye-oe)+Z,Y=0,ce=Z;ce<se;ce+=Q)Y=C(F,ce,ce+Q,L),this.imuln(de),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(oe!==0){var we=1;for(Y=C(F,ce,F.length,L),ce=0;ce<oe;ce++)we*=L;this.imuln(we),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},P.prototype.copy=function(F){F.words=new Array(this.length);for(var L=0;L<this.length;L++)F.words[L]=this.words[L];F.length=this.length,F.negative=this.negative,F.red=this.red};function U(q,F){q.words=F.words,q.length=F.length,q.negative=F.negative,q.red=F.red}if(P.prototype._move=function(F){U(F,this)},P.prototype.clone=function(){var F=new P(null);return this.copy(F),F},P.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},P.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},P.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{P.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{P.prototype.inspect=N}else P.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var H=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];P.prototype.toString=function(F,L){F=F||10,L=L|0||1;var Z;if(F===16||F==="hex"){Z="";for(var Q=0,de=0,ye=0;ye<this.length;ye++){var oe=this.words[ye],se=((oe<<Q|de)&16777215).toString(16);de=oe>>>24-Q&16777215,Q+=2,Q>=26&&(Q-=26,ye--),de!==0||ye!==this.length-1?Z=H[6-se.length]+se+Z:Z=se+Z}for(de!==0&&(Z=de.toString(16)+Z);Z.length%L!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(F===(F|0)&&F>=2&&F<=36){var Y=D[F],ce=j[F];Z="";var we=this.clone();for(we.negative=0;!we.isZero();){var Pe=we.modrn(ce).toString(F);we=we.idivn(ce),we.isZero()?Z=Pe+Z:Z=H[Y-Pe.length]+Pe+Z}for(this.isZero()&&(Z="0"+Z);Z.length%L!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}E(!1,"Base should be between 2 and 36")},P.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},P.prototype.toJSON=function(){return this.toString(16,2)},T&&(P.prototype.toBuffer=function(F,L){return this.toArrayLike(T,F,L)}),P.prototype.toArray=function(F,L){return this.toArrayLike(Array,F,L)};var V=function(F,L){return F.allocUnsafe?F.allocUnsafe(L):new F(L)};P.prototype.toArrayLike=function(F,L,Z){this._strip();var Q=this.byteLength(),de=Z||Math.max(1,Q);E(Q<=de,"byte array longer than desired length"),E(de>0,"Requested array length <= 0");var ye=V(F,de),oe=L==="le"?"LE":"BE";return this["_toArrayLike"+oe](ye,Q),ye},P.prototype._toArrayLikeLE=function(F,L){for(var Z=0,Q=0,de=0,ye=0;de<this.length;de++){var oe=this.words[de]<<ye|Q;F[Z++]=oe&255,Z<F.length&&(F[Z++]=oe>>8&255),Z<F.length&&(F[Z++]=oe>>16&255),ye===6?(Z<F.length&&(F[Z++]=oe>>24&255),Q=0,ye=0):(Q=oe>>>24,ye+=2)}if(Z<F.length)for(F[Z++]=Q;Z<F.length;)F[Z++]=0},P.prototype._toArrayLikeBE=function(F,L){for(var Z=F.length-1,Q=0,de=0,ye=0;de<this.length;de++){var oe=this.words[de]<<ye|Q;F[Z--]=oe&255,Z>=0&&(F[Z--]=oe>>8&255),Z>=0&&(F[Z--]=oe>>16&255),ye===6?(Z>=0&&(F[Z--]=oe>>24&255),Q=0,ye=0):(Q=oe>>>24,ye+=2)}if(Z>=0)for(F[Z--]=Q;Z>=0;)F[Z--]=0},Math.clz32?P.prototype._countBits=function(F){return 32-Math.clz32(F)}:P.prototype._countBits=function(F){var L=F,Z=0;return L>=4096&&(Z+=13,L>>>=13),L>=64&&(Z+=7,L>>>=7),L>=8&&(Z+=4,L>>>=4),L>=2&&(Z+=2,L>>>=2),Z+L},P.prototype._zeroBits=function(F){if(F===0)return 26;var L=F,Z=0;return L&8191||(Z+=13,L>>>=13),L&127||(Z+=7,L>>>=7),L&15||(Z+=4,L>>>=4),L&3||(Z+=2,L>>>=2),L&1||Z++,Z},P.prototype.bitLength=function(){var F=this.words[this.length-1],L=this._countBits(F);return(this.length-1)*26+L};function X(q){for(var F=new Array(q.bitLength()),L=0;L<F.length;L++){var Z=L/26|0,Q=L%26;F[L]=q.words[Z]>>>Q&1}return F}P.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,L=0;L<this.length;L++){var Z=this._zeroBits(this.words[L]);if(F+=Z,Z!==26)break}return F},P.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},P.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},P.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},P.prototype.isNeg=function(){return this.negative!==0},P.prototype.neg=function(){return this.clone().ineg()},P.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},P.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var L=0;L<F.length;L++)this.words[L]=this.words[L]|F.words[L];return this._strip()},P.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},P.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},P.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},P.prototype.iuand=function(F){var L;this.length>F.length?L=F:L=this;for(var Z=0;Z<L.length;Z++)this.words[Z]=this.words[Z]&F.words[Z];return this.length=L.length,this._strip()},P.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},P.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},P.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},P.prototype.iuxor=function(F){var L,Z;this.length>F.length?(L=this,Z=F):(L=F,Z=this);for(var Q=0;Q<Z.length;Q++)this.words[Q]=L.words[Q]^Z.words[Q];if(this!==L)for(;Q<L.length;Q++)this.words[Q]=L.words[Q];return this.length=L.length,this._strip()},P.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},P.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},P.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},P.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var L=Math.ceil(F/26)|0,Z=F%26;this._expand(L),Z>0&&L--;for(var Q=0;Q<L;Q++)this.words[Q]=~this.words[Q]&67108863;return Z>0&&(this.words[Q]=~this.words[Q]&67108863>>26-Z),this._strip()},P.prototype.notn=function(F){return this.clone().inotn(F)},P.prototype.setn=function(F,L){E(typeof F=="number"&&F>=0);var Z=F/26|0,Q=F%26;return this._expand(Z+1),L?this.words[Z]=this.words[Z]|1<<Q:this.words[Z]=this.words[Z]&~(1<<Q),this._strip()},P.prototype.iadd=function(F){var L;if(this.negative!==0&&F.negative===0)return this.negative=0,L=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,L=this.isub(F),F.negative=1,L._normSign();var Z,Q;this.length>F.length?(Z=this,Q=F):(Z=F,Q=this);for(var de=0,ye=0;ye<Q.length;ye++)L=(Z.words[ye]|0)+(Q.words[ye]|0)+de,this.words[ye]=L&67108863,de=L>>>26;for(;de!==0&&ye<Z.length;ye++)L=(Z.words[ye]|0)+de,this.words[ye]=L&67108863,de=L>>>26;if(this.length=Z.length,de!==0)this.words[this.length]=de,this.length++;else if(Z!==this)for(;ye<Z.length;ye++)this.words[ye]=Z.words[ye];return this},P.prototype.add=function(F){var L;return F.negative!==0&&this.negative===0?(F.negative=0,L=this.sub(F),F.negative^=1,L):F.negative===0&&this.negative!==0?(this.negative=0,L=F.sub(this),this.negative=1,L):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},P.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var L=this.iadd(F);return F.negative=1,L._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var Z=this.cmp(F);if(Z===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,de;Z>0?(Q=this,de=F):(Q=F,de=this);for(var ye=0,oe=0;oe<de.length;oe++)L=(Q.words[oe]|0)-(de.words[oe]|0)+ye,ye=L>>26,this.words[oe]=L&67108863;for(;ye!==0&&oe<Q.length;oe++)L=(Q.words[oe]|0)+ye,ye=L>>26,this.words[oe]=L&67108863;if(ye===0&&oe<Q.length&&Q!==this)for(;oe<Q.length;oe++)this.words[oe]=Q.words[oe];return this.length=Math.max(this.length,oe),Q!==this&&(this.negative=1),this._strip()},P.prototype.sub=function(F){return this.clone().isub(F)};function re(q,F,L){L.negative=F.negative^q.negative;var Z=q.length+F.length|0;L.length=Z,Z=Z-1|0;var Q=q.words[0]|0,de=F.words[0]|0,ye=Q*de,oe=ye&67108863,se=ye/67108864|0;L.words[0]=oe;for(var Y=1;Y<Z;Y++){for(var ce=se>>>26,we=se&67108863,Pe=Math.min(Y,F.length-1),Se=Math.max(0,Y-q.length+1);Se<=Pe;Se++){var Be=Y-Se|0;Q=q.words[Be]|0,de=F.words[Se]|0,ye=Q*de+we,ce+=ye/67108864|0,we=ye&67108863}L.words[Y]=we|0,se=ce|0}return se!==0?L.words[Y]=se|0:L.length--,L._strip()}var ee=function(F,L,Z){var Q=F.words,de=L.words,ye=Z.words,oe=0,se,Y,ce,we=Q[0]|0,Pe=we&8191,Se=we>>>13,Be=Q[1]|0,Ie=Be&8191,Re=Be>>>13,Me=Q[2]|0,xe=Me&8191,Ee=Me>>>13,Ue=Q[3]|0,Ke=Ue&8191,ze=Ue>>>13,Ve=Q[4]|0,Je=Ve&8191,et=Ve>>>13,Ge=Q[5]|0,ot=Ge&8191,He=Ge>>>13,We=Q[6]|0,Ze=We&8191,$e=We>>>13,Te=Q[7]|0,Ce=Te&8191,ve=Te>>>13,be=Q[8]|0,ge=be&8191,me=be>>>13,_e=Q[9]|0,Ae=_e&8191,Oe=_e>>>13,Le=de[0]|0,je=Le&8191,qe=Le>>>13,rt=de[1]|0,tt=rt&8191,at=rt>>>13,bt=de[2]|0,lt=bt&8191,it=bt>>>13,vt=de[3]|0,dt=vt&8191,Fe=vt>>>13,ke=de[4]|0,Ne=ke&8191,De=ke>>>13,Xe=de[5]|0,Ye=Xe&8191,Qe=Xe>>>13,st=de[6]|0,ut=st&8191,nt=st>>>13,pt=de[7]|0,ht=pt&8191,ct=pt>>>13,_t=de[8]|0,gt=_t&8191,yt=_t>>>13,St=de[9]|0,mt=St&8191,wt=St>>>13;Z.negative=F.negative^L.negative,Z.length=19,se=Math.imul(Pe,je),Y=Math.imul(Pe,qe),Y=Y+Math.imul(Se,je)|0,ce=Math.imul(Se,qe);var At=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(At>>>26)|0,At&=67108863,se=Math.imul(Ie,je),Y=Math.imul(Ie,qe),Y=Y+Math.imul(Re,je)|0,ce=Math.imul(Re,qe),se=se+Math.imul(Pe,tt)|0,Y=Y+Math.imul(Pe,at)|0,Y=Y+Math.imul(Se,tt)|0,ce=ce+Math.imul(Se,at)|0;var Bt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,se=Math.imul(xe,je),Y=Math.imul(xe,qe),Y=Y+Math.imul(Ee,je)|0,ce=Math.imul(Ee,qe),se=se+Math.imul(Ie,tt)|0,Y=Y+Math.imul(Ie,at)|0,Y=Y+Math.imul(Re,tt)|0,ce=ce+Math.imul(Re,at)|0,se=se+Math.imul(Pe,lt)|0,Y=Y+Math.imul(Pe,it)|0,Y=Y+Math.imul(Se,lt)|0,ce=ce+Math.imul(Se,it)|0;var xt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(xt>>>26)|0,xt&=67108863,se=Math.imul(Ke,je),Y=Math.imul(Ke,qe),Y=Y+Math.imul(ze,je)|0,ce=Math.imul(ze,qe),se=se+Math.imul(xe,tt)|0,Y=Y+Math.imul(xe,at)|0,Y=Y+Math.imul(Ee,tt)|0,ce=ce+Math.imul(Ee,at)|0,se=se+Math.imul(Ie,lt)|0,Y=Y+Math.imul(Ie,it)|0,Y=Y+Math.imul(Re,lt)|0,ce=ce+Math.imul(Re,it)|0,se=se+Math.imul(Pe,dt)|0,Y=Y+Math.imul(Pe,Fe)|0,Y=Y+Math.imul(Se,dt)|0,ce=ce+Math.imul(Se,Fe)|0;var Pt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,se=Math.imul(Je,je),Y=Math.imul(Je,qe),Y=Y+Math.imul(et,je)|0,ce=Math.imul(et,qe),se=se+Math.imul(Ke,tt)|0,Y=Y+Math.imul(Ke,at)|0,Y=Y+Math.imul(ze,tt)|0,ce=ce+Math.imul(ze,at)|0,se=se+Math.imul(xe,lt)|0,Y=Y+Math.imul(xe,it)|0,Y=Y+Math.imul(Ee,lt)|0,ce=ce+Math.imul(Ee,it)|0,se=se+Math.imul(Ie,dt)|0,Y=Y+Math.imul(Ie,Fe)|0,Y=Y+Math.imul(Re,dt)|0,ce=ce+Math.imul(Re,Fe)|0,se=se+Math.imul(Pe,Ne)|0,Y=Y+Math.imul(Pe,De)|0,Y=Y+Math.imul(Se,Ne)|0,ce=ce+Math.imul(Se,De)|0;var Tt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,se=Math.imul(ot,je),Y=Math.imul(ot,qe),Y=Y+Math.imul(He,je)|0,ce=Math.imul(He,qe),se=se+Math.imul(Je,tt)|0,Y=Y+Math.imul(Je,at)|0,Y=Y+Math.imul(et,tt)|0,ce=ce+Math.imul(et,at)|0,se=se+Math.imul(Ke,lt)|0,Y=Y+Math.imul(Ke,it)|0,Y=Y+Math.imul(ze,lt)|0,ce=ce+Math.imul(ze,it)|0,se=se+Math.imul(xe,dt)|0,Y=Y+Math.imul(xe,Fe)|0,Y=Y+Math.imul(Ee,dt)|0,ce=ce+Math.imul(Ee,Fe)|0,se=se+Math.imul(Ie,Ne)|0,Y=Y+Math.imul(Ie,De)|0,Y=Y+Math.imul(Re,Ne)|0,ce=ce+Math.imul(Re,De)|0,se=se+Math.imul(Pe,Ye)|0,Y=Y+Math.imul(Pe,Qe)|0,Y=Y+Math.imul(Se,Ye)|0,ce=ce+Math.imul(Se,Qe)|0;var It=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(It>>>26)|0,It&=67108863,se=Math.imul(Ze,je),Y=Math.imul(Ze,qe),Y=Y+Math.imul($e,je)|0,ce=Math.imul($e,qe),se=se+Math.imul(ot,tt)|0,Y=Y+Math.imul(ot,at)|0,Y=Y+Math.imul(He,tt)|0,ce=ce+Math.imul(He,at)|0,se=se+Math.imul(Je,lt)|0,Y=Y+Math.imul(Je,it)|0,Y=Y+Math.imul(et,lt)|0,ce=ce+Math.imul(et,it)|0,se=se+Math.imul(Ke,dt)|0,Y=Y+Math.imul(Ke,Fe)|0,Y=Y+Math.imul(ze,dt)|0,ce=ce+Math.imul(ze,Fe)|0,se=se+Math.imul(xe,Ne)|0,Y=Y+Math.imul(xe,De)|0,Y=Y+Math.imul(Ee,Ne)|0,ce=ce+Math.imul(Ee,De)|0,se=se+Math.imul(Ie,Ye)|0,Y=Y+Math.imul(Ie,Qe)|0,Y=Y+Math.imul(Re,Ye)|0,ce=ce+Math.imul(Re,Qe)|0,se=se+Math.imul(Pe,ut)|0,Y=Y+Math.imul(Pe,nt)|0,Y=Y+Math.imul(Se,ut)|0,ce=ce+Math.imul(Se,nt)|0;var Rt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,se=Math.imul(Ce,je),Y=Math.imul(Ce,qe),Y=Y+Math.imul(ve,je)|0,ce=Math.imul(ve,qe),se=se+Math.imul(Ze,tt)|0,Y=Y+Math.imul(Ze,at)|0,Y=Y+Math.imul($e,tt)|0,ce=ce+Math.imul($e,at)|0,se=se+Math.imul(ot,lt)|0,Y=Y+Math.imul(ot,it)|0,Y=Y+Math.imul(He,lt)|0,ce=ce+Math.imul(He,it)|0,se=se+Math.imul(Je,dt)|0,Y=Y+Math.imul(Je,Fe)|0,Y=Y+Math.imul(et,dt)|0,ce=ce+Math.imul(et,Fe)|0,se=se+Math.imul(Ke,Ne)|0,Y=Y+Math.imul(Ke,De)|0,Y=Y+Math.imul(ze,Ne)|0,ce=ce+Math.imul(ze,De)|0,se=se+Math.imul(xe,Ye)|0,Y=Y+Math.imul(xe,Qe)|0,Y=Y+Math.imul(Ee,Ye)|0,ce=ce+Math.imul(Ee,Qe)|0,se=se+Math.imul(Ie,ut)|0,Y=Y+Math.imul(Ie,nt)|0,Y=Y+Math.imul(Re,ut)|0,ce=ce+Math.imul(Re,nt)|0,se=se+Math.imul(Pe,ht)|0,Y=Y+Math.imul(Pe,ct)|0,Y=Y+Math.imul(Se,ht)|0,ce=ce+Math.imul(Se,ct)|0;var Ot=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,se=Math.imul(ge,je),Y=Math.imul(ge,qe),Y=Y+Math.imul(me,je)|0,ce=Math.imul(me,qe),se=se+Math.imul(Ce,tt)|0,Y=Y+Math.imul(Ce,at)|0,Y=Y+Math.imul(ve,tt)|0,ce=ce+Math.imul(ve,at)|0,se=se+Math.imul(Ze,lt)|0,Y=Y+Math.imul(Ze,it)|0,Y=Y+Math.imul($e,lt)|0,ce=ce+Math.imul($e,it)|0,se=se+Math.imul(ot,dt)|0,Y=Y+Math.imul(ot,Fe)|0,Y=Y+Math.imul(He,dt)|0,ce=ce+Math.imul(He,Fe)|0,se=se+Math.imul(Je,Ne)|0,Y=Y+Math.imul(Je,De)|0,Y=Y+Math.imul(et,Ne)|0,ce=ce+Math.imul(et,De)|0,se=se+Math.imul(Ke,Ye)|0,Y=Y+Math.imul(Ke,Qe)|0,Y=Y+Math.imul(ze,Ye)|0,ce=ce+Math.imul(ze,Qe)|0,se=se+Math.imul(xe,ut)|0,Y=Y+Math.imul(xe,nt)|0,Y=Y+Math.imul(Ee,ut)|0,ce=ce+Math.imul(Ee,nt)|0,se=se+Math.imul(Ie,ht)|0,Y=Y+Math.imul(Ie,ct)|0,Y=Y+Math.imul(Re,ht)|0,ce=ce+Math.imul(Re,ct)|0,se=se+Math.imul(Pe,gt)|0,Y=Y+Math.imul(Pe,yt)|0,Y=Y+Math.imul(Se,gt)|0,ce=ce+Math.imul(Se,yt)|0;var kt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(kt>>>26)|0,kt&=67108863,se=Math.imul(Ae,je),Y=Math.imul(Ae,qe),Y=Y+Math.imul(Oe,je)|0,ce=Math.imul(Oe,qe),se=se+Math.imul(ge,tt)|0,Y=Y+Math.imul(ge,at)|0,Y=Y+Math.imul(me,tt)|0,ce=ce+Math.imul(me,at)|0,se=se+Math.imul(Ce,lt)|0,Y=Y+Math.imul(Ce,it)|0,Y=Y+Math.imul(ve,lt)|0,ce=ce+Math.imul(ve,it)|0,se=se+Math.imul(Ze,dt)|0,Y=Y+Math.imul(Ze,Fe)|0,Y=Y+Math.imul($e,dt)|0,ce=ce+Math.imul($e,Fe)|0,se=se+Math.imul(ot,Ne)|0,Y=Y+Math.imul(ot,De)|0,Y=Y+Math.imul(He,Ne)|0,ce=ce+Math.imul(He,De)|0,se=se+Math.imul(Je,Ye)|0,Y=Y+Math.imul(Je,Qe)|0,Y=Y+Math.imul(et,Ye)|0,ce=ce+Math.imul(et,Qe)|0,se=se+Math.imul(Ke,ut)|0,Y=Y+Math.imul(Ke,nt)|0,Y=Y+Math.imul(ze,ut)|0,ce=ce+Math.imul(ze,nt)|0,se=se+Math.imul(xe,ht)|0,Y=Y+Math.imul(xe,ct)|0,Y=Y+Math.imul(Ee,ht)|0,ce=ce+Math.imul(Ee,ct)|0,se=se+Math.imul(Ie,gt)|0,Y=Y+Math.imul(Ie,yt)|0,Y=Y+Math.imul(Re,gt)|0,ce=ce+Math.imul(Re,yt)|0,se=se+Math.imul(Pe,mt)|0,Y=Y+Math.imul(Pe,wt)|0,Y=Y+Math.imul(Se,mt)|0,ce=ce+Math.imul(Se,wt)|0;var Ct=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,se=Math.imul(Ae,tt),Y=Math.imul(Ae,at),Y=Y+Math.imul(Oe,tt)|0,ce=Math.imul(Oe,at),se=se+Math.imul(ge,lt)|0,Y=Y+Math.imul(ge,it)|0,Y=Y+Math.imul(me,lt)|0,ce=ce+Math.imul(me,it)|0,se=se+Math.imul(Ce,dt)|0,Y=Y+Math.imul(Ce,Fe)|0,Y=Y+Math.imul(ve,dt)|0,ce=ce+Math.imul(ve,Fe)|0,se=se+Math.imul(Ze,Ne)|0,Y=Y+Math.imul(Ze,De)|0,Y=Y+Math.imul($e,Ne)|0,ce=ce+Math.imul($e,De)|0,se=se+Math.imul(ot,Ye)|0,Y=Y+Math.imul(ot,Qe)|0,Y=Y+Math.imul(He,Ye)|0,ce=ce+Math.imul(He,Qe)|0,se=se+Math.imul(Je,ut)|0,Y=Y+Math.imul(Je,nt)|0,Y=Y+Math.imul(et,ut)|0,ce=ce+Math.imul(et,nt)|0,se=se+Math.imul(Ke,ht)|0,Y=Y+Math.imul(Ke,ct)|0,Y=Y+Math.imul(ze,ht)|0,ce=ce+Math.imul(ze,ct)|0,se=se+Math.imul(xe,gt)|0,Y=Y+Math.imul(xe,yt)|0,Y=Y+Math.imul(Ee,gt)|0,ce=ce+Math.imul(Ee,yt)|0,se=se+Math.imul(Ie,mt)|0,Y=Y+Math.imul(Ie,wt)|0,Y=Y+Math.imul(Re,mt)|0,ce=ce+Math.imul(Re,wt)|0;var Ft=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,se=Math.imul(Ae,lt),Y=Math.imul(Ae,it),Y=Y+Math.imul(Oe,lt)|0,ce=Math.imul(Oe,it),se=se+Math.imul(ge,dt)|0,Y=Y+Math.imul(ge,Fe)|0,Y=Y+Math.imul(me,dt)|0,ce=ce+Math.imul(me,Fe)|0,se=se+Math.imul(Ce,Ne)|0,Y=Y+Math.imul(Ce,De)|0,Y=Y+Math.imul(ve,Ne)|0,ce=ce+Math.imul(ve,De)|0,se=se+Math.imul(Ze,Ye)|0,Y=Y+Math.imul(Ze,Qe)|0,Y=Y+Math.imul($e,Ye)|0,ce=ce+Math.imul($e,Qe)|0,se=se+Math.imul(ot,ut)|0,Y=Y+Math.imul(ot,nt)|0,Y=Y+Math.imul(He,ut)|0,ce=ce+Math.imul(He,nt)|0,se=se+Math.imul(Je,ht)|0,Y=Y+Math.imul(Je,ct)|0,Y=Y+Math.imul(et,ht)|0,ce=ce+Math.imul(et,ct)|0,se=se+Math.imul(Ke,gt)|0,Y=Y+Math.imul(Ke,yt)|0,Y=Y+Math.imul(ze,gt)|0,ce=ce+Math.imul(ze,yt)|0,se=se+Math.imul(xe,mt)|0,Y=Y+Math.imul(xe,wt)|0,Y=Y+Math.imul(Ee,mt)|0,ce=ce+Math.imul(Ee,wt)|0;var Mt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,se=Math.imul(Ae,dt),Y=Math.imul(Ae,Fe),Y=Y+Math.imul(Oe,dt)|0,ce=Math.imul(Oe,Fe),se=se+Math.imul(ge,Ne)|0,Y=Y+Math.imul(ge,De)|0,Y=Y+Math.imul(me,Ne)|0,ce=ce+Math.imul(me,De)|0,se=se+Math.imul(Ce,Ye)|0,Y=Y+Math.imul(Ce,Qe)|0,Y=Y+Math.imul(ve,Ye)|0,ce=ce+Math.imul(ve,Qe)|0,se=se+Math.imul(Ze,ut)|0,Y=Y+Math.imul(Ze,nt)|0,Y=Y+Math.imul($e,ut)|0,ce=ce+Math.imul($e,nt)|0,se=se+Math.imul(ot,ht)|0,Y=Y+Math.imul(ot,ct)|0,Y=Y+Math.imul(He,ht)|0,ce=ce+Math.imul(He,ct)|0,se=se+Math.imul(Je,gt)|0,Y=Y+Math.imul(Je,yt)|0,Y=Y+Math.imul(et,gt)|0,ce=ce+Math.imul(et,yt)|0,se=se+Math.imul(Ke,mt)|0,Y=Y+Math.imul(Ke,wt)|0,Y=Y+Math.imul(ze,mt)|0,ce=ce+Math.imul(ze,wt)|0;var Nt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,se=Math.imul(Ae,Ne),Y=Math.imul(Ae,De),Y=Y+Math.imul(Oe,Ne)|0,ce=Math.imul(Oe,De),se=se+Math.imul(ge,Ye)|0,Y=Y+Math.imul(ge,Qe)|0,Y=Y+Math.imul(me,Ye)|0,ce=ce+Math.imul(me,Qe)|0,se=se+Math.imul(Ce,ut)|0,Y=Y+Math.imul(Ce,nt)|0,Y=Y+Math.imul(ve,ut)|0,ce=ce+Math.imul(ve,nt)|0,se=se+Math.imul(Ze,ht)|0,Y=Y+Math.imul(Ze,ct)|0,Y=Y+Math.imul($e,ht)|0,ce=ce+Math.imul($e,ct)|0,se=se+Math.imul(ot,gt)|0,Y=Y+Math.imul(ot,yt)|0,Y=Y+Math.imul(He,gt)|0,ce=ce+Math.imul(He,yt)|0,se=se+Math.imul(Je,mt)|0,Y=Y+Math.imul(Je,wt)|0,Y=Y+Math.imul(et,mt)|0,ce=ce+Math.imul(et,wt)|0;var Ut=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,se=Math.imul(Ae,Ye),Y=Math.imul(Ae,Qe),Y=Y+Math.imul(Oe,Ye)|0,ce=Math.imul(Oe,Qe),se=se+Math.imul(ge,ut)|0,Y=Y+Math.imul(ge,nt)|0,Y=Y+Math.imul(me,ut)|0,ce=ce+Math.imul(me,nt)|0,se=se+Math.imul(Ce,ht)|0,Y=Y+Math.imul(Ce,ct)|0,Y=Y+Math.imul(ve,ht)|0,ce=ce+Math.imul(ve,ct)|0,se=se+Math.imul(Ze,gt)|0,Y=Y+Math.imul(Ze,yt)|0,Y=Y+Math.imul($e,gt)|0,ce=ce+Math.imul($e,yt)|0,se=se+Math.imul(ot,mt)|0,Y=Y+Math.imul(ot,wt)|0,Y=Y+Math.imul(He,mt)|0,ce=ce+Math.imul(He,wt)|0;var Ht=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,se=Math.imul(Ae,ut),Y=Math.imul(Ae,nt),Y=Y+Math.imul(Oe,ut)|0,ce=Math.imul(Oe,nt),se=se+Math.imul(ge,ht)|0,Y=Y+Math.imul(ge,ct)|0,Y=Y+Math.imul(me,ht)|0,ce=ce+Math.imul(me,ct)|0,se=se+Math.imul(Ce,gt)|0,Y=Y+Math.imul(Ce,yt)|0,Y=Y+Math.imul(ve,gt)|0,ce=ce+Math.imul(ve,yt)|0,se=se+Math.imul(Ze,mt)|0,Y=Y+Math.imul(Ze,wt)|0,Y=Y+Math.imul($e,mt)|0,ce=ce+Math.imul($e,wt)|0;var Dt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,se=Math.imul(Ae,ht),Y=Math.imul(Ae,ct),Y=Y+Math.imul(Oe,ht)|0,ce=Math.imul(Oe,ct),se=se+Math.imul(ge,gt)|0,Y=Y+Math.imul(ge,yt)|0,Y=Y+Math.imul(me,gt)|0,ce=ce+Math.imul(me,yt)|0,se=se+Math.imul(Ce,mt)|0,Y=Y+Math.imul(Ce,wt)|0,Y=Y+Math.imul(ve,mt)|0,ce=ce+Math.imul(ve,wt)|0;var Kt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,se=Math.imul(Ae,gt),Y=Math.imul(Ae,yt),Y=Y+Math.imul(Oe,gt)|0,ce=Math.imul(Oe,yt),se=se+Math.imul(ge,mt)|0,Y=Y+Math.imul(ge,wt)|0,Y=Y+Math.imul(me,mt)|0,ce=ce+Math.imul(me,wt)|0;var jt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(jt>>>26)|0,jt&=67108863,se=Math.imul(Ae,mt),Y=Math.imul(Ae,wt),Y=Y+Math.imul(Oe,mt)|0,ce=Math.imul(Oe,wt);var Lt=(oe+se|0)+((Y&8191)<<13)|0;return oe=(ce+(Y>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,ye[0]=At,ye[1]=Bt,ye[2]=xt,ye[3]=Pt,ye[4]=Tt,ye[5]=It,ye[6]=Rt,ye[7]=Ot,ye[8]=kt,ye[9]=Ct,ye[10]=Ft,ye[11]=Mt,ye[12]=Nt,ye[13]=Ut,ye[14]=Ht,ye[15]=Dt,ye[16]=Kt,ye[17]=jt,ye[18]=Lt,oe!==0&&(ye[19]=oe,Z.length++),Z};Math.imul||(ee=re);function fe(q,F,L){L.negative=F.negative^q.negative,L.length=q.length+F.length;for(var Z=0,Q=0,de=0;de<L.length-1;de++){var ye=Q;Q=0;for(var oe=Z&67108863,se=Math.min(de,F.length-1),Y=Math.max(0,de-q.length+1);Y<=se;Y++){var ce=de-Y,we=q.words[ce]|0,Pe=F.words[Y]|0,Se=we*Pe,Be=Se&67108863;ye=ye+(Se/67108864|0)|0,Be=Be+oe|0,oe=Be&67108863,ye=ye+(Be>>>26)|0,Q+=ye>>>26,ye&=67108863}L.words[de]=oe,Z=ye,ye=Q}return Z!==0?L.words[de]=Z:L.length--,L._strip()}function le(q,F,L){return fe(q,F,L)}P.prototype.mulTo=function(F,L){var Z,Q=this.length+F.length;return this.length===10&&F.length===10?Z=ee(this,F,L):Q<63?Z=re(this,F,L):Q<1024?Z=fe(this,F,L):Z=le(this,F,L),Z},P.prototype.mul=function(F){var L=new P(null);return L.words=new Array(this.length+F.length),this.mulTo(F,L)},P.prototype.mulf=function(F){var L=new P(null);return L.words=new Array(this.length+F.length),le(this,F,L)},P.prototype.imul=function(F){return this.clone().mulTo(F,this)},P.prototype.imuln=function(F){var L=F<0;L&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var Z=0,Q=0;Q<this.length;Q++){var de=(this.words[Q]|0)*F,ye=(de&67108863)+(Z&67108863);Z>>=26,Z+=de/67108864|0,Z+=ye>>>26,this.words[Q]=ye&67108863}return Z!==0&&(this.words[Q]=Z,this.length++),L?this.ineg():this},P.prototype.muln=function(F){return this.clone().imuln(F)},P.prototype.sqr=function(){return this.mul(this)},P.prototype.isqr=function(){return this.imul(this.clone())},P.prototype.pow=function(F){var L=X(F);if(L.length===0)return new P(1);for(var Z=this,Q=0;Q<L.length&&L[Q]===0;Q++,Z=Z.sqr());if(++Q<L.length)for(var de=Z.sqr();Q<L.length;Q++,de=de.sqr())L[Q]!==0&&(Z=Z.mul(de));return Z},P.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26,Q=67108863>>>26-L<<26-L,de;if(L!==0){var ye=0;for(de=0;de<this.length;de++){var oe=this.words[de]&Q,se=(this.words[de]|0)-oe<<L;this.words[de]=se|ye,ye=oe>>>26-L}ye&&(this.words[de]=ye,this.length++)}if(Z!==0){for(de=this.length-1;de>=0;de--)this.words[de+Z]=this.words[de];for(de=0;de<Z;de++)this.words[de]=0;this.length+=Z}return this._strip()},P.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},P.prototype.iushrn=function(F,L,Z){E(typeof F=="number"&&F>=0);var Q;L?Q=(L-L%26)/26:Q=0;var de=F%26,ye=Math.min((F-de)/26,this.length),oe=67108863^67108863>>>de<<de,se=Z;if(Q-=ye,Q=Math.max(0,Q),se){for(var Y=0;Y<ye;Y++)se.words[Y]=this.words[Y];se.length=ye}if(ye!==0)if(this.length>ye)for(this.length-=ye,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+ye];else this.words[0]=0,this.length=1;var ce=0;for(Y=this.length-1;Y>=0&&(ce!==0||Y>=Q);Y--){var we=this.words[Y]|0;this.words[Y]=ce<<26-de|we>>>de,ce=we&oe}return se&&ce!==0&&(se.words[se.length++]=ce),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},P.prototype.ishrn=function(F,L,Z){return E(this.negative===0),this.iushrn(F,L,Z)},P.prototype.shln=function(F){return this.clone().ishln(F)},P.prototype.ushln=function(F){return this.clone().iushln(F)},P.prototype.shrn=function(F){return this.clone().ishrn(F)},P.prototype.ushrn=function(F){return this.clone().iushrn(F)},P.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26,Q=1<<L;if(this.length<=Z)return!1;var de=this.words[Z];return!!(de&Q)},P.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(L!==0&&Z++,this.length=Math.min(Z,this.length),L!==0){var Q=67108863^67108863>>>L<<L;this.words[this.length-1]&=Q}return this._strip()},P.prototype.maskn=function(F){return this.clone().imaskn(F)},P.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},P.prototype._iaddn=function(F){this.words[0]+=F;for(var L=0;L<this.length&&this.words[L]>=67108864;L++)this.words[L]-=67108864,L===this.length-1?this.words[L+1]=1:this.words[L+1]++;return this.length=Math.max(this.length,L+1),this},P.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var L=0;L<this.length&&this.words[L]<0;L++)this.words[L]+=67108864,this.words[L+1]-=1;return this._strip()},P.prototype.addn=function(F){return this.clone().iaddn(F)},P.prototype.subn=function(F){return this.clone().isubn(F)},P.prototype.iabs=function(){return this.negative=0,this},P.prototype.abs=function(){return this.clone().iabs()},P.prototype._ishlnsubmul=function(F,L,Z){var Q=F.length+Z,de;this._expand(Q);var ye,oe=0;for(de=0;de<F.length;de++){ye=(this.words[de+Z]|0)+oe;var se=(F.words[de]|0)*L;ye-=se&67108863,oe=(ye>>26)-(se/67108864|0),this.words[de+Z]=ye&67108863}for(;de<this.length-Z;de++)ye=(this.words[de+Z]|0)+oe,oe=ye>>26,this.words[de+Z]=ye&67108863;if(oe===0)return this._strip();for(E(oe===-1),oe=0,de=0;de<this.length;de++)ye=-(this.words[de]|0)+oe,oe=ye>>26,this.words[de]=ye&67108863;return this.negative=1,this._strip()},P.prototype._wordDiv=function(F,L){var Z=this.length-F.length,Q=this.clone(),de=F,ye=de.words[de.length-1]|0,oe=this._countBits(ye);Z=26-oe,Z!==0&&(de=de.ushln(Z),Q.iushln(Z),ye=de.words[de.length-1]|0);var se=Q.length-de.length,Y;if(L!=="mod"){Y=new P(null),Y.length=se+1,Y.words=new Array(Y.length);for(var ce=0;ce<Y.length;ce++)Y.words[ce]=0}var we=Q.clone()._ishlnsubmul(de,1,se);we.negative===0&&(Q=we,Y&&(Y.words[se]=1));for(var Pe=se-1;Pe>=0;Pe--){var Se=(Q.words[de.length+Pe]|0)*67108864+(Q.words[de.length+Pe-1]|0);for(Se=Math.min(Se/ye|0,67108863),Q._ishlnsubmul(de,Se,Pe);Q.negative!==0;)Se--,Q.negative=0,Q._ishlnsubmul(de,1,Pe),Q.isZero()||(Q.negative^=1);Y&&(Y.words[Pe]=Se)}return Y&&Y._strip(),Q._strip(),L!=="div"&&Z!==0&&Q.iushrn(Z),{div:Y||null,mod:Q}},P.prototype.divmod=function(F,L,Z){if(E(!F.isZero()),this.isZero())return{div:new P(0),mod:new P(0)};var Q,de,ye;return this.negative!==0&&F.negative===0?(ye=this.neg().divmod(F,L),L!=="mod"&&(Q=ye.div.neg()),L!=="div"&&(de=ye.mod.neg(),Z&&de.negative!==0&&de.iadd(F)),{div:Q,mod:de}):this.negative===0&&F.negative!==0?(ye=this.divmod(F.neg(),L),L!=="mod"&&(Q=ye.div.neg()),{div:Q,mod:ye.mod}):this.negative&F.negative?(ye=this.neg().divmod(F.neg(),L),L!=="div"&&(de=ye.mod.neg(),Z&&de.negative!==0&&de.isub(F)),{div:ye.div,mod:de}):F.length>this.length||this.cmp(F)<0?{div:new P(0),mod:this}:F.length===1?L==="div"?{div:this.divn(F.words[0]),mod:null}:L==="mod"?{div:null,mod:new P(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new P(this.modrn(F.words[0]))}:this._wordDiv(F,L)},P.prototype.div=function(F){return this.divmod(F,"div",!1).div},P.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},P.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},P.prototype.divRound=function(F){var L=this.divmod(F);if(L.mod.isZero())return L.div;var Z=L.div.negative!==0?L.mod.isub(F):L.mod,Q=F.ushrn(1),de=F.andln(1),ye=Z.cmp(Q);return ye<0||de===1&&ye===0?L.div:L.div.negative!==0?L.div.isubn(1):L.div.iaddn(1)},P.prototype.modrn=function(F){var L=F<0;L&&(F=-F),E(F<=67108863);for(var Z=(1<<26)%F,Q=0,de=this.length-1;de>=0;de--)Q=(Z*Q+(this.words[de]|0))%F;return L?-Q:Q},P.prototype.modn=function(F){return this.modrn(F)},P.prototype.idivn=function(F){var L=F<0;L&&(F=-F),E(F<=67108863);for(var Z=0,Q=this.length-1;Q>=0;Q--){var de=(this.words[Q]|0)+Z*67108864;this.words[Q]=de/F|0,Z=de%F}return this._strip(),L?this.ineg():this},P.prototype.divn=function(F){return this.clone().idivn(F)},P.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var L=this,Z=F.clone();L.negative!==0?L=L.umod(F):L=L.clone();for(var Q=new P(1),de=new P(0),ye=new P(0),oe=new P(1),se=0;L.isEven()&&Z.isEven();)L.iushrn(1),Z.iushrn(1),++se;for(var Y=Z.clone(),ce=L.clone();!L.isZero();){for(var we=0,Pe=1;!(L.words[0]&Pe)&&we<26;++we,Pe<<=1);if(we>0)for(L.iushrn(we);we-- >0;)(Q.isOdd()||de.isOdd())&&(Q.iadd(Y),de.isub(ce)),Q.iushrn(1),de.iushrn(1);for(var Se=0,Be=1;!(Z.words[0]&Be)&&Se<26;++Se,Be<<=1);if(Se>0)for(Z.iushrn(Se);Se-- >0;)(ye.isOdd()||oe.isOdd())&&(ye.iadd(Y),oe.isub(ce)),ye.iushrn(1),oe.iushrn(1);L.cmp(Z)>=0?(L.isub(Z),Q.isub(ye),de.isub(oe)):(Z.isub(L),ye.isub(Q),oe.isub(de))}return{a:ye,b:oe,gcd:Z.iushln(se)}},P.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var L=this,Z=F.clone();L.negative!==0?L=L.umod(F):L=L.clone();for(var Q=new P(1),de=new P(0),ye=Z.clone();L.cmpn(1)>0&&Z.cmpn(1)>0;){for(var oe=0,se=1;!(L.words[0]&se)&&oe<26;++oe,se<<=1);if(oe>0)for(L.iushrn(oe);oe-- >0;)Q.isOdd()&&Q.iadd(ye),Q.iushrn(1);for(var Y=0,ce=1;!(Z.words[0]&ce)&&Y<26;++Y,ce<<=1);if(Y>0)for(Z.iushrn(Y);Y-- >0;)de.isOdd()&&de.iadd(ye),de.iushrn(1);L.cmp(Z)>=0?(L.isub(Z),Q.isub(de)):(Z.isub(L),de.isub(Q))}var we;return L.cmpn(1)===0?we=Q:we=de,we.cmpn(0)<0&&we.iadd(F),we},P.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var L=this.clone(),Z=F.clone();L.negative=0,Z.negative=0;for(var Q=0;L.isEven()&&Z.isEven();Q++)L.iushrn(1),Z.iushrn(1);do{for(;L.isEven();)L.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var de=L.cmp(Z);if(de<0){var ye=L;L=Z,Z=ye}else if(de===0||Z.cmpn(1)===0)break;L.isub(Z)}while(!0);return Z.iushln(Q)},P.prototype.invm=function(F){return this.egcd(F).a.umod(F)},P.prototype.isEven=function(){return(this.words[0]&1)===0},P.prototype.isOdd=function(){return(this.words[0]&1)===1},P.prototype.andln=function(F){return this.words[0]&F},P.prototype.bincn=function(F){E(typeof F=="number");var L=F%26,Z=(F-L)/26,Q=1<<L;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=Q,this;for(var de=Q,ye=Z;de!==0&&ye<this.length;ye++){var oe=this.words[ye]|0;oe+=de,de=oe>>>26,oe&=67108863,this.words[ye]=oe}return de!==0&&(this.words[ye]=de,this.length++),this},P.prototype.isZero=function(){return this.length===1&&this.words[0]===0},P.prototype.cmpn=function(F){var L=F<0;if(this.negative!==0&&!L)return-1;if(this.negative===0&&L)return 1;this._strip();var Z;if(this.length>1)Z=1;else{L&&(F=-F),E(F<=67108863,"Number is too big");var Q=this.words[0]|0;Z=Q===F?0:Q<F?-1:1}return this.negative!==0?-Z|0:Z},P.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var L=this.ucmp(F);return this.negative!==0?-L|0:L},P.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var L=0,Z=this.length-1;Z>=0;Z--){var Q=this.words[Z]|0,de=F.words[Z]|0;if(Q!==de){Q<de?L=-1:Q>de&&(L=1);break}}return L},P.prototype.gtn=function(F){return this.cmpn(F)===1},P.prototype.gt=function(F){return this.cmp(F)===1},P.prototype.gten=function(F){return this.cmpn(F)>=0},P.prototype.gte=function(F){return this.cmp(F)>=0},P.prototype.ltn=function(F){return this.cmpn(F)===-1},P.prototype.lt=function(F){return this.cmp(F)===-1},P.prototype.lten=function(F){return this.cmpn(F)<=0},P.prototype.lte=function(F){return this.cmp(F)<=0},P.prototype.eqn=function(F){return this.cmpn(F)===0},P.prototype.eq=function(F){return this.cmp(F)===0},P.red=function(F){return new ne(F)},P.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},P.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},P.prototype._forceRed=function(F){return this.red=F,this},P.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},P.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},P.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},P.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},P.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},P.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},P.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},P.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},P.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},P.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},P.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},P.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},P.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},P.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var pe={k256:null,p224:null,p192:null,p25519:null};function ie(q,F){this.name=q,this.p=new P(F,16),this.n=this.p.bitLength(),this.k=new P(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ie.prototype._tmp=function(){var F=new P(null);return F.words=new Array(Math.ceil(this.n/13)),F},ie.prototype.ireduce=function(F){var L=F,Z;do this.split(L,this.tmp),L=this.imulK(L),L=L.iadd(this.tmp),Z=L.bitLength();while(Z>this.n);var Q=Z<this.n?-1:L.ucmp(this.p);return Q===0?(L.words[0]=0,L.length=1):Q>0?L.isub(this.p):L.strip!==void 0?L.strip():L._strip(),L},ie.prototype.split=function(F,L){F.iushrn(this.n,0,L)},ie.prototype.imulK=function(F){return F.imul(this.k)};function he(){ie.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}A(he,ie),he.prototype.split=function(F,L){for(var Z=4194303,Q=Math.min(F.length,9),de=0;de<Q;de++)L.words[de]=F.words[de];if(L.length=Q,F.length<=9){F.words[0]=0,F.length=1;return}var ye=F.words[9];for(L.words[L.length++]=ye&Z,de=10;de<F.length;de++){var oe=F.words[de]|0;F.words[de-10]=(oe&Z)<<4|ye>>>22,ye=oe}ye>>>=22,F.words[de-10]=ye,ye===0&&F.length>10?F.length-=10:F.length-=9},he.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var L=0,Z=0;Z<F.length;Z++){var Q=F.words[Z]|0;L+=Q*977,F.words[Z]=L&67108863,L=Q*64+(L/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function ae(){ie.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}A(ae,ie);function te(){ie.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}A(te,ie);function ue(){ie.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}A(ue,ie),ue.prototype.imulK=function(F){for(var L=0,Z=0;Z<F.length;Z++){var Q=(F.words[Z]|0)*19+L,de=Q&67108863;Q>>>=26,F.words[Z]=de,L=Q}return L!==0&&(F.words[F.length++]=L),F},P._prime=function(F){if(pe[F])return pe[F];var L;if(F==="k256")L=new he;else if(F==="p224")L=new ae;else if(F==="p192")L=new te;else if(F==="p25519")L=new ue;else throw new Error("Unknown prime "+F);return pe[F]=L,L};function ne(q){if(typeof q=="string"){var F=P._prime(q);this.m=F.p,this.prime=F}else E(q.gtn(1),"modulus must be greater than 1"),this.m=q,this.prime=null}ne.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},ne.prototype._verify2=function(F,L){E((F.negative|L.negative)===0,"red works only with positives"),E(F.red&&F.red===L.red,"red works only with red numbers")},ne.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(U(F,F.umod(this.m)._forceRed(this)),F)},ne.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},ne.prototype.add=function(F,L){this._verify2(F,L);var Z=F.add(L);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},ne.prototype.iadd=function(F,L){this._verify2(F,L);var Z=F.iadd(L);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},ne.prototype.sub=function(F,L){this._verify2(F,L);var Z=F.sub(L);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},ne.prototype.isub=function(F,L){this._verify2(F,L);var Z=F.isub(L);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},ne.prototype.shl=function(F,L){return this._verify1(F),this.imod(F.ushln(L))},ne.prototype.imul=function(F,L){return this._verify2(F,L),this.imod(F.imul(L))},ne.prototype.mul=function(F,L){return this._verify2(F,L),this.imod(F.mul(L))},ne.prototype.isqr=function(F){return this.imul(F,F.clone())},ne.prototype.sqr=function(F){return this.mul(F,F)},ne.prototype.sqrt=function(F){if(F.isZero())return F.clone();var L=this.m.andln(3);if(E(L%2===1),L===3){var Z=this.m.add(new P(1)).iushrn(2);return this.pow(F,Z)}for(var Q=this.m.subn(1),de=0;!Q.isZero()&&Q.andln(1)===0;)de++,Q.iushrn(1);E(!Q.isZero());var ye=new P(1).toRed(this),oe=ye.redNeg(),se=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new P(2*Y*Y).toRed(this);this.pow(Y,se).cmp(oe)!==0;)Y.redIAdd(oe);for(var ce=this.pow(Y,Q),we=this.pow(F,Q.addn(1).iushrn(1)),Pe=this.pow(F,Q),Se=de;Pe.cmp(ye)!==0;){for(var Be=Pe,Ie=0;Be.cmp(ye)!==0;Ie++)Be=Be.redSqr();E(Ie<Se);var Re=this.pow(ce,new P(1).iushln(Se-Ie-1));we=we.redMul(Re),ce=Re.redSqr(),Pe=Pe.redMul(ce),Se=Ie}return we},ne.prototype.invm=function(F){var L=F._invmp(this.m);return L.negative!==0?(L.negative=0,this.imod(L).redNeg()):this.imod(L)},ne.prototype.pow=function(F,L){if(L.isZero())return new P(1).toRed(this);if(L.cmpn(1)===0)return F.clone();var Z=4,Q=new Array(1<<Z);Q[0]=new P(1).toRed(this),Q[1]=F;for(var de=2;de<Q.length;de++)Q[de]=this.mul(Q[de-1],F);var ye=Q[0],oe=0,se=0,Y=L.bitLength()%26;for(Y===0&&(Y=26),de=L.length-1;de>=0;de--){for(var ce=L.words[de],we=Y-1;we>=0;we--){var Pe=ce>>we&1;if(ye!==Q[0]&&(ye=this.sqr(ye)),Pe===0&&oe===0){se=0;continue}oe<<=1,oe|=Pe,se++,!(se!==Z&&(de!==0||we!==0))&&(ye=this.mul(ye,Q[oe]),se=0,oe=0)}Y=26}return ye},ne.prototype.convertTo=function(F){var L=F.umod(this.m);return L===F?L.clone():L},ne.prototype.convertFrom=function(F){var L=F.clone();return L.red=null,L},P.mont=function(F){return new J(F)};function J(q){ne.call(this,q),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new P(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A(J,ne),J.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},J.prototype.convertFrom=function(F){var L=this.imod(F.mul(this.rinv));return L.red=null,L},J.prototype.imul=function(F,L){if(F.isZero()||L.isZero())return F.words[0]=0,F.length=1,F;var Z=F.imul(L),Q=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),de=Z.isub(Q).iushrn(this.shift),ye=de;return de.cmp(this.m)>=0?ye=de.isub(this.m):de.cmpn(0)<0&&(ye=de.iadd(this.m)),ye._forceRed(this)},J.prototype.mul=function(F,L){if(F.isZero()||L.isZero())return new P(0)._forceRed(this);var Z=F.mul(L),Q=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),de=Z.isub(Q).iushrn(this.shift),ye=de;return de.cmp(this.m)>=0?ye=de.isub(this.m):de.cmpn(0)<0&&(ye=de.iadd(this.m)),ye._forceRed(this)},J.prototype.invm=function(F){var L=this.imod(F._invmp(this.m).mul(this.r2));return L._forceRed(this)}})(v,commonjsGlobal)}(bn$1);var bnExports$1=bn$1.exports,BN$f=bnExports$1,randomBytes$3=browserExports$1;function blind(v){var _=getr(v),x=_.toRed(BN$f.mont(v.modulus)).redPow(new BN$f(v.publicExponent)).fromRed();return{blinder:x,unblinder:_.invm(v.modulus)}}function getr(v){var _=v.modulus.byteLength(),x;do x=new BN$f(randomBytes$3(_));while(x.cmp(v.modulus)>=0||!x.umod(v.prime1)||!x.umod(v.prime2));return x}function crt$2(v,_){var x=blind(_),E=_.modulus.byteLength(),A=new BN$f(v).mul(x.blinder).umod(_.modulus),P=A.toRed(BN$f.mont(_.prime1)),T=A.toRed(BN$f.mont(_.prime2)),O=_.coefficient,k=_.prime1,C=_.prime2,U=P.redPow(_.exponent1).fromRed(),N=T.redPow(_.exponent2).fromRed(),H=U.isub(N).imul(O).umod(k).imul(C);return N.iadd(H).imul(x.unblinder).umod(_.modulus).toArrayLike(dist$4.Buffer,"be",E)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic$1={};const name="elliptic",version="6.5.4",description="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name,version,description,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$m={};(function(v){var _=v,x=bnExports$2,E=minimalisticAssert,A=utils$E;_.assert=E,_.toArray=A.toArray,_.zero2=A.zero2,_.toHex=A.toHex,_.encode=A.encode;function P(U,N,H){var D=new Array(Math.max(U.bitLength(),H)+1);D.fill(0);for(var j=1<<N+1,V=U.clone(),X=0;X<D.length;X++){var re,ee=V.andln(j-1);V.isOdd()?(ee>(j>>1)-1?re=(j>>1)-ee:re=ee,V.isubn(re)):re=0,D[X]=re,V.iushrn(1)}return D}_.getNAF=P;function T(U,N){var H=[[],[]];U=U.clone(),N=N.clone();for(var D=0,j=0,V;U.cmpn(-D)>0||N.cmpn(-j)>0;){var X=U.andln(3)+D&3,re=N.andln(3)+j&3;X===3&&(X=-1),re===3&&(re=-1);var ee;X&1?(V=U.andln(7)+D&7,(V===3||V===5)&&re===2?ee=-X:ee=X):ee=0,H[0].push(ee);var fe;re&1?(V=N.andln(7)+j&7,(V===3||V===5)&&X===2?fe=-re:fe=re):fe=0,H[1].push(fe),2*D===ee+1&&(D=1-D),2*j===fe+1&&(j=1-j),U.iushrn(1),N.iushrn(1)}return H}_.getJSF=T;function O(U,N,H){var D="_"+N;U.prototype[N]=function(){return this[D]!==void 0?this[D]:this[D]=H.call(this)}}_.cachedProperty=O;function k(U){return typeof U=="string"?_.toArray(U,"hex"):U}_.parseBytes=k;function C(U){return new x(U,"hex","le")}_.intFromLE=C})(utils$m);var curve$3={},BN$e=bnExports$2,utils$l=utils$m,getNAF=utils$l.getNAF,getJSF=utils$l.getJSF,assert$g=utils$l.assert;function BaseCurve(v,_){this.type=v,this.p=new BN$e(_.p,16),this.red=_.prime?BN$e.red(_.prime):BN$e.mont(this.p),this.zero=new BN$e(0).toRed(this.red),this.one=new BN$e(1).toRed(this.red),this.two=new BN$e(2).toRed(this.red),this.n=_.n&&new BN$e(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$5=BaseCurve;BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(_,x){assert$g(_.precomputed);var E=_._getDoubles(),A=getNAF(x,1,this._bitLength),P=(1<<E.step+1)-(E.step%2===0?2:1);P/=3;var T=[],O,k;for(O=0;O<A.length;O+=E.step){k=0;for(var C=O+E.step-1;C>=O;C--)k=(k<<1)+A[C];T.push(k)}for(var U=this.jpoint(null,null,null),N=this.jpoint(null,null,null),H=P;H>0;H--){for(O=0;O<T.length;O++)k=T[O],k===H?N=N.mixedAdd(E.points[O]):k===-H&&(N=N.mixedAdd(E.points[O].neg()));U=U.add(N)}return U.toP()},BaseCurve.prototype._wnafMul=function(_,x){var E=4,A=_._getNAFPoints(E);E=A.wnd;for(var P=A.points,T=getNAF(x,E,this._bitLength),O=this.jpoint(null,null,null),k=T.length-1;k>=0;k--){for(var C=0;k>=0&&T[k]===0;k--)C++;if(k>=0&&C++,O=O.dblp(C),k<0)break;var U=T[k];assert$g(U!==0),_.type==="affine"?U>0?O=O.mixedAdd(P[U-1>>1]):O=O.mixedAdd(P[-U-1>>1].neg()):U>0?O=O.add(P[U-1>>1]):O=O.add(P[-U-1>>1].neg())}return _.type==="affine"?O.toP():O},BaseCurve.prototype._wnafMulAdd=function(_,x,E,A,P){var T=this._wnafT1,O=this._wnafT2,k=this._wnafT3,C=0,U,N,H;for(U=0;U<A;U++){H=x[U];var D=H._getNAFPoints(_);T[U]=D.wnd,O[U]=D.points}for(U=A-1;U>=1;U-=2){var j=U-1,V=U;if(T[j]!==1||T[V]!==1){k[j]=getNAF(E[j],T[j],this._bitLength),k[V]=getNAF(E[V],T[V],this._bitLength),C=Math.max(k[j].length,C),C=Math.max(k[V].length,C);continue}var X=[x[j],null,null,x[V]];x[j].y.cmp(x[V].y)===0?(X[1]=x[j].add(x[V]),X[2]=x[j].toJ().mixedAdd(x[V].neg())):x[j].y.cmp(x[V].y.redNeg())===0?(X[1]=x[j].toJ().mixedAdd(x[V]),X[2]=x[j].add(x[V].neg())):(X[1]=x[j].toJ().mixedAdd(x[V]),X[2]=x[j].toJ().mixedAdd(x[V].neg()));var re=[-3,-1,-5,-7,0,7,5,1,3],ee=getJSF(E[j],E[V]);for(C=Math.max(ee[0].length,C),k[j]=new Array(C),k[V]=new Array(C),N=0;N<C;N++){var fe=ee[0][N]|0,le=ee[1][N]|0;k[j][N]=re[(fe+1)*3+(le+1)],k[V][N]=0,O[j]=X}}var pe=this.jpoint(null,null,null),ie=this._wnafT4;for(U=C;U>=0;U--){for(var he=0;U>=0;){var ae=!0;for(N=0;N<A;N++)ie[N]=k[N][U]|0,ie[N]!==0&&(ae=!1);if(!ae)break;he++,U--}if(U>=0&&he++,pe=pe.dblp(he),U<0)break;for(N=0;N<A;N++){var te=ie[N];te!==0&&(te>0?H=O[N][te-1>>1]:te<0&&(H=O[N][-te-1>>1].neg()),H.type==="affine"?pe=pe.mixedAdd(H):pe=pe.add(H))}}for(U=0;U<A;U++)O[U]=null;return P?pe:pe.toP()};function BasePoint(v,_){this.curve=v,this.type=_,this.precomputed=null}BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(_,x){_=utils$l.toArray(_,x);var E=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*E){_[0]===6?assert$g(_[_.length-1]%2===0):_[0]===7&&assert$g(_[_.length-1]%2===1);var A=this.point(_.slice(1,1+E),_.slice(1+E,1+2*E));return A}else if((_[0]===2||_[0]===3)&&_.length-1===E)return this.pointFromX(_.slice(1,1+E),_[0]===3);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(_){return this.encode(_,!0)},BasePoint.prototype._encode=function(_){var x=this.curve.p.byteLength(),E=this.getX().toArray("be",x);return _?[this.getY().isEven()?2:3].concat(E):[4].concat(E,this.getY().toArray("be",x))},BasePoint.prototype.encode=function(_,x){return utils$l.encode(this._encode(x),_)},BasePoint.prototype.precompute=function(_){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,_),x.beta=this._getBeta(),this.precomputed=x,this},BasePoint.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return x?x.points.length>=Math.ceil((_.bitLength()+1)/x.step):!1},BasePoint.prototype._getDoubles=function(_,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var E=[this],A=this,P=0;P<x;P+=_){for(var T=0;T<_;T++)A=A.dbl();E.push(A)}return{step:_,points:E}},BasePoint.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],E=(1<<_)-1,A=E===1?null:this.dbl(),P=1;P<E;P++)x[P]=x[P-1].add(A);return{wnd:_,points:x}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(_){for(var x=this,E=0;E<_;E++)x=x.dbl();return x};var utils$k=utils$m,BN$d=bnExports$2,inherits$9=inherits_browserExports,Base$2=base$5,assert$f=utils$k.assert;function ShortCurve(v){Base$2.call(this,"short",v),this.a=new BN$d(v.a,16).toRed(this.red),this.b=new BN$d(v.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(v),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$9(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function(_){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var x,E;if(_.beta)x=new BN$d(_.beta,16).toRed(this.red);else{var A=this._getEndoRoots(this.p);x=A[0].cmp(A[1])<0?A[0]:A[1],x=x.toRed(this.red)}if(_.lambda)E=new BN$d(_.lambda,16);else{var P=this._getEndoRoots(this.n);this.g.mul(P[0]).x.cmp(this.g.x.redMul(x))===0?E=P[0]:(E=P[1],assert$f(this.g.mul(E).x.cmp(this.g.x.redMul(x))===0))}var T;return _.basis?T=_.basis.map(function(O){return{a:new BN$d(O.a,16),b:new BN$d(O.b,16)}}):T=this._getEndoBasis(E),{beta:x,lambda:E,basis:T}}},ShortCurve.prototype._getEndoRoots=function(_){var x=_===this.p?this.red:BN$d.mont(_),E=new BN$d(2).toRed(x).redInvm(),A=E.redNeg(),P=new BN$d(3).toRed(x).redNeg().redSqrt().redMul(E),T=A.redAdd(P).fromRed(),O=A.redSub(P).fromRed();return[T,O]},ShortCurve.prototype._getEndoBasis=function(_){for(var x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),E=_,A=this.n.clone(),P=new BN$d(1),T=new BN$d(0),O=new BN$d(0),k=new BN$d(1),C,U,N,H,D,j,V,X=0,re,ee;E.cmpn(0)!==0;){var fe=A.div(E);re=A.sub(fe.mul(E)),ee=O.sub(fe.mul(P));var le=k.sub(fe.mul(T));if(!N&&re.cmp(x)<0)C=V.neg(),U=P,N=re.neg(),H=ee;else if(N&&++X===2)break;V=re,A=E,E=re,O=P,P=ee,k=T,T=le}D=re.neg(),j=ee;var pe=N.sqr().add(H.sqr()),ie=D.sqr().add(j.sqr());return ie.cmp(pe)>=0&&(D=C,j=U),N.negative&&(N=N.neg(),H=H.neg()),D.negative&&(D=D.neg(),j=j.neg()),[{a:N,b:H},{a:D,b:j}]},ShortCurve.prototype._endoSplit=function(_){var x=this.endo.basis,E=x[0],A=x[1],P=A.b.mul(_).divRound(this.n),T=E.b.neg().mul(_).divRound(this.n),O=P.mul(E.a),k=T.mul(A.a),C=P.mul(E.b),U=T.mul(A.b),N=_.sub(O).sub(k),H=C.add(U).neg();return{k1:N,k2:H}},ShortCurve.prototype.pointFromX=function(_,x){_=new BN$d(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr().redMul(_).redIAdd(_.redMul(this.a)).redIAdd(this.b),A=E.redSqrt();if(A.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var P=A.fromRed().isOdd();return(x&&!P||!x&&P)&&(A=A.redNeg()),this.point(_,A)},ShortCurve.prototype.validate=function(_){if(_.inf)return!0;var x=_.x,E=_.y,A=this.a.redMul(x),P=x.redSqr().redMul(x).redIAdd(A).redIAdd(this.b);return E.redSqr().redISub(P).cmpn(0)===0},ShortCurve.prototype._endoWnafMulAdd=function(_,x,E){for(var A=this._endoWnafT1,P=this._endoWnafT2,T=0;T<_.length;T++){var O=this._endoSplit(x[T]),k=_[T],C=k._getBeta();O.k1.negative&&(O.k1.ineg(),k=k.neg(!0)),O.k2.negative&&(O.k2.ineg(),C=C.neg(!0)),A[T*2]=k,A[T*2+1]=C,P[T*2]=O.k1,P[T*2+1]=O.k2}for(var U=this._wnafMulAdd(1,A,P,T*2,E),N=0;N<T*2;N++)A[N]=null,P[N]=null;return U};function Point$2(v,_,x,E){Base$2.BasePoint.call(this,v,"affine"),_===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$d(_,16),this.y=new BN$d(x,16),E&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$9(Point$2,Base$2.BasePoint),ShortCurve.prototype.point=function(_,x,E){return new Point$2(this,_,x,E)},ShortCurve.prototype.pointFromJSON=function(_,x){return Point$2.fromJSON(this,_,x)},Point$2.prototype._getBeta=function(){if(this.curve.endo){var _=this.precomputed;if(_&&_.beta)return _.beta;var x=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(_){var E=this.curve,A=function(P){return E.point(P.x.redMul(E.endo.beta),P.y)};_.beta=x,x.precomputed={beta:null,naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(A)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(A)}}}return x}},Point$2.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point$2.fromJSON=function(_,x,E){typeof x=="string"&&(x=JSON.parse(x));var A=_.point(x[0],x[1],E);if(!x[2])return A;function P(O){return _.point(O[0],O[1],E)}var T=x[2];return A.precomputed={beta:null,doubles:T.doubles&&{step:T.doubles.step,points:[A].concat(T.doubles.points.map(P))},naf:T.naf&&{wnd:T.naf.wnd,points:[A].concat(T.naf.points.map(P))}},A},Point$2.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point$2.prototype.isInfinity=function(){return this.inf},Point$2.prototype.add=function(_){if(this.inf)return _;if(_.inf)return this;if(this.eq(_))return this.dbl();if(this.neg().eq(_))return this.curve.point(null,null);if(this.x.cmp(_.x)===0)return this.curve.point(null,null);var x=this.y.redSub(_.y);x.cmpn(0)!==0&&(x=x.redMul(this.x.redSub(_.x).redInvm()));var E=x.redSqr().redISub(this.x).redISub(_.x),A=x.redMul(this.x.redSub(E)).redISub(this.y);return this.curve.point(E,A)},Point$2.prototype.dbl=function(){if(this.inf)return this;var _=this.y.redAdd(this.y);if(_.cmpn(0)===0)return this.curve.point(null,null);var x=this.curve.a,E=this.x.redSqr(),A=_.redInvm(),P=E.redAdd(E).redIAdd(E).redIAdd(x).redMul(A),T=P.redSqr().redISub(this.x.redAdd(this.x)),O=P.redMul(this.x.redSub(T)).redISub(this.y);return this.curve.point(T,O)},Point$2.prototype.getX=function(){return this.x.fromRed()},Point$2.prototype.getY=function(){return this.y.fromRed()},Point$2.prototype.mul=function(_){return _=new BN$d(_,16),this.isInfinity()?this:this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve.endo?this.curve._endoWnafMulAdd([this],[_]):this.curve._wnafMul(this,_)},Point$2.prototype.mulAdd=function(_,x,E){var A=[this,x],P=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(A,P):this.curve._wnafMulAdd(1,A,P,2)},Point$2.prototype.jmulAdd=function(_,x,E){var A=[this,x],P=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(A,P,!0):this.curve._wnafMulAdd(1,A,P,2,!0)},Point$2.prototype.eq=function(_){return this===_||this.inf===_.inf&&(this.inf||this.x.cmp(_.x)===0&&this.y.cmp(_.y)===0)},Point$2.prototype.neg=function(_){if(this.inf)return this;var x=this.curve.point(this.x,this.y.redNeg());if(_&&this.precomputed){var E=this.precomputed,A=function(P){return P.neg()};x.precomputed={naf:E.naf&&{wnd:E.naf.wnd,points:E.naf.points.map(A)},doubles:E.doubles&&{step:E.doubles.step,points:E.doubles.points.map(A)}}}return x},Point$2.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var _=this.curve.jpoint(this.x,this.y,this.curve.one);return _};function JPoint(v,_,x,E){Base$2.BasePoint.call(this,v,"jacobian"),_===null&&x===null&&E===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$d(0)):(this.x=new BN$d(_,16),this.y=new BN$d(x,16),this.z=new BN$d(E,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$9(JPoint,Base$2.BasePoint),ShortCurve.prototype.jpoint=function(_,x,E){return new JPoint(this,_,x,E)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var _=this.z.redInvm(),x=_.redSqr(),E=this.x.redMul(x),A=this.y.redMul(x).redMul(_);return this.curve.point(E,A)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(_){if(this.isInfinity())return _;if(_.isInfinity())return this;var x=_.z.redSqr(),E=this.z.redSqr(),A=this.x.redMul(x),P=_.x.redMul(E),T=this.y.redMul(x.redMul(_.z)),O=_.y.redMul(E.redMul(this.z)),k=A.redSub(P),C=T.redSub(O);if(k.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var U=k.redSqr(),N=U.redMul(k),H=A.redMul(U),D=C.redSqr().redIAdd(N).redISub(H).redISub(H),j=C.redMul(H.redISub(D)).redISub(T.redMul(N)),V=this.z.redMul(_.z).redMul(k);return this.curve.jpoint(D,j,V)},JPoint.prototype.mixedAdd=function(_){if(this.isInfinity())return _.toJ();if(_.isInfinity())return this;var x=this.z.redSqr(),E=this.x,A=_.x.redMul(x),P=this.y,T=_.y.redMul(x).redMul(this.z),O=E.redSub(A),k=P.redSub(T);if(O.cmpn(0)===0)return k.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var C=O.redSqr(),U=C.redMul(O),N=E.redMul(C),H=k.redSqr().redIAdd(U).redISub(N).redISub(N),D=k.redMul(N.redISub(H)).redISub(P.redMul(U)),j=this.z.redMul(O);return this.curve.jpoint(H,D,j)},JPoint.prototype.dblp=function(_){if(_===0)return this;if(this.isInfinity())return this;if(!_)return this.dbl();var x;if(this.curve.zeroA||this.curve.threeA){var E=this;for(x=0;x<_;x++)E=E.dbl();return E}var A=this.curve.a,P=this.curve.tinv,T=this.x,O=this.y,k=this.z,C=k.redSqr().redSqr(),U=O.redAdd(O);for(x=0;x<_;x++){var N=T.redSqr(),H=U.redSqr(),D=H.redSqr(),j=N.redAdd(N).redIAdd(N).redIAdd(A.redMul(C)),V=T.redMul(H),X=j.redSqr().redISub(V.redAdd(V)),re=V.redISub(X),ee=j.redMul(re);ee=ee.redIAdd(ee).redISub(D);var fe=U.redMul(k);x+1<_&&(C=C.redMul(D)),T=X,k=fe,U=ee}return this.curve.jpoint(T,U.redMul(P),k)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var _,x,E;if(this.zOne){var A=this.x.redSqr(),P=this.y.redSqr(),T=P.redSqr(),O=this.x.redAdd(P).redSqr().redISub(A).redISub(T);O=O.redIAdd(O);var k=A.redAdd(A).redIAdd(A),C=k.redSqr().redISub(O).redISub(O),U=T.redIAdd(T);U=U.redIAdd(U),U=U.redIAdd(U),_=C,x=k.redMul(O.redISub(C)).redISub(U),E=this.y.redAdd(this.y)}else{var N=this.x.redSqr(),H=this.y.redSqr(),D=H.redSqr(),j=this.x.redAdd(H).redSqr().redISub(N).redISub(D);j=j.redIAdd(j);var V=N.redAdd(N).redIAdd(N),X=V.redSqr(),re=D.redIAdd(D);re=re.redIAdd(re),re=re.redIAdd(re),_=X.redISub(j).redISub(j),x=V.redMul(j.redISub(_)).redISub(re),E=this.y.redMul(this.z),E=E.redIAdd(E)}return this.curve.jpoint(_,x,E)},JPoint.prototype._threeDbl=function(){var _,x,E;if(this.zOne){var A=this.x.redSqr(),P=this.y.redSqr(),T=P.redSqr(),O=this.x.redAdd(P).redSqr().redISub(A).redISub(T);O=O.redIAdd(O);var k=A.redAdd(A).redIAdd(A).redIAdd(this.curve.a),C=k.redSqr().redISub(O).redISub(O);_=C;var U=T.redIAdd(T);U=U.redIAdd(U),U=U.redIAdd(U),x=k.redMul(O.redISub(C)).redISub(U),E=this.y.redAdd(this.y)}else{var N=this.z.redSqr(),H=this.y.redSqr(),D=this.x.redMul(H),j=this.x.redSub(N).redMul(this.x.redAdd(N));j=j.redAdd(j).redIAdd(j);var V=D.redIAdd(D);V=V.redIAdd(V);var X=V.redAdd(V);_=j.redSqr().redISub(X),E=this.y.redAdd(this.z).redSqr().redISub(H).redISub(N);var re=H.redSqr();re=re.redIAdd(re),re=re.redIAdd(re),re=re.redIAdd(re),x=j.redMul(V.redISub(_)).redISub(re)}return this.curve.jpoint(_,x,E)},JPoint.prototype._dbl=function(){var _=this.curve.a,x=this.x,E=this.y,A=this.z,P=A.redSqr().redSqr(),T=x.redSqr(),O=E.redSqr(),k=T.redAdd(T).redIAdd(T).redIAdd(_.redMul(P)),C=x.redAdd(x);C=C.redIAdd(C);var U=C.redMul(O),N=k.redSqr().redISub(U.redAdd(U)),H=U.redISub(N),D=O.redSqr();D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var j=k.redMul(H).redISub(D),V=E.redAdd(E).redMul(A);return this.curve.jpoint(N,j,V)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr(),A=x.redSqr(),P=_.redAdd(_).redIAdd(_),T=P.redSqr(),O=this.x.redAdd(x).redSqr().redISub(_).redISub(A);O=O.redIAdd(O),O=O.redAdd(O).redIAdd(O),O=O.redISub(T);var k=O.redSqr(),C=A.redIAdd(A);C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C);var U=P.redIAdd(O).redSqr().redISub(T).redISub(k).redISub(C),N=x.redMul(U);N=N.redIAdd(N),N=N.redIAdd(N);var H=this.x.redMul(k).redISub(N);H=H.redIAdd(H),H=H.redIAdd(H);var D=this.y.redMul(U.redMul(C.redISub(U)).redISub(O.redMul(k)));D=D.redIAdd(D),D=D.redIAdd(D),D=D.redIAdd(D);var j=this.z.redAdd(O).redSqr().redISub(E).redISub(k);return this.curve.jpoint(H,D,j)},JPoint.prototype.mul=function(_,x){return _=new BN$d(_,x),this.curve._wnafMul(this,_)},JPoint.prototype.eq=function(_){if(_.type==="affine")return this.eq(_.toJ());if(this===_)return!0;var x=this.z.redSqr(),E=_.z.redSqr();if(this.x.redMul(E).redISub(_.x.redMul(x)).cmpn(0)!==0)return!1;var A=x.redMul(this.z),P=E.redMul(_.z);return this.y.redMul(P).redISub(_.y.redMul(A)).cmpn(0)===0},JPoint.prototype.eqXToP=function(_){var x=this.z.redSqr(),E=_.toRed(this.curve.red).redMul(x);if(this.x.cmp(E)===0)return!0;for(var A=_.clone(),P=this.curve.redN.redMul(x);;){if(A.iadd(this.curve.n),A.cmp(this.curve.p)>=0)return!1;if(E.redIAdd(P),this.x.cmp(E)===0)return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$c=bnExports$2,inherits$8=inherits_browserExports,Base$1=base$5,utils$j=utils$m;function MontCurve(v){Base$1.call(this,"mont",v),this.a=new BN$c(v.a,16).toRed(this.red),this.b=new BN$c(v.b,16).toRed(this.red),this.i4=new BN$c(4).toRed(this.red).redInvm(),this.two=new BN$c(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$8(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(_){var x=_.normalize().x,E=x.redSqr(),A=E.redMul(x).redAdd(E.redMul(this.a)).redAdd(x),P=A.redSqrt();return P.redSqr().cmp(A)===0};function Point$1(v,_,x){Base$1.BasePoint.call(this,v,"projective"),_===null&&x===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$c(_,16),this.z=new BN$c(x,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$8(Point$1,Base$1.BasePoint),MontCurve.prototype.decodePoint=function(_,x){return this.point(utils$j.toArray(_,x),1)},MontCurve.prototype.point=function(_,x){return new Point$1(this,_,x)},MontCurve.prototype.pointFromJSON=function(_){return Point$1.fromJSON(this,_)},Point$1.prototype.precompute=function(){},Point$1.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point$1.fromJSON=function(_,x){return new Point$1(_,x[0],x[1]||_.one)},Point$1.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Point$1.prototype.dbl=function(){var _=this.x.redAdd(this.z),x=_.redSqr(),E=this.x.redSub(this.z),A=E.redSqr(),P=x.redSub(A),T=x.redMul(A),O=P.redMul(A.redAdd(this.curve.a24.redMul(P)));return this.curve.point(T,O)},Point$1.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.diffAdd=function(_,x){var E=this.x.redAdd(this.z),A=this.x.redSub(this.z),P=_.x.redAdd(_.z),T=_.x.redSub(_.z),O=T.redMul(E),k=P.redMul(A),C=x.z.redMul(O.redAdd(k).redSqr()),U=x.x.redMul(O.redISub(k).redSqr());return this.curve.point(C,U)},Point$1.prototype.mul=function(_){for(var x=_.clone(),E=this,A=this.curve.point(null,null),P=this,T=[];x.cmpn(0)!==0;x.iushrn(1))T.push(x.andln(1));for(var O=T.length-1;O>=0;O--)T[O]===0?(E=E.diffAdd(A,P),A=A.dbl()):(A=E.diffAdd(A,P),E=E.dbl());return A},Point$1.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point$1.prototype.eq=function(_){return this.getX().cmp(_.getX())===0},Point$1.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point$1.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$i=utils$m,BN$b=bnExports$2,inherits$7=inherits_browserExports,Base=base$5,assert$e=utils$i.assert;function EdwardsCurve(v){this.twisted=(v.a|0)!==1,this.mOneA=this.twisted&&(v.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",v),this.a=new BN$b(v.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$b(v.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$b(v.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$e(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(v.c|0)===1}inherits$7(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)},EdwardsCurve.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)},EdwardsCurve.prototype.jpoint=function(_,x,E,A){return this.point(_,x,E,A)},EdwardsCurve.prototype.pointFromX=function(_,x){_=new BN$b(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),A=this.c2.redSub(this.a.redMul(E)),P=this.one.redSub(this.c2.redMul(this.d).redMul(E)),T=A.redMul(P.redInvm()),O=T.redSqrt();if(O.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");var k=O.fromRed().isOdd();return(x&&!k||!x&&k)&&(O=O.redNeg()),this.point(_,O)},EdwardsCurve.prototype.pointFromY=function(_,x){_=new BN$b(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),A=E.redSub(this.c2),P=E.redMul(this.d).redMul(this.c2).redSub(this.a),T=A.redMul(P.redInvm());if(T.cmp(this.zero)===0){if(x)throw new Error("invalid point");return this.point(this.zero,_)}var O=T.redSqrt();if(O.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");return O.fromRed().isOdd()!==x&&(O=O.redNeg()),this.point(O,_)},EdwardsCurve.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var x=_.x.redSqr(),E=_.y.redSqr(),A=x.redMul(this.a).redAdd(E),P=this.c2.redMul(this.one.redAdd(this.d.redMul(x).redMul(E)));return A.cmp(P)===0};function Point(v,_,x,E,A){Base.BasePoint.call(this,v,"projective"),_===null&&x===null&&E===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$b(_,16),this.y=new BN$b(x,16),this.z=E?new BN$b(E,16):this.curve.one,this.t=A&&new BN$b(A,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$7(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(_){return Point.fromJSON(this,_)},EdwardsCurve.prototype.point=function(_,x,E,A){return new Point(this,_,x,E,A)},Point.fromJSON=function(_,x){return new Point(_,x[0],x[1],x[2])},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},Point.prototype._extDbl=function(){var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr();E=E.redIAdd(E);var A=this.curve._mulA(_),P=this.x.redAdd(this.y).redSqr().redISub(_).redISub(x),T=A.redAdd(x),O=T.redSub(E),k=A.redSub(x),C=P.redMul(O),U=T.redMul(k),N=P.redMul(k),H=O.redMul(T);return this.curve.point(C,U,H,N)},Point.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),E=this.y.redSqr(),A,P,T,O,k,C;if(this.curve.twisted){O=this.curve._mulA(x);var U=O.redAdd(E);this.zOne?(A=_.redSub(x).redSub(E).redMul(U.redSub(this.curve.two)),P=U.redMul(O.redSub(E)),T=U.redSqr().redSub(U).redSub(U)):(k=this.z.redSqr(),C=U.redSub(k).redISub(k),A=_.redSub(x).redISub(E).redMul(C),P=U.redMul(O.redSub(E)),T=U.redMul(C))}else O=x.redAdd(E),k=this.curve._mulC(this.z).redSqr(),C=O.redSub(k).redSub(k),A=this.curve._mulC(_.redISub(O)).redMul(C),P=this.curve._mulC(O).redMul(x.redISub(E)),T=O.redMul(C);return this.curve.point(A,P,T)},Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function(_){var x=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),E=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),A=this.t.redMul(this.curve.dd).redMul(_.t),P=this.z.redMul(_.z.redAdd(_.z)),T=E.redSub(x),O=P.redSub(A),k=P.redAdd(A),C=E.redAdd(x),U=T.redMul(O),N=k.redMul(C),H=T.redMul(C),D=O.redMul(k);return this.curve.point(U,N,D,H)},Point.prototype._projAdd=function(_){var x=this.z.redMul(_.z),E=x.redSqr(),A=this.x.redMul(_.x),P=this.y.redMul(_.y),T=this.curve.d.redMul(A).redMul(P),O=E.redSub(T),k=E.redAdd(T),C=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(A).redISub(P),U=x.redMul(O).redMul(C),N,H;return this.curve.twisted?(N=x.redMul(k).redMul(P.redSub(this.curve._mulA(A))),H=O.redMul(k)):(N=x.redMul(k).redMul(P.redSub(A)),H=this.curve._mulC(O).redMul(k)),this.curve.point(U,N,H)},Point.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)},Point.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)},Point.prototype.mulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!1)},Point.prototype.jmulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!0)},Point.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0},Point.prototype.eqXToP=function(_){var x=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(x)===0)return!0;for(var E=_.clone(),A=this.curve.redN.redMul(this.z);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(A),this.x.cmp(x)===0)return!0}},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add,function(v){var _=v;_.base=base$5,_.short=short,_.mont=mont,_.edwards=edwards}(curve$3);var curves$4={},secp256k1$4,hasRequiredSecp256k1$1;function requireSecp256k1$1(){return hasRequiredSecp256k1$1||(hasRequiredSecp256k1$1=1,secp256k1$4={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$4}(function(v){var _=v,x=hash$4,E=curve$3,A=utils$m,P=A.assert;function T(C){C.type==="short"?this.curve=new E.short(C):C.type==="edwards"?this.curve=new E.edwards(C):this.curve=new E.mont(C),this.g=this.curve.g,this.n=this.curve.n,this.hash=C.hash,P(this.g.validate(),"Invalid curve"),P(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}_.PresetCurve=T;function O(C,U){Object.defineProperty(_,C,{configurable:!0,enumerable:!0,get:function(){var N=new T(U);return Object.defineProperty(_,C,{configurable:!0,enumerable:!0,value:N}),N}})}O("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:x.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),O("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:x.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),O("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:x.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),O("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:x.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),O("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:x.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),O("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["9"]}),O("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var k;try{k=requireSecp256k1$1()}catch{k=void 0}O("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:x.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",k]})})(curves$4);var BN$a=bnExports$2,utils$h=utils$m,assert$d=utils$h.assert;function KeyPair$6(v,_){this.ec=v,this.priv=null,this.pub=null,_.priv&&this._importPrivate(_.priv,_.privEnc),_.pub&&this._importPublic(_.pub,_.pubEnc)}var key$4=KeyPair$6;KeyPair$6.fromPublic=function(_,x,E){return x instanceof KeyPair$6?x:new KeyPair$6(_,{pub:x,pubEnc:E})},KeyPair$6.fromPrivate=function(_,x,E){return x instanceof KeyPair$6?x:new KeyPair$6(_,{priv:x,privEnc:E})},KeyPair$6.prototype.validate=function(){var _=this.getPublic();return _.isInfinity()?{result:!1,reason:"Invalid public key"}:_.validate()?_.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair$6.prototype.getPublic=function(_,x){return typeof _=="string"&&(x=_,_=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,_):this.pub},KeyPair$6.prototype.getPrivate=function(_){return _==="hex"?this.priv.toString(16,2):this.priv},KeyPair$6.prototype._importPrivate=function(_,x){this.priv=new BN$a(_,x||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair$6.prototype._importPublic=function(_,x){if(_.x||_.y){this.ec.curve.type==="mont"?assert$d(_.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$d(_.x&&_.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(_.x,_.y);return}this.pub=this.ec.curve.decodePoint(_,x)},KeyPair$6.prototype.derive=function(_){return _.validate()||assert$d(_.validate(),"public point not validated"),_.mul(this.priv).getX()},KeyPair$6.prototype.sign=function(_,x,E){return this.ec.sign(_,this,x,E)},KeyPair$6.prototype.verify=function(_,x){return this.ec.verify(_,x,this)},KeyPair$6.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$9=bnExports$2,utils$g=utils$m,assert$c=utils$g.assert;function Signature$6(v,_){if(v instanceof Signature$6)return v;this._importDER(v,_)||(assert$c(v.r&&v.s,"Signature without r or s"),this.r=new BN$9(v.r,16),this.s=new BN$9(v.s,16),v.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=v.recoveryParam)}var signature$3=Signature$6;function Position$1(){this.place=0}function getLength$1(v,_){var x=v[_.place++];if(!(x&128))return x;var E=x&15;if(E===0||E>4)return!1;for(var A=0,P=0,T=_.place;P<E;P++,T++)A<<=8,A|=v[T],A>>>=0;return A<=127?!1:(_.place=T,A)}function rmPadding$1(v){for(var _=0,x=v.length-1;!v[_]&&!(v[_+1]&128)&&_<x;)_++;return _===0?v:v.slice(_)}Signature$6.prototype._importDER=function(_,x){_=utils$g.toArray(_,x);var E=new Position$1;if(_[E.place++]!==48)return!1;var A=getLength$1(_,E);if(A===!1||A+E.place!==_.length||_[E.place++]!==2)return!1;var P=getLength$1(_,E);if(P===!1)return!1;var T=_.slice(E.place,P+E.place);if(E.place+=P,_[E.place++]!==2)return!1;var O=getLength$1(_,E);if(O===!1||_.length!==O+E.place)return!1;var k=_.slice(E.place,O+E.place);if(T[0]===0)if(T[1]&128)T=T.slice(1);else return!1;if(k[0]===0)if(k[1]&128)k=k.slice(1);else return!1;return this.r=new BN$9(T),this.s=new BN$9(k),this.recoveryParam=null,!0};function constructLength$1(v,_){if(_<128){v.push(_);return}var x=1+(Math.log(_)/Math.LN2>>>3);for(v.push(x|128);--x;)v.push(_>>>(x<<3)&255);v.push(_)}Signature$6.prototype.toDER=function(_){var x=this.r.toArray(),E=this.s.toArray();for(x[0]&128&&(x=[0].concat(x)),E[0]&128&&(E=[0].concat(E)),x=rmPadding$1(x),E=rmPadding$1(E);!E[0]&&!(E[1]&128);)E=E.slice(1);var A=[2];constructLength$1(A,x.length),A=A.concat(x),A.push(2),constructLength$1(A,E.length);var P=A.concat(E),T=[48];return constructLength$1(T,P.length),T=T.concat(P),utils$g.encode(T,_)};var ec$3,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$3;hasRequiredEc=1;var v=bnExports$2,_=hmacDrbg,x=utils$m,E=curves$4,A=requireBrorand(),P=x.assert,T=key$4,O=signature$3;function k(C){if(!(this instanceof k))return new k(C);typeof C=="string"&&(P(Object.prototype.hasOwnProperty.call(E,C),"Unknown curve "+C),C=E[C]),C instanceof E.PresetCurve&&(C={curve:C}),this.curve=C.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=C.curve.g,this.g.precompute(C.curve.n.bitLength()+1),this.hash=C.hash||C.curve.hash}return ec$3=k,k.prototype.keyPair=function(U){return new T(this,U)},k.prototype.keyFromPrivate=function(U,N){return T.fromPrivate(this,U,N)},k.prototype.keyFromPublic=function(U,N){return T.fromPublic(this,U,N)},k.prototype.genKeyPair=function(U){U||(U={});for(var N=new _({hash:this.hash,pers:U.pers,persEnc:U.persEnc||"utf8",entropy:U.entropy||A(this.hash.hmacStrength),entropyEnc:U.entropy&&U.entropyEnc||"utf8",nonce:this.n.toArray()}),H=this.n.byteLength(),D=this.n.sub(new v(2));;){var j=new v(N.generate(H));if(!(j.cmp(D)>0))return j.iaddn(1),this.keyFromPrivate(j)}},k.prototype._truncateToN=function(U,N){var H=U.byteLength()*8-this.n.bitLength();return H>0&&(U=U.ushrn(H)),!N&&U.cmp(this.n)>=0?U.sub(this.n):U},k.prototype.sign=function(U,N,H,D){typeof H=="object"&&(D=H,H=null),D||(D={}),N=this.keyFromPrivate(N,H),U=this._truncateToN(new v(U,16));for(var j=this.n.byteLength(),V=N.getPrivate().toArray("be",j),X=U.toArray("be",j),re=new _({hash:this.hash,entropy:V,nonce:X,pers:D.pers,persEnc:D.persEnc||"utf8"}),ee=this.n.sub(new v(1)),fe=0;;fe++){var le=D.k?D.k(fe):new v(re.generate(this.n.byteLength()));if(le=this._truncateToN(le,!0),!(le.cmpn(1)<=0||le.cmp(ee)>=0)){var pe=this.g.mul(le);if(!pe.isInfinity()){var ie=pe.getX(),he=ie.umod(this.n);if(he.cmpn(0)!==0){var ae=le.invm(this.n).mul(he.mul(N.getPrivate()).iadd(U));if(ae=ae.umod(this.n),ae.cmpn(0)!==0){var te=(pe.getY().isOdd()?1:0)|(ie.cmp(he)!==0?2:0);return D.canonical&&ae.cmp(this.nh)>0&&(ae=this.n.sub(ae),te^=1),new O({r:he,s:ae,recoveryParam:te})}}}}}},k.prototype.verify=function(U,N,H,D){U=this._truncateToN(new v(U,16)),H=this.keyFromPublic(H,D),N=new O(N,"hex");var j=N.r,V=N.s;if(j.cmpn(1)<0||j.cmp(this.n)>=0||V.cmpn(1)<0||V.cmp(this.n)>=0)return!1;var X=V.invm(this.n),re=X.mul(U).umod(this.n),ee=X.mul(j).umod(this.n),fe;return this.curve._maxwellTrick?(fe=this.g.jmulAdd(re,H.getPublic(),ee),fe.isInfinity()?!1:fe.eqXToP(j)):(fe=this.g.mulAdd(re,H.getPublic(),ee),fe.isInfinity()?!1:fe.getX().umod(this.n).cmp(j)===0)},k.prototype.recoverPubKey=function(C,U,N,H){P((3&N)===N,"The recovery param is more than two bits"),U=new O(U,H);var D=this.n,j=new v(C),V=U.r,X=U.s,re=N&1,ee=N>>1;if(V.cmp(this.curve.p.umod(this.curve.n))>=0&&ee)throw new Error("Unable to find sencond key candinate");ee?V=this.curve.pointFromX(V.add(this.curve.n),re):V=this.curve.pointFromX(V,re);var fe=U.r.invm(D),le=D.sub(j).mul(fe).umod(D),pe=X.mul(fe).umod(D);return this.g.mulAdd(le,V,pe)},k.prototype.getKeyRecoveryParam=function(C,U,N,H){if(U=new O(U,H),U.recoveryParam!==null)return U.recoveryParam;for(var D=0;D<4;D++){var j;try{j=this.recoverPubKey(C,U,D)}catch{continue}if(j.eq(N))return D}throw new Error("Unable to find valid recovery factor")},ec$3}var utils$f=utils$m,assert$b=utils$f.assert,parseBytes$5=utils$f.parseBytes,cachedProperty$3=utils$f.cachedProperty;function KeyPair$5(v,_){this.eddsa=v,this._secret=parseBytes$5(_.secret),v.isPoint(_.pub)?this._pub=_.pub:this._pubBytes=parseBytes$5(_.pub)}KeyPair$5.fromPublic=function(_,x){return x instanceof KeyPair$5?x:new KeyPair$5(_,{pub:x})},KeyPair$5.fromSecret=function(_,x){return x instanceof KeyPair$5?x:new KeyPair$5(_,{secret:x})},KeyPair$5.prototype.secret=function(){return this._secret},cachedProperty$3(KeyPair$5,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty$3(KeyPair$5,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty$3(KeyPair$5,"privBytes",function(){var _=this.eddsa,x=this.hash(),E=_.encodingLength-1,A=x.slice(0,_.encodingLength);return A[0]&=248,A[E]&=127,A[E]|=64,A}),cachedProperty$3(KeyPair$5,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty$3(KeyPair$5,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty$3(KeyPair$5,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair$5.prototype.sign=function(_){return assert$b(this._secret,"KeyPair can only verify"),this.eddsa.sign(_,this)},KeyPair$5.prototype.verify=function(_,x){return this.eddsa.verify(_,x,this)},KeyPair$5.prototype.getSecret=function(_){return assert$b(this._secret,"KeyPair is public only"),utils$f.encode(this.secret(),_)},KeyPair$5.prototype.getPublic=function(_){return utils$f.encode(this.pubBytes(),_)};var key$3=KeyPair$5,BN$8=bnExports$2,utils$e=utils$m,assert$a=utils$e.assert,cachedProperty$2=utils$e.cachedProperty,parseBytes$4=utils$e.parseBytes;function Signature$5(v,_){this.eddsa=v,typeof _!="object"&&(_=parseBytes$4(_)),Array.isArray(_)&&(_={R:_.slice(0,v.encodingLength),S:_.slice(v.encodingLength)}),assert$a(_.R&&_.S,"Signature without R or S"),v.isPoint(_.R)&&(this._R=_.R),_.S instanceof BN$8&&(this._S=_.S),this._Rencoded=Array.isArray(_.R)?_.R:_.Rencoded,this._Sencoded=Array.isArray(_.S)?_.S:_.Sencoded}cachedProperty$2(Signature$5,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty$2(Signature$5,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty$2(Signature$5,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),cachedProperty$2(Signature$5,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Signature$5.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature$5.prototype.toHex=function(){return utils$e.encode(this.toBytes(),"hex").toUpperCase()};var signature$2=Signature$5,hash$2=hash$4,curves$3=curves$4,utils$d=utils$m,assert$9=utils$d.assert,parseBytes$3=utils$d.parseBytes,KeyPair$4=key$3,Signature$4=signature$2;function EDDSA$1(v){if(assert$9(v==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA$1))return new EDDSA$1(v);v=curves$3[v].curve,this.curve=v,this.g=v.g,this.g.precompute(v.n.bitLength()+1),this.pointClass=v.point().constructor,this.encodingLength=Math.ceil(v.n.bitLength()/8),this.hash=hash$2.sha512}var eddsa$2=EDDSA$1;EDDSA$1.prototype.sign=function(_,x){_=parseBytes$3(_);var E=this.keyFromSecret(x),A=this.hashInt(E.messagePrefix(),_),P=this.g.mul(A),T=this.encodePoint(P),O=this.hashInt(T,E.pubBytes(),_).mul(E.priv()),k=A.add(O).umod(this.curve.n);return this.makeSignature({R:P,S:k,Rencoded:T})},EDDSA$1.prototype.verify=function(_,x,E){_=parseBytes$3(_),x=this.makeSignature(x);var A=this.keyFromPublic(E),P=this.hashInt(x.Rencoded(),A.pubBytes(),_),T=this.g.mul(x.S()),O=x.R().add(A.pub().mul(P));return O.eq(T)},EDDSA$1.prototype.hashInt=function(){for(var _=this.hash(),x=0;x<arguments.length;x++)_.update(arguments[x]);return utils$d.intFromLE(_.digest()).umod(this.curve.n)},EDDSA$1.prototype.keyFromPublic=function(_){return KeyPair$4.fromPublic(this,_)},EDDSA$1.prototype.keyFromSecret=function(_){return KeyPair$4.fromSecret(this,_)},EDDSA$1.prototype.makeSignature=function(_){return _ instanceof Signature$4?_:new Signature$4(this,_)},EDDSA$1.prototype.encodePoint=function(_){var x=_.getY().toArray("le",this.encodingLength);return x[this.encodingLength-1]|=_.getX().isOdd()?128:0,x},EDDSA$1.prototype.decodePoint=function(_){_=utils$d.parseBytes(_);var x=_.length-1,E=_.slice(0,x).concat(_[x]&-129),A=(_[x]&128)!==0,P=utils$d.intFromLE(E);return this.curve.pointFromY(P,A)},EDDSA$1.prototype.encodeInt=function(_){return _.toArray("le",this.encodingLength)},EDDSA$1.prototype.decodeInt=function(_){return utils$d.intFromLE(_)},EDDSA$1.prototype.isPoint=function(_){return _ instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(v){var _=v;_.version=require$$0$1.version,_.utils=utils$m,_.rand=requireBrorand(),_.curve=curve$3,_.curves=curves$4,_.ec=requireEc(),_.eddsa=eddsa$2}(elliptic$1)),elliptic$1}var bn={exports:{}};bn.exports,function(v){(function(_,x){function E(q,F){if(!q)throw new Error(F||"Assertion failed")}function A(q,F){q.super_=F;var L=function(){};L.prototype=F.prototype,q.prototype=new L,q.prototype.constructor=q}function P(q,F,L){if(P.isBN(q))return q;this.negative=0,this.words=null,this.length=0,this.red=null,q!==null&&((F==="le"||F==="be")&&(L=F,F=10),this._init(q||0,F||10,L||"be"))}typeof _=="object"?_.exports=P:x.BN=P,P.BN=P,P.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=bufferPolyfill.Buffer}catch{}P.isBN=function(F){return F instanceof P?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===P.wordSize&&Array.isArray(F.words)},P.max=function(F,L){return F.cmp(L)>0?F:L},P.min=function(F,L){return F.cmp(L)<0?F:L},P.prototype._init=function(F,L,Z){if(typeof F=="number")return this._initNumber(F,L,Z);if(typeof F=="object")return this._initArray(F,L,Z);L==="hex"&&(L=16),E(L===(L|0)&&L>=2&&L<=36),F=F.toString().replace(/\s+/g,"");var Q=0;F[0]==="-"&&(Q++,this.negative=1),Q<F.length&&(L===16?this._parseHex(F,Q,Z):(this._parseBase(F,L,Q),Z==="le"&&this._initArray(this.toArray(),L,Z)))},P.prototype._initNumber=function(F,L,Z){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),L,Z)},P.prototype._initArray=function(F,L,Z){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var de,ye,oe=0;if(Z==="be")for(Q=F.length-1,de=0;Q>=0;Q-=3)ye=F[Q]|F[Q-1]<<8|F[Q-2]<<16,this.words[de]|=ye<<oe&67108863,this.words[de+1]=ye>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,de++);else if(Z==="le")for(Q=0,de=0;Q<F.length;Q+=3)ye=F[Q]|F[Q+1]<<8|F[Q+2]<<16,this.words[de]|=ye<<oe&67108863,this.words[de+1]=ye>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,de++);return this._strip()};function O(q,F){var L=q.charCodeAt(F);if(L>=48&&L<=57)return L-48;if(L>=65&&L<=70)return L-55;if(L>=97&&L<=102)return L-87;E(!1,"Invalid character in "+q)}function k(q,F,L){var Z=O(q,L);return L-1>=F&&(Z|=O(q,L-1)<<4),Z}P.prototype._parseHex=function(F,L,Z){this.length=Math.ceil((F.length-L)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var de=0,ye=0,oe;if(Z==="be")for(Q=F.length-1;Q>=L;Q-=2)oe=k(F,L,Q)<<de,this.words[ye]|=oe&67108863,de>=18?(de-=18,ye+=1,this.words[ye]|=oe>>>26):de+=8;else{var se=F.length-L;for(Q=se%2===0?L+1:L;Q<F.length;Q+=2)oe=k(F,L,Q)<<de,this.words[ye]|=oe&67108863,de>=18?(de-=18,ye+=1,this.words[ye]|=oe>>>26):de+=8}this._strip()};function C(q,F,L,Z){for(var Q=0,de=0,ye=Math.min(q.length,L),oe=F;oe<ye;oe++){var se=q.charCodeAt(oe)-48;Q*=Z,se>=49?de=se-49+10:se>=17?de=se-17+10:de=se,E(se>=0&&de<Z,"Invalid character"),Q+=de}return Q}P.prototype._parseBase=function(F,L,Z){this.words=[0],this.length=1;for(var Q=0,de=1;de<=67108863;de*=L)Q++;Q--,de=de/L|0;for(var ye=F.length-Z,oe=ye%Q,se=Math.min(ye,ye-oe)+Z,Y=0,ce=Z;ce<se;ce+=Q)Y=C(F,ce,ce+Q,L),this.imuln(de),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(oe!==0){var we=1;for(Y=C(F,ce,F.length,L),ce=0;ce<oe;ce++)we*=L;this.imuln(we),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},P.prototype.copy=function(F){F.words=new Array(this.length);for(var L=0;L<this.length;L++)F.words[L]=this.words[L];F.length=this.length,F.negative=this.negative,F.red=this.red};function U(q,F){q.words=F.words,q.length=F.length,q.negative=F.negative,q.red=F.red}if(P.prototype._move=function(F){U(F,this)},P.prototype.clone=function(){var F=new P(null);return this.copy(F),F},P.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},P.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},P.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{P.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{P.prototype.inspect=N}else P.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var H=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];P.prototype.toString=function(F,L){F=F||10,L=L|0||1;var Z;if(F===16||F==="hex"){Z="";for(var Q=0,de=0,ye=0;ye<this.length;ye++){var oe=this.words[ye],se=((oe<<Q|de)&16777215).toString(16);de=oe>>>24-Q&16777215,Q+=2,Q>=26&&(Q-=26,ye--),de!==0||ye!==this.length-1?Z=H[6-se.length]+se+Z:Z=se+Z}for(de!==0&&(Z=de.toString(16)+Z);Z.length%L!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(F===(F|0)&&F>=2&&F<=36){var Y=D[F],ce=j[F];Z="";var we=this.clone();for(we.negative=0;!we.isZero();){var Pe=we.modrn(ce).toString(F);we=we.idivn(ce),we.isZero()?Z=Pe+Z:Z=H[Y-Pe.length]+Pe+Z}for(this.isZero()&&(Z="0"+Z);Z.length%L!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}E(!1,"Base should be between 2 and 36")},P.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},P.prototype.toJSON=function(){return this.toString(16,2)},T&&(P.prototype.toBuffer=function(F,L){return this.toArrayLike(T,F,L)}),P.prototype.toArray=function(F,L){return this.toArrayLike(Array,F,L)};var V=function(F,L){return F.allocUnsafe?F.allocUnsafe(L):new F(L)};P.prototype.toArrayLike=function(F,L,Z){this._strip();var Q=this.byteLength(),de=Z||Math.max(1,Q);E(Q<=de,"byte array longer than desired length"),E(de>0,"Requested array length <= 0");var ye=V(F,de),oe=L==="le"?"LE":"BE";return this["_toArrayLike"+oe](ye,Q),ye},P.prototype._toArrayLikeLE=function(F,L){for(var Z=0,Q=0,de=0,ye=0;de<this.length;de++){var oe=this.words[de]<<ye|Q;F[Z++]=oe&255,Z<F.length&&(F[Z++]=oe>>8&255),Z<F.length&&(F[Z++]=oe>>16&255),ye===6?(Z<F.length&&(F[Z++]=oe>>24&255),Q=0,ye=0):(Q=oe>>>24,ye+=2)}if(Z<F.length)for(F[Z++]=Q;Z<F.length;)F[Z++]=0},P.prototype._toArrayLikeBE=function(F,L){for(var Z=F.length-1,Q=0,de=0,ye=0;de<this.length;de++){var oe=this.words[de]<<ye|Q;F[Z--]=oe&255,Z>=0&&(F[Z--]=oe>>8&255),Z>=0&&(F[Z--]=oe>>16&255),ye===6?(Z>=0&&(F[Z--]=oe>>24&255),Q=0,ye=0):(Q=oe>>>24,ye+=2)}if(Z>=0)for(F[Z--]=Q;Z>=0;)F[Z--]=0},Math.clz32?P.prototype._countBits=function(F){return 32-Math.clz32(F)}:P.prototype._countBits=function(F){var L=F,Z=0;return L>=4096&&(Z+=13,L>>>=13),L>=64&&(Z+=7,L>>>=7),L>=8&&(Z+=4,L>>>=4),L>=2&&(Z+=2,L>>>=2),Z+L},P.prototype._zeroBits=function(F){if(F===0)return 26;var L=F,Z=0;return L&8191||(Z+=13,L>>>=13),L&127||(Z+=7,L>>>=7),L&15||(Z+=4,L>>>=4),L&3||(Z+=2,L>>>=2),L&1||Z++,Z},P.prototype.bitLength=function(){var F=this.words[this.length-1],L=this._countBits(F);return(this.length-1)*26+L};function X(q){for(var F=new Array(q.bitLength()),L=0;L<F.length;L++){var Z=L/26|0,Q=L%26;F[L]=q.words[Z]>>>Q&1}return F}P.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,L=0;L<this.length;L++){var Z=this._zeroBits(this.words[L]);if(F+=Z,Z!==26)break}return F},P.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},P.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},P.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},P.prototype.isNeg=function(){return this.negative!==0},P.prototype.neg=function(){return this.clone().ineg()},P.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},P.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var L=0;L<F.length;L++)this.words[L]=this.words[L]|F.words[L];return this._strip()},P.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},P.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},P.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},P.prototype.iuand=function(F){var L;this.length>F.length?L=F:L=this;for(var Z=0;Z<L.length;Z++)this.words[Z]=this.words[Z]&F.words[Z];return this.length=L.length,this._strip()},P.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},P.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},P.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},P.prototype.iuxor=function(F){var L,Z;this.length>F.length?(L=this,Z=F):(L=F,Z=this);for(var Q=0;Q<Z.length;Q++)this.words[Q]=L.words[Q]^Z.words[Q];if(this!==L)for(;Q<L.length;Q++)this.words[Q]=L.words[Q];return this.length=L.length,this._strip()},P.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},P.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},P.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},P.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var L=Math.ceil(F/26)|0,Z=F%26;this._expand(L),Z>0&&L--;for(var Q=0;Q<L;Q++)this.words[Q]=~this.words[Q]&67108863;return Z>0&&(this.words[Q]=~this.words[Q]&67108863>>26-Z),this._strip()},P.prototype.notn=function(F){return this.clone().inotn(F)},P.prototype.setn=function(F,L){E(typeof F=="number"&&F>=0);var Z=F/26|0,Q=F%26;return this._expand(Z+1),L?this.words[Z]=this.words[Z]|1<<Q:this.words[Z]=this.words[Z]&~(1<<Q),this._strip()},P.prototype.iadd=function(F){var L;if(this.negative!==0&&F.negative===0)return this.negative=0,L=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,L=this.isub(F),F.negative=1,L._normSign();var Z,Q;this.length>F.length?(Z=this,Q=F):(Z=F,Q=this);for(var de=0,ye=0;ye<Q.length;ye++)L=(Z.words[ye]|0)+(Q.words[ye]|0)+de,this.words[ye]=L&67108863,de=L>>>26;for(;de!==0&&ye<Z.length;ye++)L=(Z.words[ye]|0)+de,this.words[ye]=L&67108863,de=L>>>26;if(this.length=Z.length,de!==0)this.words[this.length]=de,this.length++;else if(Z!==this)for(;ye<Z.length;ye++)this.words[ye]=Z.words[ye];return this},P.prototype.add=function(F){var L;return F.negative!==0&&this.negative===0?(F.negative=0,L=this.sub(F),F.negative^=1,L):F.negative===0&&this.negative!==0?(this.negative=0,L=F.sub(this),this.negative=1,L):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},P.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var L=this.iadd(F);return F.negative=1,L._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var Z=this.cmp(F);if(Z===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,de;Z>0?(Q=this,de=F):(Q=F,de=this);for(var ye=0,oe=0;oe<de.length;oe++)L=(Q.words[oe]|0)-(de.words[oe]|0)+ye,ye=L>>26,this.words[oe]=L&67108863;for(;ye!==0&&oe<Q.length;oe++)L=(Q.words[oe]|0)+ye,ye=L>>26,this.words[oe]=L&67108863;if(ye===0&&oe<Q.length&&Q!==this)for(;oe<Q.length;oe++)this.words[oe]=Q.words[oe];return this.length=Math.max(this.length,oe),Q!==this&&(this.negative=1),this._strip()},P.prototype.sub=function(F){return this.clone().isub(F)};function re(q,F,L){L.negative=F.negative^q.negative;var Z=q.length+F.length|0;L.length=Z,Z=Z-1|0;var Q=q.words[0]|0,de=F.words[0]|0,ye=Q*de,oe=ye&67108863,se=ye/67108864|0;L.words[0]=oe;for(var Y=1;Y<Z;Y++){for(var ce=se>>>26,we=se&67108863,Pe=Math.min(Y,F.length-1),Se=Math.max(0,Y-q.length+1);Se<=Pe;Se++){var Be=Y-Se|0;Q=q.words[Be]|0,de=F.words[Se]|0,ye=Q*de+we,ce+=ye/67108864|0,we=ye&67108863}L.words[Y]=we|0,se=ce|0}return se!==0?L.words[Y]=se|0:L.length--,L._strip()}var ee=function(F,L,Z){var Q=F.words,de=L.words,ye=Z.words,oe=0,se,Y,ce,we=Q[0]|0,Pe=we&8191,Se=we>>>13,Be=Q[1]|0,Ie=Be&8191,Re=Be>>>13,Me=Q[2]|0,xe=Me&8191,Ee=Me>>>13,Ue=Q[3]|0,Ke=Ue&8191,ze=Ue>>>13,Ve=Q[4]|0,Je=Ve&8191,et=Ve>>>13,Ge=Q[5]|0,ot=Ge&8191,He=Ge>>>13,We=Q[6]|0,Ze=We&8191,$e=We>>>13,Te=Q[7]|0,Ce=Te&8191,ve=Te>>>13,be=Q[8]|0,ge=be&8191,me=be>>>13,_e=Q[9]|0,Ae=_e&8191,Oe=_e>>>13,Le=de[0]|0,je=Le&8191,qe=Le>>>13,rt=de[1]|0,tt=rt&8191,at=rt>>>13,bt=de[2]|0,lt=bt&8191,it=bt>>>13,vt=de[3]|0,dt=vt&8191,Fe=vt>>>13,ke=de[4]|0,Ne=ke&8191,De=ke>>>13,Xe=de[5]|0,Ye=Xe&8191,Qe=Xe>>>13,st=de[6]|0,ut=st&8191,nt=st>>>13,pt=de[7]|0,ht=pt&8191,ct=pt>>>13,_t=de[8]|0,gt=_t&8191,yt=_t>>>13,St=de[9]|0,mt=St&8191,wt=St>>>13;Z.negative=F.negative^L.negative,Z.length=19,se=Math.imul(Pe,je),Y=Math.imul(Pe,qe),Y=Y+Math.imul(Se,je)|0,ce=Math.imul(Se,qe);var At=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(At>>>26)|0,At&=67108863,se=Math.imul(Ie,je),Y=Math.imul(Ie,qe),Y=Y+Math.imul(Re,je)|0,ce=Math.imul(Re,qe),se=se+Math.imul(Pe,tt)|0,Y=Y+Math.imul(Pe,at)|0,Y=Y+Math.imul(Se,tt)|0,ce=ce+Math.imul(Se,at)|0;var Bt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,se=Math.imul(xe,je),Y=Math.imul(xe,qe),Y=Y+Math.imul(Ee,je)|0,ce=Math.imul(Ee,qe),se=se+Math.imul(Ie,tt)|0,Y=Y+Math.imul(Ie,at)|0,Y=Y+Math.imul(Re,tt)|0,ce=ce+Math.imul(Re,at)|0,se=se+Math.imul(Pe,lt)|0,Y=Y+Math.imul(Pe,it)|0,Y=Y+Math.imul(Se,lt)|0,ce=ce+Math.imul(Se,it)|0;var xt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(xt>>>26)|0,xt&=67108863,se=Math.imul(Ke,je),Y=Math.imul(Ke,qe),Y=Y+Math.imul(ze,je)|0,ce=Math.imul(ze,qe),se=se+Math.imul(xe,tt)|0,Y=Y+Math.imul(xe,at)|0,Y=Y+Math.imul(Ee,tt)|0,ce=ce+Math.imul(Ee,at)|0,se=se+Math.imul(Ie,lt)|0,Y=Y+Math.imul(Ie,it)|0,Y=Y+Math.imul(Re,lt)|0,ce=ce+Math.imul(Re,it)|0,se=se+Math.imul(Pe,dt)|0,Y=Y+Math.imul(Pe,Fe)|0,Y=Y+Math.imul(Se,dt)|0,ce=ce+Math.imul(Se,Fe)|0;var Pt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,se=Math.imul(Je,je),Y=Math.imul(Je,qe),Y=Y+Math.imul(et,je)|0,ce=Math.imul(et,qe),se=se+Math.imul(Ke,tt)|0,Y=Y+Math.imul(Ke,at)|0,Y=Y+Math.imul(ze,tt)|0,ce=ce+Math.imul(ze,at)|0,se=se+Math.imul(xe,lt)|0,Y=Y+Math.imul(xe,it)|0,Y=Y+Math.imul(Ee,lt)|0,ce=ce+Math.imul(Ee,it)|0,se=se+Math.imul(Ie,dt)|0,Y=Y+Math.imul(Ie,Fe)|0,Y=Y+Math.imul(Re,dt)|0,ce=ce+Math.imul(Re,Fe)|0,se=se+Math.imul(Pe,Ne)|0,Y=Y+Math.imul(Pe,De)|0,Y=Y+Math.imul(Se,Ne)|0,ce=ce+Math.imul(Se,De)|0;var Tt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,se=Math.imul(ot,je),Y=Math.imul(ot,qe),Y=Y+Math.imul(He,je)|0,ce=Math.imul(He,qe),se=se+Math.imul(Je,tt)|0,Y=Y+Math.imul(Je,at)|0,Y=Y+Math.imul(et,tt)|0,ce=ce+Math.imul(et,at)|0,se=se+Math.imul(Ke,lt)|0,Y=Y+Math.imul(Ke,it)|0,Y=Y+Math.imul(ze,lt)|0,ce=ce+Math.imul(ze,it)|0,se=se+Math.imul(xe,dt)|0,Y=Y+Math.imul(xe,Fe)|0,Y=Y+Math.imul(Ee,dt)|0,ce=ce+Math.imul(Ee,Fe)|0,se=se+Math.imul(Ie,Ne)|0,Y=Y+Math.imul(Ie,De)|0,Y=Y+Math.imul(Re,Ne)|0,ce=ce+Math.imul(Re,De)|0,se=se+Math.imul(Pe,Ye)|0,Y=Y+Math.imul(Pe,Qe)|0,Y=Y+Math.imul(Se,Ye)|0,ce=ce+Math.imul(Se,Qe)|0;var It=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(It>>>26)|0,It&=67108863,se=Math.imul(Ze,je),Y=Math.imul(Ze,qe),Y=Y+Math.imul($e,je)|0,ce=Math.imul($e,qe),se=se+Math.imul(ot,tt)|0,Y=Y+Math.imul(ot,at)|0,Y=Y+Math.imul(He,tt)|0,ce=ce+Math.imul(He,at)|0,se=se+Math.imul(Je,lt)|0,Y=Y+Math.imul(Je,it)|0,Y=Y+Math.imul(et,lt)|0,ce=ce+Math.imul(et,it)|0,se=se+Math.imul(Ke,dt)|0,Y=Y+Math.imul(Ke,Fe)|0,Y=Y+Math.imul(ze,dt)|0,ce=ce+Math.imul(ze,Fe)|0,se=se+Math.imul(xe,Ne)|0,Y=Y+Math.imul(xe,De)|0,Y=Y+Math.imul(Ee,Ne)|0,ce=ce+Math.imul(Ee,De)|0,se=se+Math.imul(Ie,Ye)|0,Y=Y+Math.imul(Ie,Qe)|0,Y=Y+Math.imul(Re,Ye)|0,ce=ce+Math.imul(Re,Qe)|0,se=se+Math.imul(Pe,ut)|0,Y=Y+Math.imul(Pe,nt)|0,Y=Y+Math.imul(Se,ut)|0,ce=ce+Math.imul(Se,nt)|0;var Rt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,se=Math.imul(Ce,je),Y=Math.imul(Ce,qe),Y=Y+Math.imul(ve,je)|0,ce=Math.imul(ve,qe),se=se+Math.imul(Ze,tt)|0,Y=Y+Math.imul(Ze,at)|0,Y=Y+Math.imul($e,tt)|0,ce=ce+Math.imul($e,at)|0,se=se+Math.imul(ot,lt)|0,Y=Y+Math.imul(ot,it)|0,Y=Y+Math.imul(He,lt)|0,ce=ce+Math.imul(He,it)|0,se=se+Math.imul(Je,dt)|0,Y=Y+Math.imul(Je,Fe)|0,Y=Y+Math.imul(et,dt)|0,ce=ce+Math.imul(et,Fe)|0,se=se+Math.imul(Ke,Ne)|0,Y=Y+Math.imul(Ke,De)|0,Y=Y+Math.imul(ze,Ne)|0,ce=ce+Math.imul(ze,De)|0,se=se+Math.imul(xe,Ye)|0,Y=Y+Math.imul(xe,Qe)|0,Y=Y+Math.imul(Ee,Ye)|0,ce=ce+Math.imul(Ee,Qe)|0,se=se+Math.imul(Ie,ut)|0,Y=Y+Math.imul(Ie,nt)|0,Y=Y+Math.imul(Re,ut)|0,ce=ce+Math.imul(Re,nt)|0,se=se+Math.imul(Pe,ht)|0,Y=Y+Math.imul(Pe,ct)|0,Y=Y+Math.imul(Se,ht)|0,ce=ce+Math.imul(Se,ct)|0;var Ot=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,se=Math.imul(ge,je),Y=Math.imul(ge,qe),Y=Y+Math.imul(me,je)|0,ce=Math.imul(me,qe),se=se+Math.imul(Ce,tt)|0,Y=Y+Math.imul(Ce,at)|0,Y=Y+Math.imul(ve,tt)|0,ce=ce+Math.imul(ve,at)|0,se=se+Math.imul(Ze,lt)|0,Y=Y+Math.imul(Ze,it)|0,Y=Y+Math.imul($e,lt)|0,ce=ce+Math.imul($e,it)|0,se=se+Math.imul(ot,dt)|0,Y=Y+Math.imul(ot,Fe)|0,Y=Y+Math.imul(He,dt)|0,ce=ce+Math.imul(He,Fe)|0,se=se+Math.imul(Je,Ne)|0,Y=Y+Math.imul(Je,De)|0,Y=Y+Math.imul(et,Ne)|0,ce=ce+Math.imul(et,De)|0,se=se+Math.imul(Ke,Ye)|0,Y=Y+Math.imul(Ke,Qe)|0,Y=Y+Math.imul(ze,Ye)|0,ce=ce+Math.imul(ze,Qe)|0,se=se+Math.imul(xe,ut)|0,Y=Y+Math.imul(xe,nt)|0,Y=Y+Math.imul(Ee,ut)|0,ce=ce+Math.imul(Ee,nt)|0,se=se+Math.imul(Ie,ht)|0,Y=Y+Math.imul(Ie,ct)|0,Y=Y+Math.imul(Re,ht)|0,ce=ce+Math.imul(Re,ct)|0,se=se+Math.imul(Pe,gt)|0,Y=Y+Math.imul(Pe,yt)|0,Y=Y+Math.imul(Se,gt)|0,ce=ce+Math.imul(Se,yt)|0;var kt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(kt>>>26)|0,kt&=67108863,se=Math.imul(Ae,je),Y=Math.imul(Ae,qe),Y=Y+Math.imul(Oe,je)|0,ce=Math.imul(Oe,qe),se=se+Math.imul(ge,tt)|0,Y=Y+Math.imul(ge,at)|0,Y=Y+Math.imul(me,tt)|0,ce=ce+Math.imul(me,at)|0,se=se+Math.imul(Ce,lt)|0,Y=Y+Math.imul(Ce,it)|0,Y=Y+Math.imul(ve,lt)|0,ce=ce+Math.imul(ve,it)|0,se=se+Math.imul(Ze,dt)|0,Y=Y+Math.imul(Ze,Fe)|0,Y=Y+Math.imul($e,dt)|0,ce=ce+Math.imul($e,Fe)|0,se=se+Math.imul(ot,Ne)|0,Y=Y+Math.imul(ot,De)|0,Y=Y+Math.imul(He,Ne)|0,ce=ce+Math.imul(He,De)|0,se=se+Math.imul(Je,Ye)|0,Y=Y+Math.imul(Je,Qe)|0,Y=Y+Math.imul(et,Ye)|0,ce=ce+Math.imul(et,Qe)|0,se=se+Math.imul(Ke,ut)|0,Y=Y+Math.imul(Ke,nt)|0,Y=Y+Math.imul(ze,ut)|0,ce=ce+Math.imul(ze,nt)|0,se=se+Math.imul(xe,ht)|0,Y=Y+Math.imul(xe,ct)|0,Y=Y+Math.imul(Ee,ht)|0,ce=ce+Math.imul(Ee,ct)|0,se=se+Math.imul(Ie,gt)|0,Y=Y+Math.imul(Ie,yt)|0,Y=Y+Math.imul(Re,gt)|0,ce=ce+Math.imul(Re,yt)|0,se=se+Math.imul(Pe,mt)|0,Y=Y+Math.imul(Pe,wt)|0,Y=Y+Math.imul(Se,mt)|0,ce=ce+Math.imul(Se,wt)|0;var Ct=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,se=Math.imul(Ae,tt),Y=Math.imul(Ae,at),Y=Y+Math.imul(Oe,tt)|0,ce=Math.imul(Oe,at),se=se+Math.imul(ge,lt)|0,Y=Y+Math.imul(ge,it)|0,Y=Y+Math.imul(me,lt)|0,ce=ce+Math.imul(me,it)|0,se=se+Math.imul(Ce,dt)|0,Y=Y+Math.imul(Ce,Fe)|0,Y=Y+Math.imul(ve,dt)|0,ce=ce+Math.imul(ve,Fe)|0,se=se+Math.imul(Ze,Ne)|0,Y=Y+Math.imul(Ze,De)|0,Y=Y+Math.imul($e,Ne)|0,ce=ce+Math.imul($e,De)|0,se=se+Math.imul(ot,Ye)|0,Y=Y+Math.imul(ot,Qe)|0,Y=Y+Math.imul(He,Ye)|0,ce=ce+Math.imul(He,Qe)|0,se=se+Math.imul(Je,ut)|0,Y=Y+Math.imul(Je,nt)|0,Y=Y+Math.imul(et,ut)|0,ce=ce+Math.imul(et,nt)|0,se=se+Math.imul(Ke,ht)|0,Y=Y+Math.imul(Ke,ct)|0,Y=Y+Math.imul(ze,ht)|0,ce=ce+Math.imul(ze,ct)|0,se=se+Math.imul(xe,gt)|0,Y=Y+Math.imul(xe,yt)|0,Y=Y+Math.imul(Ee,gt)|0,ce=ce+Math.imul(Ee,yt)|0,se=se+Math.imul(Ie,mt)|0,Y=Y+Math.imul(Ie,wt)|0,Y=Y+Math.imul(Re,mt)|0,ce=ce+Math.imul(Re,wt)|0;var Ft=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,se=Math.imul(Ae,lt),Y=Math.imul(Ae,it),Y=Y+Math.imul(Oe,lt)|0,ce=Math.imul(Oe,it),se=se+Math.imul(ge,dt)|0,Y=Y+Math.imul(ge,Fe)|0,Y=Y+Math.imul(me,dt)|0,ce=ce+Math.imul(me,Fe)|0,se=se+Math.imul(Ce,Ne)|0,Y=Y+Math.imul(Ce,De)|0,Y=Y+Math.imul(ve,Ne)|0,ce=ce+Math.imul(ve,De)|0,se=se+Math.imul(Ze,Ye)|0,Y=Y+Math.imul(Ze,Qe)|0,Y=Y+Math.imul($e,Ye)|0,ce=ce+Math.imul($e,Qe)|0,se=se+Math.imul(ot,ut)|0,Y=Y+Math.imul(ot,nt)|0,Y=Y+Math.imul(He,ut)|0,ce=ce+Math.imul(He,nt)|0,se=se+Math.imul(Je,ht)|0,Y=Y+Math.imul(Je,ct)|0,Y=Y+Math.imul(et,ht)|0,ce=ce+Math.imul(et,ct)|0,se=se+Math.imul(Ke,gt)|0,Y=Y+Math.imul(Ke,yt)|0,Y=Y+Math.imul(ze,gt)|0,ce=ce+Math.imul(ze,yt)|0,se=se+Math.imul(xe,mt)|0,Y=Y+Math.imul(xe,wt)|0,Y=Y+Math.imul(Ee,mt)|0,ce=ce+Math.imul(Ee,wt)|0;var Mt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,se=Math.imul(Ae,dt),Y=Math.imul(Ae,Fe),Y=Y+Math.imul(Oe,dt)|0,ce=Math.imul(Oe,Fe),se=se+Math.imul(ge,Ne)|0,Y=Y+Math.imul(ge,De)|0,Y=Y+Math.imul(me,Ne)|0,ce=ce+Math.imul(me,De)|0,se=se+Math.imul(Ce,Ye)|0,Y=Y+Math.imul(Ce,Qe)|0,Y=Y+Math.imul(ve,Ye)|0,ce=ce+Math.imul(ve,Qe)|0,se=se+Math.imul(Ze,ut)|0,Y=Y+Math.imul(Ze,nt)|0,Y=Y+Math.imul($e,ut)|0,ce=ce+Math.imul($e,nt)|0,se=se+Math.imul(ot,ht)|0,Y=Y+Math.imul(ot,ct)|0,Y=Y+Math.imul(He,ht)|0,ce=ce+Math.imul(He,ct)|0,se=se+Math.imul(Je,gt)|0,Y=Y+Math.imul(Je,yt)|0,Y=Y+Math.imul(et,gt)|0,ce=ce+Math.imul(et,yt)|0,se=se+Math.imul(Ke,mt)|0,Y=Y+Math.imul(Ke,wt)|0,Y=Y+Math.imul(ze,mt)|0,ce=ce+Math.imul(ze,wt)|0;var Nt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,se=Math.imul(Ae,Ne),Y=Math.imul(Ae,De),Y=Y+Math.imul(Oe,Ne)|0,ce=Math.imul(Oe,De),se=se+Math.imul(ge,Ye)|0,Y=Y+Math.imul(ge,Qe)|0,Y=Y+Math.imul(me,Ye)|0,ce=ce+Math.imul(me,Qe)|0,se=se+Math.imul(Ce,ut)|0,Y=Y+Math.imul(Ce,nt)|0,Y=Y+Math.imul(ve,ut)|0,ce=ce+Math.imul(ve,nt)|0,se=se+Math.imul(Ze,ht)|0,Y=Y+Math.imul(Ze,ct)|0,Y=Y+Math.imul($e,ht)|0,ce=ce+Math.imul($e,ct)|0,se=se+Math.imul(ot,gt)|0,Y=Y+Math.imul(ot,yt)|0,Y=Y+Math.imul(He,gt)|0,ce=ce+Math.imul(He,yt)|0,se=se+Math.imul(Je,mt)|0,Y=Y+Math.imul(Je,wt)|0,Y=Y+Math.imul(et,mt)|0,ce=ce+Math.imul(et,wt)|0;var Ut=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,se=Math.imul(Ae,Ye),Y=Math.imul(Ae,Qe),Y=Y+Math.imul(Oe,Ye)|0,ce=Math.imul(Oe,Qe),se=se+Math.imul(ge,ut)|0,Y=Y+Math.imul(ge,nt)|0,Y=Y+Math.imul(me,ut)|0,ce=ce+Math.imul(me,nt)|0,se=se+Math.imul(Ce,ht)|0,Y=Y+Math.imul(Ce,ct)|0,Y=Y+Math.imul(ve,ht)|0,ce=ce+Math.imul(ve,ct)|0,se=se+Math.imul(Ze,gt)|0,Y=Y+Math.imul(Ze,yt)|0,Y=Y+Math.imul($e,gt)|0,ce=ce+Math.imul($e,yt)|0,se=se+Math.imul(ot,mt)|0,Y=Y+Math.imul(ot,wt)|0,Y=Y+Math.imul(He,mt)|0,ce=ce+Math.imul(He,wt)|0;var Ht=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,se=Math.imul(Ae,ut),Y=Math.imul(Ae,nt),Y=Y+Math.imul(Oe,ut)|0,ce=Math.imul(Oe,nt),se=se+Math.imul(ge,ht)|0,Y=Y+Math.imul(ge,ct)|0,Y=Y+Math.imul(me,ht)|0,ce=ce+Math.imul(me,ct)|0,se=se+Math.imul(Ce,gt)|0,Y=Y+Math.imul(Ce,yt)|0,Y=Y+Math.imul(ve,gt)|0,ce=ce+Math.imul(ve,yt)|0,se=se+Math.imul(Ze,mt)|0,Y=Y+Math.imul(Ze,wt)|0,Y=Y+Math.imul($e,mt)|0,ce=ce+Math.imul($e,wt)|0;var Dt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,se=Math.imul(Ae,ht),Y=Math.imul(Ae,ct),Y=Y+Math.imul(Oe,ht)|0,ce=Math.imul(Oe,ct),se=se+Math.imul(ge,gt)|0,Y=Y+Math.imul(ge,yt)|0,Y=Y+Math.imul(me,gt)|0,ce=ce+Math.imul(me,yt)|0,se=se+Math.imul(Ce,mt)|0,Y=Y+Math.imul(Ce,wt)|0,Y=Y+Math.imul(ve,mt)|0,ce=ce+Math.imul(ve,wt)|0;var Kt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,se=Math.imul(Ae,gt),Y=Math.imul(Ae,yt),Y=Y+Math.imul(Oe,gt)|0,ce=Math.imul(Oe,yt),se=se+Math.imul(ge,mt)|0,Y=Y+Math.imul(ge,wt)|0,Y=Y+Math.imul(me,mt)|0,ce=ce+Math.imul(me,wt)|0;var jt=(oe+se|0)+((Y&8191)<<13)|0;oe=(ce+(Y>>>13)|0)+(jt>>>26)|0,jt&=67108863,se=Math.imul(Ae,mt),Y=Math.imul(Ae,wt),Y=Y+Math.imul(Oe,mt)|0,ce=Math.imul(Oe,wt);var Lt=(oe+se|0)+((Y&8191)<<13)|0;return oe=(ce+(Y>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,ye[0]=At,ye[1]=Bt,ye[2]=xt,ye[3]=Pt,ye[4]=Tt,ye[5]=It,ye[6]=Rt,ye[7]=Ot,ye[8]=kt,ye[9]=Ct,ye[10]=Ft,ye[11]=Mt,ye[12]=Nt,ye[13]=Ut,ye[14]=Ht,ye[15]=Dt,ye[16]=Kt,ye[17]=jt,ye[18]=Lt,oe!==0&&(ye[19]=oe,Z.length++),Z};Math.imul||(ee=re);function fe(q,F,L){L.negative=F.negative^q.negative,L.length=q.length+F.length;for(var Z=0,Q=0,de=0;de<L.length-1;de++){var ye=Q;Q=0;for(var oe=Z&67108863,se=Math.min(de,F.length-1),Y=Math.max(0,de-q.length+1);Y<=se;Y++){var ce=de-Y,we=q.words[ce]|0,Pe=F.words[Y]|0,Se=we*Pe,Be=Se&67108863;ye=ye+(Se/67108864|0)|0,Be=Be+oe|0,oe=Be&67108863,ye=ye+(Be>>>26)|0,Q+=ye>>>26,ye&=67108863}L.words[de]=oe,Z=ye,ye=Q}return Z!==0?L.words[de]=Z:L.length--,L._strip()}function le(q,F,L){return fe(q,F,L)}P.prototype.mulTo=function(F,L){var Z,Q=this.length+F.length;return this.length===10&&F.length===10?Z=ee(this,F,L):Q<63?Z=re(this,F,L):Q<1024?Z=fe(this,F,L):Z=le(this,F,L),Z},P.prototype.mul=function(F){var L=new P(null);return L.words=new Array(this.length+F.length),this.mulTo(F,L)},P.prototype.mulf=function(F){var L=new P(null);return L.words=new Array(this.length+F.length),le(this,F,L)},P.prototype.imul=function(F){return this.clone().mulTo(F,this)},P.prototype.imuln=function(F){var L=F<0;L&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var Z=0,Q=0;Q<this.length;Q++){var de=(this.words[Q]|0)*F,ye=(de&67108863)+(Z&67108863);Z>>=26,Z+=de/67108864|0,Z+=ye>>>26,this.words[Q]=ye&67108863}return Z!==0&&(this.words[Q]=Z,this.length++),L?this.ineg():this},P.prototype.muln=function(F){return this.clone().imuln(F)},P.prototype.sqr=function(){return this.mul(this)},P.prototype.isqr=function(){return this.imul(this.clone())},P.prototype.pow=function(F){var L=X(F);if(L.length===0)return new P(1);for(var Z=this,Q=0;Q<L.length&&L[Q]===0;Q++,Z=Z.sqr());if(++Q<L.length)for(var de=Z.sqr();Q<L.length;Q++,de=de.sqr())L[Q]!==0&&(Z=Z.mul(de));return Z},P.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26,Q=67108863>>>26-L<<26-L,de;if(L!==0){var ye=0;for(de=0;de<this.length;de++){var oe=this.words[de]&Q,se=(this.words[de]|0)-oe<<L;this.words[de]=se|ye,ye=oe>>>26-L}ye&&(this.words[de]=ye,this.length++)}if(Z!==0){for(de=this.length-1;de>=0;de--)this.words[de+Z]=this.words[de];for(de=0;de<Z;de++)this.words[de]=0;this.length+=Z}return this._strip()},P.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},P.prototype.iushrn=function(F,L,Z){E(typeof F=="number"&&F>=0);var Q;L?Q=(L-L%26)/26:Q=0;var de=F%26,ye=Math.min((F-de)/26,this.length),oe=67108863^67108863>>>de<<de,se=Z;if(Q-=ye,Q=Math.max(0,Q),se){for(var Y=0;Y<ye;Y++)se.words[Y]=this.words[Y];se.length=ye}if(ye!==0)if(this.length>ye)for(this.length-=ye,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+ye];else this.words[0]=0,this.length=1;var ce=0;for(Y=this.length-1;Y>=0&&(ce!==0||Y>=Q);Y--){var we=this.words[Y]|0;this.words[Y]=ce<<26-de|we>>>de,ce=we&oe}return se&&ce!==0&&(se.words[se.length++]=ce),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},P.prototype.ishrn=function(F,L,Z){return E(this.negative===0),this.iushrn(F,L,Z)},P.prototype.shln=function(F){return this.clone().ishln(F)},P.prototype.ushln=function(F){return this.clone().iushln(F)},P.prototype.shrn=function(F){return this.clone().ishrn(F)},P.prototype.ushrn=function(F){return this.clone().iushrn(F)},P.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26,Q=1<<L;if(this.length<=Z)return!1;var de=this.words[Z];return!!(de&Q)},P.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var L=F%26,Z=(F-L)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(L!==0&&Z++,this.length=Math.min(Z,this.length),L!==0){var Q=67108863^67108863>>>L<<L;this.words[this.length-1]&=Q}return this._strip()},P.prototype.maskn=function(F){return this.clone().imaskn(F)},P.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},P.prototype._iaddn=function(F){this.words[0]+=F;for(var L=0;L<this.length&&this.words[L]>=67108864;L++)this.words[L]-=67108864,L===this.length-1?this.words[L+1]=1:this.words[L+1]++;return this.length=Math.max(this.length,L+1),this},P.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var L=0;L<this.length&&this.words[L]<0;L++)this.words[L]+=67108864,this.words[L+1]-=1;return this._strip()},P.prototype.addn=function(F){return this.clone().iaddn(F)},P.prototype.subn=function(F){return this.clone().isubn(F)},P.prototype.iabs=function(){return this.negative=0,this},P.prototype.abs=function(){return this.clone().iabs()},P.prototype._ishlnsubmul=function(F,L,Z){var Q=F.length+Z,de;this._expand(Q);var ye,oe=0;for(de=0;de<F.length;de++){ye=(this.words[de+Z]|0)+oe;var se=(F.words[de]|0)*L;ye-=se&67108863,oe=(ye>>26)-(se/67108864|0),this.words[de+Z]=ye&67108863}for(;de<this.length-Z;de++)ye=(this.words[de+Z]|0)+oe,oe=ye>>26,this.words[de+Z]=ye&67108863;if(oe===0)return this._strip();for(E(oe===-1),oe=0,de=0;de<this.length;de++)ye=-(this.words[de]|0)+oe,oe=ye>>26,this.words[de]=ye&67108863;return this.negative=1,this._strip()},P.prototype._wordDiv=function(F,L){var Z=this.length-F.length,Q=this.clone(),de=F,ye=de.words[de.length-1]|0,oe=this._countBits(ye);Z=26-oe,Z!==0&&(de=de.ushln(Z),Q.iushln(Z),ye=de.words[de.length-1]|0);var se=Q.length-de.length,Y;if(L!=="mod"){Y=new P(null),Y.length=se+1,Y.words=new Array(Y.length);for(var ce=0;ce<Y.length;ce++)Y.words[ce]=0}var we=Q.clone()._ishlnsubmul(de,1,se);we.negative===0&&(Q=we,Y&&(Y.words[se]=1));for(var Pe=se-1;Pe>=0;Pe--){var Se=(Q.words[de.length+Pe]|0)*67108864+(Q.words[de.length+Pe-1]|0);for(Se=Math.min(Se/ye|0,67108863),Q._ishlnsubmul(de,Se,Pe);Q.negative!==0;)Se--,Q.negative=0,Q._ishlnsubmul(de,1,Pe),Q.isZero()||(Q.negative^=1);Y&&(Y.words[Pe]=Se)}return Y&&Y._strip(),Q._strip(),L!=="div"&&Z!==0&&Q.iushrn(Z),{div:Y||null,mod:Q}},P.prototype.divmod=function(F,L,Z){if(E(!F.isZero()),this.isZero())return{div:new P(0),mod:new P(0)};var Q,de,ye;return this.negative!==0&&F.negative===0?(ye=this.neg().divmod(F,L),L!=="mod"&&(Q=ye.div.neg()),L!=="div"&&(de=ye.mod.neg(),Z&&de.negative!==0&&de.iadd(F)),{div:Q,mod:de}):this.negative===0&&F.negative!==0?(ye=this.divmod(F.neg(),L),L!=="mod"&&(Q=ye.div.neg()),{div:Q,mod:ye.mod}):this.negative&F.negative?(ye=this.neg().divmod(F.neg(),L),L!=="div"&&(de=ye.mod.neg(),Z&&de.negative!==0&&de.isub(F)),{div:ye.div,mod:de}):F.length>this.length||this.cmp(F)<0?{div:new P(0),mod:this}:F.length===1?L==="div"?{div:this.divn(F.words[0]),mod:null}:L==="mod"?{div:null,mod:new P(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new P(this.modrn(F.words[0]))}:this._wordDiv(F,L)},P.prototype.div=function(F){return this.divmod(F,"div",!1).div},P.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},P.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},P.prototype.divRound=function(F){var L=this.divmod(F);if(L.mod.isZero())return L.div;var Z=L.div.negative!==0?L.mod.isub(F):L.mod,Q=F.ushrn(1),de=F.andln(1),ye=Z.cmp(Q);return ye<0||de===1&&ye===0?L.div:L.div.negative!==0?L.div.isubn(1):L.div.iaddn(1)},P.prototype.modrn=function(F){var L=F<0;L&&(F=-F),E(F<=67108863);for(var Z=(1<<26)%F,Q=0,de=this.length-1;de>=0;de--)Q=(Z*Q+(this.words[de]|0))%F;return L?-Q:Q},P.prototype.modn=function(F){return this.modrn(F)},P.prototype.idivn=function(F){var L=F<0;L&&(F=-F),E(F<=67108863);for(var Z=0,Q=this.length-1;Q>=0;Q--){var de=(this.words[Q]|0)+Z*67108864;this.words[Q]=de/F|0,Z=de%F}return this._strip(),L?this.ineg():this},P.prototype.divn=function(F){return this.clone().idivn(F)},P.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var L=this,Z=F.clone();L.negative!==0?L=L.umod(F):L=L.clone();for(var Q=new P(1),de=new P(0),ye=new P(0),oe=new P(1),se=0;L.isEven()&&Z.isEven();)L.iushrn(1),Z.iushrn(1),++se;for(var Y=Z.clone(),ce=L.clone();!L.isZero();){for(var we=0,Pe=1;!(L.words[0]&Pe)&&we<26;++we,Pe<<=1);if(we>0)for(L.iushrn(we);we-- >0;)(Q.isOdd()||de.isOdd())&&(Q.iadd(Y),de.isub(ce)),Q.iushrn(1),de.iushrn(1);for(var Se=0,Be=1;!(Z.words[0]&Be)&&Se<26;++Se,Be<<=1);if(Se>0)for(Z.iushrn(Se);Se-- >0;)(ye.isOdd()||oe.isOdd())&&(ye.iadd(Y),oe.isub(ce)),ye.iushrn(1),oe.iushrn(1);L.cmp(Z)>=0?(L.isub(Z),Q.isub(ye),de.isub(oe)):(Z.isub(L),ye.isub(Q),oe.isub(de))}return{a:ye,b:oe,gcd:Z.iushln(se)}},P.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var L=this,Z=F.clone();L.negative!==0?L=L.umod(F):L=L.clone();for(var Q=new P(1),de=new P(0),ye=Z.clone();L.cmpn(1)>0&&Z.cmpn(1)>0;){for(var oe=0,se=1;!(L.words[0]&se)&&oe<26;++oe,se<<=1);if(oe>0)for(L.iushrn(oe);oe-- >0;)Q.isOdd()&&Q.iadd(ye),Q.iushrn(1);for(var Y=0,ce=1;!(Z.words[0]&ce)&&Y<26;++Y,ce<<=1);if(Y>0)for(Z.iushrn(Y);Y-- >0;)de.isOdd()&&de.iadd(ye),de.iushrn(1);L.cmp(Z)>=0?(L.isub(Z),Q.isub(de)):(Z.isub(L),de.isub(Q))}var we;return L.cmpn(1)===0?we=Q:we=de,we.cmpn(0)<0&&we.iadd(F),we},P.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var L=this.clone(),Z=F.clone();L.negative=0,Z.negative=0;for(var Q=0;L.isEven()&&Z.isEven();Q++)L.iushrn(1),Z.iushrn(1);do{for(;L.isEven();)L.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var de=L.cmp(Z);if(de<0){var ye=L;L=Z,Z=ye}else if(de===0||Z.cmpn(1)===0)break;L.isub(Z)}while(!0);return Z.iushln(Q)},P.prototype.invm=function(F){return this.egcd(F).a.umod(F)},P.prototype.isEven=function(){return(this.words[0]&1)===0},P.prototype.isOdd=function(){return(this.words[0]&1)===1},P.prototype.andln=function(F){return this.words[0]&F},P.prototype.bincn=function(F){E(typeof F=="number");var L=F%26,Z=(F-L)/26,Q=1<<L;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=Q,this;for(var de=Q,ye=Z;de!==0&&ye<this.length;ye++){var oe=this.words[ye]|0;oe+=de,de=oe>>>26,oe&=67108863,this.words[ye]=oe}return de!==0&&(this.words[ye]=de,this.length++),this},P.prototype.isZero=function(){return this.length===1&&this.words[0]===0},P.prototype.cmpn=function(F){var L=F<0;if(this.negative!==0&&!L)return-1;if(this.negative===0&&L)return 1;this._strip();var Z;if(this.length>1)Z=1;else{L&&(F=-F),E(F<=67108863,"Number is too big");var Q=this.words[0]|0;Z=Q===F?0:Q<F?-1:1}return this.negative!==0?-Z|0:Z},P.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var L=this.ucmp(F);return this.negative!==0?-L|0:L},P.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var L=0,Z=this.length-1;Z>=0;Z--){var Q=this.words[Z]|0,de=F.words[Z]|0;if(Q!==de){Q<de?L=-1:Q>de&&(L=1);break}}return L},P.prototype.gtn=function(F){return this.cmpn(F)===1},P.prototype.gt=function(F){return this.cmp(F)===1},P.prototype.gten=function(F){return this.cmpn(F)>=0},P.prototype.gte=function(F){return this.cmp(F)>=0},P.prototype.ltn=function(F){return this.cmpn(F)===-1},P.prototype.lt=function(F){return this.cmp(F)===-1},P.prototype.lten=function(F){return this.cmpn(F)<=0},P.prototype.lte=function(F){return this.cmp(F)<=0},P.prototype.eqn=function(F){return this.cmpn(F)===0},P.prototype.eq=function(F){return this.cmp(F)===0},P.red=function(F){return new ne(F)},P.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},P.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},P.prototype._forceRed=function(F){return this.red=F,this},P.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},P.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},P.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},P.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},P.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},P.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},P.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},P.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},P.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},P.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},P.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},P.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},P.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},P.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var pe={k256:null,p224:null,p192:null,p25519:null};function ie(q,F){this.name=q,this.p=new P(F,16),this.n=this.p.bitLength(),this.k=new P(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ie.prototype._tmp=function(){var F=new P(null);return F.words=new Array(Math.ceil(this.n/13)),F},ie.prototype.ireduce=function(F){var L=F,Z;do this.split(L,this.tmp),L=this.imulK(L),L=L.iadd(this.tmp),Z=L.bitLength();while(Z>this.n);var Q=Z<this.n?-1:L.ucmp(this.p);return Q===0?(L.words[0]=0,L.length=1):Q>0?L.isub(this.p):L.strip!==void 0?L.strip():L._strip(),L},ie.prototype.split=function(F,L){F.iushrn(this.n,0,L)},ie.prototype.imulK=function(F){return F.imul(this.k)};function he(){ie.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}A(he,ie),he.prototype.split=function(F,L){for(var Z=4194303,Q=Math.min(F.length,9),de=0;de<Q;de++)L.words[de]=F.words[de];if(L.length=Q,F.length<=9){F.words[0]=0,F.length=1;return}var ye=F.words[9];for(L.words[L.length++]=ye&Z,de=10;de<F.length;de++){var oe=F.words[de]|0;F.words[de-10]=(oe&Z)<<4|ye>>>22,ye=oe}ye>>>=22,F.words[de-10]=ye,ye===0&&F.length>10?F.length-=10:F.length-=9},he.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var L=0,Z=0;Z<F.length;Z++){var Q=F.words[Z]|0;L+=Q*977,F.words[Z]=L&67108863,L=Q*64+(L/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function ae(){ie.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}A(ae,ie);function te(){ie.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}A(te,ie);function ue(){ie.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}A(ue,ie),ue.prototype.imulK=function(F){for(var L=0,Z=0;Z<F.length;Z++){var Q=(F.words[Z]|0)*19+L,de=Q&67108863;Q>>>=26,F.words[Z]=de,L=Q}return L!==0&&(F.words[F.length++]=L),F},P._prime=function(F){if(pe[F])return pe[F];var L;if(F==="k256")L=new he;else if(F==="p224")L=new ae;else if(F==="p192")L=new te;else if(F==="p25519")L=new ue;else throw new Error("Unknown prime "+F);return pe[F]=L,L};function ne(q){if(typeof q=="string"){var F=P._prime(q);this.m=F.p,this.prime=F}else E(q.gtn(1),"modulus must be greater than 1"),this.m=q,this.prime=null}ne.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},ne.prototype._verify2=function(F,L){E((F.negative|L.negative)===0,"red works only with positives"),E(F.red&&F.red===L.red,"red works only with red numbers")},ne.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(U(F,F.umod(this.m)._forceRed(this)),F)},ne.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},ne.prototype.add=function(F,L){this._verify2(F,L);var Z=F.add(L);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},ne.prototype.iadd=function(F,L){this._verify2(F,L);var Z=F.iadd(L);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},ne.prototype.sub=function(F,L){this._verify2(F,L);var Z=F.sub(L);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},ne.prototype.isub=function(F,L){this._verify2(F,L);var Z=F.isub(L);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},ne.prototype.shl=function(F,L){return this._verify1(F),this.imod(F.ushln(L))},ne.prototype.imul=function(F,L){return this._verify2(F,L),this.imod(F.imul(L))},ne.prototype.mul=function(F,L){return this._verify2(F,L),this.imod(F.mul(L))},ne.prototype.isqr=function(F){return this.imul(F,F.clone())},ne.prototype.sqr=function(F){return this.mul(F,F)},ne.prototype.sqrt=function(F){if(F.isZero())return F.clone();var L=this.m.andln(3);if(E(L%2===1),L===3){var Z=this.m.add(new P(1)).iushrn(2);return this.pow(F,Z)}for(var Q=this.m.subn(1),de=0;!Q.isZero()&&Q.andln(1)===0;)de++,Q.iushrn(1);E(!Q.isZero());var ye=new P(1).toRed(this),oe=ye.redNeg(),se=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new P(2*Y*Y).toRed(this);this.pow(Y,se).cmp(oe)!==0;)Y.redIAdd(oe);for(var ce=this.pow(Y,Q),we=this.pow(F,Q.addn(1).iushrn(1)),Pe=this.pow(F,Q),Se=de;Pe.cmp(ye)!==0;){for(var Be=Pe,Ie=0;Be.cmp(ye)!==0;Ie++)Be=Be.redSqr();E(Ie<Se);var Re=this.pow(ce,new P(1).iushln(Se-Ie-1));we=we.redMul(Re),ce=Re.redSqr(),Pe=Pe.redMul(ce),Se=Ie}return we},ne.prototype.invm=function(F){var L=F._invmp(this.m);return L.negative!==0?(L.negative=0,this.imod(L).redNeg()):this.imod(L)},ne.prototype.pow=function(F,L){if(L.isZero())return new P(1).toRed(this);if(L.cmpn(1)===0)return F.clone();var Z=4,Q=new Array(1<<Z);Q[0]=new P(1).toRed(this),Q[1]=F;for(var de=2;de<Q.length;de++)Q[de]=this.mul(Q[de-1],F);var ye=Q[0],oe=0,se=0,Y=L.bitLength()%26;for(Y===0&&(Y=26),de=L.length-1;de>=0;de--){for(var ce=L.words[de],we=Y-1;we>=0;we--){var Pe=ce>>we&1;if(ye!==Q[0]&&(ye=this.sqr(ye)),Pe===0&&oe===0){se=0;continue}oe<<=1,oe|=Pe,se++,!(se!==Z&&(de!==0||we!==0))&&(ye=this.mul(ye,Q[oe]),se=0,oe=0)}Y=26}return ye},ne.prototype.convertTo=function(F){var L=F.umod(this.m);return L===F?L.clone():L},ne.prototype.convertFrom=function(F){var L=F.clone();return L.red=null,L},P.mont=function(F){return new J(F)};function J(q){ne.call(this,q),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new P(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A(J,ne),J.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},J.prototype.convertFrom=function(F){var L=this.imod(F.mul(this.rinv));return L.red=null,L},J.prototype.imul=function(F,L){if(F.isZero()||L.isZero())return F.words[0]=0,F.length=1,F;var Z=F.imul(L),Q=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),de=Z.isub(Q).iushrn(this.shift),ye=de;return de.cmp(this.m)>=0?ye=de.isub(this.m):de.cmpn(0)<0&&(ye=de.iadd(this.m)),ye._forceRed(this)},J.prototype.mul=function(F,L){if(F.isZero()||L.isZero())return new P(0)._forceRed(this);var Z=F.mul(L),Q=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),de=Z.isub(Q).iushrn(this.shift),ye=de;return de.cmp(this.m)>=0?ye=de.isub(this.m):de.cmpn(0)<0&&(ye=de.iadd(this.m)),ye._forceRed(this)},J.prototype.invm=function(F){var L=this.imod(F._invmp(this.m).mul(this.r2));return L._forceRed(this)}})(v,commonjsGlobal)}(bn);var bnExports=bn.exports,asn1$3={},asn1$2={},api$1={},encoders={},buffer$1=bufferPolyfill,Buffer$d=buffer$1.Buffer,safer={},key$2;for(key$2 in buffer$1)buffer$1.hasOwnProperty(key$2)&&(key$2==="SlowBuffer"||key$2==="Buffer"||(safer[key$2]=buffer$1[key$2]));var Safer=safer.Buffer={};for(key$2 in Buffer$d)Buffer$d.hasOwnProperty(key$2)&&(key$2==="allocUnsafe"||key$2==="allocUnsafeSlow"||(Safer[key$2]=Buffer$d[key$2]));if(safer.Buffer.prototype=Buffer$d.prototype,(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(v,_,x){if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof v);if(v&&typeof v.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);return Buffer$d(v,_,x)}),Safer.alloc||(Safer.alloc=function(v,_,x){if(typeof v!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof v);if(v<0||v>=2*(1<<30))throw new RangeError('The value "'+v+'" is invalid for option "size"');var E=Buffer$d(v);return!_||_.length===0?E.fill(0):typeof x=="string"?E.fill(_,x):E.fill(_),E}),!safer.kStringMaxLength)try{safer.kStringMaxLength=dist$4.process.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$6=inherits_browserExports;function Reporter$2(v){this._reporterState={obj:null,path:[],options:v||{},errors:[]}}reporter.Reporter=Reporter$2,Reporter$2.prototype.isError=function(_){return _ instanceof ReporterError},Reporter$2.prototype.save=function(){const _=this._reporterState;return{obj:_.obj,pathLen:_.path.length}},Reporter$2.prototype.restore=function(_){const x=this._reporterState;x.obj=_.obj,x.path=x.path.slice(0,_.pathLen)},Reporter$2.prototype.enterKey=function(_){return this._reporterState.path.push(_)},Reporter$2.prototype.exitKey=function(_){const x=this._reporterState;x.path=x.path.slice(0,_-1)},Reporter$2.prototype.leaveKey=function(_,x,E){const A=this._reporterState;this.exitKey(_),A.obj!==null&&(A.obj[x]=E)},Reporter$2.prototype.path=function(){return this._reporterState.path.join("/")},Reporter$2.prototype.enterObject=function(){const _=this._reporterState,x=_.obj;return _.obj={},x},Reporter$2.prototype.leaveObject=function(_){const x=this._reporterState,E=x.obj;return x.obj=_,E},Reporter$2.prototype.error=function(_){let x;const E=this._reporterState,A=_ instanceof ReporterError;if(A?x=_:x=new ReporterError(E.path.map(function(P){return"["+JSON.stringify(P)+"]"}).join(""),_.message||_,_.stack),!E.options.partial)throw x;return A||E.errors.push(x),x},Reporter$2.prototype.wrapResult=function(_){const x=this._reporterState;return x.options.partial?{result:this.isError(_)?null:_,errors:x.errors}:_};function ReporterError(v,_){this.path=v,this.rethrow(_)}inherits$6(ReporterError,Error),ReporterError.prototype.rethrow=function(_){if(this.message=_+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(x){this.stack=x.stack}return this};var buffer={};const inherits$5=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$c=safer_1.Buffer;function DecoderBuffer$2(v,_){if(Reporter$1.call(this,_),!Buffer$c.isBuffer(v)){this.error("Input not Buffer");return}this.base=v,this.offset=0,this.length=v.length}inherits$5(DecoderBuffer$2,Reporter$1),buffer.DecoderBuffer=DecoderBuffer$2,DecoderBuffer$2.isDecoderBuffer=function(_){return _ instanceof DecoderBuffer$2?!0:typeof _=="object"&&Buffer$c.isBuffer(_.base)&&_.constructor.name==="DecoderBuffer"&&typeof _.offset=="number"&&typeof _.length=="number"&&typeof _.save=="function"&&typeof _.restore=="function"&&typeof _.isEmpty=="function"&&typeof _.readUInt8=="function"&&typeof _.skip=="function"&&typeof _.raw=="function"},DecoderBuffer$2.prototype.save=function(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}},DecoderBuffer$2.prototype.restore=function(_){const x=new DecoderBuffer$2(this.base);return x.offset=_.offset,x.length=this.offset,this.offset=_.offset,Reporter$1.prototype.restore.call(this,_.reporter),x},DecoderBuffer$2.prototype.isEmpty=function(){return this.offset===this.length},DecoderBuffer$2.prototype.readUInt8=function(_){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(_||"DecoderBuffer overrun")},DecoderBuffer$2.prototype.skip=function(_,x){if(!(this.offset+_<=this.length))return this.error(x||"DecoderBuffer overrun");const E=new DecoderBuffer$2(this.base);return E._reporterState=this._reporterState,E.offset=this.offset,E.length=this.offset+_,this.offset+=_,E},DecoderBuffer$2.prototype.raw=function(_){return this.base.slice(_?_.offset:this.offset,this.length)};function EncoderBuffer$1(v,_){if(Array.isArray(v))this.length=0,this.value=v.map(function(x){return EncoderBuffer$1.isEncoderBuffer(x)||(x=new EncoderBuffer$1(x,_)),this.length+=x.length,x},this);else if(typeof v=="number"){if(!(0<=v&&v<=255))return _.error("non-byte EncoderBuffer value");this.value=v,this.length=1}else if(typeof v=="string")this.value=v,this.length=Buffer$c.byteLength(v);else if(Buffer$c.isBuffer(v))this.value=v,this.length=v.length;else return _.error("Unsupported type: "+typeof v)}buffer.EncoderBuffer=EncoderBuffer$1,EncoderBuffer$1.isEncoderBuffer=function(_){return _ instanceof EncoderBuffer$1?!0:typeof _=="object"&&_.constructor.name==="EncoderBuffer"&&typeof _.length=="number"&&typeof _.join=="function"},EncoderBuffer$1.prototype.join=function(_,x){return _||(_=Buffer$c.alloc(this.length)),x||(x=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(E){E.join(_,x),x+=E.length}):(typeof this.value=="number"?_[x]=this.value:typeof this.value=="string"?_.write(this.value,x):Buffer$c.isBuffer(this.value)&&this.value.copy(_,x),x+=this.length)),_};const Reporter=reporter.Reporter,EncoderBuffer=buffer.EncoderBuffer,DecoderBuffer$1=buffer.DecoderBuffer,assert$8=minimalisticAssert,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(v,_,x){const E={};this._baseState=E,E.name=x,E.enc=v,E.parent=_||null,E.children=null,E.tag=null,E.args=null,E.reverseArgs=null,E.choice=null,E.optional=!1,E.any=!1,E.obj=!1,E.use=null,E.useDecoder=null,E.key=null,E.default=null,E.explicit=null,E.implicit=null,E.contains=null,E.parent||(E.children=[],this._wrap())}var node=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function(){const _=this._baseState,x={};stateProps.forEach(function(A){x[A]=_[A]});const E=new this.constructor(x.parent);return E._baseState=x,E},Node$2.prototype._wrap=function(){const _=this._baseState;methods.forEach(function(x){this[x]=function(){const A=new this.constructor(this);return _.children.push(A),A[x].apply(A,arguments)}},this)},Node$2.prototype._init=function(_){const x=this._baseState;assert$8(x.parent===null),_.call(this),x.children=x.children.filter(function(E){return E._baseState.parent===this},this),assert$8.equal(x.children.length,1,"Root node can have only one child")},Node$2.prototype._useArgs=function(_){const x=this._baseState,E=_.filter(function(A){return A instanceof this.constructor},this);_=_.filter(function(A){return!(A instanceof this.constructor)},this),E.length!==0&&(assert$8(x.children===null),x.children=E,E.forEach(function(A){A._baseState.parent=this},this)),_.length!==0&&(assert$8(x.args===null),x.args=_,x.reverseArgs=_.map(function(A){if(typeof A!="object"||A.constructor!==Object)return A;const P={};return Object.keys(A).forEach(function(T){T==(T|0)&&(T|=0);const O=A[T];P[O]=T}),P}))},overrided.forEach(function(v){Node$2.prototype[v]=function(){const x=this._baseState;throw new Error(v+" not implemented for encoding: "+x.enc)}}),tags.forEach(function(v){Node$2.prototype[v]=function(){const x=this._baseState,E=Array.prototype.slice.call(arguments);return assert$8(x.tag===null),x.tag=v,this._useArgs(E),this}}),Node$2.prototype.use=function(_){assert$8(_);const x=this._baseState;return assert$8(x.use===null),x.use=_,this},Node$2.prototype.optional=function(){const _=this._baseState;return _.optional=!0,this},Node$2.prototype.def=function(_){const x=this._baseState;return assert$8(x.default===null),x.default=_,x.optional=!0,this},Node$2.prototype.explicit=function(_){const x=this._baseState;return assert$8(x.explicit===null&&x.implicit===null),x.explicit=_,this},Node$2.prototype.implicit=function(_){const x=this._baseState;return assert$8(x.explicit===null&&x.implicit===null),x.implicit=_,this},Node$2.prototype.obj=function(){const _=this._baseState,x=Array.prototype.slice.call(arguments);return _.obj=!0,x.length!==0&&this._useArgs(x),this},Node$2.prototype.key=function(_){const x=this._baseState;return assert$8(x.key===null),x.key=_,this},Node$2.prototype.any=function(){const _=this._baseState;return _.any=!0,this},Node$2.prototype.choice=function(_){const x=this._baseState;return assert$8(x.choice===null),x.choice=_,this._useArgs(Object.keys(_).map(function(E){return _[E]})),this},Node$2.prototype.contains=function(_){const x=this._baseState;return assert$8(x.use===null),x.contains=_,this},Node$2.prototype._decode=function(_,x){const E=this._baseState;if(E.parent===null)return _.wrapResult(E.children[0]._decode(_,x));let A=E.default,P=!0,T=null;if(E.key!==null&&(T=_.enterKey(E.key)),E.optional){let k=null;if(E.explicit!==null?k=E.explicit:E.implicit!==null?k=E.implicit:E.tag!==null&&(k=E.tag),k===null&&!E.any){const C=_.save();try{E.choice===null?this._decodeGeneric(E.tag,_,x):this._decodeChoice(_,x),P=!0}catch{P=!1}_.restore(C)}else if(P=this._peekTag(_,k,E.any),_.isError(P))return P}let O;if(E.obj&&P&&(O=_.enterObject()),P){if(E.explicit!==null){const C=this._decodeTag(_,E.explicit);if(_.isError(C))return C;_=C}const k=_.offset;if(E.use===null&&E.choice===null){let C;E.any&&(C=_.save());const U=this._decodeTag(_,E.implicit!==null?E.implicit:E.tag,E.any);if(_.isError(U))return U;E.any?A=_.raw(C):_=U}if(x&&x.track&&E.tag!==null&&x.track(_.path(),k,_.length,"tagged"),x&&x.track&&E.tag!==null&&x.track(_.path(),_.offset,_.length,"content"),E.any||(E.choice===null?A=this._decodeGeneric(E.tag,_,x):A=this._decodeChoice(_,x)),_.isError(A))return A;if(!E.any&&E.choice===null&&E.children!==null&&E.children.forEach(function(U){U._decode(_,x)}),E.contains&&(E.tag==="octstr"||E.tag==="bitstr")){const C=new DecoderBuffer$1(A);A=this._getUse(E.contains,_._reporterState.obj)._decode(C,x)}}return E.obj&&P&&(A=_.leaveObject(O)),E.key!==null&&(A!==null||P===!0)?_.leaveKey(T,E.key,A):T!==null&&_.exitKey(T),A},Node$2.prototype._decodeGeneric=function(_,x,E){const A=this._baseState;return _==="seq"||_==="set"?null:_==="seqof"||_==="setof"?this._decodeList(x,_,A.args[0],E):/str$/.test(_)?this._decodeStr(x,_,E):_==="objid"&&A.args?this._decodeObjid(x,A.args[0],A.args[1],E):_==="objid"?this._decodeObjid(x,null,null,E):_==="gentime"||_==="utctime"?this._decodeTime(x,_,E):_==="null_"?this._decodeNull(x,E):_==="bool"?this._decodeBool(x,E):_==="objDesc"?this._decodeStr(x,_,E):_==="int"||_==="enum"?this._decodeInt(x,A.args&&A.args[0],E):A.use!==null?this._getUse(A.use,x._reporterState.obj)._decode(x,E):x.error("unknown tag: "+_)},Node$2.prototype._getUse=function(_,x){const E=this._baseState;return E.useDecoder=this._use(_,x),assert$8(E.useDecoder._baseState.parent===null),E.useDecoder=E.useDecoder._baseState.children[0],E.implicit!==E.useDecoder._baseState.implicit&&(E.useDecoder=E.useDecoder.clone(),E.useDecoder._baseState.implicit=E.implicit),E.useDecoder},Node$2.prototype._decodeChoice=function(_,x){const E=this._baseState;let A=null,P=!1;return Object.keys(E.choice).some(function(T){const O=_.save(),k=E.choice[T];try{const C=k._decode(_,x);if(_.isError(C))return!1;A={type:T,value:C},P=!0}catch{return _.restore(O),!1}return!0},this),P?A:_.error("Choice not matched")},Node$2.prototype._createEncoderBuffer=function(_){return new EncoderBuffer(_,this.reporter)},Node$2.prototype._encode=function(_,x,E){const A=this._baseState;if(A.default!==null&&A.default===_)return;const P=this._encodeValue(_,x,E);if(P!==void 0&&!this._skipDefault(P,x,E))return P},Node$2.prototype._encodeValue=function(_,x,E){const A=this._baseState;if(A.parent===null)return A.children[0]._encode(_,x||new Reporter);let P=null;if(this.reporter=x,A.optional&&_===void 0)if(A.default!==null)_=A.default;else return;let T=null,O=!1;if(A.any)P=this._createEncoderBuffer(_);else if(A.choice)P=this._encodeChoice(_,x);else if(A.contains)T=this._getUse(A.contains,E)._encode(_,x),O=!0;else if(A.children)T=A.children.map(function(k){if(k._baseState.tag==="null_")return k._encode(null,x,_);if(k._baseState.key===null)return x.error("Child should have a key");const C=x.enterKey(k._baseState.key);if(typeof _!="object")return x.error("Child expected, but input is not object");const U=k._encode(_[k._baseState.key],x,_);return x.leaveKey(C),U},this).filter(function(k){return k}),T=this._createEncoderBuffer(T);else if(A.tag==="seqof"||A.tag==="setof"){if(!(A.args&&A.args.length===1))return x.error("Too many args for : "+A.tag);if(!Array.isArray(_))return x.error("seqof/setof, but data is not Array");const k=this.clone();k._baseState.implicit=null,T=this._createEncoderBuffer(_.map(function(C){const U=this._baseState;return this._getUse(U.args[0],_)._encode(C,x)},k))}else A.use!==null?P=this._getUse(A.use,E)._encode(_,x):(T=this._encodePrimitive(A.tag,_),O=!0);if(!A.any&&A.choice===null){const k=A.implicit!==null?A.implicit:A.tag,C=A.implicit===null?"universal":"context";k===null?A.use===null&&x.error("Tag could be omitted only for .use()"):A.use===null&&(P=this._encodeComposite(k,O,C,T))}return A.explicit!==null&&(P=this._encodeComposite(A.explicit,!1,"context",P)),P},Node$2.prototype._encodeChoice=function(_,x){const E=this._baseState,A=E.choice[_.type];return A||assert$8(!1,_.type+" not found in "+JSON.stringify(Object.keys(E.choice))),A._encode(_.value,x)},Node$2.prototype._encodePrimitive=function(_,x){const E=this._baseState;if(/str$/.test(_))return this._encodeStr(x,_);if(_==="objid"&&E.args)return this._encodeObjid(x,E.reverseArgs[0],E.args[1]);if(_==="objid")return this._encodeObjid(x,null,null);if(_==="gentime"||_==="utctime")return this._encodeTime(x,_);if(_==="null_")return this._encodeNull();if(_==="int"||_==="enum")return this._encodeInt(x,E.args&&E.reverseArgs[0]);if(_==="bool")return this._encodeBool(x);if(_==="objDesc")return this._encodeStr(x,_);throw new Error("Unsupported tag: "+_)},Node$2.prototype._isNumstr=function(_){return/^[0-9 ]*$/.test(_)},Node$2.prototype._isPrintstr=function(_){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(_)};var der$2={};(function(v){function _(x){const E={};return Object.keys(x).forEach(function(A){(A|0)==A&&(A=A|0);const P=x[A];E[P]=A}),E}v.tagClass={0:"universal",1:"application",2:"context",3:"private"},v.tagClassByName=_(v.tagClass),v.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},v.tagByName=_(v.tag)})(der$2);const inherits$4=inherits_browserExports,Buffer$b=safer_1.Buffer,Node$1=node,der$1=der$2;function DEREncoder$1(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new DERNode$1,this.tree._init(v.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function(_,x){return this.tree._encode(_,x).join()};function DERNode$1(v){Node$1.call(this,"der",v)}inherits$4(DERNode$1,Node$1),DERNode$1.prototype._encodeComposite=function(_,x,E,A){const P=encodeTag(_,x,E,this.reporter);if(A.length<128){const k=Buffer$b.alloc(2);return k[0]=P,k[1]=A.length,this._createEncoderBuffer([k,A])}let T=1;for(let k=A.length;k>=256;k>>=8)T++;const O=Buffer$b.alloc(1+1+T);O[0]=P,O[1]=128|T;for(let k=1+T,C=A.length;C>0;k--,C>>=8)O[k]=C&255;return this._createEncoderBuffer([O,A])},DERNode$1.prototype._encodeStr=function(_,x){if(x==="bitstr")return this._createEncoderBuffer([_.unused|0,_.data]);if(x==="bmpstr"){const E=Buffer$b.alloc(_.length*2);for(let A=0;A<_.length;A++)E.writeUInt16BE(_.charCodeAt(A),A*2);return this._createEncoderBuffer(E)}else return x==="numstr"?this._isNumstr(_)?this._createEncoderBuffer(_):this.reporter.error("Encoding of string type: numstr supports only digits and space"):x==="printstr"?this._isPrintstr(_)?this._createEncoderBuffer(_):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(x)?this._createEncoderBuffer(_):x==="objDesc"?this._createEncoderBuffer(_):this.reporter.error("Encoding of string type: "+x+" unsupported")},DERNode$1.prototype._encodeObjid=function(_,x,E){if(typeof _=="string"){if(!x)return this.reporter.error("string objid given, but no values map found");if(!x.hasOwnProperty(_))return this.reporter.error("objid not found in values map");_=x[_].split(/[\s.]+/g);for(let O=0;O<_.length;O++)_[O]|=0}else if(Array.isArray(_)){_=_.slice();for(let O=0;O<_.length;O++)_[O]|=0}if(!Array.isArray(_))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(_));if(!E){if(_[1]>=40)return this.reporter.error("Second objid identifier OOB");_.splice(0,2,_[0]*40+_[1])}let A=0;for(let O=0;O<_.length;O++){let k=_[O];for(A++;k>=128;k>>=7)A++}const P=Buffer$b.alloc(A);let T=P.length-1;for(let O=_.length-1;O>=0;O--){let k=_[O];for(P[T--]=k&127;(k>>=7)>0;)P[T--]=128|k&127}return this._createEncoderBuffer(P)};function two(v){return v<10?"0"+v:v}DERNode$1.prototype._encodeTime=function(_,x){let E;const A=new Date(_);return x==="gentime"?E=[two(A.getUTCFullYear()),two(A.getUTCMonth()+1),two(A.getUTCDate()),two(A.getUTCHours()),two(A.getUTCMinutes()),two(A.getUTCSeconds()),"Z"].join(""):x==="utctime"?E=[two(A.getUTCFullYear()%100),two(A.getUTCMonth()+1),two(A.getUTCDate()),two(A.getUTCHours()),two(A.getUTCMinutes()),two(A.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+x+" time is not supported yet"),this._encodeStr(E,"octstr")},DERNode$1.prototype._encodeNull=function(){return this._createEncoderBuffer("")},DERNode$1.prototype._encodeInt=function(_,x){if(typeof _=="string"){if(!x)return this.reporter.error("String int or enum given, but no values map");if(!x.hasOwnProperty(_))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(_));_=x[_]}if(typeof _!="number"&&!Buffer$b.isBuffer(_)){const P=_.toArray();!_.sign&&P[0]&128&&P.unshift(0),_=Buffer$b.from(P)}if(Buffer$b.isBuffer(_)){let P=_.length;_.length===0&&P++;const T=Buffer$b.alloc(P);return _.copy(T),_.length===0&&(T[0]=0),this._createEncoderBuffer(T)}if(_<128)return this._createEncoderBuffer(_);if(_<256)return this._createEncoderBuffer([0,_]);let E=1;for(let P=_;P>=256;P>>=8)E++;const A=new Array(E);for(let P=A.length-1;P>=0;P--)A[P]=_&255,_>>=8;return A[0]&128&&A.unshift(0),this._createEncoderBuffer(Buffer$b.from(A))},DERNode$1.prototype._encodeBool=function(_){return this._createEncoderBuffer(_?255:0)},DERNode$1.prototype._use=function(_,x){return typeof _=="function"&&(_=_(x)),_._getEncoder("der").tree},DERNode$1.prototype._skipDefault=function(_,x,E){const A=this._baseState;let P;if(A.default===null)return!1;const T=_.join();if(A.defaultBuffer===void 0&&(A.defaultBuffer=this._encodeValue(A.default,x,E).join()),T.length!==A.defaultBuffer.length)return!1;for(P=0;P<T.length;P++)if(T[P]!==A.defaultBuffer[P])return!1;return!0};function encodeTag(v,_,x,E){let A;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),der$1.tagByName.hasOwnProperty(v))A=der$1.tagByName[v];else if(typeof v=="number"&&(v|0)===v)A=v;else return E.error("Unknown tag: "+v);return A>=31?E.error("Multi-octet tag encoding unsupported"):(_||(A|=32),A|=der$1.tagClassByName[x||"universal"]<<6,A)}const inherits$3=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(v){DEREncoder.call(this,v),this.enc="pem"}inherits$3(PEMEncoder,DEREncoder);var pem$1=PEMEncoder;PEMEncoder.prototype.encode=function(_,x){const A=DEREncoder.prototype.encode.call(this,_).toString("base64"),P=["-----BEGIN "+x.label+"-----"];for(let T=0;T<A.length;T+=64)P.push(A.slice(T,T+64));return P.push("-----END "+x.label+"-----"),P.join(`
`)},function(v){const _=v;_.der=der_1$1,_.pem=pem$1}(encoders);var decoders={};const inherits$2=inherits_browserExports,bignum=bnExports$2,DecoderBuffer=buffer.DecoderBuffer,Node=node,der=der$2;function DERDecoder$1(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new DERNode,this.tree._init(v.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function(_,x){return DecoderBuffer.isDecoderBuffer(_)||(_=new DecoderBuffer(_,x)),this.tree._decode(_,x)};function DERNode(v){Node.call(this,"der",v)}inherits$2(DERNode,Node),DERNode.prototype._peekTag=function(_,x,E){if(_.isEmpty())return!1;const A=_.save(),P=derDecodeTag(_,'Failed to peek tag: "'+x+'"');return _.isError(P)?P:(_.restore(A),P.tag===x||P.tagStr===x||P.tagStr+"of"===x||E)},DERNode.prototype._decodeTag=function(_,x,E){const A=derDecodeTag(_,'Failed to decode tag of "'+x+'"');if(_.isError(A))return A;let P=derDecodeLen(_,A.primitive,'Failed to get length of "'+x+'"');if(_.isError(P))return P;if(!E&&A.tag!==x&&A.tagStr!==x&&A.tagStr+"of"!==x)return _.error('Failed to match tag: "'+x+'"');if(A.primitive||P!==null)return _.skip(P,'Failed to match body of: "'+x+'"');const T=_.save(),O=this._skipUntilEnd(_,'Failed to skip indefinite length body: "'+this.tag+'"');return _.isError(O)?O:(P=_.offset-T.offset,_.restore(T),_.skip(P,'Failed to match body of: "'+x+'"'))},DERNode.prototype._skipUntilEnd=function(_,x){for(;;){const E=derDecodeTag(_,x);if(_.isError(E))return E;const A=derDecodeLen(_,E.primitive,x);if(_.isError(A))return A;let P;if(E.primitive||A!==null?P=_.skip(A):P=this._skipUntilEnd(_,x),_.isError(P))return P;if(E.tagStr==="end")break}},DERNode.prototype._decodeList=function(_,x,E,A){const P=[];for(;!_.isEmpty();){const T=this._peekTag(_,"end");if(_.isError(T))return T;const O=E.decode(_,"der",A);if(_.isError(O)&&T)break;P.push(O)}return P},DERNode.prototype._decodeStr=function(_,x){if(x==="bitstr"){const E=_.readUInt8();return _.isError(E)?E:{unused:E,data:_.raw()}}else if(x==="bmpstr"){const E=_.raw();if(E.length%2===1)return _.error("Decoding of string type: bmpstr length mismatch");let A="";for(let P=0;P<E.length/2;P++)A+=String.fromCharCode(E.readUInt16BE(P*2));return A}else if(x==="numstr"){const E=_.raw().toString("ascii");return this._isNumstr(E)?E:_.error("Decoding of string type: numstr unsupported characters")}else{if(x==="octstr")return _.raw();if(x==="objDesc")return _.raw();if(x==="printstr"){const E=_.raw().toString("ascii");return this._isPrintstr(E)?E:_.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(x)?_.raw().toString():_.error("Decoding of string type: "+x+" unsupported")}},DERNode.prototype._decodeObjid=function(_,x,E){let A;const P=[];let T=0,O=0;for(;!_.isEmpty();)O=_.readUInt8(),T<<=7,T|=O&127,O&128||(P.push(T),T=0);O&128&&P.push(T);const k=P[0]/40|0,C=P[0]%40;if(E?A=P:A=[k,C].concat(P.slice(1)),x){let U=x[A.join(" ")];U===void 0&&(U=x[A.join(".")]),U!==void 0&&(A=U)}return A},DERNode.prototype._decodeTime=function(_,x){const E=_.raw().toString();let A,P,T,O,k,C;if(x==="gentime")A=E.slice(0,4)|0,P=E.slice(4,6)|0,T=E.slice(6,8)|0,O=E.slice(8,10)|0,k=E.slice(10,12)|0,C=E.slice(12,14)|0;else if(x==="utctime")A=E.slice(0,2)|0,P=E.slice(2,4)|0,T=E.slice(4,6)|0,O=E.slice(6,8)|0,k=E.slice(8,10)|0,C=E.slice(10,12)|0,A<70?A=2e3+A:A=1900+A;else return _.error("Decoding "+x+" time is not supported yet");return Date.UTC(A,P-1,T,O,k,C,0)},DERNode.prototype._decodeNull=function(){return null},DERNode.prototype._decodeBool=function(_){const x=_.readUInt8();return _.isError(x)?x:x!==0},DERNode.prototype._decodeInt=function(_,x){const E=_.raw();let A=new bignum(E);return x&&(A=x[A.toString(10)]||A),A},DERNode.prototype._use=function(_,x){return typeof _=="function"&&(_=_(x)),_._getDecoder("der").tree};function derDecodeTag(v,_){let x=v.readUInt8(_);if(v.isError(x))return x;const E=der.tagClass[x>>6],A=(x&32)===0;if((x&31)===31){let T=x;for(x=0;(T&128)===128;){if(T=v.readUInt8(_),v.isError(T))return T;x<<=7,x|=T&127}}else x&=31;const P=der.tag[x];return{cls:E,primitive:A,tag:x,tagStr:P}}function derDecodeLen(v,_,x){let E=v.readUInt8(x);if(v.isError(E))return E;if(!_&&E===128)return null;if(!(E&128))return E;const A=E&127;if(A>4)return v.error("length octect is too long");E=0;for(let P=0;P<A;P++){E<<=8;const T=v.readUInt8(x);if(v.isError(T))return T;E|=T}return E}const inherits$1=inherits_browserExports,Buffer$a=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(v){DERDecoder.call(this,v),this.enc="pem"}inherits$1(PEMDecoder,DERDecoder);var pem=PEMDecoder;PEMDecoder.prototype.decode=function(_,x){const E=_.toString().split(/[\r\n]+/g),A=x.label.toUpperCase(),P=/^-----(BEGIN|END) ([^-]+)-----$/;let T=-1,O=-1;for(let U=0;U<E.length;U++){const N=E[U].match(P);if(N!==null&&N[2]===A)if(T===-1){if(N[1]!=="BEGIN")break;T=U}else{if(N[1]!=="END")break;O=U;break}}if(T===-1||O===-1)throw new Error("PEM section not found for: "+A);const k=E.slice(T+1,O).join("");k.replace(/[^a-z0-9+/=]+/gi,"");const C=Buffer$a.from(k,"base64");return DERDecoder.prototype.decode.call(this,C,x)},function(v){const _=v;_.der=der_1,_.pem=pem}(decoders),function(v){const _=encoders,x=decoders,E=inherits_browserExports,A=v;A.define=function(O,k){return new P(O,k)};function P(T,O){this.name=T,this.body=O,this.decoders={},this.encoders={}}P.prototype._createNamed=function(O){const k=this.name;function C(U){this._initNamed(U,k)}return E(C,O),C.prototype._initNamed=function(N,H){O.call(this,N,H)},new C(this)},P.prototype._getDecoder=function(O){return O=O||"der",this.decoders.hasOwnProperty(O)||(this.decoders[O]=this._createNamed(x[O])),this.decoders[O]},P.prototype.decode=function(O,k,C){return this._getDecoder(k).decode(O,C)},P.prototype._getEncoder=function(O){return O=O||"der",this.encoders.hasOwnProperty(O)||(this.encoders[O]=this._createNamed(_[O])),this.encoders[O]},P.prototype.encode=function(O,k,C){return this._getEncoder(k).encode(O,C)}}(api$1);var base$4={};(function(v){const _=v;_.Reporter=reporter.Reporter,_.DecoderBuffer=buffer.DecoderBuffer,_.EncoderBuffer=buffer.EncoderBuffer,_.Node=node})(base$4);var constants={};(function(v){const _=v;_._reverse=function(E){const A={};return Object.keys(E).forEach(function(P){(P|0)==P&&(P=P|0);const T=E[P];A[T]=P}),A},_.der=der$2})(constants),function(v){const _=v;_.bignum=bnExports$2,_.define=api$1.define,_.base=base$4,_.constants=constants,_.decoders=decoders,_.encoders=encoders}(asn1$2);var asn=asn1$2,Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$1=asn1$2;asn1$3.certificate=certificate;var RSAPrivateKey=asn1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=RSAPublicKey;var PublicKey=asn1$1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=PublicKey;var AlgorithmIdentifier=asn1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PrivateKeyInfo=asn1$1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=DSAPrivateKey,asn1$3.DSAparam=asn1$1.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=ECPrivateKey;var ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});asn1$3.signature=asn1$1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$6,Buffer$9=safeBufferExports.Buffer,fixProc$1=function(v,_){var x=v.toString(),E=x.match(findProc),A;if(E){var T="aes"+E[1],O=Buffer$9.from(E[2],"hex"),k=Buffer$9.from(E[3].replace(/[\r\n]/g,""),"base64"),C=evp(_,O.slice(0,8),parseInt(E[1],10)).key,U=[],N=ciphers$1.createDecipheriv(T,C,O);U.push(N.update(k)),U.push(N.final()),A=Buffer$9.concat(U)}else{var P=x.match(fullRegex);A=Buffer$9.from(P[2].replace(/[\r\n]/g,""),"base64")}var H=x.match(startRegex)[1];return{tag:H,data:A}},asn1=asn1$3,aesid=require$$1,fixProc=fixProc$1,ciphers=browser$6,compat=browser$8,Buffer$8=safeBufferExports.Buffer,parseAsn1=parseKeys$2;function parseKeys$2(v){var _;typeof v=="object"&&!Buffer$8.isBuffer(v)&&(_=v.passphrase,v=v.key),typeof v=="string"&&(v=Buffer$8.from(v));var x=fixProc(v,_),E=x.tag,A=x.data,P,T;switch(E){case"CERTIFICATE":T=asn1.certificate.decode(A,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(T||(T=asn1.PublicKey.decode(A,"der")),P=T.algorithm.algorithm.join("."),P){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(T.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return T.subjectPrivateKey=T.subjectPublicKey,{type:"ec",data:T};case"1.2.840.10040.4.1":return T.algorithm.params.pub_key=asn1.DSAparam.decode(T.subjectPublicKey.data,"der"),{type:"dsa",data:T.algorithm.params};default:throw new Error("unknown key id "+P)}case"ENCRYPTED PRIVATE KEY":A=asn1.EncryptedPrivateKey.decode(A,"der"),A=decrypt(A,_);case"PRIVATE KEY":switch(T=asn1.PrivateKey.decode(A,"der"),P=T.algorithm.algorithm.join("."),P){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(T.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:T.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(T.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return T.algorithm.params.priv_key=asn1.DSAparam.decode(T.subjectPrivateKey,"der"),{type:"dsa",params:T.algorithm.params};default:throw new Error("unknown key id "+P)}case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode(A,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode(A,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode(A,"der")};case"EC PRIVATE KEY":return A=asn1.ECPrivateKey.decode(A,"der"),{curve:A.parameters.value,privateKey:A.privateKey};default:throw new Error("unknown key type "+E)}}parseKeys$2.signature=asn1.signature;function decrypt(v,_){var x=v.algorithm.decrypt.kde.kdeparams.salt,E=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),A=aesid[v.algorithm.decrypt.cipher.algo.join(".")],P=v.algorithm.decrypt.cipher.iv,T=v.subjectPrivateKey,O=parseInt(A.split("-")[1],10)/8,k=compat.pbkdf2Sync(_,x,E,O,"sha1"),C=ciphers.createDecipheriv(A,k,P),U=[];return U.push(C.update(T)),U.push(C.final()),Buffer$8.concat(U)}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$2.exports;hasRequiredSign=1;var v=safeBufferExports.Buffer,_=browser$9,x=browserifyRsa,E=requireElliptic().ec,A=bnExports,P=parseAsn1,T=require$$4,O=1;function k(re,ee,fe,le,pe){var ie=P(ee);if(ie.curve){if(le!=="ecdsa"&&le!=="ecdsa/rsa")throw new Error("wrong private key type");return C(re,ie)}else if(ie.type==="dsa"){if(le!=="dsa")throw new Error("wrong private key type");return U(re,ie,fe)}if(le!=="rsa"&&le!=="ecdsa/rsa")throw new Error("wrong private key type");if(ee.padding!==void 0&&ee.padding!==O)throw new Error("illegal or unsupported padding mode");re=v.concat([pe,re]);for(var he=ie.modulus.byteLength(),ae=[0,1];re.length+ae.length+1<he;)ae.push(255);ae.push(0);for(var te=-1;++te<re.length;)ae.push(re[te]);var ue=x(ae,ie);return ue}function C(re,ee){var fe=T[ee.curve.join(".")];if(!fe)throw new Error("unknown curve "+ee.curve.join("."));var le=new E(fe),pe=le.keyFromPrivate(ee.privateKey),ie=pe.sign(re);return v.from(ie.toDER())}function U(re,ee,fe){for(var le=ee.params.priv_key,pe=ee.params.p,ie=ee.params.q,he=ee.params.g,ae=new A(0),te,ue=D(re,ie).mod(ie),ne=!1,J=H(le,ie,re,fe);ne===!1;)te=V(ie,J,fe),ae=X(he,te,pe,ie),ne=te.invm(ie).imul(ue.add(le.mul(ae))).mod(ie),ne.cmpn(0)===0&&(ne=!1,ae=new A(0));return N(ae,ne)}function N(re,ee){re=re.toArray(),ee=ee.toArray(),re[0]&128&&(re=[0].concat(re)),ee[0]&128&&(ee=[0].concat(ee));var fe=re.length+ee.length+4,le=[48,fe,2,re.length];return le=le.concat(re,[2,ee.length],ee),v.from(le)}function H(re,ee,fe,le){if(re=v.from(re.toArray()),re.length<ee.byteLength()){var pe=v.alloc(ee.byteLength()-re.length);re=v.concat([pe,re])}var ie=fe.length,he=j(fe,ee),ae=v.alloc(ie);ae.fill(1);var te=v.alloc(ie);return te=_(le,te).update(ae).update(v.from([0])).update(re).update(he).digest(),ae=_(le,te).update(ae).digest(),te=_(le,te).update(ae).update(v.from([1])).update(re).update(he).digest(),ae=_(le,te).update(ae).digest(),{k:te,v:ae}}function D(re,ee){var fe=new A(re),le=(re.length<<3)-ee.bitLength();return le>0&&fe.ishrn(le),fe}function j(re,ee){re=D(re,ee),re=re.mod(ee);var fe=v.from(re.toArray());if(fe.length<ee.byteLength()){var le=v.alloc(ee.byteLength()-fe.length);fe=v.concat([le,fe])}return fe}function V(re,ee,fe){var le,pe;do{for(le=v.alloc(0);le.length*8<re.bitLength();)ee.v=_(fe,ee.k).update(ee.v).digest(),le=v.concat([le,ee.v]);pe=D(le,re),ee.k=_(fe,ee.k).update(ee.v).update(v.from([0])).digest(),ee.v=_(fe,ee.k).update(ee.v).digest()}while(pe.cmp(re)!==-1);return pe}function X(re,ee,fe,le){return re.toRed(A.mont(fe)).redPow(ee).fromRed().mod(le)}return sign$2.exports=k,sign$2.exports.getKey=H,sign$2.exports.makeKey=V,sign$2.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var v=safeBufferExports.Buffer,_=bnExports,x=requireElliptic().ec,E=parseAsn1,A=require$$4;function P(C,U,N,H,D){var j=E(N);if(j.type==="ec"){if(H!=="ecdsa"&&H!=="ecdsa/rsa")throw new Error("wrong public key type");return T(C,U,j)}else if(j.type==="dsa"){if(H!=="dsa")throw new Error("wrong public key type");return O(C,U,j)}if(H!=="rsa"&&H!=="ecdsa/rsa")throw new Error("wrong public key type");U=v.concat([D,U]);for(var V=j.modulus.byteLength(),X=[1],re=0;U.length+X.length+2<V;)X.push(255),re+=1;X.push(0);for(var ee=-1;++ee<U.length;)X.push(U[ee]);X=v.from(X);var fe=_.mont(j.modulus);C=new _(C).toRed(fe),C=C.redPow(new _(j.publicExponent)),C=v.from(C.fromRed().toArray());var le=re<8?1:0;for(V=Math.min(C.length,X.length),C.length!==X.length&&(le=1),ee=-1;++ee<V;)le|=C[ee]^X[ee];return le===0}function T(C,U,N){var H=A[N.data.algorithm.curve.join(".")];if(!H)throw new Error("unknown curve "+N.data.algorithm.curve.join("."));var D=new x(H),j=N.data.subjectPrivateKey.data;return D.verify(U,C,j)}function O(C,U,N){var H=N.data.p,D=N.data.q,j=N.data.g,V=N.data.pub_key,X=E.signature.decode(C,"der"),re=X.s,ee=X.r;k(re,D),k(ee,D);var fe=_.mont(H),le=re.invm(D),pe=j.toRed(fe).redPow(new _(U).mul(le).mod(D)).fromRed().mul(V.toRed(fe).redPow(ee.mul(le).mod(D)).fromRed()).mod(H).mod(D);return pe.cmp(ee)===0}function k(C,U){if(C.cmpn(0)<=0)throw new Error("invalid sig");if(C.cmp(U)>=0)throw new Error("invalid sig")}return verify_1=P,verify_1}var browser$4,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$4;hasRequiredBrowser$1=1;var v=safeBufferExports.Buffer,_=browser$b,x=readableBrowserExports,E=inherits_browserExports,A=requireSign(),P=requireVerify(),T=require$$6;Object.keys(T).forEach(function(N){T[N].id=v.from(T[N].id,"hex"),T[N.toLowerCase()]=T[N]});function O(N){x.Writable.call(this);var H=T[N];if(!H)throw new Error("Unknown message digest");this._hashType=H.hash,this._hash=_(H.hash),this._tag=H.id,this._signType=H.sign}E(O,x.Writable),O.prototype._write=function(H,D,j){this._hash.update(H),j()},O.prototype.update=function(H,D){return this._hash.update(typeof H=="string"?v.from(H,D):H),this},O.prototype.sign=function(H,D){this.end();var j=this._hash.digest(),V=A(j,H,this._hashType,this._signType,this._tag);return D?V.toString(D):V};function k(N){x.Writable.call(this);var H=T[N];if(!H)throw new Error("Unknown message digest");this._hash=_(H.hash),this._tag=H.id,this._signType=H.sign}E(k,x.Writable),k.prototype._write=function(H,D,j){this._hash.update(H),j()},k.prototype.update=function(H,D){return this._hash.update(typeof H=="string"?v.from(H,D):H),this},k.prototype.verify=function(H,D,j){var V=typeof D=="string"?v.from(D,j):D;this.end();var X=this._hash.digest();return P(V,X,H,this._signType,this._tag)};function C(N){return new O(N)}function U(N){return new k(N)}return browser$4={Sign:C,Verify:U,createSign:C,createVerify:U},browser$4}var browser$3,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$3;hasRequiredBrowser=1;var v=requireElliptic(),_=bnExports$2;browser$3=function(T){return new E(T)};var x={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};x.p224=x.secp224r1,x.p256=x.secp256r1=x.prime256v1,x.p192=x.secp192r1=x.prime192v1,x.p384=x.secp384r1,x.p521=x.secp521r1;function E(P){this.curveType=x[P],this.curveType||(this.curveType={name:P}),this.curve=new v.ec(this.curveType.name),this.keys=void 0}E.prototype.generateKeys=function(P,T){return this.keys=this.curve.genKeyPair(),this.getPublicKey(P,T)},E.prototype.computeSecret=function(P,T,O){T=T||"utf8",dist$4.Buffer.isBuffer(P)||(P=new dist$4.Buffer(P,T));var k=this.curve.keyFromPublic(P).getPublic(),C=k.mul(this.keys.getPrivate()).getX();return A(C,O,this.curveType.byteLength)},E.prototype.getPublicKey=function(P,T){var O=this.keys.getPublic(T==="compressed",!0);return T==="hybrid"&&(O[O.length-1]%2?O[0]=7:O[0]=6),A(O,P)},E.prototype.getPrivateKey=function(P){return A(this.keys.getPrivate(),P)},E.prototype.setPublicKey=function(P,T){return T=T||"utf8",dist$4.Buffer.isBuffer(P)||(P=new dist$4.Buffer(P,T)),this.keys._importPublic(P),this},E.prototype.setPrivateKey=function(P,T){T=T||"utf8",dist$4.Buffer.isBuffer(P)||(P=new dist$4.Buffer(P,T));var O=new _(P);return O=O.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(O),this};function A(P,T,O){Array.isArray(P)||(P=P.toArray());var k=new dist$4.Buffer(P);if(O&&k.length<O){var C=new dist$4.Buffer(O-k.length);C.fill(0),k=dist$4.Buffer.concat([C,k])}return T?k.toString(T):k}return browser$3}var browser$2={},createHash$3=browser$b,Buffer$7=safeBufferExports.Buffer,mgf$2=function(v,_){for(var x=Buffer$7.alloc(0),E=0,A;x.length<_;)A=i2ops(E++),x=Buffer$7.concat([x,createHash$3("sha1").update(v).update(A).digest()]);return x.slice(0,_)};function i2ops(v){var _=Buffer$7.allocUnsafe(4);return _.writeUInt32BE(v,0),_}var xor$2=function(_,x){for(var E=_.length,A=-1;++A<E;)_[A]^=x[A];return _},BN$7=bnExports$2,Buffer$6=safeBufferExports.Buffer;function withPublic$2(v,_){return Buffer$6.from(v.toRed(BN$7.mont(_.modulus)).redPow(new BN$7(_.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes$2=browserExports$1,createHash$2=browser$b,mgf$1=mgf$2,xor$1=xor$2,BN$6=bnExports$2,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$5=safeBufferExports.Buffer,publicEncrypt=function(_,x,E){var A;_.padding?A=_.padding:E?A=1:A=4;var P=parseKeys$1(_),T;if(A===4)T=oaep$1(P,x);else if(A===1)T=pkcs1$1(P,x,E);else if(A===3){if(T=new BN$6(x),T.cmp(P.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return E?crt$1(T,P):withPublic$1(T,P)};function oaep$1(v,_){var x=v.modulus.byteLength(),E=_.length,A=createHash$2("sha1").update(Buffer$5.alloc(0)).digest(),P=A.length,T=2*P;if(E>x-T-2)throw new Error("message too long");var O=Buffer$5.alloc(x-E-T-2),k=x-P-1,C=randomBytes$2(P),U=xor$1(Buffer$5.concat([A,O,Buffer$5.alloc(1,1),_],k),mgf$1(C,k)),N=xor$1(C,mgf$1(U,P));return new BN$6(Buffer$5.concat([Buffer$5.alloc(1),N,U],x))}function pkcs1$1(v,_,x){var E=_.length,A=v.modulus.byteLength();if(E>A-11)throw new Error("message too long");var P;return x?P=Buffer$5.alloc(A-E-3,255):P=nonZero(A-E-3),new BN$6(Buffer$5.concat([Buffer$5.from([0,x?1:2]),P,Buffer$5.alloc(1),_],A))}function nonZero(v){for(var _=Buffer$5.allocUnsafe(v),x=0,E=randomBytes$2(v*2),A=0,P;x<v;)A===E.length&&(E=randomBytes$2(v*2),A=0),P=E[A++],P&&(_[x++]=P);return _}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN$5=bnExports$2,crt=browserifyRsa,createHash$1=browser$b,withPublic=withPublic_1,Buffer$4=safeBufferExports.Buffer,privateDecrypt=function(_,x,E){var A;_.padding?A=_.padding:E?A=1:A=4;var P=parseKeys(_),T=P.modulus.byteLength();if(x.length>T||new BN$5(x).cmp(P.modulus)>=0)throw new Error("decryption error");var O;E?O=withPublic(new BN$5(x),P):O=crt(x,P);var k=Buffer$4.alloc(T-O.length);if(O=Buffer$4.concat([k,O],T),A===4)return oaep(P,O);if(A===1)return pkcs1(P,O,E);if(A===3)return O;throw new Error("unknown padding")};function oaep(v,_){var x=v.modulus.byteLength(),E=createHash$1("sha1").update(Buffer$4.alloc(0)).digest(),A=E.length;if(_[0]!==0)throw new Error("decryption error");var P=_.slice(1,A+1),T=_.slice(A+1),O=xor(P,mgf(T,A)),k=xor(T,mgf(O,x-A-1));if(compare$1(E,k.slice(0,A)))throw new Error("decryption error");for(var C=A;k[C]===0;)C++;if(k[C++]!==1)throw new Error("decryption error");return k.slice(C)}function pkcs1(v,_,x){for(var E=_.slice(0,2),A=2,P=0;_[A++]!==0;)if(A>=_.length){P++;break}var T=_.slice(2,A-1);if((E.toString("hex")!=="0002"&&!x||E.toString("hex")!=="0001"&&x)&&P++,T.length<8&&P++,P)throw new Error("decryption error");return _.slice(A)}function compare$1(v,_){v=Buffer$4.from(v),_=Buffer$4.from(_);var x=0,E=v.length;v.length!==_.length&&(x++,E=Math.min(v.length,_.length));for(var A=-1;++A<E;)x+=v[A]^_[A];return x}(function(v){v.publicEncrypt=publicEncrypt,v.privateDecrypt=privateDecrypt,v.privateEncrypt=function(x,E){return v.publicEncrypt(x,E,!0)},v.publicDecrypt=function(x,E){return v.privateDecrypt(x,E,!0)}})(browser$2);var browser$1={};function oldBrowser$1(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports,randombytes=browserExports$1,Buffer$3=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$5=commonjsGlobal.crypto||commonjsGlobal.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(v,_){if(typeof v!="number"||v!==v)throw new TypeError("offset must be a number");if(v>kMaxUint32||v<0)throw new TypeError("offset must be a uint32");if(v>kBufferMaxLength||v>_)throw new RangeError("offset out of range")}function assertSize(v,_,x){if(typeof v!="number"||v!==v)throw new TypeError("size must be a number");if(v>kMaxUint32||v<0)throw new TypeError("size must be a uint32");if(v+_>x||v>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$5&&crypto$5.getRandomValues||!dist$4.process.browser?(browser$1.randomFill=randomFill,browser$1.randomFillSync=randomFillSync):(browser$1.randomFill=oldBrowser$1,browser$1.randomFillSync=oldBrowser$1);function randomFill(v,_,x,E){if(!Buffer$3.isBuffer(v)&&!(v instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof _=="function")E=_,_=0,x=v.length;else if(typeof x=="function")E=x,x=v.length-_;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(_,v.length),assertSize(x,_,v.length),actualFill(v,_,x,E)}function actualFill(v,_,x,E){if(dist$4.process.browser){var A=v.buffer,P=new Uint8Array(A,_,x);if(crypto$5.getRandomValues(P),E){dist$4.process.nextTick(function(){E(null,v)});return}return v}if(E){randombytes(x,function(O,k){if(O)return E(O);k.copy(v,_),E(null,v)});return}var T=randombytes(x);return T.copy(v,_),v}function randomFillSync(v,_,x){if(typeof _>"u"&&(_=0),!Buffer$3.isBuffer(v)&&!(v instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(_,v.length),x===void 0&&(x=v.length-_),assertSize(x,_,v.length),actualFill(v,_,x)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports$1,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$b,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$9;var v=algos,_=Object.keys(v),x=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(_);cryptoBrowserify.getHashes=function(){return x};var E=browser$8;cryptoBrowserify.pbkdf2=E.pbkdf2,cryptoBrowserify.pbkdf2Sync=E.pbkdf2Sync;var A=browser$7;cryptoBrowserify.Cipher=A.Cipher,cryptoBrowserify.createCipher=A.createCipher,cryptoBrowserify.Cipheriv=A.Cipheriv,cryptoBrowserify.createCipheriv=A.createCipheriv,cryptoBrowserify.Decipher=A.Decipher,cryptoBrowserify.createDecipher=A.createDecipher,cryptoBrowserify.Decipheriv=A.Decipheriv,cryptoBrowserify.createDecipheriv=A.createDecipheriv,cryptoBrowserify.getCiphers=A.getCiphers,cryptoBrowserify.listCiphers=A.listCiphers;var P=requireBrowser$2();cryptoBrowserify.DiffieHellmanGroup=P.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=P.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=P.getDiffieHellman,cryptoBrowserify.createDiffieHellman=P.createDiffieHellman,cryptoBrowserify.DiffieHellman=P.DiffieHellman;var T=requireBrowser$1();cryptoBrowserify.createSign=T.createSign,cryptoBrowserify.Sign=T.Sign,cryptoBrowserify.createVerify=T.createVerify,cryptoBrowserify.Verify=T.Verify,cryptoBrowserify.createECDH=requireBrowser();var O=browser$2;cryptoBrowserify.publicEncrypt=O.publicEncrypt,cryptoBrowserify.privateEncrypt=O.privateEncrypt,cryptoBrowserify.publicDecrypt=O.publicDecrypt,cryptoBrowserify.privateDecrypt=O.privateDecrypt;var k=browser$1;return cryptoBrowserify.randomFill=k.randomFill,cryptoBrowserify.randomFillSync=k.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var v;brorand.exports=function(A){return v||(v=new _(null)),v.generate(A)};function _(E){this.rand=E}if(brorand.exports.Rand=_,_.prototype.generate=function(A){return this._rand(A)},_.prototype._rand=function(A){if(this.rand.getBytes)return this.rand.getBytes(A);for(var P=new Uint8Array(A),T=0;T<P.length;T++)P[T]=this.rand.getByte();return P},typeof self=="object")self.crypto&&self.crypto.getRandomValues?_.prototype._rand=function(A){var P=new Uint8Array(A);return self.crypto.getRandomValues(P),P}:self.msCrypto&&self.msCrypto.getRandomValues?_.prototype._rand=function(A){var P=new Uint8Array(A);return self.msCrypto.getRandomValues(P),P}:typeof window=="object"&&(_.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var x=requireCryptoBrowserify();if(typeof x.randomBytes!="function")throw new Error("Not supported");_.prototype._rand=function(A){return x.randomBytes(A)}}catch{}return brorand.exports}var BN$4=bnExports$2,utils$c=utils$F,assert$7=utils$c.assert;function KeyPair$3(v,_){this.ec=v,this.priv=null,this.pub=null,_.priv&&this._importPrivate(_.priv,_.privEnc),_.pub&&this._importPublic(_.pub,_.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function(_,x,E){return x instanceof KeyPair$3?x:new KeyPair$3(_,{pub:x,pubEnc:E})},KeyPair$3.fromPrivate=function(_,x,E){return x instanceof KeyPair$3?x:new KeyPair$3(_,{priv:x,privEnc:E})},KeyPair$3.prototype.validate=function(){var _=this.getPublic();return _.isInfinity()?{result:!1,reason:"Invalid public key"}:_.validate()?_.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair$3.prototype.getPublic=function(_,x){return typeof _=="string"&&(x=_,_=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,_):this.pub},KeyPair$3.prototype.getPrivate=function(_){return _==="hex"?this.priv.toString(16,2):this.priv},KeyPair$3.prototype._importPrivate=function(_,x){this.priv=new BN$4(_,x||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair$3.prototype._importPublic=function(_,x){if(_.x||_.y){this.ec.curve.type==="mont"?assert$7(_.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$7(_.x&&_.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(_.x,_.y);return}this.pub=this.ec.curve.decodePoint(_,x)},KeyPair$3.prototype.derive=function(_){return _.validate()||assert$7(_.validate(),"public point not validated"),_.mul(this.priv).getX()},KeyPair$3.prototype.sign=function(_,x,E){return this.ec.sign(_,this,x,E)},KeyPair$3.prototype.verify=function(_,x){return this.ec.verify(_,x,this)},KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$3=bnExports$2,utils$b=utils$F,assert$6=utils$b.assert;function Signature$3(v,_,x){if(_ instanceof Signature$3)return _;this._importDER(_,x)||(assert$6(_.r&&_.s,"Signature without r or s"),this.r=new BN$3(_.r,16),this.s=new BN$3(_.s,16),_.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=_.recoveryParam,this.curve=v,this.byteLength=this.curve.n.byteLength())}var signature$1=Signature$3;function Position(){this.place=0}function getLength(v,_){var x=v[_.place++];if(!(x&128))return x;var E=x&15;if(E===0||E>4)return!1;for(var A=0,P=0,T=_.place;P<E;P++,T++)A<<=8,A|=v[T],A>>>=0;return A<=127?!1:(_.place=T,A)}function rmPadding(v){for(var _=0,x=v.length-1;!v[_]&&!(v[_+1]&128)&&_<x;)_++;return _===0?v:v.slice(_)}Signature$3.prototype._importDER=function(_,x){_=utils$b.toArray(_,x);var E=new Position;if(_[E.place++]!==48)return!1;var A=getLength(_,E);if(A===!1||A+E.place!==_.length||_[E.place++]!==2)return!1;var P=getLength(_,E);if(P===!1)return!1;var T=_.slice(E.place,P+E.place);if(E.place+=P,_[E.place++]!==2)return!1;var O=getLength(_,E);if(O===!1||_.length!==O+E.place)return!1;var k=_.slice(E.place,O+E.place);if(T[0]===0)if(T[1]&128)T=T.slice(1);else return!1;if(k[0]===0)if(k[1]&128)k=k.slice(1);else return!1;return this.r=new BN$3(T),this.s=new BN$3(k),this.recoveryParam=null,!0};function constructLength(v,_){if(_<128){v.push(_);return}var x=1+(Math.log(_)/Math.LN2>>>3);for(v.push(x|128);--x;)v.push(_>>>(x<<3)&255);v.push(_)}Signature$3.prototype.toDER=function(_){var x=this.r.toArray(),E=this.s.toArray();for(x[0]&128&&(x=[0].concat(x)),E[0]&128&&(E=[0].concat(E)),x=rmPadding(x),E=rmPadding(E);!E[0]&&!(E[1]&128);)E=E.slice(1);var A=[2];constructLength(A,x.length),A=A.concat(x),A.push(2),constructLength(A,E.length);var P=A.concat(E),T=[48];return constructLength(T,P.length),T=T.concat(P),utils$b.encode(T,_)},Signature$3.prototype.toBytes=function(){const _=this.r.toArray("be",this.byteLength),x=this.s.toArray("be",this.byteLength);return _.concat(x)};var BN$2=bnExports$2,HmacDRBG=hmacDrbg,utils$a=utils$F,curves$2=curves$5,rand=requireBrorand(),assert$5=utils$a.assert,KeyPair$2=key$1,Signature$2=signature$1;function EC(v){if(!(this instanceof EC))return new EC(v);typeof v=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves$2,v),"Unknown curve "+v),v=curves$2[v]),v instanceof curves$2.PresetCurve&&(v={curve:v}),this.curve=v.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=v.curve.g,this.g.precompute(v.curve.n.bitLength()+1),this.hash=v.hash||v.curve.hash}var ec$2=EC;EC.prototype.keyPair=function(_){return new KeyPair$2(this,_)},EC.prototype.keyFromPrivate=function(_,x){return KeyPair$2.fromPrivate(this,_,x)},EC.prototype.keyFromPublic=function(_,x){return KeyPair$2.fromPublic(this,_,x)},EC.prototype.genKeyPair=function(_){_||(_={});for(var x=new HmacDRBG({hash:this.hash,pers:_.pers,persEnc:_.persEnc||"utf8",entropy:_.entropy||rand(this.hash.hmacStrength),entropyEnc:_.entropy&&_.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),A=this.n.sub(new BN$2(2));;){var P=new BN$2(x.generate(E));if(!(P.cmp(A)>0))return P.iaddn(1),this.keyFromPrivate(P)}},EC.prototype._truncateToN=function(_,x){var E=_.byteLength()*8-this.n.bitLength();return E>0&&(_=_.ushrn(E)),!x&&_.cmp(this.n)>=0?_.sub(this.n):_},EC.prototype.sign=function(_,x,E,A){typeof E=="object"&&(A=E,E=null),A||(A={}),x=this.keyFromPrivate(x,E),_=this._truncateToN(new BN$2(_,16));for(var P=this.n.byteLength(),T=x.getPrivate().toArray("be",P),O=_.toArray("be",P),k=new HmacDRBG({hash:this.hash,entropy:T,nonce:O,pers:A.pers,persEnc:A.persEnc||"utf8"}),C=this.n.sub(new BN$2(1)),U=0;;U++){var N=A.k?A.k(U):new BN$2(k.generate(this.n.byteLength()));if(N=this._truncateToN(N,!0),!(N.cmpn(1)<=0||N.cmp(C)>=0)){var H=this.g.mul(N);if(!H.isInfinity()){var D=H.getX(),j=D.umod(this.n);if(j.cmpn(0)!==0){var V=N.invm(this.n).mul(j.mul(x.getPrivate()).iadd(_));if(V=V.umod(this.n),V.cmpn(0)!==0){var X=(H.getY().isOdd()?1:0)|(D.cmp(j)!==0?2:0);return A.canonical&&V.cmp(this.nh)>0&&(V=this.n.sub(V),X^=1),new Signature$2(this.curve,{r:j,s:V,recoveryParam:X})}}}}}},EC.prototype.verify=function(_,x,E,A){_=this._truncateToN(new BN$2(_,16)),E=this.keyFromPublic(E,A),x=new Signature$2(this.curve,x,"hex");var P=x.r,T=x.s;if(P.cmpn(1)<0||P.cmp(this.n)>=0||T.cmpn(1)<0||T.cmp(this.n)>=0)return!1;var O=T.invm(this.n),k=O.mul(_).umod(this.n),C=O.mul(P).umod(this.n),U;return this.curve._maxwellTrick?(U=this.g.jmulAdd(k,E.getPublic(),C),U.isInfinity()?!1:U.eqXToP(P)):(U=this.g.mulAdd(k,E.getPublic(),C),U.isInfinity()?!1:U.getX().umod(this.n).cmp(P)===0)},EC.prototype.recoverPubKey=function(v,_,x,E){assert$5((3&x)===x,"The recovery param is more than two bits"),_=new Signature$2(this.curve,_,E);var A=this.n,P=new BN$2(v),T=_.r,O=_.s,k=x&1,C=x>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&C)throw new Error("Unable to find sencond key candinate");C?T=this.curve.pointFromX(T.add(this.curve.n),k):T=this.curve.pointFromX(T,k);var U=_.r.invm(A),N=A.sub(P).mul(U).umod(A),H=O.mul(U).umod(A);return this.g.mulAdd(N,T,H)},EC.prototype.getKeyRecoveryParam=function(v,_,x,E){if(_=new Signature$2(this.curve,_,E),_.recoveryParam!==null)return _.recoveryParam;for(var A=0;A<4;A++){var P;try{P=this.recoverPubKey(v,_,A)}catch{continue}if(P.eq(x))return A}throw new Error("Unable to find valid recovery factor")};var utils$9=utils$F,assert$4=utils$9.assert,parseBytes$2=utils$9.parseBytes,cachedProperty$1=utils$9.cachedProperty;function KeyPair$1(v,_){this.eddsa=v,this._secret=parseBytes$2(_.secret),v.isPoint(_.pub)?this._pub=_.pub:this._pubBytes=parseBytes$2(_.pub)}KeyPair$1.fromPublic=function(_,x){return x instanceof KeyPair$1?x:new KeyPair$1(_,{pub:x})},KeyPair$1.fromSecret=function(_,x){return x instanceof KeyPair$1?x:new KeyPair$1(_,{secret:x})},KeyPair$1.prototype.secret=function(){return this._secret},cachedProperty$1(KeyPair$1,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),cachedProperty$1(KeyPair$1,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty$1(KeyPair$1,"privBytes",function(){var _=this.eddsa,x=this.hash(),E=_.encodingLength-1,A=x.slice(0,_.encodingLength);return A[0]&=248,A[E]&=127,A[E]|=64,A}),cachedProperty$1(KeyPair$1,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty$1(KeyPair$1,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty$1(KeyPair$1,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair$1.prototype.sign=function(_){return assert$4(this._secret,"KeyPair can only verify"),this.eddsa.sign(_,this)},KeyPair$1.prototype.verify=function(_,x){return this.eddsa.verify(_,x,this)},KeyPair$1.prototype.getSecret=function(_){return assert$4(this._secret,"KeyPair is public only"),utils$9.encode(this.secret(),_)},KeyPair$1.prototype.getPublic=function(_){return utils$9.encode(this.pubBytes(),_)};var key=KeyPair$1,BN$1=bnExports$2,utils$8=utils$F,assert$3=utils$8.assert,cachedProperty=utils$8.cachedProperty,parseBytes$1=utils$8.parseBytes;function Signature$1(v,_){this.eddsa=v,typeof _!="object"&&(_=parseBytes$1(_)),Array.isArray(_)&&(_={R:_.slice(0,v.encodingLength),S:_.slice(v.encodingLength)}),assert$3(_.R&&_.S,"Signature without R or S"),v.isPoint(_.R)&&(this._R=_.R),_.S instanceof BN$1&&(this._S=_.S),this._Rencoded=Array.isArray(_.R)?_.R:_.Rencoded,this._Sencoded=Array.isArray(_.S)?_.S:_.Sencoded}cachedProperty(Signature$1,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty(Signature$1,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty(Signature$1,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),cachedProperty(Signature$1,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Signature$1.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature$1.prototype.toHex=function(){return utils$8.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash$1=hash$4,curves$1=curves$5,utils$7=utils$F,assert$2=utils$7.assert,parseBytes=utils$7.parseBytes,KeyPair=key,Signature=signature;function EDDSA(v){if(assert$2(v==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(v);v=curves$1[v].curve,this.curve=v,this.g=v.g,this.g.precompute(v.n.bitLength()+1),this.pointClass=v.point().constructor,this.encodingLength=Math.ceil(v.n.bitLength()/8),this.hash=hash$1.sha512}var eddsa$1=EDDSA;EDDSA.prototype.sign=function(_,x){_=parseBytes(_);var E=this.keyFromSecret(x),A=this.hashInt(E.messagePrefix(),_),P=this.g.mul(A),T=this.encodePoint(P),O=this.hashInt(T,E.pubBytes(),_).mul(E.priv()),k=A.add(O).umod(this.curve.n);return this.makeSignature({R:P,S:k,Rencoded:T})},EDDSA.prototype.verify=function(_,x,E){_=parseBytes(_),x=this.makeSignature(x);var A=this.keyFromPublic(E),P=this.hashInt(x.Rencoded(),A.pubBytes(),_),T=this.g.mul(x.S()),O=x.R().add(A.pub().mul(P));return O.eq(T)},EDDSA.prototype.hashInt=function(){for(var _=this.hash(),x=0;x<arguments.length;x++)_.update(arguments[x]);return utils$7.intFromLE(_.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(_){return KeyPair.fromPublic(this,_)},EDDSA.prototype.keyFromSecret=function(_){return KeyPair.fromSecret(this,_)},EDDSA.prototype.makeSignature=function(_){return _ instanceof Signature?_:new Signature(this,_)},EDDSA.prototype.encodePoint=function(_){var x=_.getY().toArray("le",this.encodingLength);return x[this.encodingLength-1]|=_.getX().isOdd()?128:0,x},EDDSA.prototype.decodePoint=function(_){_=utils$7.parseBytes(_);var x=_.length-1,E=_.slice(0,x).concat(_[x]&-129),A=(_[x]&128)!==0,P=utils$7.intFromLE(E);return this.curve.pointFromY(P,A)},EDDSA.prototype.encodeInt=function(_){return _.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(_){return utils$7.intFromLE(_)},EDDSA.prototype.isPoint=function(_){return _ instanceof this.pointClass},Object.defineProperty(elliptic$2,"__esModule",{value:!0}),elliptic$2.curves=elliptic$2.curve=elliptic$2.eddsa=elliptic$2.ec=void 0;const curve$2=curve$4;elliptic$2.curve=curve$2;const curves=curves$5;elliptic$2.curves=curves;const ec$1=ec$2;elliptic$2.ec=ec$1;const eddsa=eddsa$1;elliptic$2.eddsa=eddsa;var api=api$2.exports;Object.defineProperty(api,"__esModule",{value:!0});const elliptic_1=elliptic$2,secp256k1$3=new elliptic_1.ec("secp256k1"),curve$1=secp256k1$3.curve,BN=bnExports$2;function loadCompressedPublicKey$1(v,_){let x=new BN(_);if(x.cmp(curve$1.p)>=0)return null;x=x.toRed(curve$1.red);let E=x.redSqr().redIMul(x).redIAdd(curve$1.b).redSqrt();return v===3!==E.isOdd()&&(E=E.redNeg()),secp256k1$3.keyPair({pub:{x,y:E}})}function loadUncompressedPublicKey$1(v,_,x){let E=new BN(_),A=new BN(x);if(E.cmp(curve$1.p)>=0||A.cmp(curve$1.p)>=0||(E=E.toRed(curve$1.red),A=A.toRed(curve$1.red),(v===6||v===7)&&A.isOdd()!==(v===7)))return null;const P=E.redSqr().redIMul(E);return A.redSqr().redISub(P.redIAdd(curve$1.b)).isZero()?secp256k1$3.keyPair({pub:{x:E,y:A}}):null}function loadPublicKey$1(v){const _=v[0];switch(_){case 2:case 3:return v.length!==33?null:loadCompressedPublicKey$1(_,v.subarray(1,33));case 4:case 6:case 7:return v.length!==65?null:loadUncompressedPublicKey$1(_,v.subarray(1,33),v.subarray(33,65));default:return null}}api$2.exports={contextRandomize(){return 0},privateKeyVerify(v){const _=new BN(v);return _.cmp(curve$1.n)<0&&!_.isZero()},privateKeyNegate(v){const _=new BN(v);return dist$4.Buffer.from(curve$1.n.sub(_).umod(curve$1.n).toArray("be",32))},privateKeyTweakAdd(v,_){const x=new BN(_);return x.cmp(curve$1.n)>=0||(x.iadd(new BN(v)),x.cmp(curve$1.n)>=0&&x.isub(curve$1.n),x.isZero())?null:dist$4.Buffer.from(x.toArray("be",32))},privateKeyTweakMul(v,_){let x=new BN(_);return x.cmp(curve$1.n)>=0||x.isZero()?1:(x.imul(new BN(v)),x.cmp(curve$1.n)>=0&&(x=x.umod(curve$1.n)),dist$4.Buffer.from(x.toArray("be",32)))},publicKeyVerify(v){const _=loadPublicKey$1(v);return _==null?null:_.validate().result},publicKeyCreate(v,_){const x=new BN(v);if(x.cmp(curve$1.n)>=0||x.isZero())return null;const E=secp256k1$3.keyFromPrivate(v,null).getPublic();return dist$4.Buffer.from(E.encode(null,_))},publicKeyConvert(v,_){const E=loadPublicKey$1(v).getPublic();return dist$4.Buffer.from(E.encode(null,_))},publicKeyNegate(v,_){const x=loadPublicKey$1(v);if(x===null)return 1;const E=x.getPublic();return E.y=E.y.redNeg(),dist$4.Buffer.from(E.encode(null,_))},publicKeyCombine(v,_){const x=new Array(v.length);for(let A=0;A<v.length;++A)if(x[A]=loadPublicKey$1(v[A]),x[A]===null)return null;let E=x[0].getPublic();for(let A=1;A<x.length;++A)E=E.add(x[A].pub);return E.isInfinity()?null:dist$4.Buffer.from(E.encode(null,_))},publicKeyTweakAdd(v,_,x){const E=loadPublicKey$1(v);if(E===null||new BN(_).cmp(curve$1.n)>=0)return null;const P=E.getPublic().add(curve$1.g.mul(_));return P.isInfinity()?null:dist$4.Buffer.from(P.encode(null,x))},publicKeyTweakMul(v,_,x){const E=loadPublicKey$1(v);if(E===null)return null;const A=new BN(_);if(A.cmp(curve$1.n)>=0||A.isZero())return null;const P=E.getPublic().mul(_);return dist$4.Buffer.from(P.encode(null,x))},signatureNormalize(v){const _=new BN(v.subarray(0,32)),x=new BN(v.subarray(32,64));return _.cmp(curve$1.n)>=0||x.cmp(curve$1.n)>=0?null:(x.cmp(secp256k1$3.nh)===1&&v.set(curve$1.n.sub(x).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(v,_){const x=_.subarray(0,32),E=_.subarray(32,64);if(new BN(x).cmp(curve$1.n)>=0||new BN(E).cmp(curve$1.n)>=0)return 1;const{output:A}=v;let P=A.subarray(4,4+33);P[0]=0,P.set(x,1);let T=33,O=0;for(;T>1&&P[O]===0&&!(P[O+1]&128);--T,++O);if(P=P.subarray(O),P[0]&128||T>1&&P[0]===0&&!(P[1]&128))return 1;let k=A.subarray(6+33,6+33+33);k[0]=0,k.set(E,1);let C=33,U=0;for(;C>1&&k[U]===0&&!(k[U+1]&128);--C,++U);return k=k.subarray(U),k[0]&128||C>1&&k[0]===0&&!(k[1]&128)?1:(v.outputlen=6+T+C,A[0]=48,A[1]=v.outputlen-2,A[2]=2,A[3]=P.length,A.set(P,4),A[4+T]=2,A[5+T]=k.length,A.set(k,6+T),0)},signatureImport(v,_){if(_.length<8||_.length>72||_[0]!==48||_[1]!==_.length-2||_[2]!==2)return 1;const x=_[3];if(x===0||5+x>=_.length||_[4+x]!==2)return 1;const E=_[5+x];if(E===0||6+x+E!==_.length||_[4]&128||x>1&&_[4]===0&&!(_[5]&128)||_[x+6]&128||E>1&&_[x+6]===0&&!(_[x+7]&128))return 1;let A=_.subarray(4,4+x);if(A.length===33&&A[0]===0&&(A=A.subarray(1)),A.length>32)return 1;let P=_.subarray(6+x);if(P.length===33&&P[0]===0&&(P=P.slice(1)),P.length>32)throw new Error("S length is too long");let T=new BN(A);T.cmp(curve$1.n)>=0&&(T=new BN(0));let O=new BN(_.subarray(6+x));return O.cmp(curve$1.n)>=0&&(O=new BN(0)),v.set(T.toArrayLike(Uint8Array,"be",32),0),v.set(O.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(v,_){const x=new BN(_);return x.cmp(curve$1.n)>=0||x.isZero()?null:secp256k1$3.sign(v,_,{canonical:!0}).toBytes()},ecdsaVerify(v,_,x){const E={r:v.subarray(0,32),s:v.subarray(32,64)},A=new BN(E.r),P=new BN(E.s);if(A.cmp(curve$1.n)>=0||P.cmp(curve$1.n)>=0)return 1;if(P.cmp(secp256k1$3.nh)===1||A.isZero()||P.isZero())return 3;const T=loadPublicKey$1(x);if(T===null)return 2;const O=T.getPublic();return secp256k1$3.verify(_,E,O)},ecdsaRecover(v,_,x,E){const A={r:v.slice(0,32),s:v.slice(32,64)},P=new BN(A.r),T=new BN(A.s);if(P.cmp(curve$1.n)>=0||T.cmp(curve$1.n)>=0)return 1;if(P.isZero()||T.isZero())return 2;let O;try{O=secp256k1$3.recoverPubKey(x,A,_,null)}catch{return 2}return dist$4.Buffer.from(O.encode(null,E))},ecdh(v,_,x,E,A,P,T){const O=loadPublicKey$1(_);if(O===null)return 1;const k=new BN(x);if(k.cmp(curve$1.n)>=0||k.isZero())return 2;const C=O.getPublic().mul(k);if(A===void 0){const U=C.encode(null,!0),N=secp256k1$3.hash().update(U).digest();for(let H=0;H<32;++H)v[H]=N[H]}else{P||(P=new Uint8Array(32));const U=C.getX().toArray("be",32);for(let j=0;j<32;++j)P[j]=U[j];T||(T=new Uint8Array(32));const N=C.getY().toArray("be",32);for(let j=0;j<32;++j)T[j]=N[j];const H=A(P,T,E);if(!(H instanceof Uint8Array&&H.length===v.length))return 2;v.set(H)}return 0}};var apiExports=api$2.exports,types$b={Array:function(v){return v!=null&&v.constructor===Array},Boolean:function(v){return typeof v=="boolean"},Function:function(v){return typeof v=="function"},Nil:function(v){return v==null},Number:function(v){return typeof v=="number"},Object:function(v){return typeof v=="object"},String:function(v){return typeof v=="string"},"":function(){return!0}};types$b.Null=types$b.Nil;for(var typeName$1 in types$b)types$b[typeName$1].toJSON=(function(v){return v}).bind(null,typeName$1);var native$1=types$b,native=native$1;function getTypeName(v){return v.name||v.toString().match(/function (.*?)\s*\(/)[1]}function getValueTypeName$1(v){return native.Nil(v)?"":getTypeName(v.constructor)}function getValue(v){return native.Function(v)?"":native.String(v)?JSON.stringify(v):v&&native.Object(v)?"":v}function captureStackTrace(v,_){Error.captureStackTrace&&Error.captureStackTrace(v,_)}function tfJSON$1(v){return native.Function(v)?v.toJSON?v.toJSON():getTypeName(v):native.Array(v)?"Array":v&&native.Object(v)?"Object":v!==void 0?v:""}function tfErrorString(v,_,x){var E=getValue(_);return"Expected "+tfJSON$1(v)+", got"+(x!==""?" "+x:"")+(E!==""?" "+E:"")}function TfTypeError$1(v,_,x){x=x||getValueTypeName$1(_),this.message=tfErrorString(v,_,x),captureStackTrace(this,TfTypeError$1),this.__type=v,this.__value=_,this.__valueTypeName=x}TfTypeError$1.prototype=Object.create(Error.prototype),TfTypeError$1.prototype.constructor=TfTypeError$1;function tfPropertyErrorString(v,_,x,E,A){var P='" of type ';return _==="key"&&(P='" with key type '),tfErrorString('property "'+tfJSON$1(x)+P+tfJSON$1(v),E,A)}function TfPropertyTypeError$1(v,_,x,E,A){v?(A=A||getValueTypeName$1(E),this.message=tfPropertyErrorString(v,x,_,E,A)):this.message='Unexpected property "'+_+'"',captureStackTrace(this,TfTypeError$1),this.__label=x,this.__property=_,this.__type=v,this.__value=E,this.__valueTypeName=A}TfPropertyTypeError$1.prototype=Object.create(Error.prototype),TfPropertyTypeError$1.prototype.constructor=TfTypeError$1;function tfCustomError(v,_){return new TfTypeError$1(v,{},_)}function tfSubError$1(v,_,x){return v instanceof TfPropertyTypeError$1?(_=_+"."+v.__property,v=new TfPropertyTypeError$1(v.__type,_,v.__label,v.__value,v.__valueTypeName)):v instanceof TfTypeError$1&&(v=new TfPropertyTypeError$1(v.__type,_,x,v.__value,v.__valueTypeName)),captureStackTrace(v),v}var errors$1={TfTypeError:TfTypeError$1,TfPropertyTypeError:TfPropertyTypeError$1,tfCustomError,tfSubError:tfSubError$1,tfJSON:tfJSON$1,getValueTypeName:getValueTypeName$1},extra,hasRequiredExtra;function requireExtra(){if(hasRequiredExtra)return extra;hasRequiredExtra=1;var v=native$1,_=errors$1;function x(ie){return dist$4.Buffer.isBuffer(ie)}function E(ie){return typeof ie=="string"&&/^([0-9a-f]{2})+$/i.test(ie)}function A(ie,he){var ae=ie.toJSON();function te(ue){if(!ie(ue))return!1;if(ue.length===he)return!0;throw _.tfCustomError(ae+"(Length: "+he+")",ae+"(Length: "+ue.length+")")}return te.toJSON=function(){return ae},te}var P=A.bind(null,v.Array),T=A.bind(null,x),O=A.bind(null,E),k=A.bind(null,v.String);function C(ie,he,ae){ae=ae||v.Number;function te(ue,ne){return ae(ue,ne)&&ue>ie&&ue<he}return te.toJSON=function(){return`${ae.toJSON()} between [${ie}, ${he}]`},te}var U=Math.pow(2,53)-1;function N(ie){return typeof ie=="number"&&isFinite(ie)}function H(ie){return ie<<24>>24===ie}function D(ie){return ie<<16>>16===ie}function j(ie){return(ie|0)===ie}function V(ie){return typeof ie=="number"&&ie>=-U&&ie<=U&&Math.floor(ie)===ie}function X(ie){return(ie&255)===ie}function re(ie){return(ie&65535)===ie}function ee(ie){return ie>>>0===ie}function fe(ie){return typeof ie=="number"&&ie>=0&&ie<=U&&Math.floor(ie)===ie}var le={ArrayN:P,Buffer:x,BufferN:T,Finite:N,Hex:E,HexN:O,Int8:H,Int16:D,Int32:j,Int53:V,Range:C,StringN:k,UInt8:X,UInt16:re,UInt32:ee,UInt53:fe};for(var pe in le)le[pe].toJSON=(function(ie){return ie}).bind(null,pe);return extra=le,extra}var ERRORS=errors$1,NATIVE=native$1,tfJSON=ERRORS.tfJSON,TfTypeError=ERRORS.TfTypeError,TfPropertyTypeError=ERRORS.TfPropertyTypeError,tfSubError=ERRORS.tfSubError,getValueTypeName=ERRORS.getValueTypeName,TYPES={arrayOf:function(_,x){_=compile(_),x=x||{};function E(A,P){return!NATIVE.Array(A)||NATIVE.Nil(A)||x.minLength!==void 0&&A.length<x.minLength||x.maxLength!==void 0&&A.length>x.maxLength||x.length!==void 0&&A.length!==x.length?!1:A.every(function(T,O){try{return typeforce$8(_,T,P)}catch(k){throw tfSubError(k,O)}})}return E.toJSON=function(){var A="["+tfJSON(_)+"]";return x.length!==void 0?A+="{"+x.length+"}":(x.minLength!==void 0||x.maxLength!==void 0)&&(A+="{"+(x.minLength===void 0?0:x.minLength)+","+(x.maxLength===void 0?1/0:x.maxLength)+"}"),A},E},maybe:function v(_){_=compile(_);function x(E,A){return NATIVE.Nil(E)||_(E,A,v)}return x.toJSON=function(){return"?"+tfJSON(_)},x},map:function(_,x){_=compile(_),x&&(x=compile(x));function E(A,P){if(!NATIVE.Object(A)||NATIVE.Nil(A))return!1;for(var T in A){try{x&&typeforce$8(x,T,P)}catch(k){throw tfSubError(k,T,"key")}try{var O=A[T];typeforce$8(_,O,P)}catch(k){throw tfSubError(k,T)}}return!0}return x?E.toJSON=function(){return"{"+tfJSON(x)+": "+tfJSON(_)+"}"}:E.toJSON=function(){return"{"+tfJSON(_)+"}"},E},object:function(_){var x={};for(var E in _)x[E]=compile(_[E]);function A(P,T){if(!NATIVE.Object(P)||NATIVE.Nil(P))return!1;var O;try{for(O in x){var k=x[O],C=P[O];typeforce$8(k,C,T)}}catch(U){throw tfSubError(U,O)}if(T){for(O in P)if(!x[O])throw new TfPropertyTypeError(void 0,O)}return!0}return A.toJSON=function(){return tfJSON(x)},A},anyOf:function(){var _=[].slice.call(arguments).map(compile);function x(E,A){return _.some(function(P){try{return typeforce$8(P,E,A)}catch{return!1}})}return x.toJSON=function(){return _.map(tfJSON).join("|")},x},allOf:function(){var _=[].slice.call(arguments).map(compile);function x(E,A){return _.every(function(P){try{return typeforce$8(P,E,A)}catch{return!1}})}return x.toJSON=function(){return _.map(tfJSON).join(" & ")},x},quacksLike:function(_){function x(E){return _===getValueTypeName(E)}return x.toJSON=function(){return _},x},tuple:function(){var _=[].slice.call(arguments).map(compile);function x(E,A){return NATIVE.Nil(E)||NATIVE.Nil(E.length)||A&&E.length!==_.length?!1:_.every(function(P,T){try{return typeforce$8(P,E[T],A)}catch(O){throw tfSubError(O,T)}})}return x.toJSON=function(){return"("+_.map(tfJSON).join(", ")+")"},x},value:function(_){function x(E){return E===_}return x.toJSON=function(){return _},x}};TYPES.oneOf=TYPES.anyOf;function compile(v){if(NATIVE.String(v))return v[0]==="?"?TYPES.maybe(v.slice(1)):NATIVE[v]||TYPES.quacksLike(v);if(v&&NATIVE.Object(v)){if(NATIVE.Array(v)){if(v.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return TYPES.arrayOf(v[0])}return TYPES.object(v)}else if(NATIVE.Function(v))return v;return TYPES.value(v)}function typeforce$8(v,_,x,E){if(NATIVE.Function(v)){if(v(_,x))return!0;throw new TfTypeError(E||v,_)}return typeforce$8(compile(v),_,x)}for(var typeName in NATIVE)typeforce$8[typeName]=NATIVE[typeName];for(typeName in TYPES)typeforce$8[typeName]=TYPES[typeName];var EXTRA=requireExtra();for(typeName in EXTRA)typeforce$8[typeName]=EXTRA[typeName];typeforce$8.compile=compile,typeforce$8.TfTypeError=TfTypeError,typeforce$8.TfPropertyTypeError=TfPropertyTypeError;var typeforce_1=typeforce$8,_Buffer=safeBufferExports.Buffer;function base$3(v){if(v.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<v.length;E++){var A=v.charAt(E),P=A.charCodeAt(0);if(_[P]!==255)throw new TypeError(A+" is ambiguous");_[P]=E}var T=v.length,O=v.charAt(0),k=Math.log(T)/Math.log(256),C=Math.log(256)/Math.log(T);function U(D){if((Array.isArray(D)||D instanceof Uint8Array)&&(D=_Buffer.from(D)),!_Buffer.isBuffer(D))throw new TypeError("Expected Buffer");if(D.length===0)return"";for(var j=0,V=0,X=0,re=D.length;X!==re&&D[X]===0;)X++,j++;for(var ee=(re-X)*C+1>>>0,fe=new Uint8Array(ee);X!==re;){for(var le=D[X],pe=0,ie=ee-1;(le!==0||pe<V)&&ie!==-1;ie--,pe++)le+=256*fe[ie]>>>0,fe[ie]=le%T>>>0,le=le/T>>>0;if(le!==0)throw new Error("Non-zero carry");V=pe,X++}for(var he=ee-V;he!==ee&&fe[he]===0;)he++;for(var ae=O.repeat(j);he<ee;++he)ae+=v.charAt(fe[he]);return ae}function N(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return _Buffer.alloc(0);for(var j=0,V=0,X=0;D[j]===O;)V++,j++;for(var re=(D.length-j)*k+1>>>0,ee=new Uint8Array(re);D[j];){var fe=_[D.charCodeAt(j)];if(fe===255)return;for(var le=0,pe=re-1;(fe!==0||le<X)&&pe!==-1;pe--,le++)fe+=T*ee[pe]>>>0,ee[pe]=fe%256>>>0,fe=fe/256>>>0;if(fe!==0)throw new Error("Non-zero carry");X=le,j++}for(var ie=re-X;ie!==re&&ee[ie]===0;)ie++;var he=_Buffer.allocUnsafe(V+(re-ie));he.fill(0,0,V);for(var ae=V;ie!==re;)he[ae++]=ee[ie++];return he}function H(D){var j=N(D);if(j)return j;throw new Error("Non-base"+T+" character")}return{encode:U,decodeUnsafe:N,decode:H}}var src$3=base$3,basex$1=src$3,ALPHABET$3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$1=basex$1(ALPHABET$3),base58$1=bs58$1,Buffer$2=safeBufferExports.Buffer,base$2=function(v){function _(P){var T=v(P);return base58$1.encode(Buffer$2.concat([P,T],P.length+4))}function x(P){var T=P.slice(0,-4),O=P.slice(-4),k=v(T);if(!(O[0]^k[0]|O[1]^k[1]|O[2]^k[2]|O[3]^k[3]))return T}function E(P){var T=base58$1.decodeUnsafe(P);if(T)return x(T)}function A(P){var T=base58$1.decode(P),O=x(T);if(!O)throw new Error("Invalid checksum");return O}return{encode:_,decode:A,decodeUnsafe:E}},createHash=browser$b,bs58checkBase$1=base$2;function sha256x2$1(v){var _=createHash("sha256").update(v).digest();return createHash("sha256").update(_).digest()}var bs58check$5=bs58checkBase$1(sha256x2$1),bs58check$4=bs58check$5;function decodeRaw$1(v,_){if(_!==void 0&&v[0]!==_)throw new Error("Invalid network version");if(v.length===33)return{version:v[0],privateKey:v.slice(1,33),compressed:!1};if(v.length!==34)throw new Error("Invalid WIF length");if(v[33]!==1)throw new Error("Invalid compression flag");return{version:v[0],privateKey:v.slice(1,33),compressed:!0}}function encodeRaw$1(v,_,x){var E=new dist$4.Buffer(x?34:33);return E.writeUInt8(v,0),_.copy(E,1),x&&(E[33]=1),E}function decode$C(v,_){return decodeRaw$1(bs58check$4.decode(v),_)}function encode$G(v,_,x){return typeof v=="number"?bs58check$4.encode(encodeRaw$1(v,_,x)):bs58check$4.encode(encodeRaw$1(v.version,v.privateKey,v.compressed))}var wif$1={decode:decode$C,decodeRaw:decodeRaw$1,encode:encode$G,encodeRaw:encodeRaw$1},hasRequiredBip32$1;function requireBip32$1(){if(hasRequiredBip32$1)return bip32;hasRequiredBip32$1=1;var v=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ne,J,q,F){F===void 0&&(F=q);var L=Object.getOwnPropertyDescriptor(J,q);(!L||("get"in L?!J.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return J[q]}}),Object.defineProperty(ne,F,L)}:function(ne,J,q,F){F===void 0&&(F=q),ne[F]=J[q]}),_=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ne,J){Object.defineProperty(ne,"default",{enumerable:!0,value:J})}:function(ne,J){ne.default=J}),x=commonjsGlobal&&commonjsGlobal.__importStar||function(ne){if(ne&&ne.__esModule)return ne;var J={};if(ne!=null)for(var q in ne)q!=="default"&&Object.prototype.hasOwnProperty.call(ne,q)&&v(J,ne,q);return _(J,ne),J};Object.defineProperty(bip32,"__esModule",{value:!0}),bip32.fromSeed=bip32.fromPublicKey=bip32.fromPrivateKey=bip32.fromBase58=bip32.tinySecp256k1Interface=void 0;const E=x(requireBase()),A=base$7,P=hash$6,T=(0,A.base58check)(P.sha256),O=apiExports,k=typeforce_1,C=wif$1;function U(ne){return{isPoint:J=>ne.publicKeyVerify(J),isPrivate:J=>ne.privateKeyVerify(J),pointAddScalar:(J,q,F)=>ne.publicKeyTweakAdd(J,q,F),pointFromScalar:(J,q)=>ne.publicKeyCreate(J,q),privateAdd:(J,q)=>ne.privateKeyTweakAdd(new Uint8Array(J),q),sign:(J,q)=>ne.ecdsaSign(J,q),verify:(J,q,F)=>ne.ecdsaVerify(F,J,q)}}function N(ne){return{isPoint:J=>ne.publicKeyVerify(J),pointCompress:(J,q)=>Uint8Array.from(ne.publicKeyConvert(J,q??!0)),isPrivate:J=>ne.privateKeyVerify(J),pointFromScalar:(J,q)=>{const F=ne.publicKeyCreate(J,q??!0);return F==null?null:Uint8Array.from(F)},sign:(J,q,F)=>Uint8Array.from(ne.ecdsaSign(J,q)),verify:(J,q,F,L)=>ne.ecdsaVerify(F,J,q)}}const H=U(O);bip32.tinySecp256k1Interface=N(O);const D=k.BufferN(32),j=k.compile({wif:k.UInt8,bip32:{public:k.UInt32,private:k.UInt32}}),V={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},X=2147483648,re=Math.pow(2,31)-1;function ee(ne){return k.String(ne)&&ne.match(/^(m\/)?(\d+'?\/)*\d+'?$/)!==null}function fe(ne){return k.UInt32(ne)&&ne<=re}class le{constructor(J,q,F,L,Z=0,Q=0,de=0){this.__D=J,this.__Q=q,this.chainCode=F,this.network=L,this.__DEPTH=Z,this.__INDEX=Q,this.__PARENT_FINGERPRINT=de,k(j,L),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return this.__Q===void 0&&(this.__Q=dist$4.Buffer.from(H.pointFromScalar(this.__D,!0))),this.__Q}get privateKey(){return this.__D}get identifier(){return dist$4.Buffer.from(E.hash160(this.publicKey))}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return this.__D===void 0}neutered(){return te(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const J=this.network,q=this.isNeutered()?J.bip32.public:J.bip32.private,F=dist$4.Buffer.allocUnsafe(78);return F.writeUInt32BE(q,0),F.writeUInt8(this.depth,4),F.writeUInt32BE(this.parentFingerprint,5),F.writeUInt32BE(this.index,9),this.chainCode.copy(F,13),this.isNeutered()?this.publicKey.copy(F,45):(F.writeUInt8(0,45),this.privateKey.copy(F,46)),T.encode(F)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return C.encode(this.network.wif,this.privateKey,!0)}derive(J){k(k.UInt32,J);const q=J>=X,F=dist$4.Buffer.allocUnsafe(37);if(q){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");F[0]=0,this.privateKey.copy(F,1),F.writeUInt32BE(J,33)}else this.publicKey.copy(F,0),F.writeUInt32BE(J,33);const L=E.hmacSHA512(this.chainCode,F),Z=L.slice(0,32),Q=L.slice(32);if(!H.isPrivate(Z))return this.derive(J+1);let de;if(this.isNeutered()){const ye=H.pointAddScalar(this.publicKey,Z,!0);if(ye===null)return this.derive(J+1);de=te(ye,Q,this.network,this.depth+1,J,this.fingerprint.readUInt32BE(0))}else{const ye=H.privateAdd(this.privateKey,Z);if(ye==null)return this.derive(J+1);de=he(ye,Q,this.network,this.depth+1,J,this.fingerprint.readUInt32BE(0))}return de}deriveHardened(J){return k(fe,J),this.derive(J+X)}derivePath(J){k(ee,J);let q=J.split("/");if(q[0]==="m"){if(this.parentFingerprint)throw new TypeError("Expected master, got child");q=q.slice(1)}return q.reduce((F,L)=>{let Z;return L.slice(-1)==="'"?(Z=parseInt(L.slice(0,-1),10),F.deriveHardened(Z)):(Z=parseInt(L,10),F.derive(Z))},this)}sign(J){if(!this.privateKey)throw new Error("Missing private key");return H.sign(J,this.privateKey)}verify(J,q){return H.verify(J,this.publicKey,q)}}function pe(ne,J){const q=dist$4.Buffer.from(T.decode(ne));if(q.length!==78)throw new TypeError("Invalid buffer length");J=J||V;const F=q.readUInt32BE(0);if(F!==J.bip32.private&&F!==J.bip32.public)throw new TypeError("Invalid network version");const L=q[4],Z=q.readUInt32BE(5);if(L===0&&Z!==0)throw new TypeError("Invalid parent fingerprint");const Q=q.readUInt32BE(9);if(L===0&&Q!==0)throw new TypeError("Invalid index");const de=q.slice(13,45);let ye;if(F===J.bip32.private){if(q.readUInt8(45)!==0)throw new TypeError("Invalid private key");const oe=q.slice(46,78);ye=he(oe,de,J,L,Q,Z)}else{const oe=q.slice(45,78);ye=te(oe,de,J,L,Q,Z)}return ye}bip32.fromBase58=pe;function ie(ne,J,q){return he(ne,J,q)}bip32.fromPrivateKey=ie;function he(ne,J,q,F,L,Z){if(k({privateKey:D,chainCode:D},{privateKey:ne,chainCode:J}),q=q||V,!H.isPrivate(ne))throw new TypeError("Private key not in range [1, n)");return new le(ne,void 0,J,q,F,L,Z)}function ae(ne,J,q){return te(ne,J,q)}bip32.fromPublicKey=ae;function te(ne,J,q,F,L,Z){if(k({publicKey:k.BufferN(33),chainCode:D},{publicKey:ne,chainCode:J}),q=q||V,!H.isPoint(ne))throw new TypeError("Point is not on the curve");return new le(void 0,ne,J,q,F,L,Z)}function ue(ne,J){if(k(k.Buffer,ne),ne.length<16)throw new TypeError("Seed should be at least 128 bits");if(ne.length>64)throw new TypeError("Seed should be at most 512 bits");J=J||V;const q=E.hmacSHA512(dist$4.Buffer.from("Bitcoin seed","utf8"),ne),F=q.slice(0,32),L=q.slice(32);return ie(F,L,J)}return bip32.fromSeed=ue,bip32}var hasRequiredBip32;function requireBip32(){return hasRequiredBip32||(hasRequiredBip32=1,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.fromPrivateKey=v.fromPublicKey=v.fromBase58=v.fromSeed=v.tinySecp256k1Interface=void 0;var _=requireBip32$1();Object.defineProperty(v,"tinySecp256k1Interface",{enumerable:!0,get:function(){return _.tinySecp256k1Interface}}),Object.defineProperty(v,"fromSeed",{enumerable:!0,get:function(){return _.fromSeed}}),Object.defineProperty(v,"fromBase58",{enumerable:!0,get:function(){return _.fromBase58}}),Object.defineProperty(v,"fromPublicKey",{enumerable:!0,get:function(){return _.fromPublicKey}}),Object.defineProperty(v,"fromPrivateKey",{enumerable:!0,get:function(){return _.fromPrivateKey}})}(bip32$1)),bip32$1}var bip39={},_wordlists={};const require$$0=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];Object.defineProperty(_wordlists,"__esModule",{value:!0});var _default_1=_wordlists._default=_wordlists.wordlists=void 0;const wordlists={};_wordlists.wordlists=wordlists;let _default;_default_1=_wordlists._default=_default;try{_default_1=_wordlists._default=_default=require$$0,wordlists.english=_default,wordlists.EN=_default}catch(v){}var hasRequiredBip39;function requireBip39(){return hasRequiredBip39||(hasRequiredBip39=1,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.wordlists=v.getDefaultWordlist=v.setDefaultWordlist=v.validateMnemonic=v.generateMnemonic=v.entropyToMnemonic=v.mnemonicToEntropy=v.mnemonicToSeed=v.mnemonicToSeedSync=void 0;const _=requireBase(),x=pbkdf2$2,E=_wordlists,A=sha512$3;let P=E._default;const T="Invalid mnemonic",O="Invalid entropy",k="Invalid mnemonic checksum",C=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function U(ue,ne,J,q,F){const L=(0,x.pbkdf2)(A.sha512,ue,ne,{c:J,dkLen:q});return Promise.resolve(dist$4.Buffer.from(L))}function N(ue){return(ue||"").normalize("NFKD")}function H(ue,ne,J){for(;ue.length<J;)ue=ne+ue;return ue}function D(ue){return parseInt(ue,2)}function j(ue){return ue.map(ne=>H(ne.toString(2),"0",8)).join("")}function V(ue){const J=ue.length*8/32,q=(0,_.sha256)(ue);return j(Array.from(q)).slice(0,J)}function X(ue){return"mnemonic"+(ue||"")}function re(ue,ne){const J=dist$4.Buffer.from(N(ue),"utf8"),q=dist$4.Buffer.from(X(N(ne)),"utf8"),F=(0,x.pbkdf2)(A.sha512,J,q,{c:2048,dkLen:64});return dist$4.Buffer.from(F)}v.mnemonicToSeedSync=re;function ee(ue,ne){return Promise.resolve().then(()=>{const J=dist$4.Buffer.from(N(ue),"utf8"),q=dist$4.Buffer.from(X(N(ne)),"utf8");return U(J,q,2048,64)})}v.mnemonicToSeed=ee;function fe(ue,ne){if(ne=ne||P,!ne)throw new Error(C);const J=N(ue).split(" ");if(J.length%3!==0)throw new Error(T);const q=J.map(oe=>{const se=ne.indexOf(oe);if(se===-1)throw new Error(T);return H(se.toString(2),"0",11)}).join(""),F=Math.floor(q.length/33)*32,L=q.slice(0,F),Z=q.slice(F),Q=L.match(/(.{1,8})/g).map(D);if(Q.length<16)throw new Error(O);if(Q.length>32)throw new Error(O);if(Q.length%4!==0)throw new Error(O);const de=dist$4.Buffer.from(Q);if(V(de)!==Z)throw new Error(k);return de.toString("hex")}v.mnemonicToEntropy=fe;function le(ue,ne){if(dist$4.Buffer.isBuffer(ue)||(ue=dist$4.Buffer.from(ue,"hex")),ne=ne||P,!ne)throw new Error(C);if(ue.length<16)throw new TypeError(O);if(ue.length>32)throw new TypeError(O);if(ue.length%4!==0)throw new TypeError(O);const J=j(Array.from(ue)),q=V(ue),Z=(J+q).match(/(.{1,11})/g).map(Q=>{const de=D(Q);return ne[de]});return ne[0]==="あいこくしん"?Z.join("　"):Z.join(" ")}v.entropyToMnemonic=le;function pe(ue,ne,J){if(ue=ue||128,ue%32!==0)throw new TypeError(O);return ne=ne||_.randomBytes,le(ne(ue/8),J)}v.generateMnemonic=pe;function ie(ue,ne){try{fe(ue,ne)}catch{return!1}return!0}v.validateMnemonic=ie;function he(ue){const ne=E.wordlists[ue];if(ne)P=ne;else throw new Error('Could not find wordlist for language "'+ue+'"')}v.setDefaultWordlist=he;function ae(){if(!P)throw new Error("No Default Wordlist set");return Object.keys(E.wordlists).filter(ue=>ue==="JA"||ue==="EN"?!1:E.wordlists[ue].every((ne,J)=>ne===P[J]))[0]}v.getDefaultWordlist=ae;var te=_wordlists;Object.defineProperty(v,"wordlists",{enumerable:!0,get:function(){return te.wordlists}})}(bip39)),bip39}var abi$1={},util$8={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.unpadBuffer=v.stripZeros=v.setLengthRight=v.setLengthLeft=v.zeros=v.assertIsBuffer=void 0;const _=function(k){if(!dist$4.Buffer.isBuffer(k)){const C=`This method only supports Buffer but input was: ${k}`;throw new Error(C)}};v.assertIsBuffer=_;const x=function(k){return dist$4.Buffer.allocUnsafe(k).fill(0)};v.zeros=x;const E=function(k,C,U){const N=(0,v.zeros)(C);return U?k.length<C?(k.copy(N),N):k.slice(0,C):k.length<C?(k.copy(N,C-k.length),N):k.slice(-C)},A=function(k,C){return dist$4.Buffer.isBuffer(k)||(k=dist$4.Buffer.from(k)),E(k,C,!1)};v.setLengthLeft=A;const P=function(k,C){return dist$4.Buffer.isBuffer(k)||(k=dist$4.Buffer.from(k)),E(k,C,!0)};v.setLengthRight=P;const T=function(k){let C=k[0];for(;k.length>0&&C.toString()==="0";)k=k.slice(1),C=k[0];return k};v.stripZeros=T;const O=function(k){return dist$4.Buffer.isBuffer(k)||(k=dist$4.Buffer.from(k)),(0,v.stripZeros)(k)};v.unpadBuffer=O})(util$8);var internal={};Object.defineProperty(internal,"__esModule",{value:!0}),internal.isHexString=internal.getKeys=internal.fromAscii=internal.fromUtf8=internal.toAscii=internal.arrayContainsArray=internal.getBinarySize=internal.padToEven=internal.stripHexPrefix=internal.isHexPrefixed=void 0;function isHexPrefixed(v){if(typeof v!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof v}`);return v[0]==="0"&&v[1]==="x"}internal.isHexPrefixed=isHexPrefixed;const stripHexPrefix=v=>{if(typeof v!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof v}`);return isHexPrefixed(v)?v.slice(2):v};internal.stripHexPrefix=stripHexPrefix;function padToEven(v){let _=v;if(typeof _!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof _}`);return _.length%2&&(_=`0${_}`),_}internal.padToEven=padToEven;function getBinarySize(v){if(typeof v!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof v}`);return dist$4.Buffer.byteLength(v,"utf8")}internal.getBinarySize=getBinarySize;function arrayContainsArray(v,_,x){if(Array.isArray(v)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof v}'`);if(Array.isArray(_)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof _}'`);return _[x===!0?"some":"every"](E=>v.indexOf(E)>=0)}internal.arrayContainsArray=arrayContainsArray;function toAscii(v){let _="",x=0;const E=v.length;for(v.substring(0,2)==="0x"&&(x=2);x<E;x+=2){const A=parseInt(v.substr(x,2),16);_+=String.fromCharCode(A)}return _}internal.toAscii=toAscii;function fromUtf8(v){const _=dist$4.Buffer.from(v,"utf8");return`0x${padToEven(_.toString("hex")).replace(/^0+|0+$/g,"")}`}internal.fromUtf8=fromUtf8;function fromAscii(v){let _="";for(let x=0;x<v.length;x++){const A=v.charCodeAt(x).toString(16);_+=A.length<2?`0${A}`:A}return`0x${_}`}internal.fromAscii=fromAscii;function getKeys(v,_,x){if(!Array.isArray(v))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof v}`);if(typeof _!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof v}`);const E=[];for(let A=0;A<v.length;A++){let P=v[A][_];if(x===!0&&!P)P="";else if(typeof P!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof P}`);E.push(P)}return E}internal.getKeys=getKeys;function isHexString(v,_){return!(typeof v!="string"||!v.match(/^0x[0-9A-Fa-f]*$/)||typeof _<"u"&&_>0&&v.length!==2+2*_)}internal.isHexString=isHexString;var bytes$1={},helpers={};Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.assertIsString=helpers.assertIsArray=helpers.assertIsBuffer=helpers.assertIsHexString=void 0;const internal_1=internal,assertIsHexString=function(v){if(!(0,internal_1.isHexString)(v)){const _=`This method only supports 0x-prefixed hex strings but input was: ${v}`;throw new Error(_)}};helpers.assertIsHexString=assertIsHexString;const assertIsBuffer=function(v){if(!dist$4.Buffer.isBuffer(v)){const _=`This method only supports Buffer but input was: ${v}`;throw new Error(_)}};helpers.assertIsBuffer=assertIsBuffer;const assertIsArray=function(v){if(!Array.isArray(v)){const _=`This method only supports number arrays but input was: ${v}`;throw new Error(_)}};helpers.assertIsArray=assertIsArray;const assertIsString=function(v){if(typeof v!="string"){const _=`This method only supports strings but input was: ${v}`;throw new Error(_)}};helpers.assertIsString=assertIsString,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.intToUnpaddedBuffer=v.bigIntToUnpaddedBuffer=v.bigIntToHex=v.bufArrToArr=v.arrToBufArr=v.validateNoLeadingZeroes=v.baToJSON=v.toUtf8=v.short=v.addHexPrefix=v.toUnsigned=v.fromSigned=v.bufferToInt=v.bigIntToBuffer=v.bufferToBigInt=v.bufferToHex=v.toBuffer=v.unpadHexString=v.unpadArray=v.unpadBuffer=v.setLengthRight=v.setLengthLeft=v.zeros=v.intToBuffer=v.intToHex=void 0;const _=helpers,x=internal,E=function(F){if(!Number.isSafeInteger(F)||F<0)throw new Error(`Received an invalid integer type: ${F}`);return`0x${F.toString(16)}`};v.intToHex=E;const A=function(F){const L=(0,v.intToHex)(F);return dist$4.Buffer.from((0,x.padToEven)(L.slice(2)),"hex")};v.intToBuffer=A;const P=function(F){return dist$4.Buffer.allocUnsafe(F).fill(0)};v.zeros=P;const T=function(F,L,Z){const Q=(0,v.zeros)(L);return Z?F.length<L?(F.copy(Q),Q):F.slice(0,L):F.length<L?(F.copy(Q,L-F.length),Q):F.slice(-L)},O=function(F,L){return(0,_.assertIsBuffer)(F),T(F,L,!1)};v.setLengthLeft=O;const k=function(F,L){return(0,_.assertIsBuffer)(F),T(F,L,!0)};v.setLengthRight=k;const C=function(F){let L=F[0];for(;F.length>0&&L.toString()==="0";)F=F.slice(1),L=F[0];return F},U=function(F){return(0,_.assertIsBuffer)(F),C(F)};v.unpadBuffer=U;const N=function(F){return(0,_.assertIsArray)(F),C(F)};v.unpadArray=N;const H=function(F){return(0,_.assertIsHexString)(F),F=(0,x.stripHexPrefix)(F),"0x"+C(F)};v.unpadHexString=H;const D=function(F){if(F==null)return dist$4.Buffer.allocUnsafe(0);if(dist$4.Buffer.isBuffer(F)||Array.isArray(F)||F instanceof Uint8Array)return dist$4.Buffer.from(F);if(typeof F=="string"){if(!(0,x.isHexString)(F))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${F}`);return dist$4.Buffer.from((0,x.padToEven)((0,x.stripHexPrefix)(F)),"hex")}if(typeof F=="number")return(0,v.intToBuffer)(F);if(typeof F=="bigint"){if(F<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${F}`);let L=F.toString(16);return L.length%2&&(L="0"+L),dist$4.Buffer.from(L,"hex")}if(F.toArray)return dist$4.Buffer.from(F.toArray());if(F.toBuffer)return dist$4.Buffer.from(F.toBuffer());throw new Error("invalid type")};v.toBuffer=D;const j=function(F){return F=(0,v.toBuffer)(F),"0x"+F.toString("hex")};v.bufferToHex=j;function V(F){const L=(0,v.bufferToHex)(F);return BigInt(L==="0x"?0:L)}v.bufferToBigInt=V;function X(F){return(0,v.toBuffer)("0x"+F.toString(16))}v.bigIntToBuffer=X;const re=function(F){const L=Number(V(F));if(!Number.isSafeInteger(L))throw new Error("Number exceeds 53 bits");return L};v.bufferToInt=re;const ee=function(F){return BigInt.asIntN(256,V(F))};v.fromSigned=ee;const fe=function(F){return X(BigInt.asUintN(256,F))};v.toUnsigned=fe;const le=function(F){return typeof F!="string"||(0,x.isHexPrefixed)(F)?F:"0x"+F};v.addHexPrefix=le;function pe(F,L=50){const Z=dist$4.Buffer.isBuffer(F)?F.toString("hex"):F;return Z.length<=L?Z:Z.slice(0,L)+"…"}v.short=pe;const ie=function(F){const L=/^(00)+|(00)+$/g;if(F=(0,x.stripHexPrefix)(F),F.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return dist$4.Buffer.from(F.replace(L,""),"hex").toString("utf8")};v.toUtf8=ie;const he=function(F){if(dist$4.Buffer.isBuffer(F))return`0x${F.toString("hex")}`;if(F instanceof Array){const L=[];for(let Z=0;Z<F.length;Z++)L.push((0,v.baToJSON)(F[Z]));return L}};v.baToJSON=he;const ae=function(F){for(const[L,Z]of Object.entries(F))if(Z!==void 0&&Z.length>0&&Z[0]===0)throw new Error(`${L} cannot have leading zeroes, received: ${Z.toString("hex")}`)};v.validateNoLeadingZeroes=ae;function te(F){return Array.isArray(F)?F.map(L=>te(L)):dist$4.Buffer.from(F)}v.arrToBufArr=te;function ue(F){return Array.isArray(F)?F.map(L=>ue(L)):Uint8Array.from(F??[])}v.bufArrToArr=ue;const ne=F=>"0x"+F.toString(16);v.bigIntToHex=ne;function J(F){return(0,v.unpadBuffer)(X(F))}v.bigIntToUnpaddedBuffer=J;function q(F){return(0,v.unpadBuffer)((0,v.intToBuffer)(F))}v.intToUnpaddedBuffer=q}(bytes$1);var abi,hasRequiredAbi$1;function requireAbi$1(){if(hasRequiredAbi$1)return abi;hasRequiredAbi$1=1;const v=util$8,_=requireBase();var x=bnExports$2;const{isHexString:E,stripHexPrefix:A,padToEven:P}=internal,{intToBuffer:T,addHexPrefix:O,bufferToHex:k}=bytes$1;var C=function(){};function U(te){return te.startsWith("int[")?"int256"+te.slice(3):te==="int"?"int256":te.startsWith("uint[")?"uint256"+te.slice(4):te==="uint"?"uint256":te.startsWith("fixed[")?"fixed128x128"+te.slice(5):te==="fixed"?"fixed128x128":te.startsWith("ufixed[")?"ufixed128x128"+te.slice(6):te==="ufixed"?"ufixed128x128":te}function N(te){if(te==null)return dist$4.Buffer.allocUnsafe(0);if(dist$4.Buffer.isBuffer(te)||Array.isArray(te)||te instanceof Uint8Array)return dist$4.Buffer.from(te);if(typeof te=="string"){if(!E(te))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${te}`);return dist$4.Buffer.from(P(A(te)),"hex")}if(typeof te=="number")return T(te);if(typeof te=="bigint"){if(te<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${te}`);let ue=te.toString(16);return ue.length%2&&(ue="0"+ue),dist$4.Buffer.from(ue,"hex")}if(te.toArray)return dist$4.Buffer.from(te.toArray());if(te.toBuffer)return dist$4.Buffer.from(te.toBuffer());throw new Error("invalid type")}function H(te){if(te){if(typeof te=="number"){if(te<0)return"0x";const ue=N(te);te=k(ue)}if(typeof te!="string"){let ue="eth-sig-util.normalize() requires hex string or integer input.";throw ue+=` received ${typeof te}: ${te}`,new Error(ue)}return O(te.toLowerCase())}}C.eventID=function(te,ue){var ne=te+"("+ue.map(U).join(",")+")";return _.keccak256(dist$4.Buffer.from(ne))},C.methodID=function(te,ue){return C.eventID(te,ue).slice(0,4)};function D(te){return parseInt(/^\D+(\d+)$/.exec(te)[1],10)}function j(te){var ue=/^\D+(\d+)x(\d+)$/.exec(te);return[parseInt(ue[1],10),parseInt(ue[2],10)]}function V(te){var ue=te.match(/(.*)\[(.*?)\]$/);return ue?ue[2]===""?"dynamic":parseInt(ue[2],10):null}function X(te){var ue=typeof te;if(ue==="string")return _.isHexPrefixed(te)?new x(_.stripHexPrefix(te),16):new x(te,10);if(ue==="number")return new x(te);if(te.toArray)return te;throw new Error("Argument is not a number")}function re(te){var ue=/^(\w+)\((.*)\)$/.exec(te);if(ue.length!==3)throw new Error("Invalid method signature");var ne=/^(.+)\):\((.+)$/.exec(ue[2]);if(ne!==null&&ne.length===3)return{method:ue[1],args:ne[1].split(","),retargs:ne[2].split(",")};var J=ue[2].split(",");return J.length===1&&J[0]===""&&(J=[]),{method:ue[1],args:J}}function ee(te,ue){var ne,J,q,F;if(te==="address")return ee("uint160",X(ue));if(te==="bool")return ee("uint8",ue?1:0);if(te==="string")return ee("bytes",dist$4.Buffer.from(ue,"utf8"));if(ie(te)){if(typeof ue.length>"u")throw new Error("Not an array?");if(ne=V(te),ne!=="dynamic"&&ne!==0&&ue.length>ne)throw new Error("Elements exceed array size: "+ne);q=[],te=te.slice(0,te.lastIndexOf("[")),typeof ue=="string"&&(ue=JSON.parse(ue));for(F in ue)q.push(ee(te,ue[F]));if(ne==="dynamic"){var L=ee("uint256",ue.length);q.unshift(L)}return dist$4.Buffer.concat(q)}else{if(te==="bytes")return ue=dist$4.Buffer.from(ue),q=dist$4.Buffer.concat([ee("uint256",ue.length),ue]),ue.length%32!==0&&(q=dist$4.Buffer.concat([q,v.zeros(32-ue.length%32)])),q;if(te.startsWith("bytes")){if(ne=D(te),ne<1||ne>32)throw new Error("Invalid bytes<N> width: "+ne);return v.setLengthRight(ue,32)}else if(te.startsWith("uint")){if(ne=D(te),ne%8||ne<8||ne>256)throw new Error("Invalid uint<N> width: "+ne);if(J=X(ue),J.bitLength()>ne)throw new Error("Supplied uint exceeds width: "+ne+" vs "+J.bitLength());if(J<0)throw new Error("Supplied uint is negative");return J.toArrayLike(dist$4.Buffer,"be",32)}else if(te.startsWith("int")){if(ne=D(te),ne%8||ne<8||ne>256)throw new Error("Invalid int<N> width: "+ne);if(J=X(ue),J.bitLength()>ne)throw new Error("Supplied int exceeds width: "+ne+" vs "+J.bitLength());return J.toTwos(256).toArrayLike(dist$4.Buffer,"be",32)}else if(te.startsWith("ufixed")){if(ne=j(te),J=X(ue),J<0)throw new Error("Supplied ufixed is negative");return ee("uint256",J.mul(new x(2).pow(new x(ne[1]))))}else if(te.startsWith("fixed"))return ne=j(te),ee("int256",X(ue).mul(new x(2).pow(new x(ne[1]))))}throw new Error("Unsupported or invalid type: "+te)}function fe(te,ue,ne){typeof te=="string"&&(te=le(te));var J,q,F,L;if(te.name==="address")return fe(te.rawType,ue,ne).toArrayLike(dist$4.Buffer,"be",20).toString("hex");if(te.name==="bool")return fe(te.rawType,ue,ne).toString()===new x(1).toString();if(te.name==="string"){var Z=fe(te.rawType,ue,ne);return dist$4.Buffer.from(Z,"utf8").toString()}else if(te.isArray){for(F=[],J=te.size,te.size==="dynamic"&&(ne=fe("uint256",ue,ne).toNumber(),J=fe("uint256",ue,ne).toNumber(),ne=ne+32),L=0;L<J;L++){var Q=fe(te.subArray,ue,ne);F.push(Q),ne+=te.subArray.memoryUsage}return F}else{if(te.name==="bytes")return ne=fe("uint256",ue,ne).toNumber(),J=fe("uint256",ue,ne).toNumber(),ue.slice(ne+32,ne+32+J);if(te.name.startsWith("bytes"))return ue.slice(ne,ne+te.size);if(te.name.startsWith("uint")){if(q=new x(ue.slice(ne,ne+32),16,"be"),q.bitLength()>te.size)throw new Error("Decoded int exceeds width: "+te.size+" vs "+q.bitLength());return q}else if(te.name.startsWith("int")){if(q=new x(ue.slice(ne,ne+32),16,"be").fromTwos(256),q.bitLength()>te.size)throw new Error("Decoded uint exceeds width: "+te.size+" vs "+q.bitLength());return q}else if(te.name.startsWith("ufixed")){if(J=new x(2).pow(new x(te.size[1])),q=fe("uint256",ue,ne),!q.mod(J).isZero())throw new Error("Decimals not supported yet");return q.div(J)}else if(te.name.startsWith("fixed")){if(J=new x(2).pow(new x(te.size[1])),q=fe("int256",ue,ne),!q.mod(J).isZero())throw new Error("Decimals not supported yet");return q.div(J)}}throw new Error("Unsupported or invalid type: "+te.name)}function le(te){var ue,ne;if(ie(te)){ue=V(te);var J=te.slice(0,te.lastIndexOf("["));return J=le(J),ne={isArray:!0,name:te,size:ue,memoryUsage:ue==="dynamic"?32:J.memoryUsage*ue,subArray:J},ne}else{var q;switch(te){case"address":q="uint160";break;case"bool":q="uint8";break;case"string":q="bytes";break}if(ne={rawType:q,name:te,memoryUsage:32},te.startsWith("bytes")&&te!=="bytes"||te.startsWith("uint")||te.startsWith("int")?ne.size=D(te):(te.startsWith("ufixed")||te.startsWith("fixed"))&&(ne.size=j(te)),te.startsWith("bytes")&&te!=="bytes"&&(ne.size<1||ne.size>32))throw new Error("Invalid bytes<N> width: "+ne.size);if((te.startsWith("uint")||te.startsWith("int"))&&(ne.size%8||ne.size<8||ne.size>256))throw new Error("Invalid int/uint<N> width: "+ne.size);return ne}}function pe(te){return te==="string"||te==="bytes"||V(te)==="dynamic"}function ie(te){return te.lastIndexOf("]")===te.length-1}C.rawEncode=function(te,ue){var ne=[],J=[],q=0;te.forEach(function(de){if(ie(de)){var ye=V(de);ye!=="dynamic"?q+=32*ye:q+=32}else q+=32});for(var F=0;F<te.length;F++){var L=U(te[F]),Z=ue[F],Q=ee(L,Z);pe(L)?(ne.push(ee("uint256",q)),J.push(Q),q+=Q.length):ne.push(Q)}return dist$4.Buffer.concat(ne.concat(J))},C.rawDecode=function(te,ue){var ne=[];ue=dist$4.Buffer.from(ue);for(var J=0,q=0;q<te.length;q++){var F=U(te[q]),L=le(F),Z=fe(L,ue,J);J+=L.memoryUsage,ne.push(Z)}return ne},C.simpleEncode=function(te){var ue=Array.prototype.slice.call(arguments).slice(1),ne=re(te);if(ue.length!==ne.args.length)throw new Error("Argument count mismatch");return dist$4.Buffer.concat([C.methodID(ne.method,ne.args),C.rawEncode(ne.args,ue)])},C.simpleDecode=function(te,ue){var ne=re(te);if(!ne.retargs)throw new Error("No return values in method");return C.rawDecode(ne.retargs,ue)};function he(te,ue){return te.startsWith("address")||te.startsWith("bytes")?"0x"+ue.toString("hex"):ue.toString()}C.stringify=function(te,ue){var ne=[];for(var J in te){var q=te[J],F=ue[J];/^[^\[]+\[.*\]$/.test(q)?F=F.map(function(L){return he(q,L)}).join(", "):F=he(q,F),ne.push(F)}return ne},C.solidityHexValue=function(te,ue,ne){var J,q;if(ie(te)){var F=te.replace(/\[.*?\]/,"");if(!ie(F)){var L=V(te);if(L!=="dynamic"&&L!==0&&ue.length>L)throw new Error("Elements exceed array size: "+L)}var Z=ue.map(function(ye){return C.solidityHexValue(F,ye,256)});return dist$4.Buffer.concat(Z)}else{if(te==="bytes")return ue;if(te==="string")return dist$4.Buffer.from(ue,"utf8");if(te==="bool"){ne=ne||8;var Q=Array(ne/4).join("0");return dist$4.Buffer.from(ue?Q+"1":Q+"0","hex")}else if(te==="address"){var de=20;return ne&&(de=ne/8),v.setLengthLeft(N(ue),de)}else if(te.startsWith("bytes")){if(J=D(te),J<1||J>32)throw new Error("Invalid bytes<N> width: "+J);return typeof ue=="number"&&(ue=H(ue)),v.setLengthRight(N(ue),J)}else if(te.startsWith("uint")){if(J=D(te),J%8||J<8||J>256)throw new Error("Invalid uint<N> width: "+J);if(q=X(ue),q.bitLength()>J)throw new Error("Supplied uint exceeds width: "+J+" vs "+q.bitLength());return ne=ne||J,q.toArrayLike(dist$4.Buffer,"be",ne/8)}else if(te.startsWith("int")){if(J=D(te),J%8||J<8||J>256)throw new Error("Invalid int<N> width: "+J);if(q=X(ue),q.bitLength()>J)throw new Error("Supplied int exceeds width: "+J+" vs "+q.bitLength());return ne=ne||J,q.toTwos(J).toArrayLike(dist$4.Buffer,"be",ne/8)}else throw new Error("Unsupported or invalid type: "+te)}},C.solidityPack=function(te,ue){if(te.length!==ue.length)throw new Error("Number of types are not matching the values");for(var ne=[],J=0;J<te.length;J++){var q=U(te[J]),F=ue[J];ne.push(C.solidityHexValue(q,F,null))}return dist$4.Buffer.concat(ne)},C.soliditySHA3=function(te,ue){return _.keccak256(C.solidityPack(te,ue))},C.soliditySHA256=function(te,ue){return _.sha256(C.solidityPack(te,ue))},C.solidityRIPEMD160=function(te,ue){return _.ripemd160(C.solidityPack(te,ue),!0)};function ae(te){return te>="0"&&te<="9"}return C.fromSerpent=function(te){for(var ue=[],ne=0;ne<te.length;ne++){var J=te[ne];if(J==="s")ue.push("bytes");else if(J==="b"){for(var q="bytes",F=ne+1;F<te.length&&ae(te[F]);)q+=te[F]-"0",F++;ne=F-1,ue.push(q)}else if(J==="i")ue.push("int256");else if(J==="a")ue.push("int256[]");else throw new Error("Unsupported or invalid type: "+J)}return ue},C.toSerpent=function(te){for(var ue=[],ne=0;ne<te.length;ne++){var J=te[ne];if(J==="bytes")ue.push("s");else if(J.startsWith("bytes"))ue.push("b"+D(J));else if(J==="int256")ue.push("i");else if(J==="int256[]")ue.push("a");else throw new Error("Unsupported or invalid type: "+J)}return ue.join("")},abi=C,abi}var hasRequiredAbi;function requireAbi(){if(hasRequiredAbi)return abi$1;hasRequiredAbi=1,Object.defineProperty(abi$1,"__esModule",{value:!0}),abi$1.SoliditySHA3=abi$1.RawEncode=abi$1.ABI=void 0;const v=requireAbi$1();abi$1.ABI=v;function _(E,A){return v.rawEncode(E,A)}abi$1.RawEncode=_;function x(E,A){return v.soliditySHA3(E,A)}return abi$1.SoliditySHA3=x,abi$1}var signutil={},secp256k1$2={},hasRequiredSecp256k1;function requireSecp256k1(){if(hasRequiredSecp256k1)return secp256k1$2;hasRequiredSecp256k1=1;var v=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(le,pe,ie,he){he===void 0&&(he=ie);var ae=Object.getOwnPropertyDescriptor(pe,ie);(!ae||("get"in ae?!pe.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return pe[ie]}}),Object.defineProperty(le,he,ae)}:function(le,pe,ie,he){he===void 0&&(he=ie),le[he]=pe[ie]}),_=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(le,pe){Object.defineProperty(le,"default",{enumerable:!0,value:pe})}:function(le,pe){le.default=pe}),x=commonjsGlobal&&commonjsGlobal.__importStar||function(le){if(le&&le.__esModule)return le;var pe={};if(le!=null)for(var ie in le)ie!=="default"&&Object.prototype.hasOwnProperty.call(le,ie)&&v(pe,le,ie);return _(pe,le),pe},E=commonjsGlobal&&commonjsGlobal.__importDefault||function(le){return le&&le.__esModule?le:{default:le}};Object.defineProperty(secp256k1$2,"__esModule",{value:!0}),secp256k1$2.loadUncompressedPublicKey=secp256k1$2.loadCompressedPublicKey=secp256k1$2.publicKeyConvert=secp256k1$2.publicKeyCreate=secp256k1$2.publicKeyVerify=secp256k1$2.privateKeyVerify=secp256k1$2.loadPublicKey=secp256k1$2.recover=secp256k1$2.verifyWithNoRecovery=secp256k1$2.verify=secp256k1$2.getV=secp256k1$2.sign=void 0;const A=x(elliptic$2),P=new A.ec("secp256k1"),T=requireBase(),O=E(bnExports$2);function k(le,pe,ie=!0){const he=P.sign(Array.from(le),dist$4.Buffer.from(pe),{canonical:ie});return{signature:he.toBytes(),recovery:he.recoveryParam}}secp256k1$2.sign=k;function C(le,pe,ie,he,ae=!0){const te=D(he);if(te==null)throw new Error("pubkey error");const ue=P.keyPair({pub:{x:te.x,y:te.y}}).getPublic();return P.getKeyRecoveryParam(le,{r:pe,s:ie},ue,ae)}secp256k1$2.getV=C;function U(le,pe,ie,he){const ae=H(pe,ie,le,!0);if(ae==null)return!1;const te=re(he,!0);return te==null?!1:ae.equals(te)}secp256k1$2.verify=U;function N(le,pe,ie){const he=D(ie);if(he==null)throw new Error("pubkey error");const ae=P.keyPair({pub:{x:he.x,y:he.y}}),te={r:(0,T.toHex)(pe.slice(0,32)),s:(0,T.toHex)(pe.slice(32,64))};return ae.verify(le,te)}secp256k1$2.verifyWithNoRecovery=N;function H(le,pe,ie,he){const ae={r:Array.from(le.slice(0,32)),s:Array.from(le.slice(32,64))},te=new O.default(ae.r),ue=new O.default(ae.s);if(te.cmp(P.curve.n)>=0||ue.cmp(P.curve.n)>=0||te.isZero()||ue.isZero())return null;let ne;try{ne=P.recoverPubKey(Array.from(ie),ae,pe,null)}catch{return null}return dist$4.Buffer.from(ne.encode(null,he))}secp256k1$2.recover=H;function D(le){const pe=dist$4.Buffer.from(le),ie=pe[0];switch(ie){case 2:case 3:return pe.length!==33?null:ee(ie,pe.subarray(1,33));case 4:case 6:case 7:return pe.length!==65?null:fe(ie,pe.subarray(1,33),pe.subarray(33,65));default:return null}}secp256k1$2.loadPublicKey=D;function j(le){const pe=new O.default(Array.from(le));return pe.cmp(P.curve.n)<0&&!pe.isZero()}secp256k1$2.privateKeyVerify=j;function V(le){return D(le)!==null}secp256k1$2.publicKeyVerify=V;function X(le,pe){const ie=P.keyFromPrivate(Array.from(le),"bytes").getPublic();return dist$4.Buffer.from(ie.encode(null,pe))}secp256k1$2.publicKeyCreate=X;function re(le,pe){const ie=D(le);if(ie==null)return null;const he=P.keyPair({pub:{x:ie.x,y:ie.y}}).getPublic();return dist$4.Buffer.from(he.encode(null,pe))}secp256k1$2.publicKeyConvert=re;function ee(le,pe){let ie=new O.default(Array.from(pe));if(ie.cmp(P.curve.p)>=0)return null;const he=ie.toRed(P.curve.red);let ae=he.redSqr().redIMul(he).redIAdd(P.curve.b).redSqrt();return le===3!==ae.isOdd()&&(ae=ae.redNeg()),{x:he,y:ae}}secp256k1$2.loadCompressedPublicKey=ee;function fe(le,pe,ie){let he=new O.default(Array.from(pe)),ae=new O.default(Array.from(ie));if(he.cmp(P.curve.p)>=0||ae.cmp(P.curve.p)>=0)return null;const te=he.toRed(P.curve.red),ue=ae.toRed(P.curve.red);if((le===6||le===7)&&ue.isOdd()!==(le===7))return null;const ne=te.redSqr().redIMul(te);return ue.redSqr().redISub(ne.redIAdd(P.curve.b)).isZero()?{x:te,y:ue}:null}return secp256k1$2.loadUncompressedPublicKey=fe,secp256k1$2}var ed25519$1={},hasRequiredEd25519;function requireEd25519(){if(hasRequiredEd25519)return ed25519$1;hasRequiredEd25519=1;var v=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(X,re,ee,fe){fe===void 0&&(fe=ee);var le=Object.getOwnPropertyDescriptor(re,ee);(!le||("get"in le?!re.__esModule:le.writable||le.configurable))&&(le={enumerable:!0,get:function(){return re[ee]}}),Object.defineProperty(X,fe,le)}:function(X,re,ee,fe){fe===void 0&&(fe=ee),X[fe]=re[ee]}),_=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(X,re){Object.defineProperty(X,"default",{enumerable:!0,value:re})}:function(X,re){X.default=re}),x=commonjsGlobal&&commonjsGlobal.__importStar||function(X){if(X&&X.__esModule)return X;var re={};if(X!=null)for(var ee in X)ee!=="default"&&Object.prototype.hasOwnProperty.call(X,ee)&&v(re,X,ee);return _(re,X),re},E=commonjsGlobal&&commonjsGlobal.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(ed25519$1,"__esModule",{value:!0}),ed25519$1.fromSecret=ed25519$1.fromSeed=ed25519$1.privateKeyVerify=ed25519$1.publicKeyVerify=ed25519$1.publicKeyCreate=ed25519$1.verify=ed25519$1.sign=void 0;const A=x(elliptic$2),P=requireBase(),T=E(bnExports$2),O=new A.eddsa("ed25519"),k=O.curve;function C(X,re){let ee=re;ee.length==64&&(ee=ee.slice(0,32));const le=O.keyFromSecret(Array.from(ee)).sign(Array.from(X)).toBytes();return Uint8Array.from(le)}ed25519$1.sign=C;function U(X,re,ee){return O.keyFromPublic(Array.from(ee)).verify(Array.from(X),Array.from(re))}ed25519$1.verify=U;function N(X){let re=X;re.length==64&&(re=re.slice(0,32));const ee=O.keyFromSecret(Array.from(re));return Uint8Array.from(ee.getPublic())}ed25519$1.publicKeyCreate=N;function H(X){const re=O.decodePoint(Array.from(X));return k.validate(re)}ed25519$1.publicKeyVerify=H;function D(X){const re=new T.default(Array.from(X));return re.cmp(k.n)<0&&!re.isZero()}ed25519$1.privateKeyVerify=D;function j(X){const re=O.keyFromSecret(Array.from(X)),ee=Uint8Array.from(re.getPublic());return{publicKey:ee,secretKey:(0,P.concatBytes)(X,ee)}}ed25519$1.fromSeed=j;function V(X){const re=X.slice(0,32),ee=O.keyFromSecret(Array.from(re));return{publicKey:Uint8Array.from(ee.getPublic()),secretKey:Uint8Array.from(re)}}return ed25519$1.fromSecret=V,ed25519$1}var p256={},__createBinding$o=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$o=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$o=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$o(_,v,x);return __setModuleDefault$o(_,v),_},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(p256,"__esModule",{value:!0}),p256.loadUncompressedPublicKey=p256.loadCompressedPublicKey=p256.publicKeyConvert=p256.publicKeyCreate=p256.publicKeyVerify=p256.privateKeyVerify=p256.loadPublicKey=p256.recover=p256.verify=p256.sign=void 0;const elliptic=__importStar$o(elliptic$2),ec=new elliptic.ec("p256"),bn_js_1$2=__importDefault$2(bnExports$2);function sign$1(v,_,x=!0){const E=ec.sign(Array.from(v),dist$4.Buffer.from(_),{canonical:x});return{signature:E.toBytes(),recovery:E.recoveryParam}}p256.sign=sign$1;function verify$1(v,_,x,E){const A=recover(_,x,v,!1);return A==null?!1:A.equals(E)}p256.verify=verify$1;function recover(v,_,x,E){const A={r:Array.from(v.slice(0,32)),s:Array.from(v.slice(32,64))},P=new bn_js_1$2.default(A.r),T=new bn_js_1$2.default(A.s);if(P.cmp(ec.curve.n)>=0||T.cmp(ec.curve.n)>=0||P.isZero()||T.isZero())return null;let O;try{O=ec.recoverPubKey(Array.from(x),A,_,null)}catch{return null}return dist$4.Buffer.from(O.encode(null,E))}p256.recover=recover;function loadPublicKey(v){const _=dist$4.Buffer.from(v),x=_[0];switch(x){case 2:case 3:return _.length!==33?null:loadCompressedPublicKey(x,_.subarray(1,33));case 4:case 6:case 7:return _.length!==65?null:loadUncompressedPublicKey(x,_.subarray(1,33),_.subarray(33,65));default:return null}}p256.loadPublicKey=loadPublicKey;function privateKeyVerify(v){const _=new bn_js_1$2.default(Array.from(v));return _.cmp(ec.curve.n)<0&&!_.isZero()}p256.privateKeyVerify=privateKeyVerify;function publicKeyVerify(v){return loadPublicKey(v)!==null}p256.publicKeyVerify=publicKeyVerify;function publicKeyCreate(v,_){const x=ec.keyFromPrivate(Array.from(v),"bytes").getPublic();return dist$4.Buffer.from(x.encode(null,_))}p256.publicKeyCreate=publicKeyCreate;function publicKeyConvert(v,_){const x=loadPublicKey(v);if(x==null)return null;const E=ec.keyPair({pub:{x:x.x,y:x.y}}).getPublic();return dist$4.Buffer.from(E.encode(null,_))}p256.publicKeyConvert=publicKeyConvert;function loadCompressedPublicKey(v,_){let x=new bn_js_1$2.default(Array.from(_));if(x.cmp(ec.curve.p)>=0)return null;const E=x.toRed(ec.curve.red);let A=E.redSqr().redIMul(E).redIAdd(ec.curve.b).redSqrt();return v===3!==A.isOdd()&&(A=A.redNeg()),{x:E,y:A}}p256.loadCompressedPublicKey=loadCompressedPublicKey;function loadUncompressedPublicKey(v,_,x){let E=new bn_js_1$2.default(Array.from(_)),A=new bn_js_1$2.default(Array.from(x));if(E.cmp(ec.curve.p)>=0||A.cmp(ec.curve.p)>=0)return null;const P=E.toRed(ec.curve.red),T=A.toRed(ec.curve.red);if((v===6||v===7)&&T.isOdd()!==(v===7))return null;const O=P.redSqr().redIMul(P);return T.redSqr().redISub(O.redIAdd(ec.curve.b)).isZero()?{x:P,y:T}:null}p256.loadUncompressedPublicKey=loadUncompressedPublicKey;var schnorr$3={},secp256k1$1={},modular={},utils$6={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.validateObject=v.createHmacDrbg=v.bitMask=v.bitSet=v.bitGet=v.bitLen=v.utf8ToBytes=v.equalBytes=v.concatBytes=v.ensureBytes=v.numberToVarBytesBE=v.numberToBytesLE=v.numberToBytesBE=v.bytesToNumberLE=v.bytesToNumberBE=v.hexToBytes=v.hexToNumber=v.numberToHexUnpadded=v.bytesToHex=void 0;const _=BigInt(0),x=BigInt(1),E=BigInt(2),A=J=>J instanceof Uint8Array,P=Array.from({length:256},(J,q)=>q.toString(16).padStart(2,"0"));function T(J){if(!A(J))throw new Error("Uint8Array expected");let q="";for(let F=0;F<J.length;F++)q+=P[J[F]];return q}v.bytesToHex=T;function O(J){const q=J.toString(16);return q.length&1?`0${q}`:q}v.numberToHexUnpadded=O;function k(J){if(typeof J!="string")throw new Error("hex string expected, got "+typeof J);return BigInt(J===""?"0":`0x${J}`)}v.hexToNumber=k;function C(J){if(typeof J!="string")throw new Error("hex string expected, got "+typeof J);if(J.length%2)throw new Error("hex string is invalid: unpadded "+J.length);const q=new Uint8Array(J.length/2);for(let F=0;F<q.length;F++){const L=F*2,Z=J.slice(L,L+2),Q=Number.parseInt(Z,16);if(Number.isNaN(Q)||Q<0)throw new Error("invalid byte sequence");q[F]=Q}return q}v.hexToBytes=C;function U(J){return k(T(J))}v.bytesToNumberBE=U;function N(J){if(!A(J))throw new Error("Uint8Array expected");return k(T(Uint8Array.from(J).reverse()))}v.bytesToNumberLE=N;const H=(J,q)=>C(J.toString(16).padStart(q*2,"0"));v.numberToBytesBE=H;const D=(J,q)=>(0,v.numberToBytesBE)(J,q).reverse();v.numberToBytesLE=D;const j=J=>C(O(J));v.numberToVarBytesBE=j;function V(J,q,F){let L;if(typeof q=="string")try{L=C(q)}catch(Q){throw new Error(`${J} must be valid hex string, got "${q}". Cause: ${Q}`)}else if(A(q))L=Uint8Array.from(q);else throw new Error(`${J} must be hex string or Uint8Array`);const Z=L.length;if(typeof F=="number"&&Z!==F)throw new Error(`${J} expected ${F} bytes, got ${Z}`);return L}v.ensureBytes=V;function X(...J){const q=new Uint8Array(J.reduce((L,Z)=>L+Z.length,0));let F=0;return J.forEach(L=>{if(!A(L))throw new Error("Uint8Array expected");q.set(L,F),F+=L.length}),q}v.concatBytes=X;function re(J,q){if(J.length!==q.length)return!1;for(let F=0;F<J.length;F++)if(J[F]!==q[F])return!1;return!0}v.equalBytes=re;function ee(J){if(typeof J!="string")throw new Error(`utf8ToBytes expected string, got ${typeof J}`);return new TextEncoder().encode(J)}v.utf8ToBytes=ee;function fe(J){let q;for(q=0;J>_;J>>=x,q+=1);return q}v.bitLen=fe;const le=(J,q)=>J>>BigInt(q)&x;v.bitGet=le;const pe=(J,q,F)=>J|(F?x:_)<<BigInt(q);v.bitSet=pe;const ie=J=>(E<<BigInt(J-1))-x;v.bitMask=ie;const he=J=>new Uint8Array(J),ae=J=>Uint8Array.from(J);function te(J,q,F){if(typeof J!="number"||J<2)throw new Error("hashLen must be a number");if(typeof q!="number"||q<2)throw new Error("qByteLen must be a number");if(typeof F!="function")throw new Error("hmacFn must be a function");let L=he(J),Z=he(J),Q=0;const de=()=>{L.fill(1),Z.fill(0),Q=0},ye=(...ce)=>F(Z,L,...ce),oe=(ce=he())=>{Z=ye(ae([0]),ce),L=ye(),ce.length!==0&&(Z=ye(ae([1]),ce),L=ye())},se=()=>{if(Q++>=1e3)throw new Error("drbg: tried 1000 values");let ce=0;const we=[];for(;ce<q;){L=ye();const Pe=L.slice();we.push(Pe),ce+=L.length}return X(...we)};return(ce,we)=>{de(),oe(ce);let Pe;for(;!(Pe=we(se()));)oe();return de(),Pe}}v.createHmacDrbg=te;const ue={bigint:J=>typeof J=="bigint",function:J=>typeof J=="function",boolean:J=>typeof J=="boolean",string:J=>typeof J=="string",isSafeInteger:J=>Number.isSafeInteger(J),array:J=>Array.isArray(J),field:(J,q)=>q.Fp.isValid(J),hash:J=>typeof J=="function"&&Number.isSafeInteger(J.outputLen)};function ne(J,q,F={}){const L=(Z,Q,de)=>{const ye=ue[Q];if(typeof ye!="function")throw new Error(`Invalid validator "${Q}", expected function`);const oe=J[Z];if(!(de&&oe===void 0)&&!ye(oe,J))throw new Error(`Invalid param ${String(Z)}=${oe} (${typeof oe}), expected ${Q}`)};for(const[Z,Q]of Object.entries(q))L(Z,Q,!1);for(const[Z,Q]of Object.entries(F))L(Z,Q,!0);return J}v.validateObject=ne})(utils$6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(modular,"__esModule",{value:!0}),modular.hashToPrivateScalar=modular.FpSqrtEven=modular.FpSqrtOdd=modular.Field=modular.nLength=modular.FpIsSquare=modular.FpDiv=modular.FpInvertBatch=modular.FpPow=modular.validateField=modular.isNegativeLE=modular.FpSqrt=modular.tonelliShanks=modular.invert=modular.pow2=modular.pow=modular.mod=void 0;const utils_1$8=utils$6,_0n$1=BigInt(0),_1n$1=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);BigInt(9),BigInt(16);function mod(v,_){const x=v%_;return x>=_0n$1?x:_+x}modular.mod=mod;function pow(v,_,x){if(x<=_0n$1||_<_0n$1)throw new Error("Expected power/modulo > 0");if(x===_1n$1)return _0n$1;let E=_1n$1;for(;_>_0n$1;)_&_1n$1&&(E=E*v%x),v=v*v%x,_>>=_1n$1;return E}modular.pow=pow;function pow2(v,_,x){let E=v;for(;_-- >_0n$1;)E*=E,E%=x;return E}modular.pow2=pow2;function invert(v,_){if(v===_0n$1||_<=_0n$1)throw new Error(`invert: expected positive integers, got n=${v} mod=${_}`);let x=mod(v,_),E=_,A=_0n$1,P=_1n$1;for(;x!==_0n$1;){const O=E/x,k=E%x,C=A-P*O;E=x,x=k,A=P,P=C}if(E!==_1n$1)throw new Error("invert: does not exist");return mod(A,_)}modular.invert=invert;function tonelliShanks(v){const _=(v-_1n$1)/_2n;let x,E,A;for(x=v-_1n$1,E=0;x%_2n===_0n$1;x/=_2n,E++);for(A=_2n;A<v&&pow(A,_,v)!==v-_1n$1;A++);if(E===1){const T=(v+_1n$1)/_4n;return function(k,C){const U=k.pow(C,T);if(!k.eql(k.sqr(U),C))throw new Error("Cannot find square root");return U}}const P=(x+_1n$1)/_2n;return function(O,k){if(O.pow(k,_)===O.neg(O.ONE))throw new Error("Cannot find square root");let C=E,U=O.pow(O.mul(O.ONE,A),x),N=O.pow(k,P),H=O.pow(k,x);for(;!O.eql(H,O.ONE);){if(O.eql(H,O.ZERO))return O.ZERO;let D=1;for(let V=O.sqr(H);D<C&&!O.eql(V,O.ONE);D++)V=O.sqr(V);const j=O.pow(U,_1n$1<<BigInt(C-D-1));U=O.sqr(j),N=O.mul(N,j),H=O.mul(H,U),C=D}return N}}modular.tonelliShanks=tonelliShanks;function FpSqrt(v){if(v%_4n===_3n){const _=(v+_1n$1)/_4n;return function(E,A){const P=E.pow(A,_);if(!E.eql(E.sqr(P),A))throw new Error("Cannot find square root");return P}}if(v%_8n===_5n){const _=(v-_5n)/_8n;return function(E,A){const P=E.mul(A,_2n),T=E.pow(P,_),O=E.mul(A,T),k=E.mul(E.mul(O,_2n),T),C=E.mul(O,E.sub(k,E.ONE));if(!E.eql(E.sqr(C),A))throw new Error("Cannot find square root");return C}}return tonelliShanks(v)}modular.FpSqrt=FpSqrt;const isNegativeLE=(v,_)=>(mod(v,_)&_1n$1)===_1n$1;modular.isNegativeLE=isNegativeLE;const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(v){const _={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},x=FIELD_FIELDS.reduce((E,A)=>(E[A]="function",E),_);return(0,utils_1$8.validateObject)(v,x)}modular.validateField=validateField;function FpPow(v,_,x){if(x<_0n$1)throw new Error("Expected power > 0");if(x===_0n$1)return v.ONE;if(x===_1n$1)return _;let E=v.ONE,A=_;for(;x>_0n$1;)x&_1n$1&&(E=v.mul(E,A)),A=v.sqr(A),x>>=_1n$1;return E}modular.FpPow=FpPow;function FpInvertBatch(v,_){const x=new Array(_.length),E=_.reduce((P,T,O)=>v.is0(T)?P:(x[O]=P,v.mul(P,T)),v.ONE),A=v.inv(E);return _.reduceRight((P,T,O)=>v.is0(T)?P:(x[O]=v.mul(P,x[O]),v.mul(P,T)),A),x}modular.FpInvertBatch=FpInvertBatch;function FpDiv(v,_,x){return v.mul(_,typeof x=="bigint"?invert(x,v.ORDER):v.inv(x))}modular.FpDiv=FpDiv;function FpIsSquare(v){const _=(v.ORDER-_1n$1)/_2n;return x=>{const E=v.pow(x,_);return v.eql(E,v.ZERO)||v.eql(E,v.ONE)}}modular.FpIsSquare=FpIsSquare;function nLength(v,_){const x=_!==void 0?_:v.toString(2).length,E=Math.ceil(x/8);return{nBitLength:x,nByteLength:E}}modular.nLength=nLength;function Field$1(v,_,x=!1,E={}){if(v<=_0n$1)throw new Error(`Expected Fp ORDER > 0, got ${v}`);const{nBitLength:A,nByteLength:P}=nLength(v,_);if(P>2048)throw new Error("Field lengths over 2048 bytes are not supported");const T=FpSqrt(v),O=Object.freeze({ORDER:v,BITS:A,BYTES:P,MASK:(0,utils_1$8.bitMask)(A),ZERO:_0n$1,ONE:_1n$1,create:k=>mod(k,v),isValid:k=>{if(typeof k!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof k}`);return _0n$1<=k&&k<v},is0:k=>k===_0n$1,isOdd:k=>(k&_1n$1)===_1n$1,neg:k=>mod(-k,v),eql:(k,C)=>k===C,sqr:k=>mod(k*k,v),add:(k,C)=>mod(k+C,v),sub:(k,C)=>mod(k-C,v),mul:(k,C)=>mod(k*C,v),pow:(k,C)=>FpPow(O,k,C),div:(k,C)=>mod(k*invert(C,v),v),sqrN:k=>k*k,addN:(k,C)=>k+C,subN:(k,C)=>k-C,mulN:(k,C)=>k*C,inv:k=>invert(k,v),sqrt:E.sqrt||(k=>T(O,k)),invertBatch:k=>FpInvertBatch(O,k),cmov:(k,C,U)=>U?C:k,toBytes:k=>x?(0,utils_1$8.numberToBytesLE)(k,P):(0,utils_1$8.numberToBytesBE)(k,P),fromBytes:k=>{if(k.length!==P)throw new Error(`Fp.fromBytes: expected ${P}, got ${k.length}`);return x?(0,utils_1$8.bytesToNumberLE)(k):(0,utils_1$8.bytesToNumberBE)(k)}});return Object.freeze(O)}modular.Field=Field$1;function FpSqrtOdd(v,_){if(!v.isOdd)throw new Error("Field doesn't have isOdd");const x=v.sqrt(_);return v.isOdd(x)?x:v.neg(x)}modular.FpSqrtOdd=FpSqrtOdd;function FpSqrtEven(v,_){if(!v.isOdd)throw new Error("Field doesn't have isOdd");const x=v.sqrt(_);return v.isOdd(x)?v.neg(x):x}modular.FpSqrtEven=FpSqrtEven;function hashToPrivateScalar(v,_,x=!1){v=(0,utils_1$8.ensureBytes)("privateHash",v);const E=v.length,A=nLength(_).nByteLength+8;if(A<24||E<A||E>1024)throw new Error(`hashToPrivateScalar: expected ${A}-1024 bytes of input, got ${E}`);const P=x?(0,utils_1$8.bytesToNumberLE)(v):(0,utils_1$8.bytesToNumberBE)(v);return mod(P,_-_1n$1)+_1n$1}modular.hashToPrivateScalar=hashToPrivateScalar;var weierstrass={},curve={};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(curve,"__esModule",{value:!0}),curve.validateBasic=curve.wNAF=void 0;const modular_1$2=modular,utils_1$7=utils$6,_0n=BigInt(0),_1n=BigInt(1);function wNAF(v,_){const x=(A,P)=>{const T=P.negate();return A?T:P},E=A=>{const P=Math.ceil(_/A)+1,T=2**(A-1);return{windows:P,windowSize:T}};return{constTimeNegate:x,unsafeLadder(A,P){let T=v.ZERO,O=A;for(;P>_0n;)P&_1n&&(T=T.add(O)),O=O.double(),P>>=_1n;return T},precomputeWindow(A,P){const{windows:T,windowSize:O}=E(P),k=[];let C=A,U=C;for(let N=0;N<T;N++){U=C,k.push(U);for(let H=1;H<O;H++)U=U.add(C),k.push(U);C=U.double()}return k},wNAF(A,P,T){const{windows:O,windowSize:k}=E(A);let C=v.ZERO,U=v.BASE;const N=BigInt(2**A-1),H=2**A,D=BigInt(A);for(let j=0;j<O;j++){const V=j*k;let X=Number(T&N);T>>=D,X>k&&(X-=H,T+=_1n);const re=V,ee=V+Math.abs(X)-1,fe=j%2!==0,le=X<0;X===0?U=U.add(x(fe,P[re])):C=C.add(x(le,P[ee]))}return{p:C,f:U}},wNAFCached(A,P,T,O){const k=A._WINDOW_SIZE||1;let C=P.get(A);return C||(C=this.precomputeWindow(A,k),k!==1&&P.set(A,O(C))),this.wNAF(k,C,T)}}}curve.wNAF=wNAF;function validateBasic(v){return(0,modular_1$2.validateField)(v.Fp),(0,utils_1$7.validateObject)(v,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,modular_1$2.nLength)(v.n,v.nBitLength),...v,p:v.Fp.ORDER})}curve.validateBasic=validateBasic,function(v){/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pe,ie,he,ae){ae===void 0&&(ae=he);var te=Object.getOwnPropertyDescriptor(ie,he);(!te||("get"in te?!ie.__esModule:te.writable||te.configurable))&&(te={enumerable:!0,get:function(){return ie[he]}}),Object.defineProperty(pe,ae,te)}:function(pe,ie,he,ae){ae===void 0&&(ae=he),pe[ae]=ie[he]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(pe,ie){Object.defineProperty(pe,"default",{enumerable:!0,value:ie})}:function(pe,ie){pe.default=ie}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(pe){if(pe&&pe.__esModule)return pe;var ie={};if(pe!=null)for(var he in pe)he!=="default"&&Object.prototype.hasOwnProperty.call(pe,he)&&_(ie,pe,he);return x(ie,pe),ie};Object.defineProperty(v,"__esModule",{value:!0}),v.mapToCurveSimpleSWU=v.SWUFpSqrtRatio=v.weierstrass=v.weierstrassPoints=v.DER=void 0;const A=E(modular),P=E(utils$6),T=utils$6,O=curve;function k(pe){const ie=(0,O.validateBasic)(pe);P.validateObject(ie,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:he,Fp:ae,a:te}=ie;if(he){if(!ae.eql(te,ae.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof he!="object"||typeof he.beta!="bigint"||typeof he.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...ie})}const{bytesToNumberBE:C,hexToBytes:U}=P;v.DER={Err:class extends Error{constructor(ie=""){super(ie)}},_parseInt(pe){const{Err:ie}=v.DER;if(pe.length<2||pe[0]!==2)throw new ie("Invalid signature integer tag");const he=pe[1],ae=pe.subarray(2,he+2);if(!he||ae.length!==he)throw new ie("Invalid signature integer: wrong length");if(ae[0]&128)throw new ie("Invalid signature integer: negative");if(ae[0]===0&&!(ae[1]&128))throw new ie("Invalid signature integer: unnecessary leading zero");return{d:C(ae),l:pe.subarray(he+2)}},toSig(pe){const{Err:ie}=v.DER,he=typeof pe=="string"?U(pe):pe;if(!(he instanceof Uint8Array))throw new Error("ui8a expected");let ae=he.length;if(ae<2||he[0]!=48)throw new ie("Invalid signature tag");if(he[1]!==ae-2)throw new ie("Invalid signature: incorrect length");const{d:te,l:ue}=v.DER._parseInt(he.subarray(2)),{d:ne,l:J}=v.DER._parseInt(ue);if(J.length)throw new ie("Invalid signature: left bytes after parsing");return{r:te,s:ne}},hexFromSig(pe){const ie=F=>Number.parseInt(F[0],16)&8?"00"+F:F,he=F=>{const L=F.toString(16);return L.length&1?`0${L}`:L},ae=ie(he(pe.s)),te=ie(he(pe.r)),ue=ae.length/2,ne=te.length/2,J=he(ue),q=he(ne);return`30${he(ne+ue+4)}02${q}${te}02${J}${ae}`}};const N=BigInt(0),H=BigInt(1),D=BigInt(2),j=BigInt(3),V=BigInt(4);function X(pe){const ie=k(pe),{Fp:he}=ie,ae=ie.toBytes||((ye,oe,se)=>{const Y=oe.toAffine();return P.concatBytes(Uint8Array.from([4]),he.toBytes(Y.x),he.toBytes(Y.y))}),te=ie.fromBytes||(ye=>{const oe=ye.subarray(1),se=he.fromBytes(oe.subarray(0,he.BYTES)),Y=he.fromBytes(oe.subarray(he.BYTES,2*he.BYTES));return{x:se,y:Y}});function ue(ye){const{a:oe,b:se}=ie,Y=he.sqr(ye),ce=he.mul(Y,ye);return he.add(he.add(ce,he.mul(ye,oe)),se)}if(!he.eql(he.sqr(ie.Gy),ue(ie.Gx)))throw new Error("bad generator point: equation left != right");function ne(ye){return typeof ye=="bigint"&&N<ye&&ye<ie.n}function J(ye){if(!ne(ye))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function q(ye){const{allowedPrivateKeyLengths:oe,nByteLength:se,wrapPrivateKey:Y,n:ce}=ie;if(oe&&typeof ye!="bigint"){if(ye instanceof Uint8Array&&(ye=P.bytesToHex(ye)),typeof ye!="string"||!oe.includes(ye.length))throw new Error("Invalid key");ye=ye.padStart(se*2,"0")}let we;try{we=typeof ye=="bigint"?ye:P.bytesToNumberBE((0,T.ensureBytes)("private key",ye,se))}catch{throw new Error(`private key must be ${se} bytes, hex or bigint, not ${typeof ye}`)}return Y&&(we=A.mod(we,ce)),J(we),we}const F=new Map;function L(ye){if(!(ye instanceof Z))throw new Error("ProjectivePoint expected")}class Z{constructor(oe,se,Y){if(this.px=oe,this.py=se,this.pz=Y,oe==null||!he.isValid(oe))throw new Error("x required");if(se==null||!he.isValid(se))throw new Error("y required");if(Y==null||!he.isValid(Y))throw new Error("z required")}static fromAffine(oe){const{x:se,y:Y}=oe||{};if(!oe||!he.isValid(se)||!he.isValid(Y))throw new Error("invalid affine point");if(oe instanceof Z)throw new Error("projective point not allowed");const ce=we=>he.eql(we,he.ZERO);return ce(se)&&ce(Y)?Z.ZERO:new Z(se,Y,he.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(oe){const se=he.invertBatch(oe.map(Y=>Y.pz));return oe.map((Y,ce)=>Y.toAffine(se[ce])).map(Z.fromAffine)}static fromHex(oe){const se=Z.fromAffine(te((0,T.ensureBytes)("pointHex",oe)));return se.assertValidity(),se}static fromPrivateKey(oe){return Z.BASE.multiply(q(oe))}_setWindowSize(oe){this._WINDOW_SIZE=oe,F.delete(this)}assertValidity(){if(this.is0()){if(ie.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:oe,y:se}=this.toAffine();if(!he.isValid(oe)||!he.isValid(se))throw new Error("bad point: x or y not FE");const Y=he.sqr(se),ce=ue(oe);if(!he.eql(Y,ce))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:oe}=this.toAffine();if(he.isOdd)return!he.isOdd(oe);throw new Error("Field doesn't support isOdd")}equals(oe){L(oe);const{px:se,py:Y,pz:ce}=this,{px:we,py:Pe,pz:Se}=oe,Be=he.eql(he.mul(se,Se),he.mul(we,ce)),Ie=he.eql(he.mul(Y,Se),he.mul(Pe,ce));return Be&&Ie}negate(){return new Z(this.px,he.neg(this.py),this.pz)}double(){const{a:oe,b:se}=ie,Y=he.mul(se,j),{px:ce,py:we,pz:Pe}=this;let Se=he.ZERO,Be=he.ZERO,Ie=he.ZERO,Re=he.mul(ce,ce),Me=he.mul(we,we),xe=he.mul(Pe,Pe),Ee=he.mul(ce,we);return Ee=he.add(Ee,Ee),Ie=he.mul(ce,Pe),Ie=he.add(Ie,Ie),Se=he.mul(oe,Ie),Be=he.mul(Y,xe),Be=he.add(Se,Be),Se=he.sub(Me,Be),Be=he.add(Me,Be),Be=he.mul(Se,Be),Se=he.mul(Ee,Se),Ie=he.mul(Y,Ie),xe=he.mul(oe,xe),Ee=he.sub(Re,xe),Ee=he.mul(oe,Ee),Ee=he.add(Ee,Ie),Ie=he.add(Re,Re),Re=he.add(Ie,Re),Re=he.add(Re,xe),Re=he.mul(Re,Ee),Be=he.add(Be,Re),xe=he.mul(we,Pe),xe=he.add(xe,xe),Re=he.mul(xe,Ee),Se=he.sub(Se,Re),Ie=he.mul(xe,Me),Ie=he.add(Ie,Ie),Ie=he.add(Ie,Ie),new Z(Se,Be,Ie)}add(oe){L(oe);const{px:se,py:Y,pz:ce}=this,{px:we,py:Pe,pz:Se}=oe;let Be=he.ZERO,Ie=he.ZERO,Re=he.ZERO;const Me=ie.a,xe=he.mul(ie.b,j);let Ee=he.mul(se,we),Ue=he.mul(Y,Pe),Ke=he.mul(ce,Se),ze=he.add(se,Y),Ve=he.add(we,Pe);ze=he.mul(ze,Ve),Ve=he.add(Ee,Ue),ze=he.sub(ze,Ve),Ve=he.add(se,ce);let Je=he.add(we,Se);return Ve=he.mul(Ve,Je),Je=he.add(Ee,Ke),Ve=he.sub(Ve,Je),Je=he.add(Y,ce),Be=he.add(Pe,Se),Je=he.mul(Je,Be),Be=he.add(Ue,Ke),Je=he.sub(Je,Be),Re=he.mul(Me,Ve),Be=he.mul(xe,Ke),Re=he.add(Be,Re),Be=he.sub(Ue,Re),Re=he.add(Ue,Re),Ie=he.mul(Be,Re),Ue=he.add(Ee,Ee),Ue=he.add(Ue,Ee),Ke=he.mul(Me,Ke),Ve=he.mul(xe,Ve),Ue=he.add(Ue,Ke),Ke=he.sub(Ee,Ke),Ke=he.mul(Me,Ke),Ve=he.add(Ve,Ke),Ee=he.mul(Ue,Ve),Ie=he.add(Ie,Ee),Ee=he.mul(Je,Ve),Be=he.mul(ze,Be),Be=he.sub(Be,Ee),Ee=he.mul(ze,Ue),Re=he.mul(Je,Re),Re=he.add(Re,Ee),new Z(Be,Ie,Re)}subtract(oe){return this.add(oe.negate())}is0(){return this.equals(Z.ZERO)}wNAF(oe){return de.wNAFCached(this,F,oe,se=>{const Y=he.invertBatch(se.map(ce=>ce.pz));return se.map((ce,we)=>ce.toAffine(Y[we])).map(Z.fromAffine)})}multiplyUnsafe(oe){const se=Z.ZERO;if(oe===N)return se;if(J(oe),oe===H)return this;const{endo:Y}=ie;if(!Y)return de.unsafeLadder(this,oe);let{k1neg:ce,k1:we,k2neg:Pe,k2:Se}=Y.splitScalar(oe),Be=se,Ie=se,Re=this;for(;we>N||Se>N;)we&H&&(Be=Be.add(Re)),Se&H&&(Ie=Ie.add(Re)),Re=Re.double(),we>>=H,Se>>=H;return ce&&(Be=Be.negate()),Pe&&(Ie=Ie.negate()),Ie=new Z(he.mul(Ie.px,Y.beta),Ie.py,Ie.pz),Be.add(Ie)}multiply(oe){J(oe);let se=oe,Y,ce;const{endo:we}=ie;if(we){const{k1neg:Pe,k1:Se,k2neg:Be,k2:Ie}=we.splitScalar(se);let{p:Re,f:Me}=this.wNAF(Se),{p:xe,f:Ee}=this.wNAF(Ie);Re=de.constTimeNegate(Pe,Re),xe=de.constTimeNegate(Be,xe),xe=new Z(he.mul(xe.px,we.beta),xe.py,xe.pz),Y=Re.add(xe),ce=Me.add(Ee)}else{const{p:Pe,f:Se}=this.wNAF(se);Y=Pe,ce=Se}return Z.normalizeZ([Y,ce])[0]}multiplyAndAddUnsafe(oe,se,Y){const ce=Z.BASE,we=(Se,Be)=>Be===N||Be===H||!Se.equals(ce)?Se.multiplyUnsafe(Be):Se.multiply(Be),Pe=we(this,se).add(we(oe,Y));return Pe.is0()?void 0:Pe}toAffine(oe){const{px:se,py:Y,pz:ce}=this,we=this.is0();oe==null&&(oe=we?he.ONE:he.inv(ce));const Pe=he.mul(se,oe),Se=he.mul(Y,oe),Be=he.mul(ce,oe);if(we)return{x:he.ZERO,y:he.ZERO};if(!he.eql(Be,he.ONE))throw new Error("invZ was invalid");return{x:Pe,y:Se}}isTorsionFree(){const{h:oe,isTorsionFree:se}=ie;if(oe===H)return!0;if(se)return se(Z,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:oe,clearCofactor:se}=ie;return oe===H?this:se?se(Z,this):this.multiplyUnsafe(ie.h)}toRawBytes(oe=!0){return this.assertValidity(),ae(Z,this,oe)}toHex(oe=!0){return P.bytesToHex(this.toRawBytes(oe))}}Z.BASE=new Z(ie.Gx,ie.Gy,he.ONE),Z.ZERO=new Z(he.ZERO,he.ONE,he.ZERO);const Q=ie.nBitLength,de=(0,O.wNAF)(Z,ie.endo?Math.ceil(Q/2):Q);return{CURVE:ie,ProjectivePoint:Z,normPrivateKeyToScalar:q,weierstrassEquation:ue,isWithinCurveOrder:ne}}v.weierstrassPoints=X;function re(pe){const ie=(0,O.validateBasic)(pe);return P.validateObject(ie,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...ie})}function ee(pe){const ie=re(pe),{Fp:he,n:ae}=ie,te=he.BYTES+1,ue=2*he.BYTES+1;function ne(Ve){return N<Ve&&Ve<he.ORDER}function J(Ve){return A.mod(Ve,ae)}function q(Ve){return A.invert(Ve,ae)}const{ProjectivePoint:F,normPrivateKeyToScalar:L,weierstrassEquation:Z,isWithinCurveOrder:Q}=X({...ie,toBytes(Ve,Je,et){const Ge=Je.toAffine(),ot=he.toBytes(Ge.x),He=P.concatBytes;return et?He(Uint8Array.from([Je.hasEvenY()?2:3]),ot):He(Uint8Array.from([4]),ot,he.toBytes(Ge.y))},fromBytes(Ve){const Je=Ve.length,et=Ve[0],Ge=Ve.subarray(1);if(Je===te&&(et===2||et===3)){const ot=P.bytesToNumberBE(Ge);if(!ne(ot))throw new Error("Point is not on curve");const He=Z(ot);let We=he.sqrt(He);const Ze=(We&H)===H;return(et&1)===1!==Ze&&(We=he.neg(We)),{x:ot,y:We}}else if(Je===ue&&et===4){const ot=he.fromBytes(Ge.subarray(0,he.BYTES)),He=he.fromBytes(Ge.subarray(he.BYTES,2*he.BYTES));return{x:ot,y:He}}else throw new Error(`Point of length ${Je} was invalid. Expected ${te} compressed bytes or ${ue} uncompressed bytes`)}}),de=Ve=>P.bytesToHex(P.numberToBytesBE(Ve,ie.nByteLength));function ye(Ve){const Je=ae>>H;return Ve>Je}function oe(Ve){return ye(Ve)?J(-Ve):Ve}const se=(Ve,Je,et)=>P.bytesToNumberBE(Ve.slice(Je,et));class Y{constructor(Je,et,Ge){this.r=Je,this.s=et,this.recovery=Ge,this.assertValidity()}static fromCompact(Je){const et=ie.nByteLength;return Je=(0,T.ensureBytes)("compactSignature",Je,et*2),new Y(se(Je,0,et),se(Je,et,2*et))}static fromDER(Je){const{r:et,s:Ge}=v.DER.toSig((0,T.ensureBytes)("DER",Je));return new Y(et,Ge)}assertValidity(){if(!Q(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Q(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Je){return new Y(this.r,this.s,Je)}recoverPublicKey(Je){const{r:et,s:Ge,recovery:ot}=this,He=Ie((0,T.ensureBytes)("msgHash",Je));if(ot==null||![0,1,2,3].includes(ot))throw new Error("recovery id invalid");const We=ot===2||ot===3?et+ie.n:et;if(We>=he.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ze=ot&1?"03":"02",$e=F.fromHex(Ze+de(We)),Te=q(We),Ce=J(-He*Te),ve=J(Ge*Te),be=F.BASE.multiplyAndAddUnsafe($e,Ce,ve);if(!be)throw new Error("point at infinify");return be.assertValidity(),be}hasHighS(){return ye(this.s)}normalizeS(){return this.hasHighS()?new Y(this.r,J(-this.s),this.recovery):this}toDERRawBytes(){return P.hexToBytes(this.toDERHex())}toDERHex(){return v.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return P.hexToBytes(this.toCompactHex())}toCompactHex(){return de(this.r)+de(this.s)}}const ce={isValidPrivateKey(Ve){try{return L(Ve),!0}catch{return!1}},normPrivateKeyToScalar:L,randomPrivateKey:()=>{const Ve=ie.randomBytes(he.BYTES+8),Je=A.hashToPrivateScalar(Ve,ae);return P.numberToBytesBE(Je,ie.nByteLength)},precompute(Ve=8,Je=F.BASE){return Je._setWindowSize(Ve),Je.multiply(BigInt(3)),Je}};function we(Ve,Je=!0){return F.fromPrivateKey(Ve).toRawBytes(Je)}function Pe(Ve){const Je=Ve instanceof Uint8Array,et=typeof Ve=="string",Ge=(Je||et)&&Ve.length;return Je?Ge===te||Ge===ue:et?Ge===2*te||Ge===2*ue:Ve instanceof F}function Se(Ve,Je,et=!0){if(Pe(Ve))throw new Error("first arg must be private key");if(!Pe(Je))throw new Error("second arg must be public key");return F.fromHex(Je).multiply(L(Ve)).toRawBytes(et)}const Be=ie.bits2int||function(Ve){const Je=P.bytesToNumberBE(Ve),et=Ve.length*8-ie.nBitLength;return et>0?Je>>BigInt(et):Je},Ie=ie.bits2int_modN||function(Ve){return J(Be(Ve))},Re=P.bitMask(ie.nBitLength);function Me(Ve){if(typeof Ve!="bigint")throw new Error("bigint expected");if(!(N<=Ve&&Ve<Re))throw new Error(`bigint expected < 2^${ie.nBitLength}`);return P.numberToBytesBE(Ve,ie.nByteLength)}function xe(Ve,Je,et=Ee){if(["recovered","canonical"].some(me=>me in et))throw new Error("sign() legacy options not supported");const{hash:Ge,randomBytes:ot}=ie;let{lowS:He,prehash:We,extraEntropy:Ze}=et;He==null&&(He=!0),Ve=(0,T.ensureBytes)("msgHash",Ve),We&&(Ve=(0,T.ensureBytes)("prehashed msgHash",Ge(Ve)));const $e=Ie(Ve),Te=L(Je),Ce=[Me(Te),Me($e)];if(Ze!=null){const me=Ze===!0?ot(he.BYTES):Ze;Ce.push((0,T.ensureBytes)("extraEntropy",me,he.BYTES))}const ve=P.concatBytes(...Ce),be=$e;function ge(me){const _e=Be(me);if(!Q(_e))return;const Ae=q(_e),Oe=F.BASE.multiply(_e).toAffine(),Le=J(Oe.x);if(Le===N)return;const je=J(Ae*J(be+Le*Te));if(je===N)return;let qe=(Oe.x===Le?0:2)|Number(Oe.y&H),rt=je;return He&&ye(je)&&(rt=oe(je),qe^=1),new Y(Le,rt,qe)}return{seed:ve,k2sig:ge}}const Ee={lowS:ie.lowS,prehash:!1},Ue={lowS:ie.lowS,prehash:!1};function Ke(Ve,Je,et=Ee){const{seed:Ge,k2sig:ot}=xe(Ve,Je,et),He=ie;return P.createHmacDrbg(He.hash.outputLen,He.nByteLength,He.hmac)(Ge,ot)}F.BASE._setWindowSize(8);function ze(Ve,Je,et,Ge=Ue){var Oe;const ot=Ve;if(Je=(0,T.ensureBytes)("msgHash",Je),et=(0,T.ensureBytes)("publicKey",et),"strict"in Ge)throw new Error("options.strict was renamed to lowS");const{lowS:He,prehash:We}=Ge;let Ze,$e;try{if(typeof ot=="string"||ot instanceof Uint8Array)try{Ze=Y.fromDER(ot)}catch(Le){if(!(Le instanceof v.DER.Err))throw Le;Ze=Y.fromCompact(ot)}else if(typeof ot=="object"&&typeof ot.r=="bigint"&&typeof ot.s=="bigint"){const{r:Le,s:je}=ot;Ze=new Y(Le,je)}else throw new Error("PARSE");$e=F.fromHex(et)}catch(Le){if(Le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(He&&Ze.hasHighS())return!1;We&&(Je=ie.hash(Je));const{r:Te,s:Ce}=Ze,ve=Ie(Je),be=q(Ce),ge=J(ve*be),me=J(Te*be),_e=(Oe=F.BASE.multiplyAndAddUnsafe($e,ge,me))==null?void 0:Oe.toAffine();return _e?J(_e.x)===Te:!1}return{CURVE:ie,getPublicKey:we,getSharedSecret:Se,sign:Ke,verify:ze,ProjectivePoint:F,Signature:Y,utils:ce}}v.weierstrass=ee;function fe(pe,ie){const he=pe.ORDER;let ae=N;for(let ye=he-H;ye%D===N;ye/=D)ae+=H;const te=ae,ue=D<<te-H-H,ne=ue*D,J=(he-H)/ne,q=(J-H)/D,F=ne-H,L=ue,Z=pe.pow(ie,J),Q=pe.pow(ie,(J+H)/D);let de=(ye,oe)=>{let se=Z,Y=pe.pow(oe,F),ce=pe.sqr(Y);ce=pe.mul(ce,oe);let we=pe.mul(ye,ce);we=pe.pow(we,q),we=pe.mul(we,Y),Y=pe.mul(we,oe),ce=pe.mul(we,ye);let Pe=pe.mul(ce,Y);we=pe.pow(Pe,L);let Se=pe.eql(we,pe.ONE);Y=pe.mul(ce,Q),we=pe.mul(Pe,se),ce=pe.cmov(Y,ce,Se),Pe=pe.cmov(we,Pe,Se);for(let Be=te;Be>H;Be--){let Ie=Be-D;Ie=D<<Ie-H;let Re=pe.pow(Pe,Ie);const Me=pe.eql(Re,pe.ONE);Y=pe.mul(ce,se),se=pe.mul(se,se),Re=pe.mul(Pe,se),ce=pe.cmov(Y,ce,Me),Pe=pe.cmov(Re,Pe,Me)}return{isValid:Se,value:ce}};if(pe.ORDER%V===j){const ye=(pe.ORDER-j)/V,oe=pe.sqrt(pe.neg(ie));de=(se,Y)=>{let ce=pe.sqr(Y);const we=pe.mul(se,Y);ce=pe.mul(ce,we);let Pe=pe.pow(ce,ye);Pe=pe.mul(Pe,we);const Se=pe.mul(Pe,oe),Be=pe.mul(pe.sqr(Pe),Y),Ie=pe.eql(Be,se);let Re=pe.cmov(Se,Pe,Ie);return{isValid:Ie,value:Re}}}return de}v.SWUFpSqrtRatio=fe;function le(pe,ie){if(A.validateField(pe),!pe.isValid(ie.A)||!pe.isValid(ie.B)||!pe.isValid(ie.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const he=fe(pe,ie.Z);if(!pe.isOdd)throw new Error("Fp.isOdd is not implemented!");return ae=>{let te,ue,ne,J,q,F,L,Z;te=pe.sqr(ae),te=pe.mul(te,ie.Z),ue=pe.sqr(te),ue=pe.add(ue,te),ne=pe.add(ue,pe.ONE),ne=pe.mul(ne,ie.B),J=pe.cmov(ie.Z,pe.neg(ue),!pe.eql(ue,pe.ZERO)),J=pe.mul(J,ie.A),ue=pe.sqr(ne),F=pe.sqr(J),q=pe.mul(F,ie.A),ue=pe.add(ue,q),ue=pe.mul(ue,ne),F=pe.mul(F,J),q=pe.mul(F,ie.B),ue=pe.add(ue,q),L=pe.mul(te,ne);const{isValid:Q,value:de}=he(ue,F);Z=pe.mul(te,ae),Z=pe.mul(Z,de),L=pe.cmov(L,ne,Q),Z=pe.cmov(Z,de,Q);const ye=pe.isOdd(ae)===pe.isOdd(Z);return Z=pe.cmov(pe.neg(Z),Z,ye),L=pe.div(L,J),{x:L,y:Z}}}v.mapToCurveSimpleSWU=le}(weierstrass);var hashToCurve={};Object.defineProperty(hashToCurve,"__esModule",{value:!0}),hashToCurve.createHasher=hashToCurve.isogenyMap=hashToCurve.hash_to_field=hashToCurve.expand_message_xof=hashToCurve.expand_message_xmd=void 0;const modular_1$1=modular,utils_1$6=utils$6;function validateDST(v){if(v instanceof Uint8Array)return v;if(typeof v=="string")return(0,utils_1$6.utf8ToBytes)(v);throw new Error("DST must be Uint8Array or string")}const os2ip=utils_1$6.bytesToNumberBE;function i2osp(v,_){if(v<0||v>=1<<8*_)throw new Error(`bad I2OSP call: value=${v} length=${_}`);const x=Array.from({length:_}).fill(0);for(let E=_-1;E>=0;E--)x[E]=v&255,v>>>=8;return new Uint8Array(x)}function strxor(v,_){const x=new Uint8Array(v.length);for(let E=0;E<v.length;E++)x[E]=v[E]^_[E];return x}function isBytes(v){if(!(v instanceof Uint8Array))throw new Error("Uint8Array expected")}function isNum(v){if(!Number.isSafeInteger(v))throw new Error("number expected")}function expand_message_xmd(v,_,x,E){isBytes(v),isBytes(_),isNum(x),_.length>255&&(_=E((0,utils_1$6.concatBytes)((0,utils_1$6.utf8ToBytes)("H2C-OVERSIZE-DST-"),_)));const{outputLen:A,blockLen:P}=E,T=Math.ceil(x/A);if(T>255)throw new Error("Invalid xmd length");const O=(0,utils_1$6.concatBytes)(_,i2osp(_.length,1)),k=i2osp(0,P),C=i2osp(x,2),U=new Array(T),N=E((0,utils_1$6.concatBytes)(k,v,C,i2osp(0,1),O));U[0]=E((0,utils_1$6.concatBytes)(N,i2osp(1,1),O));for(let D=1;D<=T;D++){const j=[strxor(N,U[D-1]),i2osp(D+1,1),O];U[D]=E((0,utils_1$6.concatBytes)(...j))}return(0,utils_1$6.concatBytes)(...U).slice(0,x)}hashToCurve.expand_message_xmd=expand_message_xmd;function expand_message_xof(v,_,x,E,A){if(isBytes(v),isBytes(_),isNum(x),_.length>255){const P=Math.ceil(2*E/8);_=A.create({dkLen:P}).update((0,utils_1$6.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(_).digest()}if(x>65535||_.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return A.create({dkLen:x}).update(v).update(i2osp(x,2)).update(_).update(i2osp(_.length,1)).digest()}hashToCurve.expand_message_xof=expand_message_xof;function hash_to_field(v,_,x){(0,utils_1$6.validateObject)(x,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:E,k:A,m:P,hash:T,expand:O,DST:k}=x;isBytes(v),isNum(_);const C=validateDST(k),U=E.toString(2).length,N=Math.ceil((U+A)/8),H=_*P*N;let D;if(O==="xmd")D=expand_message_xmd(v,C,H,T);else if(O==="xof")D=expand_message_xof(v,C,H,A,T);else if(O==="_internal_pass")D=v;else throw new Error('expand must be "xmd" or "xof"');const j=new Array(_);for(let V=0;V<_;V++){const X=new Array(P);for(let re=0;re<P;re++){const ee=N*(re+V*P),fe=D.subarray(ee,ee+N);X[re]=(0,modular_1$1.mod)(os2ip(fe),E)}j[V]=X}return j}hashToCurve.hash_to_field=hash_to_field;function isogenyMap(v,_){const x=_.map(E=>Array.from(E).reverse());return(E,A)=>{const[P,T,O,k]=x.map(C=>C.reduce((U,N)=>v.add(v.mul(U,E),N)));return E=v.div(P,T),A=v.mul(A,v.div(O,k)),{x:E,y:A}}}hashToCurve.isogenyMap=isogenyMap;function createHasher(v,_,x){if(typeof _!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(E,A){const P=hash_to_field(E,2,{...x,DST:x.DST,...A}),T=v.fromAffine(_(P[0])),O=v.fromAffine(_(P[1])),k=T.add(O).clearCofactor();return k.assertValidity(),k},encodeToCurve(E,A){const P=hash_to_field(E,1,{...x,DST:x.encodeDST,...A}),T=v.fromAffine(_(P[0])).clearCofactor();return T.assertValidity(),T}}}hashToCurve.createHasher=createHasher;var _shortw_utils={};Object.defineProperty(_shortw_utils,"__esModule",{value:!0}),_shortw_utils.createCurve=_shortw_utils.getHash=void 0;const hmac_1=hmac$2,utils_1$5=utilsExports,weierstrass_1=weierstrass;function getHash(v){return{hash:v,hmac:(_,...x)=>(0,hmac_1.hmac)(v,_,(0,utils_1$5.concatBytes)(...x)),randomBytes:utils_1$5.randomBytes}}_shortw_utils.getHash=getHash;function createCurve(v,_){const x=E=>(0,weierstrass_1.weierstrass)({...v,...getHash(E)});return Object.freeze({...x(_),create:x})}_shortw_utils.createCurve=createCurve,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Y,ce,we,Pe){Pe===void 0&&(Pe=we);var Se=Object.getOwnPropertyDescriptor(ce,we);(!Se||("get"in Se?!ce.__esModule:Se.writable||Se.configurable))&&(Se={enumerable:!0,get:function(){return ce[we]}}),Object.defineProperty(Y,Pe,Se)}:function(Y,ce,we,Pe){Pe===void 0&&(Pe=we),Y[Pe]=ce[we]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Y,ce){Object.defineProperty(Y,"default",{enumerable:!0,value:ce})}:function(Y,ce){Y.default=ce}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var ce={};if(Y!=null)for(var we in Y)we!=="default"&&Object.prototype.hasOwnProperty.call(Y,we)&&_(ce,Y,we);return x(ce,Y),ce},A;Object.defineProperty(v,"__esModule",{value:!0}),v.encodeToCurve=v.hashToCurve=v.schnorr=v.secp256k1=void 0;const P=sha256$6,T=utilsExports,O=modular,k=weierstrass,C=utils$6,U=E(hashToCurve),N=_shortw_utils,H=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),D=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),j=BigInt(1),V=BigInt(2),X=(Y,ce)=>(Y+ce/V)/ce;function re(Y){const ce=H,we=BigInt(3),Pe=BigInt(6),Se=BigInt(11),Be=BigInt(22),Ie=BigInt(23),Re=BigInt(44),Me=BigInt(88),xe=Y*Y*Y%ce,Ee=xe*xe*Y%ce,Ue=(0,O.pow2)(Ee,we,ce)*Ee%ce,Ke=(0,O.pow2)(Ue,we,ce)*Ee%ce,ze=(0,O.pow2)(Ke,V,ce)*xe%ce,Ve=(0,O.pow2)(ze,Se,ce)*ze%ce,Je=(0,O.pow2)(Ve,Be,ce)*Ve%ce,et=(0,O.pow2)(Je,Re,ce)*Je%ce,Ge=(0,O.pow2)(et,Me,ce)*et%ce,ot=(0,O.pow2)(Ge,Re,ce)*Je%ce,He=(0,O.pow2)(ot,we,ce)*Ee%ce,We=(0,O.pow2)(He,Ie,ce)*Ve%ce,Ze=(0,O.pow2)(We,Pe,ce)*xe%ce,$e=(0,O.pow2)(Ze,V,ce);if(!ee.eql(ee.sqr($e),Y))throw new Error("Cannot find square root");return $e}const ee=(0,O.Field)(H,void 0,void 0,{sqrt:re});v.secp256k1=(0,N.createCurve)({a:BigInt(0),b:BigInt(7),Fp:ee,n:D,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:Y=>{const ce=D,we=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),Pe=-j*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Se=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Be=we,Ie=BigInt("0x100000000000000000000000000000000"),Re=X(Be*Y,ce),Me=X(-Pe*Y,ce);let xe=(0,O.mod)(Y-Re*we-Me*Se,ce),Ee=(0,O.mod)(-Re*Pe-Me*Be,ce);const Ue=xe>Ie,Ke=Ee>Ie;if(Ue&&(xe=ce-xe),Ke&&(Ee=ce-Ee),xe>Ie||Ee>Ie)throw new Error("splitScalar: Endomorphism failed, k="+Y);return{k1neg:Ue,k1:xe,k2neg:Ke,k2:Ee}}}},P.sha256);const fe=BigInt(0),le=Y=>typeof Y=="bigint"&&fe<Y&&Y<H,pe=Y=>typeof Y=="bigint"&&fe<Y&&Y<D,ie={};function he(Y,...ce){let we=ie[Y];if(we===void 0){const Pe=(0,P.sha256)(Uint8Array.from(Y,Se=>Se.charCodeAt(0)));we=(0,C.concatBytes)(Pe,Pe),ie[Y]=we}return(0,P.sha256)((0,C.concatBytes)(we,...ce))}const ae=Y=>Y.toRawBytes(!0).slice(1),te=Y=>(0,C.numberToBytesBE)(Y,32),ue=Y=>(0,O.mod)(Y,H),ne=Y=>(0,O.mod)(Y,D),J=v.secp256k1.ProjectivePoint,q=(Y,ce,we)=>J.BASE.multiplyAndAddUnsafe(Y,ce,we);function F(Y){let ce=v.secp256k1.utils.normPrivateKeyToScalar(Y),we=J.fromPrivateKey(ce);return{scalar:we.hasEvenY()?ce:ne(-ce),bytes:ae(we)}}function L(Y){if(!le(Y))throw new Error("bad x: need 0 < x < p");const ce=ue(Y*Y),we=ue(ce*Y+BigInt(7));let Pe=re(we);Pe%V!==fe&&(Pe=ue(-Pe));const Se=new J(Y,Pe,j);return Se.assertValidity(),Se}function Z(...Y){return ne((0,C.bytesToNumberBE)(he("BIP0340/challenge",...Y)))}function Q(Y){return F(Y).bytes}function de(Y,ce,we=(0,T.randomBytes)(32)){const Pe=(0,C.ensureBytes)("message",Y),{bytes:Se,scalar:Be}=F(ce),Ie=(0,C.ensureBytes)("auxRand",we,32),Re=te(Be^(0,C.bytesToNumberBE)(he("BIP0340/aux",Ie))),Me=he("BIP0340/nonce",Re,Se,Pe),xe=ne((0,C.bytesToNumberBE)(Me));if(xe===fe)throw new Error("sign failed: k is zero");const{bytes:Ee,scalar:Ue}=F(xe),Ke=Z(Ee,Se,Pe),ze=new Uint8Array(64);if(ze.set(Ee,0),ze.set(te(ne(Ue+Ke*Be)),32),!ye(ze,Pe,Se))throw new Error("sign: Invalid signature produced");return ze}function ye(Y,ce,we){const Pe=(0,C.ensureBytes)("signature",Y,64),Se=(0,C.ensureBytes)("message",ce),Be=(0,C.ensureBytes)("publicKey",we,32);try{const Ie=L((0,C.bytesToNumberBE)(Be)),Re=(0,C.bytesToNumberBE)(Pe.subarray(0,32));if(!le(Re))return!1;const Me=(0,C.bytesToNumberBE)(Pe.subarray(32,64));if(!pe(Me))return!1;const xe=Z(te(Re),ae(Ie),Se),Ee=q(Ie,Me,ne(-xe));return!(!Ee||!Ee.hasEvenY()||Ee.toAffine().x!==Re)}catch{return!1}}v.schnorr={getPublicKey:Q,sign:de,verify:ye,utils:{randomPrivateKey:v.secp256k1.utils.randomPrivateKey,lift_x:L,pointToBytes:ae,numberToBytesBE:C.numberToBytesBE,bytesToNumberBE:C.bytesToNumberBE,taggedHash:he,mod:O.mod}};const oe=U.isogenyMap(ee,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(Y=>Y.map(ce=>BigInt(ce)))),se=(0,k.mapToCurveSimpleSWU)(ee,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:ee.create(BigInt("-11"))});A=U.createHasher(v.secp256k1.ProjectivePoint,Y=>{const{x:ce,y:we}=se(ee.create(Y[0]));return oe(ce,we)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:ee.ORDER,m:1,k:128,expand:"xmd",hash:P.sha256}),v.hashToCurve=A.hashToCurve,v.encodeToCurve=A.encodeToCurve}(secp256k1$1);var stark={},poseidon$1={};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(poseidon$1,"__esModule",{value:!0}),poseidon$1.poseidon=poseidon$1.splitConstants=poseidon$1.validateOpts=void 0;const modular_1=modular;function validateOpts(v){const{Fp:_}=v;(0,modular_1.validateField)(_);for(const k of["t","roundsFull","roundsPartial"])if(typeof v[k]!="number"||!Number.isSafeInteger(v[k]))throw new Error(`Poseidon: invalid param ${k}=${v[k]} (${typeof v[k]})`);if(v.reversePartialPowIdx!==void 0&&typeof v.reversePartialPowIdx!="boolean")throw new Error(`Poseidon: invalid param reversePartialPowIdx=${v.reversePartialPowIdx}`);let x=v.sboxPower;if(x===void 0&&(x=5),typeof x!="number"||!Number.isSafeInteger(x))throw new Error(`Poseidon wrong sboxPower=${x}`);const E=BigInt(x);let A=k=>(0,modular_1.FpPow)(_,k,E);if(x===3?A=k=>_.mul(_.sqrN(k),k):x===5&&(A=k=>_.mul(_.sqrN(_.sqrN(k)),k)),v.roundsFull%2!==0)throw new Error(`Poseidon roundsFull is not even: ${v.roundsFull}`);const P=v.roundsFull+v.roundsPartial;if(!Array.isArray(v.roundConstants)||v.roundConstants.length!==P)throw new Error("Poseidon: wrong round constants");const T=v.roundConstants.map(k=>{if(!Array.isArray(k)||k.length!==v.t)throw new Error(`Poseidon wrong round constants: ${k}`);return k.map(C=>{if(typeof C!="bigint"||!_.isValid(C))throw new Error(`Poseidon wrong round constant=${C}`);return _.create(C)})});if(!Array.isArray(v.mds)||v.mds.length!==v.t)throw new Error("Poseidon: wrong MDS matrix");const O=v.mds.map(k=>{if(!Array.isArray(k)||k.length!==v.t)throw new Error(`Poseidon MDS matrix row: ${k}`);return k.map(C=>{if(typeof C!="bigint")throw new Error(`Poseidon MDS matrix value=${C}`);return _.create(C)})});return Object.freeze({...v,rounds:P,sboxFn:A,roundConstants:T,mds:O})}poseidon$1.validateOpts=validateOpts;function splitConstants(v,_){if(typeof _!="number")throw new Error("poseidonSplitConstants: wrong t");if(!Array.isArray(v)||v.length%_)throw new Error("poseidonSplitConstants: wrong rc");const x=[];let E=[];for(let A=0;A<v.length;A++)E.push(v[A]),E.length===_&&(x.push(E),E=[]);return x}poseidon$1.splitConstants=splitConstants;function poseidon(v){const{t:_,Fp:x,rounds:E,sboxFn:A,reversePartialPowIdx:P}=validateOpts(v),T=Math.floor(v.roundsFull/2),O=P?_-1:0,k=(U,N,H)=>(U=U.map((D,j)=>x.add(D,v.roundConstants[H][j])),N?U=U.map(D=>A(D)):U[O]=A(U[O]),U=v.mds.map(D=>D.reduce((j,V,X)=>x.add(j,x.mulN(V,U[X])),x.ZERO)),U),C=function(N){if(!Array.isArray(N)||N.length!==_)throw new Error(`Poseidon: wrong values (expected array of bigints with length ${_})`);N=N.map(D=>{if(typeof D!="bigint")throw new Error(`Poseidon: wrong value=${D} (${typeof D})`);return x.create(D)});let H=0;for(let D=0;D<T;D++)N=k(N,!0,H++);for(let D=0;D<v.roundsPartial;D++)N=k(N,!1,H++);for(let D=0;D<T;D++)N=k(N,!0,H++);if(H!==E)throw new Error(`Poseidon: wrong number of rounds: last round=${H}, total=${E}`);return N};return C.roundConstants=v.roundConstants,C}poseidon$1.poseidon=poseidon,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(He,We,Ze,$e){$e===void 0&&($e=Ze);var Te=Object.getOwnPropertyDescriptor(We,Ze);(!Te||("get"in Te?!We.__esModule:Te.writable||Te.configurable))&&(Te={enumerable:!0,get:function(){return We[Ze]}}),Object.defineProperty(He,$e,Te)}:function(He,We,Ze,$e){$e===void 0&&($e=Ze),He[$e]=We[Ze]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(He,We){Object.defineProperty(He,"default",{enumerable:!0,value:We})}:function(He,We){He.default=We}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(He){if(He&&He.__esModule)return He;var We={};if(He!=null)for(var Ze in He)Ze!=="default"&&Object.prototype.hasOwnProperty.call(He,Ze)&&_(We,He,Ze);return x(We,He),We};Object.defineProperty(v,"__esModule",{value:!0}),v.poseidonHashMany=v.poseidonHashSingle=v.poseidonHashFunc=v.poseidonHash=v.poseidonSmall=v.poseidonCreate=v.poseidonBasic=v._poseidonMDS=v.Fp251=v.Fp253=v.keccak=v.computeHashOnElements=v.hashChain=v.pedersen=v.getAccountPath=v.ethSigToPrivate=v.getStarkKey=v.grindKey=v.utils=v.Signature=v.ProjectivePoint=v.CURVE=v.verify=v.sign=v.getSharedSecret=v.getPublicKey=v._starkCurve=void 0;const A=sha3$1,P=sha256$6,T=utilsExports,O=modular,k=poseidon$1,C=weierstrass,U=E(utils$6),N=_shortw_utils,H=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),D=252;function j(He){for(;He[0]===0;)He=He.subarray(1);const We=He.length*8-D,Ze=U.bytesToNumberBE(He);return We>0?Ze>>BigInt(We):Ze}function V(He){return typeof He=="string"&&(He=J(He),He.length&1&&(He="0"+He)),U.hexToBytes(He)}const X=(0,C.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,O.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:H,nBitLength:D,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,N.getHash)(P.sha256),bits2int:j,bits2int_modN:He=>{const We=U.bytesToNumberBE(He).toString(16);return We.length===63&&(He=V(We+"0")),(0,O.mod)(j(He),H)}});v._starkCurve=X;function re(He){return U.ensureBytes("",typeof He=="string"?V(He):He)}function ee(He){return U.bytesToHex(re(He)).padStart(64,"0")}function fe(He,We=!1){return X.getPublicKey(ee(He),We)}v.getPublicKey=fe;function le(He,We){return X.getSharedSecret(ee(He),We)}v.getSharedSecret=le;function pe(He,We,Ze){return X.sign(re(He),ee(We),Ze)}v.sign=pe;function ie(He,We,Ze){const $e=He instanceof te?He:re(He);return X.verify($e,re(We),re(Ze))}v.verify=ie;const{CURVE:he,ProjectivePoint:ae,Signature:te,utils:ue}=X;v.CURVE=he,v.ProjectivePoint=ae,v.Signature=te,v.utils=ue;function ne(He){return`0x${U.bytesToHex(He.subarray(1)).replace(/^0+/gm,"")}`}function J(He){return He.replace(/^0x/i,"")}function q(He){return`0x${He.toString(16)}`}function F(He){const We=re(He),Ze=2n**256n,$e=Ze-(0,O.mod)(Ze,H);for(let Te=0;;Te++){const Ce=xe(U.concatBytes(We,U.numberToVarBytesBE(BigInt(Te))));if(Ce<$e)return(0,O.mod)(Ce,H).toString(16);if(Te===1e5)throw new Error("grindKey is broken: tried 100k vals")}}v.grindKey=F;function L(He){return ne(fe(He,!0))}v.getStarkKey=L;function Z(He){if(He=J(He),He.length!==130)throw new Error("Wrong ethereum signature");return F(He.substring(0,64))}v.ethSigToPrivate=Z;const Q=2n**31n-1n,de=He=>Number(He&Q);function ye(He,We,Ze,$e){const Te=de(xe(He)),Ce=de(xe(We)),ve=U.hexToNumber(J(Ze));return`m/2645'/${Te}'/${Ce}'/${de(ve)}'/${de(ve>>31n)}'/${$e}`}v.getAccountPath=ye;const oe=[new ae(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new ae(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new ae(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new ae(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new ae(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function se(He,We){const Ze=[];let $e=He;for(let Te=0;Te<248;Te++)Ze.push($e),$e=$e.double();$e=We;for(let Te=0;Te<4;Te++)Ze.push($e),$e=$e.double();return Ze}const Y=se(oe[1],oe[2]),ce=se(oe[3],oe[4]);function we(He){let We;if(typeof He=="bigint")We=He;else if(typeof He=="number"){if(!Number.isSafeInteger(He))throw new Error(`Invalid pedersenArg: ${He}`);We=BigInt(He)}else We=U.bytesToNumberBE(re(He));if(!(0n<=We&&We<X.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${We}`);return We}function Pe(He,We,Ze){let $e=we(We);for(let Te=0;Te<252;Te++){const Ce=Ze[Te];if(Ce.equals(He))throw new Error("Same point");($e&1n)!==0n&&(He=He.add(Ce)),$e>>=1n}return He}function Se(He,We){let Ze=oe[0];return Ze=Pe(Ze,He,Y),Ze=Pe(Ze,We,ce),ne(Ze.toRawBytes(!0))}v.pedersen=Se;function Be(He,We=Se){if(!Array.isArray(He)||He.length<1)throw new Error("data should be array of at least 1 element");return He.length===1?q(we(He[0])):Array.from(He).reverse().reduce((Ze,$e)=>We($e,Ze))}v.hashChain=Be;const Ie=(He,We=Se)=>[0,...He,He.length].reduce((Ze,$e)=>We(Ze,$e));v.computeHashOnElements=Ie;const Re=U.bitMask(250),Me=He=>U.bytesToNumberBE((0,A.keccak_256)(He))&Re;v.keccak=Me;const xe=He=>U.bytesToNumberBE((0,P.sha256)(He));v.Fp253=(0,O.Field)(BigInt("14474011154664525231415395255581126252639794253786371766033694892385558855681")),v.Fp251=(0,O.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Ee(He,We,Ze){const $e=He.fromBytes((0,P.sha256)((0,T.utf8ToBytes)(`${We}${Ze}`)));return He.create($e)}function Ue(He,We,Ze,$e=0){const Te=[],Ce=[];for(let ve=0;ve<Ze;ve++)Te.push(Ee(He,`${We}x`,$e*Ze+ve)),Ce.push(Ee(He,`${We}y`,$e*Ze+ve));if(new Set([...Te,...Ce]).size!==2*Ze)throw new Error("X and Y values are not distinct");return Te.map(ve=>Ce.map(be=>He.inv(He.sub(ve,be))))}v._poseidonMDS=Ue;const Ke=[[3,1,1],[1,-1,1],[1,1,-2]].map(He=>He.map(BigInt));function ze(He,We){if((0,O.validateField)(He.Fp),!Number.isSafeInteger(He.rate)||!Number.isSafeInteger(He.capacity))throw new Error(`Wrong poseidon opts: ${He}`);const Ze=He.rate+He.capacity,$e=He.roundsFull+He.roundsPartial,Te=[];for(let ve=0;ve<$e;ve++){const be=[];for(let ge=0;ge<Ze;ge++)be.push(Ee(He.Fp,"Hades",Ze*ve+ge));Te.push(be)}const Ce=(0,k.poseidon)({...He,t:Ze,sboxPower:3,reversePartialPowIdx:!0,mds:We,roundConstants:Te});return Ce.m=Ze,Ce.rate=He.rate,Ce.capacity=He.capacity,Ce}v.poseidonBasic=ze;function Ve(He,We=0){const Ze=He.rate+He.capacity;if(!Number.isSafeInteger(We))throw new Error(`Wrong mdsAttempt=${We}`);return ze(He,Ue(He.Fp,"HadesMDS",Ze,We))}v.poseidonCreate=Ve,v.poseidonSmall=ze({Fp:v.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Ke);function Je(He,We,Ze=v.poseidonSmall){return Ze([He,We,2n])[0]}v.poseidonHash=Je;function et(He,We,Ze=v.poseidonSmall){return U.numberToVarBytesBE(Je(U.bytesToNumberBE(He),U.bytesToNumberBE(We),Ze))}v.poseidonHashFunc=et;function Ge(He,We=v.poseidonSmall){return We([He,0n,1n])[0]}v.poseidonHashSingle=Ge;function ot(He,We=v.poseidonSmall){const{m:Ze,rate:$e}=We;if(!Array.isArray(He))throw new Error("bigint array expected in values");const Te=Array.from(He);for(Te.push(1n);Te.length%$e!==0;)Te.push(0n);let Ce=new Array(Ze).fill(0n);for(let ve=0;ve<Te.length;ve+=$e){for(let be=0;be<$e;be++)Ce[be]+=Te[ve+be];Ce=We(Ce)}return Ce[0]}v.poseidonHashMany=ot}(stark),function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(P,T,O,k){k===void 0&&(k=O);var C=Object.getOwnPropertyDescriptor(T,O);(!C||("get"in C?!T.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return T[O]}}),Object.defineProperty(P,k,C)}:function(P,T,O,k){k===void 0&&(k=O),P[k]=T[O]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(P,T){Object.defineProperty(P,"default",{enumerable:!0,value:T})}:function(P,T){P.default=T}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(P){if(P&&P.__esModule)return P;var T={};if(P!=null)for(var O in P)O!=="default"&&Object.prototype.hasOwnProperty.call(P,O)&&_(T,P,O);return x(T,P),T};Object.defineProperty(v,"__esModule",{value:!0}),v.bytesToHex=v.hexToBytes=v.stark=v.secp256k1=void 0,v.secp256k1=E(secp256k1$1),v.stark=E(stark);var A=utils$6;Object.defineProperty(v,"hexToBytes",{enumerable:!0,get:function(){return A.hexToBytes}}),Object.defineProperty(v,"bytesToHex",{enumerable:!0,get:function(){return A.bytesToHex}})}(schnorr$3);var hasRequiredSignutil;function requireSignutil(){if(hasRequiredSignutil)return signutil;hasRequiredSignutil=1;var v=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(E,A,P,T){T===void 0&&(T=P);var O=Object.getOwnPropertyDescriptor(A,P);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[P]}}),Object.defineProperty(E,T,O)}:function(E,A,P,T){T===void 0&&(T=P),E[T]=A[P]}),_=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(E,A){Object.defineProperty(E,"default",{enumerable:!0,value:A})}:function(E,A){E.default=A}),x=commonjsGlobal&&commonjsGlobal.__importStar||function(E){if(E&&E.__esModule)return E;var A={};if(E!=null)for(var P in E)P!=="default"&&Object.prototype.hasOwnProperty.call(E,P)&&v(A,E,P);return _(A,E),A};return Object.defineProperty(signutil,"__esModule",{value:!0}),signutil.schnorr=signutil.p256=signutil.ed25519=signutil.secp256k1=void 0,signutil.secp256k1=x(requireSecp256k1()),signutil.ed25519=x(requireEd25519()),signutil.p256=x(p256),signutil.schnorr=x(schnorr$3),signutil}var math={},decimal={},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(decimal,"__esModule",{value:!0}),decimal.Decimal=void 0;const bn_js_1$1=__importDefault$1(bnExports$2),maxFractionalDigits=100;class Decimal{static fromUserInput(_,x){Decimal.verifyFractionalDigits(x);const E=_.match(/[^0-9.]/);if(E)throw new Error(`Invalid character at position ${E.index+1}`);let A,P;if(_.search(/\./)===-1)A=_,P="";else{const O=_.split(".");switch(O.length){case 0:case 1:throw new Error("Fewer than two elements in split result. This must not happen here.");case 2:if(!O[1])throw new Error("Fractional part missing");A=O[0],P=O[1].replace(/0+$/,"");break;default:throw new Error("More than one separator found")}}if(P.length>x)throw new Error("Got more fractional digits than supported");const T=`${A}${P.padEnd(x,"0")}`;return new Decimal(T,x)}static fromAtomics(_,x){return Decimal.verifyFractionalDigits(x),new Decimal(_,x)}static zero(_){return Decimal.verifyFractionalDigits(_),new Decimal("0",_)}static one(_){return Decimal.verifyFractionalDigits(_),new Decimal("1"+"0".repeat(_),_)}static verifyFractionalDigits(_){if(!Number.isInteger(_))throw new Error("Fractional digits is not an integer");if(_<0)throw new Error("Fractional digits must not be negative");if(_>maxFractionalDigits)throw new Error(`Fractional digits must not exceed ${maxFractionalDigits}`)}static compare(_,x){if(_.fractionalDigits!==x.fractionalDigits)throw new Error("Fractional digits do not match");return _.data.atomics.cmp(new bn_js_1$1.default(x.atomics))}get atomics(){return this.data.atomics.toString()}get fractionalDigits(){return this.data.fractionalDigits}constructor(_,x){this.data={atomics:new bn_js_1$1.default(_),fractionalDigits:x}}toString(){const _=new bn_js_1$1.default(10).pow(new bn_js_1$1.default(this.data.fractionalDigits)),x=this.data.atomics.div(_),E=this.data.atomics.mod(_);if(E.isZero())return x.toString();{const P=E.toString().padStart(this.data.fractionalDigits,"0").replace(/0+$/,"");return`${x.toString()}.${P}`}}toFloatApproximation(){const _=Number(this.toString());if(Number.isNaN(_))throw new Error("Conversion to number failed");return _}plus(_){if(this.fractionalDigits!==_.fractionalDigits)throw new Error("Fractional digits do not match");const x=this.data.atomics.add(new bn_js_1$1.default(_.atomics));return new Decimal(x.toString(),this.fractionalDigits)}minus(_){if(this.fractionalDigits!==_.fractionalDigits)throw new Error("Fractional digits do not match");const x=this.data.atomics.sub(new bn_js_1$1.default(_.atomics));if(x.ltn(0))throw new Error("Difference must not be negative");return new Decimal(x.toString(),this.fractionalDigits)}multiply(_){const x=this.data.atomics.mul(new bn_js_1$1.default(_.toString()));return new Decimal(x.toString(),this.fractionalDigits)}equals(_){return Decimal.compare(this,_)===0}isLessThan(_){return Decimal.compare(this,_)<0}isLessThanOrEqual(_){return Decimal.compare(this,_)<=0}isGreaterThan(_){return Decimal.compare(this,_)>0}isGreaterThanOrEqual(_){return Decimal.compare(this,_)>=0}}decimal.Decimal=Decimal;var integers={},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(integers,"__esModule",{value:!0}),integers.Uint64=integers.Uint53=integers.Int53=integers.Uint32=void 0;const bn_js_1=__importDefault(bnExports$2),uint64MaxValue=new bn_js_1.default("18446744073709551615",10,"be");class Uint32{static fromBigEndianBytes(_){return Uint32.fromBytes(_)}static fromBytes(_,x="be"){if(_.length!==4)throw new Error("Invalid input length. Expected 4 bytes.");for(let A=0;A<_.length;++A)if(!Number.isInteger(_[A])||_[A]>255||_[A]<0)throw new Error("Invalid value in byte. Found: "+_[A]);const E=x==="be"?_:Array.from(_).reverse();return new Uint32(E[0]*2**24+E[1]*2**16+E[2]*2**8+E[3])}static fromString(_){if(!_.match(/^[0-9]+$/))throw new Error("Invalid string format");return new Uint32(Number.parseInt(_,10))}constructor(_){if(Number.isNaN(_))throw new Error("Input is not a number");if(!Number.isInteger(_))throw new Error("Input is not an integer");if(_<0||_>4294967295)throw new Error("Input not in uint32 range: "+_.toString());this.data=_}toBytesBigEndian(){return new Uint8Array([Math.floor(this.data/2**24)&255,Math.floor(this.data/2**16)&255,Math.floor(this.data/2**8)&255,Math.floor(this.data/2**0)&255])}toBytesLittleEndian(){return new Uint8Array([Math.floor(this.data/2**0)&255,Math.floor(this.data/2**8)&255,Math.floor(this.data/2**16)&255,Math.floor(this.data/2**24)&255])}toNumber(){return this.data}toString(){return this.data.toString()}}integers.Uint32=Uint32;class Int53{static fromString(_){if(!_.match(/^-?[0-9]+$/))throw new Error("Invalid string format");return new Int53(Number.parseInt(_,10))}constructor(_){if(Number.isNaN(_))throw new Error("Input is not a number");if(!Number.isInteger(_))throw new Error("Input is not an integer");if(_<Number.MIN_SAFE_INTEGER||_>Number.MAX_SAFE_INTEGER)throw new Error("Input not in int53 range: "+_.toString());this.data=_}toNumber(){return this.data}toString(){return this.data.toString()}}integers.Int53=Int53;class Uint53{static fromString(_){const x=Int53.fromString(_);return new Uint53(x.toNumber())}constructor(_){const x=new Int53(_);if(x.toNumber()<0)throw new Error("Input is negative");this.data=x}toNumber(){return this.data.toNumber()}toString(){return this.data.toString()}}integers.Uint53=Uint53;class Uint64{static fromBytesBigEndian(_){return Uint64.fromBytes(_)}static fromBytes(_,x="be"){if(_.length!==8)throw new Error("Invalid input length. Expected 8 bytes.");for(let A=0;A<_.length;++A)if(!Number.isInteger(_[A])||_[A]>255||_[A]<0)throw new Error("Invalid value in byte. Found: "+_[A]);const E=x==="be"?Array.from(_):Array.from(_).reverse();return new Uint64(new bn_js_1.default(E))}static fromString(_){if(!_.match(/^[0-9]+$/))throw new Error("Invalid string format");return new Uint64(new bn_js_1.default(_,10,"be"))}static fromNumber(_){if(Number.isNaN(_))throw new Error("Input is not a number");if(!Number.isInteger(_))throw new Error("Input is not an integer");let x;try{x=new bn_js_1.default(_)}catch{throw new Error("Input is not a safe integer")}return new Uint64(x)}constructor(_){if(_.isNeg())throw new Error("Input is negative");if(_.gt(uint64MaxValue))throw new Error("Input exceeds uint64 range");this.data=_}toBytesBigEndian(){return Uint8Array.from(this.data.toArray("be",8))}toBytesLittleEndian(){return Uint8Array.from(this.data.toArray("le",8))}toString(){return this.data.toString(10)}toNumber(){return this.data.toNumber()}}integers.Uint64=Uint64,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.Uint64=v.Uint53=v.Uint32=v.Int53=v.Decimal=void 0;var _=decimal;Object.defineProperty(v,"Decimal",{enumerable:!0,get:function(){return _.Decimal}});var x=integers;Object.defineProperty(v,"Int53",{enumerable:!0,get:function(){return x.Int53}}),Object.defineProperty(v,"Uint32",{enumerable:!0,get:function(){return x.Uint32}}),Object.defineProperty(v,"Uint53",{enumerable:!0,get:function(){return x.Uint53}}),Object.defineProperty(v,"Uint64",{enumerable:!0,get:function(){return x.Uint64}})}(math);var isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$4=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(v){var _,x,E,A=ee.prototype={constructor:ee,toString:null,valueOf:null},P=new ee(1),T=20,O=4,k=-7,C=21,U=-1e7,N=1e7,H=!1,D=1,j=0,V={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},X="0123456789abcdefghijklmnopqrstuvwxyz",re=!0;function ee(ae,te){var ue,ne,J,q,F,L,Z,Q,de=this;if(!(de instanceof ee))return new ee(ae,te);if(te==null){if(ae&&ae._isBigNumber===!0){de.s=ae.s,!ae.c||ae.e>N?de.c=de.e=null:ae.e<U?de.c=[de.e=0]:(de.e=ae.e,de.c=ae.c.slice());return}if((L=typeof ae=="number")&&ae*0==0){if(de.s=1/ae<0?(ae=-ae,-1):1,ae===~~ae){for(q=0,F=ae;F>=10;F/=10,q++);q>N?de.c=de.e=null:(de.e=q,de.c=[ae]);return}Q=String(ae)}else{if(!isNumeric.test(Q=String(ae)))return E(de,Q,L);de.s=Q.charCodeAt(0)==45?(Q=Q.slice(1),-1):1}(q=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),(F=Q.search(/e/i))>0?(q<0&&(q=F),q+=+Q.slice(F+1),Q=Q.substring(0,F)):q<0&&(q=Q.length)}else{if(intCheck(te,2,X.length,"Base"),te==10&&re)return de=new ee(ae),ie(de,T+de.e+1,O);if(Q=String(ae),L=typeof ae=="number"){if(ae*0!=0)return E(de,Q,L,te);if(de.s=1/ae<0?(Q=Q.slice(1),-1):1,ee.DEBUG&&Q.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+ae)}else de.s=Q.charCodeAt(0)===45?(Q=Q.slice(1),-1):1;for(ue=X.slice(0,te),q=F=0,Z=Q.length;F<Z;F++)if(ue.indexOf(ne=Q.charAt(F))<0){if(ne=="."){if(F>q){q=Z;continue}}else if(!J&&(Q==Q.toUpperCase()&&(Q=Q.toLowerCase())||Q==Q.toLowerCase()&&(Q=Q.toUpperCase()))){J=!0,F=-1,q=0;continue}return E(de,String(ae),L,te)}L=!1,Q=x(Q,te,10,de.s),(q=Q.indexOf("."))>-1?Q=Q.replace(".",""):q=Q.length}for(F=0;Q.charCodeAt(F)===48;F++);for(Z=Q.length;Q.charCodeAt(--Z)===48;);if(Q=Q.slice(F,++Z)){if(Z-=F,L&&ee.DEBUG&&Z>15&&(ae>MAX_SAFE_INTEGER$4||ae!==mathfloor(ae)))throw Error(tooManyDigits+de.s*ae);if((q=q-F-1)>N)de.c=de.e=null;else if(q<U)de.c=[de.e=0];else{if(de.e=q,de.c=[],F=(q+1)%LOG_BASE,q<0&&(F+=LOG_BASE),F<Z){for(F&&de.c.push(+Q.slice(0,F)),Z-=LOG_BASE;F<Z;)de.c.push(+Q.slice(F,F+=LOG_BASE));F=LOG_BASE-(Q=Q.slice(F)).length}else F-=Z;for(;F--;Q+="0");de.c.push(+Q)}}else de.c=[de.e=0]}ee.clone=clone,ee.ROUND_UP=0,ee.ROUND_DOWN=1,ee.ROUND_CEIL=2,ee.ROUND_FLOOR=3,ee.ROUND_HALF_UP=4,ee.ROUND_HALF_DOWN=5,ee.ROUND_HALF_EVEN=6,ee.ROUND_HALF_CEIL=7,ee.ROUND_HALF_FLOOR=8,ee.EUCLID=9,ee.config=ee.set=function(ae){var te,ue;if(ae!=null)if(typeof ae=="object"){if(ae.hasOwnProperty(te="DECIMAL_PLACES")&&(ue=ae[te],intCheck(ue,0,MAX,te),T=ue),ae.hasOwnProperty(te="ROUNDING_MODE")&&(ue=ae[te],intCheck(ue,0,8,te),O=ue),ae.hasOwnProperty(te="EXPONENTIAL_AT")&&(ue=ae[te],ue&&ue.pop?(intCheck(ue[0],-MAX,0,te),intCheck(ue[1],0,MAX,te),k=ue[0],C=ue[1]):(intCheck(ue,-MAX,MAX,te),k=-(C=ue<0?-ue:ue))),ae.hasOwnProperty(te="RANGE"))if(ue=ae[te],ue&&ue.pop)intCheck(ue[0],-MAX,-1,te),intCheck(ue[1],1,MAX,te),U=ue[0],N=ue[1];else if(intCheck(ue,-MAX,MAX,te),ue)U=-(N=ue<0?-ue:ue);else throw Error(bignumberError+te+" cannot be zero: "+ue);if(ae.hasOwnProperty(te="CRYPTO"))if(ue=ae[te],ue===!!ue)if(ue)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))H=ue;else throw H=!ue,Error(bignumberError+"crypto unavailable");else H=ue;else throw Error(bignumberError+te+" not true or false: "+ue);if(ae.hasOwnProperty(te="MODULO_MODE")&&(ue=ae[te],intCheck(ue,0,9,te),D=ue),ae.hasOwnProperty(te="POW_PRECISION")&&(ue=ae[te],intCheck(ue,0,MAX,te),j=ue),ae.hasOwnProperty(te="FORMAT"))if(ue=ae[te],typeof ue=="object")V=ue;else throw Error(bignumberError+te+" not an object: "+ue);if(ae.hasOwnProperty(te="ALPHABET"))if(ue=ae[te],typeof ue=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ue))re=ue.slice(0,10)=="0123456789",X=ue;else throw Error(bignumberError+te+" invalid: "+ue)}else throw Error(bignumberError+"Object expected: "+ae);return{DECIMAL_PLACES:T,ROUNDING_MODE:O,EXPONENTIAL_AT:[k,C],RANGE:[U,N],CRYPTO:H,MODULO_MODE:D,POW_PRECISION:j,FORMAT:V,ALPHABET:X}},ee.isBigNumber=function(ae){if(!ae||ae._isBigNumber!==!0)return!1;if(!ee.DEBUG)return!0;var te,ue,ne=ae.c,J=ae.e,q=ae.s;e:if({}.toString.call(ne)=="[object Array]"){if((q===1||q===-1)&&J>=-MAX&&J<=MAX&&J===mathfloor(J)){if(ne[0]===0){if(J===0&&ne.length===1)return!0;break e}if(te=(J+1)%LOG_BASE,te<1&&(te+=LOG_BASE),String(ne[0]).length==te){for(te=0;te<ne.length;te++)if(ue=ne[te],ue<0||ue>=BASE||ue!==mathfloor(ue))break e;if(ue!==0)return!0}}}else if(ne===null&&J===null&&(q===null||q===1||q===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+ae)},ee.maximum=ee.max=function(){return le(arguments,-1)},ee.minimum=ee.min=function(){return le(arguments,1)},ee.random=function(){var ae=9007199254740992,te=Math.random()*ae&2097151?function(){return mathfloor(Math.random()*ae)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ue){var ne,J,q,F,L,Z=0,Q=[],de=new ee(P);if(ue==null?ue=T:intCheck(ue,0,MAX),F=mathceil(ue/LOG_BASE),H)if(crypto.getRandomValues){for(ne=crypto.getRandomValues(new Uint32Array(F*=2));Z<F;)L=ne[Z]*131072+(ne[Z+1]>>>11),L>=9e15?(J=crypto.getRandomValues(new Uint32Array(2)),ne[Z]=J[0],ne[Z+1]=J[1]):(Q.push(L%1e14),Z+=2);Z=F/2}else if(crypto.randomBytes){for(ne=crypto.randomBytes(F*=7);Z<F;)L=(ne[Z]&31)*281474976710656+ne[Z+1]*1099511627776+ne[Z+2]*4294967296+ne[Z+3]*16777216+(ne[Z+4]<<16)+(ne[Z+5]<<8)+ne[Z+6],L>=9e15?crypto.randomBytes(7).copy(ne,Z):(Q.push(L%1e14),Z+=7);Z=F/7}else throw H=!1,Error(bignumberError+"crypto unavailable");if(!H)for(;Z<F;)L=te(),L<9e15&&(Q[Z++]=L%1e14);for(F=Q[--Z],ue%=LOG_BASE,F&&ue&&(L=POWS_TEN[LOG_BASE-ue],Q[Z]=mathfloor(F/L)*L);Q[Z]===0;Q.pop(),Z--);if(Z<0)Q=[q=0];else{for(q=-1;Q[0]===0;Q.splice(0,1),q-=LOG_BASE);for(Z=1,L=Q[0];L>=10;L/=10,Z++);Z<LOG_BASE&&(q-=LOG_BASE-Z)}return de.e=q,de.c=Q,de}}(),ee.sum=function(){for(var ae=1,te=arguments,ue=new ee(te[0]);ae<te.length;)ue=ue.plus(te[ae++]);return ue},x=function(){var ae="0123456789";function te(ue,ne,J,q){for(var F,L=[0],Z,Q=0,de=ue.length;Q<de;){for(Z=L.length;Z--;L[Z]*=ne);for(L[0]+=q.indexOf(ue.charAt(Q++)),F=0;F<L.length;F++)L[F]>J-1&&(L[F+1]==null&&(L[F+1]=0),L[F+1]+=L[F]/J|0,L[F]%=J)}return L.reverse()}return function(ue,ne,J,q,F){var L,Z,Q,de,ye,oe,se,Y,ce=ue.indexOf("."),we=T,Pe=O;for(ce>=0&&(de=j,j=0,ue=ue.replace(".",""),Y=new ee(ne),oe=Y.pow(ue.length-ce),j=de,Y.c=te(toFixedPoint(coeffToString(oe.c),oe.e,"0"),10,J,ae),Y.e=Y.c.length),se=te(ue,ne,J,F?(L=X,ae):(L=ae,X)),Q=de=se.length;se[--de]==0;se.pop());if(!se[0])return L.charAt(0);if(ce<0?--Q:(oe.c=se,oe.e=Q,oe.s=q,oe=_(oe,Y,we,Pe,J),se=oe.c,ye=oe.r,Q=oe.e),Z=Q+we+1,ce=se[Z],de=J/2,ye=ye||Z<0||se[Z+1]!=null,ye=Pe<4?(ce!=null||ye)&&(Pe==0||Pe==(oe.s<0?3:2)):ce>de||ce==de&&(Pe==4||ye||Pe==6&&se[Z-1]&1||Pe==(oe.s<0?8:7)),Z<1||!se[0])ue=ye?toFixedPoint(L.charAt(1),-we,L.charAt(0)):L.charAt(0);else{if(se.length=Z,ye)for(--J;++se[--Z]>J;)se[Z]=0,Z||(++Q,se=[1].concat(se));for(de=se.length;!se[--de];);for(ce=0,ue="";ce<=de;ue+=L.charAt(se[ce++]));ue=toFixedPoint(ue,Q,L.charAt(0))}return ue}}(),_=function(){function ae(ne,J,q){var F,L,Z,Q,de=0,ye=ne.length,oe=J%SQRT_BASE,se=J/SQRT_BASE|0;for(ne=ne.slice();ye--;)Z=ne[ye]%SQRT_BASE,Q=ne[ye]/SQRT_BASE|0,F=se*Z+Q*oe,L=oe*Z+F%SQRT_BASE*SQRT_BASE+de,de=(L/q|0)+(F/SQRT_BASE|0)+se*Q,ne[ye]=L%q;return de&&(ne=[de].concat(ne)),ne}function te(ne,J,q,F){var L,Z;if(q!=F)Z=q>F?1:-1;else for(L=Z=0;L<q;L++)if(ne[L]!=J[L]){Z=ne[L]>J[L]?1:-1;break}return Z}function ue(ne,J,q,F){for(var L=0;q--;)ne[q]-=L,L=ne[q]<J[q]?1:0,ne[q]=L*F+ne[q]-J[q];for(;!ne[0]&&ne.length>1;ne.splice(0,1));}return function(ne,J,q,F,L){var Z,Q,de,ye,oe,se,Y,ce,we,Pe,Se,Be,Ie,Re,Me,xe,Ee,Ue=ne.s==J.s?1:-1,Ke=ne.c,ze=J.c;if(!Ke||!Ke[0]||!ze||!ze[0])return new ee(!ne.s||!J.s||(Ke?ze&&Ke[0]==ze[0]:!ze)?NaN:Ke&&Ke[0]==0||!ze?Ue*0:Ue/0);for(ce=new ee(Ue),we=ce.c=[],Q=ne.e-J.e,Ue=q+Q+1,L||(L=BASE,Q=bitFloor(ne.e/LOG_BASE)-bitFloor(J.e/LOG_BASE),Ue=Ue/LOG_BASE|0),de=0;ze[de]==(Ke[de]||0);de++);if(ze[de]>(Ke[de]||0)&&Q--,Ue<0)we.push(1),ye=!0;else{for(Re=Ke.length,xe=ze.length,de=0,Ue+=2,oe=mathfloor(L/(ze[0]+1)),oe>1&&(ze=ae(ze,oe,L),Ke=ae(Ke,oe,L),xe=ze.length,Re=Ke.length),Ie=xe,Pe=Ke.slice(0,xe),Se=Pe.length;Se<xe;Pe[Se++]=0);Ee=ze.slice(),Ee=[0].concat(Ee),Me=ze[0],ze[1]>=L/2&&Me++;do{if(oe=0,Z=te(ze,Pe,xe,Se),Z<0){if(Be=Pe[0],xe!=Se&&(Be=Be*L+(Pe[1]||0)),oe=mathfloor(Be/Me),oe>1)for(oe>=L&&(oe=L-1),se=ae(ze,oe,L),Y=se.length,Se=Pe.length;te(se,Pe,Y,Se)==1;)oe--,ue(se,xe<Y?Ee:ze,Y,L),Y=se.length,Z=1;else oe==0&&(Z=oe=1),se=ze.slice(),Y=se.length;if(Y<Se&&(se=[0].concat(se)),ue(Pe,se,Se,L),Se=Pe.length,Z==-1)for(;te(ze,Pe,xe,Se)<1;)oe++,ue(Pe,xe<Se?Ee:ze,Se,L),Se=Pe.length}else Z===0&&(oe++,Pe=[0]);we[de++]=oe,Pe[0]?Pe[Se++]=Ke[Ie]||0:(Pe=[Ke[Ie]],Se=1)}while((Ie++<Re||Pe[0]!=null)&&Ue--);ye=Pe[0]!=null,we[0]||we.splice(0,1)}if(L==BASE){for(de=1,Ue=we[0];Ue>=10;Ue/=10,de++);ie(ce,q+(ce.e=de+Q*LOG_BASE-1)+1,F,ye)}else ce.e=Q,ce.r=+ye;return ce}}();function fe(ae,te,ue,ne){var J,q,F,L,Z;if(ue==null?ue=O:intCheck(ue,0,8),!ae.c)return ae.toString();if(J=ae.c[0],F=ae.e,te==null)Z=coeffToString(ae.c),Z=ne==1||ne==2&&(F<=k||F>=C)?toExponential(Z,F):toFixedPoint(Z,F,"0");else if(ae=ie(new ee(ae),te,ue),q=ae.e,Z=coeffToString(ae.c),L=Z.length,ne==1||ne==2&&(te<=q||q<=k)){for(;L<te;Z+="0",L++);Z=toExponential(Z,q)}else if(te-=F,Z=toFixedPoint(Z,q,"0"),q+1>L){if(--te>0)for(Z+=".";te--;Z+="0");}else if(te+=q-L,te>0)for(q+1==L&&(Z+=".");te--;Z+="0");return ae.s<0&&J?"-"+Z:Z}function le(ae,te){for(var ue,ne,J=1,q=new ee(ae[0]);J<ae.length;J++)ne=new ee(ae[J]),(!ne.s||(ue=compare(q,ne))===te||ue===0&&q.s===te)&&(q=ne);return q}function pe(ae,te,ue){for(var ne=1,J=te.length;!te[--J];te.pop());for(J=te[0];J>=10;J/=10,ne++);return(ue=ne+ue*LOG_BASE-1)>N?ae.c=ae.e=null:ue<U?ae.c=[ae.e=0]:(ae.e=ue,ae.c=te),ae}E=function(){var ae=/^(-?)0([xbo])(?=\w[\w.]*$)/i,te=/^([^.]+)\.$/,ue=/^\.([^.]+)$/,ne=/^-?(Infinity|NaN)$/,J=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,F,L,Z){var Q,de=L?F:F.replace(J,"");if(ne.test(de))q.s=isNaN(de)?null:de<0?-1:1;else{if(!L&&(de=de.replace(ae,function(ye,oe,se){return Q=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!Z||Z==Q?oe:ye}),Z&&(Q=Z,de=de.replace(te,"$1").replace(ue,"0.$1")),F!=de))return new ee(de,Q);if(ee.DEBUG)throw Error(bignumberError+"Not a"+(Z?" base "+Z:"")+" number: "+F);q.s=null}q.c=q.e=null}}();function ie(ae,te,ue,ne){var J,q,F,L,Z,Q,de,ye=ae.c,oe=POWS_TEN;if(ye){e:{for(J=1,L=ye[0];L>=10;L/=10,J++);if(q=te-J,q<0)q+=LOG_BASE,F=te,Z=ye[Q=0],de=mathfloor(Z/oe[J-F-1]%10);else if(Q=mathceil((q+1)/LOG_BASE),Q>=ye.length)if(ne){for(;ye.length<=Q;ye.push(0));Z=de=0,J=1,q%=LOG_BASE,F=q-LOG_BASE+1}else break e;else{for(Z=L=ye[Q],J=1;L>=10;L/=10,J++);q%=LOG_BASE,F=q-LOG_BASE+J,de=F<0?0:mathfloor(Z/oe[J-F-1]%10)}if(ne=ne||te<0||ye[Q+1]!=null||(F<0?Z:Z%oe[J-F-1]),ne=ue<4?(de||ne)&&(ue==0||ue==(ae.s<0?3:2)):de>5||de==5&&(ue==4||ne||ue==6&&(q>0?F>0?Z/oe[J-F]:0:ye[Q-1])%10&1||ue==(ae.s<0?8:7)),te<1||!ye[0])return ye.length=0,ne?(te-=ae.e+1,ye[0]=oe[(LOG_BASE-te%LOG_BASE)%LOG_BASE],ae.e=-te||0):ye[0]=ae.e=0,ae;if(q==0?(ye.length=Q,L=1,Q--):(ye.length=Q+1,L=oe[LOG_BASE-q],ye[Q]=F>0?mathfloor(Z/oe[J-F]%oe[F])*L:0),ne)for(;;)if(Q==0){for(q=1,F=ye[0];F>=10;F/=10,q++);for(F=ye[0]+=L,L=1;F>=10;F/=10,L++);q!=L&&(ae.e++,ye[0]==BASE&&(ye[0]=1));break}else{if(ye[Q]+=L,ye[Q]!=BASE)break;ye[Q--]=0,L=1}for(q=ye.length;ye[--q]===0;ye.pop());}ae.e>N?ae.c=ae.e=null:ae.e<U&&(ae.c=[ae.e=0])}return ae}function he(ae){var te,ue=ae.e;return ue===null?ae.toString():(te=coeffToString(ae.c),te=ue<=k||ue>=C?toExponential(te,ue):toFixedPoint(te,ue,"0"),ae.s<0?"-"+te:te)}return A.absoluteValue=A.abs=function(){var ae=new ee(this);return ae.s<0&&(ae.s=1),ae},A.comparedTo=function(ae,te){return compare(this,new ee(ae,te))},A.decimalPlaces=A.dp=function(ae,te){var ue,ne,J,q=this;if(ae!=null)return intCheck(ae,0,MAX),te==null?te=O:intCheck(te,0,8),ie(new ee(q),ae+q.e+1,te);if(!(ue=q.c))return null;if(ne=((J=ue.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,J=ue[J])for(;J%10==0;J/=10,ne--);return ne<0&&(ne=0),ne},A.dividedBy=A.div=function(ae,te){return _(this,new ee(ae,te),T,O)},A.dividedToIntegerBy=A.idiv=function(ae,te){return _(this,new ee(ae,te),0,1)},A.exponentiatedBy=A.pow=function(ae,te){var ue,ne,J,q,F,L,Z,Q,de,ye=this;if(ae=new ee(ae),ae.c&&!ae.isInteger())throw Error(bignumberError+"Exponent not an integer: "+he(ae));if(te!=null&&(te=new ee(te)),L=ae.e>14,!ye.c||!ye.c[0]||ye.c[0]==1&&!ye.e&&ye.c.length==1||!ae.c||!ae.c[0])return de=new ee(Math.pow(+he(ye),L?ae.s*(2-isOdd(ae)):+he(ae))),te?de.mod(te):de;if(Z=ae.s<0,te){if(te.c?!te.c[0]:!te.s)return new ee(NaN);ne=!Z&&ye.isInteger()&&te.isInteger(),ne&&(ye=ye.mod(te))}else{if(ae.e>9&&(ye.e>0||ye.e<-1||(ye.e==0?ye.c[0]>1||L&&ye.c[1]>=24e7:ye.c[0]<8e13||L&&ye.c[0]<=9999975e7)))return q=ye.s<0&&isOdd(ae)?-0:0,ye.e>-1&&(q=1/q),new ee(Z?1/q:q);j&&(q=mathceil(j/LOG_BASE+2))}for(L?(ue=new ee(.5),Z&&(ae.s=1),Q=isOdd(ae)):(J=Math.abs(+he(ae)),Q=J%2),de=new ee(P);;){if(Q){if(de=de.times(ye),!de.c)break;q?de.c.length>q&&(de.c.length=q):ne&&(de=de.mod(te))}if(J){if(J=mathfloor(J/2),J===0)break;Q=J%2}else if(ae=ae.times(ue),ie(ae,ae.e+1,1),ae.e>14)Q=isOdd(ae);else{if(J=+he(ae),J===0)break;Q=J%2}ye=ye.times(ye),q?ye.c&&ye.c.length>q&&(ye.c.length=q):ne&&(ye=ye.mod(te))}return ne?de:(Z&&(de=P.div(de)),te?de.mod(te):q?ie(de,j,O,F):de)},A.integerValue=function(ae){var te=new ee(this);return ae==null?ae=O:intCheck(ae,0,8),ie(te,te.e+1,ae)},A.isEqualTo=A.eq=function(ae,te){return compare(this,new ee(ae,te))===0},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(ae,te){return compare(this,new ee(ae,te))>0},A.isGreaterThanOrEqualTo=A.gte=function(ae,te){return(te=compare(this,new ee(ae,te)))===1||te===0},A.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},A.isLessThan=A.lt=function(ae,te){return compare(this,new ee(ae,te))<0},A.isLessThanOrEqualTo=A.lte=function(ae,te){return(te=compare(this,new ee(ae,te)))===-1||te===0},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&this.c[0]==0},A.minus=function(ae,te){var ue,ne,J,q,F=this,L=F.s;if(ae=new ee(ae,te),te=ae.s,!L||!te)return new ee(NaN);if(L!=te)return ae.s=-te,F.plus(ae);var Z=F.e/LOG_BASE,Q=ae.e/LOG_BASE,de=F.c,ye=ae.c;if(!Z||!Q){if(!de||!ye)return de?(ae.s=-te,ae):new ee(ye?F:NaN);if(!de[0]||!ye[0])return ye[0]?(ae.s=-te,ae):new ee(de[0]?F:O==3?-0:0)}if(Z=bitFloor(Z),Q=bitFloor(Q),de=de.slice(),L=Z-Q){for((q=L<0)?(L=-L,J=de):(Q=Z,J=ye),J.reverse(),te=L;te--;J.push(0));J.reverse()}else for(ne=(q=(L=de.length)<(te=ye.length))?L:te,L=te=0;te<ne;te++)if(de[te]!=ye[te]){q=de[te]<ye[te];break}if(q&&(J=de,de=ye,ye=J,ae.s=-ae.s),te=(ne=ye.length)-(ue=de.length),te>0)for(;te--;de[ue++]=0);for(te=BASE-1;ne>L;){if(de[--ne]<ye[ne]){for(ue=ne;ue&&!de[--ue];de[ue]=te);--de[ue],de[ne]+=BASE}de[ne]-=ye[ne]}for(;de[0]==0;de.splice(0,1),--Q);return de[0]?pe(ae,de,Q):(ae.s=O==3?-1:1,ae.c=[ae.e=0],ae)},A.modulo=A.mod=function(ae,te){var ue,ne,J=this;return ae=new ee(ae,te),!J.c||!ae.s||ae.c&&!ae.c[0]?new ee(NaN):!ae.c||J.c&&!J.c[0]?new ee(J):(D==9?(ne=ae.s,ae.s=1,ue=_(J,ae,0,3),ae.s=ne,ue.s*=ne):ue=_(J,ae,0,D),ae=J.minus(ue.times(ae)),!ae.c[0]&&D==1&&(ae.s=J.s),ae)},A.multipliedBy=A.times=function(ae,te){var ue,ne,J,q,F,L,Z,Q,de,ye,oe,se,Y,ce,we,Pe=this,Se=Pe.c,Be=(ae=new ee(ae,te)).c;if(!Se||!Be||!Se[0]||!Be[0])return!Pe.s||!ae.s||Se&&!Se[0]&&!Be||Be&&!Be[0]&&!Se?ae.c=ae.e=ae.s=null:(ae.s*=Pe.s,!Se||!Be?ae.c=ae.e=null:(ae.c=[0],ae.e=0)),ae;for(ne=bitFloor(Pe.e/LOG_BASE)+bitFloor(ae.e/LOG_BASE),ae.s*=Pe.s,Z=Se.length,ye=Be.length,Z<ye&&(Y=Se,Se=Be,Be=Y,J=Z,Z=ye,ye=J),J=Z+ye,Y=[];J--;Y.push(0));for(ce=BASE,we=SQRT_BASE,J=ye;--J>=0;){for(ue=0,oe=Be[J]%we,se=Be[J]/we|0,F=Z,q=J+F;q>J;)Q=Se[--F]%we,de=Se[F]/we|0,L=se*Q+de*oe,Q=oe*Q+L%we*we+Y[q]+ue,ue=(Q/ce|0)+(L/we|0)+se*de,Y[q--]=Q%ce;Y[q]=ue}return ue?++ne:Y.splice(0,1),pe(ae,Y,ne)},A.negated=function(){var ae=new ee(this);return ae.s=-ae.s||null,ae},A.plus=function(ae,te){var ue,ne=this,J=ne.s;if(ae=new ee(ae,te),te=ae.s,!J||!te)return new ee(NaN);if(J!=te)return ae.s=-te,ne.minus(ae);var q=ne.e/LOG_BASE,F=ae.e/LOG_BASE,L=ne.c,Z=ae.c;if(!q||!F){if(!L||!Z)return new ee(J/0);if(!L[0]||!Z[0])return Z[0]?ae:new ee(L[0]?ne:J*0)}if(q=bitFloor(q),F=bitFloor(F),L=L.slice(),J=q-F){for(J>0?(F=q,ue=Z):(J=-J,ue=L),ue.reverse();J--;ue.push(0));ue.reverse()}for(J=L.length,te=Z.length,J-te<0&&(ue=Z,Z=L,L=ue,te=J),J=0;te;)J=(L[--te]=L[te]+Z[te]+J)/BASE|0,L[te]=BASE===L[te]?0:L[te]%BASE;return J&&(L=[J].concat(L),++F),pe(ae,L,F)},A.precision=A.sd=function(ae,te){var ue,ne,J,q=this;if(ae!=null&&ae!==!!ae)return intCheck(ae,1,MAX),te==null?te=O:intCheck(te,0,8),ie(new ee(q),ae,te);if(!(ue=q.c))return null;if(J=ue.length-1,ne=J*LOG_BASE+1,J=ue[J]){for(;J%10==0;J/=10,ne--);for(J=ue[0];J>=10;J/=10,ne++);}return ae&&q.e+1>ne&&(ne=q.e+1),ne},A.shiftedBy=function(ae){return intCheck(ae,-MAX_SAFE_INTEGER$4,MAX_SAFE_INTEGER$4),this.times("1e"+ae)},A.squareRoot=A.sqrt=function(){var ae,te,ue,ne,J,q=this,F=q.c,L=q.s,Z=q.e,Q=T+4,de=new ee("0.5");if(L!==1||!F||!F[0])return new ee(!L||L<0&&(!F||F[0])?NaN:F?q:1/0);if(L=Math.sqrt(+he(q)),L==0||L==1/0?(te=coeffToString(F),(te.length+Z)%2==0&&(te+="0"),L=Math.sqrt(+te),Z=bitFloor((Z+1)/2)-(Z<0||Z%2),L==1/0?te="5e"+Z:(te=L.toExponential(),te=te.slice(0,te.indexOf("e")+1)+Z),ue=new ee(te)):ue=new ee(L+""),ue.c[0]){for(Z=ue.e,L=Z+Q,L<3&&(L=0);;)if(J=ue,ue=de.times(J.plus(_(q,J,Q,1))),coeffToString(J.c).slice(0,L)===(te=coeffToString(ue.c)).slice(0,L))if(ue.e<Z&&--L,te=te.slice(L-3,L+1),te=="9999"||!ne&&te=="4999"){if(!ne&&(ie(J,J.e+T+2,0),J.times(J).eq(q))){ue=J;break}Q+=4,L+=4,ne=1}else{(!+te||!+te.slice(1)&&te.charAt(0)=="5")&&(ie(ue,ue.e+T+2,1),ae=!ue.times(ue).eq(q));break}}return ie(ue,ue.e+T+1,O,ae)},A.toExponential=function(ae,te){return ae!=null&&(intCheck(ae,0,MAX),ae++),fe(this,ae,te,1)},A.toFixed=function(ae,te){return ae!=null&&(intCheck(ae,0,MAX),ae=ae+this.e+1),fe(this,ae,te)},A.toFormat=function(ae,te,ue){var ne,J=this;if(ue==null)ae!=null&&te&&typeof te=="object"?(ue=te,te=null):ae&&typeof ae=="object"?(ue=ae,ae=te=null):ue=V;else if(typeof ue!="object")throw Error(bignumberError+"Argument not an object: "+ue);if(ne=J.toFixed(ae,te),J.c){var q,F=ne.split("."),L=+ue.groupSize,Z=+ue.secondaryGroupSize,Q=ue.groupSeparator||"",de=F[0],ye=F[1],oe=J.s<0,se=oe?de.slice(1):de,Y=se.length;if(Z&&(q=L,L=Z,Z=q,Y-=q),L>0&&Y>0){for(q=Y%L||L,de=se.substr(0,q);q<Y;q+=L)de+=Q+se.substr(q,L);Z>0&&(de+=Q+se.slice(q)),oe&&(de="-"+de)}ne=ye?de+(ue.decimalSeparator||"")+((Z=+ue.fractionGroupSize)?ye.replace(new RegExp("\\d{"+Z+"}\\B","g"),"$&"+(ue.fractionGroupSeparator||"")):ye):de}return(ue.prefix||"")+ne+(ue.suffix||"")},A.toFraction=function(ae){var te,ue,ne,J,q,F,L,Z,Q,de,ye,oe,se=this,Y=se.c;if(ae!=null&&(L=new ee(ae),!L.isInteger()&&(L.c||L.s!==1)||L.lt(P)))throw Error(bignumberError+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+he(L));if(!Y)return new ee(se);for(te=new ee(P),Q=ue=new ee(P),ne=Z=new ee(P),oe=coeffToString(Y),q=te.e=oe.length-se.e-1,te.c[0]=POWS_TEN[(F=q%LOG_BASE)<0?LOG_BASE+F:F],ae=!ae||L.comparedTo(te)>0?q>0?te:Q:L,F=N,N=1/0,L=new ee(oe),Z.c[0]=0;de=_(L,te,0,1),J=ue.plus(de.times(ne)),J.comparedTo(ae)!=1;)ue=ne,ne=J,Q=Z.plus(de.times(J=Q)),Z=J,te=L.minus(de.times(J=te)),L=J;return J=_(ae.minus(ue),ne,0,1),Z=Z.plus(J.times(Q)),ue=ue.plus(J.times(ne)),Z.s=Q.s=se.s,q=q*2,ye=_(Q,ne,q,O).minus(se).abs().comparedTo(_(Z,ue,q,O).minus(se).abs())<1?[Q,ne]:[Z,ue],N=F,ye},A.toNumber=function(){return+he(this)},A.toPrecision=function(ae,te){return ae!=null&&intCheck(ae,1,MAX),fe(this,ae,te,2)},A.toString=function(ae){var te,ue=this,ne=ue.s,J=ue.e;return J===null?ne?(te="Infinity",ne<0&&(te="-"+te)):te="NaN":(ae==null?te=J<=k||J>=C?toExponential(coeffToString(ue.c),J):toFixedPoint(coeffToString(ue.c),J,"0"):ae===10&&re?(ue=ie(new ee(ue),T+J+1,O),te=toFixedPoint(coeffToString(ue.c),ue.e,"0")):(intCheck(ae,2,X.length,"Base"),te=x(toFixedPoint(coeffToString(ue.c),J,"0"),10,ae,ne,!0)),ne<0&&ue.c[0]&&(te="-"+te)),te},A.valueOf=A.toJSON=function(){return he(this)},A._isBigNumber=!0,A[Symbol.toStringTag]="BigNumber",A[Symbol.for("nodejs.util.inspect.custom")]=A.valueOf,v!=null&&ee.set(v),ee}function bitFloor(v){var _=v|0;return v>0||v===_?_:_-1}function coeffToString(v){for(var _,x,E=1,A=v.length,P=v[0]+"";E<A;){for(_=v[E++]+"",x=LOG_BASE-_.length;x--;_="0"+_);P+=_}for(A=P.length;P.charCodeAt(--A)===48;);return P.slice(0,A+1||1)}function compare(v,_){var x,E,A=v.c,P=_.c,T=v.s,O=_.s,k=v.e,C=_.e;if(!T||!O)return null;if(x=A&&!A[0],E=P&&!P[0],x||E)return x?E?0:-O:T;if(T!=O)return T;if(x=T<0,E=k==C,!A||!P)return E?0:!A^x?1:-1;if(!E)return k>C^x?1:-1;for(O=(k=A.length)<(C=P.length)?k:C,T=0;T<O;T++)if(A[T]!=P[T])return A[T]>P[T]^x?1:-1;return k==C?0:k>C^x?1:-1}function intCheck(v,_,x,E){if(v<_||v>x||v!==mathfloor(v))throw Error(bignumberError+(E||"Argument")+(typeof v=="number"?v<_||v>x?" out of range: ":" not an integer: ":" not a primitive number: ")+String(v))}function isOdd(v){var _=v.c.length-1;return bitFloor(v.e/LOG_BASE)==_&&v.c[_]%2!=0}function toExponential(v,_){return(v.length>1?v.charAt(0)+"."+v.slice(1):v)+(_<0?"e":"e+")+_}function toFixedPoint(v,_,x){var E,A;if(_<0){for(A=x+".";++_;A+=x);v=A+v}else if(E=v.length,++_>E){for(A=x,_-=E;--_;A+=x);v+=A}else _<E&&(v=v.slice(0,_)+"."+v.slice(_));return v}var BigNumber=clone();const bignumber=Object.freeze(Object.defineProperty({__proto__:null,BigNumber,default:BigNumber},Symbol.toStringTag,{value:"Module"})),require$$8=getAugmentedNamespace(bignumber);var src$2={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise=asPromise$1;function asPromise$1(v,_){for(var x=new Array(arguments.length-1),E=0,A=2,P=!0;A<arguments.length;)x[E++]=arguments[A++];return new Promise(function(O,k){x[E]=function(U){if(P)if(P=!1,U)k(U);else{for(var N=new Array(arguments.length-1),H=0;H<N.length;)N[H++]=arguments[H];O.apply(null,N)}};try{v.apply(_||null,x)}catch(C){P&&(P=!1,k(C))}})}var base64$1={};(function(v){var _=v;_.length=function(O){var k=O.length;if(!k)return 0;for(var C=0;--k%4>1&&O.charAt(k)==="=";)++C;return Math.ceil(O.length*3)/4-C};for(var x=new Array(64),E=new Array(123),A=0;A<64;)E[x[A]=A<26?A+65:A<52?A+71:A<62?A-4:A-59|43]=A++;_.encode=function(O,k,C){for(var U=null,N=[],H=0,D=0,j;k<C;){var V=O[k++];switch(D){case 0:N[H++]=x[V>>2],j=(V&3)<<4,D=1;break;case 1:N[H++]=x[j|V>>4],j=(V&15)<<2,D=2;break;case 2:N[H++]=x[j|V>>6],N[H++]=x[V&63],D=0;break}H>8191&&((U||(U=[])).push(String.fromCharCode.apply(String,N)),H=0)}return D&&(N[H++]=x[j],N[H++]=61,D===1&&(N[H++]=61)),U?(H&&U.push(String.fromCharCode.apply(String,N.slice(0,H))),U.join("")):String.fromCharCode.apply(String,N.slice(0,H))};var P="invalid encoding";_.decode=function(O,k,C){for(var U=C,N=0,H,D=0;D<O.length;){var j=O.charCodeAt(D++);if(j===61&&N>1)break;if((j=E[j])===void 0)throw Error(P);switch(N){case 0:H=j,N=1;break;case 1:k[C++]=H<<2|(j&48)>>4,H=j,N=2;break;case 2:k[C++]=(H&15)<<4|(j&60)>>2,H=j,N=3;break;case 3:k[C++]=(H&3)<<6|j,N=0;break}}if(N===1)throw Error(P);return C-U},_.test=function(O){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(O)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(_,x,E){return(this._listeners[_]||(this._listeners[_]=[])).push({fn:x,ctx:E||this}),this},EventEmitter.prototype.off=function(_,x){if(_===void 0)this._listeners={};else if(x===void 0)this._listeners[_]=[];else for(var E=this._listeners[_],A=0;A<E.length;)E[A].fn===x?E.splice(A,1):++A;return this},EventEmitter.prototype.emit=function(_){var x=this._listeners[_];if(x){for(var E=[],A=1;A<arguments.length;)E.push(arguments[A++]);for(A=0;A<x.length;)x[A].fn.apply(x[A++].ctx,E)}return this};var float=factory(factory);function factory(v){return typeof Float32Array<"u"?function(){var _=new Float32Array([-0]),x=new Uint8Array(_.buffer),E=x[3]===128;function A(k,C,U){_[0]=k,C[U]=x[0],C[U+1]=x[1],C[U+2]=x[2],C[U+3]=x[3]}function P(k,C,U){_[0]=k,C[U]=x[3],C[U+1]=x[2],C[U+2]=x[1],C[U+3]=x[0]}v.writeFloatLE=E?A:P,v.writeFloatBE=E?P:A;function T(k,C){return x[0]=k[C],x[1]=k[C+1],x[2]=k[C+2],x[3]=k[C+3],_[0]}function O(k,C){return x[3]=k[C],x[2]=k[C+1],x[1]=k[C+2],x[0]=k[C+3],_[0]}v.readFloatLE=E?T:O,v.readFloatBE=E?O:T}():function(){function _(E,A,P,T){var O=A<0?1:0;if(O&&(A=-A),A===0)E(1/A>0?0:2147483648,P,T);else if(isNaN(A))E(2143289344,P,T);else if(A>34028234663852886e22)E((O<<31|2139095040)>>>0,P,T);else if(A<11754943508222875e-54)E((O<<31|Math.round(A/1401298464324817e-60))>>>0,P,T);else{var k=Math.floor(Math.log(A)/Math.LN2),C=Math.round(A*Math.pow(2,-k)*8388608)&8388607;E((O<<31|k+127<<23|C)>>>0,P,T)}}v.writeFloatLE=_.bind(null,writeUintLE),v.writeFloatBE=_.bind(null,writeUintBE);function x(E,A,P){var T=E(A,P),O=(T>>31)*2+1,k=T>>>23&255,C=T&8388607;return k===255?C?NaN:O*(1/0):k===0?O*1401298464324817e-60*C:O*Math.pow(2,k-150)*(C+8388608)}v.readFloatLE=x.bind(null,readUintLE),v.readFloatBE=x.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var _=new Float64Array([-0]),x=new Uint8Array(_.buffer),E=x[7]===128;function A(k,C,U){_[0]=k,C[U]=x[0],C[U+1]=x[1],C[U+2]=x[2],C[U+3]=x[3],C[U+4]=x[4],C[U+5]=x[5],C[U+6]=x[6],C[U+7]=x[7]}function P(k,C,U){_[0]=k,C[U]=x[7],C[U+1]=x[6],C[U+2]=x[5],C[U+3]=x[4],C[U+4]=x[3],C[U+5]=x[2],C[U+6]=x[1],C[U+7]=x[0]}v.writeDoubleLE=E?A:P,v.writeDoubleBE=E?P:A;function T(k,C){return x[0]=k[C],x[1]=k[C+1],x[2]=k[C+2],x[3]=k[C+3],x[4]=k[C+4],x[5]=k[C+5],x[6]=k[C+6],x[7]=k[C+7],_[0]}function O(k,C){return x[7]=k[C],x[6]=k[C+1],x[5]=k[C+2],x[4]=k[C+3],x[3]=k[C+4],x[2]=k[C+5],x[1]=k[C+6],x[0]=k[C+7],_[0]}v.readDoubleLE=E?T:O,v.readDoubleBE=E?O:T}():function(){function _(E,A,P,T,O,k){var C=T<0?1:0;if(C&&(T=-T),T===0)E(0,O,k+A),E(1/T>0?0:2147483648,O,k+P);else if(isNaN(T))E(0,O,k+A),E(2146959360,O,k+P);else if(T>17976931348623157e292)E(0,O,k+A),E((C<<31|2146435072)>>>0,O,k+P);else{var U;if(T<22250738585072014e-324)U=T/5e-324,E(U>>>0,O,k+A),E((C<<31|U/4294967296)>>>0,O,k+P);else{var N=Math.floor(Math.log(T)/Math.LN2);N===1024&&(N=1023),U=T*Math.pow(2,-N),E(U*4503599627370496>>>0,O,k+A),E((C<<31|N+1023<<20|U*1048576&1048575)>>>0,O,k+P)}}}v.writeDoubleLE=_.bind(null,writeUintLE,0,4),v.writeDoubleBE=_.bind(null,writeUintBE,4,0);function x(E,A,P,T,O){var k=E(T,O+A),C=E(T,O+P),U=(C>>31)*2+1,N=C>>>20&2047,H=4294967296*(C&1048575)+k;return N===2047?H?NaN:U*(1/0):N===0?U*5e-324*H:U*Math.pow(2,N-1075)*(H+4503599627370496)}v.readDoubleLE=x.bind(null,readUintLE,0,4),v.readDoubleBE=x.bind(null,readUintBE,4,0)}(),v}function writeUintLE(v,_,x){_[x]=v&255,_[x+1]=v>>>8&255,_[x+2]=v>>>16&255,_[x+3]=v>>>24}function writeUintBE(v,_,x){_[x]=v>>>24,_[x+1]=v>>>16&255,_[x+2]=v>>>8&255,_[x+3]=v&255}function readUintLE(v,_){return(v[_]|v[_+1]<<8|v[_+2]<<16|v[_+3]<<24)>>>0}function readUintBE(v,_){return(v[_]<<24|v[_+1]<<16|v[_+2]<<8|v[_+3])>>>0}var inquire_1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(v){}return null}var utf8$2={};(function(v){var _=v;_.length=function(E){for(var A=0,P=0,T=0;T<E.length;++T)P=E.charCodeAt(T),P<128?A+=1:P<2048?A+=2:(P&64512)===55296&&(E.charCodeAt(T+1)&64512)===56320?(++T,A+=4):A+=3;return A},_.read=function(E,A,P){var T=P-A;if(T<1)return"";for(var O=null,k=[],C=0,U;A<P;)U=E[A++],U<128?k[C++]=U:U>191&&U<224?k[C++]=(U&31)<<6|E[A++]&63:U>239&&U<365?(U=((U&7)<<18|(E[A++]&63)<<12|(E[A++]&63)<<6|E[A++]&63)-65536,k[C++]=55296+(U>>10),k[C++]=56320+(U&1023)):k[C++]=(U&15)<<12|(E[A++]&63)<<6|E[A++]&63,C>8191&&((O||(O=[])).push(String.fromCharCode.apply(String,k)),C=0);return O?(C&&O.push(String.fromCharCode.apply(String,k.slice(0,C))),O.join("")):String.fromCharCode.apply(String,k.slice(0,C))},_.write=function(E,A,P){for(var T=P,O,k,C=0;C<E.length;++C)O=E.charCodeAt(C),O<128?A[P++]=O:O<2048?(A[P++]=O>>6|192,A[P++]=O&63|128):(O&64512)===55296&&((k=E.charCodeAt(C+1))&64512)===56320?(O=65536+((O&1023)<<10)+(k&1023),++C,A[P++]=O>>18|240,A[P++]=O>>12&63|128,A[P++]=O>>6&63|128,A[P++]=O&63|128):(A[P++]=O>>12|224,A[P++]=O>>6&63|128,A[P++]=O&63|128);return P-T}})(utf8$2);var pool_1=pool;function pool(v,_,x){var E=x||8192,A=E>>>1,P=null,T=E;return function(k){if(k<1||k>A)return v(k);T+k>E&&(P=v(E),T=0);var C=_.call(P,T,T+=k);return T&7&&(T=(T|7)+1),C}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=_;var v=requireMinimal();function _(P,T){this.lo=P>>>0,this.hi=T>>>0}var x=_.zero=new _(0,0);x.toNumber=function(){return 0},x.zzEncode=x.zzDecode=function(){return this},x.length=function(){return 1};var E=_.zeroHash="\0\0\0\0\0\0\0\0";_.fromNumber=function(T){if(T===0)return x;var O=T<0;O&&(T=-T);var k=T>>>0,C=(T-k)/4294967296>>>0;return O&&(C=~C>>>0,k=~k>>>0,++k>4294967295&&(k=0,++C>4294967295&&(C=0))),new _(k,C)},_.from=function(T){if(typeof T=="number")return _.fromNumber(T);if(v.isString(T))if(v.Long)T=v.Long.fromString(T);else return _.fromNumber(parseInt(T,10));return T.low||T.high?new _(T.low>>>0,T.high>>>0):x},_.prototype.toNumber=function(T){if(!T&&this.hi>>>31){var O=~this.lo+1>>>0,k=~this.hi>>>0;return O||(k=k+1>>>0),-(O+k*4294967296)}return this.lo+this.hi*4294967296},_.prototype.toLong=function(T){return v.Long?new v.Long(this.lo|0,this.hi|0,!!T):{low:this.lo|0,high:this.hi|0,unsigned:!!T}};var A=String.prototype.charCodeAt;return _.fromHash=function(T){return T===E?x:new _((A.call(T,0)|A.call(T,1)<<8|A.call(T,2)<<16|A.call(T,3)<<24)>>>0,(A.call(T,4)|A.call(T,5)<<8|A.call(T,6)<<16|A.call(T,7)<<24)>>>0)},_.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},_.prototype.zzEncode=function(){var T=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^T)>>>0,this.lo=(this.lo<<1^T)>>>0,this},_.prototype.zzDecode=function(){var T=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^T)>>>0,this.hi=(this.hi>>>1^T)>>>0,this},_.prototype.length=function(){var T=this.lo,O=(this.lo>>>28|this.hi<<4)>>>0,k=this.hi>>>24;return k===0?O===0?T<16384?T<128?1:2:T<2097152?3:4:O<16384?O<128?5:6:O<2097152?7:8:k<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(v){var _=v;_.asPromise=aspromise,_.base64=base64$1,_.EventEmitter=eventemitter,_.float=float,_.inquire=inquire_1,_.utf8=utf8$2,_.pool=pool_1,_.LongBits=requireLongbits(),_.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_.global=_.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,_.emptyArray=Object.freeze?Object.freeze([]):[],_.emptyObject=Object.freeze?Object.freeze({}):{},_.isInteger=Number.isInteger||function(P){return typeof P=="number"&&isFinite(P)&&Math.floor(P)===P},_.isString=function(P){return typeof P=="string"||P instanceof String},_.isObject=function(P){return P&&typeof P=="object"},_.isset=_.isSet=function(P,T){var O=P[T];return O!=null&&P.hasOwnProperty(T)?typeof O!="object"||(Array.isArray(O)?O.length:Object.keys(O).length)>0:!1},_.Buffer=function(){try{var A=_.inquire("buffer").Buffer;return A.prototype.utf8Write?A:null}catch{return null}}(),_._Buffer_from=null,_._Buffer_allocUnsafe=null,_.newBuffer=function(P){return typeof P=="number"?_.Buffer?_._Buffer_allocUnsafe(P):new _.Array(P):_.Buffer?_._Buffer_from(P):typeof Uint8Array>"u"?P:new Uint8Array(P)},_.Array=typeof Uint8Array<"u"?Uint8Array:Array,_.Long=_.global.dcodeIO&&_.global.dcodeIO.Long||_.global.Long||_.inquire("long"),_.key2Re=/^true|false|0|1$/,_.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_.longToHash=function(P){return P?_.LongBits.from(P).toHash():_.LongBits.zeroHash},_.longFromHash=function(P,T){var O=_.LongBits.fromHash(P);return _.Long?_.Long.fromBits(O.lo,O.hi,T):O.toNumber(!!T)};function x(A,P,T){for(var O=Object.keys(P),k=0;k<O.length;++k)(A[O[k]]===void 0||!T)&&(A[O[k]]=P[O[k]]);return A}_.merge=x,_.lcFirst=function(P){return P.charAt(0).toLowerCase()+P.substring(1)};function E(A){function P(T,O){if(!(this instanceof P))return new P(T,O);Object.defineProperty(this,"message",{get:function(){return T}}),Error.captureStackTrace?Error.captureStackTrace(this,P):Object.defineProperty(this,"stack",{value:new Error().stack||""}),O&&x(this,O)}return P.prototype=Object.create(Error.prototype,{constructor:{value:P,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return A},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),P}_.newError=E,_.ProtocolError=E("ProtocolError"),_.oneOfGetter=function(P){for(var T={},O=0;O<P.length;++O)T[P[O]]=1;return function(){for(var k=Object.keys(this),C=k.length-1;C>-1;--C)if(T[k[C]]===1&&this[k[C]]!==void 0&&this[k[C]]!==null)return k[C]}},_.oneOfSetter=function(P){return function(T){for(var O=0;O<P.length;++O)P[O]!==T&&delete this[P[O]]}},_.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_._configure=function(){var A=_.Buffer;if(!A){_._Buffer_from=_._Buffer_allocUnsafe=null;return}_._Buffer_from=A.from!==Uint8Array.from&&A.from||function(T,O){return new A(T,O)},_._Buffer_allocUnsafe=A.allocUnsafe||function(T){return new A(T)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$7=requireMinimal(),BufferWriter$3,LongBits$1=util$7.LongBits,base64=util$7.base64,utf8$1=util$7.utf8;function Op(v,_,x){this.fn=v,this.len=_,this.next=void 0,this.val=x}function noop$1(){}function State(v){this.head=v.head,this.tail=v.tail,this.len=v.len,this.next=v.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function v(){return util$7.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$3})()}:function(){return new Writer$1}};Writer$1.create=create$1(),Writer$1.alloc=function v(_){return new util$7.Array(_)},util$7.Array!==Array&&(Writer$1.alloc=util$7.pool(Writer$1.alloc,util$7.Array.prototype.subarray)),Writer$1.prototype._push=function v(_,x,E){return this.tail=this.tail.next=new Op(_,x,E),this.len+=x,this};function writeByte(v,_,x){_[x]=v&255}function writeVarint32(v,_,x){for(;v>127;)_[x++]=v&127|128,v>>>=7;_[x]=v}function VarintOp(v,_){this.len=v,this.next=void 0,this.val=_}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function v(_){return this.len+=(this.tail=this.tail.next=new VarintOp((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},Writer$1.prototype.int32=function v(_){return _<0?this._push(writeVarint64,10,LongBits$1.fromNumber(_)):this.uint32(_)},Writer$1.prototype.sint32=function v(_){return this.uint32((_<<1^_>>31)>>>0)};function writeVarint64(v,_,x){for(;v.hi;)_[x++]=v.lo&127|128,v.lo=(v.lo>>>7|v.hi<<25)>>>0,v.hi>>>=7;for(;v.lo>127;)_[x++]=v.lo&127|128,v.lo=v.lo>>>7;_[x++]=v.lo}Writer$1.prototype.uint64=function v(_){var x=LongBits$1.from(_);return this._push(writeVarint64,x.length(),x)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function v(_){var x=LongBits$1.from(_).zzEncode();return this._push(writeVarint64,x.length(),x)},Writer$1.prototype.bool=function v(_){return this._push(writeByte,1,_?1:0)};function writeFixed32(v,_,x){_[x]=v&255,_[x+1]=v>>>8&255,_[x+2]=v>>>16&255,_[x+3]=v>>>24}Writer$1.prototype.fixed32=function v(_){return this._push(writeFixed32,4,_>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function v(_){var x=LongBits$1.from(_);return this._push(writeFixed32,4,x.lo)._push(writeFixed32,4,x.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function v(_){return this._push(util$7.float.writeFloatLE,4,_)},Writer$1.prototype.double=function v(_){return this._push(util$7.float.writeDoubleLE,8,_)};var writeBytes=util$7.Array.prototype.set?function v(_,x,E){x.set(_,E)}:function v(_,x,E){for(var A=0;A<_.length;++A)x[E+A]=_[A]};Writer$1.prototype.bytes=function v(_){var x=_.length>>>0;if(!x)return this._push(writeByte,1,0);if(util$7.isString(_)){var E=Writer$1.alloc(x=base64.length(_));base64.decode(_,E,0),_=E}return this.uint32(x)._push(writeBytes,x,_)},Writer$1.prototype.string=function v(_){var x=utf8$1.length(_);return x?this.uint32(x)._push(utf8$1.write,x,_):this._push(writeByte,1,0)},Writer$1.prototype.fork=function v(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer$1.prototype.reset=function v(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer$1.prototype.ldelim=function v(){var _=this.head,x=this.tail,E=this.len;return this.reset().uint32(E),E&&(this.tail.next=_.next,this.tail=x,this.len+=E),this},Writer$1.prototype.finish=function v(){for(var _=this.head.next,x=this.constructor.alloc(this.len),E=0;_;)_.fn(_.val,x,E),E+=_.len,_=_.next;return x},Writer$1._configure=function(v){BufferWriter$3=v,Writer$1.create=create$1(),BufferWriter$3._configure()};var writer_buffer=BufferWriter$2,Writer=writer;(BufferWriter$2.prototype=Object.create(Writer.prototype)).constructor=BufferWriter$2;var util$6=requireMinimal();function BufferWriter$2(){Writer.call(this)}BufferWriter$2._configure=function(){BufferWriter$2.alloc=util$6._Buffer_allocUnsafe,BufferWriter$2.writeBytesBuffer=util$6.Buffer&&util$6.Buffer.prototype instanceof Uint8Array&&util$6.Buffer.prototype.set.name==="set"?function(_,x,E){x.set(_,E)}:function(_,x,E){if(_.copy)_.copy(x,E,0,_.length);else for(var A=0;A<_.length;)x[E++]=_[A++]}},BufferWriter$2.prototype.bytes=function v(_){util$6.isString(_)&&(_=util$6._Buffer_from(_,"base64"));var x=_.length>>>0;return this.uint32(x),x&&this._push(BufferWriter$2.writeBytesBuffer,x,_),this};function writeStringBuffer(v,_,x){v.length<40?util$6.utf8.write(v,_,x):_.utf8Write?_.utf8Write(v,x):_.write(v,x)}BufferWriter$2.prototype.string=function v(_){var x=util$6.Buffer.byteLength(_);return this.uint32(x),x&&this._push(writeStringBuffer,x,_),this},BufferWriter$2._configure();var reader=Reader$1,util$5=requireMinimal(),BufferReader$3,LongBits=util$5.LongBits,utf8=util$5.utf8;function indexOutOfRange(v,_){return RangeError("index out of range: "+v.pos+" + "+(_||1)+" > "+v.len)}function Reader$1(v){this.buf=v,this.pos=0,this.len=v.length}var create_array=typeof Uint8Array<"u"?function v(_){if(_ instanceof Uint8Array||Array.isArray(_))return new Reader$1(_);throw Error("illegal buffer")}:function v(_){if(Array.isArray(_))return new Reader$1(_);throw Error("illegal buffer")},create=function v(){return util$5.Buffer?function(x){return(Reader$1.create=function(A){return util$5.Buffer.isBuffer(A)?new BufferReader$3(A):create_array(A)})(x)}:create_array};Reader$1.create=create(),Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice,Reader$1.prototype.uint32=function v(){var _=4294967295;return function(){if(_=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_=(_|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return _}}(),Reader$1.prototype.int32=function v(){return this.uint32()|0},Reader$1.prototype.sint32=function v(){var _=this.uint32();return _>>>1^-(_&1)|0};function readLongVarint(){var v=new LongBits(0,0),_=0;if(this.len-this.pos>4){for(;_<4;++_)if(v.lo=(v.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return v;if(v.lo=(v.lo|(this.buf[this.pos]&127)<<28)>>>0,v.hi=(v.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return v;_=0}else{for(;_<3;++_){if(this.pos>=this.len)throw indexOutOfRange(this);if(v.lo=(v.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return v}return v.lo=(v.lo|(this.buf[this.pos++]&127)<<_*7)>>>0,v}if(this.len-this.pos>4){for(;_<5;++_)if(v.hi=(v.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return v}else for(;_<5;++_){if(this.pos>=this.len)throw indexOutOfRange(this);if(v.hi=(v.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return v}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function v(){return this.uint32()!==0};function readFixed32_end(v,_){return(v[_-4]|v[_-3]<<8|v[_-2]<<16|v[_-1]<<24)>>>0}Reader$1.prototype.fixed32=function v(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function v(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function v(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var _=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_},Reader$1.prototype.double=function v(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var _=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_},Reader$1.prototype.bytes=function v(){var _=this.uint32(),x=this.pos,E=this.pos+_;if(E>this.len)throw indexOutOfRange(this,_);if(this.pos+=_,Array.isArray(this.buf))return this.buf.slice(x,E);if(x===E){var A=util$5.Buffer;return A?A.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,x,E)},Reader$1.prototype.string=function v(){var _=this.bytes();return utf8.read(_,0,_.length)},Reader$1.prototype.skip=function v(_){if(typeof _=="number"){if(this.pos+_>this.len)throw indexOutOfRange(this,_);this.pos+=_}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(v){switch(v){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(v=this.uint32()&7)!==4;)this.skipType(v);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+v+" at offset "+this.pos)}return this},Reader$1._configure=function(v){BufferReader$3=v,Reader$1.create=create(),BufferReader$3._configure();var _=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[_](!1)},uint64:function(){return readLongVarint.call(this)[_](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[_](!1)},fixed64:function(){return readFixed64.call(this)[_](!0)},sfixed64:function(){return readFixed64.call(this)[_](!1)}})};var reader_buffer=BufferReader$2,Reader=reader;(BufferReader$2.prototype=Object.create(Reader.prototype)).constructor=BufferReader$2;var util$4=requireMinimal();function BufferReader$2(v){Reader.call(this,v)}BufferReader$2._configure=function(){util$4.Buffer&&(BufferReader$2.prototype._slice=util$4.Buffer.prototype.slice)},BufferReader$2.prototype.string=function v(){var _=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_,this.len))},BufferReader$2._configure();var rpc={},service$1=Service$1,util$3=requireMinimal();(Service$1.prototype=Object.create(util$3.EventEmitter.prototype)).constructor=Service$1;function Service$1(v,_,x){if(typeof v!="function")throw TypeError("rpcImpl must be a function");util$3.EventEmitter.call(this),this.rpcImpl=v,this.requestDelimited=!!_,this.responseDelimited=!!x}Service$1.prototype.rpcCall=function v(_,x,E,A,P){if(!A)throw TypeError("request must be specified");var T=this;if(!P)return util$3.asPromise(v,T,_,x,E,A);if(!T.rpcImpl){setTimeout(function(){P(Error("already ended"))},0);return}try{return T.rpcImpl(_,x[T.requestDelimited?"encodeDelimited":"encode"](A).finish(),function(k,C){if(k)return T.emit("error",k,_),P(k);if(C===null){T.end(!0);return}if(!(C instanceof E))try{C=E[T.responseDelimited?"decodeDelimited":"decode"](C)}catch(U){return T.emit("error",U,_),P(U)}return T.emit("data",C,_),P(null,C)})}catch(O){T.emit("error",O,_),setTimeout(function(){P(O)},0);return}},Service$1.prototype.end=function v(_){return this.rpcImpl&&(_||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(v){var _=v;_.Service=service$1}(rpc);var roots={};(function(v){var _=v;_.build="minimal",_.Writer=writer,_.BufferWriter=writer_buffer,_.Reader=reader,_.BufferReader=reader_buffer,_.util=requireMinimal(),_.rpc=rpc,_.roots=roots,_.configure=x;function x(){_.util._configure(),_.Writer._configure(_.BufferWriter),_.Reader._configure(_.BufferReader)}x()})(indexMinimal);var util$2={exports:{}},codegen_1=codegen;function codegen(v,_){typeof v=="string"&&(_=v,v=void 0);var x=[];function E(P){if(typeof P!="string"){var T=A();if(codegen.verbose&&console.log("codegen: "+T),T="return "+T,P){for(var O=Object.keys(P),k=new Array(O.length+1),C=new Array(O.length),U=0;U<O.length;)k[U]=O[U],C[U]=P[O[U++]];return k[U]=T,Function.apply(null,k).apply(null,C)}return Function(T)()}for(var N=new Array(arguments.length-1),H=0;H<N.length;)N[H]=arguments[++H];if(H=0,P=P.replace(/%([%dfijs])/g,function(j,V){var X=N[H++];switch(V){case"d":case"f":return String(Number(X));case"i":return String(Math.floor(X));case"j":return JSON.stringify(X);case"s":return String(X)}return"%"}),H!==N.length)throw Error("parameter count mismatch");return x.push(P),E}function A(P){return"function "+(P||_||"")+"("+(v&&v.join(",")||"")+`){
  `+x.join(`
  `)+`
}`}return E.toString=A,E}codegen.verbose=!1;var fetch_1=fetch,asPromise=aspromise,inquire=inquire_1,fs=inquire("fs");function fetch(v,_,x){return typeof _=="function"?(x=_,_={}):_||(_={}),x?!_.xhr&&fs&&fs.readFile?fs.readFile(v,function(A,P){return A&&typeof XMLHttpRequest<"u"?fetch.xhr(v,_,x):A?x(A):x(null,_.binary?P:P.toString("utf8"))}):fetch.xhr(v,_,x):asPromise(fetch,this,v,_)}fetch.xhr=function v(_,x,E){var A=new XMLHttpRequest;A.onreadystatechange=function(){if(A.readyState===4){if(A.status!==0&&A.status!==200)return E(Error("status "+A.status));if(x.binary){var T=A.response;if(!T){T=[];for(var O=0;O<A.responseText.length;++O)T.push(A.responseText.charCodeAt(O)&255)}return E(null,typeof Uint8Array<"u"?new Uint8Array(T):T)}return E(null,A.responseText)}},x.binary&&("overrideMimeType"in A&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.responseType="arraybuffer"),A.open("GET",_),A.send()};var path={};(function(v){var _=v,x=_.isAbsolute=function(P){return/^(?:\/|\w+:)/.test(P)},E=_.normalize=function(P){P=P.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var T=P.split("/"),O=x(P),k="";O&&(k=T.shift()+"/");for(var C=0;C<T.length;)T[C]===".."?C>0&&T[C-1]!==".."?T.splice(--C,2):O?T.splice(C,1):++C:T[C]==="."?T.splice(C,1):++C;return k+T.join("/")};_.resolve=function(P,T,O){return O||(T=E(T)),x(T)?T:(O||(P=E(P)),(P=P.replace(/(?:\/|^)[^/]+$/,"")).length?E(P+"/"+T):T)}})(path);var types$a={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(v){var _=v,x=requireUtil(),E=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function A(P,T){var O=0,k={};for(T|=0;O<P.length;)k[E[O+T]]=P[O++];return k}_.basic=A([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),_.defaults=A([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",x.emptyArray,null]),_.long=A([0,0,0,1,1],7),_.mapKey=A([0,0,0,5,5,0,0,0,1,1,0,2],2),_.packed=A([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$a)),types$a}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=T;var v=requireObject();((T.prototype=Object.create(v.prototype)).constructor=T).className="Field";var _=require_enum(),x=requireTypes(),E=requireUtil(),A,P=/^required|optional|repeated$/;T.fromJSON=function(k,C){return new T(k,C.id,C.type,C.rule,C.extend,C.options,C.comment)};function T(O,k,C,U,N,H,D){if(E.isObject(U)?(D=N,H=U,U=N=void 0):E.isObject(N)&&(D=H,H=N,N=void 0),v.call(this,O,H),!E.isInteger(k)||k<0)throw TypeError("id must be a non-negative integer");if(!E.isString(C))throw TypeError("type must be a string");if(U!==void 0&&!P.test(U=U.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(N!==void 0&&!E.isString(N))throw TypeError("extend must be a string");U==="proto3_optional"&&(U="optional"),this.rule=U&&U!=="optional"?U:void 0,this.type=C,this.id=k,this.extend=N||void 0,this.required=U==="required",this.optional=!this.required,this.repeated=U==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=E.Long?x.long[C]!==void 0:!1,this.bytes=C==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=D}return Object.defineProperty(T.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),T.prototype.setOption=function(k,C,U){return k==="packed"&&(this._packed=null),v.prototype.setOption.call(this,k,C,U)},T.prototype.toJSON=function(k){var C=k?!!k.keepComments:!1;return E.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",C?this.comment:void 0])},T.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=x.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof A?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof _&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof _))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=E.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var k;E.base64.test(this.typeDefault)?E.base64.decode(this.typeDefault,k=E.newBuffer(E.base64.length(this.typeDefault)),0):E.utf8.write(this.typeDefault,k=E.newBuffer(E.utf8.length(this.typeDefault)),0),this.typeDefault=k}return this.map?this.defaultValue=E.emptyObject:this.repeated?this.defaultValue=E.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof A&&(this.parent.ctor.prototype[this.name]=this.defaultValue),v.prototype.resolve.call(this)},T.d=function(k,C,U,N){return typeof C=="function"?C=E.decorateType(C).name:C&&typeof C=="object"&&(C=E.decorateEnum(C).name),function(D,j){E.decorateType(D.constructor).add(new T(j,k,C,U,{default:N}))}},T._configure=function(k){A=k},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=E;var v=requireObject();((E.prototype=Object.create(v.prototype)).constructor=E).className="OneOf";var _=requireField(),x=requireUtil();function E(P,T,O,k){if(Array.isArray(T)||(O=T,T=void 0),v.call(this,P,O),!(T===void 0||Array.isArray(T)))throw TypeError("fieldNames must be an Array");this.oneof=T||[],this.fieldsArray=[],this.comment=k}E.fromJSON=function(T,O){return new E(T,O.oneof,O.options,O.comment)},E.prototype.toJSON=function(T){var O=T?!!T.keepComments:!1;return x.toObject(["options",this.options,"oneof",this.oneof,"comment",O?this.comment:void 0])};function A(P){if(P.parent)for(var T=0;T<P.fieldsArray.length;++T)P.fieldsArray[T].parent||P.parent.add(P.fieldsArray[T])}return E.prototype.add=function(T){if(!(T instanceof _))throw TypeError("field must be a Field");return T.parent&&T.parent!==this.parent&&T.parent.remove(T),this.oneof.push(T.name),this.fieldsArray.push(T),T.partOf=this,A(this),this},E.prototype.remove=function(T){if(!(T instanceof _))throw TypeError("field must be a Field");var O=this.fieldsArray.indexOf(T);if(O<0)throw Error(T+" is not a member of "+this);return this.fieldsArray.splice(O,1),O=this.oneof.indexOf(T.name),O>-1&&this.oneof.splice(O,1),T.partOf=null,this},E.prototype.onAdd=function(T){v.prototype.onAdd.call(this,T);for(var O=this,k=0;k<this.oneof.length;++k){var C=T.get(this.oneof[k]);C&&!C.partOf&&(C.partOf=O,O.fieldsArray.push(C))}A(this)},E.prototype.onRemove=function(T){for(var O=0,k;O<this.fieldsArray.length;++O)(k=this.fieldsArray[O]).parent&&k.parent.remove(k);v.prototype.onRemove.call(this,T)},E.d=function(){for(var T=new Array(arguments.length),O=0;O<arguments.length;)T[O]=arguments[O++];return function(C,U){x.decorateType(C.constructor).add(new E(U,T)),Object.defineProperty(C,U,{get:x.oneOfGetter(T),set:x.oneOfSetter(T)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=k;var v=requireObject();((k.prototype=Object.create(v.prototype)).constructor=k).className="Namespace";var _=requireField(),x=requireUtil(),E=requireOneof(),A,P,T;k.fromJSON=function(N,H){return new k(N,H.options).addJSON(H.nested)};function O(U,N){if(U&&U.length){for(var H={},D=0;D<U.length;++D)H[U[D].name]=U[D].toJSON(N);return H}}k.arrayToJSON=O,k.isReservedId=function(N,H){if(N){for(var D=0;D<N.length;++D)if(typeof N[D]!="string"&&N[D][0]<=H&&N[D][1]>H)return!0}return!1},k.isReservedName=function(N,H){if(N){for(var D=0;D<N.length;++D)if(N[D]===H)return!0}return!1};function k(U,N){v.call(this,U,N),this.nested=void 0,this._nestedArray=null}function C(U){return U._nestedArray=null,U}return Object.defineProperty(k.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=x.toArray(this.nested))}}),k.prototype.toJSON=function(N){return x.toObject(["options",this.options,"nested",O(this.nestedArray,N)])},k.prototype.addJSON=function(N){var H=this;if(N)for(var D=Object.keys(N),j=0,V;j<D.length;++j)V=N[D[j]],H.add((V.fields!==void 0?A.fromJSON:V.values!==void 0?T.fromJSON:V.methods!==void 0?P.fromJSON:V.id!==void 0?_.fromJSON:k.fromJSON)(D[j],V));return this},k.prototype.get=function(N){return this.nested&&this.nested[N]||null},k.prototype.getEnum=function(N){if(this.nested&&this.nested[N]instanceof T)return this.nested[N].values;throw Error("no such enum: "+N)},k.prototype.add=function(N){if(!(N instanceof _&&N.extend!==void 0||N instanceof A||N instanceof E||N instanceof T||N instanceof P||N instanceof k))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var H=this.get(N.name);if(H)if(H instanceof k&&N instanceof k&&!(H instanceof A||H instanceof P)){for(var D=H.nestedArray,j=0;j<D.length;++j)N.add(D[j]);this.remove(H),this.nested||(this.nested={}),N.setOptions(H.options,!0)}else throw Error("duplicate name '"+N.name+"' in "+this)}return this.nested[N.name]=N,N.onAdd(this),C(this)},k.prototype.remove=function(N){if(!(N instanceof v))throw TypeError("object must be a ReflectionObject");if(N.parent!==this)throw Error(N+" is not a member of "+this);return delete this.nested[N.name],Object.keys(this.nested).length||(this.nested=void 0),N.onRemove(this),C(this)},k.prototype.define=function(N,H){if(x.isString(N))N=N.split(".");else if(!Array.isArray(N))throw TypeError("illegal path");if(N&&N.length&&N[0]==="")throw Error("path must be relative");for(var D=this;N.length>0;){var j=N.shift();if(D.nested&&D.nested[j]){if(D=D.nested[j],!(D instanceof k))throw Error("path conflicts with non-namespace objects")}else D.add(D=new k(j))}return H&&D.addJSON(H),D},k.prototype.resolveAll=function(){for(var N=this.nestedArray,H=0;H<N.length;)N[H]instanceof k?N[H++].resolveAll():N[H++].resolve();return this.resolve()},k.prototype.lookup=function(N,H,D){if(typeof H=="boolean"?(D=H,H=void 0):H&&!Array.isArray(H)&&(H=[H]),x.isString(N)&&N.length){if(N===".")return this.root;N=N.split(".")}else if(!N.length)return this;if(N[0]==="")return this.root.lookup(N.slice(1),H);var j=this.get(N[0]);if(j){if(N.length===1){if(!H||H.indexOf(j.constructor)>-1)return j}else if(j instanceof k&&(j=j.lookup(N.slice(1),H,!0)))return j}else for(var V=0;V<this.nestedArray.length;++V)if(this._nestedArray[V]instanceof k&&(j=this._nestedArray[V].lookup(N,H,!0)))return j;return this.parent===null||D?null:this.parent.lookup(N,H)},k.prototype.lookupType=function(N){var H=this.lookup(N,[A]);if(!H)throw Error("no such type: "+N);return H},k.prototype.lookupEnum=function(N){var H=this.lookup(N,[T]);if(!H)throw Error("no such Enum '"+N+"' in "+this);return H},k.prototype.lookupTypeOrEnum=function(N){var H=this.lookup(N,[A,T]);if(!H)throw Error("no such Type or Enum '"+N+"' in "+this);return H},k.prototype.lookupService=function(N){var H=this.lookup(N,[P]);if(!H)throw Error("no such Service '"+N+"' in "+this);return H},k._configure=function(U,N,H){A=U,P=N,T=H},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=E;var v=requireField();((E.prototype=Object.create(v.prototype)).constructor=E).className="MapField";var _=requireTypes(),x=requireUtil();function E(A,P,T,O,k,C){if(v.call(this,A,P,O,void 0,void 0,k,C),!x.isString(T))throw TypeError("keyType must be a string");this.keyType=T,this.resolvedKeyType=null,this.map=!0}return E.fromJSON=function(P,T){return new E(P,T.id,T.keyType,T.type,T.options,T.comment)},E.prototype.toJSON=function(P){var T=P?!!P.keepComments:!1;return x.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",T?this.comment:void 0])},E.prototype.resolve=function(){if(this.resolved)return this;if(_.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return v.prototype.resolve.call(this)},E.d=function(P,T,O){return typeof O=="function"?O=x.decorateType(O).name:O&&typeof O=="object"&&(O=x.decorateEnum(O).name),function(C,U){x.decorateType(C.constructor).add(new E(U,P,T,O))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=x;var v=requireObject();((x.prototype=Object.create(v.prototype)).constructor=x).className="Method";var _=requireUtil();function x(E,A,P,T,O,k,C,U,N){if(_.isObject(O)?(C=O,O=k=void 0):_.isObject(k)&&(C=k,k=void 0),!(A===void 0||_.isString(A)))throw TypeError("type must be a string");if(!_.isString(P))throw TypeError("requestType must be a string");if(!_.isString(T))throw TypeError("responseType must be a string");v.call(this,E,C),this.type=A||"rpc",this.requestType=P,this.requestStream=O?!0:void 0,this.responseType=T,this.responseStream=k?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=U,this.parsedOptions=N}return x.fromJSON=function(A,P){return new x(A,P.type,P.requestType,P.responseType,P.requestStream,P.responseStream,P.options,P.comment,P.parsedOptions)},x.prototype.toJSON=function(A){var P=A?!!A.keepComments:!1;return _.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",P?this.comment:void 0,"parsedOptions",this.parsedOptions])},x.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),v.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=A;var v=requireNamespace();((A.prototype=Object.create(v.prototype)).constructor=A).className="Service";var _=requireMethod(),x=requireUtil(),E=rpc;function A(T,O){v.call(this,T,O),this.methods={},this._methodsArray=null}A.fromJSON=function(O,k){var C=new A(O,k.options);if(k.methods)for(var U=Object.keys(k.methods),N=0;N<U.length;++N)C.add(_.fromJSON(U[N],k.methods[U[N]]));return k.nested&&C.addJSON(k.nested),C.comment=k.comment,C},A.prototype.toJSON=function(O){var k=v.prototype.toJSON.call(this,O),C=O?!!O.keepComments:!1;return x.toObject(["options",k&&k.options||void 0,"methods",v.arrayToJSON(this.methodsArray,O)||{},"nested",k&&k.nested||void 0,"comment",C?this.comment:void 0])},Object.defineProperty(A.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=x.toArray(this.methods))}});function P(T){return T._methodsArray=null,T}return A.prototype.get=function(O){return this.methods[O]||v.prototype.get.call(this,O)},A.prototype.resolveAll=function(){for(var O=this.methodsArray,k=0;k<O.length;++k)O[k].resolve();return v.prototype.resolve.call(this)},A.prototype.add=function(O){if(this.get(O.name))throw Error("duplicate name '"+O.name+"' in "+this);return O instanceof _?(this.methods[O.name]=O,O.parent=this,P(this)):v.prototype.add.call(this,O)},A.prototype.remove=function(O){if(O instanceof _){if(this.methods[O.name]!==O)throw Error(O+" is not a member of "+this);return delete this.methods[O.name],O.parent=null,P(this)}return v.prototype.remove.call(this,O)},A.prototype.create=function(O,k,C){for(var U=new E.Service(O,k,C),N=0,H;N<this.methodsArray.length;++N){var D=x.lcFirst((H=this._methodsArray[N]).resolve().name).replace(/[^$\w_]/g,"");U[D]=x.codegen(["r","c"],x.isReserved(D)?D+"_":D)("return this.rpcCall(m,q,s,r,c)")({m:H,q:H.resolvedRequestType.ctor,s:H.resolvedResponseType.ctor})}return U},service}var message$1=Message,util$1=requireMinimal();function Message(v){if(v)for(var _=Object.keys(v),x=0;x<_.length;++x)this[_[x]]=v[_[x]]}Message.create=function v(_){return this.$type.create(_)},Message.encode=function v(_,x){return this.$type.encode(_,x)},Message.encodeDelimited=function v(_,x){return this.$type.encodeDelimited(_,x)},Message.decode=function v(_){return this.$type.decode(_)},Message.decodeDelimited=function v(_){return this.$type.decodeDelimited(_)},Message.verify=function v(_){return this.$type.verify(_)},Message.fromObject=function v(_){return this.$type.fromObject(_)},Message.toObject=function v(_,x){return this.$type.toObject(_,x)},Message.prototype.toJSON=function v(){return this.$type.toObject(this,util$1.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=A;var v=require_enum(),_=requireTypes(),x=requireUtil();function E(P){return"missing required '"+P.name+"'"}function A(P){var T=x.codegen(["r","l"],P.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(P.fieldsArray.filter(function(H){return H.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");P.group&&T("if((t&7)===4)")("break"),T("switch(t>>>3){");for(var O=0;O<P.fieldsArray.length;++O){var k=P._fieldsArray[O].resolve(),C=k.resolvedType instanceof v?"int32":k.type,U="m"+x.safeProp(k.name);T("case %i: {",k.id),k.map?(T("if(%s===util.emptyObject)",U)("%s={}",U)("var c2 = r.uint32()+r.pos"),_.defaults[k.keyType]!==void 0?T("k=%j",_.defaults[k.keyType]):T("k=null"),_.defaults[C]!==void 0?T("value=%j",_.defaults[C]):T("value=null"),T("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",k.keyType)("case 2:"),_.basic[C]===void 0?T("value=types[%i].decode(r,r.uint32())",O):T("value=r.%s()",C),T("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),_.long[k.keyType]!==void 0?T('%s[typeof k==="object"?util.longToHash(k):k]=value',U):T("%s[k]=value",U)):k.repeated?(T("if(!(%s&&%s.length))",U,U)("%s=[]",U),_.packed[C]!==void 0&&T("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",U,C)("}else"),_.basic[C]===void 0?T(k.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",U,O):T("%s.push(r.%s())",U,C)):_.basic[C]===void 0?T(k.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",U,O):T("%s=r.%s()",U,C),T("break")("}")}for(T("default:")("r.skipType(t&7)")("break")("}")("}"),O=0;O<P._fieldsArray.length;++O){var N=P._fieldsArray[O];N.required&&T("if(!m.hasOwnProperty(%j))",N.name)("throw util.ProtocolError(%j,{instance:m})",E(N))}return T("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=P;var v=require_enum(),_=requireUtil();function x(T,O){return T.name+": "+O+(T.repeated&&O!=="array"?"[]":T.map&&O!=="object"?"{k:"+T.keyType+"}":"")+" expected"}function E(T,O,k,C){if(O.resolvedType)if(O.resolvedType instanceof v){T("switch(%s){",C)("default:")("return%j",x(O,"enum value"));for(var U=Object.keys(O.resolvedType.values),N=0;N<U.length;++N)T("case %i:",O.resolvedType.values[U[N]]);T("break")("}")}else T("{")("var e=types[%i].verify(%s);",k,C)("if(e)")("return%j+e",O.name+".")("}");else switch(O.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":T("if(!util.isInteger(%s))",C)("return%j",x(O,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":T("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",C,C,C,C)("return%j",x(O,"integer|Long"));break;case"float":case"double":T('if(typeof %s!=="number")',C)("return%j",x(O,"number"));break;case"bool":T('if(typeof %s!=="boolean")',C)("return%j",x(O,"boolean"));break;case"string":T("if(!util.isString(%s))",C)("return%j",x(O,"string"));break;case"bytes":T('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',C,C,C)("return%j",x(O,"buffer"));break}return T}function A(T,O,k){switch(O.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":T("if(!util.key32Re.test(%s))",k)("return%j",x(O,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":T("if(!util.key64Re.test(%s))",k)("return%j",x(O,"integer|Long key"));break;case"bool":T("if(!util.key2Re.test(%s))",k)("return%j",x(O,"boolean key"));break}return T}function P(T){var O=_.codegen(["m"],T.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),k=T.oneofsArray,C={};k.length&&O("var p={}");for(var U=0;U<T.fieldsArray.length;++U){var N=T._fieldsArray[U].resolve(),H="m"+_.safeProp(N.name);if(N.optional&&O("if(%s!=null&&m.hasOwnProperty(%j)){",H,N.name),N.map)O("if(!util.isObject(%s))",H)("return%j",x(N,"object"))("var k=Object.keys(%s)",H)("for(var i=0;i<k.length;++i){"),A(O,N,"k[i]"),E(O,N,U,H+"[k[i]]")("}");else if(N.repeated)O("if(!Array.isArray(%s))",H)("return%j",x(N,"array"))("for(var i=0;i<%s.length;++i){",H),E(O,N,U,H+"[i]")("}");else{if(N.partOf){var D=_.safeProp(N.partOf.name);C[N.partOf.name]===1&&O("if(p%s===1)",D)("return%j",N.partOf.name+": multiple values"),C[N.partOf.name]=1,O("p%s=1",D)}E(O,N,U,H)}N.optional&&O("}")}return O("return null")}return verifier_1}var converter$2={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(v){var _=v,x=require_enum(),E=requireUtil();function A(T,O,k,C){var U=!1;if(O.resolvedType)if(O.resolvedType instanceof x){T("switch(d%s){",C);for(var N=O.resolvedType.values,H=Object.keys(N),D=0;D<H.length;++D)N[H[D]]===O.typeDefault&&!U&&(T("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',C,C,C),O.repeated||T("break"),U=!0),T("case%j:",H[D])("case %i:",N[H[D]])("m%s=%j",C,N[H[D]])("break");T("}")}else T('if(typeof d%s!=="object")',C)("throw TypeError(%j)",O.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",C,k,C);else{var j=!1;switch(O.type){case"double":case"float":T("m%s=Number(d%s)",C,C);break;case"uint32":case"fixed32":T("m%s=d%s>>>0",C,C);break;case"int32":case"sint32":case"sfixed32":T("m%s=d%s|0",C,C);break;case"uint64":j=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":T("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",C,C,j)('else if(typeof d%s==="string")',C)("m%s=parseInt(d%s,10)",C,C)('else if(typeof d%s==="number")',C)("m%s=d%s",C,C)('else if(typeof d%s==="object")',C)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",C,C,C,j?"true":"");break;case"bytes":T('if(typeof d%s==="string")',C)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",C,C,C)("else if(d%s.length >= 0)",C)("m%s=d%s",C,C);break;case"string":T("m%s=String(d%s)",C,C);break;case"bool":T("m%s=Boolean(d%s)",C,C);break}}return T}_.fromObject=function(O){var k=O.fieldsArray,C=E.codegen(["d"],O.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!k.length)return C("return new this.ctor");C("var m=new this.ctor");for(var U=0;U<k.length;++U){var N=k[U].resolve(),H=E.safeProp(N.name);N.map?(C("if(d%s){",H)('if(typeof d%s!=="object")',H)("throw TypeError(%j)",N.fullName+": object expected")("m%s={}",H)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",H),A(C,N,U,H+"[ks[i]]")("}")("}")):N.repeated?(C("if(d%s){",H)("if(!Array.isArray(d%s))",H)("throw TypeError(%j)",N.fullName+": array expected")("m%s=[]",H)("for(var i=0;i<d%s.length;++i){",H),A(C,N,U,H+"[i]")("}")("}")):(N.resolvedType instanceof x||C("if(d%s!=null){",H),A(C,N,U,H),N.resolvedType instanceof x||C("}"))}return C("return m")};function P(T,O,k,C){if(O.resolvedType)O.resolvedType instanceof x?T("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",C,k,C,C,k,C,C):T("d%s=types[%i].toObject(m%s,o)",C,k,C);else{var U=!1;switch(O.type){case"double":case"float":T("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",C,C,C,C);break;case"uint64":U=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":T('if(typeof m%s==="number")',C)("d%s=o.longs===String?String(m%s):m%s",C,C,C)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",C,C,C,C,U?"true":"",C);break;case"bytes":T("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",C,C,C,C,C);break;default:T("d%s=m%s",C,C);break}}return T}_.toObject=function(O){var k=O.fieldsArray.slice().sort(E.compareFieldsById);if(!k.length)return E.codegen()("return {}");for(var C=E.codegen(["m","o"],O.name+"$toObject")("if(!o)")("o={}")("var d={}"),U=[],N=[],H=[],D=0;D<k.length;++D)k[D].partOf||(k[D].resolve().repeated?U:k[D].map?N:H).push(k[D]);if(U.length){for(C("if(o.arrays||o.defaults){"),D=0;D<U.length;++D)C("d%s=[]",E.safeProp(U[D].name));C("}")}if(N.length){for(C("if(o.objects||o.defaults){"),D=0;D<N.length;++D)C("d%s={}",E.safeProp(N[D].name));C("}")}if(H.length){for(C("if(o.defaults){"),D=0;D<H.length;++D){var j=H[D],V=E.safeProp(j.name);if(j.resolvedType instanceof x)C("d%s=o.enums===String?%j:%j",V,j.resolvedType.valuesById[j.typeDefault],j.typeDefault);else if(j.long)C("if(util.Long){")("var n=new util.Long(%i,%i,%j)",j.typeDefault.low,j.typeDefault.high,j.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",V)("}else")("d%s=o.longs===String?%j:%i",V,j.typeDefault.toString(),j.typeDefault.toNumber());else if(j.bytes){var X="["+Array.prototype.slice.call(j.typeDefault).join(",")+"]";C("if(o.bytes===String)d%s=%j",V,String.fromCharCode.apply(String,j.typeDefault))("else{")("d%s=%s",V,X)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",V,V)("}")}else C("d%s=%j",V,j.typeDefault)}C("}")}var re=!1;for(D=0;D<k.length;++D){var j=k[D],ee=O._fieldsArray.indexOf(j),V=E.safeProp(j.name);j.map?(re||(re=!0,C("var ks2")),C("if(m%s&&(ks2=Object.keys(m%s)).length){",V,V)("d%s={}",V)("for(var j=0;j<ks2.length;++j){"),P(C,j,ee,V+"[ks2[j]]")("}")):j.repeated?(C("if(m%s&&m%s.length){",V,V)("d%s=[]",V)("for(var j=0;j<m%s.length;++j){",V),P(C,j,ee,V+"[j]")("}")):(C("if(m%s!=null&&m.hasOwnProperty(%j)){",V,j.name),P(C,j,ee,V),j.partOf&&C("if(o.oneofs)")("d%s=%j",E.safeProp(j.partOf.name),j.name)),C("}")}return C("return d")}}(converter$2)),converter$2}var wrappers={};(function(v){var _=v,x=message$1;_[".google.protobuf.Any"]={fromObject:function(E){if(E&&E["@type"]){var A=E["@type"].substring(E["@type"].lastIndexOf("/")+1),P=this.lookup(A);if(P){var T=E["@type"].charAt(0)==="."?E["@type"].slice(1):E["@type"];return T.indexOf("/")===-1&&(T="/"+T),this.create({type_url:T,value:P.encode(P.fromObject(E)).finish()})}}return this.fromObject(E)},toObject:function(E,A){var P="type.googleapis.com/",T="",O="";if(A&&A.json&&E.type_url&&E.value){O=E.type_url.substring(E.type_url.lastIndexOf("/")+1),T=E.type_url.substring(0,E.type_url.lastIndexOf("/")+1);var k=this.lookup(O);k&&(E=k.decode(E.value))}if(!(E instanceof this.ctor)&&E instanceof x){var C=E.$type.toObject(E,A),U=E.$type.fullName[0]==="."?E.$type.fullName.slice(1):E.$type.fullName;return T===""&&(T=P),O=T+U,C["@type"]=O,C}return this.toObject(E,A)}}})(wrappers);var type$1,hasRequiredType;function requireType(){if(hasRequiredType)return type$1;hasRequiredType=1,type$1=V;var v=requireNamespace();((V.prototype=Object.create(v.prototype)).constructor=V).className="Type";var _=require_enum(),x=requireOneof(),E=requireField(),A=requireMapfield(),P=requireService(),T=message$1,O=reader,k=writer,C=requireUtil(),U=requireEncoder(),N=requireDecoder(),H=requireVerifier(),D=requireConverter(),j=wrappers;function V(re,ee){v.call(this,re,ee),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(V.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var re=Object.keys(this.fields),ee=0;ee<re.length;++ee){var fe=this.fields[re[ee]],le=fe.id;if(this._fieldsById[le])throw Error("duplicate id "+le+" in "+this);this._fieldsById[le]=fe}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=C.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=C.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=V.generateConstructor(this)())},set:function(re){var ee=re.prototype;ee instanceof T||((re.prototype=new T).constructor=re,C.merge(re.prototype,ee)),re.$type=re.prototype.$type=this,C.merge(re,T,!0),this._ctor=re;for(var fe=0;fe<this.fieldsArray.length;++fe)this._fieldsArray[fe].resolve();var le={};for(fe=0;fe<this.oneofsArray.length;++fe)le[this._oneofsArray[fe].resolve().name]={get:C.oneOfGetter(this._oneofsArray[fe].oneof),set:C.oneOfSetter(this._oneofsArray[fe].oneof)};fe&&Object.defineProperties(re.prototype,le)}}}),V.generateConstructor=function(ee){for(var fe=C.codegen(["p"],ee.name),le=0,pe;le<ee.fieldsArray.length;++le)(pe=ee._fieldsArray[le]).map?fe("this%s={}",C.safeProp(pe.name)):pe.repeated&&fe("this%s=[]",C.safeProp(pe.name));return fe("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function X(re){return re._fieldsById=re._fieldsArray=re._oneofsArray=null,delete re.encode,delete re.decode,delete re.verify,re}return V.fromJSON=function(ee,fe){var le=new V(ee,fe.options);le.extensions=fe.extensions,le.reserved=fe.reserved;for(var pe=Object.keys(fe.fields),ie=0;ie<pe.length;++ie)le.add((typeof fe.fields[pe[ie]].keyType<"u"?A.fromJSON:E.fromJSON)(pe[ie],fe.fields[pe[ie]]));if(fe.oneofs)for(pe=Object.keys(fe.oneofs),ie=0;ie<pe.length;++ie)le.add(x.fromJSON(pe[ie],fe.oneofs[pe[ie]]));if(fe.nested)for(pe=Object.keys(fe.nested),ie=0;ie<pe.length;++ie){var he=fe.nested[pe[ie]];le.add((he.id!==void 0?E.fromJSON:he.fields!==void 0?V.fromJSON:he.values!==void 0?_.fromJSON:he.methods!==void 0?P.fromJSON:v.fromJSON)(pe[ie],he))}return fe.extensions&&fe.extensions.length&&(le.extensions=fe.extensions),fe.reserved&&fe.reserved.length&&(le.reserved=fe.reserved),fe.group&&(le.group=!0),fe.comment&&(le.comment=fe.comment),le},V.prototype.toJSON=function(ee){var fe=v.prototype.toJSON.call(this,ee),le=ee?!!ee.keepComments:!1;return C.toObject(["options",fe&&fe.options||void 0,"oneofs",v.arrayToJSON(this.oneofsArray,ee),"fields",v.arrayToJSON(this.fieldsArray.filter(function(pe){return!pe.declaringField}),ee)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",fe&&fe.nested||void 0,"comment",le?this.comment:void 0])},V.prototype.resolveAll=function(){for(var ee=this.fieldsArray,fe=0;fe<ee.length;)ee[fe++].resolve();var le=this.oneofsArray;for(fe=0;fe<le.length;)le[fe++].resolve();return v.prototype.resolveAll.call(this)},V.prototype.get=function(ee){return this.fields[ee]||this.oneofs&&this.oneofs[ee]||this.nested&&this.nested[ee]||null},V.prototype.add=function(ee){if(this.get(ee.name))throw Error("duplicate name '"+ee.name+"' in "+this);if(ee instanceof E&&ee.extend===void 0){if(this._fieldsById?this._fieldsById[ee.id]:this.fieldsById[ee.id])throw Error("duplicate id "+ee.id+" in "+this);if(this.isReservedId(ee.id))throw Error("id "+ee.id+" is reserved in "+this);if(this.isReservedName(ee.name))throw Error("name '"+ee.name+"' is reserved in "+this);return ee.parent&&ee.parent.remove(ee),this.fields[ee.name]=ee,ee.message=this,ee.onAdd(this),X(this)}return ee instanceof x?(this.oneofs||(this.oneofs={}),this.oneofs[ee.name]=ee,ee.onAdd(this),X(this)):v.prototype.add.call(this,ee)},V.prototype.remove=function(ee){if(ee instanceof E&&ee.extend===void 0){if(!this.fields||this.fields[ee.name]!==ee)throw Error(ee+" is not a member of "+this);return delete this.fields[ee.name],ee.parent=null,ee.onRemove(this),X(this)}if(ee instanceof x){if(!this.oneofs||this.oneofs[ee.name]!==ee)throw Error(ee+" is not a member of "+this);return delete this.oneofs[ee.name],ee.parent=null,ee.onRemove(this),X(this)}return v.prototype.remove.call(this,ee)},V.prototype.isReservedId=function(ee){return v.isReservedId(this.reserved,ee)},V.prototype.isReservedName=function(ee){return v.isReservedName(this.reserved,ee)},V.prototype.create=function(ee){return new this.ctor(ee)},V.prototype.setup=function(){for(var ee=this.fullName,fe=[],le=0;le<this.fieldsArray.length;++le)fe.push(this._fieldsArray[le].resolve().resolvedType);this.encode=U(this)({Writer:k,types:fe,util:C}),this.decode=N(this)({Reader:O,types:fe,util:C}),this.verify=H(this)({types:fe,util:C}),this.fromObject=D.fromObject(this)({types:fe,util:C}),this.toObject=D.toObject(this)({types:fe,util:C});var pe=j[ee];if(pe){var ie=Object.create(this);ie.fromObject=this.fromObject,this.fromObject=pe.fromObject.bind(ie),ie.toObject=this.toObject,this.toObject=pe.toObject.bind(ie)}return this},V.prototype.encode=function(ee,fe){return this.setup().encode(ee,fe)},V.prototype.encodeDelimited=function(ee,fe){return this.encode(ee,fe&&fe.len?fe.fork():fe).ldelim()},V.prototype.decode=function(ee,fe){return this.setup().decode(ee,fe)},V.prototype.decodeDelimited=function(ee){return ee instanceof O||(ee=O.create(ee)),this.decode(ee,ee.uint32())},V.prototype.verify=function(ee){return this.setup().verify(ee)},V.prototype.fromObject=function(ee){return this.setup().fromObject(ee)},V.prototype.toObject=function(ee,fe){return this.setup().toObject(ee,fe)},V.d=function(ee){return function(le){C.decorateType(le,ee)}},type$1}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=k;var v=requireNamespace();((k.prototype=Object.create(v.prototype)).constructor=k).className="Root";var _=requireField(),x=require_enum(),E=requireOneof(),A=requireUtil(),P,T,O;function k(H){v.call(this,"",H),this.deferred=[],this.files=[]}k.fromJSON=function(D,j){return j||(j=new k),D.options&&j.setOptions(D.options),j.addJSON(D.nested)},k.prototype.resolvePath=A.path.resolve,k.prototype.fetch=A.fetch;function C(){}k.prototype.load=function H(D,j,V){typeof j=="function"&&(V=j,j=void 0);var X=this;if(!V)return A.asPromise(H,X,D,j);var re=V===C;function ee(te,ue){if(V){var ne=V;if(V=null,re)throw te;ne(te,ue)}}function fe(te){var ue=te.lastIndexOf("google/protobuf/");if(ue>-1){var ne=te.substring(ue);if(ne in O)return ne}return null}function le(te,ue){try{if(A.isString(ue)&&ue.charAt(0)==="{"&&(ue=JSON.parse(ue)),!A.isString(ue))X.setOptions(ue.options).addJSON(ue.nested);else{T.filename=te;var ne=T(ue,X,j),J,q=0;if(ne.imports)for(;q<ne.imports.length;++q)(J=fe(ne.imports[q])||X.resolvePath(te,ne.imports[q]))&&pe(J);if(ne.weakImports)for(q=0;q<ne.weakImports.length;++q)(J=fe(ne.weakImports[q])||X.resolvePath(te,ne.weakImports[q]))&&pe(J,!0)}}catch(F){ee(F)}!re&&!ie&&ee(null,X)}function pe(te,ue){if(te=fe(te)||te,!(X.files.indexOf(te)>-1)){if(X.files.push(te),te in O){re?le(te,O[te]):(++ie,setTimeout(function(){--ie,le(te,O[te])}));return}if(re){var ne;try{ne=A.fs.readFileSync(te).toString("utf8")}catch(J){ue||ee(J);return}le(te,ne)}else++ie,X.fetch(te,function(J,q){if(--ie,!!V){if(J){ue?ie||ee(null,X):ee(J);return}le(te,q)}})}}var ie=0;A.isString(D)&&(D=[D]);for(var he=0,ae;he<D.length;++he)(ae=X.resolvePath("",D[he]))&&pe(ae);if(re)return X;ie||ee(null,X)},k.prototype.loadSync=function(D,j){if(!A.isNode)throw Error("not supported");return this.load(D,j,C)},k.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(D){return"'extend "+D.extend+"' in "+D.parent.fullName}).join(", "));return v.prototype.resolveAll.call(this)};var U=/^[A-Z]/;function N(H,D){var j=D.parent.lookup(D.extend);if(j){var V=new _(D.fullName,D.id,D.type,D.rule,void 0,D.options);return j.get(V.name)||(V.declaringField=D,D.extensionField=V,j.add(V)),!0}return!1}return k.prototype._handleAdd=function(D){if(D instanceof _)D.extend!==void 0&&!D.extensionField&&(N(this,D)||this.deferred.push(D));else if(D instanceof x)U.test(D.name)&&(D.parent[D.name]=D.values);else if(!(D instanceof E)){if(D instanceof P)for(var j=0;j<this.deferred.length;)N(this,this.deferred[j])?this.deferred.splice(j,1):++j;for(var V=0;V<D.nestedArray.length;++V)this._handleAdd(D._nestedArray[V]);U.test(D.name)&&(D.parent[D.name]=D)}},k.prototype._handleRemove=function(D){if(D instanceof _){if(D.extend!==void 0)if(D.extensionField)D.extensionField.parent.remove(D.extensionField),D.extensionField=null;else{var j=this.deferred.indexOf(D);j>-1&&this.deferred.splice(j,1)}}else if(D instanceof x)U.test(D.name)&&delete D.parent[D.name];else if(D instanceof v){for(var V=0;V<D.nestedArray.length;++V)this._handleRemove(D._nestedArray[V]);U.test(D.name)&&delete D.parent[D.name]}},k._configure=function(H,D,j){P=H,T=D,O=j},root}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$2.exports;hasRequiredUtil=1;var v=util$2.exports=requireMinimal(),_=roots,x,E;v.codegen=codegen_1,v.fetch=fetch_1,v.path=path,v.fs=v.inquire("fs"),v.toArray=function(C){if(C){for(var U=Object.keys(C),N=new Array(U.length),H=0;H<U.length;)N[H]=C[U[H++]];return N}return[]},v.toObject=function(C){for(var U={},N=0;N<C.length;){var H=C[N++],D=C[N++];D!==void 0&&(U[H]=D)}return U};var A=/\\/g,P=/"/g;v.isReserved=function(C){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(C)},v.safeProp=function(C){return!/^[$\w_]+$/.test(C)||v.isReserved(C)?'["'+C.replace(A,"\\\\").replace(P,'\\"')+'"]':"."+C},v.ucFirst=function(C){return C.charAt(0).toUpperCase()+C.substring(1)};var T=/_([a-z])/g;v.camelCase=function(C){return C.substring(0,1)+C.substring(1).replace(T,function(U,N){return N.toUpperCase()})},v.compareFieldsById=function(C,U){return C.id-U.id},v.decorateType=function(C,U){if(C.$type)return U&&C.$type.name!==U&&(v.decorateRoot.remove(C.$type),C.$type.name=U,v.decorateRoot.add(C.$type)),C.$type;x||(x=requireType());var N=new x(U||C.name);return v.decorateRoot.add(N),N.ctor=C,Object.defineProperty(C,"$type",{value:N,enumerable:!1}),Object.defineProperty(C.prototype,"$type",{value:N,enumerable:!1}),N};var O=0;return v.decorateEnum=function(C){if(C.$type)return C.$type;E||(E=require_enum());var U=new E("Enum"+O++,C);return v.decorateRoot.add(U),Object.defineProperty(C,"$type",{value:U,enumerable:!1}),U},v.setProperty=function(C,U,N){function H(D,j,V){var X=j.shift();if(X==="__proto__"||X==="prototype")return D;if(j.length>0)D[X]=H(D[X]||{},j,V);else{var re=D[X];re&&(V=[].concat(re).concat(V)),D[X]=V}return D}if(typeof C!="object")throw TypeError("dst must be an object");if(!U)throw TypeError("path must be specified");return U=U.split("."),H(C,U,N)},Object.defineProperty(v,"decorateRoot",{get:function(){return _.decorated||(_.decorated=new(requireRoot()))}}),util$2.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=x,x.className="ReflectionObject";var v=requireUtil(),_;function x(E,A){if(!v.isString(E))throw TypeError("name must be a string");if(A&&!v.isObject(A))throw TypeError("options must be an object");this.options=A,this.parsedOptions=null,this.name=E,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(x.prototype,{root:{get:function(){for(var E=this;E.parent!==null;)E=E.parent;return E}},fullName:{get:function(){for(var E=[this.name],A=this.parent;A;)E.unshift(A.name),A=A.parent;return E.join(".")}}}),x.prototype.toJSON=function(){throw Error()},x.prototype.onAdd=function(A){this.parent&&this.parent!==A&&this.parent.remove(this),this.parent=A,this.resolved=!1;var P=A.root;P instanceof _&&P._handleAdd(this)},x.prototype.onRemove=function(A){var P=A.root;P instanceof _&&P._handleRemove(this),this.parent=null,this.resolved=!1},x.prototype.resolve=function(){return this.resolved?this:(this.root instanceof _&&(this.resolved=!0),this)},x.prototype.getOption=function(A){if(this.options)return this.options[A]},x.prototype.setOption=function(A,P,T){return(!T||!this.options||this.options[A]===void 0)&&((this.options||(this.options={}))[A]=P),this},x.prototype.setParsedOption=function(A,P,T){this.parsedOptions||(this.parsedOptions=[]);var O=this.parsedOptions;if(T){var k=O.find(function(N){return Object.prototype.hasOwnProperty.call(N,A)});if(k){var C=k[A];v.setProperty(C,T,P)}else k={},k[A]=v.setProperty({},T,P),O.push(k)}else{var U={};U[A]=P,O.push(U)}return this},x.prototype.setOptions=function(A,P){if(A)for(var T=Object.keys(A),O=0;O<T.length;++O)this.setOption(T[O],A[T[O]],P);return this},x.prototype.toString=function(){var A=this.constructor.className,P=this.fullName;return P.length?A+" "+P:A},x._configure=function(E){_=E},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=E;var v=requireObject();((E.prototype=Object.create(v.prototype)).constructor=E).className="Enum";var _=requireNamespace(),x=requireUtil();function E(A,P,T,O,k,C){if(v.call(this,A,T),P&&typeof P!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=O,this.comments=k||{},this.valuesOptions=C,this.reserved=void 0,P)for(var U=Object.keys(P),N=0;N<U.length;++N)typeof P[U[N]]=="number"&&(this.valuesById[this.values[U[N]]=P[U[N]]]=U[N])}return E.fromJSON=function(P,T){var O=new E(P,T.values,T.options,T.comment,T.comments);return O.reserved=T.reserved,O},E.prototype.toJSON=function(P){var T=P?!!P.keepComments:!1;return x.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",T?this.comment:void 0,"comments",T?this.comments:void 0])},E.prototype.add=function(P,T,O,k){if(!x.isString(P))throw TypeError("name must be a string");if(!x.isInteger(T))throw TypeError("id must be an integer");if(this.values[P]!==void 0)throw Error("duplicate name '"+P+"' in "+this);if(this.isReservedId(T))throw Error("id "+T+" is reserved in "+this);if(this.isReservedName(P))throw Error("name '"+P+"' is reserved in "+this);if(this.valuesById[T]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+T+" in "+this);this.values[P]=T}else this.valuesById[this.values[P]=T]=P;return k&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[P]=k||null),this.comments[P]=O||null,this},E.prototype.remove=function(P){if(!x.isString(P))throw TypeError("name must be a string");var T=this.values[P];if(T==null)throw Error("name '"+P+"' does not exist in "+this);return delete this.valuesById[T],delete this.values[P],delete this.comments[P],this.valuesOptions&&delete this.valuesOptions[P],this},E.prototype.isReservedId=function(P){return _.isReservedId(this.reserved,P)},E.prototype.isReservedName=function(P){return _.isReservedName(this.reserved,P)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=A;var v=require_enum(),_=requireTypes(),x=requireUtil();function E(P,T,O,k){return T.resolvedType.group?P("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",O,k,(T.id<<3|3)>>>0,(T.id<<3|4)>>>0):P("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",O,k,(T.id<<3|2)>>>0)}function A(P){for(var T=x.codegen(["m","w"],P.name+"$encode")("if(!w)")("w=Writer.create()"),O,k,C=P.fieldsArray.slice().sort(x.compareFieldsById),O=0;O<C.length;++O){var U=C[O].resolve(),N=P._fieldsArray.indexOf(U),H=U.resolvedType instanceof v?"int32":U.type,D=_.basic[H];k="m"+x.safeProp(U.name),U.map?(T("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",k,U.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",k)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(U.id<<3|2)>>>0,8|_.mapKey[U.keyType],U.keyType),D===void 0?T("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",N,k):T(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|D,H,k),T("}")("}")):U.repeated?(T("if(%s!=null&&%s.length){",k,k),U.packed&&_.packed[H]!==void 0?T("w.uint32(%i).fork()",(U.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",k)("w.%s(%s[i])",H,k)("w.ldelim()"):(T("for(var i=0;i<%s.length;++i)",k),D===void 0?E(T,U,N,k+"[i]"):T("w.uint32(%i).%s(%s[i])",(U.id<<3|D)>>>0,H,k)),T("}")):(U.optional&&T("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",k,U.name),D===void 0?E(T,U,N,k):T("w.uint32(%i).%s(%s)",(U.id<<3|D)>>>0,H,k))}return T("return w")}return encoder_1}var protobuf$1=indexLight.exports=indexMinimal;protobuf$1.build="light";function load(v,_,x){return typeof _=="function"?(x=_,_=new protobuf$1.Root):_||(_=new protobuf$1.Root),_.load(v,x)}protobuf$1.load=load;function loadSync(v,_){return _||(_=new protobuf$1.Root),_.loadSync(v)}protobuf$1.loadSync=loadSync,protobuf$1.encoder=requireEncoder(),protobuf$1.decoder=requireDecoder(),protobuf$1.verifier=requireVerifier(),protobuf$1.converter=requireConverter(),protobuf$1.ReflectionObject=requireObject(),protobuf$1.Namespace=requireNamespace(),protobuf$1.Root=requireRoot(),protobuf$1.Enum=require_enum(),protobuf$1.Type=requireType(),protobuf$1.Field=requireField(),protobuf$1.OneOf=requireOneof(),protobuf$1.MapField=requireMapfield(),protobuf$1.Service=requireService(),protobuf$1.Method=requireMethod(),protobuf$1.Message=message$1,protobuf$1.wrappers=wrappers,protobuf$1.types=requireTypes(),protobuf$1.util=requireUtil(),protobuf$1.ReflectionObject._configure(protobuf$1.Root),protobuf$1.Namespace._configure(protobuf$1.Type,protobuf$1.Service,protobuf$1.Enum),protobuf$1.Root._configure(protobuf$1.Type),protobuf$1.Field._configure(protobuf$1.Type);var indexLightExports=indexLight.exports,tokenize_1=tokenize$1,delimRe=/[\s{}=;:[\],'"()<>]/g,stringDoubleRe=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,stringSingleRe=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,setCommentRe=/^ *[*/]+ */,setCommentAltRe=/^\s*\*?\/*/,setCommentSplitRe=/\n/g,whitespaceRe=/\s/,unescapeRe=/\\(.?)/g,unescapeMap={0:"\0",r:"\r",n:`
`,t:"	"};function unescape$1(v){return v.replace(unescapeRe,function(_,x){switch(x){case"\\":case"":return x;default:return unescapeMap[x]||""}})}tokenize$1.unescape=unescape$1;function tokenize$1(v,_){v=v.toString();var x=0,E=v.length,A=1,P=0,T={},O=[],k=null;function C(le){return Error("illegal "+le+" (line "+A+")")}function U(){var le=k==="'"?stringSingleRe:stringDoubleRe;le.lastIndex=x-1;var pe=le.exec(v);if(!pe)throw C("string");return x=le.lastIndex,X(k),k=null,unescape$1(pe[1])}function N(le){return v.charAt(le)}function H(le,pe,ie){var he={type:v.charAt(le++),lineEmpty:!1,leading:ie},ae;_?ae=2:ae=3;var te=le-ae,ue;do if(--te<0||(ue=v.charAt(te))===`
`){he.lineEmpty=!0;break}while(ue===" "||ue==="	");for(var ne=v.substring(le,pe).split(setCommentSplitRe),J=0;J<ne.length;++J)ne[J]=ne[J].replace(_?setCommentAltRe:setCommentRe,"").trim();he.text=ne.join(`
`).trim(),T[A]=he,P=A}function D(le){var pe=j(le),ie=v.substring(le,pe),he=/^\s*\/\//.test(ie);return he}function j(le){for(var pe=le;pe<E&&N(pe)!==`
`;)pe++;return pe}function V(){if(O.length>0)return O.shift();if(k)return U();var le,pe,ie,he,ae,te=x===0;do{if(x===E)return null;for(le=!1;whitespaceRe.test(ie=N(x));)if(ie===`
`&&(te=!0,++A),++x===E)return null;if(N(x)==="/"){if(++x===E)throw C("comment");if(N(x)==="/")if(_){if(he=x,ae=!1,D(x-1)){ae=!0;do if(x=j(x),x===E||(x++,!te))break;while(D(x))}else x=Math.min(E,j(x)+1);ae&&(H(he,x,te),te=!0),A++,le=!0}else{for(ae=N(he=x+1)==="/";N(++x)!==`
`;)if(x===E)return null;++x,ae&&(H(he,x-1,te),te=!0),++A,le=!0}else if((ie=N(x))==="*"){he=x+1,ae=_||N(he)==="*";do{if(ie===`
`&&++A,++x===E)throw C("comment");pe=ie,ie=N(x)}while(pe!=="*"||ie!=="/");++x,ae&&(H(he,x-2,te),te=!0),le=!0}else return"/"}}while(le);var ue=x;delimRe.lastIndex=0;var ne=delimRe.test(N(ue++));if(!ne)for(;ue<E&&!delimRe.test(N(ue));)++ue;var J=v.substring(x,x=ue);return(J==='"'||J==="'")&&(k=J),J}function X(le){O.push(le)}function re(){if(!O.length){var le=V();if(le===null)return null;X(le)}return O[0]}function ee(le,pe){var ie=re(),he=ie===le;if(he)return V(),!0;if(!pe)throw C("token '"+ie+"', '"+le+"' expected");return!1}function fe(le){var pe=null,ie;return le===void 0?(ie=T[A-1],delete T[A-1],ie&&(_||ie.type==="*"||ie.lineEmpty)&&(pe=ie.leading?ie.text:null)):(P<le&&re(),ie=T[le],delete T[le],ie&&!ie.lineEmpty&&(_||ie.type==="/")&&(pe=ie.leading?null:ie.text)),pe}return Object.defineProperty({next:V,peek:re,push:X,skip:ee,cmnt:fe},"line",{get:function(){return A}})}var parse_1=parse;parse.filename=null,parse.defaults={keepCase:!1};var tokenize=tokenize_1,Root=requireRoot(),Type=requireType(),Field=requireField(),MapField=requireMapfield(),OneOf=requireOneof(),Enum=require_enum(),Service=requireService(),Method=requireMethod(),types$9=requireTypes(),util=requireUtil(),base10Re=/^[1-9][0-9]*$/,base10NegRe=/^-?[1-9][0-9]*$/,base16Re=/^0[x][0-9a-fA-F]+$/,base16NegRe=/^-?0[x][0-9a-fA-F]+$/,base8Re=/^0[0-7]+$/,base8NegRe=/^-?0[0-7]+$/,numberRe=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,nameRe=/^[a-zA-Z_][a-zA-Z_0-9]*$/,typeRefRe=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,fqTypeRefRe=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(v,_,x){_ instanceof Root||(x=_,_=new Root),x||(x=parse.defaults);var E=x.preferTrailingComment||!1,A=tokenize(v,x.alternateCommentMode||!1),P=A.next,T=A.push,O=A.peek,k=A.skip,C=A.cmnt,U=!0,N,H,D,j,V=!1,X=_,re=x.keepCase?function(Re){return Re}:util.camelCase;function ee(Re,Me,xe){var Ee=parse.filename;return xe||(parse.filename=null),Error("illegal "+(Me||"token")+" '"+Re+"' ("+(Ee?Ee+", ":"")+"line "+A.line+")")}function fe(){var Re=[],Me;do{if((Me=P())!=='"'&&Me!=="'")throw ee(Me);Re.push(P()),k(Me),Me=O()}while(Me==='"'||Me==="'");return Re.join("")}function le(Re){var Me=P();switch(Me){case"'":case'"':return T(Me),fe();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return ie(Me,!0)}catch{if(Re&&typeRefRe.test(Me))return Me;throw ee(Me,"value")}}function pe(Re,Me){var xe,Ee;do Me&&((xe=O())==='"'||xe==="'")?Re.push(fe()):Re.push([Ee=he(P()),k("to",!0)?he(P()):Ee]);while(k(",",!0));k(";")}function ie(Re,Me){var xe=1;switch(Re.charAt(0)==="-"&&(xe=-1,Re=Re.substring(1)),Re){case"inf":case"INF":case"Inf":return xe*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(base10Re.test(Re))return xe*parseInt(Re,10);if(base16Re.test(Re))return xe*parseInt(Re,16);if(base8Re.test(Re))return xe*parseInt(Re,8);if(numberRe.test(Re))return xe*parseFloat(Re);throw ee(Re,"number",Me)}function he(Re,Me){switch(Re){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!Me&&Re.charAt(0)==="-")throw ee(Re,"id");if(base10NegRe.test(Re))return parseInt(Re,10);if(base16NegRe.test(Re))return parseInt(Re,16);if(base8NegRe.test(Re))return parseInt(Re,8);throw ee(Re,"id")}function ae(){if(N!==void 0)throw ee("package");if(N=P(),!typeRefRe.test(N))throw ee(N,"name");X=X.define(N),k(";")}function te(){var Re=O(),Me;switch(Re){case"weak":Me=D||(D=[]),P();break;case"public":P();default:Me=H||(H=[]);break}Re=fe(),k(";"),Me.push(Re)}function ue(){if(k("="),j=fe(),V=j==="proto3",!V&&j!=="proto2")throw ee(j,"syntax");k(";")}function ne(Re,Me){switch(Me){case"option":return oe(Re,Me),k(";"),!0;case"message":return q(Re,Me),!0;case"enum":return de(Re,Me),!0;case"service":return Pe(Re,Me),!0;case"extend":return Be(Re,Me),!0}return!1}function J(Re,Me,xe){var Ee=A.line;if(Re&&(typeof Re.comment!="string"&&(Re.comment=C()),Re.filename=parse.filename),k("{",!0)){for(var Ue;(Ue=P())!=="}";)Me(Ue);k(";",!0)}else xe&&xe(),k(";"),Re&&(typeof Re.comment!="string"||E)&&(Re.comment=C(Ee)||Re.comment)}function q(Re,Me){if(!nameRe.test(Me=P()))throw ee(Me,"type name");var xe=new Type(Me);J(xe,function(Ue){if(!ne(xe,Ue))switch(Ue){case"map":Z(xe);break;case"required":case"repeated":F(xe,Ue);break;case"optional":V?F(xe,"proto3_optional"):F(xe,"optional");break;case"oneof":Q(xe,Ue);break;case"extensions":pe(xe.extensions||(xe.extensions=[]));break;case"reserved":pe(xe.reserved||(xe.reserved=[]),!0);break;default:if(!V||!typeRefRe.test(Ue))throw ee(Ue);T(Ue),F(xe,"optional");break}}),Re.add(xe)}function F(Re,Me,xe){var Ee=P();if(Ee==="group"){L(Re,Me);return}for(;Ee.endsWith(".")||O().startsWith(".");)Ee+=P();if(!typeRefRe.test(Ee))throw ee(Ee,"type");var Ue=P();if(!nameRe.test(Ue))throw ee(Ue,"name");Ue=re(Ue),k("=");var Ke=new Field(Ue,he(P()),Ee,Me,xe);if(J(Ke,function(Je){if(Je==="option")oe(Ke,Je),k(";");else throw ee(Je)},function(){we(Ke)}),Me==="proto3_optional"){var ze=new OneOf("_"+Ue);Ke.setOption("proto3_optional",!0),ze.add(Ke),Re.add(ze)}else Re.add(Ke);!V&&Ke.repeated&&(types$9.packed[Ee]!==void 0||types$9.basic[Ee]===void 0)&&Ke.setOption("packed",!1,!0)}function L(Re,Me){var xe=P();if(!nameRe.test(xe))throw ee(xe,"name");var Ee=util.lcFirst(xe);xe===Ee&&(xe=util.ucFirst(xe)),k("=");var Ue=he(P()),Ke=new Type(xe);Ke.group=!0;var ze=new Field(Ee,Ue,xe,Me);ze.filename=parse.filename,J(Ke,function(Je){switch(Je){case"option":oe(Ke,Je),k(";");break;case"required":case"repeated":F(Ke,Je);break;case"optional":V?F(Ke,"proto3_optional"):F(Ke,"optional");break;case"message":q(Ke,Je);break;case"enum":de(Ke,Je);break;default:throw ee(Je)}}),Re.add(Ke).add(ze)}function Z(Re){k("<");var Me=P();if(types$9.mapKey[Me]===void 0)throw ee(Me,"type");k(",");var xe=P();if(!typeRefRe.test(xe))throw ee(xe,"type");k(">");var Ee=P();if(!nameRe.test(Ee))throw ee(Ee,"name");k("=");var Ue=new MapField(re(Ee),he(P()),Me,xe);J(Ue,function(ze){if(ze==="option")oe(Ue,ze),k(";");else throw ee(ze)},function(){we(Ue)}),Re.add(Ue)}function Q(Re,Me){if(!nameRe.test(Me=P()))throw ee(Me,"name");var xe=new OneOf(re(Me));J(xe,function(Ue){Ue==="option"?(oe(xe,Ue),k(";")):(T(Ue),F(xe,"optional"))}),Re.add(xe)}function de(Re,Me){if(!nameRe.test(Me=P()))throw ee(Me,"name");var xe=new Enum(Me);J(xe,function(Ue){switch(Ue){case"option":oe(xe,Ue),k(";");break;case"reserved":pe(xe.reserved||(xe.reserved=[]),!0);break;default:ye(xe,Ue)}}),Re.add(xe)}function ye(Re,Me){if(!nameRe.test(Me))throw ee(Me,"name");k("=");var xe=he(P(),!0),Ee={options:void 0};Ee.setOption=function(Ue,Ke){this.options===void 0&&(this.options={}),this.options[Ue]=Ke},J(Ee,function(Ke){if(Ke==="option")oe(Ee,Ke),k(";");else throw ee(Ke)},function(){we(Ee)}),Re.add(Me,xe,Ee.comment,Ee.options)}function oe(Re,Me){var xe=k("(",!0);if(!typeRefRe.test(Me=P()))throw ee(Me,"name");var Ee=Me,Ue=Ee,Ke;xe&&(k(")"),Ee="("+Ee+")",Ue=Ee,Me=O(),fqTypeRefRe.test(Me)&&(Ke=Me.slice(1),Ee+=Me,P())),k("=");var ze=se(Re,Ee);ce(Re,Ue,ze,Ke)}function se(Re,Me){if(k("{",!0)){for(var xe={};!k("}",!0);){if(!nameRe.test(Ie=P()))throw ee(Ie,"name");if(Ie===null)throw ee(Ie,"end of input");var Ee,Ue=Ie;if(k(":",!0),O()==="{")Ee=se(Re,Me+"."+Ie);else if(O()==="["){Ee=[];var Ke;if(k("[",!0)){do Ke=le(!0),Ee.push(Ke);while(k(",",!0));k("]"),typeof Ke<"u"&&Y(Re,Me+"."+Ie,Ke)}}else Ee=le(!0),Y(Re,Me+"."+Ie,Ee);var ze=xe[Ue];ze&&(Ee=[].concat(ze).concat(Ee)),xe[Ue]=Ee,k(",",!0),k(";",!0)}return xe}var Ve=le(!0);return Y(Re,Me,Ve),Ve}function Y(Re,Me,xe){Re.setOption&&Re.setOption(Me,xe)}function ce(Re,Me,xe,Ee){Re.setParsedOption&&Re.setParsedOption(Me,xe,Ee)}function we(Re){if(k("[",!0)){do oe(Re,"option");while(k(",",!0));k("]")}return Re}function Pe(Re,Me){if(!nameRe.test(Me=P()))throw ee(Me,"service name");var xe=new Service(Me);J(xe,function(Ue){if(!ne(xe,Ue))if(Ue==="rpc")Se(xe,Ue);else throw ee(Ue)}),Re.add(xe)}function Se(Re,Me){var xe=C(),Ee=Me;if(!nameRe.test(Me=P()))throw ee(Me,"name");var Ue=Me,Ke,ze,Ve,Je;if(k("("),k("stream",!0)&&(ze=!0),!typeRefRe.test(Me=P())||(Ke=Me,k(")"),k("returns"),k("("),k("stream",!0)&&(Je=!0),!typeRefRe.test(Me=P())))throw ee(Me);Ve=Me,k(")");var et=new Method(Ue,Ee,Ke,Ve,ze,Je);et.comment=xe,J(et,function(ot){if(ot==="option")oe(et,ot),k(";");else throw ee(ot)}),Re.add(et)}function Be(Re,Me){if(!typeRefRe.test(Me=P()))throw ee(Me,"reference");var xe=Me;J(null,function(Ue){switch(Ue){case"required":case"repeated":F(Re,Ue,xe);break;case"optional":V?F(Re,"proto3_optional",xe):F(Re,"optional",xe);break;default:if(!V||!typeRefRe.test(Ue))throw ee(Ue);T(Ue),F(Re,"optional",xe);break}})}for(var Ie;(Ie=P())!==null;)switch(Ie){case"package":if(!U)throw ee(Ie);ae();break;case"import":if(!U)throw ee(Ie);te();break;case"syntax":if(!U)throw ee(Ie);ue();break;case"option":oe(X,Ie),k(";");break;default:if(ne(X,Ie)){U=!1;continue}throw ee(Ie)}return parse.filename=null,{package:N,imports:H,weakImports:D,syntax:j,root:_}}var common_1=common$1,commonRe=/\/|\./;function common$1(v,_){commonRe.test(v)||(v="google/protobuf/"+v+".proto",_={nested:{google:{nested:{protobuf:{nested:_}}}}}),common$1[v]=_}common$1("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var timeType;common$1("duration",{Duration:timeType={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),common$1("timestamp",{Timestamp:timeType}),common$1("empty",{Empty:{fields:{}}}),common$1("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),common$1("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),common$1("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),common$1.get=function v(_){return common$1[_]||null};var protobuf=src$2.exports=indexLightExports;protobuf.build="full",protobuf.tokenize=tokenize_1,protobuf.parse=parse_1,protobuf.common=common_1,protobuf.Root._configure(protobuf.Type,protobuf.parse,protobuf.common);var srcExports=src$2.exports,protobufjs=srcExports,minimal=indexMinimal,umd={exports:{}};(function(v,_){var x=function(E){Object.defineProperty(E,"__esModule",{value:!0}),E.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var A=null;try{A=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function P(Z,Q,de){this.low=Z|0,this.high=Q|0,this.unsigned=!!de}P.prototype.__isLong__,Object.defineProperty(P.prototype,"__isLong__",{value:!0});function T(Z){return(Z&&Z.__isLong__)===!0}function O(Z){var Q=Math.clz32(Z&-Z);return Z?31-Q:Q}P.isLong=T;var k={},C={};function U(Z,Q){var de,ye,oe;return Q?(Z>>>=0,(oe=0<=Z&&Z<256)&&(ye=C[Z],ye)?ye:(de=H(Z,0,!0),oe&&(C[Z]=de),de)):(Z|=0,(oe=-128<=Z&&Z<128)&&(ye=k[Z],ye)?ye:(de=H(Z,Z<0?-1:0,!1),oe&&(k[Z]=de),de))}P.fromInt=U;function N(Z,Q){if(isNaN(Z))return Q?he:ie;if(Q){if(Z<0)return he;if(Z>=fe)return J}else{if(Z<=-le)return q;if(Z+1>=le)return ne}return Z<0?N(-Z,Q).neg():H(Z%ee|0,Z/ee|0,Q)}P.fromNumber=N;function H(Z,Q,de){return new P(Z,Q,de)}P.fromBits=H;var D=Math.pow;function j(Z,Q,de){if(Z.length===0)throw Error("empty string");if(typeof Q=="number"?(de=Q,Q=!1):Q=!!Q,Z==="NaN"||Z==="Infinity"||Z==="+Infinity"||Z==="-Infinity")return Q?he:ie;if(de=de||10,de<2||36<de)throw RangeError("radix");var ye;if((ye=Z.indexOf("-"))>0)throw Error("interior hyphen");if(ye===0)return j(Z.substring(1),Q,de).neg();for(var oe=N(D(de,8)),se=ie,Y=0;Y<Z.length;Y+=8){var ce=Math.min(8,Z.length-Y),we=parseInt(Z.substring(Y,Y+ce),de);if(ce<8){var Pe=N(D(de,ce));se=se.mul(Pe).add(N(we))}else se=se.mul(oe),se=se.add(N(we))}return se.unsigned=Q,se}P.fromString=j;function V(Z,Q){return typeof Z=="number"?N(Z,Q):typeof Z=="string"?j(Z,Q):H(Z.low,Z.high,typeof Q=="boolean"?Q:Z.unsigned)}P.fromValue=V;var X=65536,re=1<<24,ee=X*X,fe=ee*ee,le=fe/2,pe=U(re),ie=U(0);P.ZERO=ie;var he=U(0,!0);P.UZERO=he;var ae=U(1);P.ONE=ae;var te=U(1,!0);P.UONE=te;var ue=U(-1);P.NEG_ONE=ue;var ne=H(-1,2147483647,!1);P.MAX_VALUE=ne;var J=H(-1,-1,!0);P.MAX_UNSIGNED_VALUE=J;var q=H(0,-2147483648,!1);P.MIN_VALUE=q;var F=P.prototype;F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*ee+(this.low>>>0):this.high*ee+(this.low>>>0)},F.toString=function(Q){if(Q=Q||10,Q<2||36<Q)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(q)){var de=N(Q),ye=this.div(de),oe=ye.mul(de).sub(this);return ye.toString(Q)+oe.toInt().toString(Q)}else return"-"+this.neg().toString(Q);for(var se=N(D(Q,6),this.unsigned),Y=this,ce="";;){var we=Y.div(se),Pe=Y.sub(we.mul(se)).toInt()>>>0,Se=Pe.toString(Q);if(Y=we,Y.isZero())return Se+ce;for(;Se.length<6;)Se="0"+Se;ce=""+Se+ce}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq(q)?64:this.neg().getNumBitsAbs();for(var Q=this.high!=0?this.high:this.low,de=31;de>0&&!(Q&1<<de);de--);return this.high!=0?de+33:de+1},F.isZero=function(){return this.high===0&&this.low===0},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return(this.low&1)===1},F.isEven=function(){return(this.low&1)===0},F.equals=function(Q){return T(Q)||(Q=V(Q)),this.unsigned!==Q.unsigned&&this.high>>>31===1&&Q.high>>>31===1?!1:this.high===Q.high&&this.low===Q.low},F.eq=F.equals,F.notEquals=function(Q){return!this.eq(Q)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(Q){return this.comp(Q)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(Q){return this.comp(Q)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(Q){return this.comp(Q)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(Q){return this.comp(Q)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(Q){if(T(Q)||(Q=V(Q)),this.eq(Q))return 0;var de=this.isNegative(),ye=Q.isNegative();return de&&!ye?-1:!de&&ye?1:this.unsigned?Q.high>>>0>this.high>>>0||Q.high===this.high&&Q.low>>>0>this.low>>>0?-1:1:this.sub(Q).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq(q)?q:this.not().add(ae)},F.neg=F.negate,F.add=function(Q){T(Q)||(Q=V(Q));var de=this.high>>>16,ye=this.high&65535,oe=this.low>>>16,se=this.low&65535,Y=Q.high>>>16,ce=Q.high&65535,we=Q.low>>>16,Pe=Q.low&65535,Se=0,Be=0,Ie=0,Re=0;return Re+=se+Pe,Ie+=Re>>>16,Re&=65535,Ie+=oe+we,Be+=Ie>>>16,Ie&=65535,Be+=ye+ce,Se+=Be>>>16,Be&=65535,Se+=de+Y,Se&=65535,H(Ie<<16|Re,Se<<16|Be,this.unsigned)},F.subtract=function(Q){return T(Q)||(Q=V(Q)),this.add(Q.neg())},F.sub=F.subtract,F.multiply=function(Q){if(this.isZero())return this;if(T(Q)||(Q=V(Q)),A){var de=A.mul(this.low,this.high,Q.low,Q.high);return H(de,A.get_high(),this.unsigned)}if(Q.isZero())return this.unsigned?he:ie;if(this.eq(q))return Q.isOdd()?q:ie;if(Q.eq(q))return this.isOdd()?q:ie;if(this.isNegative())return Q.isNegative()?this.neg().mul(Q.neg()):this.neg().mul(Q).neg();if(Q.isNegative())return this.mul(Q.neg()).neg();if(this.lt(pe)&&Q.lt(pe))return N(this.toNumber()*Q.toNumber(),this.unsigned);var ye=this.high>>>16,oe=this.high&65535,se=this.low>>>16,Y=this.low&65535,ce=Q.high>>>16,we=Q.high&65535,Pe=Q.low>>>16,Se=Q.low&65535,Be=0,Ie=0,Re=0,Me=0;return Me+=Y*Se,Re+=Me>>>16,Me&=65535,Re+=se*Se,Ie+=Re>>>16,Re&=65535,Re+=Y*Pe,Ie+=Re>>>16,Re&=65535,Ie+=oe*Se,Be+=Ie>>>16,Ie&=65535,Ie+=se*Pe,Be+=Ie>>>16,Ie&=65535,Ie+=Y*we,Be+=Ie>>>16,Ie&=65535,Be+=ye*Se+oe*Pe+se*we+Y*ce,Be&=65535,H(Re<<16|Me,Be<<16|Ie,this.unsigned)},F.mul=F.multiply,F.divide=function(Q){if(T(Q)||(Q=V(Q)),Q.isZero())throw Error("division by zero");if(A){if(!this.unsigned&&this.high===-2147483648&&Q.low===-1&&Q.high===-1)return this;var de=(this.unsigned?A.div_u:A.div_s)(this.low,this.high,Q.low,Q.high);return H(de,A.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?he:ie;var ye,oe,se;if(this.unsigned){if(Q.unsigned||(Q=Q.toUnsigned()),Q.gt(this))return he;if(Q.gt(this.shru(1)))return te;se=he}else{if(this.eq(q)){if(Q.eq(ae)||Q.eq(ue))return q;if(Q.eq(q))return ae;var Y=this.shr(1);return ye=Y.div(Q).shl(1),ye.eq(ie)?Q.isNegative()?ae:ue:(oe=this.sub(Q.mul(ye)),se=ye.add(oe.div(Q)),se)}else if(Q.eq(q))return this.unsigned?he:ie;if(this.isNegative())return Q.isNegative()?this.neg().div(Q.neg()):this.neg().div(Q).neg();if(Q.isNegative())return this.div(Q.neg()).neg();se=ie}for(oe=this;oe.gte(Q);){ye=Math.max(1,Math.floor(oe.toNumber()/Q.toNumber()));for(var ce=Math.ceil(Math.log(ye)/Math.LN2),we=ce<=48?1:D(2,ce-48),Pe=N(ye),Se=Pe.mul(Q);Se.isNegative()||Se.gt(oe);)ye-=we,Pe=N(ye,this.unsigned),Se=Pe.mul(Q);Pe.isZero()&&(Pe=ae),se=se.add(Pe),oe=oe.sub(Se)}return se},F.div=F.divide,F.modulo=function(Q){if(T(Q)||(Q=V(Q)),A){var de=(this.unsigned?A.rem_u:A.rem_s)(this.low,this.high,Q.low,Q.high);return H(de,A.get_high(),this.unsigned)}return this.sub(this.div(Q).mul(Q))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return H(~this.low,~this.high,this.unsigned)},F.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},F.clz=F.countLeadingZeros,F.countTrailingZeros=function(){return this.low?O(this.low):O(this.high)+32},F.ctz=F.countTrailingZeros,F.and=function(Q){return T(Q)||(Q=V(Q)),H(this.low&Q.low,this.high&Q.high,this.unsigned)},F.or=function(Q){return T(Q)||(Q=V(Q)),H(this.low|Q.low,this.high|Q.high,this.unsigned)},F.xor=function(Q){return T(Q)||(Q=V(Q)),H(this.low^Q.low,this.high^Q.high,this.unsigned)},F.shiftLeft=function(Q){return T(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?H(this.low<<Q,this.high<<Q|this.low>>>32-Q,this.unsigned):H(0,this.low<<Q-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(Q){return T(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?H(this.low>>>Q|this.high<<32-Q,this.high>>Q,this.unsigned):H(this.high>>Q-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(Q){return T(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?H(this.low>>>Q|this.high<<32-Q,this.high>>>Q,this.unsigned):Q===32?H(this.high,0,this.unsigned):H(this.high>>>Q-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.rotateLeft=function(Q){var de;return T(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q===32?H(this.high,this.low,this.unsigned):Q<32?(de=32-Q,H(this.low<<Q|this.high>>>de,this.high<<Q|this.low>>>de,this.unsigned)):(Q-=32,de=32-Q,H(this.high<<Q|this.low>>>de,this.low<<Q|this.high>>>de,this.unsigned))},F.rotl=F.rotateLeft,F.rotateRight=function(Q){var de;return T(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q===32?H(this.high,this.low,this.unsigned):Q<32?(de=32-Q,H(this.high<<de|this.low>>>Q,this.low<<de|this.high>>>Q,this.unsigned)):(Q-=32,de=32-Q,H(this.low<<de|this.high>>>Q,this.high<<de|this.low>>>Q,this.unsigned))},F.rotr=F.rotateRight,F.toSigned=function(){return this.unsigned?H(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:H(this.low,this.high,!0)},F.toBytes=function(Q){return Q?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var Q=this.high,de=this.low;return[de&255,de>>>8&255,de>>>16&255,de>>>24,Q&255,Q>>>8&255,Q>>>16&255,Q>>>24]},F.toBytesBE=function(){var Q=this.high,de=this.low;return[Q>>>24,Q>>>16&255,Q>>>8&255,Q&255,de>>>24,de>>>16&255,de>>>8&255,de&255]},P.fromBytes=function(Q,de,ye){return ye?P.fromBytesLE(Q,de):P.fromBytesBE(Q,de)},P.fromBytesLE=function(Q,de){return new P(Q[0]|Q[1]<<8|Q[2]<<16|Q[3]<<24,Q[4]|Q[5]<<8|Q[6]<<16|Q[7]<<24,de)},P.fromBytesBE=function(Q,de){return new P(Q[4]<<24|Q[5]<<16|Q[6]<<8|Q[7],Q[0]<<24|Q[1]<<16|Q[2]<<8|Q[3],de)};var L=P;return E.default=L,"default"in E?E.default:E}({});v.exports=x})(umd);var umdExports=umd.exports,lib$1={};(function(v){/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */Object.defineProperty(v,"__esModule",{value:!0}),v.utils=v.curve25519=v.getSharedSecret=v.sync=v.verify=v.sign=v.getPublicKey=v.Signature=v.Point=v.RistrettoPoint=v.ExtendedPoint=v.CURVE=void 0;const _=requireCryptoBrowserify(),x=BigInt(0),E=BigInt(1),A=BigInt(2),P=BigInt(8),T=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),O=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:T,n:T,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});v.CURVE=O;const k=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),C=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const U=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),N=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),H=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class j{constructor(_e,Ae,Oe,Le){this.x=_e,this.y=Ae,this.z=Oe,this.t=Le}static fromAffine(_e){if(!(_e instanceof pe))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return _e.equals(pe.ZERO)?j.ZERO:new j(_e.x,_e.y,E,Q(_e.x*_e.y))}static toAffineBatch(_e){const Ae=ye(_e.map(Oe=>Oe.z));return _e.map((Oe,Le)=>Oe.toAffine(Ae[Le]))}static normalizeZ(_e){return this.toAffineBatch(_e).map(this.fromAffine)}equals(_e){X(_e);const{x:Ae,y:Oe,z:Le}=this,{x:je,y:qe,z:rt}=_e,tt=Q(Ae*rt),at=Q(je*Le),bt=Q(Oe*rt),lt=Q(qe*Le);return tt===at&&bt===lt}negate(){return new j(Q(-this.x),this.y,this.z,Q(-this.t))}double(){const{x:_e,y:Ae,z:Oe}=this,{a:Le}=O,je=Q(_e*_e),qe=Q(Ae*Ae),rt=Q(A*Q(Oe*Oe)),tt=Q(Le*je),at=_e+Ae,bt=Q(Q(at*at)-je-qe),lt=tt+qe,it=lt-rt,vt=tt-qe,dt=Q(bt*it),Fe=Q(lt*vt),ke=Q(bt*vt),Ne=Q(it*lt);return new j(dt,Fe,Ne,ke)}add(_e){X(_e);const{x:Ae,y:Oe,z:Le,t:je}=this,{x:qe,y:rt,z:tt,t:at}=_e,bt=Q((Oe-Ae)*(rt+qe)),lt=Q((Oe+Ae)*(rt-qe)),it=Q(lt-bt);if(it===x)return this.double();const vt=Q(Le*A*at),dt=Q(je*A*tt),Fe=dt+vt,ke=lt+bt,Ne=dt-vt,De=Q(Fe*it),Xe=Q(ke*Ne),Ye=Q(Fe*Ne),Qe=Q(it*ke);return new j(De,Xe,Qe,Ye)}subtract(_e){return this.add(_e.negate())}precomputeWindow(_e){const Ae=1+256/_e,Oe=[];let Le=this,je=Le;for(let qe=0;qe<Ae;qe++){je=Le,Oe.push(je);for(let rt=1;rt<2**(_e-1);rt++)je=je.add(Le),Oe.push(je);Le=je.double()}return Oe}wNAF(_e,Ae){!Ae&&this.equals(j.BASE)&&(Ae=pe.BASE);const Oe=Ae&&Ae._WINDOW_SIZE||1;if(256%Oe)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let Le=Ae&&le.get(Ae);Le||(Le=this.precomputeWindow(Oe),Ae&&Oe!==1&&(Le=j.normalizeZ(Le),le.set(Ae,Le)));let je=j.ZERO,qe=j.BASE;const rt=1+256/Oe,tt=2**(Oe-1),at=BigInt(2**Oe-1),bt=2**Oe,lt=BigInt(Oe);for(let it=0;it<rt;it++){const vt=it*tt;let dt=Number(_e&at);_e>>=lt,dt>tt&&(dt-=bt,_e+=E);const Fe=vt,ke=vt+Math.abs(dt)-1,Ne=it%2!==0,De=dt<0;dt===0?qe=qe.add(V(Ne,Le[Fe])):je=je.add(V(De,Le[ke]))}return j.normalizeZ([je,qe])[0]}multiply(_e,Ae){return this.wNAF(Be(_e,O.l),Ae)}multiplyUnsafe(_e){let Ae=Be(_e,O.l,!1);const Oe=j.BASE,Le=j.ZERO;if(Ae===x)return Le;if(this.equals(Le)||Ae===E)return this;if(this.equals(Oe))return this.wNAF(Ae);let je=Le,qe=this;for(;Ae>x;)Ae&E&&(je=je.add(qe)),qe=qe.double(),Ae>>=E;return je}isSmallOrder(){return this.multiplyUnsafe(O.h).equals(j.ZERO)}isTorsionFree(){let _e=this.multiplyUnsafe(O.l/A).double();return O.l%A&&(_e=_e.add(this)),_e.equals(j.ZERO)}toAffine(_e){const{x:Ae,y:Oe,z:Le}=this,je=this.equals(j.ZERO);_e==null&&(_e=je?P:de(Le));const qe=Q(Ae*_e),rt=Q(Oe*_e),tt=Q(Le*_e);if(je)return pe.ZERO;if(tt!==E)throw new Error("invZ was invalid");return new pe(qe,rt)}fromRistrettoBytes(){ee()}toRistrettoBytes(){ee()}fromRistrettoHash(){ee()}}v.ExtendedPoint=j,j.BASE=new j(O.Gx,O.Gy,E,Q(O.Gx*O.Gy)),j.ZERO=new j(x,E,E,x);function V(me,_e){const Ae=_e.negate();return me?Ae:_e}function X(me){if(!(me instanceof j))throw new TypeError("ExtendedPoint expected")}function re(me){if(!(me instanceof fe))throw new TypeError("RistrettoPoint expected")}function ee(){throw new Error("Legacy method: switch to RistrettoPoint")}class fe{constructor(_e){this.ep=_e}static calcElligatorRistrettoMap(_e){const{d:Ae}=O,Oe=Q(C*_e*_e),Le=Q((Oe+E)*H);let je=BigInt(-1);const qe=Q((je-Ae*Oe)*Q(Oe+Ae));let{isValid:rt,value:tt}=Y(Le,qe),at=Q(tt*_e);q(at)||(at=Q(-at)),rt||(tt=at),rt||(je=Oe);const bt=Q(je*(Oe-E)*D-qe),lt=tt*tt,it=Q((tt+tt)*qe),vt=Q(bt*U),dt=Q(E-lt),Fe=Q(E+lt);return new j(Q(it*Fe),Q(dt*vt),Q(vt*Fe),Q(it*dt))}static hashToCurve(_e){_e=Se(_e,64);const Ae=Z(_e.slice(0,32)),Oe=this.calcElligatorRistrettoMap(Ae),Le=Z(_e.slice(32,64)),je=this.calcElligatorRistrettoMap(Le);return new fe(Oe.add(je))}static fromHex(_e){_e=Se(_e,32);const{a:Ae,d:Oe}=O,Le="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",je=Z(_e);if(!Pe(J(je),_e)||q(je))throw new Error(Le);const qe=Q(je*je),rt=Q(E+Ae*qe),tt=Q(E-Ae*qe),at=Q(rt*rt),bt=Q(tt*tt),lt=Q(Ae*Oe*at-bt),{isValid:it,value:vt}=ce(Q(lt*bt)),dt=Q(vt*tt),Fe=Q(vt*dt*lt);let ke=Q((je+je)*dt);q(ke)&&(ke=Q(-ke));const Ne=Q(rt*Fe),De=Q(ke*Ne);if(!it||q(De)||Ne===x)throw new Error(Le);return new fe(new j(ke,Ne,E,De))}toRawBytes(){let{x:_e,y:Ae,z:Oe,t:Le}=this.ep;const je=Q(Q(Oe+Ae)*Q(Oe-Ae)),qe=Q(_e*Ae),rt=Q(qe*qe),{value:tt}=ce(Q(je*rt)),at=Q(tt*je),bt=Q(tt*qe),lt=Q(at*bt*Le);let it;if(q(Le*lt)){let dt=Q(Ae*C),Fe=Q(_e*C);_e=dt,Ae=Fe,it=Q(at*N)}else it=bt;q(_e*lt)&&(Ae=Q(-Ae));let vt=Q((Oe-Ae)*it);return q(vt)&&(vt=Q(-vt)),J(vt)}toHex(){return te(this.toRawBytes())}toString(){return this.toHex()}equals(_e){re(_e);const Ae=this.ep,Oe=_e.ep,Le=Q(Ae.x*Oe.y)===Q(Ae.y*Oe.x),je=Q(Ae.y*Oe.y)===Q(Ae.x*Oe.x);return Le||je}add(_e){return re(_e),new fe(this.ep.add(_e.ep))}subtract(_e){return re(_e),new fe(this.ep.subtract(_e.ep))}multiply(_e){return new fe(this.ep.multiply(_e))}multiplyUnsafe(_e){return new fe(this.ep.multiplyUnsafe(_e))}}v.RistrettoPoint=fe,fe.BASE=new fe(j.BASE),fe.ZERO=new fe(j.ZERO);const le=new WeakMap;class pe{constructor(_e,Ae){this.x=_e,this.y=Ae}_setWindowSize(_e){this._WINDOW_SIZE=_e,le.delete(this)}static fromHex(_e,Ae=!0){const{d:Oe,P:Le}=O;_e=Se(_e,32);const je=_e.slice();je[31]=_e[31]&-129;const qe=F(je);if(Ae&&qe>=Le)throw new Error("Expected 0 < hex < P");if(!Ae&&qe>=k)throw new Error("Expected 0 < hex < 2**256");const rt=Q(qe*qe),tt=Q(rt-E),at=Q(Oe*rt+E);let{isValid:bt,value:lt}=Y(tt,at);if(!bt)throw new Error("Point.fromHex: invalid y coordinate");const it=(lt&E)===E;return(_e[31]&128)!==0!==it&&(lt=Q(-lt)),new pe(lt,qe)}static async fromPrivateKey(_e){return(await Ke(_e)).point}toRawBytes(){const _e=J(this.y);return _e[31]|=this.x&E?128:0,_e}toHex(){return te(this.toRawBytes())}toX25519(){const{y:_e}=this,Ae=Q((E+_e)*de(E-_e));return J(Ae)}isTorsionFree(){return j.fromAffine(this).isTorsionFree()}equals(_e){return this.x===_e.x&&this.y===_e.y}negate(){return new pe(Q(-this.x),this.y)}add(_e){return j.fromAffine(this).add(j.fromAffine(_e)).toAffine()}subtract(_e){return this.add(_e.negate())}multiply(_e){return j.fromAffine(this).multiply(_e,this).toAffine()}}v.Point=pe,pe.BASE=new pe(O.Gx,O.Gy),pe.ZERO=new pe(x,E);class ie{constructor(_e,Ae){this.r=_e,this.s=Ae,this.assertValidity()}static fromHex(_e){const Ae=Se(_e,64),Oe=pe.fromHex(Ae.slice(0,32),!1),Le=F(Ae.slice(32,64));return new ie(Oe,Le)}assertValidity(){const{r:_e,s:Ae}=this;if(!(_e instanceof pe))throw new Error("Expected Point instance");return Be(Ae,O.l,!1),this}toRawBytes(){const _e=new Uint8Array(64);return _e.set(this.r.toRawBytes()),_e.set(J(this.s),32),_e}toHex(){return te(this.toRawBytes())}}v.Signature=ie;function he(...me){if(!me.every(Oe=>Oe instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(me.length===1)return me[0];const _e=me.reduce((Oe,Le)=>Oe+Le.length,0),Ae=new Uint8Array(_e);for(let Oe=0,Le=0;Oe<me.length;Oe++){const je=me[Oe];Ae.set(je,Le),Le+=je.length}return Ae}const ae=Array.from({length:256},(me,_e)=>_e.toString(16).padStart(2,"0"));function te(me){if(!(me instanceof Uint8Array))throw new Error("Uint8Array expected");let _e="";for(let Ae=0;Ae<me.length;Ae++)_e+=ae[me[Ae]];return _e}function ue(me){if(typeof me!="string")throw new TypeError("hexToBytes: expected string, got "+typeof me);if(me.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const _e=new Uint8Array(me.length/2);for(let Ae=0;Ae<_e.length;Ae++){const Oe=Ae*2,Le=me.slice(Oe,Oe+2),je=Number.parseInt(Le,16);if(Number.isNaN(je)||je<0)throw new Error("Invalid byte sequence");_e[Ae]=je}return _e}function ne(me){const Ae=me.toString(16).padStart(64,"0");return ue(Ae)}function J(me){return ne(me).reverse()}function q(me){return(Q(me)&E)===E}function F(me){if(!(me instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+te(Uint8Array.from(me).reverse()))}const L=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Z(me){return Q(F(me)&L)}function Q(me,_e=O.P){const Ae=me%_e;return Ae>=x?Ae:_e+Ae}function de(me,_e=O.P){if(me===x||_e<=x)throw new Error(`invert: expected positive integers, got n=${me} mod=${_e}`);let Ae=Q(me,_e),Oe=_e,Le=x,je=E;for(;Ae!==x;){const rt=Oe/Ae,tt=Oe%Ae,at=Le-je*rt;Oe=Ae,Ae=tt,Le=je,je=at}if(Oe!==E)throw new Error("invert: does not exist");return Q(Le,_e)}function ye(me,_e=O.P){const Ae=new Array(me.length),Oe=me.reduce((je,qe,rt)=>qe===x?je:(Ae[rt]=je,Q(je*qe,_e)),E),Le=de(Oe,_e);return me.reduceRight((je,qe,rt)=>qe===x?je:(Ae[rt]=Q(je*Ae[rt],_e),Q(je*qe,_e)),Le),Ae}function oe(me,_e){const{P:Ae}=O;let Oe=me;for(;_e-- >x;)Oe*=Oe,Oe%=Ae;return Oe}function se(me){const{P:_e}=O,Ae=BigInt(5),Oe=BigInt(10),Le=BigInt(20),je=BigInt(40),qe=BigInt(80),tt=me*me%_e*me%_e,at=oe(tt,A)*tt%_e,bt=oe(at,E)*me%_e,lt=oe(bt,Ae)*bt%_e,it=oe(lt,Oe)*lt%_e,vt=oe(it,Le)*it%_e,dt=oe(vt,je)*vt%_e,Fe=oe(dt,qe)*dt%_e,ke=oe(Fe,qe)*dt%_e,Ne=oe(ke,Oe)*lt%_e;return{pow_p_5_8:oe(Ne,A)*me%_e,b2:tt}}function Y(me,_e){const Ae=Q(_e*_e*_e),Oe=Q(Ae*Ae*_e),Le=se(me*Oe).pow_p_5_8;let je=Q(me*Ae*Le);const qe=Q(_e*je*je),rt=je,tt=Q(je*C),at=qe===me,bt=qe===Q(-me),lt=qe===Q(-me*C);return at&&(je=rt),(bt||lt)&&(je=tt),q(je)&&(je=Q(-je)),{isValid:at||bt,value:je}}function ce(me){return Y(E,me)}function we(me){return Q(F(me),O.l)}function Pe(me,_e){if(me.length!==_e.length)return!1;for(let Ae=0;Ae<me.length;Ae++)if(me[Ae]!==_e[Ae])return!1;return!0}function Se(me,_e){const Ae=me instanceof Uint8Array?Uint8Array.from(me):ue(me);if(typeof _e=="number"&&Ae.length!==_e)throw new Error(`Expected ${_e} bytes`);return Ae}function Be(me,_e,Ae=!0){if(!_e)throw new TypeError("Specify max value");if(typeof me=="number"&&Number.isSafeInteger(me)&&(me=BigInt(me)),typeof me=="bigint"&&me<_e){if(Ae){if(x<me)return me}else if(x<=me)return me}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Ie(me){return me[0]&=248,me[31]&=127,me[31]|=64,me}function Re(me){return F(Ie(Se(me,32)))}function Me(me){if(me=typeof me=="bigint"||typeof me=="number"?ne(Be(me,k)):Se(me),me.length!==32)throw new Error("Expected 32 bytes");return me}function xe(me){const _e=Ie(me.slice(0,32)),Ae=me.slice(32,64),Oe=we(_e),Le=pe.BASE.multiply(Oe),je=Le.toRawBytes();return{head:_e,prefix:Ae,scalar:Oe,point:Le,pointBytes:je}}let Ee;function Ue(...me){if(typeof Ee!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Ee(...me)}async function Ke(me){return xe(await v.utils.sha512(Me(me)))}function ze(me){return xe(Ue(Me(me)))}async function Ve(me){return(await Ke(me)).pointBytes}v.getPublicKey=Ve;function Je(me){return ze(me).pointBytes}async function et(me,_e){me=Se(me);const{prefix:Ae,scalar:Oe,pointBytes:Le}=await Ke(_e),je=we(await v.utils.sha512(Ae,me)),qe=pe.BASE.multiply(je),rt=we(await v.utils.sha512(qe.toRawBytes(),Le,me)),tt=Q(je+rt*Oe,O.l);return new ie(qe,tt).toRawBytes()}v.sign=et;function Ge(me,_e){me=Se(me);const{prefix:Ae,scalar:Oe,pointBytes:Le}=ze(_e),je=we(Ue(Ae,me)),qe=pe.BASE.multiply(je),rt=we(Ue(qe.toRawBytes(),Le,me)),tt=Q(je+rt*Oe,O.l);return new ie(qe,tt).toRawBytes()}function ot(me,_e,Ae){_e=Se(_e),Ae instanceof pe||(Ae=pe.fromHex(Ae,!1));const{r:Oe,s:Le}=me instanceof ie?me.assertValidity():ie.fromHex(me),je=j.BASE.multiplyUnsafe(Le);return{r:Oe,s:Le,SB:je,pub:Ae,msg:_e}}function He(me,_e,Ae,Oe){const Le=we(Oe),je=j.fromAffine(me).multiplyUnsafe(Le);return j.fromAffine(_e).add(je).subtract(Ae).multiplyUnsafe(O.h).equals(j.ZERO)}async function We(me,_e,Ae){const{r:Oe,SB:Le,msg:je,pub:qe}=ot(me,_e,Ae),rt=await v.utils.sha512(Oe.toRawBytes(),qe.toRawBytes(),je);return He(qe,Oe,Le,rt)}v.verify=We;function Ze(me,_e,Ae){const{r:Oe,SB:Le,msg:je,pub:qe}=ot(me,_e,Ae),rt=Ue(Oe.toRawBytes(),qe.toRawBytes(),je);return He(qe,Oe,Le,rt)}v.sync={getExtendedPublicKey:ze,getPublicKey:Je,sign:Ge,verify:Ze};async function $e(me,_e){const{head:Ae}=await Ke(me),Oe=pe.fromHex(_e).toX25519();return v.curve25519.scalarMult(Ae,Oe)}v.getSharedSecret=$e,pe.BASE._setWindowSize(8);function Te(me,_e,Ae){const Oe=Q(me*(_e-Ae));return _e=Q(_e-Oe),Ae=Q(Ae+Oe),[_e,Ae]}function Ce(me,_e){const{P:Ae}=O,Oe=Be(me,Ae),Le=Be(_e,Ae),je=BigInt(121665),qe=Oe;let rt=E,tt=x,at=Oe,bt=E,lt=x,it;for(let ke=BigInt(255-1);ke>=x;ke--){const Ne=Le>>ke&E;lt^=Ne,it=Te(lt,rt,at),rt=it[0],at=it[1],it=Te(lt,tt,bt),tt=it[0],bt=it[1],lt=Ne;const De=rt+tt,Xe=Q(De*De),Ye=rt-tt,Qe=Q(Ye*Ye),st=Xe-Qe,ut=at+bt,nt=at-bt,pt=Q(nt*De),ht=Q(ut*Ye),ct=pt+ht,_t=pt-ht;at=Q(ct*ct),bt=Q(qe*Q(_t*_t)),rt=Q(Xe*Qe),tt=Q(st*(Xe+Q(je*st)))}it=Te(lt,rt,at),rt=it[0],at=it[1],it=Te(lt,tt,bt),tt=it[0],bt=it[1];const{pow_p_5_8:vt,b2:dt}=se(tt),Fe=Q(oe(vt,BigInt(3))*dt);return Q(rt*Fe)}function ve(me){return J(Q(me,O.P))}function be(me){const _e=Se(me,32);return _e[31]&=127,F(_e)}v.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(me,_e){const Ae=be(_e),Oe=Re(me),Le=Ce(Ae,Oe);if(Le===x)throw new Error("Invalid private or public key received");return ve(Le)},scalarMultBase(me){return v.curve25519.scalarMult(me,v.curve25519.BASE_POINT_U)}};const ge={node:_,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};v.utils={bytesToHex:te,hexToBytes:ue,concatBytes:he,getExtendedPublicKey:Ke,mod:Q,invert:de,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:me=>{if(me=Se(me),me.length<40||me.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Q(F(me),O.l-E)+E},randomBytes:(me=32)=>{if(ge.web)return ge.web.getRandomValues(new Uint8Array(me));if(ge.node){const{randomBytes:_e}=ge.node;return new Uint8Array(_e(me).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>v.utils.randomBytes(32),sha512:async(...me)=>{const _e=he(...me);if(ge.web){const Ae=await ge.web.subtle.digest("SHA-512",_e.buffer);return new Uint8Array(Ae)}else{if(ge.node)return Uint8Array.from(ge.node.createHash("sha512").update(_e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(me=8,_e=pe.BASE){const Ae=_e.equals(pe.BASE)?_e:new pe(_e.x,_e.y);return Ae._setWindowSize(me),Ae.multiply(A),Ae},sha512Sync:void 0},Object.defineProperties(v.utils,{sha512Sync:{configurable:!1,get(){return Ee},set(me){Ee||(Ee=me)}}})})(lib$1);var lib={};(function(v){/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */Object.defineProperty(v,"__esModule",{value:!0}),v.utils=v.schnorr=v.verify=v.signSync=v.sign=v.getSharedSecret=v.recoverPublicKey=v.getPublicKey=v.Signature=v.Point=v.CURVE=void 0;const _=requireCryptoBrowserify(),x=BigInt(0),E=BigInt(1),A=BigInt(2),P=BigInt(3),T=BigInt(8),O=Object.freeze({a:x,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:E,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});v.CURVE=O;const k=(Fe,ke)=>(Fe+ke/A)/ke,C={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(Fe){const{n:ke}=O,Ne=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),De=-E*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),Xe=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Ye=Ne,Qe=BigInt("0x100000000000000000000000000000000"),st=k(Ye*Fe,ke),ut=k(-De*Fe,ke);let nt=ce(Fe-st*Ne-ut*Xe,ke),pt=ce(-st*De-ut*Ye,ke);const ht=nt>Qe,ct=pt>Qe;if(ht&&(nt=ke-nt),ct&&(pt=ke-pt),nt>Qe||pt>Qe)throw new Error("splitScalarEndo: Endomorphism failed, k="+Fe);return{k1neg:ht,k1:nt,k2neg:ct,k2:pt}}},U=32,N=32,H=32,D=U+1,j=2*U+1;function V(Fe){const{a:ke,b:Ne}=O,De=ce(Fe*Fe),Xe=ce(De*Fe);return ce(Xe+ke*Fe+Ne)}const X=O.a===x;class re extends Error{constructor(ke){super(ke)}}function ee(Fe){if(!(Fe instanceof fe))throw new TypeError("JacobianPoint expected")}class fe{constructor(ke,Ne,De){this.x=ke,this.y=Ne,this.z=De}static fromAffine(ke){if(!(ke instanceof ie))throw new TypeError("JacobianPoint#fromAffine: expected Point");return ke.equals(ie.ZERO)?fe.ZERO:new fe(ke.x,ke.y,E)}static toAffineBatch(ke){const Ne=Be(ke.map(De=>De.z));return ke.map((De,Xe)=>De.toAffine(Ne[Xe]))}static normalizeZ(ke){return fe.toAffineBatch(ke).map(fe.fromAffine)}equals(ke){ee(ke);const{x:Ne,y:De,z:Xe}=this,{x:Ye,y:Qe,z:st}=ke,ut=ce(Xe*Xe),nt=ce(st*st),pt=ce(Ne*nt),ht=ce(Ye*ut),ct=ce(ce(De*st)*nt),_t=ce(ce(Qe*Xe)*ut);return pt===ht&&ct===_t}negate(){return new fe(this.x,ce(-this.y),this.z)}double(){const{x:ke,y:Ne,z:De}=this,Xe=ce(ke*ke),Ye=ce(Ne*Ne),Qe=ce(Ye*Ye),st=ke+Ye,ut=ce(A*(ce(st*st)-Xe-Qe)),nt=ce(P*Xe),pt=ce(nt*nt),ht=ce(pt-A*ut),ct=ce(nt*(ut-ht)-T*Qe),_t=ce(A*Ne*De);return new fe(ht,ct,_t)}add(ke){ee(ke);const{x:Ne,y:De,z:Xe}=this,{x:Ye,y:Qe,z:st}=ke;if(Ye===x||Qe===x)return this;if(Ne===x||De===x)return ke;const ut=ce(Xe*Xe),nt=ce(st*st),pt=ce(Ne*nt),ht=ce(Ye*ut),ct=ce(ce(De*st)*nt),_t=ce(ce(Qe*Xe)*ut),gt=ce(ht-pt),yt=ce(_t-ct);if(gt===x)return yt===x?this.double():fe.ZERO;const St=ce(gt*gt),mt=ce(gt*St),wt=ce(pt*St),At=ce(yt*yt-mt-A*wt),Bt=ce(yt*(wt-At)-ct*mt),xt=ce(Xe*st*gt);return new fe(At,Bt,xt)}subtract(ke){return this.add(ke.negate())}multiplyUnsafe(ke){const Ne=fe.ZERO;if(typeof ke=="bigint"&&ke===x)return Ne;let De=Y(ke);if(De===E)return this;if(!X){let ht=Ne,ct=this;for(;De>x;)De&E&&(ht=ht.add(ct)),ct=ct.double(),De>>=E;return ht}let{k1neg:Xe,k1:Ye,k2neg:Qe,k2:st}=C.splitScalar(De),ut=Ne,nt=Ne,pt=this;for(;Ye>x||st>x;)Ye&E&&(ut=ut.add(pt)),st&E&&(nt=nt.add(pt)),pt=pt.double(),Ye>>=E,st>>=E;return Xe&&(ut=ut.negate()),Qe&&(nt=nt.negate()),nt=new fe(ce(nt.x*C.beta),nt.y,nt.z),ut.add(nt)}precomputeWindow(ke){const Ne=X?128/ke+1:256/ke+1,De=[];let Xe=this,Ye=Xe;for(let Qe=0;Qe<Ne;Qe++){Ye=Xe,De.push(Ye);for(let st=1;st<2**(ke-1);st++)Ye=Ye.add(Xe),De.push(Ye);Xe=Ye.double()}return De}wNAF(ke,Ne){!Ne&&this.equals(fe.BASE)&&(Ne=ie.BASE);const De=Ne&&Ne._WINDOW_SIZE||1;if(256%De)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let Xe=Ne&&pe.get(Ne);Xe||(Xe=this.precomputeWindow(De),Ne&&De!==1&&(Xe=fe.normalizeZ(Xe),pe.set(Ne,Xe)));let Ye=fe.ZERO,Qe=fe.BASE;const st=1+(X?128/De:256/De),ut=2**(De-1),nt=BigInt(2**De-1),pt=2**De,ht=BigInt(De);for(let ct=0;ct<st;ct++){const _t=ct*ut;let gt=Number(ke&nt);ke>>=ht,gt>ut&&(gt-=pt,ke+=E);const yt=_t,St=_t+Math.abs(gt)-1,mt=ct%2!==0,wt=gt<0;gt===0?Qe=Qe.add(le(mt,Xe[yt])):Ye=Ye.add(le(wt,Xe[St]))}return{p:Ye,f:Qe}}multiply(ke,Ne){let De=Y(ke),Xe,Ye;if(X){const{k1neg:Qe,k1:st,k2neg:ut,k2:nt}=C.splitScalar(De);let{p:pt,f:ht}=this.wNAF(st,Ne),{p:ct,f:_t}=this.wNAF(nt,Ne);pt=le(Qe,pt),ct=le(ut,ct),ct=new fe(ce(ct.x*C.beta),ct.y,ct.z),Xe=pt.add(ct),Ye=ht.add(_t)}else{const{p:Qe,f:st}=this.wNAF(De,Ne);Xe=Qe,Ye=st}return fe.normalizeZ([Xe,Ye])[0]}toAffine(ke){const{x:Ne,y:De,z:Xe}=this,Ye=this.equals(fe.ZERO);ke==null&&(ke=Ye?T:Se(Xe));const Qe=ke,st=ce(Qe*Qe),ut=ce(st*Qe),nt=ce(Ne*st),pt=ce(De*ut),ht=ce(Xe*Qe);if(Ye)return ie.ZERO;if(ht!==E)throw new Error("invZ was invalid");return new ie(nt,pt)}}fe.BASE=new fe(O.Gx,O.Gy,E),fe.ZERO=new fe(x,E,x);function le(Fe,ke){const Ne=ke.negate();return Fe?Ne:ke}const pe=new WeakMap;class ie{constructor(ke,Ne){this.x=ke,this.y=Ne}_setWindowSize(ke){this._WINDOW_SIZE=ke,pe.delete(this)}hasEvenY(){return this.y%A===x}static fromCompressedHex(ke){const Ne=ke.length===32,De=oe(Ne?ke:ke.subarray(1));if(!Ke(De))throw new Error("Point is not on curve");const Xe=V(De);let Ye=Pe(Xe);const Qe=(Ye&E)===E;Ne?Qe&&(Ye=ce(-Ye)):(ke[0]&1)===1!==Qe&&(Ye=ce(-Ye));const st=new ie(De,Ye);return st.assertValidity(),st}static fromUncompressedHex(ke){const Ne=oe(ke.subarray(1,U+1)),De=oe(ke.subarray(U+1,U*2+1)),Xe=new ie(Ne,De);return Xe.assertValidity(),Xe}static fromHex(ke){const Ne=se(ke),De=Ne.length,Xe=Ne[0];if(De===U)return this.fromCompressedHex(Ne);if(De===D&&(Xe===2||Xe===3))return this.fromCompressedHex(Ne);if(De===j&&Xe===4)return this.fromUncompressedHex(Ne);throw new Error(`Point.fromHex: received invalid point. Expected 32-${D} compressed bytes or ${j} uncompressed bytes, not ${De}`)}static fromPrivateKey(ke){return ie.BASE.multiply(Ve(ke))}static fromSignature(ke,Ne,De){const{r:Xe,s:Ye}=et(Ne);if(![0,1,2,3].includes(De))throw new Error("Cannot recover: invalid recovery bit");const Qe=Re(se(ke)),{n:st}=O,ut=De===2||De===3?Xe+st:Xe,nt=Se(ut,st),pt=ce(-Qe*nt,st),ht=ce(Ye*nt,st),ct=De&1?"03":"02",_t=ie.fromHex(ct+L(ut)),gt=ie.BASE.multiplyAndAddUnsafe(_t,pt,ht);if(!gt)throw new Error("Cannot recover signature: point at infinify");return gt.assertValidity(),gt}toRawBytes(ke=!1){return ye(this.toHex(ke))}toHex(ke=!1){const Ne=L(this.x);return ke?`${this.hasEvenY()?"02":"03"}${Ne}`:`04${Ne}${L(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const ke="Point is not on elliptic curve",{x:Ne,y:De}=this;if(!Ke(Ne)||!Ke(De))throw new Error(ke);const Xe=ce(De*De),Ye=V(Ne);if(ce(Xe-Ye)!==x)throw new Error(ke)}equals(ke){return this.x===ke.x&&this.y===ke.y}negate(){return new ie(this.x,ce(-this.y))}double(){return fe.fromAffine(this).double().toAffine()}add(ke){return fe.fromAffine(this).add(fe.fromAffine(ke)).toAffine()}subtract(ke){return this.add(ke.negate())}multiply(ke){return fe.fromAffine(this).multiply(ke,this).toAffine()}multiplyAndAddUnsafe(ke,Ne,De){const Xe=fe.fromAffine(this),Ye=Ne===x||Ne===E||this!==ie.BASE?Xe.multiplyUnsafe(Ne):Xe.multiply(Ne),Qe=fe.fromAffine(ke).multiplyUnsafe(De),st=Ye.add(Qe);return st.equals(fe.ZERO)?void 0:st.toAffine()}}v.Point=ie,ie.BASE=new ie(O.Gx,O.Gy),ie.ZERO=new ie(x,x);function he(Fe){return Number.parseInt(Fe[0],16)>=8?"00"+Fe:Fe}function ae(Fe){if(Fe.length<2||Fe[0]!==2)throw new Error(`Invalid signature integer tag: ${q(Fe)}`);const ke=Fe[1],Ne=Fe.subarray(2,ke+2);if(!ke||Ne.length!==ke)throw new Error("Invalid signature integer: wrong length");if(Ne[0]===0&&Ne[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:oe(Ne),left:Fe.subarray(ke+2)}}function te(Fe){if(Fe.length<2||Fe[0]!=48)throw new Error(`Invalid signature tag: ${q(Fe)}`);if(Fe[1]!==Fe.length-2)throw new Error("Invalid signature: incorrect length");const{data:ke,left:Ne}=ae(Fe.subarray(2)),{data:De,left:Xe}=ae(Ne);if(Xe.length)throw new Error(`Invalid signature: left bytes after parsing: ${q(Xe)}`);return{r:ke,s:De}}class ue{constructor(ke,Ne){this.r=ke,this.s=Ne,this.assertValidity()}static fromCompact(ke){const Ne=ke instanceof Uint8Array,De="Signature.fromCompact";if(typeof ke!="string"&&!Ne)throw new TypeError(`${De}: Expected string or Uint8Array`);const Xe=Ne?q(ke):ke;if(Xe.length!==128)throw new Error(`${De}: Expected 64-byte hex`);return new ue(de(Xe.slice(0,64)),de(Xe.slice(64,128)))}static fromDER(ke){const Ne=ke instanceof Uint8Array;if(typeof ke!="string"&&!Ne)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:De,s:Xe}=te(Ne?ke:ye(ke));return new ue(De,Xe)}static fromHex(ke){return this.fromDER(ke)}assertValidity(){const{r:ke,s:Ne}=this;if(!Ue(ke))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ue(Ne))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const ke=O.n>>E;return this.s>ke}normalizeS(){return this.hasHighS()?new ue(this.r,ce(-this.s,O.n)):this}toDERRawBytes(){return ye(this.toDERHex())}toDERHex(){const ke=he(Q(this.s)),Ne=he(Q(this.r)),De=ke.length/2,Xe=Ne.length/2,Ye=Q(De),Qe=Q(Xe);return`30${Q(Xe+De+4)}02${Qe}${Ne}02${Ye}${ke}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return ye(this.toCompactHex())}toCompactHex(){return L(this.r)+L(this.s)}}v.Signature=ue;function ne(...Fe){if(!Fe.every(De=>De instanceof Uint8Array))throw new Error("Uint8Array list expected");if(Fe.length===1)return Fe[0];const ke=Fe.reduce((De,Xe)=>De+Xe.length,0),Ne=new Uint8Array(ke);for(let De=0,Xe=0;De<Fe.length;De++){const Ye=Fe[De];Ne.set(Ye,Xe),Xe+=Ye.length}return Ne}const J=Array.from({length:256},(Fe,ke)=>ke.toString(16).padStart(2,"0"));function q(Fe){if(!(Fe instanceof Uint8Array))throw new Error("Expected Uint8Array");let ke="";for(let Ne=0;Ne<Fe.length;Ne++)ke+=J[Fe[Ne]];return ke}const F=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function L(Fe){if(typeof Fe!="bigint")throw new Error("Expected bigint");if(!(x<=Fe&&Fe<F))throw new Error("Expected number 0 <= n < 2^256");return Fe.toString(16).padStart(64,"0")}function Z(Fe){const ke=ye(L(Fe));if(ke.length!==32)throw new Error("Error: expected 32 bytes");return ke}function Q(Fe){const ke=Fe.toString(16);return ke.length&1?`0${ke}`:ke}function de(Fe){if(typeof Fe!="string")throw new TypeError("hexToNumber: expected string, got "+typeof Fe);return BigInt(`0x${Fe}`)}function ye(Fe){if(typeof Fe!="string")throw new TypeError("hexToBytes: expected string, got "+typeof Fe);if(Fe.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+Fe.length);const ke=new Uint8Array(Fe.length/2);for(let Ne=0;Ne<ke.length;Ne++){const De=Ne*2,Xe=Fe.slice(De,De+2),Ye=Number.parseInt(Xe,16);if(Number.isNaN(Ye)||Ye<0)throw new Error("Invalid byte sequence");ke[Ne]=Ye}return ke}function oe(Fe){return de(q(Fe))}function se(Fe){return Fe instanceof Uint8Array?Uint8Array.from(Fe):ye(Fe)}function Y(Fe){if(typeof Fe=="number"&&Number.isSafeInteger(Fe)&&Fe>0)return BigInt(Fe);if(typeof Fe=="bigint"&&Ue(Fe))return Fe;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ce(Fe,ke=O.P){const Ne=Fe%ke;return Ne>=x?Ne:ke+Ne}function we(Fe,ke){const{P:Ne}=O;let De=Fe;for(;ke-- >x;)De*=De,De%=Ne;return De}function Pe(Fe){const{P:ke}=O,Ne=BigInt(6),De=BigInt(11),Xe=BigInt(22),Ye=BigInt(23),Qe=BigInt(44),st=BigInt(88),ut=Fe*Fe*Fe%ke,nt=ut*ut*Fe%ke,pt=we(nt,P)*nt%ke,ht=we(pt,P)*nt%ke,ct=we(ht,A)*ut%ke,_t=we(ct,De)*ct%ke,gt=we(_t,Xe)*_t%ke,yt=we(gt,Qe)*gt%ke,St=we(yt,st)*yt%ke,mt=we(St,Qe)*gt%ke,wt=we(mt,P)*nt%ke,At=we(wt,Ye)*_t%ke,Bt=we(At,Ne)*ut%ke,xt=we(Bt,A);if(xt*xt%ke!==Fe)throw new Error("Cannot find square root");return xt}function Se(Fe,ke=O.P){if(Fe===x||ke<=x)throw new Error(`invert: expected positive integers, got n=${Fe} mod=${ke}`);let Ne=ce(Fe,ke),De=ke,Xe=x,Ye=E;for(;Ne!==x;){const st=De/Ne,ut=De%Ne,nt=Xe-Ye*st;De=Ne,Ne=ut,Xe=Ye,Ye=nt}if(De!==E)throw new Error("invert: does not exist");return ce(Xe,ke)}function Be(Fe,ke=O.P){const Ne=new Array(Fe.length),De=Fe.reduce((Ye,Qe,st)=>Qe===x?Ye:(Ne[st]=Ye,ce(Ye*Qe,ke)),E),Xe=Se(De,ke);return Fe.reduceRight((Ye,Qe,st)=>Qe===x?Ye:(Ne[st]=ce(Ye*Ne[st],ke),ce(Ye*Qe,ke)),Xe),Ne}function Ie(Fe){const ke=Fe.length*8-N*8,Ne=oe(Fe);return ke>0?Ne>>BigInt(ke):Ne}function Re(Fe,ke=!1){const Ne=Ie(Fe);if(ke)return Ne;const{n:De}=O;return Ne>=De?Ne-De:Ne}let Me,xe;class Ee{constructor(ke,Ne){if(this.hashLen=ke,this.qByteLen=Ne,typeof ke!="number"||ke<2)throw new Error("hashLen must be a number");if(typeof Ne!="number"||Ne<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(ke).fill(1),this.k=new Uint8Array(ke).fill(0),this.counter=0}hmac(...ke){return v.utils.hmacSha256(this.k,...ke)}hmacSync(...ke){return xe(this.k,...ke)}checkSync(){if(typeof xe!="function")throw new re("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(ke=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),ke),this.v=await this.hmac(this.v),ke.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),ke),this.v=await this.hmac(this.v))}reseedSync(ke=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),ke),this.v=this.hmacSync(this.v),ke.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),ke),this.v=this.hmacSync(this.v))}async generate(){this.incr();let ke=0;const Ne=[];for(;ke<this.qByteLen;){this.v=await this.hmac(this.v);const De=this.v.slice();Ne.push(De),ke+=this.v.length}return ne(...Ne)}generateSync(){this.checkSync(),this.incr();let ke=0;const Ne=[];for(;ke<this.qByteLen;){this.v=this.hmacSync(this.v);const De=this.v.slice();Ne.push(De),ke+=this.v.length}return ne(...Ne)}}function Ue(Fe){return x<Fe&&Fe<O.n}function Ke(Fe){return x<Fe&&Fe<O.P}function ze(Fe,ke,Ne,De=!0){const{n:Xe}=O,Ye=Re(Fe,!0);if(!Ue(Ye))return;const Qe=Se(Ye,Xe),st=ie.BASE.multiply(Ye),ut=ce(st.x,Xe);if(ut===x)return;const nt=ce(Qe*ce(ke+Ne*ut,Xe),Xe);if(nt===x)return;let pt=new ue(ut,nt),ht=(st.x===pt.r?0:2)|Number(st.y&E);return De&&pt.hasHighS()&&(pt=pt.normalizeS(),ht^=1),{sig:pt,recovery:ht}}function Ve(Fe){let ke;if(typeof Fe=="bigint")ke=Fe;else if(typeof Fe=="number"&&Number.isSafeInteger(Fe)&&Fe>0)ke=BigInt(Fe);else if(typeof Fe=="string"){if(Fe.length!==2*N)throw new Error("Expected 32 bytes of private key");ke=de(Fe)}else if(Fe instanceof Uint8Array){if(Fe.length!==N)throw new Error("Expected 32 bytes of private key");ke=oe(Fe)}else throw new TypeError("Expected valid private key");if(!Ue(ke))throw new Error("Expected private key: 0 < key < n");return ke}function Je(Fe){return Fe instanceof ie?(Fe.assertValidity(),Fe):ie.fromHex(Fe)}function et(Fe){if(Fe instanceof ue)return Fe.assertValidity(),Fe;try{return ue.fromDER(Fe)}catch{return ue.fromCompact(Fe)}}function Ge(Fe,ke=!1){return ie.fromPrivateKey(Fe).toRawBytes(ke)}v.getPublicKey=Ge;function ot(Fe,ke,Ne,De=!1){return ie.fromSignature(Fe,ke,Ne).toRawBytes(De)}v.recoverPublicKey=ot;function He(Fe){const ke=Fe instanceof Uint8Array,Ne=typeof Fe=="string",De=(ke||Ne)&&Fe.length;return ke?De===D||De===j:Ne?De===D*2||De===j*2:Fe instanceof ie}function We(Fe,ke,Ne=!1){if(He(Fe))throw new TypeError("getSharedSecret: first arg must be private key");if(!He(ke))throw new TypeError("getSharedSecret: second arg must be public key");const De=Je(ke);return De.assertValidity(),De.multiply(Ve(Fe)).toRawBytes(Ne)}v.getSharedSecret=We;function Ze(Fe){const ke=Fe.length>U?Fe.slice(0,U):Fe;return oe(ke)}function $e(Fe){const ke=Ze(Fe),Ne=ce(ke,O.n);return Te(Ne<x?ke:Ne)}function Te(Fe){return Z(Fe)}function Ce(Fe,ke,Ne){if(Fe==null)throw new Error(`sign: expected valid message hash, not "${Fe}"`);const De=se(Fe),Xe=Ve(ke),Ye=[Te(Xe),$e(De)];if(Ne!=null){Ne===!0&&(Ne=v.utils.randomBytes(U));const ut=se(Ne);if(ut.length!==U)throw new Error(`sign: Expected ${U} bytes of extra data`);Ye.push(ut)}const Qe=ne(...Ye),st=Ze(De);return{seed:Qe,m:st,d:Xe}}function ve(Fe,ke){const{sig:Ne,recovery:De}=Fe,{der:Xe,recovered:Ye}=Object.assign({canonical:!0,der:!0},ke),Qe=Xe?Ne.toDERRawBytes():Ne.toCompactRawBytes();return Ye?[Qe,De]:Qe}async function be(Fe,ke,Ne={}){const{seed:De,m:Xe,d:Ye}=Ce(Fe,ke,Ne.extraEntropy),Qe=new Ee(H,N);await Qe.reseed(De);let st;for(;!(st=ze(await Qe.generate(),Xe,Ye,Ne.canonical));)await Qe.reseed();return ve(st,Ne)}v.sign=be;function ge(Fe,ke,Ne={}){const{seed:De,m:Xe,d:Ye}=Ce(Fe,ke,Ne.extraEntropy),Qe=new Ee(H,N);Qe.reseedSync(De);let st;for(;!(st=ze(Qe.generateSync(),Xe,Ye,Ne.canonical));)Qe.reseedSync();return ve(st,Ne)}v.signSync=ge;const me={strict:!0};function _e(Fe,ke,Ne,De=me){let Xe;try{Xe=et(Fe),ke=se(ke)}catch{return!1}const{r:Ye,s:Qe}=Xe;if(De.strict&&Xe.hasHighS())return!1;const st=Re(ke);let ut;try{ut=Je(Ne)}catch{return!1}const{n:nt}=O,pt=Se(Qe,nt),ht=ce(st*pt,nt),ct=ce(Ye*pt,nt),_t=ie.BASE.multiplyAndAddUnsafe(ut,ht,ct);return _t?ce(_t.x,nt)===Ye:!1}v.verify=_e;function Ae(Fe){return ce(oe(Fe),O.n)}class Oe{constructor(ke,Ne){this.r=ke,this.s=Ne,this.assertValidity()}static fromHex(ke){const Ne=se(ke);if(Ne.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${Ne.length}`);const De=oe(Ne.subarray(0,32)),Xe=oe(Ne.subarray(32,64));return new Oe(De,Xe)}assertValidity(){const{r:ke,s:Ne}=this;if(!Ke(ke)||!Ue(Ne))throw new Error("Invalid signature")}toHex(){return L(this.r)+L(this.s)}toRawBytes(){return ye(this.toHex())}}function Le(Fe){return ie.fromPrivateKey(Fe).toRawX()}class je{constructor(ke,Ne,De=v.utils.randomBytes()){if(ke==null)throw new TypeError(`sign: Expected valid message, not "${ke}"`);this.m=se(ke);const{x:Xe,scalar:Ye}=this.getScalar(Ve(Ne));if(this.px=Xe,this.d=Ye,this.rand=se(De),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(ke){const Ne=ie.fromPrivateKey(ke),De=Ne.hasEvenY()?ke:O.n-ke;return{point:Ne,scalar:De,x:Ne.toRawX()}}initNonce(ke,Ne){return Z(ke^oe(Ne))}finalizeNonce(ke){const Ne=ce(oe(ke),O.n);if(Ne===x)throw new Error("sign: Creation of signature failed. k is zero");const{point:De,x:Xe,scalar:Ye}=this.getScalar(Ne);return{R:De,rx:Xe,k:Ye}}finalizeSig(ke,Ne,De,Xe){return new Oe(ke.x,ce(Ne+De*Xe,O.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:ke,d:Ne,px:De,rand:Xe}=this,Ye=v.utils.taggedHash,Qe=this.initNonce(Ne,await Ye(vt.aux,Xe)),{R:st,rx:ut,k:nt}=this.finalizeNonce(await Ye(vt.nonce,Qe,De,ke)),pt=Ae(await Ye(vt.challenge,ut,De,ke)),ht=this.finalizeSig(st,nt,pt,Ne);return await bt(ht,ke,De)||this.error(),ht}calcSync(){const{m:ke,d:Ne,px:De,rand:Xe}=this,Ye=v.utils.taggedHashSync,Qe=this.initNonce(Ne,Ye(vt.aux,Xe)),{R:st,rx:ut,k:nt}=this.finalizeNonce(Ye(vt.nonce,Qe,De,ke)),pt=Ae(Ye(vt.challenge,ut,De,ke)),ht=this.finalizeSig(st,nt,pt,Ne);return lt(ht,ke,De)||this.error(),ht}}async function qe(Fe,ke,Ne){return new je(Fe,ke,Ne).calc()}function rt(Fe,ke,Ne){return new je(Fe,ke,Ne).calcSync()}function tt(Fe,ke,Ne){const De=Fe instanceof Oe,Xe=De?Fe:Oe.fromHex(Fe);return De&&Xe.assertValidity(),{...Xe,m:se(ke),P:Je(Ne)}}function at(Fe,ke,Ne,De){const Xe=ie.BASE.multiplyAndAddUnsafe(ke,Ve(Ne),ce(-De,O.n));return!(!Xe||!Xe.hasEvenY()||Xe.x!==Fe)}async function bt(Fe,ke,Ne){try{const{r:De,s:Xe,m:Ye,P:Qe}=tt(Fe,ke,Ne),st=Ae(await v.utils.taggedHash(vt.challenge,Z(De),Qe.toRawX(),Ye));return at(De,Qe,Xe,st)}catch{return!1}}function lt(Fe,ke,Ne){try{const{r:De,s:Xe,m:Ye,P:Qe}=tt(Fe,ke,Ne),st=Ae(v.utils.taggedHashSync(vt.challenge,Z(De),Qe.toRawX(),Ye));return at(De,Qe,Xe,st)}catch(De){if(De instanceof re)throw De;return!1}}v.schnorr={Signature:Oe,getPublicKey:Le,sign:qe,verify:bt,signSync:rt,verifySync:lt},ie.BASE._setWindowSize(8);const it={node:_,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},vt={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},dt={};v.utils={bytesToHex:q,hexToBytes:ye,concatBytes:ne,mod:ce,invert:Se,isValidPrivateKey(Fe){try{return Ve(Fe),!0}catch{return!1}},_bigintTo32Bytes:Z,_normalizePrivateKey:Ve,hashToPrivateKey:Fe=>{Fe=se(Fe);const ke=N+8;if(Fe.length<ke||Fe.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const Ne=ce(oe(Fe),O.n-E)+E;return Z(Ne)},randomBytes:(Fe=32)=>{if(it.web)return it.web.getRandomValues(new Uint8Array(Fe));if(it.node){const{randomBytes:ke}=it.node;return Uint8Array.from(ke(Fe))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>v.utils.hashToPrivateKey(v.utils.randomBytes(N+8)),precompute(Fe=8,ke=ie.BASE){const Ne=ke===ie.BASE?ke:new ie(ke.x,ke.y);return Ne._setWindowSize(Fe),Ne.multiply(P),Ne},sha256:async(...Fe)=>{if(it.web){const ke=await it.web.subtle.digest("SHA-256",ne(...Fe));return new Uint8Array(ke)}else if(it.node){const{createHash:ke}=it.node,Ne=ke("sha256");return Fe.forEach(De=>Ne.update(De)),Uint8Array.from(Ne.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(Fe,...ke)=>{if(it.web){const Ne=await it.web.subtle.importKey("raw",Fe,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),De=ne(...ke),Xe=await it.web.subtle.sign("HMAC",Ne,De);return new Uint8Array(Xe)}else if(it.node){const{createHmac:Ne}=it.node,De=Ne("sha256",Fe);return ke.forEach(Xe=>De.update(Xe)),Uint8Array.from(De.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(Fe,...ke)=>{let Ne=dt[Fe];if(Ne===void 0){const De=await v.utils.sha256(Uint8Array.from(Fe,Xe=>Xe.charCodeAt(0)));Ne=ne(De,De),dt[Fe]=Ne}return v.utils.sha256(Ne,...ke)},taggedHashSync:(Fe,...ke)=>{if(typeof Me!="function")throw new re("sha256Sync is undefined, you need to set it");let Ne=dt[Fe];if(Ne===void 0){const De=Me(Uint8Array.from(Fe,Xe=>Xe.charCodeAt(0)));Ne=ne(De,De),dt[Fe]=Ne}return Me(Ne,...ke)},_JacobianPoint:fe},Object.defineProperties(v.utils,{sha256Sync:{configurable:!1,get(){return Me},set(Fe){Me||(Me=Fe)}},hmacSha256Sync:{configurable:!1,get(){return xe},set(Fe){xe||(xe=Fe)}}})})(lib);function e$1(v,_=!1,x=!0){let E="";return E=(A=>{const P=[];for(let T=0;T<A.length;T+=32768)P.push(String.fromCharCode.apply(null,A.subarray(T,T+32768)));return btoa(P.join(""))})(typeof v=="string"?new TextEncoder().encode(v):new Uint8Array(v)),_&&(E=function(A){return A.replace(/\+/g,"-").replace(/\//g,"_")}(E)),x||(E=E.replace(/=/g,"")),E}function r$2(v,_=!1){{let x=!1;if(/^[0-9a-zA-Z_-]+={0,2}$/.test(v))x=!0;else if(!/^[0-9a-zA-Z+/]*={0,2}$/.test(v))throw new Error("Not a valid base64 input");x&&(v=v.replace(/-/g,"+").replace(/_/g,"/").replace(/=/g,""));const E=new Uint8Array(atob(v).split("").map(A=>A.charCodeAt(0)));return _?new TextDecoder().decode(E):E}}function n$1(v,_=!1,x){const E=v.match(/^(0x)?([\da-fA-F]+)$/);if(E==null)throw new RangeError("input must be a hexadecimal string, e.g. '0x124fe3a' or '0214f1b2'");let A=E[2];if(x!==void 0){if(x<A.length/2)throw new RangeError(`expected byte length ${x} < input hex byte length ${Math.ceil(A.length/2)}`);A=A.padStart(2*x,"0")}return _?"0x"+A:A}function t$1(v,_=!1){if(v<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return l$1(o$1(v),_)}function r$1(v){let _=8n;ArrayBuffer.isView(v)?_=BigInt(8*v.BYTES_PER_ELEMENT):v=new Uint8Array(v);let x=0n;for(const E of v.values())x=(x<<_)+BigInt(E);return x}function o$1(v,_=!1,x){if(v<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return n$1(v.toString(16),_,x)}function a$1(v){return BigInt(n$1(v,!0))}function i$1(v){if(v<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return f$2(l$1(v.toString(16)))}function u$1(v){return a$1(g$1(c$1(v)))}function f$2(v){return new TextDecoder().decode(new Uint8Array(v))}function c$1(v,_=!1){return new TextEncoder().encode(v).buffer}function g$1(v,_=!1,x){{let E="";const A="0123456789abcdef";return(v=ArrayBuffer.isView(v)?new Uint8Array(v.buffer.slice(v.byteOffset,v.byteOffset+v.byteLength)):new Uint8Array(v)).forEach(P=>{E+=A[P>>4]+A[15&P]}),n$1(E,_,x)}}function l$1(v,_=!1){let x=n$1(v);return x=n$1(v,!1,Math.ceil(x.length/2)),Uint8Array.from(x.match(/[\da-fA-F]{2}/g).map(E=>parseInt(E,16))).buffer}function s$1(v,_=!1,x=!0){return e$1(t$1(v),_,x)}function d$1(v){return r$1(r$2(v))}const index_browser=Object.freeze(Object.defineProperty({__proto__:null,base64ToBigint:d$1,bigintToBase64:s$1,bigintToBuf:t$1,bigintToHex:o$1,bigintToText:i$1,bufToBigint:r$1,bufToHex:g$1,bufToText:f$2,hexToBigint:a$1,hexToBuf:l$1,parseHex:n$1,textToBigint:u$1,textToBuf:c$1},Symbol.toStringTag,{value:"Module"})),require$$16=getAugmentedNamespace(index_browser);function n(v){return v>=0?v:-v}function t(v){if(typeof v=="number"&&(v=BigInt(v)),v===1n)return 1;let _=1;do _++;while((v>>=1n)>1n);return _}function e(v,_){if(typeof v=="number"&&(v=BigInt(v)),typeof _=="number"&&(_=BigInt(_)),v<=0n||_<=0n)throw new RangeError("a and b MUST be > 0");let x=0n,E=1n,A=1n,P=0n;for(;v!==0n;){const T=_/v,O=_%v,k=x-A*T,C=E-P*T;_=v,v=O,x=A,E=P,A=k,P=C}return{g:_,x,y:E}}function r(v,_){if(typeof v=="number"&&(v=BigInt(v)),typeof _=="number"&&(_=BigInt(_)),_<=0n)throw new RangeError("n must be > 0");const x=v%_;return x<0n?x+_:x}function o(v,_){const x=e(r(v,_),_);if(x.g!==1n)throw new RangeError(`${v.toString()} does not have inverse modulo ${_.toString()}`);return r(x.x,_)}function i(v,_,x){if(v.length!==_.length)throw new RangeError("The remainders and modulos arrays should have the same length");const E=x??_.reduce((A,P)=>A*P,1n);return _.reduce((A,P,T)=>{const O=E/P;return r(A+O*o(O,P)%E*v[T]%E,E)},0n)}function s(v,_){let x=typeof v=="number"?BigInt(n(v)):n(v),E=typeof _=="number"?BigInt(n(_)):n(_);if(x===0n)return E;if(E===0n)return x;let A=0n;for(;(1n&(x|E))===0n;)x>>=1n,E>>=1n,A++;for(;(1n&x)===0n;)x>>=1n;do{for(;(1n&E)===0n;)E>>=1n;if(x>E){const P=x;x=E,E=P}E-=x}while(E!==0n);return x<<A}function u(v,_){return typeof v=="number"&&(v=BigInt(v)),typeof _=="number"&&(_=BigInt(_)),v===0n&&_===0n?BigInt(0):n(v/s(v,_)*_)}function a(v,_){return v>=_?v:_}function c(v,_){return v>=_?_:v}function f$1(v,_){const x=BigInt(_);return r(v.map(E=>BigInt(E)%x).reduce((E,A)=>E+A%x,0n),x)}function g(v,_){const x=BigInt(_);return r(v.map(E=>BigInt(E)%x).reduce((E,A)=>E*A%x,1n),x)}function m(v){return v.map(_=>_[0]**(_[1]-1n)*(_[0]-1n)).reduce((_,x)=>x*_,1n)}function d(v,_,x,E){if(typeof v=="number"&&(v=BigInt(v)),typeof _=="number"&&(_=BigInt(_)),typeof x=="number"&&(x=BigInt(x)),x<=0n)throw new RangeError("n must be > 0");if(x===1n)return 0n;if(v=r(v,x),_<0n)return o(d(v,n(_),x,E),x);if(E!==void 0)return function(P,T,O,k){const C=k.map(H=>H[0]**H[1]),U=k.map(H=>m([H])),N=U.map((H,D)=>d(P,T%H,C[D]));return i(N,C,O)}(v,_,x,function(P){const T={};return P.forEach(O=>{if(typeof O=="bigint"||typeof O=="number"){const k=String(O);T[k]===void 0?T[k]={p:BigInt(O),k:1n}:T[k].k+=1n}else{const k=String(O[0]);T[k]===void 0?T[k]={p:BigInt(O[0]),k:BigInt(O[1])}:T[k].k+=BigInt(O[1])}}),Object.values(T).map(O=>[O.p,O.k])}(E));let A=1n;for(;_>0;)_%2n===1n&&(A=A*v%x),_/=2n,v=v**2n%x;return A}function l(v){let _=0n;for(const x of v.values())_=(_<<8n)+BigInt(x);return _}function b(v,_=!1){if(v<1)throw new RangeError("byteLength MUST be > 0");return new Promise(function(x,E){{const A=new Uint8Array(v);if(v<=65536)self.crypto.getRandomValues(A);else for(let P=0;P<Math.ceil(v/65536);P++){const T=65536*P,O=T+65535<v?T+65535:v-1;self.crypto.getRandomValues(A.subarray(T,O))}_&&(A[0]=128|A[0]),x(A)}})}function h$1(v,_=!1){if(v<1)throw new RangeError("byteLength MUST be > 0");{const x=new Uint8Array(v);if(v<=65536)self.crypto.getRandomValues(x);else for(let E=0;E<Math.ceil(v/65536);E++){const A=65536*E,P=A+65535<v?A+65535:v-1;self.crypto.getRandomValues(x.subarray(A,P))}return _&&(x[0]=128|x[0]),x}}function w(v,_=!1){if(v<1)throw new RangeError("bitLength MUST be > 0");const x=Math.ceil(v/8),E=v%8;return new Promise((A,P)=>{b(x,!1).then(function(T){if(E!==0&&(T[0]=T[0]&2**E-1),_){const O=E!==0?2**(E-1):128;T[0]=T[0]|O}A(T)})})}function p(v,_=!1){if(v<1)throw new RangeError("bitLength MUST be > 0");const x=h$1(Math.ceil(v/8),!1),E=v%8;if(E!==0&&(x[0]=x[0]&2**E-1),_){const A=E!==0?2**(E-1):128;x[0]=x[0]|A}return x}function y(v,_=1n){if(v<=_)throw new RangeError("Arguments MUST be: max > min");const x=v-_,E=t(x);let A;do A=l(p(E));while(A>x);return A+_}let B=!1;function I(v,_=16,x=!1){if(typeof v=="number"&&(v=BigInt(v)),v<0n)throw RangeError("w MUST be >= 0");return new Promise((E,A)=>{const P=new Worker($());P.onmessage=O=>{var k,C;((C=(k=O==null?void 0:O.data)==null?void 0:k._bcu)==null?void 0:C.isPrime)!==void 0&&(P.terminate(),E(O.data._bcu.isPrime))},P.onmessageerror=O=>{A(O)};const T={_bcu:{rnd:v,iterations:_,id:0}};P.postMessage(T)})}function S(v,_){if(v===2n)return!0;if((1n&v)===0n||v===1n)return!1;const x=[3n,5n,7n,11n,13n,17n,19n,23n,29n,31n,37n,41n,43n,47n,53n,59n,61n,67n,71n,73n,79n,83n,89n,97n,101n,103n,107n,109n,113n,127n,131n,137n,139n,149n,151n,157n,163n,167n,173n,179n,181n,191n,193n,197n,199n,211n,223n,227n,229n,233n,239n,241n,251n,257n,263n,269n,271n,277n,281n,283n,293n,307n,311n,313n,317n,331n,337n,347n,349n,353n,359n,367n,373n,379n,383n,389n,397n,401n,409n,419n,421n,431n,433n,439n,443n,449n,457n,461n,463n,467n,479n,487n,491n,499n,503n,509n,521n,523n,541n,547n,557n,563n,569n,571n,577n,587n,593n,599n,601n,607n,613n,617n,619n,631n,641n,643n,647n,653n,659n,661n,673n,677n,683n,691n,701n,709n,719n,727n,733n,739n,743n,751n,757n,761n,769n,773n,787n,797n,809n,811n,821n,823n,827n,829n,839n,853n,857n,859n,863n,877n,881n,883n,887n,907n,911n,919n,929n,937n,941n,947n,953n,967n,971n,977n,983n,991n,997n,1009n,1013n,1019n,1021n,1031n,1033n,1039n,1049n,1051n,1061n,1063n,1069n,1087n,1091n,1093n,1097n,1103n,1109n,1117n,1123n,1129n,1151n,1153n,1163n,1171n,1181n,1187n,1193n,1201n,1213n,1217n,1223n,1229n,1231n,1237n,1249n,1259n,1277n,1279n,1283n,1289n,1291n,1297n,1301n,1303n,1307n,1319n,1321n,1327n,1361n,1367n,1373n,1381n,1399n,1409n,1423n,1427n,1429n,1433n,1439n,1447n,1451n,1453n,1459n,1471n,1481n,1483n,1487n,1489n,1493n,1499n,1511n,1523n,1531n,1543n,1549n,1553n,1559n,1567n,1571n,1579n,1583n,1597n];for(let O=0;O<x.length&&x[O]<=v;O++){const k=x[O];if(v===k)return!0;if(v%k===0n)return!1}let E=0n;const A=v-1n;let P=A;for(;P%2n===0n;)P/=2n,++E;const T=A/2n**E;do{let O=d(y(A,2n),T,v);if(O===1n||O===A)continue;let k=1;for(;k<E&&(O=d(O,2n,v),O!==A);){if(O===1n)return!1;k++}if(O!==A)return!1}while(--_!=0);return!0}function $(){let v=`
  'use strict';
  const ${e.name} = ${e.toString()};
  const ${o.name} = ${o.toString()};
  const ${d.name} = ${d.toString()};
  const ${r.name} = ${r.toString()};
  const ${p.name} = ${p.toString()};
  const ${h$1.name} = ${h$1.toString()};
  const ${y.name} = ${y.toString()};
  const ${I.name} = ${S.toString()};
  ${t.toString()};
  ${l.toString()};`;return v+=`
  onmessage = async function(msg) {
    if (msg !== undefined && msg.data !== undefined && msg.data._bcu !== undefined && msg.data._bcu.id !== undefined && msg.data._bcu.iterations !== undefined && msg.data._bcu.rnd !== undefined) {
      const msgToParent = {
        _bcu: {
          isPrime: await ${I.name}(msg.data._bcu.rnd, msg.data._bcu.iterations),
          value: msg.data._bcu.rnd,
          id: msg.data._bcu.id
        }
      };
      postMessage(msgToParent);
    }
  }`,function(_){_=`(() => {${_}})()`;const x=new Blob([_],{type:"text/javascript"});return window.URL.createObjectURL(x)}(v)}function R(v,_=16){if(v<1)throw new RangeError("bitLength MUST be > 0");if(!B){let x=0n;do x=l(p(v,!0));while(!S(x,_));return new Promise(E=>{E(x)})}return new Promise((x,E)=>{const A=[],P=(T,O)=>{if(T._bcu.isPrime){for(let k=0;k<A.length;k++)A[k].terminate();for(;A.length>0;)A.pop();x(T._bcu.value)}else{const k=l(p(v,!0));try{const C={_bcu:{rnd:k,iterations:_,id:T._bcu.id}};O.postMessage(C)}catch{}}};{const T=$();for(let O=0;O<self.navigator.hardwareConcurrency-1;O++){const k=new Worker(T);k.onmessage=C=>P(C.data,k),A.push(k)}}for(let T=0;T<A.length;T++)w(v,!0).then(function(O){const k=l(O);A[T].postMessage({_bcu:{rnd:k,iterations:_,id:T}})}).catch(E)})}function M(v,_=16){if(v<1)throw new RangeError("bitLength MUST be > 0");let x=0n;do x=l(p(v,!0));while(!S(x,_));return x}self.Worker!==void 0&&(B=!0);const index_browser_esm=Object.freeze(Object.defineProperty({__proto__:null,abs:n,bitLength:t,crt:i,eGcd:e,gcd:s,isProbablyPrime:I,lcm:u,max:a,min:c,modAdd:f$1,modInv:o,modMultiply:g,modPow:d,phi:m,prime:R,primeSync:M,randBetween:y,randBits:w,randBitsSync:p,randBytes:b,randBytesSync:h$1,toZn:r},Symbol.toStringTag,{value:"Module"})),require$$17=getAugmentedNamespace(index_browser_esm);var hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(D,j,V,X){X===void 0&&(X=V);var re=Object.getOwnPropertyDescriptor(j,V);(!re||("get"in re?!j.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return j[V]}}),Object.defineProperty(D,X,re)}:function(D,j,V,X){X===void 0&&(X=V),D[X]=j[V]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(D,j){Object.defineProperty(D,"default",{enumerable:!0,value:j})}:function(D,j){D.default=j}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(D){if(D&&D.__esModule)return D;var j={};if(D!=null)for(var V in D)V!=="default"&&Object.prototype.hasOwnProperty.call(D,V)&&_(j,D,V);return x(j,D),j},A=commonjsGlobal&&commonjsGlobal.__exportStar||function(D,j){for(var V in D)V!=="default"&&!Object.prototype.hasOwnProperty.call(j,V)&&_(j,D,V)},P=commonjsGlobal&&commonjsGlobal.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(v,"__esModule",{value:!0}),v.rsa=v.cryptoJS=v.secp256k1=v.ed25519=v.Long=v._m0=v.protobuf=v.typeforce=v.safeBuffer=v.BigNumber=v.BN=v.math=v.signUtil=v.abi=v.elliptic=v.bip39=v.bip32=v.base=void 0,v.base=E(requireBase()),v.bip32=E(requireBip32()),v.bip39=E(requireBip39()),v.elliptic=E(elliptic$2),v.abi=E(requireAbi()),v.signUtil=E(requireSignutil()),v.math=E(math);const T=P(bnExports$2);v.BN=T.default;const O=P(require$$8);v.BigNumber=O.default;const k=P(safeBufferExports);v.safeBuffer=k.default;const C=typeforce_1;v.typeforce=C,v.protobuf=E(protobufjs),v._m0=E(minimal);const U=P(umdExports);v.Long=U.default,v.ed25519=E(lib$1),v.secp256k1=E(lib),A(require$$16,v),A(require$$17,v);const N=E(cryptoJsExports);v.cryptoJS=N;const H=E(jsrsasign$1);v.rsa=H}(dist$3)),dist$3}(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.oneOf=v.Null=v.BufferN=v.Function=v.UInt32=v.UInt8=v.tuple=v.maybe=v.Hex=v.Buffer=v.String=v.Boolean=v.Array=v.Number=v.Hash256bit=v.Hash160bit=v.Buffer256bit=v.isTaptree=v.isTapleaf=v.TAPLEAF_VERSION_MASK=v.Satoshi=v.Signer=v.BIP32Path=v.UInt31=v.isPoint=v.typeforce=void 0;const _=bufferPolyfill,x=requireDist$1();Object.defineProperty(v,"typeforce",{enumerable:!0,get:function(){return x.typeforce}});const E=_.Buffer.alloc(32,0),A=_.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function P(j){if(!_.Buffer.isBuffer(j)||j.length<33)return!1;const V=j[0],X=j.slice(1,33);if(X.compare(E)===0||X.compare(A)>=0)return!1;if((V===2||V===3)&&j.length===33)return!0;const re=j.slice(33);return re.compare(E)===0||re.compare(A)>=0?!1:V===4&&j.length===65}v.isPoint=P;const T=Math.pow(2,31)-1;function O(j){return x.typeforce.UInt32(j)&&j<=T}v.UInt31=O;function k(j){return x.typeforce.String(j)&&!!j.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}v.BIP32Path=k,k.toJSON=()=>"BIP32 derivation path";function C(j){return(x.typeforce.Buffer(j.publicKey)||typeof j.getPublicKey=="function")&&typeof j.sign=="function"}v.Signer=C;const U=21*1e14;function N(j){return x.typeforce.UInt53(j)&&j<=U}v.Satoshi=N,v.TAPLEAF_VERSION_MASK=254;function H(j){return!j||!("output"in j)||!_.Buffer.isBuffer(j.output)?!1:j.version!==void 0?(j.version&v.TAPLEAF_VERSION_MASK)===j.version:!0}v.isTapleaf=H;function D(j){return(0,v.Array)(j)?j.length!==2?!1:j.every(V=>D(V)):H(j)}v.isTaptree=D,v.Buffer256bit=x.typeforce.BufferN(32),v.Hash160bit=x.typeforce.BufferN(20),v.Hash256bit=x.typeforce.BufferN(32),v.Number=x.typeforce.Number,v.Array=x.typeforce.Array,v.Boolean=x.typeforce.Boolean,v.String=x.typeforce.String,v.Buffer=x.typeforce.Buffer,v.Hex=x.typeforce.Hex,v.maybe=x.typeforce.maybe,v.tuple=x.typeforce.tuple,v.UInt8=x.typeforce.UInt8,v.UInt32=x.typeforce.UInt32,v.Function=x.typeforce.Function,v.BufferN=x.typeforce.BufferN,v.Null=x.typeforce.Null,v.oneOf=x.typeforce.oneOf})(types$d);var __createBinding$n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$n=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$n(_,v,x);return __setModuleDefault$n(_,v),_};Object.defineProperty(script_signature$1,"__esModule",{value:!0}),script_signature$1.encode=script_signature$1.decode=void 0;const bip66$2=__importStar$n(bip66$3),types$8=__importStar$n(types$d),{typeforce:typeforce$7}=types$8,ZERO$3=dist$4.Buffer.alloc(1,0);function toDER$1(v){let _=0;for(;v[_]===0;)++_;return _===v.length?ZERO$3:(v=v.slice(_),v[0]&128?dist$4.Buffer.concat([ZERO$3,v],1+v.length):v)}function fromDER$1(v){v[0]===0&&(v=v.slice(1));const _=dist$4.Buffer.alloc(32,0),x=Math.max(0,32-v.length);return v.copy(_,x),_}function decode$B(v){const _=v.readUInt8(v.length-1),x=_&-193;if(x<=0||x>=4)throw new Error("Invalid hashType "+_);const E=bip66$2.decode(v.slice(0,-1)),A=fromDER$1(E.r),P=fromDER$1(E.s);return{signature:dist$4.Buffer.concat([A,P],64),hashType:_}}script_signature$1.decode=decode$B;function encode$F(v,_){typeforce$7({signature:types$8.BufferN(64),hashType:types$8.UInt8},{signature:v,hashType:_});const x=_&-193;if(x<=0||x>=4)throw new Error("Invalid hashType "+_);const E=dist$4.Buffer.allocUnsafe(1);E.writeUInt8(_,0);const A=toDER$1(v.slice(0,32)),P=toDER$1(v.slice(32,64));return dist$4.Buffer.concat([bip66$2.encode(A,P),E])}script_signature$1.encode=encode$F,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ne,J,q,F){F===void 0&&(F=q);var L=Object.getOwnPropertyDescriptor(J,q);(!L||("get"in L?!J.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return J[q]}}),Object.defineProperty(ne,F,L)}:function(ne,J,q,F){F===void 0&&(F=q),ne[F]=J[q]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ne,J){Object.defineProperty(ne,"default",{enumerable:!0,value:J})}:function(ne,J){ne.default=J}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(ne){if(ne&&ne.__esModule)return ne;var J={};if(ne!=null)for(var q in ne)q!=="default"&&Object.prototype.hasOwnProperty.call(ne,q)&&_(J,ne,q);return x(J,ne),J};Object.defineProperty(v,"__esModule",{value:!0}),v.signature=v.number=v.isCanonicalScriptSignature=v.isDefinedHashType=v.isCanonicalPubKey=v.toStack=v.fromASM=v.toASM=v.decompile=v.compile=v.isPushOnly=v.OPS=void 0;const A=E(bip66$3),P=ops$1;Object.defineProperty(v,"OPS",{enumerable:!0,get:function(){return P.OPS}});const T=E(push_data$1),O=E(script_number$1),k=E(script_signature$1),C=E(types$d),{typeforce:U}=C,N=P.OPS.OP_RESERVED;function H(ne){return C.Number(ne)&&(ne===P.OPS.OP_0||ne>=P.OPS.OP_1&&ne<=P.OPS.OP_16||ne===P.OPS.OP_1NEGATE)}function D(ne){return C.Buffer(ne)||H(ne)}function j(ne){return C.Array(ne)&&ne.every(D)}v.isPushOnly=j;function V(ne){if(ne.length===0)return P.OPS.OP_0;if(ne.length===1){if(ne[0]>=1&&ne[0]<=16)return N+ne[0];if(ne[0]===129)return P.OPS.OP_1NEGATE}}function X(ne){return dist$4.Buffer.isBuffer(ne)}function re(ne){return C.Array(ne)}function ee(ne){return dist$4.Buffer.isBuffer(ne)}function fe(ne){if(X(ne))return ne;U(C.Array,ne);const J=ne.reduce((L,Z)=>ee(Z)?Z.length===1&&V(Z)!==void 0?L+1:L+T.encodingLength(Z.length)+Z.length:L+1,0),q=dist$4.Buffer.allocUnsafe(J);let F=0;if(ne.forEach(L=>{if(ee(L)){const Z=V(L);if(Z!==void 0){q.writeUInt8(Z,F),F+=1;return}F+=T.encode(q,L.length,F),L.copy(q,F),F+=L.length}else q.writeUInt8(L,F),F+=1}),F!==q.length)throw new Error("Could not decode chunks");return q}v.compile=fe;function le(ne){if(re(ne))return ne;U(C.Buffer,ne);const J=[];let q=0;for(;q<ne.length;){const F=ne[q];if(F>P.OPS.OP_0&&F<=P.OPS.OP_PUSHDATA4){const L=T.decode(ne,q);if(L===null||(q+=L.size,q+L.number>ne.length))return null;const Z=ne.slice(q,q+L.number);q+=L.number;const Q=V(Z);Q!==void 0?J.push(Q):J.push(Z)}else J.push(F),q+=1}return J}v.decompile=le;function pe(ne){return X(ne)&&(ne=le(ne)),ne.map(J=>{if(ee(J)){const q=V(J);if(q===void 0)return J.toString("hex");J=q}return P.REVERSE_OPS[J]}).join(" ")}v.toASM=pe;function ie(ne){return U(C.String,ne),fe(ne.split(" ").map(J=>P.OPS[J]!==void 0?P.OPS[J]:(U(C.Hex,J),dist$4.Buffer.from(J,"hex"))))}v.fromASM=ie;function he(ne){return ne=le(ne),U(j,ne),ne.map(J=>ee(J)?J:J===P.OPS.OP_0?dist$4.Buffer.allocUnsafe(0):O.encode(J-N))}v.toStack=he;function ae(ne){return C.isPoint(ne)}v.isCanonicalPubKey=ae;function te(ne){let J=ne;return J&128&&(J=J&-129),J&64&&(J=J&-65),J>0&&J<4}v.isDefinedHashType=te;function ue(ne){return!dist$4.Buffer.isBuffer(ne)||!te(ne[ne.length-1])?!1:A.check(ne.slice(0,-1))}v.isCanonicalScriptSignature=ue,v.number=O,v.signature=k}(script$1);var lazy$h={};Object.defineProperty(lazy$h,"__esModule",{value:!0}),lazy$h.value=lazy$h.prop=void 0;function prop$1(v,_,x){Object.defineProperty(v,_,{configurable:!0,enumerable:!0,get(){const E=x.call(this);return this[_]=E,E},set(E){Object.defineProperty(this,_,{configurable:!0,enumerable:!0,value:E,writable:!0})}})}lazy$h.prop=prop$1;function value$1(v){let _;return()=>(_!==void 0||(_=v()),_)}lazy$h.value=value$1;var __createBinding$m=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$m=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$m=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$m(_,v,x);return __setModuleDefault$m(_,v),_};Object.defineProperty(embed$1,"__esModule",{value:!0}),embed$1.p2data=void 0;const networks_1$h=networks$3,bscript$n=__importStar$m(script$1),types_1$i=types$d,lazy$g=__importStar$m(lazy$h),OPS$g=bscript$n.OPS;function stacksEqual$9(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2data$1(v,_){if(!v.data&&!v.output)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$i.typeforce)({network:types_1$i.typeforce.maybe(types_1$i.typeforce.Object),output:types_1$i.typeforce.maybe(types_1$i.typeforce.Buffer),data:types_1$i.typeforce.maybe(types_1$i.typeforce.arrayOf(types_1$i.typeforce.Buffer))},v);const E={name:"embed",network:v.network||networks_1$h.bitcoin};if(lazy$g.prop(E,"output",()=>{if(v.data)return bscript$n.compile([OPS$g.OP_RETURN].concat(v.data))}),lazy$g.prop(E,"data",()=>{if(v.output)return bscript$n.decompile(v.output).slice(1)}),_.validate&&v.output){const A=bscript$n.decompile(v.output);if(A[0]!==OPS$g.OP_RETURN)throw new TypeError("Output is invalid");if(!A.slice(1).every(types_1$i.typeforce.Buffer))throw new TypeError("Output is invalid");if(v.data&&!stacksEqual$9(v.data,E.data))throw new TypeError("Data mismatch")}return Object.assign(E,v)}embed$1.p2data=p2data$1;var p2ms$3={},__createBinding$l=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$l=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$l=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$l(_,v,x);return __setModuleDefault$l(_,v),_};Object.defineProperty(p2ms$3,"__esModule",{value:!0}),p2ms$3.p2ms=void 0;const networks_1$g=networks$3,bscript$m=__importStar$l(script$1),types_1$h=types$d,lazy$f=__importStar$l(lazy$h),OPS$f=bscript$m.OPS,OP_INT_BASE$1=OPS$f.OP_RESERVED;function stacksEqual$8(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2ms$2(v,_){if(!v.input&&!v.output&&!(v.pubkeys&&v.m!==void 0)&&!v.signatures)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{});function x(k){return bscript$m.isCanonicalScriptSignature(k)||(_.allowIncomplete&&k===OPS$f.OP_0)!==void 0}(0,types_1$h.typeforce)({network:types_1$h.typeforce.maybe(types_1$h.typeforce.Object),m:types_1$h.typeforce.maybe(types_1$h.typeforce.Number),n:types_1$h.typeforce.maybe(types_1$h.typeforce.Number),output:types_1$h.typeforce.maybe(types_1$h.typeforce.Buffer),pubkeys:types_1$h.typeforce.maybe(types_1$h.typeforce.arrayOf(types_1$h.isPoint)),signatures:types_1$h.typeforce.maybe(types_1$h.typeforce.arrayOf(x)),input:types_1$h.typeforce.maybe(types_1$h.typeforce.Buffer)},v);const A={network:v.network||networks_1$g.bitcoin};let P=[],T=!1;function O(k){T||(T=!0,P=bscript$m.decompile(k),A.m=P[0]-OP_INT_BASE$1,A.n=P[P.length-2]-OP_INT_BASE$1,A.pubkeys=P.slice(1,-2))}if(lazy$f.prop(A,"output",()=>{if(v.m&&A.n&&v.pubkeys)return bscript$m.compile([].concat(OP_INT_BASE$1+v.m,v.pubkeys,OP_INT_BASE$1+A.n,OPS$f.OP_CHECKMULTISIG))}),lazy$f.prop(A,"m",()=>{if(A.output)return O(A.output),A.m}),lazy$f.prop(A,"n",()=>{if(A.pubkeys)return A.pubkeys.length}),lazy$f.prop(A,"pubkeys",()=>{if(v.output)return O(v.output),A.pubkeys}),lazy$f.prop(A,"signatures",()=>{if(v.input)return bscript$m.decompile(v.input).slice(1)}),lazy$f.prop(A,"input",()=>{if(v.signatures)return bscript$m.compile([OPS$f.OP_0].concat(v.signatures))}),lazy$f.prop(A,"witness",()=>{if(A.input)return[]}),lazy$f.prop(A,"name",()=>{if(!(!A.m||!A.n))return`p2ms(${A.m} of ${A.n})`}),_.validate){if(v.output){if(O(v.output),!types_1$h.typeforce.Number(P[0]))throw new TypeError("Output is invalid");if(!types_1$h.typeforce.Number(P[P.length-2]))throw new TypeError("Output is invalid");if(P[P.length-1]!==OPS$f.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(A.m<=0||A.n>16||A.m>A.n||A.n!==P.length-3)throw new TypeError("Output is invalid");if(!A.pubkeys.every(k=>(0,types_1$h.isPoint)(k)))throw new TypeError("Output is invalid");if(v.m!==void 0&&v.m!==A.m)throw new TypeError("m mismatch");if(v.n!==void 0&&v.n!==A.n)throw new TypeError("n mismatch");if(v.pubkeys&&!stacksEqual$8(v.pubkeys,A.pubkeys))throw new TypeError("Pubkeys mismatch")}if(v.pubkeys){if(v.n!==void 0&&v.n!==v.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(A.n=v.pubkeys.length,A.n<A.m)throw new TypeError("Pubkey count cannot be less than m")}if(v.signatures){if(v.signatures.length<A.m)throw new TypeError("Not enough signatures provided");if(v.signatures.length>A.m)throw new TypeError("Too many signatures provided")}if(v.input){if(v.input[0]!==OPS$f.OP_0)throw new TypeError("Input is invalid");if(A.signatures.length===0||!A.signatures.every(x))throw new TypeError("Input has invalid signature(s)");if(v.signatures&&!stacksEqual$8(v.signatures,A.signatures))throw new TypeError("Signature mismatch");if(v.m!==void 0&&v.m!==v.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(A,v)}p2ms$3.p2ms=p2ms$2;var p2pk$3={},__createBinding$k=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$k=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$k=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$k(_,v,x);return __setModuleDefault$k(_,v),_};Object.defineProperty(p2pk$3,"__esModule",{value:!0}),p2pk$3.p2pk=void 0;const networks_1$f=networks$3,bscript$l=__importStar$k(script$1),types_1$g=types$d,lazy$e=__importStar$k(lazy$h),OPS$e=bscript$l.OPS;function p2pk$2(v,_){if(!v.input&&!v.output&&!v.pubkey&&!v.input&&!v.signature)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$g.typeforce)({network:types_1$g.typeforce.maybe(types_1$g.typeforce.Object),output:types_1$g.typeforce.maybe(types_1$g.typeforce.Buffer),pubkey:types_1$g.typeforce.maybe(types_1$g.isPoint),signature:types_1$g.typeforce.maybe(bscript$l.isCanonicalScriptSignature),input:types_1$g.typeforce.maybe(types_1$g.typeforce.Buffer)},v);const x=lazy$e.value(()=>bscript$l.decompile(v.input)),A={name:"p2pk",network:v.network||networks_1$f.bitcoin};if(lazy$e.prop(A,"output",()=>{if(v.pubkey)return bscript$l.compile([v.pubkey,OPS$e.OP_CHECKSIG])}),lazy$e.prop(A,"pubkey",()=>{if(v.output)return v.output.slice(1,-1)}),lazy$e.prop(A,"signature",()=>{if(v.input)return x()[0]}),lazy$e.prop(A,"input",()=>{if(v.signature)return bscript$l.compile([v.signature])}),lazy$e.prop(A,"witness",()=>{if(A.input)return[]}),_.validate){if(v.output){if(v.output[v.output.length-1]!==OPS$e.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,types_1$g.isPoint)(A.pubkey))throw new TypeError("Output pubkey is invalid");if(v.pubkey&&!v.pubkey.equals(A.pubkey))throw new TypeError("Pubkey mismatch")}if(v.signature&&v.input&&!v.input.equals(A.input))throw new TypeError("Signature mismatch");if(v.input){if(x().length!==1)throw new TypeError("Input is invalid");if(!bscript$l.isCanonicalScriptSignature(A.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(A,v)}p2pk$3.p2pk=p2pk$2;var p2pkh$3={},crypto$4={};Object.defineProperty(crypto$4,"__esModule",{value:!0}),crypto$4.taggedHash=crypto$4.hash256=crypto$4.hash160=crypto$4.sha256=crypto$4.ripemd160=void 0;const crypto_lib_1$d=requireDist$1();function ripemd160$1(v){return dist$4.Buffer.from(crypto_lib_1$d.base.ripemd160(v))}crypto$4.ripemd160=ripemd160$1;function sha256$2(v){return dist$4.Buffer.from(crypto_lib_1$d.base.sha256(v))}crypto$4.sha256=sha256$2;function hash160(v){return ripemd160$1(sha256$2(v))}crypto$4.hash160=hash160;function hash256(v){return sha256$2(sha256$2(v))}crypto$4.hash256=hash256;const TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],TAGGED_HASH_PREFIXES=Object.fromEntries(TAGS.map(v=>{const _=sha256$2(dist$4.Buffer.from(v));return[v,dist$4.Buffer.concat([_,_])]}));function taggedHash(v,_){return sha256$2(dist$4.Buffer.concat([TAGGED_HASH_PREFIXES[v],_]))}crypto$4.taggedHash=taggedHash;var __createBinding$j=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$j=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$j=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$j(_,v,x);return __setModuleDefault$j(_,v),_};Object.defineProperty(p2pkh$3,"__esModule",{value:!0}),p2pkh$3.p2pkh=void 0;const bcrypto$b=__importStar$j(crypto$4),networks_1$e=networks$3,bscript$k=__importStar$j(script$1),types_1$f=types$d,lazy$d=__importStar$j(lazy$h),OPS$d=bscript$k.OPS,crypto_lib_1$c=requireDist$1();function p2pkh$2(v,_){if(!v.address&&!v.hash&&!v.output&&!v.pubkey&&!v.input)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$f.typeforce)({network:types_1$f.typeforce.maybe(types_1$f.typeforce.Object),address:types_1$f.typeforce.maybe(types_1$f.typeforce.String),hash:types_1$f.typeforce.maybe(types_1$f.typeforce.BufferN(20)),output:types_1$f.typeforce.maybe(types_1$f.typeforce.BufferN(25)),pubkey:types_1$f.typeforce.maybe(types_1$f.isPoint),signature:types_1$f.typeforce.maybe(bscript$k.isCanonicalScriptSignature),input:types_1$f.typeforce.maybe(types_1$f.typeforce.Buffer)},v);const x=lazy$d.value(()=>{const T=crypto_lib_1$c.base.fromBase58Check(v.address),O=T.readUInt8(0),k=T.slice(1);return{version:O,hash:k}}),E=lazy$d.value(()=>bscript$k.decompile(v.input)),A=v.network||networks_1$e.bitcoin,P={name:"p2pkh",network:A};if(lazy$d.prop(P,"address",()=>{if(!P.hash)return;const T=dist$4.Buffer.allocUnsafe(21);return T.writeUInt8(A.pubKeyHash,0),P.hash.copy(T,1),crypto_lib_1$c.base.toBase58Check(T)}),lazy$d.prop(P,"hash",()=>{if(v.output)return v.output.slice(3,23);if(v.address)return x().hash;if(v.pubkey||P.pubkey)return bcrypto$b.hash160(v.pubkey||P.pubkey)}),lazy$d.prop(P,"output",()=>{if(P.hash)return bscript$k.compile([OPS$d.OP_DUP,OPS$d.OP_HASH160,P.hash,OPS$d.OP_EQUALVERIFY,OPS$d.OP_CHECKSIG])}),lazy$d.prop(P,"pubkey",()=>{if(v.input)return E()[1]}),lazy$d.prop(P,"signature",()=>{if(v.input)return E()[0]}),lazy$d.prop(P,"input",()=>{if(v.pubkey&&v.signature)return bscript$k.compile([v.signature,v.pubkey])}),lazy$d.prop(P,"witness",()=>{if(P.input)return[]}),_.validate){let T=dist$4.Buffer.from([]);if(v.address){if(x().version!==A.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(x().hash.length!==20)throw new TypeError("Invalid address");T=x().hash}if(v.hash){if(T.length>0&&!T.equals(v.hash))throw new TypeError("Hash mismatch");T=v.hash}if(v.output){if(v.output.length!==25||v.output[0]!==OPS$d.OP_DUP||v.output[1]!==OPS$d.OP_HASH160||v.output[2]!==20||v.output[23]!==OPS$d.OP_EQUALVERIFY||v.output[24]!==OPS$d.OP_CHECKSIG)throw new TypeError("Output is invalid");const O=v.output.slice(3,23);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.pubkey){const O=bcrypto$b.hash160(v.pubkey);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.input){const O=E();if(O.length!==2)throw new TypeError("Input is invalid");if(!bscript$k.isCanonicalScriptSignature(O[0]))throw new TypeError("Input has invalid signature");if(!(0,types_1$f.isPoint)(O[1]))throw new TypeError("Input has invalid pubkey");if(v.signature&&!v.signature.equals(O[0]))throw new TypeError("Signature mismatch");if(v.pubkey&&!v.pubkey.equals(O[1]))throw new TypeError("Pubkey mismatch");const k=bcrypto$b.hash160(O[1]);if(T.length>0&&!T.equals(k))throw new TypeError("Hash mismatch")}}return Object.assign(P,v)}p2pkh$3.p2pkh=p2pkh$2;var p2sh$3={},__createBinding$i=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$i=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$i=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$i(_,v,x);return __setModuleDefault$i(_,v),_};Object.defineProperty(p2sh$3,"__esModule",{value:!0}),p2sh$3.p2sh=void 0;const bcrypto$a=__importStar$i(crypto$4),networks_1$d=networks$3,bscript$j=__importStar$i(script$1),types_1$e=types$d,lazy$c=__importStar$i(lazy$h),crypto_lib_1$b=requireDist$1(),OPS$c=bscript$j.OPS;function stacksEqual$7(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2sh$2(v,_){if(!v.address&&!v.hash&&!v.output&&!v.redeem&&!v.input)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$e.typeforce)({network:types_1$e.typeforce.maybe(types_1$e.typeforce.Object),address:types_1$e.typeforce.maybe(types_1$e.typeforce.String),hash:types_1$e.typeforce.maybe(types_1$e.typeforce.BufferN(20)),output:types_1$e.typeforce.maybe(types_1$e.typeforce.BufferN(23)),redeem:types_1$e.typeforce.maybe({network:types_1$e.typeforce.maybe(types_1$e.typeforce.Object),output:types_1$e.typeforce.maybe(types_1$e.typeforce.Buffer),input:types_1$e.typeforce.maybe(types_1$e.typeforce.Buffer),witness:types_1$e.typeforce.maybe(types_1$e.typeforce.arrayOf(types_1$e.typeforce.Buffer))}),input:types_1$e.typeforce.maybe(types_1$e.typeforce.Buffer),witness:types_1$e.typeforce.maybe(types_1$e.typeforce.arrayOf(types_1$e.typeforce.Buffer))},v);let x=v.network;x||(x=v.redeem&&v.redeem.network||networks_1$d.bitcoin);const E={network:x},A=lazy$c.value(()=>{const O=crypto_lib_1$b.base.fromBase58Check(v.address),k=O.readUInt8(0),C=O.slice(1);return{version:k,hash:C}}),P=lazy$c.value(()=>bscript$j.decompile(v.input)),T=lazy$c.value(()=>{const O=P();return{network:x,output:O[O.length-1],input:bscript$j.compile(O.slice(0,-1)),witness:v.witness||[]}});if(lazy$c.prop(E,"address",()=>{if(!E.hash)return;const O=dist$4.Buffer.allocUnsafe(21);return O.writeUInt8(E.network.scriptHash,0),E.hash.copy(O,1),crypto_lib_1$b.base.toBase58Check(O)}),lazy$c.prop(E,"hash",()=>{if(v.output)return v.output.slice(2,22);if(v.address)return A().hash;if(E.redeem&&E.redeem.output)return bcrypto$a.hash160(E.redeem.output)}),lazy$c.prop(E,"output",()=>{if(E.hash)return bscript$j.compile([OPS$c.OP_HASH160,E.hash,OPS$c.OP_EQUAL])}),lazy$c.prop(E,"redeem",()=>{if(v.input)return T()}),lazy$c.prop(E,"input",()=>{if(!(!v.redeem||!v.redeem.input||!v.redeem.output))return bscript$j.compile([].concat(bscript$j.decompile(v.redeem.input),v.redeem.output))}),lazy$c.prop(E,"witness",()=>{if(E.redeem&&E.redeem.witness)return E.redeem.witness;if(E.input)return[]}),lazy$c.prop(E,"name",()=>{const O=["p2sh"];return E.redeem!==void 0&&E.redeem.name!==void 0&&O.push(E.redeem.name),O.join("-")}),_.validate){let O=dist$4.Buffer.from([]);if(v.address){if(A().version!==x.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(A().hash.length!==20)throw new TypeError("Invalid address");O=A().hash}if(v.hash){if(O.length>0&&!O.equals(v.hash))throw new TypeError("Hash mismatch");O=v.hash}if(v.output){if(v.output.length!==23||v.output[0]!==OPS$c.OP_HASH160||v.output[1]!==20||v.output[22]!==OPS$c.OP_EQUAL)throw new TypeError("Output is invalid");const C=v.output.slice(2,22);if(O.length>0&&!O.equals(C))throw new TypeError("Hash mismatch");O=C}const k=C=>{if(C.output){const U=bscript$j.decompile(C.output);if(!U||U.length<1)throw new TypeError("Redeem.output too short");const N=bcrypto$a.hash160(C.output);if(O.length>0&&!O.equals(N))throw new TypeError("Hash mismatch");O=N}if(C.input){const U=C.input.length>0,N=C.witness&&C.witness.length>0;if(!U&&!N)throw new TypeError("Empty input");if(U&&N)throw new TypeError("Input and witness provided");if(U){const H=bscript$j.decompile(C.input);if(!bscript$j.isPushOnly(H))throw new TypeError("Non push-only scriptSig")}}};if(v.input){const C=P();if(!C||C.length<1)throw new TypeError("Input too short");if(!dist$4.Buffer.isBuffer(T().output))throw new TypeError("Input is invalid");k(T())}if(v.redeem){if(v.redeem.network&&v.redeem.network!==x)throw new TypeError("Network mismatch");if(v.input){const C=T();if(v.redeem.output&&!v.redeem.output.equals(C.output))throw new TypeError("Redeem.output mismatch");if(v.redeem.input&&!v.redeem.input.equals(C.input))throw new TypeError("Redeem.input mismatch")}k(v.redeem)}if(v.witness&&v.redeem&&v.redeem.witness&&!stacksEqual$7(v.redeem.witness,v.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(E,v)}p2sh$3.p2sh=p2sh$2;var p2wpkh$3={},__createBinding$h=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$h=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$h=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$h(_,v,x);return __setModuleDefault$h(_,v),_};Object.defineProperty(p2wpkh$3,"__esModule",{value:!0}),p2wpkh$3.p2wpkh=void 0;const bcrypto$9=__importStar$h(crypto$4),networks_1$c=networks$3,bscript$i=__importStar$h(script$1),types_1$d=types$d,lazy$b=__importStar$h(lazy$h),crypto_lib_1$a=requireDist$1(),OPS$b=bscript$i.OPS,EMPTY_BUFFER$5=dist$4.Buffer.alloc(0);function p2wpkh$2(v,_){if(!v.address&&!v.hash&&!v.output&&!v.pubkey&&!v.witness)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$d.typeforce)({address:types_1$d.typeforce.maybe(types_1$d.typeforce.String),hash:types_1$d.typeforce.maybe(types_1$d.typeforce.BufferN(20)),input:types_1$d.typeforce.maybe(types_1$d.typeforce.BufferN(0)),network:types_1$d.typeforce.maybe(types_1$d.typeforce.Object),output:types_1$d.typeforce.maybe(types_1$d.typeforce.BufferN(22)),pubkey:types_1$d.typeforce.maybe(types_1$d.isPoint),signature:types_1$d.typeforce.maybe(bscript$i.isCanonicalScriptSignature),witness:types_1$d.typeforce.maybe(types_1$d.typeforce.arrayOf(types_1$d.typeforce.Buffer))},v);const x=lazy$b.value(()=>{const P=crypto_lib_1$a.base.bech32.decode(v.address),T=P.words.shift(),O=crypto_lib_1$a.base.bech32.fromWords(P.words);return{version:T,prefix:P.prefix,data:dist$4.Buffer.from(O)}}),E=v.network||networks_1$c.bitcoin,A={name:"p2wpkh",network:E};if(lazy$b.prop(A,"address",()=>{if(!A.hash)return;const P=crypto_lib_1$a.base.bech32.toWords(A.hash);return P.unshift(0),crypto_lib_1$a.base.bech32.encode(E.bech32,P)}),lazy$b.prop(A,"hash",()=>{if(v.output)return v.output.slice(2,22);if(v.address)return x().data;if(v.pubkey||A.pubkey)return bcrypto$9.hash160(v.pubkey||A.pubkey)}),lazy$b.prop(A,"output",()=>{if(A.hash)return bscript$i.compile([OPS$b.OP_0,A.hash])}),lazy$b.prop(A,"pubkey",()=>{if(v.pubkey)return v.pubkey;if(v.witness)return v.witness[1]}),lazy$b.prop(A,"signature",()=>{if(v.witness)return v.witness[0]}),lazy$b.prop(A,"input",()=>{if(A.witness)return EMPTY_BUFFER$5}),lazy$b.prop(A,"witness",()=>{if(v.pubkey&&v.signature)return[v.signature,v.pubkey]}),_.validate){let P=dist$4.Buffer.from([]);if(v.address){if(E&&E.bech32!==x().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==0)throw new TypeError("Invalid address version");if(x().data.length!==20)throw new TypeError("Invalid address data");P=x().data}if(v.hash){if(P.length>0&&!P.equals(v.hash))throw new TypeError("Hash mismatch");P=v.hash}if(v.output){if(v.output.length!==22||v.output[0]!==OPS$b.OP_0||v.output[1]!==20)throw new TypeError("Output is invalid");if(P.length>0&&!P.equals(v.output.slice(2)))throw new TypeError("Hash mismatch");P=v.output.slice(2)}if(v.pubkey){const T=bcrypto$9.hash160(v.pubkey);if(P.length>0&&!P.equals(T))throw new TypeError("Hash mismatch");if(P=T,!(0,types_1$d.isPoint)(v.pubkey)||v.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(v.witness){if(v.witness.length!==2)throw new TypeError("Witness is invalid");if(!bscript$i.isCanonicalScriptSignature(v.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,types_1$d.isPoint)(v.witness[1])||v.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(v.signature&&!v.signature.equals(v.witness[0]))throw new TypeError("Signature mismatch");if(v.pubkey&&!v.pubkey.equals(v.witness[1]))throw new TypeError("Pubkey mismatch");const T=bcrypto$9.hash160(v.witness[1]);if(P.length>0&&!P.equals(T))throw new TypeError("Hash mismatch")}}return Object.assign(A,v)}p2wpkh$3.p2wpkh=p2wpkh$2;var p2wsh$3={},__createBinding$g=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$g=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$g=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$g(_,v,x);return __setModuleDefault$g(_,v),_};Object.defineProperty(p2wsh$3,"__esModule",{value:!0}),p2wsh$3.p2wsh=void 0;const bcrypto$8=__importStar$g(crypto$4),networks_1$b=networks$3,bscript$h=__importStar$g(script$1),types_1$c=types$d,lazy$a=__importStar$g(lazy$h),crypto_lib_1$9=requireDist$1(),OPS$a=bscript$h.OPS,EMPTY_BUFFER$4=dist$4.Buffer.alloc(0);function stacksEqual$6(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function chunkHasUncompressedPubkey$1(v){return!!(dist$4.Buffer.isBuffer(v)&&v.length===65&&v[0]===4&&(0,types_1$c.isPoint)(v))}function p2wsh$2(v,_){if(!v.address&&!v.hash&&!v.output&&!v.redeem&&!v.witness)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$c.typeforce)({network:types_1$c.typeforce.maybe(types_1$c.typeforce.Object),address:types_1$c.typeforce.maybe(types_1$c.typeforce.String),hash:types_1$c.typeforce.maybe(types_1$c.typeforce.BufferN(32)),output:types_1$c.typeforce.maybe(types_1$c.typeforce.BufferN(34)),redeem:types_1$c.typeforce.maybe({input:types_1$c.typeforce.maybe(types_1$c.typeforce.Buffer),network:types_1$c.typeforce.maybe(types_1$c.typeforce.Object),output:types_1$c.typeforce.maybe(types_1$c.typeforce.Buffer),witness:types_1$c.typeforce.maybe(types_1$c.typeforce.arrayOf(types_1$c.typeforce.Buffer))}),input:types_1$c.typeforce.maybe(types_1$c.typeforce.BufferN(0)),witness:types_1$c.typeforce.maybe(types_1$c.typeforce.arrayOf(types_1$c.typeforce.Buffer))},v);const x=lazy$a.value(()=>{const T=crypto_lib_1$9.base.bech32.decode(v.address),O=T.words.shift(),k=crypto_lib_1$9.base.bech32.fromWords(T.words);return{version:O,prefix:T.prefix,data:dist$4.Buffer.from(k)}}),E=lazy$a.value(()=>bscript$h.decompile(v.redeem.input));let A=v.network;A||(A=v.redeem&&v.redeem.network||networks_1$b.bitcoin);const P={network:A};if(lazy$a.prop(P,"address",()=>{if(!P.hash)return;const T=crypto_lib_1$9.base.bech32.toWords(P.hash);return T.unshift(0),crypto_lib_1$9.base.bech32.encode(A.bech32,T)}),lazy$a.prop(P,"hash",()=>{if(v.output)return v.output.slice(2);if(v.address)return x().data;if(P.redeem&&P.redeem.output)return bcrypto$8.sha256(P.redeem.output)}),lazy$a.prop(P,"output",()=>{if(P.hash)return bscript$h.compile([OPS$a.OP_0,P.hash])}),lazy$a.prop(P,"redeem",()=>{if(v.witness)return{output:v.witness[v.witness.length-1],input:EMPTY_BUFFER$4,witness:v.witness.slice(0,-1)}}),lazy$a.prop(P,"input",()=>{if(P.witness)return EMPTY_BUFFER$4}),lazy$a.prop(P,"witness",()=>{if(v.redeem&&v.redeem.input&&v.redeem.input.length>0&&v.redeem.output&&v.redeem.output.length>0){const T=bscript$h.toStack(E());return P.redeem=Object.assign({witness:T},v.redeem),P.redeem.input=EMPTY_BUFFER$4,[].concat(T,v.redeem.output)}if(v.redeem&&v.redeem.output&&v.redeem.witness)return[].concat(v.redeem.witness,v.redeem.output)}),lazy$a.prop(P,"name",()=>{const T=["p2wsh"];return P.redeem!==void 0&&P.redeem.name!==void 0&&T.push(P.redeem.name),T.join("-")}),_.validate){let T=dist$4.Buffer.from([]);if(v.address){if(x().prefix!==A.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==0)throw new TypeError("Invalid address version");if(x().data.length!==32)throw new TypeError("Invalid address data");T=x().data}if(v.hash){if(T.length>0&&!T.equals(v.hash))throw new TypeError("Hash mismatch");T=v.hash}if(v.output){if(v.output.length!==34||v.output[0]!==OPS$a.OP_0||v.output[1]!==32)throw new TypeError("Output is invalid");const O=v.output.slice(2);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.redeem){if(v.redeem.network&&v.redeem.network!==A)throw new TypeError("Network mismatch");if(v.redeem.input&&v.redeem.input.length>0&&v.redeem.witness&&v.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(v.redeem.output){if(bscript$h.decompile(v.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");const O=bcrypto$8.sha256(v.redeem.output);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.redeem.input&&!bscript$h.isPushOnly(E()))throw new TypeError("Non push-only scriptSig");if(v.witness&&v.redeem.witness&&!stacksEqual$6(v.witness,v.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(v.redeem.input&&E().some(chunkHasUncompressedPubkey$1)||v.redeem.output&&(bscript$h.decompile(v.redeem.output)||[]).some(chunkHasUncompressedPubkey$1))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(v.witness&&v.witness.length>0){const O=v.witness[v.witness.length-1];if(v.redeem&&v.redeem.output&&!v.redeem.output.equals(O))throw new TypeError("Witness and redeem.output mismatch");if(v.witness.some(chunkHasUncompressedPubkey$1)||(bscript$h.decompile(O)||[]).some(chunkHasUncompressedPubkey$1))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(P,v)}p2wsh$3.p2wsh=p2wsh$2;var p2tr$3={},bip341$1={},bufferutils$1={},Buffer$1=safeBufferExports.Buffer,MAX_SAFE_INTEGER$3=9007199254740991;function checkUInt53$3(v){if(v<0||v>MAX_SAFE_INTEGER$3||v%1!==0)throw new RangeError("value out of range")}function encode$E(v,_,x){if(checkUInt53$3(v),_||(_=Buffer$1.allocUnsafe(encodingLength$4(v))),!Buffer$1.isBuffer(_))throw new TypeError("buffer must be a Buffer instance");return x||(x=0),v<253?(_.writeUInt8(v,x),encode$E.bytes=1):v<=65535?(_.writeUInt8(253,x),_.writeUInt16LE(v,x+1),encode$E.bytes=3):v<=4294967295?(_.writeUInt8(254,x),_.writeUInt32LE(v,x+1),encode$E.bytes=5):(_.writeUInt8(255,x),_.writeUInt32LE(v>>>0,x+1),_.writeUInt32LE(v/4294967296|0,x+5),encode$E.bytes=9),_}function decode$A(v,_){if(!Buffer$1.isBuffer(v))throw new TypeError("buffer must be a Buffer instance");_||(_=0);var x=v.readUInt8(_);if(x<253)return decode$A.bytes=1,x;if(x===253)return decode$A.bytes=3,v.readUInt16LE(_+1);if(x===254)return decode$A.bytes=5,v.readUInt32LE(_+1);decode$A.bytes=9;var E=v.readUInt32LE(_+1),A=v.readUInt32LE(_+5),P=A*4294967296+E;return checkUInt53$3(P),P}function encodingLength$4(v){return checkUInt53$3(v),v<253?1:v<=65535?3:v<=4294967295?5:9}var varuint$g={encode:encode$E,decode:decode$A,encodingLength:encodingLength$4},__createBinding$f=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$f=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$f=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$f(_,v,x);return __setModuleDefault$f(_,v),_};Object.defineProperty(bufferutils$1,"__esModule",{value:!0}),bufferutils$1.BufferReader=bufferutils$1.BufferWriter=bufferutils$1.cloneBuffer=bufferutils$1.reverseBuffer=bufferutils$1.writeUInt64LE=bufferutils$1.readUInt64LE=bufferutils$1.varuint=void 0;const types$7=__importStar$f(types$d),{typeforce:typeforce$6}=types$7,varuint$f=__importStar$f(varuint$g);bufferutils$1.varuint=varuint$f;function verifuint$3(v,_){if(typeof v!="number")throw new Error("cannot write a non-number as a number");if(v<0)throw new Error("specified a negative value for writing an unsigned value");if(v>_)throw new Error("RangeError: value out of range");if(Math.floor(v)!==v)throw new Error("value has a fractional component")}function readUInt64LE$3(v,_){const x=v.readUInt32LE(_);let E=v.readUInt32LE(_+4);return E*=4294967296,verifuint$3(E+x,9007199254740991),E+x}bufferutils$1.readUInt64LE=readUInt64LE$3;function writeUInt64LE$3(v,_,x){return verifuint$3(_,9007199254740991),v.writeInt32LE(_&-1,x),v.writeUInt32LE(Math.floor(_/4294967296),x+4),x+8}bufferutils$1.writeUInt64LE=writeUInt64LE$3;function reverseBuffer$3(v){if(v.length<1)return v;let _=v.length-1,x=0;for(let E=0;E<v.length/2;E++)x=v[E],v[E]=v[_],v[_]=x,_--;return v}bufferutils$1.reverseBuffer=reverseBuffer$3;function cloneBuffer$1(v){const _=dist$4.Buffer.allocUnsafe(v.length);return v.copy(_),_}bufferutils$1.cloneBuffer=cloneBuffer$1;let BufferWriter$1=class Vt{static withCapacity(_){return new Vt(dist$4.Buffer.alloc(_))}constructor(_,x=0){this.buffer=_,this.offset=x,typeforce$6(types$7.tuple(types$7.Buffer,types$7.UInt32),[_,x])}writeUInt8(_){this.offset=this.buffer.writeUInt8(_,this.offset)}writeInt32(_){this.offset=this.buffer.writeInt32LE(_,this.offset)}writeUInt32(_){this.offset=this.buffer.writeUInt32LE(_,this.offset)}writeUInt64(_){this.offset=writeUInt64LE$3(this.buffer,_,this.offset)}writeVarInt(_){varuint$f.encode(_,this.buffer,this.offset),this.offset+=varuint$f.encode.bytes}writeSlice(_){if(this.buffer.length<this.offset+_.length)throw new Error("Cannot write slice out of bounds");this.offset+=_.copy(this.buffer,this.offset)}writeVarSlice(_){this.writeVarInt(_.length),this.writeSlice(_)}writeVector(_){this.writeVarInt(_.length),_.forEach(x=>this.writeVarSlice(x))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};bufferutils$1.BufferWriter=BufferWriter$1;let BufferReader$1=class{constructor(_,x=0){this.buffer=_,this.offset=x,typeforce$6(types$7.tuple(types$7.Buffer,types$7.UInt32),[_,x])}readUInt8(){const _=this.buffer.readUInt8(this.offset);return this.offset++,_}readInt32(){const _=this.buffer.readInt32LE(this.offset);return this.offset+=4,_}readUInt32(){const _=this.buffer.readUInt32LE(this.offset);return this.offset+=4,_}readUInt64(){const _=readUInt64LE$3(this.buffer,this.offset);return this.offset+=8,_}readVarInt(){const _=varuint$f.decode(this.buffer,this.offset);return this.offset+=varuint$f.decode.bytes,_}readSlice(_){if(this.buffer.length<this.offset+_)throw new Error("Cannot read slice out of bounds");const x=this.buffer.slice(this.offset,this.offset+_);return this.offset+=_,x}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const _=this.readVarInt(),x=[];for(let E=0;E<_;E++)x.push(this.readVarSlice());return x}};bufferutils$1.BufferReader=BufferReader$1;var taproot$1={};Object.defineProperty(taproot$1,"__esModule",{value:!0}),taproot$1.taprootTweakPubkey=taproot$1.taprootTweakPrivKey=void 0;const crypto_lib_1$8=requireDist$1(),secp256k1=crypto_lib_1$8.signUtil.schnorr.secp256k1,schnorr$2=secp256k1.schnorr,ProjPoint=secp256k1.secp256k1.ProjectivePoint,CURVE_ORDER=secp256k1.secp256k1.CURVE.n;function tapTweak(v,_){const x=schnorr$2.utils,E=x.taggedHash("TapTweak",v,_),A=x.bytesToNumberBE(E);if(A>=CURVE_ORDER)throw new Error("tweak higher than curve order");return A}function taprootTweakPrivKey(v,_=new Uint8Array){const x=schnorr$2.utils,E=x.bytesToNumberBE(v),A=ProjPoint.fromPrivateKey(E),P=A.hasEvenY()?E:x.mod(-E,CURVE_ORDER),T=x.pointToBytes(A),O=tapTweak(T,_);return x.numberToBytesBE(x.mod(P+O,CURVE_ORDER),32)}taproot$1.taprootTweakPrivKey=taprootTweakPrivKey;function taprootTweakPubkey(v,_){_||(_=new Uint8Array);const x=schnorr$2.utils,E=tapTweak(v,_),P=x.lift_x(x.bytesToNumberBE(v)).add(ProjPoint.fromPrivateKey(E)),T=P.hasEvenY()?0:1;return[x.pointToBytes(P),T]}taproot$1.taprootTweakPubkey=taprootTweakPubkey,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ee,fe,le,pe){pe===void 0&&(pe=le);var ie=Object.getOwnPropertyDescriptor(fe,le);(!ie||("get"in ie?!fe.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return fe[le]}}),Object.defineProperty(ee,pe,ie)}:function(ee,fe,le,pe){pe===void 0&&(pe=le),ee[pe]=fe[le]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ee,fe){Object.defineProperty(ee,"default",{enumerable:!0,value:fe})}:function(ee,fe){ee.default=fe}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(ee){if(ee&&ee.__esModule)return ee;var fe={};if(ee!=null)for(var le in ee)le!=="default"&&Object.prototype.hasOwnProperty.call(ee,le)&&_(fe,ee,le);return x(fe,ee),fe};Object.defineProperty(v,"__esModule",{value:!0}),v.tweakKey=v.tapTweakHash=v.tapleafHash=v.findScriptPath=v.toHashTree=v.rootHashFromPath=v.MAX_TAPTREE_DEPTH=v.LEAF_VERSION_TAPSCRIPT=void 0;const A=bufferPolyfill,P=E(crypto$4),T=bufferutils$1,O=types$d,k=taproot$1;v.LEAF_VERSION_TAPSCRIPT=192,v.MAX_TAPTREE_DEPTH=128;const C=ee=>"left"in ee&&"right"in ee;function U(ee,fe){if(ee.length<33)throw new TypeError(`The control-block length is too small. Got ${ee.length}, expected min 33.`);const le=(ee.length-33)/32;let pe=fe;for(let ie=0;ie<le;ie++){const he=ee.slice(33+32*ie,65+32*ie);pe.compare(he)<0?pe=X(pe,he):pe=X(he,pe)}return pe}v.rootHashFromPath=U;function N(ee){if((0,O.isTapleaf)(ee))return{hash:D(ee)};const fe=[N(ee[0]),N(ee[1])];fe.sort((ie,he)=>ie.hash.compare(he.hash));const[le,pe]=fe;return{hash:X(le.hash,pe.hash),left:le,right:pe}}v.toHashTree=N;function H(ee,fe){if(C(ee)){const le=H(ee.left,fe);if(le!==void 0)return[...le,ee.right.hash];const pe=H(ee.right,fe);if(pe!==void 0)return[...pe,ee.left.hash]}else if(ee.hash.equals(fe))return[]}v.findScriptPath=H;function D(ee){const fe=ee.version||v.LEAF_VERSION_TAPSCRIPT;return P.taggedHash("TapLeaf",A.Buffer.concat([A.Buffer.from([fe]),re(ee.output)]))}v.tapleafHash=D;function j(ee,fe){return P.taggedHash("TapTweak",A.Buffer.concat(fe?[ee,fe]:[ee]))}v.tapTweakHash=j;function V(ee,fe){if(!A.Buffer.isBuffer(ee)||ee.length!==32||fe&&fe.length!==32)return null;const le=(0,k.taprootTweakPubkey)(ee,fe);return{parity:le[1],x:A.Buffer.from(le[0])}}v.tweakKey=V;function X(ee,fe){return P.taggedHash("TapBranch",A.Buffer.concat([ee,fe]))}function re(ee){const fe=T.varuint.encodingLength(ee.length),le=A.Buffer.allocUnsafe(fe);return T.varuint.encode(ee.length,le),A.Buffer.concat([le,ee])}}(bip341$1);var __createBinding$e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$e=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$e=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$e(_,v,x);return __setModuleDefault$e(_,v),_};Object.defineProperty(p2tr$3,"__esModule",{value:!0}),p2tr$3.p2tr=void 0;const buffer_1$1=bufferPolyfill,networks_1$a=networks$3,bscript$g=__importStar$e(script$1),types_1$b=types$d,bip341_1$5=bip341$1,lazy$9=__importStar$e(lazy$h),crypto_lib_1$7=requireDist$1(),OPS$9=bscript$g.OPS,TAPROOT_WITNESS_VERSION$1=1,ANNEX_PREFIX$1=80;function p2tr$2(v,_){if(!v.address&&!v.output&&!v.pubkey&&!v.internalPubkey&&!(v.witness&&v.witness.length>1))throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$b.typeforce)({address:types_1$b.typeforce.maybe(types_1$b.typeforce.String),input:types_1$b.typeforce.maybe(types_1$b.typeforce.BufferN(0)),network:types_1$b.typeforce.maybe(types_1$b.typeforce.Object),output:types_1$b.typeforce.maybe(types_1$b.typeforce.BufferN(34)),internalPubkey:types_1$b.typeforce.maybe(types_1$b.typeforce.BufferN(32)),hash:types_1$b.typeforce.maybe(types_1$b.typeforce.BufferN(32)),pubkey:types_1$b.typeforce.maybe(types_1$b.typeforce.BufferN(32)),witness:types_1$b.typeforce.maybe(types_1$b.typeforce.arrayOf(types_1$b.typeforce.Buffer)),scriptTree:types_1$b.typeforce.maybe(types_1$b.isTaptree),redeem:types_1$b.typeforce.maybe({output:types_1$b.typeforce.maybe(types_1$b.typeforce.Buffer),redeemVersion:types_1$b.typeforce.maybe(types_1$b.typeforce.Number),witness:types_1$b.typeforce.maybe(types_1$b.typeforce.arrayOf(types_1$b.typeforce.Buffer))}),redeemVersion:types_1$b.typeforce.maybe(types_1$b.typeforce.Number)},v);const x=lazy$9.value(()=>{const O=crypto_lib_1$7.base.bech32m.decode(v.address),k=O.words.shift(),C=crypto_lib_1$7.base.bech32m.fromWords(O.words);return{version:k,prefix:O.prefix,data:buffer_1$1.Buffer.from(C)}}),E=lazy$9.value(()=>{if(!(!v.witness||!v.witness.length))return v.witness.length>=2&&v.witness[v.witness.length-1][0]===ANNEX_PREFIX$1?v.witness.slice(0,-1):v.witness.slice()}),A=lazy$9.value(()=>{if(v.scriptTree)return(0,bip341_1$5.toHashTree)(v.scriptTree);if(v.hash)return{hash:v.hash}}),P=v.network||networks_1$a.bitcoin,T={name:"p2tr",network:P};if(lazy$9.prop(T,"address",()=>{if(!T.pubkey)return;const O=crypto_lib_1$7.base.bech32m.toWords(T.pubkey);return O.unshift(TAPROOT_WITNESS_VERSION$1),crypto_lib_1$7.base.bech32m.encode(P.bech32,O)}),lazy$9.prop(T,"hash",()=>{const O=A();if(O)return O.hash;const k=E();if(k&&k.length>1){const C=k[k.length-1],U=C[0]&types_1$b.TAPLEAF_VERSION_MASK,N=k[k.length-2],H=(0,bip341_1$5.tapleafHash)({output:N,version:U});return(0,bip341_1$5.rootHashFromPath)(C,H)}return null}),lazy$9.prop(T,"output",()=>{if(T.pubkey)return bscript$g.compile([OPS$9.OP_1,T.pubkey])}),lazy$9.prop(T,"redeemVersion",()=>v.redeemVersion?v.redeemVersion:v.redeem&&v.redeem.redeemVersion!==void 0&&v.redeem.redeemVersion!==null?v.redeem.redeemVersion:bip341_1$5.LEAF_VERSION_TAPSCRIPT),lazy$9.prop(T,"redeem",()=>{const O=E();if(!(!O||O.length<2))return{output:O[O.length-2],witness:O.slice(0,-2),redeemVersion:O[O.length-1][0]&types_1$b.TAPLEAF_VERSION_MASK}}),lazy$9.prop(T,"pubkey",()=>{if(v.pubkey)return v.pubkey;if(v.output)return v.output.slice(2);if(v.address)return x().data;if(T.internalPubkey){const O=(0,bip341_1$5.tweakKey)(T.internalPubkey,T.hash);if(O)return O.x}}),lazy$9.prop(T,"internalPubkey",()=>{if(v.internalPubkey)return v.internalPubkey;const O=E();if(O&&O.length>1)return O[O.length-1].slice(1,33)}),lazy$9.prop(T,"signature",()=>{if(v.signature)return v.signature;const O=E();if(!(!O||O.length!==1))return O[0]}),lazy$9.prop(T,"witness",()=>{if(v.witness)return v.witness;const O=A();if(O&&v.redeem&&v.redeem.output&&v.internalPubkey){const k=(0,bip341_1$5.tapleafHash)({output:v.redeem.output,version:T.redeemVersion}),C=(0,bip341_1$5.findScriptPath)(O,k);if(!C)return;const U=(0,bip341_1$5.tweakKey)(v.internalPubkey,O.hash);if(!U)return;const N=buffer_1$1.Buffer.concat([buffer_1$1.Buffer.from([T.redeemVersion|U.parity]),v.internalPubkey].concat(C));return[v.redeem.output,N]}if(v.signature)return[v.signature]}),_.validate){let O=buffer_1$1.Buffer.from([]);if(v.address){if(P&&P.bech32!==x().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==TAPROOT_WITNESS_VERSION$1)throw new TypeError("Invalid address version");if(x().data.length!==32)throw new TypeError("Invalid address data");O=x().data}if(v.pubkey){if(O.length>0&&!O.equals(v.pubkey))throw new TypeError("Pubkey mismatch");O=v.pubkey}if(v.output){if(v.output.length!==34||v.output[0]!==OPS$9.OP_1||v.output[1]!==32)throw new TypeError("Output is invalid");if(O.length>0&&!O.equals(v.output.slice(2)))throw new TypeError("Pubkey mismatch");O=v.output.slice(2)}if(v.internalPubkey){const U=(0,bip341_1$5.tweakKey)(v.internalPubkey,T.hash);if(O.length>0&&!O.equals(U.x))throw new TypeError("Pubkey mismatch");O=U.x}if(O&&O.length&&O.length!==32)throw new TypeError("Invalid pubkey for p2tr");const k=A();if(v.hash&&k&&!v.hash.equals(k.hash))throw new TypeError("Hash mismatch");if(v.redeem&&v.redeem.output&&k){const U=(0,bip341_1$5.tapleafHash)({output:v.redeem.output,version:T.redeemVersion});if(!(0,bip341_1$5.findScriptPath)(k,U))throw new TypeError("Redeem script not in tree")}const C=E();if(v.redeem&&T.redeem){if(v.redeem.redeemVersion&&v.redeem.redeemVersion!==T.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(v.redeem.output){if(bscript$g.decompile(v.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(T.redeem.output&&!v.redeem.output.equals(T.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(v.redeem.witness&&T.redeem.witness&&!stacksEqual$5(v.redeem.witness,T.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(C&&C.length)if(C.length===1){if(v.signature&&!v.signature.equals(C[0]))throw new TypeError("Signature mismatch")}else{const U=C[C.length-1];if(U.length<33)throw new TypeError(`The control-block length is too small. Got ${U.length}, expected min 33.`);if((U.length-33)%32!==0)throw new TypeError(`The control-block length of ${U.length} is incorrect!`);const N=(U.length-33)/32;if(N>128)throw new TypeError(`The script path is too long. Got ${N}, expected max 128.`);const H=U.slice(1,33);if(v.internalPubkey&&!v.internalPubkey.equals(H))throw new TypeError("Internal pubkey mismatch");if(H.length!==32)throw new TypeError("Invalid internalPubkey for p2tr witness");const D=U[0]&types_1$b.TAPLEAF_VERSION_MASK,j=C[C.length-2],V=(0,bip341_1$5.tapleafHash)({output:j,version:D}),X=(0,bip341_1$5.rootHashFromPath)(U,V),re=(0,bip341_1$5.tweakKey)(H,X);if(!re)throw new TypeError("Invalid outputKey for p2tr witness");if(O.length&&!O.equals(re.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(re.parity!==(U[0]&1))throw new Error("Incorrect parity")}}return Object.assign(T,v)}p2tr$3.p2tr=p2tr$2;function stacksEqual$5(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.p2tr=v.p2wsh=v.p2wpkh=v.p2sh=v.p2pkh=v.p2pk=v.p2ms=v.embed=void 0;const _=embed$1;Object.defineProperty(v,"embed",{enumerable:!0,get:function(){return _.p2data}});const x=p2ms$3;Object.defineProperty(v,"p2ms",{enumerable:!0,get:function(){return x.p2ms}});const E=p2pk$3;Object.defineProperty(v,"p2pk",{enumerable:!0,get:function(){return E.p2pk}});const A=p2pkh$3;Object.defineProperty(v,"p2pkh",{enumerable:!0,get:function(){return A.p2pkh}});const P=p2sh$3;Object.defineProperty(v,"p2sh",{enumerable:!0,get:function(){return P.p2sh}});const T=p2wpkh$3;Object.defineProperty(v,"p2wpkh",{enumerable:!0,get:function(){return T.p2wpkh}});const O=p2wsh$3;Object.defineProperty(v,"p2wsh",{enumerable:!0,get:function(){return O.p2wsh}});const k=p2tr$3;Object.defineProperty(v,"p2tr",{enumerable:!0,get:function(){return k.p2tr}})})(payments$8);var __createBinding$d=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$d=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$d(_,v,x);return __setModuleDefault$d(_,v),_};Object.defineProperty(address$1,"__esModule",{value:!0}),address$1.toOutputScript=address$1.fromOutputScript=address$1.toBech32=address$1.toBase58Check=address$1.fromBech32=address$1.fromBase58Check=void 0;const networks$2=__importStar$d(networks$3),payments$7=__importStar$d(payments$8),bscript$f=__importStar$d(script$1),types$6=__importStar$d(types$d),crypto_lib_1$6=requireDist$1(),{typeforce:typeforce$5}=types$6,FUTURE_SEGWIT_MAX_SIZE$1=40,FUTURE_SEGWIT_MIN_SIZE$1=2,FUTURE_SEGWIT_MAX_VERSION$1=16,FUTURE_SEGWIT_MIN_VERSION$1=2,FUTURE_SEGWIT_VERSION_DIFF$1=80,FUTURE_SEGWIT_VERSION_WARNING$1="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function _toFutureSegwitAddress$1(v,_){const x=v.slice(2);if(x.length<FUTURE_SEGWIT_MIN_SIZE$1||x.length>FUTURE_SEGWIT_MAX_SIZE$1)throw new TypeError("Invalid program length for segwit address");const E=v[0]-FUTURE_SEGWIT_VERSION_DIFF$1;if(E<FUTURE_SEGWIT_MIN_VERSION$1||E>FUTURE_SEGWIT_MAX_VERSION$1)throw new TypeError("Invalid version for segwit address");if(v[1]!==x.length)throw new TypeError("Invalid script for segwit address");return console.warn(FUTURE_SEGWIT_VERSION_WARNING$1),toBech32$1(x,E,_.bech32)}function fromBase58Check$1(v){const _=crypto_lib_1$6.base.fromBase58Check(v);if(_.length<21)throw new TypeError(v+" is too short");if(_.length>21)throw new TypeError(v+" is too long");const x=_.readUInt8(0),E=_.slice(1);return{version:x,hash:E}}address$1.fromBase58Check=fromBase58Check$1;function fromBech32$1(v){let _,x;try{_=crypto_lib_1$6.base.bech32.decode(v)}catch{}if(_){if(x=_.words[0],x!==0)throw new TypeError(v+" uses wrong encoding")}else if(_=crypto_lib_1$6.base.bech32m.decode(v),x=_.words[0],x===0)throw new TypeError(v+" uses wrong encoding");const E=crypto_lib_1$6.base.bech32.fromWords(_.words.slice(1));return{version:x,prefix:_.prefix,data:dist$4.Buffer.from(E)}}address$1.fromBech32=fromBech32$1;function toBase58Check$1(v,_){typeforce$5(types$6.tuple(types$6.Hash160bit,types$6.UInt8),arguments);const x=dist$4.Buffer.allocUnsafe(21);return x.writeUInt8(_,0),v.copy(x,1),crypto_lib_1$6.base.toBase58Check(x)}address$1.toBase58Check=toBase58Check$1;function toBech32$1(v,_,x){const E=crypto_lib_1$6.base.bech32.toWords(v);return E.unshift(_),_===0?crypto_lib_1$6.base.bech32.encode(x,E):crypto_lib_1$6.base.bech32m.encode(x,E)}address$1.toBech32=toBech32$1;function fromOutputScript$1(v,_){_=_||networks$2.bitcoin;try{return payments$7.p2pkh({output:v,network:_}).address}catch{}try{return payments$7.p2sh({output:v,network:_}).address}catch{}try{return payments$7.p2wpkh({output:v,network:_}).address}catch{}try{return payments$7.p2wsh({output:v,network:_}).address}catch{}try{return payments$7.p2tr({output:v,network:_}).address}catch{}try{return _toFutureSegwitAddress$1(v,_)}catch{}throw new Error(bscript$f.toASM(v)+" has no matching Address")}address$1.fromOutputScript=fromOutputScript$1;function toOutputScript$1(v,_){_=_||networks$2.bitcoin;let x,E;try{x=fromBase58Check$1(v)}catch{}if(x){if(x.version===_.pubKeyHash)return payments$7.p2pkh({hash:x.hash}).output;if(x.version===_.scriptHash)return payments$7.p2sh({hash:x.hash}).output}else{try{E=fromBech32$1(v)}catch{}if(E){if(E.prefix!==_.bech32)throw new Error(v+" has an invalid prefix");if(E.version===0){if(E.data.length===20)return payments$7.p2wpkh({hash:E.data}).output;if(E.data.length===32)return payments$7.p2wsh({hash:E.data}).output}else if(E.version===1){if(E.data.length===32)return payments$7.p2tr({pubkey:E.data}).output}else if(E.version>=FUTURE_SEGWIT_MIN_VERSION$1&&E.version<=FUTURE_SEGWIT_MAX_VERSION$1&&E.data.length>=FUTURE_SEGWIT_MIN_SIZE$1&&E.data.length<=FUTURE_SEGWIT_MAX_SIZE$1)return console.warn(FUTURE_SEGWIT_VERSION_WARNING$1),bscript$f.compile([E.version+FUTURE_SEGWIT_VERSION_DIFF$1,E.data])}}throw new Error(v+" has no matching Script")}address$1.toOutputScript=toOutputScript$1;var bip0322={},transaction$1={},__createBinding$c=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$c=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$c(_,v,x);return __setModuleDefault$c(_,v),_};Object.defineProperty(transaction$1,"__esModule",{value:!0}),transaction$1.Transaction=transaction$1.vectorSize=transaction$1.varSliceSize=void 0;const bufferutils_1$4=bufferutils$1,bcrypto$7=__importStar$c(crypto$4),bscript$e=__importStar$c(script$1),script_1$2=script$1,types$5=__importStar$c(types$d),{typeforce:typeforce$4}=types$5;function varSliceSize$1(v){const _=v.length;return bufferutils_1$4.varuint.encodingLength(_)+_}transaction$1.varSliceSize=varSliceSize$1;function vectorSize$1(v){const _=v.length;return bufferutils_1$4.varuint.encodingLength(_)+v.reduce((x,E)=>x+varSliceSize$1(E),0)}transaction$1.vectorSize=vectorSize$1;const EMPTY_BUFFER$3=dist$4.Buffer.allocUnsafe(0),EMPTY_WITNESS$1=[],ZERO$2=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ONE$1=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),VALUE_UINT64_MAX$1=dist$4.Buffer.from("ffffffffffffffff","hex"),BLANK_OUTPUT$1={script:EMPTY_BUFFER$3,valueBuffer:VALUE_UINT64_MAX$1};function isOutput$1(v){return v.value!==void 0}let Transaction$1=class $t{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(_,x){const E=new bufferutils_1$4.BufferReader(_),A=new $t;A.version=E.readInt32();const P=E.readUInt8(),T=E.readUInt8();let O=!1;P===$t.ADVANCED_TRANSACTION_MARKER&&T===$t.ADVANCED_TRANSACTION_FLAG?O=!0:E.offset-=2;const k=E.readVarInt();for(let U=0;U<k;++U)A.ins.push({hash:E.readSlice(32),index:E.readUInt32(),script:E.readVarSlice(),sequence:E.readUInt32(),witness:EMPTY_WITNESS$1});const C=E.readVarInt();for(let U=0;U<C;++U)A.outs.push({value:E.readUInt64(),script:E.readVarSlice()});if(O){for(let U=0;U<k;++U)A.ins[U].witness=E.readVector();if(!A.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(A.locktime=E.readUInt32(),x)return A;if(E.offset!==_.length)throw new Error("Transaction has unexpected data");return A}static fromHex(_){return $t.fromBuffer(dist$4.Buffer.from(_,"hex"),!1)}static isCoinbaseHash(_){typeforce$4(types$5.Hash256bit,_);for(let x=0;x<32;++x)if(_[x]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&$t.isCoinbaseHash(this.ins[0].hash)}addInput(_,x,E,A){return typeforce$4(types$5.tuple(types$5.Hash256bit,types$5.UInt32,types$5.maybe(types$5.UInt32),types$5.maybe(types$5.Buffer)),arguments),types$5.Null(E)&&(E=$t.DEFAULT_SEQUENCE),this.ins.push({hash:_,index:x,script:A||EMPTY_BUFFER$3,sequence:E,witness:EMPTY_WITNESS$1})-1}addOutput(_,x){return typeforce$4(types$5.tuple(types$5.Buffer,types$5.Satoshi),arguments),this.outs.push({script:_,value:x})-1}hasWitnesses(){return this.ins.some(_=>_.witness.length!==0)}weight(){const _=this.byteLength(!1),x=this.byteLength(!0);return _*3+x}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(_=!0){const x=_&&this.hasWitnesses();return(x?10:8)+bufferutils_1$4.varuint.encodingLength(this.ins.length)+bufferutils_1$4.varuint.encodingLength(this.outs.length)+this.ins.reduce((E,A)=>E+40+varSliceSize$1(A.script),0)+this.outs.reduce((E,A)=>E+8+varSliceSize$1(A.script),0)+(x?this.ins.reduce((E,A)=>E+vectorSize$1(A.witness),0):0)}clone(){const _=new $t;return _.version=this.version,_.locktime=this.locktime,_.ins=this.ins.map(x=>({hash:x.hash,index:x.index,script:x.script,sequence:x.sequence,witness:x.witness})),_.outs=this.outs.map(x=>({script:x.script,value:x.value})),_}hashForSignature(_,x,E){if(typeforce$4(types$5.tuple(types$5.UInt32,types$5.Buffer,types$5.Number),arguments),_>=this.ins.length)return ONE$1;const A=bscript$e.compile(bscript$e.decompile(x).filter(O=>O!==script_1$2.OPS.OP_CODESEPARATOR)),P=this.clone();if((E&31)===$t.SIGHASH_NONE)P.outs=[],P.ins.forEach((O,k)=>{k!==_&&(O.sequence=0)});else if((E&31)===$t.SIGHASH_SINGLE){if(_>=this.outs.length)return ONE$1;P.outs.length=_+1;for(let O=0;O<_;O++)P.outs[O]=BLANK_OUTPUT$1;P.ins.forEach((O,k)=>{k!==_&&(O.sequence=0)})}E&$t.SIGHASH_ANYONECANPAY?(P.ins=[P.ins[_]],P.ins[0].script=A):(P.ins.forEach(O=>{O.script=EMPTY_BUFFER$3}),P.ins[_].script=A);const T=dist$4.Buffer.allocUnsafe(P.byteLength(!1)+4);return T.writeInt32LE(E,T.length-4),P.__toBuffer(T,0,!1),bcrypto$7.hash256(T)}hashForCashSignature(_,x,E,A){if(A&$t.SIGHASH_BITCOINCASHBIP143){if(types$5.Null(E))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(_,x,E,A)}else return this.hashForSignature(_,x,A)}hashForWitnessV1(_,x,E,A,P,T){if(typeforce$4(types$5.tuple(types$5.UInt32,typeforce$4.arrayOf(types$5.Buffer),typeforce$4.arrayOf(types$5.Satoshi),types$5.UInt32),arguments),E.length!==this.ins.length||x.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const O=A===$t.SIGHASH_DEFAULT?$t.SIGHASH_ALL:A&$t.SIGHASH_OUTPUT_MASK,C=(A&$t.SIGHASH_INPUT_MASK)===$t.SIGHASH_ANYONECANPAY,U=O===$t.SIGHASH_NONE,N=O===$t.SIGHASH_SINGLE;let H=EMPTY_BUFFER$3,D=EMPTY_BUFFER$3,j=EMPTY_BUFFER$3,V=EMPTY_BUFFER$3,X=EMPTY_BUFFER$3;if(!C){let le=bufferutils_1$4.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(pe=>{le.writeSlice(pe.hash),le.writeUInt32(pe.index)}),H=bcrypto$7.sha256(le.end()),le=bufferutils_1$4.BufferWriter.withCapacity(8*this.ins.length),E.forEach(pe=>le.writeUInt64(pe)),D=bcrypto$7.sha256(le.end()),le=bufferutils_1$4.BufferWriter.withCapacity(x.map(varSliceSize$1).reduce((pe,ie)=>pe+ie)),x.forEach(pe=>le.writeVarSlice(pe)),j=bcrypto$7.sha256(le.end()),le=bufferutils_1$4.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(pe=>le.writeUInt32(pe.sequence)),V=bcrypto$7.sha256(le.end())}if(U||N){if(N&&_<this.outs.length){const le=this.outs[_],pe=bufferutils_1$4.BufferWriter.withCapacity(8+varSliceSize$1(le.script));pe.writeUInt64(le.value),pe.writeVarSlice(le.script),X=bcrypto$7.sha256(pe.end())}}else{const le=this.outs.map(ie=>8+varSliceSize$1(ie.script)).reduce((ie,he)=>ie+he),pe=bufferutils_1$4.BufferWriter.withCapacity(le);this.outs.forEach(ie=>{pe.writeUInt64(ie.value),pe.writeVarSlice(ie.script)}),X=bcrypto$7.sha256(pe.end())}const re=(P?2:0)+(T?1:0),ee=174-(C?49:0)-(U?32:0)+(T?32:0)+(P?37:0),fe=bufferutils_1$4.BufferWriter.withCapacity(ee);if(fe.writeUInt8(A),fe.writeInt32(this.version),fe.writeUInt32(this.locktime),fe.writeSlice(H),fe.writeSlice(D),fe.writeSlice(j),fe.writeSlice(V),U||N||fe.writeSlice(X),fe.writeUInt8(re),C){const le=this.ins[_];fe.writeSlice(le.hash),fe.writeUInt32(le.index),fe.writeUInt64(E[_]),fe.writeVarSlice(x[_]),fe.writeUInt32(le.sequence)}else fe.writeUInt32(_);if(T){const le=bufferutils_1$4.BufferWriter.withCapacity(varSliceSize$1(T));le.writeVarSlice(T),fe.writeSlice(bcrypto$7.sha256(le.end()))}return N&&fe.writeSlice(X),P&&(fe.writeSlice(P),fe.writeUInt8(0),fe.writeUInt32(4294967295)),bcrypto$7.taggedHash("TapSighash",dist$4.Buffer.concat([dist$4.Buffer.of(0),fe.end()]))}hashForWitnessV0(_,x,E,A){typeforce$4(types$5.tuple(types$5.UInt32,types$5.Buffer,types$5.Satoshi,types$5.UInt32),arguments);let P=dist$4.Buffer.from([]),T,O=ZERO$2,k=ZERO$2,C=ZERO$2;if(A&$t.SIGHASH_ANYONECANPAY||(P=dist$4.Buffer.allocUnsafe(36*this.ins.length),T=new bufferutils_1$4.BufferWriter(P,0),this.ins.forEach(N=>{T.writeSlice(N.hash),T.writeUInt32(N.index)}),k=bcrypto$7.hash256(P)),!(A&$t.SIGHASH_ANYONECANPAY)&&(A&31)!==$t.SIGHASH_SINGLE&&(A&31)!==$t.SIGHASH_NONE&&(P=dist$4.Buffer.allocUnsafe(4*this.ins.length),T=new bufferutils_1$4.BufferWriter(P,0),this.ins.forEach(N=>{T.writeUInt32(N.sequence)}),C=bcrypto$7.hash256(P)),(A&31)!==$t.SIGHASH_SINGLE&&(A&31)!==$t.SIGHASH_NONE){const N=this.outs.reduce((H,D)=>H+8+varSliceSize$1(D.script),0);P=dist$4.Buffer.allocUnsafe(N),T=new bufferutils_1$4.BufferWriter(P,0),this.outs.forEach(H=>{T.writeUInt64(H.value),T.writeVarSlice(H.script)}),O=bcrypto$7.hash256(P)}else if((A&31)===$t.SIGHASH_SINGLE&&_<this.outs.length){const N=this.outs[_];P=dist$4.Buffer.allocUnsafe(8+varSliceSize$1(N.script)),T=new bufferutils_1$4.BufferWriter(P,0),T.writeUInt64(N.value),T.writeVarSlice(N.script),O=bcrypto$7.hash256(P)}P=dist$4.Buffer.allocUnsafe(156+varSliceSize$1(x)),T=new bufferutils_1$4.BufferWriter(P,0);const U=this.ins[_];return T.writeInt32(this.version),T.writeSlice(k),T.writeSlice(C),T.writeSlice(U.hash),T.writeUInt32(U.index),T.writeVarSlice(x),T.writeUInt64(E),T.writeUInt32(U.sequence),T.writeSlice(O),T.writeUInt32(this.locktime),T.writeUInt32(A),bcrypto$7.hash256(P)}getHash(_){return _&&this.isCoinbase()?dist$4.Buffer.alloc(32,0):bcrypto$7.hash256(this.__toBuffer(void 0,void 0,_))}getId(){return(0,bufferutils_1$4.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(_,x){return this.__toBuffer(_,x,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(_,x){typeforce$4(types$5.tuple(types$5.Number,types$5.Buffer),arguments),this.ins[_].script=x}setWitness(_,x){typeforce$4(types$5.tuple(types$5.Number,[types$5.Buffer]),arguments),this.ins[_].witness=x}__toBuffer(_,x,E=!1){_||(_=dist$4.Buffer.allocUnsafe(this.byteLength(E)));const A=new bufferutils_1$4.BufferWriter(_,x||0);A.writeInt32(this.version);const P=E&&this.hasWitnesses();return P&&(A.writeUInt8($t.ADVANCED_TRANSACTION_MARKER),A.writeUInt8($t.ADVANCED_TRANSACTION_FLAG)),A.writeVarInt(this.ins.length),this.ins.forEach(T=>{A.writeSlice(T.hash),A.writeUInt32(T.index),A.writeVarSlice(T.script),A.writeUInt32(T.sequence)}),A.writeVarInt(this.outs.length),this.outs.forEach(T=>{isOutput$1(T)?A.writeUInt64(T.value):A.writeSlice(T.valueBuffer),A.writeVarSlice(T.script)}),P&&this.ins.forEach(T=>{A.writeVector(T.witness)}),A.writeUInt32(this.locktime),x!==void 0?_.slice(x,A.offset):_}hashForWitness(_,x,E,A){typeforce$4(types$5.tuple(types$5.UInt32,types$5.Buffer,types$5.Satoshi,types$5.UInt32),arguments);let P=dist$4.Buffer.from([]),T,O=ZERO$2,k=ZERO$2,C=ZERO$2;if(A&$t.SIGHASH_ANYONECANPAY||(P=dist$4.Buffer.allocUnsafe(36*this.ins.length),T=new bufferutils_1$4.BufferWriter(P,0),this.ins.forEach(N=>{T.writeSlice(N.hash),T.writeUInt32(N.index)}),k=bcrypto$7.hash256(P)),!(A&$t.SIGHASH_ANYONECANPAY)&&(A&31)!==$t.SIGHASH_SINGLE&&(A&31)!==$t.SIGHASH_NONE&&(P=dist$4.Buffer.allocUnsafe(4*this.ins.length),T=new bufferutils_1$4.BufferWriter(P,0),this.ins.forEach(N=>{T.writeUInt32(N.sequence)}),C=bcrypto$7.hash256(P)),(A&31)!==$t.SIGHASH_SINGLE&&(A&31)!==$t.SIGHASH_NONE){const N=this.outs.reduce((H,D)=>H+8+varSliceSize$1(D.script),0);P=dist$4.Buffer.allocUnsafe(N),T=new bufferutils_1$4.BufferWriter(P,0),this.outs.forEach(H=>{T.writeUInt64(H.value),T.writeVarSlice(H.script)}),O=bcrypto$7.hash256(P)}else if((A&31)===$t.SIGHASH_SINGLE&&_<this.outs.length){const N=this.outs[_];P=dist$4.Buffer.allocUnsafe(8+varSliceSize$1(N.script)),T=new bufferutils_1$4.BufferWriter(P,0),T.writeUInt64(N.value),T.writeVarSlice(N.script),O=bcrypto$7.hash256(P)}P=dist$4.Buffer.allocUnsafe(156+x.length),T=new bufferutils_1$4.BufferWriter(P,0);const U=this.ins[_];return T.writeInt32(this.version),T.writeSlice(k),T.writeSlice(C),T.writeSlice(U.hash),T.writeUInt32(U.index),T.writeSlice(x),T.writeUInt64(E),T.writeUInt32(U.sequence),T.writeSlice(O),T.writeUInt32(this.locktime),T.writeUInt32(A),bcrypto$7.hash256(P)}};transaction$1.Transaction=Transaction$1,Transaction$1.DEFAULT_SEQUENCE=4294967295,Transaction$1.SIGHASH_DEFAULT=0,Transaction$1.SIGHASH_ALL=1,Transaction$1.SIGHASH_NONE=2,Transaction$1.SIGHASH_SINGLE=3,Transaction$1.SIGHASH_ANYONECANPAY=128,Transaction$1.SIGHASH_OUTPUT_MASK=3,Transaction$1.SIGHASH_INPUT_MASK=128,Transaction$1.SIGHASH_BITCOINCASHBIP143=64,Transaction$1.ADVANCED_TRANSACTION_MARKER=0,Transaction$1.ADVANCED_TRANSACTION_FLAG=1;var psbt$3={},psbt$2={},combiner$1={},parser$1={},fromBuffer$1={},converter$1={},typeFields$1={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.OUTPUT_TYPE_NAMES=v.OutputTypes=v.INPUT_TYPE_NAMES=v.InputTypes=v.GLOBAL_TYPE_NAMES=v.GlobalTypes=void 0,function(_){_[_.UNSIGNED_TX=0]="UNSIGNED_TX",_[_.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(v.GlobalTypes||(v.GlobalTypes={})),v.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(_){_[_.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",_[_.WITNESS_UTXO=1]="WITNESS_UTXO",_[_.PARTIAL_SIG=2]="PARTIAL_SIG",_[_.SIGHASH_TYPE=3]="SIGHASH_TYPE",_[_.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",_[_.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",_[_.BIP32_DERIVATION=6]="BIP32_DERIVATION",_[_.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",_[_.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",_[_.POR_COMMITMENT=9]="POR_COMMITMENT",_[_.TAP_KEY_SIG=19]="TAP_KEY_SIG",_[_.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",_[_.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",_[_.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",_[_.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",_[_.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(v.InputTypes||(v.InputTypes={})),v.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(_){_[_.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",_[_.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",_[_.BIP32_DERIVATION=2]="BIP32_DERIVATION",_[_.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",_[_.TAP_TREE=6]="TAP_TREE",_[_.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(v.OutputTypes||(v.OutputTypes={})),v.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]})(typeFields$1);var globalXpub$3={};Object.defineProperty(globalXpub$3,"__esModule",{value:!0}),globalXpub$3.canAddToArray=globalXpub$3.check=globalXpub$3.expected=globalXpub$3.encode=globalXpub$3.decode=void 0;const typeFields_1$x=typeFields$1,range$6=v=>[...Array(v).keys()];function decode$z(v){if(v.key[0]!==typeFields_1$x.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+v.key.toString("hex"));if(v.key.length!==79||![2,3].includes(v.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+v.key.toString("hex"));if(v.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const _=v.key.slice(1),x={masterFingerprint:v.value.slice(0,4),extendedPubkey:_,path:"m"};for(const E of range$6(v.value.length/4-1)){const A=v.value.readUInt32LE(E*4+4),P=!!(A&2147483648),T=A&2147483647;x.path+="/"+T.toString(10)+(P?"'":"")}return x}globalXpub$3.decode=decode$z;function encode$D(v){const _=dist$4.Buffer.from([typeFields_1$x.GlobalTypes.GLOBAL_XPUB]),x=dist$4.Buffer.concat([_,v.extendedPubkey]),E=v.path.split("/"),A=dist$4.Buffer.allocUnsafe(E.length*4);v.masterFingerprint.copy(A,0);let P=4;return E.slice(1).forEach(T=>{const O=T.slice(-1)==="'";let k=2147483647&parseInt(O?T.slice(0,-1):T,10);O&&(k+=2147483648),A.writeUInt32LE(k,P),P+=4}),{key:x,value:A}}globalXpub$3.encode=encode$D,globalXpub$3.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function check$q(v){const _=v.extendedPubkey,x=v.masterFingerprint,E=v.path;return dist$4.Buffer.isBuffer(_)&&_.length===78&&[2,3].indexOf(_[45])>-1&&dist$4.Buffer.isBuffer(x)&&x.length===4&&typeof E=="string"&&!!E.match(/^m(\/\d+'?)*$/)}globalXpub$3.check=check$q;function canAddToArray$7(v,_,x){const E=_.extendedPubkey.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.extendedPubkey.equals(_.extendedPubkey)).length===0)}globalXpub$3.canAddToArray=canAddToArray$7;var unsignedTx$3={};Object.defineProperty(unsignedTx$3,"__esModule",{value:!0}),unsignedTx$3.encode=void 0;const typeFields_1$w=typeFields$1;function encode$C(v){return{key:dist$4.Buffer.from([typeFields_1$w.GlobalTypes.UNSIGNED_TX]),value:v.toBuffer()}}unsignedTx$3.encode=encode$C;var finalScriptSig$3={};Object.defineProperty(finalScriptSig$3,"__esModule",{value:!0}),finalScriptSig$3.canAdd=finalScriptSig$3.check=finalScriptSig$3.expected=finalScriptSig$3.encode=finalScriptSig$3.decode=void 0;const typeFields_1$v=typeFields$1;function decode$y(v){if(v.key[0]!==typeFields_1$v.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+v.key.toString("hex"));return v.value}finalScriptSig$3.decode=decode$y;function encode$B(v){return{key:dist$4.Buffer.from([typeFields_1$v.InputTypes.FINAL_SCRIPTSIG]),value:v}}finalScriptSig$3.encode=encode$B,finalScriptSig$3.expected="Buffer";function check$p(v){return dist$4.Buffer.isBuffer(v)}finalScriptSig$3.check=check$p;function canAdd$h(v,_){return!!v&&!!_&&v.finalScriptSig===void 0}finalScriptSig$3.canAdd=canAdd$h;var finalScriptWitness$3={};Object.defineProperty(finalScriptWitness$3,"__esModule",{value:!0}),finalScriptWitness$3.canAdd=finalScriptWitness$3.check=finalScriptWitness$3.expected=finalScriptWitness$3.encode=finalScriptWitness$3.decode=void 0;const typeFields_1$u=typeFields$1;function decode$x(v){if(v.key[0]!==typeFields_1$u.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+v.key.toString("hex"));return v.value}finalScriptWitness$3.decode=decode$x;function encode$A(v){return{key:dist$4.Buffer.from([typeFields_1$u.InputTypes.FINAL_SCRIPTWITNESS]),value:v}}finalScriptWitness$3.encode=encode$A,finalScriptWitness$3.expected="Buffer";function check$o(v){return dist$4.Buffer.isBuffer(v)}finalScriptWitness$3.check=check$o;function canAdd$g(v,_){return!!v&&!!_&&v.finalScriptWitness===void 0}finalScriptWitness$3.canAdd=canAdd$g;var nonWitnessUtxo$3={};Object.defineProperty(nonWitnessUtxo$3,"__esModule",{value:!0}),nonWitnessUtxo$3.canAdd=nonWitnessUtxo$3.check=nonWitnessUtxo$3.expected=nonWitnessUtxo$3.encode=nonWitnessUtxo$3.decode=void 0;const typeFields_1$t=typeFields$1;function decode$w(v){if(v.key[0]!==typeFields_1$t.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+v.key.toString("hex"));return v.value}nonWitnessUtxo$3.decode=decode$w;function encode$z(v){return{key:dist$4.Buffer.from([typeFields_1$t.InputTypes.NON_WITNESS_UTXO]),value:v}}nonWitnessUtxo$3.encode=encode$z,nonWitnessUtxo$3.expected="Buffer";function check$n(v){return dist$4.Buffer.isBuffer(v)}nonWitnessUtxo$3.check=check$n;function canAdd$f(v,_){return!!v&&!!_&&v.nonWitnessUtxo===void 0}nonWitnessUtxo$3.canAdd=canAdd$f;var partialSig$3={};Object.defineProperty(partialSig$3,"__esModule",{value:!0}),partialSig$3.canAddToArray=partialSig$3.check=partialSig$3.expected=partialSig$3.encode=partialSig$3.decode=void 0;const typeFields_1$s=typeFields$1;function decode$v(v){if(v.key[0]!==typeFields_1$s.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+v.key.toString("hex"));if(!(v.key.length===34||v.key.length===66)||![2,3,4].includes(v.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+v.key.toString("hex"));return{pubkey:v.key.slice(1),signature:v.value}}partialSig$3.decode=decode$v;function encode$y(v){const _=dist$4.Buffer.from([typeFields_1$s.InputTypes.PARTIAL_SIG]);return{key:dist$4.Buffer.concat([_,v.pubkey]),value:v.signature}}partialSig$3.encode=encode$y,partialSig$3.expected="{ pubkey: Buffer; signature: Buffer; }";function check$m(v){return dist$4.Buffer.isBuffer(v.pubkey)&&dist$4.Buffer.isBuffer(v.signature)&&[33,65].includes(v.pubkey.length)&&[2,3,4].includes(v.pubkey[0])&&isDerSigWithSighash$1(v.signature)}partialSig$3.check=check$m;function isDerSigWithSighash$1(v){if(!dist$4.Buffer.isBuffer(v)||v.length<9||v[0]!==48||v.length!==v[1]+3||v[2]!==2)return!1;const _=v[3];if(_>33||_<1||v[3+_+1]!==2)return!1;const x=v[3+_+2];return!(x>33||x<1||v.length!==3+_+2+x+2)}function canAddToArray$6(v,_,x){const E=_.pubkey.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.pubkey.equals(_.pubkey)).length===0)}partialSig$3.canAddToArray=canAddToArray$6;var porCommitment$3={};Object.defineProperty(porCommitment$3,"__esModule",{value:!0}),porCommitment$3.canAdd=porCommitment$3.check=porCommitment$3.expected=porCommitment$3.encode=porCommitment$3.decode=void 0;const typeFields_1$r=typeFields$1;function decode$u(v){if(v.key[0]!==typeFields_1$r.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+v.key.toString("hex"));return v.value.toString("utf8")}porCommitment$3.decode=decode$u;function encode$x(v){return{key:dist$4.Buffer.from([typeFields_1$r.InputTypes.POR_COMMITMENT]),value:dist$4.Buffer.from(v,"utf8")}}porCommitment$3.encode=encode$x,porCommitment$3.expected="string";function check$l(v){return typeof v=="string"}porCommitment$3.check=check$l;function canAdd$e(v,_){return!!v&&!!_&&v.porCommitment===void 0}porCommitment$3.canAdd=canAdd$e;var sighashType$3={};Object.defineProperty(sighashType$3,"__esModule",{value:!0}),sighashType$3.canAdd=sighashType$3.check=sighashType$3.expected=sighashType$3.encode=sighashType$3.decode=void 0;const typeFields_1$q=typeFields$1;function decode$t(v){if(v.key[0]!==typeFields_1$q.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+v.key.toString("hex"));return v.value.readUInt32LE(0)}sighashType$3.decode=decode$t;function encode$w(v){const _=dist$4.Buffer.from([typeFields_1$q.InputTypes.SIGHASH_TYPE]),x=dist$4.Buffer.allocUnsafe(4);return x.writeUInt32LE(v,0),{key:_,value:x}}sighashType$3.encode=encode$w,sighashType$3.expected="number";function check$k(v){return typeof v=="number"}sighashType$3.check=check$k;function canAdd$d(v,_){return!!v&&!!_&&v.sighashType===void 0}sighashType$3.canAdd=canAdd$d;var tapKeySig$3={};Object.defineProperty(tapKeySig$3,"__esModule",{value:!0}),tapKeySig$3.canAdd=tapKeySig$3.check=tapKeySig$3.expected=tapKeySig$3.encode=tapKeySig$3.decode=void 0;const typeFields_1$p=typeFields$1;function decode$s(v){if(v.key[0]!==typeFields_1$p.InputTypes.TAP_KEY_SIG||v.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+v.key.toString("hex"));if(!check$j(v.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return v.value}tapKeySig$3.decode=decode$s;function encode$v(v){return{key:dist$4.Buffer.from([typeFields_1$p.InputTypes.TAP_KEY_SIG]),value:v}}tapKeySig$3.encode=encode$v,tapKeySig$3.expected="Buffer";function check$j(v){return dist$4.Buffer.isBuffer(v)&&(v.length===64||v.length===65)}tapKeySig$3.check=check$j;function canAdd$c(v,_){return!!v&&!!_&&v.tapKeySig===void 0}tapKeySig$3.canAdd=canAdd$c;var tapLeafScript$3={};Object.defineProperty(tapLeafScript$3,"__esModule",{value:!0}),tapLeafScript$3.canAddToArray=tapLeafScript$3.check=tapLeafScript$3.expected=tapLeafScript$3.encode=tapLeafScript$3.decode=void 0;const typeFields_1$o=typeFields$1;function decode$r(v){if(v.key[0]!==typeFields_1$o.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+v.key.toString("hex"));if((v.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+v.key.toString("hex"));const _=v.value[v.value.length-1];if((v.key[1]&254)!==_)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+v.key.toString("hex"));const x=v.value.slice(0,-1);return{controlBlock:v.key.slice(1),script:x,leafVersion:_}}tapLeafScript$3.decode=decode$r;function encode$u(v){const _=dist$4.Buffer.from([typeFields_1$o.InputTypes.TAP_LEAF_SCRIPT]),x=dist$4.Buffer.from([v.leafVersion]);return{key:dist$4.Buffer.concat([_,v.controlBlock]),value:dist$4.Buffer.concat([v.script,x])}}tapLeafScript$3.encode=encode$u,tapLeafScript$3.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function check$i(v){return dist$4.Buffer.isBuffer(v.controlBlock)&&(v.controlBlock.length-1)%32===0&&(v.controlBlock[0]&254)===v.leafVersion&&dist$4.Buffer.isBuffer(v.script)}tapLeafScript$3.check=check$i;function canAddToArray$5(v,_,x){const E=_.controlBlock.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.controlBlock.equals(_.controlBlock)).length===0)}tapLeafScript$3.canAddToArray=canAddToArray$5;var tapMerkleRoot$3={};Object.defineProperty(tapMerkleRoot$3,"__esModule",{value:!0}),tapMerkleRoot$3.canAdd=tapMerkleRoot$3.check=tapMerkleRoot$3.expected=tapMerkleRoot$3.encode=tapMerkleRoot$3.decode=void 0;const typeFields_1$n=typeFields$1;function decode$q(v){if(v.key[0]!==typeFields_1$n.InputTypes.TAP_MERKLE_ROOT||v.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+v.key.toString("hex"));if(!check$h(v.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return v.value}tapMerkleRoot$3.decode=decode$q;function encode$t(v){return{key:dist$4.Buffer.from([typeFields_1$n.InputTypes.TAP_MERKLE_ROOT]),value:v}}tapMerkleRoot$3.encode=encode$t,tapMerkleRoot$3.expected="Buffer";function check$h(v){return dist$4.Buffer.isBuffer(v)&&v.length===32}tapMerkleRoot$3.check=check$h;function canAdd$b(v,_){return!!v&&!!_&&v.tapMerkleRoot===void 0}tapMerkleRoot$3.canAdd=canAdd$b;var tapScriptSig$3={};Object.defineProperty(tapScriptSig$3,"__esModule",{value:!0}),tapScriptSig$3.canAddToArray=tapScriptSig$3.check=tapScriptSig$3.expected=tapScriptSig$3.encode=tapScriptSig$3.decode=void 0;const typeFields_1$m=typeFields$1;function decode$p(v){if(v.key[0]!==typeFields_1$m.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+v.key.toString("hex"));if(v.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+v.key.toString("hex"));if(v.value.length!==64&&v.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+v.key.toString("hex"));const _=v.key.slice(1,33),x=v.key.slice(33);return{pubkey:_,leafHash:x,signature:v.value}}tapScriptSig$3.decode=decode$p;function encode$s(v){const _=dist$4.Buffer.from([typeFields_1$m.InputTypes.TAP_SCRIPT_SIG]);return{key:dist$4.Buffer.concat([_,v.pubkey,v.leafHash]),value:v.signature}}tapScriptSig$3.encode=encode$s,tapScriptSig$3.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function check$g(v){return dist$4.Buffer.isBuffer(v.pubkey)&&dist$4.Buffer.isBuffer(v.leafHash)&&dist$4.Buffer.isBuffer(v.signature)&&v.pubkey.length===32&&v.leafHash.length===32&&(v.signature.length===64||v.signature.length===65)}tapScriptSig$3.check=check$g;function canAddToArray$4(v,_,x){const E=_.pubkey.toString("hex")+_.leafHash.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.pubkey.equals(_.pubkey)&&A.leafHash.equals(_.leafHash)).length===0)}tapScriptSig$3.canAddToArray=canAddToArray$4;var witnessUtxo$3={},tools$1={},varint$1={};Object.defineProperty(varint$1,"__esModule",{value:!0}),varint$1.encodingLength=varint$1.decode=varint$1.encode=void 0;const MAX_SAFE_INTEGER$2=9007199254740991;function checkUInt53$2(v){if(v<0||v>MAX_SAFE_INTEGER$2||v%1!==0)throw new RangeError("value out of range")}function encode$r(v,_,x){if(checkUInt53$2(v),_||(_=dist$4.Buffer.allocUnsafe(encodingLength$3(v))),!dist$4.Buffer.isBuffer(_))throw new TypeError("buffer must be a Buffer instance");return x||(x=0),v<253?(_.writeUInt8(v,x),Object.assign(encode$r,{bytes:1})):v<=65535?(_.writeUInt8(253,x),_.writeUInt16LE(v,x+1),Object.assign(encode$r,{bytes:3})):v<=4294967295?(_.writeUInt8(254,x),_.writeUInt32LE(v,x+1),Object.assign(encode$r,{bytes:5})):(_.writeUInt8(255,x),_.writeUInt32LE(v>>>0,x+1),_.writeUInt32LE(v/4294967296|0,x+5),Object.assign(encode$r,{bytes:9})),_}varint$1.encode=encode$r;function decode$o(v,_){if(!dist$4.Buffer.isBuffer(v))throw new TypeError("buffer must be a Buffer instance");_||(_=0);const x=v.readUInt8(_);if(x<253)return Object.assign(decode$o,{bytes:1}),x;if(x===253)return Object.assign(decode$o,{bytes:3}),v.readUInt16LE(_+1);if(x===254)return Object.assign(decode$o,{bytes:5}),v.readUInt32LE(_+1);{Object.assign(decode$o,{bytes:9});const E=v.readUInt32LE(_+1),P=v.readUInt32LE(_+5)*4294967296+E;return checkUInt53$2(P),P}}varint$1.decode=decode$o;function encodingLength$3(v){return checkUInt53$2(v),v<253?1:v<=65535?3:v<=4294967295?5:9}varint$1.encodingLength=encodingLength$3;var __createBinding$b=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$b=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$b(_,v,x);return __setModuleDefault$b(_,v),_};Object.defineProperty(tools$1,"__esModule",{value:!0}),tools$1.writeUInt64LE=tools$1.readUInt64LE=tools$1.keyValToBuffer=tools$1.keyValsToBuffer=tools$1.reverseBuffer=tools$1.range=void 0;const varuint$e=__importStar$b(varint$1),range$5=v=>[...Array(v).keys()];tools$1.range=range$5;function reverseBuffer$2(v){if(v.length<1)return v;let _=v.length-1,x=0;for(let E=0;E<v.length/2;E++)x=v[E],v[E]=v[_],v[_]=x,_--;return v}tools$1.reverseBuffer=reverseBuffer$2;function keyValsToBuffer$1(v){const _=v.map(keyValToBuffer$1);return _.push(dist$4.Buffer.from([0])),dist$4.Buffer.concat(_)}tools$1.keyValsToBuffer=keyValsToBuffer$1;function keyValToBuffer$1(v){const _=v.key.length,x=v.value.length,E=varuint$e.encodingLength(_),A=varuint$e.encodingLength(x),P=dist$4.Buffer.allocUnsafe(E+_+A+x);return varuint$e.encode(_,P,0),v.key.copy(P,E),varuint$e.encode(x,P,E+_),v.value.copy(P,E+_+A),P}tools$1.keyValToBuffer=keyValToBuffer$1;function verifuint$2(v,_){if(typeof v!="number")throw new Error("cannot write a non-number as a number");if(v<0)throw new Error("specified a negative value for writing an unsigned value");if(v>_)throw new Error("RangeError: value out of range");if(Math.floor(v)!==v)throw new Error("value has a fractional component")}function readUInt64LE$2(v,_){const x=v.readUInt32LE(_);let E=v.readUInt32LE(_+4);return E*=4294967296,verifuint$2(E+x,9007199254740991),E+x}tools$1.readUInt64LE=readUInt64LE$2;function writeUInt64LE$2(v,_,x){return verifuint$2(_,9007199254740991),v.writeInt32LE(_&-1,x),v.writeUInt32LE(Math.floor(_/4294967296),x+4),x+8}tools$1.writeUInt64LE=writeUInt64LE$2;var __createBinding$a=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$a=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$a=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$a(_,v,x);return __setModuleDefault$a(_,v),_};Object.defineProperty(witnessUtxo$3,"__esModule",{value:!0}),witnessUtxo$3.canAdd=witnessUtxo$3.check=witnessUtxo$3.expected=witnessUtxo$3.encode=witnessUtxo$3.decode=void 0;const typeFields_1$l=typeFields$1,tools_1$5=tools$1,varuint$d=__importStar$a(varint$1);function decode$n(v){if(v.key[0]!==typeFields_1$l.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+v.key.toString("hex"));const _=(0,tools_1$5.readUInt64LE)(v.value,0);let x=8;const E=varuint$d.decode(v.value,x);x+=varuint$d.encodingLength(E);const A=v.value.slice(x);if(A.length!==E)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:A,value:_}}witnessUtxo$3.decode=decode$n;function encode$q(v){const{script:_,value:x}=v,E=varuint$d.encodingLength(_.length),A=dist$4.Buffer.allocUnsafe(8+E+_.length);return(0,tools_1$5.writeUInt64LE)(A,x,0),varuint$d.encode(_.length,A,8),_.copy(A,8+E),{key:dist$4.Buffer.from([typeFields_1$l.InputTypes.WITNESS_UTXO]),value:A}}witnessUtxo$3.encode=encode$q,witnessUtxo$3.expected="{ script: Buffer; value: number; }";function check$f(v){return dist$4.Buffer.isBuffer(v.script)&&typeof v.value=="number"}witnessUtxo$3.check=check$f;function canAdd$a(v,_){return!!v&&!!_&&v.witnessUtxo===void 0}witnessUtxo$3.canAdd=canAdd$a;var tapTree$3={},__createBinding$9=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$9=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$9=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$9(_,v,x);return __setModuleDefault$9(_,v),_};Object.defineProperty(tapTree$3,"__esModule",{value:!0}),tapTree$3.canAdd=tapTree$3.check=tapTree$3.expected=tapTree$3.encode=tapTree$3.decode=void 0;const typeFields_1$k=typeFields$1,varuint$c=__importStar$9(varint$1);function decode$m(v){if(v.key[0]!==typeFields_1$k.OutputTypes.TAP_TREE||v.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+v.key.toString("hex"));let _=0;const x=[];for(;_<v.value.length;){const E=v.value[_++],A=v.value[_++],P=varuint$c.decode(v.value,_);_+=varuint$c.encodingLength(P),x.push({depth:E,leafVersion:A,script:v.value.slice(_,_+P)}),_+=P}return{leaves:x}}tapTree$3.decode=decode$m;function encode$p(v){const _=dist$4.Buffer.from([typeFields_1$k.OutputTypes.TAP_TREE]),x=[].concat(...v.leaves.map(E=>[dist$4.Buffer.of(E.depth,E.leafVersion),varuint$c.encode(E.script.length),E.script]));return{key:_,value:dist$4.Buffer.concat(x)}}tapTree$3.encode=encode$p,tapTree$3.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function check$e(v){return Array.isArray(v.leaves)&&v.leaves.every(_=>_.depth>=0&&_.depth<=128&&(_.leafVersion&254)===_.leafVersion&&dist$4.Buffer.isBuffer(_.script))}tapTree$3.check=check$e;function canAdd$9(v,_){return!!v&&!!_&&v.tapTree===void 0}tapTree$3.canAdd=canAdd$9;var bip32Derivation$5={};Object.defineProperty(bip32Derivation$5,"__esModule",{value:!0}),bip32Derivation$5.makeConverter=void 0;const range$4=v=>[...Array(v).keys()],isValidDERKey$1=v=>v.length===33&&[2,3].includes(v[0])||v.length===65&&v[0]===4;function makeConverter$9(v,_=isValidDERKey$1){function x(O){if(O.key[0]!==v)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+O.key.toString("hex"));const k=O.key.slice(1);if(!_(k))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+O.key.toString("hex"));if(O.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const C={masterFingerprint:O.value.slice(0,4),pubkey:k,path:"m"};for(const U of range$4(O.value.length/4-1)){const N=O.value.readUInt32LE(U*4+4),H=!!(N&2147483648),D=N&2147483647;C.path+="/"+D.toString(10)+(H?"'":"")}return C}function E(O){const k=dist$4.Buffer.from([v]),C=dist$4.Buffer.concat([k,O.pubkey]),U=O.path.split("/"),N=dist$4.Buffer.allocUnsafe(U.length*4);O.masterFingerprint.copy(N,0);let H=4;return U.slice(1).forEach(D=>{const j=D.slice(-1)==="'";let V=2147483647&parseInt(j?D.slice(0,-1):D,10);j&&(V+=2147483648),N.writeUInt32LE(V,H),H+=4}),{key:C,value:N}}const A="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function P(O){return dist$4.Buffer.isBuffer(O.pubkey)&&dist$4.Buffer.isBuffer(O.masterFingerprint)&&typeof O.path=="string"&&_(O.pubkey)&&O.masterFingerprint.length===4}function T(O,k,C){const U=k.pubkey.toString("hex");return C.has(U)?!1:(C.add(U),O.filter(N=>N.pubkey.equals(k.pubkey)).length===0)}return{decode:x,encode:E,check:P,expected:A,canAddToArray:T}}bip32Derivation$5.makeConverter=makeConverter$9;var checkPubkey$3={};Object.defineProperty(checkPubkey$3,"__esModule",{value:!0}),checkPubkey$3.makeChecker=void 0;function makeChecker$1(v){return _;function _(x){let E;if(v.includes(x.key[0])&&(E=x.key.slice(1),!(E.length===33||E.length===65)||![2,3,4].includes(E[0])))throw new Error("Format Error: invalid pubkey in key 0x"+x.key.toString("hex"));return E}}checkPubkey$3.makeChecker=makeChecker$1;var redeemScript$3={};Object.defineProperty(redeemScript$3,"__esModule",{value:!0}),redeemScript$3.makeConverter=void 0;function makeConverter$8(v){function _(T){if(T.key[0]!==v)throw new Error("Decode Error: could not decode redeemScript with key 0x"+T.key.toString("hex"));return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)}function P(T,O){return!!T&&!!O&&T.redeemScript===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}redeemScript$3.makeConverter=makeConverter$8;var tapBip32Derivation$3={},__createBinding$8=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$8=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$8=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$8(_,v,x);return __setModuleDefault$8(_,v),_};Object.defineProperty(tapBip32Derivation$3,"__esModule",{value:!0}),tapBip32Derivation$3.makeConverter=void 0;const varuint$b=__importStar$8(varint$1),bip32Derivation$4=__importStar$8(bip32Derivation$5),isValidBIP340Key$1=v=>v.length===32;function makeConverter$7(v){const _=bip32Derivation$4.makeConverter(v,isValidBIP340Key$1);function x(T){const O=varuint$b.decode(T.value),k=varuint$b.encodingLength(O),C=_.decode({key:T.key,value:T.value.slice(k+O*32)}),U=new Array(O);for(let N=0,H=k;N<O;N++,H+=32)U[N]=T.value.slice(H,H+32);return{...C,leafHashes:U}}function E(T){const O=_.encode(T),k=varuint$b.encodingLength(T.leafHashes.length),C=dist$4.Buffer.allocUnsafe(k);varuint$b.encode(T.leafHashes.length,C);const U=dist$4.Buffer.concat([C,...T.leafHashes,O.value]);return{...O,value:U}}const A="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function P(T){return Array.isArray(T.leafHashes)&&T.leafHashes.every(O=>dist$4.Buffer.isBuffer(O)&&O.length===32)&&_.check(T)}return{decode:x,encode:E,check:P,expected:A,canAddToArray:_.canAddToArray}}tapBip32Derivation$3.makeConverter=makeConverter$7;var tapInternalKey$3={};Object.defineProperty(tapInternalKey$3,"__esModule",{value:!0}),tapInternalKey$3.makeConverter=void 0;function makeConverter$6(v){function _(T){if(T.key[0]!==v||T.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+T.key.toString("hex"));if(T.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)&&T.length===32}function P(T,O){return!!T&&!!O&&T.tapInternalKey===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}tapInternalKey$3.makeConverter=makeConverter$6;var witnessScript$3={};Object.defineProperty(witnessScript$3,"__esModule",{value:!0}),witnessScript$3.makeConverter=void 0;function makeConverter$5(v){function _(T){if(T.key[0]!==v)throw new Error("Decode Error: could not decode witnessScript with key 0x"+T.key.toString("hex"));return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)}function P(T,O){return!!T&&!!O&&T.witnessScript===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}witnessScript$3.makeConverter=makeConverter$5;var __createBinding$7=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$7=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$7=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$7(_,v,x);return __setModuleDefault$7(_,v),_};Object.defineProperty(converter$1,"__esModule",{value:!0}),converter$1.outputs=converter$1.inputs=converter$1.globals=void 0;const typeFields_1$j=typeFields$1,globalXpub$2=__importStar$7(globalXpub$3),unsignedTx$2=__importStar$7(unsignedTx$3),finalScriptSig$2=__importStar$7(finalScriptSig$3),finalScriptWitness$2=__importStar$7(finalScriptWitness$3),nonWitnessUtxo$2=__importStar$7(nonWitnessUtxo$3),partialSig$2=__importStar$7(partialSig$3),porCommitment$2=__importStar$7(porCommitment$3),sighashType$2=__importStar$7(sighashType$3),tapKeySig$2=__importStar$7(tapKeySig$3),tapLeafScript$2=__importStar$7(tapLeafScript$3),tapMerkleRoot$2=__importStar$7(tapMerkleRoot$3),tapScriptSig$2=__importStar$7(tapScriptSig$3),witnessUtxo$2=__importStar$7(witnessUtxo$3),tapTree$2=__importStar$7(tapTree$3),bip32Derivation$3=__importStar$7(bip32Derivation$5),checkPubkey$2=__importStar$7(checkPubkey$3),redeemScript$2=__importStar$7(redeemScript$3),tapBip32Derivation$2=__importStar$7(tapBip32Derivation$3),tapInternalKey$2=__importStar$7(tapInternalKey$3),witnessScript$2=__importStar$7(witnessScript$3),globals$1={unsignedTx:unsignedTx$2,globalXpub:globalXpub$2,checkPubkey:checkPubkey$2.makeChecker([])};converter$1.globals=globals$1;const inputs$1={nonWitnessUtxo:nonWitnessUtxo$2,partialSig:partialSig$2,sighashType:sighashType$2,finalScriptSig:finalScriptSig$2,finalScriptWitness:finalScriptWitness$2,porCommitment:porCommitment$2,witnessUtxo:witnessUtxo$2,bip32Derivation:bip32Derivation$3.makeConverter(typeFields_1$j.InputTypes.BIP32_DERIVATION),redeemScript:redeemScript$2.makeConverter(typeFields_1$j.InputTypes.REDEEM_SCRIPT),witnessScript:witnessScript$2.makeConverter(typeFields_1$j.InputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey$2.makeChecker([typeFields_1$j.InputTypes.PARTIAL_SIG,typeFields_1$j.InputTypes.BIP32_DERIVATION]),tapKeySig:tapKeySig$2,tapScriptSig:tapScriptSig$2,tapLeafScript:tapLeafScript$2,tapBip32Derivation:tapBip32Derivation$2.makeConverter(typeFields_1$j.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:tapInternalKey$2.makeConverter(typeFields_1$j.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:tapMerkleRoot$2};converter$1.inputs=inputs$1;const outputs$1={bip32Derivation:bip32Derivation$3.makeConverter(typeFields_1$j.OutputTypes.BIP32_DERIVATION),redeemScript:redeemScript$2.makeConverter(typeFields_1$j.OutputTypes.REDEEM_SCRIPT),witnessScript:witnessScript$2.makeConverter(typeFields_1$j.OutputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey$2.makeChecker([typeFields_1$j.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:tapBip32Derivation$2.makeConverter(typeFields_1$j.OutputTypes.TAP_BIP32_DERIVATION),tapTree:tapTree$2,tapInternalKey:tapInternalKey$2.makeConverter(typeFields_1$j.OutputTypes.TAP_INTERNAL_KEY)};converter$1.outputs=outputs$1;var __createBinding$6=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$6=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$6=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$6(_,v,x);return __setModuleDefault$6(_,v),_};Object.defineProperty(fromBuffer$1,"__esModule",{value:!0}),fromBuffer$1.psbtFromKeyVals=fromBuffer$1.checkKeyBuffer=fromBuffer$1.psbtFromBuffer=void 0;const convert$5=__importStar$6(converter$1),tools_1$4=tools$1,varuint$a=__importStar$6(varint$1),typeFields_1$i=typeFields$1;function psbtFromBuffer$1(v,_){let x=0;function E(){const X=varuint$a.decode(v,x);x+=varuint$a.encodingLength(X);const re=v.slice(x,x+X);return x+=X,re}function A(){const X=v.readUInt32BE(x);return x+=4,X}function P(){const X=v.readUInt8(x);return x+=1,X}function T(){const X=E(),re=E();return{key:X,value:re}}function O(){if(x>=v.length)throw new Error("Format Error: Unexpected End of PSBT");const X=v.readUInt8(x)===0;return X&&x++,X}if(A()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(P()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");const k=[],C={};for(;!O();){const X=T(),re=X.key.toString("hex");if(C[re])throw new Error("Format Error: Keys must be unique for global keymap: key "+re);C[re]=1,k.push(X)}const U=k.filter(X=>X.key[0]===typeFields_1$i.GlobalTypes.UNSIGNED_TX);if(U.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const N=_(U[0].value),{inputCount:H,outputCount:D}=N.getInputOutputCounts(),j=[],V=[];for(const X of(0,tools_1$4.range)(H)){const re={},ee=[];for(;!O();){const fe=T(),le=fe.key.toString("hex");if(re[le])throw new Error("Format Error: Keys must be unique for each input: input index "+X+" key "+le);re[le]=1,ee.push(fe)}j.push(ee)}for(const X of(0,tools_1$4.range)(D)){const re={},ee=[];for(;!O();){const fe=T(),le=fe.key.toString("hex");if(re[le])throw new Error("Format Error: Keys must be unique for each output: output index "+X+" key "+le);re[le]=1,ee.push(fe)}V.push(ee)}return psbtFromKeyVals$1(N,{globalMapKeyVals:k,inputKeyVals:j,outputKeyVals:V})}fromBuffer$1.psbtFromBuffer=psbtFromBuffer$1;function checkKeyBuffer$1(v,_,x){if(!_.equals(dist$4.Buffer.from([x])))throw new Error(`Format Error: Invalid ${v} key: ${_.toString("hex")}`)}fromBuffer$1.checkKeyBuffer=checkKeyBuffer$1;function psbtFromKeyVals$1(v,{globalMapKeyVals:_,inputKeyVals:x,outputKeyVals:E}){const A={unsignedTx:v};let P=0;for(const U of _)switch(U.key[0]){case typeFields_1$i.GlobalTypes.UNSIGNED_TX:if(checkKeyBuffer$1("global",U.key,typeFields_1$i.GlobalTypes.UNSIGNED_TX),P>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");P++;break;case typeFields_1$i.GlobalTypes.GLOBAL_XPUB:A.globalXpub===void 0&&(A.globalXpub=[]),A.globalXpub.push(convert$5.globals.globalXpub.decode(U));break;default:A.unknownKeyVals||(A.unknownKeyVals=[]),A.unknownKeyVals.push(U)}const T=x.length,O=E.length,k=[],C=[];for(const U of(0,tools_1$4.range)(T)){const N={};for(const H of x[U])switch(convert$5.inputs.checkPubkey(H),H.key[0]){case typeFields_1$i.InputTypes.NON_WITNESS_UTXO:if(checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.NON_WITNESS_UTXO),N.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");N.nonWitnessUtxo=convert$5.inputs.nonWitnessUtxo.decode(H);break;case typeFields_1$i.InputTypes.WITNESS_UTXO:if(checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.WITNESS_UTXO),N.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");N.witnessUtxo=convert$5.inputs.witnessUtxo.decode(H);break;case typeFields_1$i.InputTypes.PARTIAL_SIG:N.partialSig===void 0&&(N.partialSig=[]),N.partialSig.push(convert$5.inputs.partialSig.decode(H));break;case typeFields_1$i.InputTypes.SIGHASH_TYPE:if(checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.SIGHASH_TYPE),N.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");N.sighashType=convert$5.inputs.sighashType.decode(H);break;case typeFields_1$i.InputTypes.REDEEM_SCRIPT:if(checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.REDEEM_SCRIPT),N.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");N.redeemScript=convert$5.inputs.redeemScript.decode(H);break;case typeFields_1$i.InputTypes.WITNESS_SCRIPT:if(checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.WITNESS_SCRIPT),N.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");N.witnessScript=convert$5.inputs.witnessScript.decode(H);break;case typeFields_1$i.InputTypes.BIP32_DERIVATION:N.bip32Derivation===void 0&&(N.bip32Derivation=[]),N.bip32Derivation.push(convert$5.inputs.bip32Derivation.decode(H));break;case typeFields_1$i.InputTypes.FINAL_SCRIPTSIG:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.FINAL_SCRIPTSIG),N.finalScriptSig=convert$5.inputs.finalScriptSig.decode(H);break;case typeFields_1$i.InputTypes.FINAL_SCRIPTWITNESS:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.FINAL_SCRIPTWITNESS),N.finalScriptWitness=convert$5.inputs.finalScriptWitness.decode(H);break;case typeFields_1$i.InputTypes.POR_COMMITMENT:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.POR_COMMITMENT),N.porCommitment=convert$5.inputs.porCommitment.decode(H);break;case typeFields_1$i.InputTypes.TAP_KEY_SIG:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.TAP_KEY_SIG),N.tapKeySig=convert$5.inputs.tapKeySig.decode(H);break;case typeFields_1$i.InputTypes.TAP_SCRIPT_SIG:N.tapScriptSig===void 0&&(N.tapScriptSig=[]),N.tapScriptSig.push(convert$5.inputs.tapScriptSig.decode(H));break;case typeFields_1$i.InputTypes.TAP_LEAF_SCRIPT:N.tapLeafScript===void 0&&(N.tapLeafScript=[]),N.tapLeafScript.push(convert$5.inputs.tapLeafScript.decode(H));break;case typeFields_1$i.InputTypes.TAP_BIP32_DERIVATION:N.tapBip32Derivation===void 0&&(N.tapBip32Derivation=[]),N.tapBip32Derivation.push(convert$5.inputs.tapBip32Derivation.decode(H));break;case typeFields_1$i.InputTypes.TAP_INTERNAL_KEY:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.TAP_INTERNAL_KEY),N.tapInternalKey=convert$5.inputs.tapInternalKey.decode(H);break;case typeFields_1$i.InputTypes.TAP_MERKLE_ROOT:checkKeyBuffer$1("input",H.key,typeFields_1$i.InputTypes.TAP_MERKLE_ROOT),N.tapMerkleRoot=convert$5.inputs.tapMerkleRoot.decode(H);break;default:N.unknownKeyVals||(N.unknownKeyVals=[]),N.unknownKeyVals.push(H)}k.push(N)}for(const U of(0,tools_1$4.range)(O)){const N={};for(const H of E[U])switch(convert$5.outputs.checkPubkey(H),H.key[0]){case typeFields_1$i.OutputTypes.REDEEM_SCRIPT:if(checkKeyBuffer$1("output",H.key,typeFields_1$i.OutputTypes.REDEEM_SCRIPT),N.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");N.redeemScript=convert$5.outputs.redeemScript.decode(H);break;case typeFields_1$i.OutputTypes.WITNESS_SCRIPT:if(checkKeyBuffer$1("output",H.key,typeFields_1$i.OutputTypes.WITNESS_SCRIPT),N.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");N.witnessScript=convert$5.outputs.witnessScript.decode(H);break;case typeFields_1$i.OutputTypes.BIP32_DERIVATION:N.bip32Derivation===void 0&&(N.bip32Derivation=[]),N.bip32Derivation.push(convert$5.outputs.bip32Derivation.decode(H));break;case typeFields_1$i.OutputTypes.TAP_INTERNAL_KEY:checkKeyBuffer$1("output",H.key,typeFields_1$i.OutputTypes.TAP_INTERNAL_KEY),N.tapInternalKey=convert$5.outputs.tapInternalKey.decode(H);break;case typeFields_1$i.OutputTypes.TAP_TREE:checkKeyBuffer$1("output",H.key,typeFields_1$i.OutputTypes.TAP_TREE),N.tapTree=convert$5.outputs.tapTree.decode(H);break;case typeFields_1$i.OutputTypes.TAP_BIP32_DERIVATION:N.tapBip32Derivation===void 0&&(N.tapBip32Derivation=[]),N.tapBip32Derivation.push(convert$5.outputs.tapBip32Derivation.decode(H));break;default:N.unknownKeyVals||(N.unknownKeyVals=[]),N.unknownKeyVals.push(H)}C.push(N)}return{globalMap:A,inputs:k,outputs:C}}fromBuffer$1.psbtFromKeyVals=psbtFromKeyVals$1;var toBuffer$1={},__createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$5(_,v,x);return __setModuleDefault$5(_,v),_};Object.defineProperty(toBuffer$1,"__esModule",{value:!0}),toBuffer$1.psbtToKeyVals=toBuffer$1.psbtToBuffer=void 0;const convert$4=__importStar$5(converter$1),tools_1$3=tools$1;function psbtToBuffer$1({globalMap:v,inputs:_,outputs:x}){const{globalKeyVals:E,inputKeyVals:A,outputKeyVals:P}=psbtToKeyVals$1({globalMap:v,inputs:_,outputs:x}),T=(0,tools_1$3.keyValsToBuffer)(E),O=N=>N.length===0?[dist$4.Buffer.from([0])]:N.map(tools_1$3.keyValsToBuffer),k=O(A),C=O(P),U=dist$4.Buffer.allocUnsafe(5);return U.writeUIntBE(482972169471,0,5),dist$4.Buffer.concat([U,T].concat(k,C))}toBuffer$1.psbtToBuffer=psbtToBuffer$1;const sortKeyVals$1=(v,_)=>v.key.compare(_.key);function keyValsFromMap$1(v,_){const x=new Set,E=Object.entries(v).reduce((P,[T,O])=>{if(T==="unknownKeyVals")return P;const k=_[T];if(k===void 0)return P;const C=(Array.isArray(O)?O:[O]).map(k.encode);return C.map(N=>N.key.toString("hex")).forEach(N=>{if(x.has(N))throw new Error("Serialize Error: Duplicate key: "+N);x.add(N)}),P.concat(C)},[]),A=v.unknownKeyVals?v.unknownKeyVals.filter(P=>!x.has(P.key.toString("hex"))):[];return E.concat(A).sort(sortKeyVals$1)}function psbtToKeyVals$1({globalMap:v,inputs:_,outputs:x}){return{globalKeyVals:keyValsFromMap$1(v,convert$4.globals),inputKeyVals:_.map(E=>keyValsFromMap$1(E,convert$4.inputs)),outputKeyVals:x.map(E=>keyValsFromMap$1(E,convert$4.outputs))}}toBuffer$1.psbtToKeyVals=psbtToKeyVals$1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(E,A,P,T){T===void 0&&(T=P);var O=Object.getOwnPropertyDescriptor(A,P);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[P]}}),Object.defineProperty(E,T,O)}:function(E,A,P,T){T===void 0&&(T=P),E[T]=A[P]}),x=commonjsGlobal&&commonjsGlobal.__exportStar||function(E,A){for(var P in E)P!=="default"&&!Object.prototype.hasOwnProperty.call(A,P)&&_(A,E,P)};Object.defineProperty(v,"__esModule",{value:!0}),x(fromBuffer$1,v),x(toBuffer$1,v)}(parser$1),Object.defineProperty(combiner$1,"__esModule",{value:!0}),combiner$1.combine=void 0;const parser_1$3=parser$1;function combine$1(v){const _=v[0],x=(0,parser_1$3.psbtToKeyVals)(_),E=v.slice(1);if(E.length===0)throw new Error("Combine: Nothing to combine");const A=getTx$1(_);if(A===void 0)throw new Error("Combine: Self missing transaction");const P=getKeySet$1(x.globalKeyVals),T=x.inputKeyVals.map(getKeySet$1),O=x.outputKeyVals.map(getKeySet$1);for(const k of E){const C=getTx$1(k);if(C===void 0||!C.toBuffer().equals(A.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const U=(0,parser_1$3.psbtToKeyVals)(k);getKeySet$1(U.globalKeyVals).forEach(keyPusher$1(P,x.globalKeyVals,U.globalKeyVals)),U.inputKeyVals.map(getKeySet$1).forEach((j,V)=>j.forEach(keyPusher$1(T[V],x.inputKeyVals[V],U.inputKeyVals[V]))),U.outputKeyVals.map(getKeySet$1).forEach((j,V)=>j.forEach(keyPusher$1(O[V],x.outputKeyVals[V],U.outputKeyVals[V])))}return(0,parser_1$3.psbtFromKeyVals)(A,{globalMapKeyVals:x.globalKeyVals,inputKeyVals:x.inputKeyVals,outputKeyVals:x.outputKeyVals})}combiner$1.combine=combine$1;function keyPusher$1(v,_,x){return E=>{if(v.has(E))return;const A=x.filter(P=>P.key.toString("hex")===E)[0];_.push(A),v.add(E)}}function getTx$1(v){return v.globalMap.unsignedTx}function getKeySet$1(v){const _=new Set;return v.forEach(x=>{const E=x.key.toString("hex");if(_.has(E))throw new Error("Combine: KeyValue Map keys should be unique");_.add(E)}),_}var utils$5={};(function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(X,re,ee,fe){fe===void 0&&(fe=ee);var le=Object.getOwnPropertyDescriptor(re,ee);(!le||("get"in le?!re.__esModule:le.writable||le.configurable))&&(le={enumerable:!0,get:function(){return re[ee]}}),Object.defineProperty(X,fe,le)}:function(X,re,ee,fe){fe===void 0&&(fe=ee),X[fe]=re[ee]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(X,re){Object.defineProperty(X,"default",{enumerable:!0,value:re})}:function(X,re){X.default=re}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(X){if(X&&X.__esModule)return X;var re={};if(X!=null)for(var ee in X)ee!=="default"&&Object.prototype.hasOwnProperty.call(X,ee)&&_(re,X,ee);return x(re,X),re};Object.defineProperty(v,"__esModule",{value:!0}),v.defaultLocktimeSetter=v.defaultVersionSetter=v.addOutputAttributes=v.addInputAttributes=v.updateOutput=v.updateInput=v.updateGlobal=v.inputCheckUncleanFinalized=v.getEnumLength=v.checkHasKey=v.checkForOutput=v.checkForInput=void 0;const A=E(converter$1);function P(X,re){const ee=X[re];if(ee===void 0)throw new Error(`No input #${re}`);return ee}v.checkForInput=P;function T(X,re){const ee=X[re];if(ee===void 0)throw new Error(`No output #${re}`);return ee}v.checkForOutput=T;function O(X,re,ee){if(X.key[0]<ee)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(re&&re.filter(fe=>fe.key.equals(X.key)).length!==0)throw new Error(`Duplicate Key: ${X.key.toString("hex")}`)}v.checkHasKey=O;function k(X){let re=0;return Object.keys(X).forEach(ee=>{Number(isNaN(Number(ee)))&&re++}),re}v.getEnumLength=k;function C(X,re){let ee=!1;if(re.nonWitnessUtxo||re.witnessUtxo){const fe=!!re.redeemScript,le=!!re.witnessScript,pe=!fe||!!re.finalScriptSig,ie=!le||!!re.finalScriptWitness,he=!!re.finalScriptSig||!!re.finalScriptWitness;ee=pe&&ie&&he}if(ee===!1)throw new Error(`Input #${X} has too much or too little data to clean`)}v.inputCheckUncleanFinalized=C;function U(X,re,ee,fe){throw new Error(`Data for ${X} key ${re} is incorrect: Expected ${ee} and got ${JSON.stringify(fe)}`)}function N(X){return(re,ee)=>{for(const fe of Object.keys(re)){const le=re[fe],{canAdd:pe,canAddToArray:ie,check:he,expected:ae}=A[X+"s"][fe]||{},te=!!ie;if(he)if(te){if(!Array.isArray(le)||ee[fe]&&!Array.isArray(ee[fe]))throw new Error(`Key type ${fe} must be an array`);le.every(he)||U(X,fe,ae,le);const ue=ee[fe]||[],ne=new Set;if(!le.every(J=>ie(ue,J,ne)))throw new Error("Can not add duplicate data to array");ee[fe]=ue.concat(le)}else{if(he(le)||U(X,fe,ae,le),!pe(ee,le))throw new Error(`Can not add duplicate data to ${X}`);ee[fe]=le}}}}v.updateGlobal=N("global"),v.updateInput=N("input"),v.updateOutput=N("output");function H(X,re){const ee=X.length-1,fe=P(X,ee);(0,v.updateInput)(re,fe)}v.addInputAttributes=H;function D(X,re){const ee=X.length-1,fe=T(X,ee);(0,v.updateOutput)(re,fe)}v.addOutputAttributes=D;function j(X,re){if(!dist$4.Buffer.isBuffer(re)||re.length<4)throw new Error("Set Version: Invalid Transaction");return re.writeUInt32LE(X,0),re}v.defaultVersionSetter=j;function V(X,re){if(!dist$4.Buffer.isBuffer(re)||re.length<4)throw new Error("Set Locktime: Invalid Transaction");return re.writeUInt32LE(X,re.length-4),re}v.defaultLocktimeSetter=V})(utils$5),Object.defineProperty(psbt$2,"__esModule",{value:!0}),psbt$2.Psbt=void 0;const combiner_1$1=combiner$1,parser_1$2=parser$1,typeFields_1$h=typeFields$1,utils_1$4=utils$5;let Psbt$3=class{static fromBase64(_,x){const E=dist$4.Buffer.from(_,"base64");return this.fromBuffer(E,x)}static fromHex(_,x){const E=dist$4.Buffer.from(_,"hex");return this.fromBuffer(E,x)}static fromBuffer(_,x){const E=(0,parser_1$2.psbtFromBuffer)(_,x),A=new this(E.globalMap.unsignedTx);return Object.assign(A,E),A}constructor(_){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:_}}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return(0,parser_1$2.psbtToBuffer)(this)}updateGlobal(_){return(0,utils_1$4.updateGlobal)(_,this.globalMap),this}updateInput(_,x){const E=(0,utils_1$4.checkForInput)(this.inputs,_);return(0,utils_1$4.updateInput)(x,E),this}updateOutput(_,x){const E=(0,utils_1$4.checkForOutput)(this.outputs,_);return(0,utils_1$4.updateOutput)(x,E),this}addUnknownKeyValToGlobal(_){return(0,utils_1$4.checkHasKey)(_,this.globalMap.unknownKeyVals,(0,utils_1$4.getEnumLength)(typeFields_1$h.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(_),this}addUnknownKeyValToInput(_,x){const E=(0,utils_1$4.checkForInput)(this.inputs,_);return(0,utils_1$4.checkHasKey)(x,E.unknownKeyVals,(0,utils_1$4.getEnumLength)(typeFields_1$h.InputTypes)),E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(x),this}addUnknownKeyValToOutput(_,x){const E=(0,utils_1$4.checkForOutput)(this.outputs,_);return(0,utils_1$4.checkHasKey)(x,E.unknownKeyVals,(0,utils_1$4.getEnumLength)(typeFields_1$h.OutputTypes)),E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(x),this}addInput(_){this.globalMap.unsignedTx.addInput(_),this.inputs.push({unknownKeyVals:[]});const x=_.unknownKeyVals||[],E=this.inputs.length-1;if(!Array.isArray(x))throw new Error("unknownKeyVals must be an Array");return x.forEach(A=>this.addUnknownKeyValToInput(E,A)),(0,utils_1$4.addInputAttributes)(this.inputs,_),this}addOutput(_){this.globalMap.unsignedTx.addOutput(_),this.outputs.push({unknownKeyVals:[]});const x=_.unknownKeyVals||[],E=this.outputs.length-1;if(!Array.isArray(x))throw new Error("unknownKeyVals must be an Array");return x.forEach(A=>this.addUnknownKeyValToInput(E,A)),(0,utils_1$4.addOutputAttributes)(this.outputs,_),this}clearFinalizedInput(_){const x=(0,utils_1$4.checkForInput)(this.inputs,_);(0,utils_1$4.inputCheckUncleanFinalized)(_,x);for(const E of Object.keys(x))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(E)||delete x[E];return this}combine(..._){const x=(0,combiner_1$1.combine)([this].concat(_));return Object.assign(this,x),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};psbt$2.Psbt=Psbt$3;var bip371$1={},psbtutils$1={},__createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$4(_,v,x);return __setModuleDefault$4(_,v),_};Object.defineProperty(psbtutils$1,"__esModule",{value:!0}),psbtutils$1.signatureBlocksAction=psbtutils$1.checkInputForSig=psbtutils$1.pubkeyInScript=psbtutils$1.pubkeyPositionInScript=psbtutils$1.witnessStackToScriptWitness=psbtutils$1.isP2TR=psbtutils$1.isP2SHScript=psbtutils$1.isP2WSHScript=psbtutils$1.isP2WPKH=psbtutils$1.isP2PKH=psbtutils$1.isP2PK=psbtutils$1.isP2MS=void 0;const varuint$9=__importStar$4(varint$1),bscript$d=__importStar$4(script$1),transaction_1$7=transaction$1,crypto_1$2=crypto$4,payments$6=__importStar$4(payments$8);function isPaymentFactory$1(v){return _=>{try{return v({output:_}),!0}catch{return!1}}}psbtutils$1.isP2MS=isPaymentFactory$1(payments$6.p2ms),psbtutils$1.isP2PK=isPaymentFactory$1(payments$6.p2pk),psbtutils$1.isP2PKH=isPaymentFactory$1(payments$6.p2pkh),psbtutils$1.isP2WPKH=isPaymentFactory$1(payments$6.p2wpkh),psbtutils$1.isP2WSHScript=isPaymentFactory$1(payments$6.p2wsh),psbtutils$1.isP2SHScript=isPaymentFactory$1(payments$6.p2sh),psbtutils$1.isP2TR=isPaymentFactory$1(payments$6.p2tr);function witnessStackToScriptWitness$1(v){let _=dist$4.Buffer.allocUnsafe(0);function x(T){_=dist$4.Buffer.concat([_,dist$4.Buffer.from(T)])}function E(T){const O=_.length,k=varuint$9.encodingLength(T);_=dist$4.Buffer.concat([_,dist$4.Buffer.allocUnsafe(k)]),varuint$9.encode(T,_,O)}function A(T){E(T.length),x(T)}function P(T){E(T.length),T.forEach(A)}return P(v),_}psbtutils$1.witnessStackToScriptWitness=witnessStackToScriptWitness$1;function pubkeyPositionInScript$1(v,_){const x=(0,crypto_1$2.hash160)(v),E=v.slice(1,33),A=bscript$d.decompile(_);if(A===null)throw new Error("Unknown script error");return A.findIndex(P=>typeof P=="number"?!1:P.equals(v)||P.equals(x)||P.equals(E))}psbtutils$1.pubkeyPositionInScript=pubkeyPositionInScript$1;function pubkeyInScript$1(v,_){return pubkeyPositionInScript$1(v,_)!==-1}psbtutils$1.pubkeyInScript=pubkeyInScript$1;function checkInputForSig$1(v,_){return extractPartialSigs$1(v).some(E=>signatureBlocksAction$1(E,bscript$d.signature.decode,_))}psbtutils$1.checkInputForSig=checkInputForSig$1;function signatureBlocksAction$1(v,_,x){const{hashType:E}=_(v),A=[];switch(E&transaction_1$7.Transaction.SIGHASH_ANYONECANPAY&&A.push("addInput"),E&31){case transaction_1$7.Transaction.SIGHASH_ALL:break;case transaction_1$7.Transaction.SIGHASH_SINGLE:case transaction_1$7.Transaction.SIGHASH_NONE:A.push("addOutput"),A.push("setInputSequence");break}return A.indexOf(x)===-1}psbtutils$1.signatureBlocksAction=signatureBlocksAction$1;function extractPartialSigs$1(v){let _=[];if((v.partialSig||[]).length===0){if(!v.finalScriptSig&&!v.finalScriptWitness)return[];_=getPsigsFromInputFinalScripts$1(v)}else _=v.partialSig;return _.map(x=>x.signature)}function getPsigsFromInputFinalScripts$1(v){const _=v.finalScriptSig?bscript$d.decompile(v.finalScriptSig)||[]:[],x=v.finalScriptWitness?bscript$d.decompile(v.finalScriptWitness)||[]:[];return _.concat(x).filter(E=>dist$4.Buffer.isBuffer(E)&&bscript$d.isCanonicalScriptSignature(E)).map(E=>({signature:E}))}Object.defineProperty(bip371$1,"__esModule",{value:!0}),bip371$1.checkTaprootInputForSigs=bip371$1.tapTreeFromList=bip371$1.tapTreeToList=bip371$1.tweakInternalPubKey=bip371$1.checkTaprootOutputFields=bip371$1.checkTaprootInputFields=bip371$1.isTaprootOutput=bip371$1.isTaprootInput=bip371$1.serializeTaprootSignature=bip371$1.tapScriptFinalizer=bip371$1.toXOnly=void 0;const types_1$a=types$d,transaction_1$6=transaction$1,psbtutils_1$3=psbtutils$1,bip341_1$4=bip341$1,payments_1$1=payments$8,psbtutils_2$1=psbtutils$1,toXOnly$1=v=>v.length===32?v:v.slice(1,33);bip371$1.toXOnly=toXOnly$1;function tapScriptFinalizer$1(v,_,x){const E=findTapLeafToFinalize$1(_,v,x);try{const P=sortSignatures$1(_,E).concat(E.script).concat(E.controlBlock);return{finalScriptWitness:(0,psbtutils_1$3.witnessStackToScriptWitness)(P)}}catch(A){throw new Error(`Can not finalize taproot input #${v}: ${A}`)}}bip371$1.tapScriptFinalizer=tapScriptFinalizer$1;function serializeTaprootSignature$1(v,_){const x=_?dist$4.Buffer.from([_]):dist$4.Buffer.from([]);return dist$4.Buffer.concat([v,x])}bip371$1.serializeTaprootSignature=serializeTaprootSignature$1;function isTaprootInput$1(v){return v&&!!(v.tapInternalKey||v.tapMerkleRoot||v.tapLeafScript&&v.tapLeafScript.length||v.tapBip32Derivation&&v.tapBip32Derivation.length||v.witnessUtxo&&(0,psbtutils_1$3.isP2TR)(v.witnessUtxo.script))}bip371$1.isTaprootInput=isTaprootInput$1;function isTaprootOutput$1(v,_){return v&&!!(v.tapInternalKey||v.tapTree||v.tapBip32Derivation&&v.tapBip32Derivation.length||_&&(0,psbtutils_1$3.isP2TR)(_))}bip371$1.isTaprootOutput=isTaprootOutput$1;function checkTaprootInputFields$1(v,_,x){checkMixedTaprootAndNonTaprootInputFields$1(v,_,x),checkIfTapLeafInTree$1(v,_,x)}bip371$1.checkTaprootInputFields=checkTaprootInputFields$1;function checkTaprootOutputFields$1(v,_,x){checkMixedTaprootAndNonTaprootOutputFields$1(v,_,x),checkTaprootScriptPubkey$1(v,_)}bip371$1.checkTaprootOutputFields=checkTaprootOutputFields$1;function checkTaprootScriptPubkey$1(v,_){if(!_.tapTree&&!_.tapInternalKey)return;const x=_.tapInternalKey||v.tapInternalKey,E=_.tapTree||v.tapTree;if(x){const{script:A}=v,P=getTaprootScripPubkey$1(x,E);if(A&&!A.equals(P))throw new Error("Error adding output. Script or address missmatch.")}}function getTaprootScripPubkey$1(v,_){const x=_&&tapTreeFromList$1(_.leaves),{output:E}=(0,payments_1$1.p2tr)({internalPubkey:v,scriptTree:x});return E}function tweakInternalPubKey$1(v,_){const x=_.tapInternalKey,E=x&&(0,bip341_1$4.tweakKey)(x,_.tapMerkleRoot);if(!E)throw new Error(`Cannot tweak tap internal key for input #${v}. Public key: ${x&&x.toString("hex")}`);return E.x}bip371$1.tweakInternalPubKey=tweakInternalPubKey$1;function tapTreeToList$1(v){if(!(0,types_1$a.isTaptree)(v))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return _tapTreeToList$1(v)}bip371$1.tapTreeToList=tapTreeToList$1;function tapTreeFromList$1(v=[]){return v.length===1&&v[0].depth===0?{output:v[0].script,version:v[0].leafVersion}:instertLeavesInTree$1(v)}bip371$1.tapTreeFromList=tapTreeFromList$1;function checkTaprootInputForSigs$1(v,_){return extractTaprootSigs$1(v).some(E=>(0,psbtutils_2$1.signatureBlocksAction)(E,decodeSchnorrSignature$1,_))}bip371$1.checkTaprootInputForSigs=checkTaprootInputForSigs$1;function decodeSchnorrSignature$1(v){return{signature:v.slice(0,64),hashType:v.slice(64)[0]||transaction_1$6.Transaction.SIGHASH_DEFAULT}}function extractTaprootSigs$1(v){const _=[];if(v.tapKeySig&&_.push(v.tapKeySig),v.tapScriptSig&&_.push(...v.tapScriptSig.map(x=>x.signature)),!_.length){const x=getTapKeySigFromWithness$1(v.finalScriptWitness);x&&_.push(x)}return _}function getTapKeySigFromWithness$1(v){if(!v)return;const _=v.slice(2);if(_.length===64||_.length===65)return _}function _tapTreeToList$1(v,_=[],x=0){if(x>bip341_1$4.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return v?(0,types_1$a.isTapleaf)(v)?(_.push({depth:x,leafVersion:v.version||bip341_1$4.LEAF_VERSION_TAPSCRIPT,script:v.output}),_):(v[0]&&_tapTreeToList$1(v[0],_,x+1),v[1]&&_tapTreeToList$1(v[1],_,x+1),_):[]}function instertLeavesInTree$1(v){let _;for(const x of v)if(_=instertLeafInTree$1(x,_),!_)throw new Error("No room left to insert tapleaf in tree");return _}function instertLeafInTree$1(v,_,x=0){if(x>bip341_1$4.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(v.depth===x)return _?void 0:{output:v.script,version:v.leafVersion};if((0,types_1$a.isTapleaf)(_))return;const E=instertLeafInTree$1(v,_&&_[0],x+1);if(E)return[E,_&&_[1]];const A=instertLeafInTree$1(v,_&&_[1],x+1);if(A)return[_&&_[0],A]}function checkMixedTaprootAndNonTaprootInputFields$1(v,_,x){const E=isTaprootInput$1(v)&&hasNonTaprootFields$1(_),A=hasNonTaprootFields$1(v)&&isTaprootInput$1(_),P=v===_&&isTaprootInput$1(_)&&hasNonTaprootFields$1(_);if(E||A||P)throw new Error(`Invalid arguments for Psbt.${x}. Cannot use both taproot and non-taproot fields.`)}function checkMixedTaprootAndNonTaprootOutputFields$1(v,_,x){const E=isTaprootOutput$1(v)&&hasNonTaprootFields$1(_),A=hasNonTaprootFields$1(v)&&isTaprootOutput$1(_),P=v===_&&isTaprootOutput$1(_)&&hasNonTaprootFields$1(_);if(E||A||P)throw new Error(`Invalid arguments for Psbt.${x}. Cannot use both taproot and non-taproot fields.`)}function checkIfTapLeafInTree$1(v,_,x){if(_.tapMerkleRoot){const E=(_.tapLeafScript||[]).every(P=>isTapLeafInTree$1(P,_.tapMerkleRoot)),A=(v.tapLeafScript||[]).every(P=>isTapLeafInTree$1(P,_.tapMerkleRoot));if(!E||!A)throw new Error(`Invalid arguments for Psbt.${x}. Tapleaf not part of taptree.`)}else if(v.tapMerkleRoot&&!(_.tapLeafScript||[]).every(A=>isTapLeafInTree$1(A,v.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${x}. Tapleaf not part of taptree.`)}function isTapLeafInTree$1(v,_){if(!_)return!0;const x=(0,bip341_1$4.tapleafHash)({output:v.script,version:v.leafVersion});return(0,bip341_1$4.rootHashFromPath)(v.controlBlock,x).equals(_)}function sortSignatures$1(v,_){const x=(0,bip341_1$4.tapleafHash)({output:_.script,version:_.leafVersion});return(v.tapScriptSig||[]).filter(E=>E.leafHash.equals(x)).map(E=>addPubkeyPositionInScript$1(_.script,E)).sort((E,A)=>A.positionInScript-E.positionInScript).map(E=>E.signature)}function addPubkeyPositionInScript$1(v,_){return Object.assign({positionInScript:(0,psbtutils_1$3.pubkeyPositionInScript)(_.pubkey,v)},_)}function findTapLeafToFinalize$1(v,_,x){if(!v.tapScriptSig||!v.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${_}. No tapleaf script signature provided.`);const E=(v.tapLeafScript||[]).sort((A,P)=>A.controlBlock.length-P.controlBlock.length).find(A=>canFinalizeLeaf$1(A,v.tapScriptSig,x));if(!E)throw new Error(`Can not finalize taproot input #${_}. Signature for tapleaf script not found.`);return E}function canFinalizeLeaf$1(v,_,x){const E=(0,bip341_1$4.tapleafHash)({output:v.script,version:v.leafVersion});return(!x||x.equals(E))&&_.find(P=>P.leafHash.equals(E))!==void 0}function hasNonTaprootFields$1(v){return v&&!!(v.redeemScript||v.witnessScript||v.bip32Derivation&&v.bip32Derivation.length)}var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$3(_,v,x);return __setModuleDefault$3(_,v),_};Object.defineProperty(psbt$3,"__esModule",{value:!0}),psbt$3.Psbt=void 0;const psbt_1=psbt$2,varuint$8=__importStar$3(varint$1),utils_1$3=utils$5,address_1$1=address$1,bufferutils_1$3=bufferutils$1,networks_1$9=networks$3,payments$5=__importStar$3(payments$8),bip341_1$3=bip341$1,bscript$c=__importStar$3(script$1),transaction_1$5=transaction$1,bip371_1$1=bip371$1,psbtutils_1$2=psbtutils$1,crypto_lib_1$5=requireDist$1(),script_1$1=script$1,taproot_1=taproot$1,schnorr$1=crypto_lib_1$5.signUtil.schnorr.secp256k1.schnorr,DEFAULT_OPTS$1={network:networks_1$9.bitcoin,maximumFeeRate:5e3};let Psbt$2=class qt{static fromBase64(_,x={}){const E=dist$4.Buffer.from(_,"base64");return this.fromBuffer(E,x)}static fromHex(_,x={}){const E=dist$4.Buffer.from(_,"hex");return this.fromBuffer(E,x)}static fromBuffer(_,x={}){const E=psbt_1.Psbt.fromBuffer(_,transactionFromBuffer$1),A=new qt(x,E);return checkTxForDupeIns$1(A.__CACHE.__TX,A.__CACHE),A}constructor(_={},x=new psbt_1.Psbt(new PsbtTransaction$1)){this.data=x,this.opts=Object.assign({},DEFAULT_OPTS$1,_),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);const E=(A,P,T,O)=>Object.defineProperty(A,P,{enumerable:T,writable:O});E(this,"__CACHE",!1,!0),E(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(_){this.setVersion(_)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(_){this.setLocktime(_)}get txInputs(){return this.__CACHE.__TX.ins.map(_=>({hash:(0,bufferutils_1$3.cloneBuffer)(_.hash),index:_.index,sequence:_.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(_=>{let x;try{x=(0,address_1$1.fromOutputScript)(_.script,this.opts.network)}catch{}return{script:(0,bufferutils_1$3.cloneBuffer)(_.script),value:_.value,address:x}})}combine(..._){return this.data.combine(..._.map(x=>x.data)),this}clone(){const _=qt.fromBuffer(this.data.toBuffer());return _.opts=JSON.parse(JSON.stringify(this.opts)),_}setMaximumFeeRate(_){check32Bit$1(_),this.opts.maximumFeeRate=_}setVersion(_){check32Bit$1(_),checkInputsForPartialSig$1(this.data.inputs,"setVersion");const x=this.__CACHE;return x.__TX.version=_,x.__EXTRACTED_TX=void 0,this}setLocktime(_){check32Bit$1(_),checkInputsForPartialSig$1(this.data.inputs,"setLocktime");const x=this.__CACHE;return x.__TX.locktime=_,x.__EXTRACTED_TX=void 0,this}setInputSequence(_,x){check32Bit$1(x),checkInputsForPartialSig$1(this.data.inputs,"setInputSequence");const E=this.__CACHE;if(E.__TX.ins.length<=_)throw new Error("Input index too high");return E.__TX.ins[_].sequence=x,E.__EXTRACTED_TX=void 0,this}addInputs(_){return _.forEach(x=>this.addInput(x)),this}addInput(_){if(arguments.length>1||!_||_.hash===void 0||_.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,bip371_1$1.checkTaprootInputFields)(_,_,"addInput"),checkInputsForPartialSig$1(this.data.inputs,"addInput"),_.witnessScript&&checkInvalidP2WSH$1(_.witnessScript);const x=this.__CACHE;this.data.addInput(_);const E=x.__TX.ins[x.__TX.ins.length-1];checkTxInputCache$1(x,E);const A=this.data.inputs.length-1,P=this.data.inputs[A];return P.nonWitnessUtxo&&addNonWitnessTxCache$1(this.__CACHE,P,A),x.__FEE=void 0,x.__FEE_RATE=void 0,x.__EXTRACTED_TX=void 0,this}addOutputs(_){return _.forEach(x=>this.addOutput(x)),this}addOutput(_){if(arguments.length>1||!_||_.value===void 0||_.address===void 0&&_.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig$1(this.data.inputs,"addOutput");const{address:x}=_;if(typeof x=="string"){const{network:A}=this.opts,P=(0,address_1$1.toOutputScript)(x,A);_=Object.assign(_,{script:P})}(0,bip371_1$1.checkTaprootOutputFields)(_,_,"addOutput");const E=this.__CACHE;return this.data.addOutput(_),E.__FEE=void 0,E.__FEE_RATE=void 0,E.__EXTRACTED_TX=void 0,this}extractTransaction(_){if(!this.data.inputs.every(isFinalized$1))throw new Error("Not finalized");const x=this.__CACHE;if(_||checkFees$1(this,x,this.opts),x.__EXTRACTED_TX)return x.__EXTRACTED_TX;const E=x.__TX.clone();return inputFinalizeGetAmts$1(this.data.inputs,E,x,!0),E}getFeeRate(){return getTxCacheValue$1("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue$1("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,utils_1$3.checkForInput)(this.data.inputs,0),range$3(this.data.inputs.length).forEach(_=>this.finalizeInput(_)),this}finalizeInput(_,x){const E=(0,utils_1$3.checkForInput)(this.data.inputs,_);return(0,bip371_1$1.isTaprootInput)(E)?this._finalizeTaprootInput(_,E,void 0,x):this._finalizeInput(_,E,x)}finalizeTaprootInput(_,x,E=bip371_1$1.tapScriptFinalizer){const A=(0,utils_1$3.checkForInput)(this.data.inputs,_);if((0,bip371_1$1.isTaprootInput)(A))return this._finalizeTaprootInput(_,A,x,E);throw new Error(`Cannot finalize input #${_}. Not Taproot.`)}_finalizeInput(_,x,E=getFinalScripts$1){const{script:A,isP2SH:P,isP2WSH:T,isSegwit:O}=getScriptFromInput$1(_,x,this.__CACHE);if(!A)throw new Error(`No script found for input #${_}`);checkPartialSigSighashes$1(x);const{finalScriptSig:k,finalScriptWitness:C}=E(_,x,A,O,P,T);if(k&&this.data.updateInput(_,{finalScriptSig:k}),C&&this.data.updateInput(_,{finalScriptWitness:C}),!k&&!C)throw new Error(`Unknown error finalizing input #${_}`);return this.data.clearFinalizedInput(_),this}_finalizeTaprootInput(_,x,E,A=bip371_1$1.tapScriptFinalizer){if(!x.witnessUtxo)throw new Error(`Cannot finalize input #${_}. Missing withness utxo.`);if(x.tapKeySig){const P=payments$5.p2tr({output:x.witnessUtxo.script,signature:x.tapKeySig}),T=(0,psbtutils_1$2.witnessStackToScriptWitness)(P.witness);this.data.updateInput(_,{finalScriptWitness:T})}else{const{finalScriptWitness:P}=A(_,x,E);this.data.updateInput(_,{finalScriptWitness:P})}return this.data.clearFinalizedInput(_),this}getInputType(_){const x=(0,utils_1$3.checkForInput)(this.data.inputs,_),E=getScriptFromUtxo$1(_,x,this.__CACHE),A=getMeaningfulScript$1(E,_,"input",x.redeemScript||redeemFromFinalScriptSig$1(x.finalScriptSig),x.witnessScript||redeemFromFinalWitnessScript$1(x.finalScriptWitness)),P=A.type==="raw"?"":A.type+"-",T=classifyScript$1(A.meaningfulScript);return P+T}inputHasPubkey(_,x){const E=(0,utils_1$3.checkForInput)(this.data.inputs,_);return pubkeyInInput$1(x,E,_,this.__CACHE)}inputHasHDKey(_,x){const E=(0,utils_1$3.checkForInput)(this.data.inputs,_),A=bip32DerivationIsMine$1(x);return!!E.bip32Derivation&&E.bip32Derivation.some(A)}outputHasPubkey(_,x){const E=(0,utils_1$3.checkForOutput)(this.data.outputs,_);return pubkeyInOutput$1(x,E,_,this.__CACHE)}outputHasHDKey(_,x){const E=(0,utils_1$3.checkForOutput)(this.data.outputs,_),A=bip32DerivationIsMine$1(x);return!!E.bip32Derivation&&E.bip32Derivation.some(A)}validateSignaturesOfAllInputs(_){return(0,utils_1$3.checkForInput)(this.data.inputs,0),range$3(this.data.inputs.length).map(E=>this.validateSignaturesOfInput(E,_)).reduce((E,A)=>A===!0&&E,!0)}validateSignaturesOfInput(_,x,E){const A=this.data.inputs[_];return(0,bip371_1$1.isTaprootInput)(A)?this.validateSignaturesOfTaprootInput(_,x,E):this._validateSignaturesOfInput(_,x,E)}_validateSignaturesOfInput(_,x,E){const A=this.data.inputs[_],P=(A||{}).partialSig;if(!A||!P||P.length<1)throw new Error("No signatures to validate");if(typeof x!="function")throw new Error("Need validator function to validate signatures");const T=E?P.filter(N=>N.pubkey.equals(E)):P;if(T.length<1)throw new Error("No signatures for this pubkey");const O=[];let k,C,U;for(const N of T){const H=bscript$c.signature.decode(N.signature),{hash:D,script:j}=U!==H.hashType?getHashForSig$1(_,Object.assign({},A,{sighashType:H.hashType}),this.__CACHE,!0):{hash:k,script:C};U=H.hashType,k=D,C=j,checkScriptForPubkey$1(N.pubkey,j,"verify"),O.push(x(N.pubkey,D,H.signature))}return O.every(N=>N===!0)}validateSignaturesOfTaprootInput(_,x,E){const A=this.data.inputs[_],P=(A||{}).tapKeySig,T=(A||{}).tapScriptSig;if(!A&&!P&&!(T&&!T.length))throw new Error("No signatures to validate");if(typeof x!="function")throw new Error("Need validator function to validate signatures");E=E&&(0,bip371_1$1.toXOnly)(E);const O=E?getTaprootHashesForSig$1(_,A,this.data.inputs,E,this.__CACHE):getAllTaprootHashesForSig$1(_,A,this.data.inputs,this.__CACHE);if(!O.length)throw new Error("No signatures for this pubkey");const k=O.find(C=>!!C.leafHash);if(P&&k&&!x(k.pubkey,k.hash,P))return!1;if(T)for(const C of T){const U=O.find(N=>C.pubkey.equals(N.pubkey));if(U&&!x(C.pubkey,U.hash,C.signature))return!1}return!0}signAllInputsHD(_,x=[transaction_1$5.Transaction.SIGHASH_ALL]){if(!_||!_.publicKey||!_.fingerprint)throw new Error("Need HDSigner to sign input");const E=[];for(const A of range$3(this.data.inputs.length))try{this.signInputHD(A,_,x),E.push(!0)}catch{E.push(!1)}if(E.every(A=>A===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(_,x=[transaction_1$5.Transaction.SIGHASH_ALL]){return new Promise((E,A)=>{if(!_||!_.publicKey||!_.fingerprint)return A(new Error("Need HDSigner to sign input"));const P=[],T=[];for(const O of range$3(this.data.inputs.length))T.push(this.signInputHDAsync(O,_,x).then(()=>{P.push(!0)},()=>{P.push(!1)}));return Promise.all(T).then(()=>{if(P.every(O=>O===!1))return A(new Error("No inputs were signed"));E()})})}signInputHD(_,x,E=[transaction_1$5.Transaction.SIGHASH_ALL]){if(!x||!x.publicKey||!x.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD$1(_,this.data.inputs,x).forEach(P=>this.signInput(_,P,E)),this}signInputHDAsync(_,x,E=[transaction_1$5.Transaction.SIGHASH_ALL]){return new Promise((A,P)=>{if(!x||!x.publicKey||!x.fingerprint)return P(new Error("Need HDSigner to sign input"));const O=getSignersFromHD$1(_,this.data.inputs,x).map(k=>this.signInputAsync(_,k,E));return Promise.all(O).then(()=>{A()}).catch(P)})}signAllInputs(_,x){if(!_||!_.publicKey)throw new Error("Need Signer to sign input");const E=[];for(const A of range$3(this.data.inputs.length))try{this.signInput(A,_,x),E.push(!0)}catch{E.push(!1)}if(E.every(A=>A===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(_,x){return new Promise((E,A)=>{if(!_||!_.publicKey)return A(new Error("Need Signer to sign input"));const P=[],T=[];for(const[O]of this.data.inputs.entries())T.push(this.signInputAsync(O,_,x).then(()=>{P.push(!0)},()=>{P.push(!1)}));return Promise.all(T).then(()=>{if(P.every(O=>O===!1))return A(new Error("No inputs were signed"));E()})})}signInput(_,x,E){if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const A=(0,utils_1$3.checkForInput)(this.data.inputs,_);return(0,bip371_1$1.isTaprootInput)(A)?this._signTaprootInput(_,A,x,void 0,E):this._signInput(_,x,E)}signTaprootInput(_,x,E,A){if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const P=(0,utils_1$3.checkForInput)(this.data.inputs,_);if((0,bip371_1$1.isTaprootInput)(P))return this._signTaprootInput(_,P,x,E,A);throw new Error(`Input #${_} is not of type Taproot.`)}_signInput(_,x,E=[transaction_1$5.Transaction.SIGHASH_ALL]){const{hash:A,sighashType:P}=getHashAndSighashType$1(this.data.inputs,_,x.publicKey,this.__CACHE,E),T=[{pubkey:x.publicKey,signature:bscript$c.signature.encode(x.sign(A),P)}];return this.data.updateInput(_,{partialSig:T}),this}_signTaprootInput(_,x,E,A,P=[transaction_1$5.Transaction.SIGHASH_DEFAULT]){const T=this.checkTaprootHashesForSig(_,x,E,A,P),O=T.filter(C=>!C.leafHash).map(C=>(0,bip371_1$1.serializeTaprootSignature)(E.signSchnorr(C.hash),x.sighashType))[0],k=T.filter(C=>!!C.leafHash).map(C=>({pubkey:(0,bip371_1$1.toXOnly)(E.publicKey),signature:(0,bip371_1$1.serializeTaprootSignature)(E.signSchnorr(C.hash),x.sighashType),leafHash:C.leafHash}));return O&&this.data.updateInput(_,{tapKeySig:O}),k.length&&this.data.updateInput(_,{tapScriptSig:k}),this}signInputAsync(_,x,E){return Promise.resolve().then(()=>{if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const A=(0,utils_1$3.checkForInput)(this.data.inputs,_);return(0,bip371_1$1.isTaprootInput)(A)?this._signTaprootInputAsync(_,A,x,void 0,E):this._signInputAsync(_,x,E)})}signTaprootInputAsync(_,x,E,A){return Promise.resolve().then(()=>{if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const P=(0,utils_1$3.checkForInput)(this.data.inputs,_);if((0,bip371_1$1.isTaprootInput)(P))return this._signTaprootInputAsync(_,P,x,E,A);throw new Error(`Input #${_} is not of type Taproot.`)})}_signInputAsync(_,x,E=[transaction_1$5.Transaction.SIGHASH_ALL]){const{hash:A,sighashType:P}=getHashAndSighashType$1(this.data.inputs,_,x.publicKey,this.__CACHE,E);return Promise.resolve(x.sign(A)).then(T=>{const O=[{pubkey:x.publicKey,signature:bscript$c.signature.encode(T,P)}];this.data.updateInput(_,{partialSig:O})})}async _signTaprootInputAsync(_,x,E,A,P=[transaction_1$5.Transaction.SIGHASH_DEFAULT]){const T=this.checkTaprootHashesForSig(_,x,E,A,P),O=[],k=T.filter(U=>!U.leafHash)[0];if(k){const U=Promise.resolve(E.signSchnorr(k.hash)).then(N=>({tapKeySig:(0,bip371_1$1.serializeTaprootSignature)(N,x.sighashType)}));O.push(U)}const C=T.filter(U=>!!U.leafHash);if(C.length){const U=C.map(N=>Promise.resolve(E.signSchnorr(N.hash)).then(H=>({tapScriptSig:[{pubkey:(0,bip371_1$1.toXOnly)(E.publicKey),signature:(0,bip371_1$1.serializeTaprootSignature)(H,x.sighashType),leafHash:N.leafHash}]})));O.push(...U)}return Promise.all(O).then(U=>{U.forEach(N=>this.data.updateInput(_,N))})}checkTaprootHashesForSig(_,x,E,A,P){if(typeof E.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${_}.`);const T=getTaprootHashesForSig$1(_,x,this.data.inputs,E.publicKey,this.__CACHE,A,P);if(!T||!T.length)throw new Error(`Can not sign for input #${_} with the key ${E.publicKey.toString("hex")}`);return T}toBuffer(){return checkCache$1(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache$1(this.__CACHE),this.data.toHex()}toBase64(){return checkCache$1(this.__CACHE),this.data.toBase64()}updateGlobal(_){return this.data.updateGlobal(_),this}updateInput(_,x){return x.witnessScript&&checkInvalidP2WSH$1(x.witnessScript),(0,bip371_1$1.checkTaprootInputFields)(this.data.inputs[_],x,"updateInput"),this.data.updateInput(_,x),x.nonWitnessUtxo&&addNonWitnessTxCache$1(this.__CACHE,this.data.inputs[_],_),this}updateOutput(_,x){const E=this.data.outputs[_];return(0,bip371_1$1.checkTaprootOutputFields)(E,x,"updateOutput"),this.data.updateOutput(_,x),this}addUnknownKeyValToGlobal(_){return this.data.addUnknownKeyValToGlobal(_),this}addUnknownKeyValToInput(_,x){return this.data.addUnknownKeyValToInput(_,x),this}addUnknownKeyValToOutput(_,x){return this.data.addUnknownKeyValToOutput(_,x),this}clearFinalizedInput(_){return this.data.clearFinalizedInput(_),this}verify(_,x){const E=[transaction_1$5.Transaction.SIGHASH_SINGLE|transaction_1$5.Transaction.SIGHASH_ANYONECANPAY,transaction_1$5.Transaction.SIGHASH_ALL,transaction_1$5.Transaction.SIGHASH_DEFAULT];for(let A=0;A<this.inputCount;A++)if((0,bip371_1$1.isTaprootInput)(this.data.inputs[A])){const P=dist$4.Buffer.from((0,taproot_1.taprootTweakPubkey)(_.slice(1))[0]),O=new bufferutils_1$3.BufferReader(x).readVector(),k={publicKey:P,sign(N){return dist$4.Buffer.alloc(64)},signSchnorr(N){return dist$4.Buffer.alloc(64)}},U=this.checkTaprootHashesForSig(A,this.data.inputs[A],k,void 0,E).filter(N=>!N.leafHash)[0].hash;if(!schnorr$1.verify(crypto_lib_1$5.base.toHex(O[0]),crypto_lib_1$5.base.toHex(U),crypto_lib_1$5.base.toHex(P)))return!1}else{const{hash:P}=getHashAndSighashType$1(this.data.inputs,A,_,this.__CACHE,E),O=new bufferutils_1$3.BufferReader(x).readVector(),k=script_1$1.signature.decode(O[0]).signature,C=O[1];if(!_.equals(C))throw Error("pubKey error");if(!crypto_lib_1$5.signUtil.secp256k1.verifyWithNoRecovery(P,k,_))return!1}return!0}};psbt$3.Psbt=Psbt$2;const transactionFromBuffer$1=v=>new PsbtTransaction$1(v);let PsbtTransaction$1=class{constructor(_=dist$4.Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=transaction_1$5.Transaction.fromBuffer(_),checkTxEmpty$1(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(_){if(_.hash===void 0||_.index===void 0||!dist$4.Buffer.isBuffer(_.hash)&&typeof _.hash!="string"||typeof _.index!="number")throw new Error("Error adding input.");const x=typeof _.hash=="string"?(0,bufferutils_1$3.reverseBuffer)(dist$4.Buffer.from(_.hash,"hex")):_.hash;this.tx.addInput(x,_.index,_.sequence)}addOutput(_){if(_.script===void 0||_.value===void 0||!dist$4.Buffer.isBuffer(_.script)||typeof _.value!="number")throw new Error("Error adding output.");this.tx.addOutput(_.script,_.value)}toBuffer(){return this.tx.toBuffer()}};function canFinalize$1(v,_,x){switch(x){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs$1(1,v.partialSig);case"multisig":const E=payments$5.p2ms({output:_});return hasSigs$1(E.m,v.partialSig,E.pubkeys);default:return!1}}function checkCache$1(v){if(v.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function hasSigs$1(v,_,x){if(!_)return!1;let E;if(x?E=x.map(A=>{const P=compressPubkey$1(A);return _.find(T=>T.pubkey.equals(P))}).filter(A=>!!A):E=_,E.length>v)throw new Error("Too many signatures");return E.length===v}function isFinalized$1(v){return!!v.finalScriptSig||!!v.finalScriptWitness}function bip32DerivationIsMine$1(v){return _=>!(!_.masterFingerprint.equals(v.fingerprint)||!v.derivePath(_.path).publicKey.equals(_.pubkey))}function check32Bit$1(v){if(typeof v!="number"||v!==Math.floor(v)||v>4294967295||v<0)throw new Error("Invalid 32 bit integer")}function checkFees$1(v,_,x){const E=_.__FEE_RATE||v.getFeeRate(),A=_.__EXTRACTED_TX.virtualSize(),P=E*A;if(E>=x.maximumFeeRate)throw new Error(`Warning: You are paying around ${(P/1e8).toFixed(8)} in fees, which is ${E} satoshi per byte for a transaction with a VSize of ${A} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function checkInputsForPartialSig$1(v,_){v.forEach(x=>{if((0,bip371_1$1.isTaprootInput)(x)?(0,bip371_1$1.checkTaprootInputForSigs)(x,_):(0,psbtutils_1$2.checkInputForSig)(x,_))throw new Error("Can not modify transaction, signatures exist.")})}function checkPartialSigSighashes$1(v){if(!v.sighashType||!v.partialSig)return;const{partialSig:_,sighashType:x}=v;_.forEach(E=>{const{hashType:A}=bscript$c.signature.decode(E.signature);if(x!==A)throw new Error("Signature sighash does not match input sighash type")})}function checkScriptForPubkey$1(v,_,x){if(!(0,psbtutils_1$2.pubkeyInScript)(v,_))throw new Error(`Can not ${x} for this input with the key ${v.toString("hex")}`)}function checkTxEmpty$1(v){if(!v.ins.every(x=>x.script&&x.script.length===0&&x.witness&&x.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function checkTxForDupeIns$1(v,_){v.ins.forEach(x=>{checkTxInputCache$1(_,x)})}function checkTxInputCache$1(v,_){const x=(0,bufferutils_1$3.reverseBuffer)(dist$4.Buffer.from(_.hash)).toString("hex")+":"+_.index;if(v.__TX_IN_CACHE[x])throw new Error("Duplicate input detected.");v.__TX_IN_CACHE[x]=1}function scriptCheckerFactory$1(v,_){return(x,E,A,P)=>{const T=v({redeem:{output:A}}).output;if(!E.equals(T))throw new Error(`${_} for ${P} #${x} doesn't match the scriptPubKey in the prevout`)}}const checkRedeemScript$1=scriptCheckerFactory$1(payments$5.p2sh,"Redeem script"),checkWitnessScript$1=scriptCheckerFactory$1(payments$5.p2wsh,"Witness script");function getTxCacheValue$1(v,_,x,E){if(!x.every(isFinalized$1))throw new Error(`PSBT must be finalized to calculate ${_}`);if(v==="__FEE_RATE"&&E.__FEE_RATE)return E.__FEE_RATE;if(v==="__FEE"&&E.__FEE)return E.__FEE;let A,P=!0;if(E.__EXTRACTED_TX?(A=E.__EXTRACTED_TX,P=!1):A=E.__TX.clone(),inputFinalizeGetAmts$1(x,A,E,P),v==="__FEE_RATE")return E.__FEE_RATE;if(v==="__FEE")return E.__FEE}function getFinalScripts$1(v,_,x,E,A,P){const T=classifyScript$1(x);if(!canFinalize$1(_,x,T))throw new Error(`Can not finalize input #${v}`);return prepareFinalScripts$1(x,T,_.partialSig,E,A,P)}function prepareFinalScripts$1(v,_,x,E,A,P){let T,O;const k=getPayment$1(v,_,x),C=P?payments$5.p2wsh({redeem:k}):null,U=A?payments$5.p2sh({redeem:C||k}):null;return E?(C?O=(0,psbtutils_1$2.witnessStackToScriptWitness)(C.witness):O=(0,psbtutils_1$2.witnessStackToScriptWitness)(k.witness),U&&(T=U.input)):U?T=U.input:T=k.input,{finalScriptSig:T,finalScriptWitness:O}}function getHashAndSighashType$1(v,_,x,E,A){const P=(0,utils_1$3.checkForInput)(v,_),{hash:T,sighashType:O,script:k}=getHashForSig$1(_,P,E,!1,A);return checkScriptForPubkey$1(x,k,"sign"),{hash:T,sighashType:O}}function getHashForSig$1(v,_,x,E,A){const P=x.__TX,T=_.sighashType||transaction_1$5.Transaction.SIGHASH_ALL;checkSighashTypeAllowed$1(T,A);let O,k;if(_.nonWitnessUtxo){const N=nonWitnessUtxoTxFromCache$1(x,_,v),H=P.ins[v].hash,D=N.getHash();if(!H.equals(D))throw new Error(`Non-witness UTXO hash for input #${v} doesn't match the hash specified in the prevout`);const j=P.ins[v].index;k=N.outs[j]}else if(_.witnessUtxo)k=_.witnessUtxo;else throw new Error("Need a Utxo input item for signing");const{meaningfulScript:C,type:U}=getMeaningfulScript$1(k.script,v,"input",_.redeemScript,_.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(U)>=0)O=P.hashForWitnessV0(v,C,k.value,T);else if((0,psbtutils_1$2.isP2WPKH)(C)){const N=payments$5.p2pkh({hash:C.slice(2)}).output;O=P.hashForWitnessV0(v,N,k.value,T)}else{if(_.nonWitnessUtxo===void 0&&x.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${v} has witnessUtxo but non-segwit script: ${C.toString("hex")}`);!E&&x.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),O=P.hashForSignature(v,C,T)}return{script:C,sighashType:T,hash:O}}function getAllTaprootHashesForSig$1(v,_,x,E){const A=[];if(_.tapInternalKey){const T=(0,bip371_1$1.tweakInternalPubKey)(v,_);A.push(T)}if(_.tapScriptSig){const T=_.tapScriptSig.map(O=>O.pubkey);A.push(...T)}return A.map(T=>getTaprootHashesForSig$1(v,_,x,T,E)).flat()}function getTaprootHashesForSig$1(v,_,x,E,A,P,T){const O=A.__TX,k=_.sighashType||transaction_1$5.Transaction.SIGHASH_DEFAULT;checkSighashTypeAllowed$1(k,T);const C=x.map((j,V)=>getScriptAndAmountFromUtxo$1(V,j,A)),U=C.map(j=>j.script),N=C.map(j=>j.value),H=[];if(_.tapInternalKey&&!P){const j=(0,bip371_1$1.tweakInternalPubKey)(v,_);if((0,bip371_1$1.toXOnly)(E).equals(j)){const V=O.hashForWitnessV1(v,U,N,k);H.push({pubkey:E,hash:V})}}const D=(_.tapLeafScript||[]).filter(j=>(0,psbtutils_1$2.pubkeyInScript)(E,j.script)).map(j=>{const V=(0,bip341_1$3.tapleafHash)({output:j.script,version:j.leafVersion});return Object.assign({hash:V},j)}).filter(j=>!P||P.equals(j.hash)).map(j=>{const V=O.hashForWitnessV1(v,U,N,transaction_1$5.Transaction.SIGHASH_DEFAULT,j.hash);return{pubkey:E,hash:V,leafHash:j.hash}});return H.concat(D)}function checkSighashTypeAllowed$1(v,_){if(_&&_.indexOf(v)<0){const x=sighashTypeToString$1(v);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${x}`)}}function getPayment$1(v,_,x){let E;switch(_){case"multisig":const A=getSortedSigs$1(v,x);E=payments$5.p2ms({output:v,signatures:A});break;case"pubkey":E=payments$5.p2pk({output:v,signature:x[0].signature});break;case"pubkeyhash":E=payments$5.p2pkh({output:v,pubkey:x[0].pubkey,signature:x[0].signature});break;case"witnesspubkeyhash":E=payments$5.p2wpkh({output:v,pubkey:x[0].pubkey,signature:x[0].signature});break}return E}function getScriptFromInput$1(v,_,x){const E=x.__TX,A={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(A.isP2SH=!!_.redeemScript,A.isP2WSH=!!_.witnessScript,_.witnessScript)A.script=_.witnessScript;else if(_.redeemScript)A.script=_.redeemScript;else if(_.nonWitnessUtxo){const P=nonWitnessUtxoTxFromCache$1(x,_,v),T=E.ins[v].index;A.script=P.outs[T].script}else _.witnessUtxo&&(A.script=_.witnessUtxo.script);return(_.witnessScript||(0,psbtutils_1$2.isP2WPKH)(A.script))&&(A.isSegwit=!0),A}function getSignersFromHD$1(v,_,x){const E=(0,utils_1$3.checkForInput)(_,v);if(!E.bip32Derivation||E.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");const A=E.bip32Derivation.map(T=>{if(T.masterFingerprint.equals(x.fingerprint))return T}).filter(T=>!!T);if(A.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return A.map(T=>{const O=x.derivePath(T.path);if(!T.pubkey.equals(O.publicKey))throw new Error("pubkey did not match bip32Derivation");return O})}function getSortedSigs$1(v,_){return payments$5.p2ms({output:v}).pubkeys.map(E=>(_.filter(A=>A.pubkey.equals(E))[0]||{}).signature).filter(E=>!!E)}function scriptWitnessToWitnessStack$1(v){let _=0;function x(T){return _+=T,v.slice(_-T,_)}function E(){const T=varuint$8.decode(v,_);return _+=varuint$8.decode.bytes,T}function A(){return x(E())}function P(){const T=E(),O=[];for(let k=0;k<T;k++)O.push(A());return O}return P()}function sighashTypeToString$1(v){let _=v&transaction_1$5.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(v&31){case transaction_1$5.Transaction.SIGHASH_ALL:_+="SIGHASH_ALL";break;case transaction_1$5.Transaction.SIGHASH_SINGLE:_+="SIGHASH_SINGLE";break;case transaction_1$5.Transaction.SIGHASH_NONE:_+="SIGHASH_NONE";break}return _}function addNonWitnessTxCache$1(v,_,x){v.__NON_WITNESS_UTXO_BUF_CACHE[x]=_.nonWitnessUtxo;const E=transaction_1$5.Transaction.fromBuffer(_.nonWitnessUtxo);v.__NON_WITNESS_UTXO_TX_CACHE[x]=E;const A=v,P=x;delete _.nonWitnessUtxo,Object.defineProperty(_,"nonWitnessUtxo",{enumerable:!0,get(){const T=A.__NON_WITNESS_UTXO_BUF_CACHE[P],O=A.__NON_WITNESS_UTXO_TX_CACHE[P];if(T!==void 0)return T;{const k=O.toBuffer();return A.__NON_WITNESS_UTXO_BUF_CACHE[P]=k,k}},set(T){A.__NON_WITNESS_UTXO_BUF_CACHE[P]=T}})}function inputFinalizeGetAmts$1(v,_,x,E){let A=0;v.forEach((k,C)=>{if(E&&k.finalScriptSig&&(_.ins[C].script=k.finalScriptSig),E&&k.finalScriptWitness&&(_.ins[C].witness=scriptWitnessToWitnessStack$1(k.finalScriptWitness)),k.witnessUtxo)A+=k.witnessUtxo.value;else if(k.nonWitnessUtxo){const U=nonWitnessUtxoTxFromCache$1(x,k,C),N=_.ins[C].index,H=U.outs[N];A+=H.value}});const P=_.outs.reduce((k,C)=>k+C.value,0),T=A-P;if(T<0)throw new Error("Outputs are spending more than Inputs");const O=_.virtualSize();x.__FEE=T,x.__EXTRACTED_TX=_,x.__FEE_RATE=Math.floor(T/O)}function nonWitnessUtxoTxFromCache$1(v,_,x){const E=v.__NON_WITNESS_UTXO_TX_CACHE;return E[x]||addNonWitnessTxCache$1(v,_,x),E[x]}function getScriptFromUtxo$1(v,_,x){const{script:E}=getScriptAndAmountFromUtxo$1(v,_,x);return E}function getScriptAndAmountFromUtxo$1(v,_,x){if(_.witnessUtxo!==void 0)return{script:_.witnessUtxo.script,value:_.witnessUtxo.value};if(_.nonWitnessUtxo!==void 0){const A=nonWitnessUtxoTxFromCache$1(x,_,v).outs[x.__TX.ins[v].index];return{script:A.script,value:A.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function pubkeyInInput$1(v,_,x,E){const A=getScriptFromUtxo$1(x,_,E),{meaningfulScript:P}=getMeaningfulScript$1(A,x,"input",_.redeemScript,_.witnessScript);return(0,psbtutils_1$2.pubkeyInScript)(v,P)}function pubkeyInOutput$1(v,_,x,E){const A=E.__TX.outs[x].script,{meaningfulScript:P}=getMeaningfulScript$1(A,x,"output",_.redeemScript,_.witnessScript);return(0,psbtutils_1$2.pubkeyInScript)(v,P)}function redeemFromFinalScriptSig$1(v){if(!v)return;const _=bscript$c.decompile(v);if(!_)return;const x=_[_.length-1];if(!(!dist$4.Buffer.isBuffer(x)||isPubkeyLike$1(x)||isSigLike$1(x)||!bscript$c.decompile(x)))return x}function redeemFromFinalWitnessScript$1(v){if(!v)return;const _=scriptWitnessToWitnessStack$1(v),x=_[_.length-1];if(!(isPubkeyLike$1(x)||!bscript$c.decompile(x)))return x}function compressPubkey$1(v){if(v.length===65){const _=v[64]&1,x=v.slice(0,33);return x[0]=2|_,x}return v.slice()}function isPubkeyLike$1(v){return v.length===33&&bscript$c.isCanonicalPubKey(v)}function isSigLike$1(v){return bscript$c.isCanonicalScriptSignature(v)}function getMeaningfulScript$1(v,_,x,E,A){const P=(0,psbtutils_1$2.isP2SHScript)(v),T=P&&E&&(0,psbtutils_1$2.isP2WSHScript)(E),O=(0,psbtutils_1$2.isP2WSHScript)(v);if(P&&E===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((O||T)&&A===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let k;return T?(k=A,checkRedeemScript$1(_,v,E,x),checkWitnessScript$1(_,E,A,x),checkInvalidP2WSH$1(k)):O?(k=A,checkWitnessScript$1(_,v,A,x),checkInvalidP2WSH$1(k)):P?(k=E,checkRedeemScript$1(_,v,E,x)):k=v,{meaningfulScript:k,type:T?"p2sh-p2wsh":P?"p2sh":O?"p2wsh":"raw"}}function checkInvalidP2WSH$1(v){if((0,psbtutils_1$2.isP2WPKH)(v)||(0,psbtutils_1$2.isP2SHScript)(v))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function classifyScript$1(v){return(0,psbtutils_1$2.isP2WPKH)(v)?"witnesspubkeyhash":(0,psbtutils_1$2.isP2PKH)(v)?"pubkeyhash":(0,psbtutils_1$2.isP2MS)(v)?"multisig":(0,psbtutils_1$2.isP2PK)(v)?"pubkey":"nonstandard"}function range$3(v){return[...Array(v).keys()]}var psbtSign$1={},txBuild={},wif={};Object.defineProperty(wif,"__esModule",{value:!0}),wif.encode=wif.decode=wif.encodeRaw=wif.decodeRaw=void 0;const crypto_lib_1$4=requireDist$1();function decodeRaw(v,_){if(_!==void 0&&v[0]!==_)throw new Error("Invalid network version");if(v.length===33)return{version:v[0],privateKey:v.slice(1,33),compressed:!1};if(v.length!==34)throw new Error("Invalid WIF length");if(v[33]!==1)throw new Error("Invalid compression flag");return{version:v[0],privateKey:v.slice(1,33),compressed:!0}}wif.decodeRaw=decodeRaw;function encodeRaw(v,_,x){const E=dist$4.Buffer.alloc(x?34:33);return E.writeUInt8(v,0),_.copy(E,1),x&&(E[33]=1),E}wif.encodeRaw=encodeRaw;function decode$l(v,_){return decodeRaw(crypto_lib_1$4.base.fromBase58Check(v),_)}wif.decode=decode$l;function encode$o(v,_,x){return typeof v=="number"?crypto_lib_1$4.base.toBase58Check(encodeRaw(v,_,x)):crypto_lib_1$4.base.toBase58Check(encodeRaw(v.version,v.privateKey,v.compressed))}wif.encode=encode$o;var hasRequiredTxBuild;function requireTxBuild(){return hasRequiredTxBuild||(hasRequiredTxBuild=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(q,F,L,Z){Z===void 0&&(Z=L);var Q=Object.getOwnPropertyDescriptor(F,L);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[L]}}),Object.defineProperty(q,Z,Q)}:function(q,F,L,Z){Z===void 0&&(Z=L),q[Z]=F[L]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(q,F){Object.defineProperty(q,"default",{enumerable:!0,value:F})}:function(q,F){q.default=F}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(q){if(q&&q.__esModule)return q;var F={};if(q!=null)for(var L in q)L!=="default"&&Object.prototype.hasOwnProperty.call(q,L)&&_(F,q,L);return x(F,q),F};Object.defineProperty(v,"__esModule",{value:!0}),v.estimateBchFee=v.estimateBtcFee=v.ValidSignedTransaction=v.getMPCTransaction=v.signBch=v.getAddressType=v.signBtc=v.TxBuild=v.private2Wif=v.wif2Public=v.sign=v.private2public=v.privateKeyFromWIF=v.Array=void 0;const A=E(requireBitcoinjsLib()),P=requireDist$1(),T=requireDist$1(),O=E(wif),k=address$1,C=E(crypto$4),U=E(taproot$1),N=requireBitcoinjsLib(),H=E(script$1),D=T.signUtil.schnorr.secp256k1.schnorr;v.Array=P.typeforce.Array;function j(q,F){const L=O.decode(q),Z=L.version;if((0,v.Array)(F)){if(F=F.filter(Q=>Z===Q.wif).pop(),!F)throw new Error("Unknown network version")}else if(F=F||A.networks.bitcoin,Z!==F.wif)throw new Error("Invalid network version");return P.base.toHex(L.privateKey)}v.privateKeyFromWIF=j;function V(q){return T.signUtil.secp256k1.publicKeyCreate(P.base.fromHex(q),!0)}v.private2public=V;function X(q,F){const{signature:L}=T.signUtil.secp256k1.sign(q,P.base.fromHex(F));return dist$4.Buffer.from(L)}v.sign=X;function re(q,F){const L=j(q,F);return V(L)}v.wif2Public=re;function ee(q,F){return F=F||A.networks.bitcoin,O.encode(F.wif,q,!0)}v.private2Wif=ee;class fe{constructor(F,L,Z,Q){this.tx=new A.Transaction,this.network=A.networks.bitcoin,F?this.tx.version=F:this.tx.version=2,L&&(this.network=L),this.inputs=[],this.outputs=[],this.bitcoinCash=Z||!1,this.hardware=Q||!1}addInput(F,L,Z,Q,de,ye,oe,se){this.inputs.push({txId:F,index:L,privateKey:Z,address:Q,script:de,value:ye,publicKey:oe,sequence:se})}addOutput(F,L,Z){this.outputs.push({address:F,value:L,omniScript:Z})}build(F){const L=[];for(const Z of this.inputs){const Q=P.base.reverseBuffer(dist$4.Buffer.from(Z.txId,"hex"));this.tx.addInput(Q,Z.index,Z.sequence),Z.privateKey?L.push(j(Z.privateKey,this.network)):L.push("")}for(const Z of this.outputs)if(Z.omniScript)this.tx.addOutput(P.base.fromHex(Z.omniScript),0);else{const Q=A.address.toOutputScript(Z.address,this.network);this.tx.addOutput(Q,Z.value)}if(this.hardware)return this.tx.toHex();for(let Z=0;Z<L.length;Z++){const Q=L[Z];let de;Q?de=V(Q):this.hardware||(de=P.base.fromHex(this.inputs[Z].publicKey));let ye,oe=A.Transaction.SIGHASH_ALL;if(this.bitcoinCash){const se=A.payments.p2pkh({pubkey:de}).output;oe=A.Transaction.SIGHASH_ALL|A.Transaction.SIGHASH_BITCOINCASHBIP143;const Y=this.inputs[Z].value||0;ye=this.tx.hashForCashSignature(Z,se,Y,oe);let ce;F?(F.push(P.base.toHex(ye)),ce=dist$4.Buffer.alloc(64,0)):ce=X(ye,Q);const we=A.payments.p2pkh({output:se,pubkey:de,signature:A.script.signature.encode(ce,oe)});we.input&&(this.tx.ins[Z].script=we.input)}else{const se=pe(this.inputs[Z].address,this.network);if(se==="legacy"){const Y=A.payments.p2pkh({pubkey:de}).output;ye=this.tx.hashForSignature(Z,Y,oe);let ce;F?(F.push(P.base.toHex(ye)),ce=dist$4.Buffer.alloc(64,0)):ce=X(ye,Q);const we=A.payments.p2pkh({output:Y,pubkey:de,signature:A.script.signature.encode(ce,oe)});we.input&&(this.tx.ins[Z].script=we.input)}else if(se==="segwit_taproot"){const Y=this.inputs.map(Pe=>A.address.toOutputScript(Pe.address,this.network)),ce=this.inputs.map(Pe=>Pe.value);ye=this.tx.hashForWitnessV1(Z,Y,ce,A.Transaction.SIGHASH_DEFAULT);let we;if(F)F.push(P.base.toHex(ye)),we=dist$4.Buffer.alloc(64,0);else{const Pe=U.taprootTweakPrivKey(P.base.fromHex(Q));we=dist$4.Buffer.from(D.sign(ye,Pe,P.base.randomBytes(32)))}this.tx.ins[Z].witness=[dist$4.Buffer.from(we)]}else{const Y=C.hash160(de),ce=dist$4.Buffer.of(25,118,169,20,...Y,136,172),we=this.inputs[Z].value||0;ye=this.tx.hashForWitness(Z,ce,we,oe);let Pe;F?(F.push(P.base.toHex(ye)),Pe=dist$4.Buffer.alloc(64,0)):Pe=X(ye,Q),this.tx.ins[Z].witness=[],this.tx.ins[Z].witness.push(A.script.signature.encode(Pe,oe)),this.tx.ins[Z].witness.push(de);const Se=dist$4.Buffer.of(22,0,20,...Y);se!=="segwit_native"&&(this.tx.ins[Z].script=Se)}}}return this.tx.toHex()}}v.TxBuild=fe;function le(q,F,L,Z,Q,de){const ye=q.inputs,oe=q.outputs,se=q.address,Y=q.feePerB||10,ce=q.dustSize||546;L=L||A.networks.bitcoin;let we=F;if(we||(we=ee(P.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),L)),de){let{inputAmount:Me,outputAmount:xe,virtualSize:Ee}=he(ye,oe,se,we,L,ce);return(Me-xe-Ee*Y).toString()}let{inputAmount:Pe,outputAmount:Se,virtualSize:Be}=he(ye,oe,se,we,L,ce),Ie=Pe-Se-Be*Y,Re=new fe(2,L,!1,Q);for(let Me=0;Me<ye.length;Me++){let xe=ye[Me];const Ee=xe.privateKey||F,Ue=xe.address||se;Re.addInput(xe.txId,xe.vOut,Ee,Ue,xe.reedScript,xe.amount,xe.publicKey,xe.sequence)}for(let Me=0;Me<oe.length;Me++){let xe=oe[Me];Re.addOutput(xe.address,xe.amount,xe.omniScript)}return Ie>ce&&Re.addOutput(se,Ie),Re.build(Z)}v.signBtc=le;function pe(q,F){let L,Z;try{L=(0,k.fromBase58Check)(q)}catch{}if(L){if(L.version===F.pubKeyHash)return"legacy";if(L.version===F.scriptHash)return"segwit_nested"}else{try{Z=(0,k.fromBech32)(q)}catch{}if(Z){if(Z.prefix!==F.bech32)throw new Error(q+" has an invalid prefix");if(Z.version===0)return"segwit_native";if(Z.version===1)return"segwit_taproot"}}return"legacy"}v.getAddressType=pe;function ie(q,F,L,Z,Q){const de=q.inputs,ye=q.outputs,oe=q.address,se=q.feePerB||10,Y=q.dustSize||546;L=L||A.networks.bitcoin;let ce=F;ce||(ce=ee(P.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),L));let{inputAmount:we,outputAmount:Pe,virtualSize:Se}=ae(de,ye,oe,ce,L,Y),Be=we-Pe-Se*se,Ie=new fe(2,L,!0,Q);for(let Re=0;Re<de.length;Re++){let Me=de[Re];Ie.addInput(Me.txId,Me.vOut,F,oe,void 0,Me.amount,Me.publicKey,Me.sequence)}for(let Re=0;Re<ye.length;Re++){let Me=ye[Re];Ie.addOutput(Me.address,Me.amount)}return Be>Y&&Ie.addOutput(oe,Be),Ie.build(Z)}v.signBch=ie;function he(q,F,L,Z,Q,de,ye){let oe=new fe(2,Q,!1,ye),se=0;for(let Pe=0;Pe<q.length;Pe++){let Se=q[Pe];const Be=Se.privateKey||Z,Ie=Se.address||L;oe.addInput(Se.txId,Se.vOut,Be,Ie,Se.reedScript,Se.amount,Se.publicKey,Se.sequence),se=se+(Se.amount||0)}let Y=0;for(let Pe=0;Pe<F.length;Pe++){let Se=F[Pe];oe.addOutput(Se.address,Se.amount,Se.omniScript),Y=Y+Se.amount}se-Y>de&&oe.addOutput(L,se-Y);let ce=oe.build();const we=oe.tx.virtualSize();return{inputAmount:se,outputAmount:Y,virtualSize:we,txHex:ce}}function ae(q,F,L,Z,Q,de,ye){let oe=new fe(2,Q,!0,ye),se=0;for(let Pe=0;Pe<q.length;Pe++){let Se=q[Pe];oe.addInput(Se.txId,Se.vOut,Z,L,void 0,Se.amount,Se.publicKey,Se.sequence),se=se+(Se.amount||0)}let Y=0;for(let Pe=0;Pe<F.length;Pe++){let Se=F[Pe];oe.addOutput(Se.address,Se.amount),Y=Y+Se.amount}se-Y>de&&oe.addOutput(L,se-Y);let ce=oe.build();const we=oe.tx.virtualSize();return{inputAmount:se,outputAmount:Y,virtualSize:we,txHex:ce}}function te(q,F,L){const Z=N.Transaction.fromBuffer(P.base.fromHex(q),!1);for(let Q=0;Q<Z.ins.length;Q++){const de=Z.ins[Q],ye=P.base.fromHex(F[Q]);let oe=A.Transaction.SIGHASH_ALL;if(L){oe=A.Transaction.SIGHASH_ALL|A.Transaction.SIGHASH_BITCOINCASHBIP143;const se=A.payments.p2pkh({input:de.script}),Y=A.payments.p2pkh({pubkey:se.pubkey,signature:A.script.signature.encode(ye,oe)});Y.input&&(de.script=Y.input)}else{let se;if(de.witness.length===2)se="segwit_native";else if(de.witness.length===1)se="segwit_taproot";else if(de.witness.length===0)se="legacy";else throw Error("unknown witness length");if(se==="legacy"){const Y=A.payments.p2pkh({input:de.script}),ce=A.payments.p2pkh({pubkey:Y.pubkey,signature:A.script.signature.encode(ye,oe)});ce.input&&(de.script=ce.input)}else se==="segwit_taproot"?de.witness=[ye]:de.witness[0]=A.script.signature.encode(ye,oe)}}return Z.toHex()}v.getMPCTransaction=te;function ue(q,F,L){const Z=N.Transaction.fromBuffer(P.base.fromHex(q),!1);if(!F)return Z;for(let Q=0;Q<Z.ins.length;Q++){const de=Z.ins[Q],ye=F[Q];let oe;if(de.witness.length===2)oe="segwit_native";else if(de.witness.length===1)oe="segwit_taproot";else if(de.witness.length===0)oe="legacy";else throw Error("unknown witness length");if(oe==="legacy"){const se=H.decompile(de.script),Y=se[0],ce=se[1],we=A.script.signature.decode(Y),Pe=A.address.toOutputScript(ye.address,L),Se=Z.hashForSignature(Q,Pe,we.hashType);if(!T.signUtil.secp256k1.verifyWithNoRecovery(Se,we.signature,ce))throw Error("signature error")}else if(oe==="segwit_native"){const se=de.witness[0],Y=de.witness[1],ce=A.script.signature.decode(se),we=dist$4.Buffer.of(25,118,169,20,...C.hash160(Y),136,172),Pe=Z.hashForWitness(Q,we,ye.value,ce.hashType);if(!T.signUtil.secp256k1.verifyWithNoRecovery(Pe,ce.signature,Y))throw Error("signature error")}else{const se=de.witness[0],Y=F.map(Se=>A.address.toOutputScript(Se.address,L)),ce=F.map(Se=>Se.value),we=Z.hashForWitnessV1(Q,Y,ce,A.Transaction.SIGHASH_DEFAULT),Pe=U.taprootTweakPubkey(P.base.fromHex(ye.publicKey).slice(1))[0];if(!D.verify(P.base.toHex(se),P.base.toHex(we),P.base.toHex(Pe)))throw Error("signature error")}}for(let Q of Z.ins)Q.hash=P.base.reverseBuffer(Q.hash);return Z}v.ValidSignedTransaction=ue;function ne(q,F){const L=q.inputs,Z=q.outputs,Q=q.feePerB||10,de=q.dustSize||546;F=F||A.networks.bitcoin;const ye=ee(P.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),F);let{virtualSize:oe}=he(L,Z,q.address,ye,F,de);return oe*Q}v.estimateBtcFee=ne;function J(q,F){const L=q.inputs,Z=q.outputs,Q=q.feePerB||10,de=q.dustSize||546;F=F||A.networks.bitcoin;const ye=ee(P.base.fromHex("853fd8960ff34838208d662ecd3b9f8cf413e13e0f74f95e554f8089f5058db0"),F);let{virtualSize:oe}=ae(L,Z,q.address,ye,F,de);return oe*Q}v.estimateBchFee=J}(txBuild)),txBuild}var hasRequiredPsbtSign;function requirePsbtSign(){if(hasRequiredPsbtSign)return psbtSign$1;hasRequiredPsbtSign=1;var v=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(V,X,re,ee){ee===void 0&&(ee=re);var fe=Object.getOwnPropertyDescriptor(X,re);(!fe||("get"in fe?!X.__esModule:fe.writable||fe.configurable))&&(fe={enumerable:!0,get:function(){return X[re]}}),Object.defineProperty(V,ee,fe)}:function(V,X,re,ee){ee===void 0&&(ee=re),V[ee]=X[re]}),_=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(V,X){Object.defineProperty(V,"default",{enumerable:!0,value:X})}:function(V,X){V.default=X}),x=commonjsGlobal&&commonjsGlobal.__importStar||function(V){if(V&&V.__esModule)return V;var X={};if(V!=null)for(var re in V)re!=="default"&&Object.prototype.hasOwnProperty.call(V,re)&&v(X,V,re);return _(X,V),X};Object.defineProperty(psbtSign$1,"__esModule",{value:!0}),psbtSign$1.extractPsbtTransaction=psbtSign$1.psbtSignImpl=psbtSign$1.psbtSign=psbtSign$1.buildPsbt=void 0;const E=psbt$3,A=requireDist$1(),P=requireTxBuild(),T=requireBitcoinjsLib(),O=x(taproot$1),k=bip371$1,C=address$1,U=A.signUtil.schnorr.secp256k1.schnorr;function N(V,X){const re=new E.Psbt({network:X});return V.inputs.forEach(ee=>{const fe=(0,C.toOutputScript)(ee.address,X);let le={hash:ee.txId,index:ee.vOut,witnessUtxo:{script:fe,value:ee.amount}};const pe=(0,P.getAddressType)(ee.address,X||T.networks.bitcoin);if(ee.bip32Derivation&&(pe==="segwit_taproot"?le.tapBip32Derivation=ee.bip32Derivation.map(ie=>{let he=A.base.fromHex(ie.pubkey);return he.length!=32&&(he=he.slice(1)),{masterFingerprint:A.base.fromHex(ie.masterFingerprint),pubkey:he,path:ie.path,leafHashes:ie.leafHashes.map(ae=>dist$4.Buffer.from(ae,"hex"))}}):le.bip32Derivation=ee.bip32Derivation.map(ie=>({masterFingerprint:A.base.fromHex(ie.masterFingerprint),pubkey:A.base.fromHex(ie.pubkey),path:ie.path}))),pe==="legacy")le.nonWitnessUtxo=A.base.fromHex(ee.nonWitnessUtxo);else if(pe==="segwit_taproot"){let ie=A.base.fromHex(ee.publicKey);ie.length===33&&(ie=ie.slice(1)),le.tapInternalKey=ie}else pe==="segwit_nested"&&(le.redeemScript=T.payments.p2wpkh({pubkey:dist$4.Buffer.from(ee.publicKey,"hex"),network:X}).output);re.addInput(le)}),V.outputs.forEach(ee=>{if(ee.omniScript)re.addOutput({script:A.base.fromHex(ee.omniScript),value:0});else{let fe={address:ee.address,value:ee.amount};ee.bip32Derivation&&(fe.bip32Derivation=ee.bip32Derivation.map(le=>({masterFingerprint:A.base.fromHex(le.masterFingerprint),pubkey:A.base.fromHex(le.pubkey),path:le.path}))),re.addOutput(fe)}}),re.toHex()}psbtSign$1.buildPsbt=N;function H(V,X,re){const ee=E.Psbt.fromBase64(V,{network:re});return D(ee,X,re),ee.toBase64()}psbtSign$1.psbtSign=H;function D(V,X,re){re=re||T.networks.bitcoin;const ee=(0,P.privateKeyFromWIF)(X,re),fe={publicKey:dist$4.Buffer.alloc(0),sign(pe){return(0,P.sign)(pe,ee)},signSchnorr(pe){const ie=O.taprootTweakPrivKey(A.base.fromHex(ee));return dist$4.Buffer.from(U.sign(pe,ie,A.base.randomBytes(32)))}},le=[T.Transaction.SIGHASH_SINGLE|T.Transaction.SIGHASH_ANYONECANPAY,T.Transaction.SIGHASH_ALL,T.Transaction.SIGHASH_DEFAULT];for(let pe=0;pe<V.inputCount;pe++){(0,k.isTaprootInput)(V.data.inputs[pe])?fe.publicKey=dist$4.Buffer.from(O.taprootTweakPubkey((0,P.wif2Public)(X,re).slice(1))[0]):fe.publicKey=(0,P.wif2Public)(X,re);try{V.signInput(pe,fe,le)}catch{}}}psbtSign$1.psbtSignImpl=D;function j(V,X){const re=E.Psbt.fromHex(V,{network:X});let ee;try{ee=re.finalizeAllInputs().extractTransaction()}catch{ee=re.extractTransaction()}return ee.toHex()}return psbtSign$1.extractPsbtTransaction=j,psbtSign$1}var hasRequiredBip0322;function requireBip0322(){if(hasRequiredBip0322)return bip0322;hasRequiredBip0322=1,Object.defineProperty(bip0322,"__esModule",{value:!0}),bip0322.verifySimple=bip0322.signSimple=void 0;const v=requireDist$1(),_=address$1,x=transaction$1,E=psbt$3,A=varuint$g,P=requirePsbtSign(),T=requireTxBuild(),O=psbtutils$1;function k(N){const H="BIP0322-signed-message",D=v.base.sha256(dist$4.Buffer.from(H)),j=v.base.sha256(dist$4.Buffer.concat([D,D,dist$4.Buffer.from(N)]));return v.base.toHex(j)}async function C(N,H,D,j){const V=(0,_.toOutputScript)(H,j),X=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),re=4294967295,ee=0,fe=dist$4.Buffer.concat([dist$4.Buffer.from("0020","hex"),dist$4.Buffer.from(k(N),"hex")]),le=new x.Transaction;le.version=0,le.addInput(X,re,ee,fe),le.addOutput(V,0);const pe=new E.Psbt({network:j});pe.setVersion(0),pe.addInput({hash:le.getHash(),index:0,sequence:0,witnessUtxo:{script:V,value:0}}),(0,O.isP2TR)(V)&&pe.updateInput(0,{tapInternalKey:(0,T.wif2Public)(D,j).slice(1)}),pe.addOutput({script:dist$4.Buffer.from("6a","hex"),value:0}),(0,P.psbtSignImpl)(pe,D,j),pe.finalizeAllInputs();const ie=pe.extractTransaction();function he(ue){return dist$4.Buffer.concat([(0,A.encode)(ue.byteLength),ue])}const ae=(0,A.encode)(ie.ins[0].witness.length),te=dist$4.Buffer.concat([ae,...ie.ins[0].witness.map(ue=>he(ue))]);return v.base.toBase64(te)}bip0322.signSimple=C;function U(N,H,D,j,V){const X=(0,_.toOutputScript)(H,V),re=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ee=4294967295,fe=0,le=dist$4.Buffer.concat([dist$4.Buffer.from("0020","hex"),dist$4.Buffer.from(k(N),"hex")]),pe=new x.Transaction;pe.version=0,pe.addInput(re,ee,fe,le),pe.addOutput(X,0);const ie=new E.Psbt;ie.setVersion(0),ie.addInput({hash:pe.getHash(),index:0,sequence:0,witnessUtxo:{script:X,value:0}});const he=v.base.fromHex(j);return(0,O.isP2TR)(X)&&ie.updateInput(0,{tapInternalKey:he.slice(1)}),ie.addOutput({script:dist$4.Buffer.from("6a","hex"),value:0}),ie.verify(he,dist$4.Buffer.from(v.base.fromBase64(D)))}return bip0322.verifySimple=U,bip0322}var hasRequiredBitcoinjsLib;function requireBitcoinjsLib(){return hasRequiredBitcoinjsLib||(hasRequiredBitcoinjsLib=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(N,H,D,j){j===void 0&&(j=D);var V=Object.getOwnPropertyDescriptor(H,D);(!V||("get"in V?!H.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return H[D]}}),Object.defineProperty(N,j,V)}:function(N,H,D,j){j===void 0&&(j=D),N[j]=H[D]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(N,H){Object.defineProperty(N,"default",{enumerable:!0,value:H})}:function(N,H){N.default=H}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(N){if(N&&N.__esModule)return N;var H={};if(N!=null)for(var D in N)D!=="default"&&Object.prototype.hasOwnProperty.call(N,D)&&_(H,N,D);return x(H,N),H};Object.defineProperty(v,"__esModule",{value:!0}),v.Transaction=v.bip0322=v.script=v.payments=v.networks=v.crypto=v.address=void 0;const A=E(address$1);v.address=A;const P=E(crypto$4);v.crypto=P;const T=E(networks$3);v.networks=T;const O=E(payments$8);v.payments=O;const k=E(script$1);v.script=k;const C=E(requireBip0322());v.bip0322=C;var U=transaction$1;Object.defineProperty(v,"Transaction",{enumerable:!0,get:function(){return U.Transaction}})}(bitcoinjsLib)),bitcoinjsLib}var bitcoincash={},cashaddr={},base32$1={},validation={};Object.defineProperty(validation,"__esModule",{value:!0}),validation.validate=void 0;function validate(v,_){if(!v)throw new Error(_)}validation.validate=validate,Object.defineProperty(base32$1,"__esModule",{value:!0}),base32$1.decode=base32$1.encode=void 0;const validation_1$2=validation,CHARSET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",CHARSET_INVERSE_INDEX={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};function encode$n(v){for(var _="",x=0;x<v.length;++x){var E=v[x];(0,validation_1$2.validate)(0<=E&&E<32,"Invalid value: "+E+"."),_+=CHARSET[E]}return _}base32$1.encode=encode$n;function decode$k(v){for(var _=new Uint8Array(v.length),x=0;x<v.length;++x){var E=v[x];(0,validation_1$2.validate)(E in CHARSET_INVERSE_INDEX,"Invalid value: "+E+"."),_[x]=CHARSET_INVERSE_INDEX[E]}return _}base32$1.decode=decode$k;var BigInteger={exports:{}};(function(v){var _=function(x){var E=1e7,A=7,P=9007199254740992,T=H(P),O=Math.log(P);function k($e,Te){return typeof $e>"u"?k[0]:typeof Te<"u"?+Te==10?We($e):ze($e,Te):We($e)}function C($e,Te){this.value=$e,this.sign=Te,this.isSmall=!1}C.prototype=Object.create(k.prototype);function U($e){this.value=$e,this.sign=$e<0,this.isSmall=!0}U.prototype=Object.create(k.prototype);function N($e){return-P<$e&&$e<P}function H($e){return $e<1e7?[$e]:$e<1e14?[$e%1e7,Math.floor($e/1e7)]:[$e%1e7,Math.floor($e/1e7)%1e7,Math.floor($e/1e14)]}function D($e){j($e);var Te=$e.length;if(Te<4&&de($e,T)<0)switch(Te){case 0:return 0;case 1:return $e[0];case 2:return $e[0]+$e[1]*E;default:return $e[0]+($e[1]+$e[2]*E)*E}return $e}function j($e){for(var Te=$e.length;$e[--Te]===0;);$e.length=Te+1}function V($e){for(var Te=new Array($e),Ce=-1;++Ce<$e;)Te[Ce]=0;return Te}function X($e){return $e>0?Math.floor($e):Math.ceil($e)}function re($e,Te){var Ce=$e.length,ve=Te.length,be=new Array(Ce),ge=0,me=E,_e,Ae;for(Ae=0;Ae<ve;Ae++)_e=$e[Ae]+Te[Ae]+ge,ge=_e>=me?1:0,be[Ae]=_e-ge*me;for(;Ae<Ce;)_e=$e[Ae]+ge,ge=_e===me?1:0,be[Ae++]=_e-ge*me;return ge>0&&be.push(ge),be}function ee($e,Te){return $e.length>=Te.length?re($e,Te):re(Te,$e)}function fe($e,Te){var Ce=$e.length,ve=new Array(Ce),be=E,ge,me;for(me=0;me<Ce;me++)ge=$e[me]-be+Te,Te=Math.floor(ge/be),ve[me]=ge-Te*be,Te+=1;for(;Te>0;)ve[me++]=Te%be,Te=Math.floor(Te/be);return ve}C.prototype.add=function($e){var Te=We($e);if(this.sign!==Te.sign)return this.subtract(Te.negate());var Ce=this.value,ve=Te.value;return Te.isSmall?new C(fe(Ce,Math.abs(ve)),this.sign):new C(ee(Ce,ve),this.sign)},C.prototype.plus=C.prototype.add,U.prototype.add=function($e){var Te=We($e),Ce=this.value;if(Ce<0!==Te.sign)return this.subtract(Te.negate());var ve=Te.value;if(Te.isSmall){if(N(Ce+ve))return new U(Ce+ve);ve=H(Math.abs(ve))}return new C(fe(ve,Math.abs(Ce)),Ce<0)},U.prototype.plus=U.prototype.add;function le($e,Te){var Ce=$e.length,ve=Te.length,be=new Array(Ce),ge=0,me=E,_e,Ae;for(_e=0;_e<ve;_e++)Ae=$e[_e]-ge-Te[_e],Ae<0?(Ae+=me,ge=1):ge=0,be[_e]=Ae;for(_e=ve;_e<Ce;_e++){if(Ae=$e[_e]-ge,Ae<0)Ae+=me;else{be[_e++]=Ae;break}be[_e]=Ae}for(;_e<Ce;_e++)be[_e]=$e[_e];return j(be),be}function pe($e,Te,Ce){var ve;return de($e,Te)>=0?ve=le($e,Te):(ve=le(Te,$e),Ce=!Ce),ve=D(ve),typeof ve=="number"?(Ce&&(ve=-ve),new U(ve)):new C(ve,Ce)}function ie($e,Te,Ce){var ve=$e.length,be=new Array(ve),ge=-Te,me=E,_e,Ae;for(_e=0;_e<ve;_e++)Ae=$e[_e]+ge,ge=Math.floor(Ae/me),Ae%=me,be[_e]=Ae<0?Ae+me:Ae;return be=D(be),typeof be=="number"?(Ce&&(be=-be),new U(be)):new C(be,Ce)}C.prototype.subtract=function($e){var Te=We($e);if(this.sign!==Te.sign)return this.add(Te.negate());var Ce=this.value,ve=Te.value;return Te.isSmall?ie(Ce,Math.abs(ve),this.sign):pe(Ce,ve,this.sign)},C.prototype.minus=C.prototype.subtract,U.prototype.subtract=function($e){var Te=We($e),Ce=this.value;if(Ce<0!==Te.sign)return this.add(Te.negate());var ve=Te.value;return Te.isSmall?new U(Ce-ve):ie(ve,Math.abs(Ce),Ce>=0)},U.prototype.minus=U.prototype.subtract,C.prototype.negate=function(){return new C(this.value,!this.sign)},U.prototype.negate=function(){var $e=this.sign,Te=new U(-this.value);return Te.sign=!$e,Te},C.prototype.abs=function(){return new C(this.value,!1)},U.prototype.abs=function(){return new U(Math.abs(this.value))};function he($e,Te){var Ce=$e.length,ve=Te.length,be=Ce+ve,ge=V(be),me=E,_e,Ae,Oe,Le,je;for(Oe=0;Oe<Ce;++Oe){Le=$e[Oe];for(var qe=0;qe<ve;++qe)je=Te[qe],_e=Le*je+ge[Oe+qe],Ae=Math.floor(_e/me),ge[Oe+qe]=_e-Ae*me,ge[Oe+qe+1]+=Ae}return j(ge),ge}function ae($e,Te){var Ce=$e.length,ve=new Array(Ce),be=E,ge=0,me,_e;for(_e=0;_e<Ce;_e++)me=$e[_e]*Te+ge,ge=Math.floor(me/be),ve[_e]=me-ge*be;for(;ge>0;)ve[_e++]=ge%be,ge=Math.floor(ge/be);return ve}function te($e,Te){for(var Ce=[];Te-- >0;)Ce.push(0);return Ce.concat($e)}function ue($e,Te){var Ce=Math.max($e.length,Te.length);if(Ce<=30)return he($e,Te);Ce=Math.ceil(Ce/2);var ve=$e.slice(Ce),be=$e.slice(0,Ce),ge=Te.slice(Ce),me=Te.slice(0,Ce),_e=ue(be,me),Ae=ue(ve,ge),Oe=ue(ee(be,ve),ee(me,ge)),Le=ee(ee(_e,te(le(le(Oe,_e),Ae),Ce)),te(Ae,2*Ce));return j(Le),Le}function ne($e,Te){return-.012*$e-.012*Te+15e-6*$e*Te>0}C.prototype.multiply=function($e){var Te=We($e),Ce=this.value,ve=Te.value,be=this.sign!==Te.sign,ge;if(Te.isSmall){if(ve===0)return k[0];if(ve===1)return this;if(ve===-1)return this.negate();if(ge=Math.abs(ve),ge<E)return new C(ae(Ce,ge),be);ve=H(ge)}return ne(Ce.length,ve.length)?new C(ue(Ce,ve),be):new C(he(Ce,ve),be)},C.prototype.times=C.prototype.multiply;function J($e,Te,Ce){return $e<E?new C(ae(Te,$e),Ce):new C(he(Te,H($e)),Ce)}U.prototype._multiplyBySmall=function($e){return N($e.value*this.value)?new U($e.value*this.value):J(Math.abs($e.value),H(Math.abs(this.value)),this.sign!==$e.sign)},C.prototype._multiplyBySmall=function($e){return $e.value===0?k[0]:$e.value===1?this:$e.value===-1?this.negate():J(Math.abs($e.value),this.value,this.sign!==$e.sign)},U.prototype.multiply=function($e){return We($e)._multiplyBySmall(this)},U.prototype.times=U.prototype.multiply;function q($e){var Te=$e.length,Ce=V(Te+Te),ve=E,be,ge,me,_e,Ae;for(me=0;me<Te;me++){_e=$e[me],ge=0-_e*_e;for(var Oe=me;Oe<Te;Oe++)Ae=$e[Oe],be=2*(_e*Ae)+Ce[me+Oe]+ge,ge=Math.floor(be/ve),Ce[me+Oe]=be-ge*ve;Ce[me+Te]=ge}return j(Ce),Ce}C.prototype.square=function(){return new C(q(this.value),!1)},U.prototype.square=function(){var $e=this.value*this.value;return N($e)?new U($e):new C(q(H(Math.abs(this.value))),!1)};function F($e,Te){var Ce=$e.length,ve=Te.length,be=E,ge=V(Te.length),me=Te[ve-1],_e=Math.ceil(be/(2*me)),Ae=ae($e,_e),Oe=ae(Te,_e),Le,je,qe,rt,tt,at,bt;for(Ae.length<=Ce&&Ae.push(0),Oe.push(0),me=Oe[ve-1],je=Ce-ve;je>=0;je--){for(Le=be-1,Ae[je+ve]!==me&&(Le=Math.floor((Ae[je+ve]*be+Ae[je+ve-1])/me)),qe=0,rt=0,at=Oe.length,tt=0;tt<at;tt++)qe+=Le*Oe[tt],bt=Math.floor(qe/be),rt+=Ae[je+tt]-(qe-bt*be),qe=bt,rt<0?(Ae[je+tt]=rt+be,rt=-1):(Ae[je+tt]=rt,rt=0);for(;rt!==0;){for(Le-=1,qe=0,tt=0;tt<at;tt++)qe+=Ae[je+tt]-be+Oe[tt],qe<0?(Ae[je+tt]=qe+be,qe=0):(Ae[je+tt]=qe,qe=1);rt+=qe}ge[je]=Le}return Ae=Z(Ae,_e)[0],[D(ge),D(Ae)]}function L($e,Te){for(var Ce=$e.length,ve=Te.length,be=[],ge=[],me=E,_e,Ae,Oe,Le,je;Ce;){if(ge.unshift($e[--Ce]),j(ge),de(ge,Te)<0){be.push(0);continue}Ae=ge.length,Oe=ge[Ae-1]*me+ge[Ae-2],Le=Te[ve-1]*me+Te[ve-2],Ae>ve&&(Oe=(Oe+1)*me),_e=Math.ceil(Oe/Le);do{if(je=ae(Te,_e),de(je,ge)<=0)break;_e--}while(_e);be.push(_e),ge=le(ge,je)}return be.reverse(),[D(be),D(ge)]}function Z($e,Te){var Ce=$e.length,ve=V(Ce),be=E,ge,me,_e,Ae;for(_e=0,ge=Ce-1;ge>=0;--ge)Ae=_e*be+$e[ge],me=X(Ae/Te),_e=Ae-me*Te,ve[ge]=me|0;return[ve,_e|0]}function Q($e,Te){var Ce,ve=We(Te),be=$e.value,ge=ve.value,me;if(ge===0)throw new Error("Cannot divide by zero");if($e.isSmall)return ve.isSmall?[new U(X(be/ge)),new U(be%ge)]:[k[0],$e];if(ve.isSmall){if(ge===1)return[$e,k[0]];if(ge==-1)return[$e.negate(),k[0]];var _e=Math.abs(ge);if(_e<E){Ce=Z(be,_e),me=D(Ce[0]);var Ae=Ce[1];return $e.sign&&(Ae=-Ae),typeof me=="number"?($e.sign!==ve.sign&&(me=-me),[new U(me),new U(Ae)]):[new C(me,$e.sign!==ve.sign),new U(Ae)]}ge=H(_e)}var Oe=de(be,ge);if(Oe===-1)return[k[0],$e];if(Oe===0)return[k[$e.sign===ve.sign?1:-1],k[0]];be.length+ge.length<=200?Ce=F(be,ge):Ce=L(be,ge),me=Ce[0];var Le=$e.sign!==ve.sign,je=Ce[1],qe=$e.sign;return typeof me=="number"?(Le&&(me=-me),me=new U(me)):me=new C(me,Le),typeof je=="number"?(qe&&(je=-je),je=new U(je)):je=new C(je,qe),[me,je]}C.prototype.divmod=function($e){var Te=Q(this,$e);return{quotient:Te[0],remainder:Te[1]}},U.prototype.divmod=C.prototype.divmod,C.prototype.divide=function($e){return Q(this,$e)[0]},U.prototype.over=U.prototype.divide=C.prototype.over=C.prototype.divide,C.prototype.mod=function($e){return Q(this,$e)[1]},U.prototype.remainder=U.prototype.mod=C.prototype.remainder=C.prototype.mod,C.prototype.pow=function($e){var Te=We($e),Ce=this.value,ve=Te.value,be,ge,me;if(ve===0)return k[1];if(Ce===0)return k[0];if(Ce===1)return k[1];if(Ce===-1)return Te.isEven()?k[1]:k[-1];if(Te.sign)return k[0];if(!Te.isSmall)throw new Error("The exponent "+Te.toString()+" is too large.");if(this.isSmall&&N(be=Math.pow(Ce,ve)))return new U(X(be));for(ge=this,me=k[1];ve&!0&&(me=me.times(ge),--ve),ve!==0;)ve/=2,ge=ge.square();return me},U.prototype.pow=C.prototype.pow,C.prototype.modPow=function($e,Te){if($e=We($e),Te=We(Te),Te.isZero())throw new Error("Cannot take modPow with modulus 0");for(var Ce=k[1],ve=this.mod(Te);$e.isPositive();){if(ve.isZero())return k[0];$e.isOdd()&&(Ce=Ce.multiply(ve).mod(Te)),$e=$e.divide(2),ve=ve.square().mod(Te)}return Ce},U.prototype.modPow=C.prototype.modPow;function de($e,Te){if($e.length!==Te.length)return $e.length>Te.length?1:-1;for(var Ce=$e.length-1;Ce>=0;Ce--)if($e[Ce]!==Te[Ce])return $e[Ce]>Te[Ce]?1:-1;return 0}C.prototype.compareAbs=function($e){var Te=We($e),Ce=this.value,ve=Te.value;return Te.isSmall?1:de(Ce,ve)},U.prototype.compareAbs=function($e){var Te=We($e),Ce=Math.abs(this.value),ve=Te.value;return Te.isSmall?(ve=Math.abs(ve),Ce===ve?0:Ce>ve?1:-1):-1},C.prototype.compare=function($e){if($e===1/0)return-1;if($e===-1/0)return 1;var Te=We($e),Ce=this.value,ve=Te.value;return this.sign!==Te.sign?Te.sign?1:-1:Te.isSmall?this.sign?-1:1:de(Ce,ve)*(this.sign?-1:1)},C.prototype.compareTo=C.prototype.compare,U.prototype.compare=function($e){if($e===1/0)return-1;if($e===-1/0)return 1;var Te=We($e),Ce=this.value,ve=Te.value;return Te.isSmall?Ce==ve?0:Ce>ve?1:-1:Ce<0!==Te.sign?Ce<0?-1:1:Ce<0?1:-1},U.prototype.compareTo=U.prototype.compare,C.prototype.equals=function($e){return this.compare($e)===0},U.prototype.eq=U.prototype.equals=C.prototype.eq=C.prototype.equals,C.prototype.notEquals=function($e){return this.compare($e)!==0},U.prototype.neq=U.prototype.notEquals=C.prototype.neq=C.prototype.notEquals,C.prototype.greater=function($e){return this.compare($e)>0},U.prototype.gt=U.prototype.greater=C.prototype.gt=C.prototype.greater,C.prototype.lesser=function($e){return this.compare($e)<0},U.prototype.lt=U.prototype.lesser=C.prototype.lt=C.prototype.lesser,C.prototype.greaterOrEquals=function($e){return this.compare($e)>=0},U.prototype.geq=U.prototype.greaterOrEquals=C.prototype.geq=C.prototype.greaterOrEquals,C.prototype.lesserOrEquals=function($e){return this.compare($e)<=0},U.prototype.leq=U.prototype.lesserOrEquals=C.prototype.leq=C.prototype.lesserOrEquals,C.prototype.isEven=function(){return(this.value[0]&1)===0},U.prototype.isEven=function(){return(this.value&1)===0},C.prototype.isOdd=function(){return(this.value[0]&1)===1},U.prototype.isOdd=function(){return(this.value&1)===1},C.prototype.isPositive=function(){return!this.sign},U.prototype.isPositive=function(){return this.value>0},C.prototype.isNegative=function(){return this.sign},U.prototype.isNegative=function(){return this.value<0},C.prototype.isUnit=function(){return!1},U.prototype.isUnit=function(){return Math.abs(this.value)===1},C.prototype.isZero=function(){return!1},U.prototype.isZero=function(){return this.value===0},C.prototype.isDivisibleBy=function($e){var Te=We($e),Ce=Te.value;return Ce===0?!1:Ce===1?!0:Ce===2?this.isEven():this.mod(Te).equals(k[0])},U.prototype.isDivisibleBy=C.prototype.isDivisibleBy;function ye($e){var Te=$e.abs();if(Te.isUnit())return!1;if(Te.equals(2)||Te.equals(3)||Te.equals(5))return!0;if(Te.isEven()||Te.isDivisibleBy(3)||Te.isDivisibleBy(5))return!1;if(Te.lesser(49))return!0}function oe($e,Te){for(var Ce=$e.prev(),ve=Ce,be=0,ge,me,_e;ve.isEven();)ve=ve.divide(2),be++;e:for(me=0;me<Te.length;me++)if(!$e.lesser(Te[me])&&(_e=_(Te[me]).modPow(ve,$e),!(_e.equals(k[1])||_e.equals(Ce)))){for(ge=be-1;ge!=0;ge--){if(_e=_e.square().mod($e),_e.isUnit())return!1;if(_e.equals(Ce))continue e}return!1}return!0}C.prototype.isPrime=function($e){var Te=ye(this);if(Te!==x)return Te;var Ce=this.abs(),ve=Ce.bitLength();if(ve<=64)return oe(Ce,[2,325,9375,28178,450775,9780504,1795265022]);for(var be=Math.log(2)*ve,ge=Math.ceil($e===!0?2*Math.pow(be,2):be),me=[],_e=0;_e<ge;_e++)me.push(_(_e+2));return oe(Ce,me)},U.prototype.isPrime=C.prototype.isPrime,C.prototype.isProbablePrime=function($e){var Te=ye(this);if(Te!==x)return Te;for(var Ce=this.abs(),ve=$e===x?5:$e,be=[],ge=0;ge<ve;ge++)be.push(_.randBetween(2,Ce.minus(2)));return oe(Ce,be)},U.prototype.isProbablePrime=C.prototype.isProbablePrime,C.prototype.modInv=function($e){for(var Te=_.zero,Ce=_.one,ve=We($e),be=this.abs(),ge,me,_e;!be.equals(_.zero);)ge=ve.divide(be),me=Te,_e=ve,Te=Ce,ve=be,Ce=me.subtract(ge.multiply(Ce)),be=_e.subtract(ge.multiply(be));if(!ve.equals(1))throw new Error(this.toString()+" and "+$e.toString()+" are not co-prime");return Te.compare(0)===-1&&(Te=Te.add($e)),this.isNegative()?Te.negate():Te},U.prototype.modInv=C.prototype.modInv,C.prototype.next=function(){var $e=this.value;return this.sign?ie($e,1,this.sign):new C(fe($e,1),this.sign)},U.prototype.next=function(){var $e=this.value;return $e+1<P?new U($e+1):new C(T,!1)},C.prototype.prev=function(){var $e=this.value;return this.sign?new C(fe($e,1),!0):ie($e,1,this.sign)},U.prototype.prev=function(){var $e=this.value;return $e-1>-P?new U($e-1):new C(T,!0)};for(var se=[1];2*se[se.length-1]<=E;)se.push(2*se[se.length-1]);var Y=se.length,ce=se[Y-1];function we($e){return(typeof $e=="number"||typeof $e=="string")&&+Math.abs($e)<=E||$e instanceof C&&$e.value.length<=1}C.prototype.shiftLeft=function($e){if(!we($e))throw new Error(String($e)+" is too large for shifting.");if($e=+$e,$e<0)return this.shiftRight(-$e);var Te=this;if(Te.isZero())return Te;for(;$e>=Y;)Te=Te.multiply(ce),$e-=Y-1;return Te.multiply(se[$e])},U.prototype.shiftLeft=C.prototype.shiftLeft,C.prototype.shiftRight=function($e){var Te;if(!we($e))throw new Error(String($e)+" is too large for shifting.");if($e=+$e,$e<0)return this.shiftLeft(-$e);for(var Ce=this;$e>=Y;){if(Ce.isZero()||Ce.isNegative()&&Ce.isUnit())return Ce;Te=Q(Ce,ce),Ce=Te[1].isNegative()?Te[0].prev():Te[0],$e-=Y-1}return Te=Q(Ce,se[$e]),Te[1].isNegative()?Te[0].prev():Te[0]},U.prototype.shiftRight=C.prototype.shiftRight;function Pe($e,Te,Ce){Te=We(Te);for(var ve=$e.isNegative(),be=Te.isNegative(),ge=ve?$e.not():$e,me=be?Te.not():Te,_e=0,Ae=0,Oe=null,Le=null,je=[];!ge.isZero()||!me.isZero();)Oe=Q(ge,ce),_e=Oe[1].toJSNumber(),ve&&(_e=ce-1-_e),Le=Q(me,ce),Ae=Le[1].toJSNumber(),be&&(Ae=ce-1-Ae),ge=Oe[0],me=Le[0],je.push(Ce(_e,Ae));for(var qe=Ce(ve?1:0,be?1:0)!==0?_(-1):_(0),rt=je.length-1;rt>=0;rt-=1)qe=qe.multiply(ce).add(_(je[rt]));return qe}C.prototype.not=function(){return this.negate().prev()},U.prototype.not=C.prototype.not,C.prototype.and=function($e){return Pe(this,$e,function(Te,Ce){return Te&Ce})},U.prototype.and=C.prototype.and,C.prototype.or=function($e){return Pe(this,$e,function(Te,Ce){return Te|Ce})},U.prototype.or=C.prototype.or,C.prototype.xor=function($e){return Pe(this,$e,function(Te,Ce){return Te^Ce})},U.prototype.xor=C.prototype.xor;var Se=1<<30,Be=(E&-E)*(E&-E)|Se;function Ie($e){var Te=$e.value,Ce=typeof Te=="number"?Te|Se:Te[0]+Te[1]*E|Be;return Ce&-Ce}function Re($e,Te){if(Te.compareTo($e)<=0){var Ce=Re($e,Te.square(Te)),ve=Ce.p,be=Ce.e,ge=ve.multiply(Te);return ge.compareTo($e)<=0?{p:ge,e:be*2+1}:{p:ve,e:be*2}}return{p:_(1),e:0}}C.prototype.bitLength=function(){var $e=this;return $e.compareTo(_(0))<0&&($e=$e.negate().subtract(_(1))),$e.compareTo(_(0))===0?_(0):_(Re($e,_(2)).e).add(_(1))},U.prototype.bitLength=C.prototype.bitLength;function Me($e,Te){return $e=We($e),Te=We(Te),$e.greater(Te)?$e:Te}function xe($e,Te){return $e=We($e),Te=We(Te),$e.lesser(Te)?$e:Te}function Ee($e,Te){if($e=We($e).abs(),Te=We(Te).abs(),$e.equals(Te))return $e;if($e.isZero())return Te;if(Te.isZero())return $e;for(var Ce=k[1],ve,be;$e.isEven()&&Te.isEven();)ve=Math.min(Ie($e),Ie(Te)),$e=$e.divide(ve),Te=Te.divide(ve),Ce=Ce.multiply(ve);for(;$e.isEven();)$e=$e.divide(Ie($e));do{for(;Te.isEven();)Te=Te.divide(Ie(Te));$e.greater(Te)&&(be=Te,Te=$e,$e=be),Te=Te.subtract($e)}while(!Te.isZero());return Ce.isUnit()?$e:$e.multiply(Ce)}function Ue($e,Te){return $e=We($e).abs(),Te=We(Te).abs(),$e.divide(Ee($e,Te)).multiply(Te)}function Ke($e,Te){$e=We($e),Te=We(Te);var Ce=xe($e,Te),ve=Me($e,Te),be=ve.subtract(Ce).add(1);if(be.isSmall)return Ce.add(Math.floor(Math.random()*be));for(var ge=be.value.length-1,me=[],_e=!0,Ae=ge;Ae>=0;Ae--){var Oe=_e?be.value[Ae]:E,Le=X(Math.random()*Oe);me.unshift(Le),Le<Oe&&(_e=!1)}return me=D(me),Ce.add(typeof me=="number"?new U(me):new C(me,!1))}var ze=function($e,Te){for(var Ce=$e.length,ve,be=Math.abs(Te),ve=0;ve<Ce;ve++){var ge=$e[ve].toLowerCase();if(ge!=="-"&&/[a-z0-9]/.test(ge)){if(/[0-9]/.test(ge)&&+ge>=be){if(ge==="1"&&be===1)continue;throw new Error(ge+" is not a valid digit in base "+Te+".")}else if(ge.charCodeAt(0)-87>=be)throw new Error(ge+" is not a valid digit in base "+Te+".")}}if(2<=Te&&Te<=36&&Ce<=O/Math.log(Te)){var me=parseInt($e,Te);if(isNaN(me))throw new Error(ge+" is not a valid digit in base "+Te+".");return new U(parseInt($e,Te))}Te=We(Te);var _e=[],Ae=$e[0]==="-";for(ve=Ae?1:0;ve<$e.length;ve++){var ge=$e[ve].toLowerCase(),Oe=ge.charCodeAt(0);if(48<=Oe&&Oe<=57)_e.push(We(ge));else if(97<=Oe&&Oe<=122)_e.push(We(ge.charCodeAt(0)-87));else if(ge==="<"){var Le=ve;do ve++;while($e[ve]!==">");_e.push(We($e.slice(Le+1,ve)))}else throw new Error(ge+" is not a valid character")}return Ve(_e,Te,Ae)};function Ve($e,Te,Ce){var ve=k[0],be=k[1],ge;for(ge=$e.length-1;ge>=0;ge--)ve=ve.add($e[ge].times(be)),be=be.times(Te);return Ce?ve.negate():ve}function Je($e){return $e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt($e):"<"+$e+">"}function et($e,Te){if(Te=_(Te),Te.isZero()){if($e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(Te.equals(-1)){if($e.isZero())return{value:[0],isNegative:!1};if($e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-$e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var Ce=Array.apply(null,Array(+$e-1)).map(Array.prototype.valueOf,[0,1]);return Ce.unshift([1]),{value:[].concat.apply([],Ce),isNegative:!1}}var ve=!1;if($e.isNegative()&&Te.isPositive()&&(ve=!0,$e=$e.abs()),Te.equals(1))return $e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+$e)).map(Number.prototype.valueOf,1),isNegative:ve};for(var be=[],ge=$e,me;ge.isNegative()||ge.compareAbs(Te)>=0;){me=ge.divmod(Te),ge=me.quotient;var _e=me.remainder;_e.isNegative()&&(_e=Te.minus(_e).abs(),ge=ge.next()),be.push(_e.toJSNumber())}return be.push(ge.toJSNumber()),{value:be.reverse(),isNegative:ve}}function Ge($e,Te){var Ce=et($e,Te);return(Ce.isNegative?"-":"")+Ce.value.map(Je).join("")}C.prototype.toArray=function($e){return et(this,$e)},U.prototype.toArray=function($e){return et(this,$e)},C.prototype.toString=function($e){if($e===x&&($e=10),$e!==10)return Ge(this,$e);for(var Te=this.value,Ce=Te.length,ve=String(Te[--Ce]),be="0000000",ge;--Ce>=0;)ge=String(Te[Ce]),ve+=be.slice(ge.length)+ge;var me=this.sign?"-":"";return me+ve},U.prototype.toString=function($e){return $e===x&&($e=10),$e!=10?Ge(this,$e):String(this.value)},C.prototype.toJSON=U.prototype.toJSON=function(){return this.toString()},C.prototype.valueOf=function(){return parseInt(this.toString(),10)},C.prototype.toJSNumber=C.prototype.valueOf,U.prototype.valueOf=function(){return this.value},U.prototype.toJSNumber=U.prototype.valueOf;function ot($e){if(N(+$e)){var Te=+$e;if(Te===X(Te))return new U(Te);throw new Error("Invalid integer: "+$e)}var Ce=$e[0]==="-";Ce&&($e=$e.slice(1));var ve=$e.split(/e/i);if(ve.length>2)throw new Error("Invalid integer: "+ve.join("e"));if(ve.length===2){var be=ve[1];if(be[0]==="+"&&(be=be.slice(1)),be=+be,be!==X(be)||!N(be))throw new Error("Invalid integer: "+be+" is not a valid exponent.");var ge=ve[0],me=ge.indexOf(".");if(me>=0&&(be-=ge.length-me-1,ge=ge.slice(0,me)+ge.slice(me+1)),be<0)throw new Error("Cannot include negative exponent part for integers");ge+=new Array(be+1).join("0"),$e=ge}var _e=/^([0-9][0-9]*)$/.test($e);if(!_e)throw new Error("Invalid integer: "+$e);for(var Ae=[],Oe=$e.length,Le=A,je=Oe-Le;Oe>0;)Ae.push(+$e.slice(je,Oe)),je-=Le,je<0&&(je=0),Oe-=Le;return j(Ae),new C(Ae,Ce)}function He($e){if(N($e)){if($e!==X($e))throw new Error($e+" is not an integer.");return new U($e)}return ot($e.toString())}function We($e){return typeof $e=="number"?He($e):typeof $e=="string"?ot($e):$e}for(var Ze=0;Ze<1e3;Ze++)k[Ze]=new U(Ze),Ze>0&&(k[-Ze]=new U(-Ze));return k.one=k[1],k.zero=k[0],k.minusOne=k[-1],k.max=Me,k.min=xe,k.gcd=Ee,k.lcm=Ue,k.isInstance=function($e){return $e instanceof C||$e instanceof U},k.randBetween=Ke,k.fromArray=function($e,Te,Ce){return Ve($e.map(We),We(Te||10),Ce)},k}();v.hasOwnProperty("exports")&&(v.exports=_)})(BigInteger);var BigIntegerExports=BigInteger.exports,convertBits$1={};Object.defineProperty(convertBits$1,"__esModule",{value:!0}),convertBits$1.convert=void 0;const validation_1$1=validation;function convert$3(v,_,x,E){for(var A=E?Math.floor(v.length*_/x):Math.ceil(v.length*_/x),P=(1<<x)-1,T=new Uint8Array(A),O=0,k=0,C=0,U=0;U<v.length;++U){var N=v[U];for((0,validation_1$1.validate)(0<=N&&N>>_===0,"Invalid value: "+N+"."),k=k<<_|N,C+=_;C>=x;)C-=x,T[O]=k>>C&P,++O}return E?(0,validation_1$1.validate)(C<_&&(k<<x-C&P)===0,"Input cannot be converted to "+x+" bits without padding, but strict mode was used."):C>0&&(T[O]=k<<x-C&P,++O),T}convertBits$1.convert=convert$3;var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$2(_,v,x);return __setModuleDefault$2(_,v),_};Object.defineProperty(cashaddr,"__esModule",{value:!0}),cashaddr.decode=cashaddr.encode=void 0;const base32=__importStar$2(base32$1),bigInt=BigIntegerExports,convertBits=__importStar$2(convertBits$1),validation_1=validation;function encode$m(v,_,x){const E=concat(prefixToUint5Array(v),new Uint8Array(1)),A=getTypeBits(_)+getHashSizeBits(x),P=toUint5Array(concat(new Uint8Array([A]),x)),T=concat(concat(E,P),new Uint8Array(8)),O=concat(P,checksumToUint5Array(polymod(T)));return v+":"+base32.encode(O)}cashaddr.encode=encode$m;function decode$j(v){const _=v.toLowerCase().split(":");(0,validation_1.validate)(_.length===2,"Missing prefix: "+v+".");const x=_[0],E=base32.decode(_[1]);(0,validation_1.validate)(validChecksum(x,E),"Invalid checksum: "+v+".");const A=fromUint5Array(E.subarray(0,-8)),P=A[0],T=A.subarray(1);(0,validation_1.validate)(getHashSize(P)===T.length*8,"Invalid hash size: "+v+".");const O=getType(P);return{prefix:x,type:O,hash:T}}cashaddr.decode=decode$j;function prefixToUint5Array(v){for(var _=new Uint8Array(v.length),x=0;x<v.length;++x)_[x]=v[x].charCodeAt(0)&31;return _}function checksumToUint5Array(v){for(var _=new Uint8Array(8),x=0;x<8;++x)_[7-x]=v.and(31).toJSNumber(),v=v.shiftRight(5);return _}function getTypeBits(v){switch(v){case"P2PKH":return 0;case"P2SH":return 8;default:throw new Error("Invalid type: "+v+".")}}function getType(v){switch(v&120){case 0:return"P2PKH";case 8:return"P2SH";default:throw new Error("Invalid address type in version byte: "+v+".")}}function getHashSizeBits(v){switch(v.length*8){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new Error("Invalid hash size: "+v.length+".")}}function getHashSize(v){switch(v&7){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}function toUint5Array(v){return convertBits.convert(v,8,5,!1)}function fromUint5Array(v){return convertBits.convert(v,5,8,!0)}function concat(v,_){var x=new Uint8Array(v.length+_.length);return x.set(v),x.set(_,v.length),x}function polymod(v){for(var _=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],x=bigInt(1),E=0;E<v.length;++E){var A=v[E],P=x.shiftRight(35);x=x.and(34359738367).shiftLeft(5).xor(A);for(var T=0;T<_.length;++T)P.shiftRight(T).and(1).equals(1)&&(x=x.xor(_[T]))}return x.xor(1)}function validChecksum(v,_){var x=concat(prefixToUint5Array(v),new Uint8Array(1)),E=concat(x,_);return polymod(E).equals(0)}var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding$1(_,v,x);return __setModuleDefault$1(_,v),_};Object.defineProperty(bitcoincash,"__esModule",{value:!0}),bitcoincash.convert2LegacyAddress=bitcoincash.isCashAddress=bitcoincash.ValidateBitcashP2PkHAddress=bitcoincash.GetBitcashP2PkHAddressByPublicKey=bitcoincash.GetBitcashAddressByPublicKey=bitcoincash.GetBitcashAddressByHash=void 0;const crypto_1$1=crypto$4,cashAddrJs=__importStar$1(cashaddr),payments$4=__importStar$1(payments$8);function GetBitcashAddressByHash(v,_,x){return cashAddrJs.encode(v,_,x)}bitcoincash.GetBitcashAddressByHash=GetBitcashAddressByHash;function GetBitcashAddressByPublicKey(v,_,x){const E=(0,crypto_1$1.hash160)(dist$4.Buffer.from(x));return GetBitcashAddressByHash(v,_,E)}bitcoincash.GetBitcashAddressByPublicKey=GetBitcashAddressByPublicKey;function GetBitcashP2PkHAddressByPublicKey(v){const _=(0,crypto_1$1.hash160)(dist$4.Buffer.from(v));return GetBitcashAddressByHash("bitcoincash","P2PKH",_)}bitcoincash.GetBitcashP2PkHAddressByPublicKey=GetBitcashP2PkHAddressByPublicKey;function ValidateBitcashP2PkHAddress(v){try{v.indexOf(":")===-1&&(v="bitcoincash:"+v);const{prefix:_,type:x,hash:E}=cashAddrJs.decode(v);return x==="P2PKH"&&E.length===20}catch{return!1}}bitcoincash.ValidateBitcashP2PkHAddress=ValidateBitcashP2PkHAddress;function isCashAddress(v){try{return v.startsWith("bitcoincash:")||(v="bitcoincash:"+v,cashAddrJs.decode(v)),!0}catch{return!1}}bitcoincash.isCashAddress=isCashAddress;function convert2LegacyAddress(v,_){v.indexOf(":")===-1&&(v="bitcoincash:"+v);const{type:x,hash:E}=cashAddrJs.decode(v);if(x=="P2PKH")return payments$4.p2pkh({hash:dist$4.Buffer.from(E),network:_}).address;if(x=="P2SH")return payments$4.p2sh({hash:dist$4.Buffer.from(E),network:_}).address;throw new Error("convert2LegacyAddress error")}bitcoincash.convert2LegacyAddress=convert2LegacyAddress;var type={};Object.defineProperty(type,"__esModule",{value:!0});var inscribe$1={},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,_,x,E){E===void 0&&(E=x);var A=Object.getOwnPropertyDescriptor(_,x);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(v,E,A)}:function(v,_,x,E){E===void 0&&(E=x),v[E]=_[x]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,_){Object.defineProperty(v,"default",{enumerable:!0,value:_})}:function(v,_){v.default=_}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&__createBinding(_,v,x);return __setModuleDefault(_,v),_};Object.defineProperty(inscribe$1,"__esModule",{value:!0}),inscribe$1.inscribe=inscribe$1.InscriptionTool=void 0;const bitcoin=__importStar(requireBitcoinjsLib()),crypto_lib_1$3=requireDist$1(),taproot=__importStar(taproot$1),bcrypto$6=__importStar(crypto$4),transaction_1$4=transaction$1,txBuild_1$1=requireTxBuild(),schnorr=crypto_lib_1$3.signUtil.schnorr.secp256k1.schnorr,defaultTxVersion=2,defaultSequenceNum=4294967293,defaultRevealOutValue=546,defaultMinChangeValue=546,maxStandardTxWeight=4e6/10;class InscriptionTool{constructor(){this.network=bitcoin.networks.bitcoin,this.inscriptionTxCtxDataList=[],this.revealTxs=[],this.commitTx=new bitcoin.Transaction,this.commitTxPrevOutputFetcher=[],this.revealTxPrevOutputFetcher=[],this.mustCommitTxFee=0,this.mustRevealTxFees=[],this.commitAddrs=[]}static newInscriptionTool(_,x){const E=new InscriptionTool;E.network=_;const A=x.revealOutValue||defaultRevealOutValue,P=x.minChangeValue||defaultMinChangeValue,T=x.commitTxPrevOutputList[0].privateKey;x.inscriptionDataList.forEach(C=>{E.inscriptionTxCtxDataList.push(createInscriptionTxCtxData(_,C,T))});const O=E.buildEmptyRevealTx(_,A,x.revealFeeRate);return E.buildCommitTx(_,x.commitTxPrevOutputList,x.changeAddress,O,x.commitFeeRate,P)||(E.signCommitTx(x.commitTxPrevOutputList),E.completeRevealTx()),E}buildEmptyRevealTx(_,x,E){let A=0;const P=[],T=[],O=[];return this.inscriptionTxCtxDataList.forEach((k,C)=>{const U=new bitcoin.Transaction;U.version=defaultTxVersion,U.addInput(dist$4.Buffer.alloc(32),C,defaultSequenceNum),U.addOutput(k.revealPkScript,x);const N=dist$4.Buffer.alloc(64),H=dist$4.Buffer.alloc(33),D=[];D.push(N),D.push(k.inscriptionScript),D.push(H);const j=Math.floor((U.byteLength()+Math.floor(((0,transaction_1$4.vectorSize)(D)+2+3)/4))*E),V=x+j;k.revealTxPrevOutput={pkScript:k.commitTxAddressPkScript,value:V},A+=V,P.push(U),T.push(j),O.push(k.commitTxAddress)}),this.revealTxs=P,this.mustRevealTxFees=T,this.commitAddrs=O,A}buildCommitTx(_,x,E,A,P,T){let O=0;const k=new bitcoin.Transaction;k.version=defaultTxVersion,x.forEach(D=>{const j=crypto_lib_1$3.base.reverseBuffer(crypto_lib_1$3.base.fromHex(D.txId));k.addInput(j,D.vOut,defaultSequenceNum),this.commitTxPrevOutputFetcher.push(D.amount),O+=D.amount}),this.inscriptionTxCtxDataList.forEach(D=>{k.addOutput(D.revealTxPrevOutput.pkScript,D.revealTxPrevOutput.value)});const C=bitcoin.address.toOutputScript(E,_);k.addOutput(C,0);const U=k.clone();signTx(U,x,this.network);const N=Math.floor(U.virtualSize()*P),H=O-A-N;if(H>=T)k.outs[k.outs.length-1].value=H;else{k.outs=k.outs.slice(0,k.outs.length-1),U.outs=U.outs.slice(0,U.outs.length-1);const D=Math.floor(U.virtualSize()*P);if(O-A-D<0)return this.mustCommitTxFee=N,!0}return this.commitTx=k,!1}signCommitTx(_){signTx(this.commitTx,_,this.network)}completeRevealTx(){this.revealTxs.forEach((_,x)=>{_.ins[0].hash=this.commitTx.getHash();const E=[this.inscriptionTxCtxDataList[x].revealTxPrevOutput.pkScript],A=[this.inscriptionTxCtxDataList[x].revealTxPrevOutput.value];this.revealTxPrevOutputFetcher.push(this.inscriptionTxCtxDataList[x].revealTxPrevOutput.value);const P=_.hashForWitnessV1(0,E,A,bitcoin.Transaction.SIGHASH_DEFAULT,this.inscriptionTxCtxDataList[x].hash),T=dist$4.Buffer.from(schnorr.sign(P,this.inscriptionTxCtxDataList[x].privateKey,crypto_lib_1$3.base.randomBytes(32)));_.ins[0].witness=[dist$4.Buffer.from(T),...this.inscriptionTxCtxDataList[x].witness];const O=_.weight();if(O>maxStandardTxWeight)throw new Error(`reveal(index ${x}) transaction weight greater than ${maxStandardTxWeight} (MAX_STANDARD_TX_WEIGHT): ${O}`)})}calculateFee(){let _=0;this.commitTx.ins.forEach((E,A)=>{_+=this.commitTxPrevOutputFetcher[A]}),this.commitTx.outs.forEach(E=>{_-=E.value});let x=[];return this.revealTxs.forEach((E,A)=>{let P=0;P+=this.revealTxPrevOutputFetcher[A],P-=E.outs[0].value,x.push(P)}),{commitTxFee:_,revealTxFees:x}}}inscribe$1.InscriptionTool=InscriptionTool;function signTx(v,_,x){v.ins.forEach((E,A)=>{const P=(0,txBuild_1$1.getAddressType)(_[A].address,x),T=crypto_lib_1$3.base.fromHex((0,txBuild_1$1.privateKeyFromWIF)(_[A].privateKey,x)),O=crypto_lib_1$3.base.toHex(T),k=(0,txBuild_1$1.private2public)(O);if(P==="segwit_taproot"){const C=_.map(j=>bitcoin.address.toOutputScript(j.address,x)),U=_.map(j=>j.amount),N=v.hashForWitnessV1(A,C,U,bitcoin.Transaction.SIGHASH_DEFAULT),H=taproot.taprootTweakPrivKey(T),D=dist$4.Buffer.from(schnorr.sign(N,H,crypto_lib_1$3.base.randomBytes(32)));E.witness=[dist$4.Buffer.from(D)]}else if(P==="legacy"){const C=bitcoin.address.toOutputScript(_[A].address,x),U=v.hashForSignature(A,C,bitcoin.Transaction.SIGHASH_ALL),N=(0,txBuild_1$1.sign)(U,O),H=bitcoin.payments.p2pkh({signature:bitcoin.script.signature.encode(N,bitcoin.Transaction.SIGHASH_ALL),pubkey:k});E.script=H.input}else{const C=bcrypto$6.hash160(k),U=dist$4.Buffer.of(25,118,169,20,...C,136,172),N=_[A].amount,H=v.hashForWitness(A,U,N,bitcoin.Transaction.SIGHASH_ALL),D=(0,txBuild_1$1.sign)(H,O);E.witness=[bitcoin.script.signature.encode(D,bitcoin.Transaction.SIGHASH_ALL),k];const j=dist$4.Buffer.of(22,0,20,...C);P==="segwit_nested"&&(E.script=j)}})}function createInscriptionTxCtxData(v,_,x){const E=crypto_lib_1$3.base.fromHex((0,txBuild_1$1.privateKeyFromWIF)(x,v)),A=(0,txBuild_1$1.wif2Public)(x,v).slice(1),P=bitcoin.script.OPS,T=[];T.push(A),T.push(P.OP_CHECKSIG),T.push(P.OP_FALSE),T.push(P.OP_IF),T.push(dist$4.Buffer.from("ord")),T.push(P.OP_DATA_1),T.push(P.OP_DATA_1),T.push(dist$4.Buffer.from(_.contentType)),T.push(P.OP_0);const O=520;let k=dist$4.Buffer.from(_.body),C=k.length;for(let re=0;re<C;re+=O){let ee=re+O;ee>C&&(ee=C),T.push(k.slice(re,ee))}T.push(P.OP_ENDIF);const U=bitcoin.script.compile(T),N={output:U},H={output:U,redeemVersion:192},{output:D,witness:j,hash:V,address:X}=bitcoin.payments.p2tr({internalPubkey:A,scriptTree:N,redeem:H,network:v});return{privateKey:E,inscriptionScript:U,commitTxAddress:X,commitTxAddressPkScript:D,witness:j,hash:V,revealTxPrevOutput:{pkScript:dist$4.Buffer.alloc(0),value:0},revealPkScript:bitcoin.address.toOutputScript(_.revealAddr,v)}}function inscribe(v,_){const x=InscriptionTool.newInscriptionTool(v,_);return x.mustCommitTxFee>0?{commitTx:"",revealTxs:[],commitTxFee:x.mustCommitTxFee,revealTxFees:x.mustRevealTxFees,commitAddrs:x.commitAddrs}:{commitTx:x.commitTx.toHex(),revealTxs:x.revealTxs.map(E=>E.toHex()),...x.calculateFee(),commitAddrs:x.commitAddrs}}inscribe$1.inscribe=inscribe;var message={};Object.defineProperty(message,"__esModule",{value:!0}),message.getMPCSignedMessage=message.verify=message.sign=void 0;const crypto_lib_1$2=requireDist$1(),txBuild_1=requireTxBuild(),MAGIC_BYTES=dist$4.Buffer.from(`Bitcoin Signed Message:
`);function varintBufNum(v){let _;return v<253?(_=dist$4.Buffer.alloc(1),_.writeUInt8(v,0)):v<65536?(_=dist$4.Buffer.alloc(1+2),_.writeUInt8(253,0),_.writeUInt16LE(v,1)):v<4294967296?(_=dist$4.Buffer.alloc(1+4),_.writeUInt8(254,0),_.writeUInt32LE(v,1)):(_=dist$4.Buffer.alloc(1+8),_.writeUInt8(255,0),_.writeInt32LE(v&-1,1),_.writeUInt32LE(Math.floor(v/4294967296),5)),_}function magicHash(v){const _=varintBufNum(MAGIC_BYTES.length),x=dist$4.Buffer.from(v),E=varintBufNum(x.length),A=dist$4.Buffer.concat([_,MAGIC_BYTES,E,x]);return crypto_lib_1$2.base.doubleSha256(A)}function toCompact(v,_,x){if(!(v===0||v===1||v===2||v===3))throw new Error("i must be equal to 0, 1, 2, or 3");let E=v+27+4;return x||(E=E-4),dist$4.Buffer.concat([Uint8Array.of(E),Uint8Array.from(_)])}function sign(v,_,x){console.warn("---message sign start---"),console.log("wifPrivate",v),console.log("message",_),console.log("network",x);const E=magicHash(_);if(!v)return crypto_lib_1$2.base.toHex(E);const A=crypto_lib_1$2.base.fromHex((0,txBuild_1.privateKeyFromWIF)(v,x)),{signature:P,recovery:T}=crypto_lib_1$2.signUtil.secp256k1.sign(dist$4.Buffer.from(E),A);return console.log("signature",P),console.log("recovery",T),console.log("toCompact(recovery, signature, true)",toCompact(T,P,!0)),crypto_lib_1$2.base.toBase64(toCompact(T,P,!0))}message.sign=sign;function verify(v,_,x){const E=magicHash(_),A=crypto_lib_1$2.base.fromBase64(x),P=A[0]-27-4,T=A.slice(1);return crypto_lib_1$2.signUtil.secp256k1.verify(dist$4.Buffer.from(E),T,P,crypto_lib_1$2.base.fromHex(v))}message.verify=verify;function getMPCSignedMessage$1(v,_,x){const E=crypto_lib_1$2.base.fromHex(_),A=E.slice(0,32),P=E.slice(32,64),T=crypto_lib_1$2.signUtil.secp256k1.getV(crypto_lib_1$2.base.fromHex(v),crypto_lib_1$2.base.toHex(A),crypto_lib_1$2.base.toHex(P),crypto_lib_1$2.base.fromHex(x));return crypto_lib_1$2.base.toBase64(toCompact(T,E,!0))}message.getMPCSignedMessage=getMPCSignedMessage$1;var BtcWallet={},dist$2={},common={};Object.defineProperty(common,"__esModule",{value:!0});var currency={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.CoinCurveMap=v.MultiAddressCoins=v.segwitType=v.Currency=void 0;var _;(function(A){A[A.NULL=-1]="NULL",A[A.BTC=0]="BTC",A[A.TBTC=1]="TBTC",A[A.ETH=60]="ETH",A[A.LTC=2]="LTC",A[A.DOGE=3]="DOGE",A[A.BCH=145]="BCH",A[A.BSV=236]="BSV",A[A.TRX=195]="TRX",A[A.SOL=501]="SOL",A[A.APTOS=637]="APTOS",A[A.OMNI_USDT=20001]="OMNI_USDT",A[A.OMNI_USDT_TEST=20002]="OMNI_USDT_TEST",A[A.SUI=784]="SUI",A[A.ATOM=118]="ATOM",A[A.OSMO=1e3]="OSMO",A[A.EVMOS=1001]="EVMOS",A[A.AXL=1002]="AXL",A[A.CRO=1003]="CRO",A[A.Iris=1004]="Iris",A[A.Juno=1005]="Juno",A[A.Kava=1006]="Kava",A[A.Kujira=1007]="Kujira",A[A.SCRT=1008]="SCRT",A[A.Stargaze=1009]="Stargaze",A[A.Terra=1010]="Terra",A[A.ZKSPACE=1011]="ZKSPACE",A[A.ZKSYNC=804]="ZKSYNC",A[A.Stx=5757]="Stx",A[A.SEI=2837]="SEI",A[A.WAX=14001]="WAX",A[A.Starknet=9004]="Starknet",A[A.ADA=1815]="ADA",A[A.INJ=2892]="INJ",A[A.Celestia=2854]="Celestia",A[A.DYDX=2897]="DYDX",A[A.Kaspa=111111]="Kaspa"})(_=v.Currency||(v.Currency={})),function(A){A[A.SEGWIT_NESTED=1]="SEGWIT_NESTED",A[A.SEGWIT_NESTED_49=2]="SEGWIT_NESTED_49",A[A.SEGWIT_NATIVE=3]="SEGWIT_NATIVE",A[A.SEGWIT_TAPROOT=4]="SEGWIT_TAPROOT"}(v.segwitType||(v.segwitType={})),v.MultiAddressCoins=[_.BTC,_.TBTC,_.LTC,_.DOGE,_.BSV,_.OMNI_USDT,_.OMNI_USDT_TEST];const x="secp256k1",E="ed25519";v.CoinCurveMap=new Map([[_.BTC,x],[_.TBTC,x],[_.ETH,x],[_.LTC,x],[_.DOGE,x],[_.BCH,x],[_.BSV,x],[_.TRX,x],[_.OMNI_USDT,x],[_.OMNI_USDT_TEST,x],[_.ATOM,x],[_.OSMO,x],[_.EVMOS,x],[_.AXL,x],[_.CRO,x],[_.Iris,x],[_.Juno,x],[_.Kava,x],[_.Kujira,x],[_.SCRT,x],[_.Stargaze,x],[_.Terra,x],[_.SEI,x],[_.INJ,x],[_.Celestia,x],[_.DYDX,x],[_.SOL,E],[_.APTOS,E],[_.SUI,E]])})(currency);var error={};Object.defineProperty(error,"__esModule",{value:!0}),error.EstimateFeeError=error.validSignedTransactionError=error.GetPayLoadError=error.HardwareDerivePubKeyError=error.CalcTxHashError=error.SignMsgStep3Error=error.SignMsgSetupError=error.Ed25519Step3Error=error.Ed25519Step2Error=error.Ed25519Step1Error=error.Ed25519SetupError=error.EcdsaStep3Error=error.EcdsaStep2Error=error.EcdsaStep1Error=error.EcdsaSetupError=error.MPCShakeHandsError=error.MPCStepError=error.MPCAesKeyMissError=error.GetHardWareMessageHashError=error.GetHardwareSignedTransactionError=error.GetHardwareRawTransactionError=error.GetMpcTransactionError=error.GetMpcRawTransactionError=error.DerivePathError=error.GenMnemonicError=error.GenPrivateKeyError=error.UnsupportedCoinError=error.SignMsgError=error.SignTxError=error.ValidAddressError=error.NewAddressError=error.NotImplementedError=void 0,error.NotImplementedError="no implementation method",error.NewAddressError="generate address error",error.ValidAddressError="valid address error",error.SignTxError="sign tx error",error.SignMsgError="sign message error",error.UnsupportedCoinError="unsupported currency",error.GenPrivateKeyError="generate private key error",error.GenMnemonicError="generate mnemonic error",error.DerivePathError="derive hdPath error",error.GetMpcRawTransactionError="get mpc raw transaction error",error.GetMpcTransactionError="get mpc transaction error",error.GetHardwareRawTransactionError="get hardware raw transaction error",error.GetHardwareSignedTransactionError="get hardware signed transaction error",error.GetHardWareMessageHashError="get hardware message hash error",error.MPCAesKeyMissError="mpc get aes key error",error.MPCStepError="mpc step error",error.MPCShakeHandsError="mpc shake hands error",error.EcdsaSetupError="ecdsa setup error",error.EcdsaStep1Error="ecdsa step1 error",error.EcdsaStep2Error="ecdsa step2 error",error.EcdsaStep3Error="ecdsa step3 error",error.Ed25519SetupError="ed25519 setup error",error.Ed25519Step1Error="ed25519 step1 error",error.Ed25519Step2Error="ed25519 step2 error",error.Ed25519Step3Error="ed25519 step3 error",error.SignMsgSetupError="sign message setup error",error.SignMsgStep3Error="sign message step3 error",error.CalcTxHashError="calculate tx hash error",error.HardwareDerivePubKeyError="derive sub pub key error",error.GetPayLoadError="get payload error",error.validSignedTransactionError="valid signed transaction error",error.EstimateFeeError="estimate fee error";var wallet={};Object.defineProperty(wallet,"__esModule",{value:!0}),wallet.BaseWallet=wallet.secp256k1SignTest=void 0;const error_1=error,crypto_lib_1$1=requireDist$1();function secp256k1SignTest(v){const _=crypto_lib_1$1.base.sha256("secp256k1-test"),x=crypto_lib_1$1.signUtil.secp256k1.publicKeyCreate(v,!1),{signature:E,recovery:A}=crypto_lib_1$1.signUtil.secp256k1.sign(dist$4.Buffer.from(_),v);return crypto_lib_1$1.signUtil.secp256k1.verify(_,E,A,x)}wallet.secp256k1SignTest=secp256k1SignTest;class BaseWallet{getRandomPrivateKey(){try{for(;;){const _=crypto_lib_1$1.base.randomBytes(32);if(secp256k1SignTest(_))return Promise.resolve(crypto_lib_1$1.base.toHex(_,!0))}}catch{}return Promise.reject(error_1.GenPrivateKeyError)}getDerivedPrivateKey(_){return crypto_lib_1$1.bip39.mnemonicToSeed(_.mnemonic).then(x=>{let E=crypto_lib_1$1.bip32.fromSeed(x).derivePath(_.hdPath);if(E.privateKey){let A=crypto_lib_1$1.base.toHex(E.privateKey);return Promise.resolve("0x"+A)}else return Promise.reject(error_1.GenPrivateKeyError)}).catch(x=>Promise.reject(error_1.GenPrivateKeyError))}getDerivedPath(_){return Promise.reject(error_1.NotImplementedError)}validPrivateKey(_){return Promise.reject(error_1.NotImplementedError)}signMessage(_){return Promise.reject(error_1.NotImplementedError)}verifyMessage(_){return Promise.reject(error_1.NotImplementedError)}ecRecover(_,x){return Promise.reject(error_1.NotImplementedError)}getAddressByPublicKey(_){return Promise.reject(error_1.NotImplementedError)}getMPCRawTransaction(_){return Promise.reject(error_1.NotImplementedError)}getMPCTransaction(_){return Promise.reject(error_1.NotImplementedError)}getMPCRawMessage(_){return Promise.reject(error_1.NotImplementedError)}getMPCSignedMessage(_){return Promise.reject(error_1.NotImplementedError)}getHardWareRawTransaction(_){return Promise.reject(error_1.NotImplementedError)}getHardWareSignedTransaction(_){return Promise.reject(error_1.NotImplementedError)}getHardWareMessageHash(_){return Promise.reject(error_1.NotImplementedError)}calcTxHash(_){return Promise.reject(error_1.NotImplementedError)}getRawTransaction(_){return Promise.reject(error_1.NotImplementedError)}validSignedTransaction(_){return Promise.reject(error_1.NotImplementedError)}estimateFee(_){return Promise.reject(error_1.NotImplementedError)}}wallet.BaseWallet=BaseWallet;var basic={},ed25519={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.ed25519_getDerivedPrivateKey=v.isValidPath=v.ed25519_getRandomPrivateKey=v.ed25519SignTest=void 0;const _=requireDist$1();function x(H){const D=_.base.sha256("ed25519-test"),j=_.signUtil.ed25519.publicKeyCreate(H),V=_.signUtil.ed25519.sign(D,H);return _.signUtil.ed25519.verify(D,V,j)}v.ed25519SignTest=x;function E(H,D){for(;;){const j=_.base.randomBytes(32);if(_.signUtil.ed25519.privateKeyVerify(j)&&x(j)){const V=_.signUtil.ed25519.publicKeyCreate(j),X=H?_.base.concatBytes(j,V):j;return D==="base58"?_.base.toBase58(X):_.base.toHex(X)}}}v.ed25519_getRandomPrivateKey=E;const A=new RegExp("^m(\\/[0-9]+')+$"),P=H=>H.replace("'",""),T=2147483648;function O(H){const D=_.base.hmacSHA512("ed25519 seed",H),j=D.slice(0,32),V=D.slice(32);return{key:j,chainCode:V}}function k({key:H,chainCode:D},j){const V=dist$4.Buffer.allocUnsafe(4);V.writeUInt32BE(j,0);const X=dist$4.Buffer.concat([dist$4.Buffer.alloc(1,0),H,V]),re=_.base.hmacSHA512(D,X),ee=re.slice(0,32),fe=re.slice(32);return{key:ee,chainCode:fe}}const C=H=>A.test(H)?!H.split("/").slice(1).map(P).some(isNaN):!1;v.isValidPath=C;function U(H,D,j=T){if(!(0,v.isValidPath)(H))throw new Error("Invalid derivation path");const{key:V,chainCode:X}=O(D);return H.split("/").slice(1).map(P).map(ee=>parseInt(ee,10)).reduce((ee,fe)=>k(ee,fe+j),{key:V,chainCode:X})}async function N(H,D,j){const V=await _.bip39.mnemonicToSeed(H.mnemonic),X=U(H.hdPath,V).key,re=_.signUtil.ed25519.publicKeyCreate(X),ee=D?_.base.concatBytes(X,re):X;return j==="base58"?Promise.resolve(_.base.toBase58(ee)):Promise.resolve(_.base.toHex(ee))}v.ed25519_getDerivedPrivateKey=N})(ed25519);var typeUtils={};Object.defineProperty(typeUtils,"__esModule",{value:!0}),typeUtils.jsonStringifyUniform=typeUtils.cloneObject=typeUtils.assertBufferLength=typeUtils.convert2BigNumber=typeUtils.convert2Number=void 0;const crypto_lib_1=requireDist$1();function convert2Number(v){if(v!=null)return typeof v=="string"?parseInt(v):v}typeUtils.convert2Number=convert2Number;function convert2BigNumber(v){if(v!=null)return crypto_lib_1.BigNumber.isBigNumber(v)?v:new crypto_lib_1.BigNumber(v)}typeUtils.convert2BigNumber=convert2BigNumber;function assertBufferLength(v,_){if(v.length!=_)throw Error("buffer length is illegal")}typeUtils.assertBufferLength=assertBufferLength;function cloneObject(v){return JSON.parse(JSON.stringify(v))}typeUtils.cloneObject=cloneObject;function jsonStringifyUniform(v){return JSON.stringify(v,(_,x)=>x&&(x.type==="Buffer"||x instanceof Uint8Array?crypto_lib_1.base.toHex(x):typeof x=="bigint"?x.toString():x))}typeUtils.jsonStringifyUniform=jsonStringifyUniform,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(E,A,P,T){T===void 0&&(T=P);var O=Object.getOwnPropertyDescriptor(A,P);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[P]}}),Object.defineProperty(E,T,O)}:function(E,A,P,T){T===void 0&&(T=P),E[T]=A[P]}),x=commonjsGlobal&&commonjsGlobal.__exportStar||function(E,A){for(var P in E)P!=="default"&&!Object.prototype.hasOwnProperty.call(A,P)&&_(A,E,P)};Object.defineProperty(v,"__esModule",{value:!0}),x(ed25519,v),x(typeUtils,v)}(basic),function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(E,A,P,T){T===void 0&&(T=P);var O=Object.getOwnPropertyDescriptor(A,P);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[P]}}),Object.defineProperty(E,T,O)}:function(E,A,P,T){T===void 0&&(T=P),E[T]=A[P]}),x=commonjsGlobal&&commonjsGlobal.__exportStar||function(E,A){for(var P in E)P!=="default"&&!Object.prototype.hasOwnProperty.call(A,P)&&_(A,E,P)};Object.defineProperty(v,"__esModule",{value:!0}),x(common,v),x(currency,v),x(error,v),x(wallet,v),x(basic,v)}(dist$2);var hasRequiredBtcWallet;function requireBtcWallet(){return hasRequiredBtcWallet||(hasRequiredBtcWallet=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(re,ee,fe,le){le===void 0&&(le=fe);var pe=Object.getOwnPropertyDescriptor(ee,fe);(!pe||("get"in pe?!ee.__esModule:pe.writable||pe.configurable))&&(pe={enumerable:!0,get:function(){return ee[fe]}}),Object.defineProperty(re,le,pe)}:function(re,ee,fe,le){le===void 0&&(le=fe),re[le]=ee[fe]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(re,ee){Object.defineProperty(re,"default",{enumerable:!0,value:ee})}:function(re,ee){re.default=ee}),E=commonjsGlobal&&commonjsGlobal.__importStar||function(re){if(re&&re.__esModule)return re;var ee={};if(re!=null)for(var fe in re)fe!=="default"&&Object.prototype.hasOwnProperty.call(re,fe)&&_(ee,re,fe);return x(ee,re),ee};Object.defineProperty(v,"__esModule",{value:!0}),v.DogeWallet=v.dogeCoin=v.BsvWallet=v.BchWallet=v.LtcWallet=v.litecoin=v.UsdtTestWallet=v.UsdtWallet=v.number2Hex=v.TBtcWallet=v.BtcWallet=v.BITCOIN_MESSAGE_BIP0322_SIMPLE=v.BITCOIN_MESSAGE_ECDSA=v.convert2UtxoTx=void 0;const A=dist$2,P=requireDist$1(),T=E(requireDist());function O(re){const ee=(0,A.cloneObject)(re);return ee.inputs.forEach(fe=>{fe.amount=(0,A.convert2Number)(fe.amount)}),ee.outputs.forEach(fe=>{fe.amount=(0,A.convert2Number)(fe.amount)}),ee.omni&&(ee.omni.amount=(0,A.convert2Number)(ee.omni.amount)),re.dustSize&&(ee.dustSize=(0,A.convert2Number)(re.dustSize)),ee}v.convert2UtxoTx=O,v.BITCOIN_MESSAGE_ECDSA=0,v.BITCOIN_MESSAGE_BIP0322_SIMPLE=1;class k extends A.BaseWallet{network(){return T.networks.bitcoin}async getDerivedPath(ee){return ee.segwitType?ee.segwitType==A.segwitType.SEGWIT_NESTED?`m/84'/0'/0'/0/${ee.index}`:ee.segwitType==A.segwitType.SEGWIT_NESTED_49?`m/49'/0'/0'/0/${ee.index}`:ee.segwitType==A.segwitType.SEGWIT_NATIVE?`m/84'/0'/0'/0/${ee.index}`:ee.segwitType==A.segwitType.SEGWIT_TAPROOT?`m/86'/0'/0'/0/${ee.index}`:Promise.reject(A.DerivePathError):`m/44'/0'/0'/0/${ee.index}`}async validPrivateKey(ee){let fe;try{const{version:pe}=T.wif.decode(ee.privateKey);fe=pe===this.network().wif}catch{fe=!1}const le={isValid:fe,privateKey:ee.privateKey};return Promise.resolve(le)}async getNewAddress(ee){try{let fe=this.network(),le=ee.privateKey;const pe=ee.addressType||"Legacy",ie=T.wif2Public(le,fe);let he;pe==="Legacy"?he=T.payments.p2pkh({pubkey:ie,network:fe}).address:pe==="segwit_native"?he=T.payments.p2wpkh({pubkey:ie,network:fe}).address:pe==="segwit_nested"?he=T.payments.p2sh({redeem:T.payments.p2wpkh({pubkey:ie,network:fe})}).address:pe==="segwit_taproot"&&(he=T.payments.p2tr({internalPubkey:ie.slice(1),network:fe}).address);let ae={address:he||"",publicKey:P.base.toHex(pe==="segwit_taproot"?ie.slice(1):ie),compressedPublicKey:P.base.toHex(ie)};return Promise.resolve(ae)}catch{return Promise.reject(A.NewAddressError)}}async validAddress(ee){let fe=!1,le=this.network();try{T.address.toOutputScript(ee.address,le)&&(fe=!0)}catch{}ee.addressType&&(fe=ee.addressType===T.getAddressType(ee.address,le));let pe={isValid:fe,address:ee.address};return Promise.resolve(pe)}async signTransaction(ee){const fe=ee.data.type||0;if(fe===1)try{return Promise.resolve(T.inscribe(this.network(),ee.data))}catch{return Promise.reject(A.SignTxError)}else if(fe===2)try{return Promise.resolve(T.psbtSign(ee.data.psbt,ee.privateKey,this.network()))}catch{return Promise.reject(A.SignTxError)}else{let le=null;try{const pe=ee.privateKey,ie=O(ee.data);return le=T.signBtc(ie,pe,this.network()),Promise.resolve(le)}catch{return Promise.reject(A.SignTxError)}}}getRandomPrivateKey(){try{let ee=this.network();for(;;){const fe=P.base.randomBytes(32);if((0,A.secp256k1SignTest)(fe)){const le=T.private2Wif(fe,ee);return Promise.resolve(le)}}}catch{return Promise.reject(A.GenPrivateKeyError)}}getDerivedPrivateKey(ee){let fe=this.network();return P.bip39.mnemonicToSeed(ee.mnemonic).then(le=>{let pe=P.bip32.fromSeed(le).derivePath(ee.hdPath);if(!pe.privateKey)return Promise.reject(A.GenPrivateKeyError);const ie=T.private2Wif(pe.privateKey,fe);return Promise.resolve(ie)}).catch(le=>Promise.reject(A.GenPrivateKeyError))}getAddressByPublicKey(ee){try{const fe=this.network(),le=P.base.fromHex(ee.publicKey);if(ee.addressType){if(ee.addressType==="Legacy")return Promise.resolve(T.payments.p2pkh({pubkey:le,network:fe}).address);if(ee.addressType==="segwit_nested")return Promise.resolve(T.payments.p2sh({redeem:T.payments.p2wpkh({pubkey:le,network:fe})}).address);if(ee.addressType==="segwit_native")return Promise.resolve(T.payments.p2wpkh({pubkey:le,network:fe}).address);if(ee.addressType==="segwit_taproot")return Promise.resolve(T.payments.p2tr({internalPubkey:le.slice(1),network:fe}).address)}else{const pe=[];return pe.push({addressType:"Legacy",address:T.payments.p2pkh({pubkey:le,network:fe}).address}),pe.push({addressType:"segwit_nested",address:T.payments.p2sh({redeem:T.payments.p2wpkh({pubkey:le,network:fe})}).address}),pe.push({addressType:"segwit_native",address:T.payments.p2wpkh({pubkey:le,network:fe}).address}),Promise.resolve(pe)}}catch{}return Promise.reject(A.NewAddressError)}getMPCRawTransaction(ee){try{const fe=O(ee.data),le=[],ie={raw:T.signBtc(fe,"",this.network(),le),hash:le};return Promise.resolve(ie)}catch{return Promise.reject(A.GetMpcRawTransactionError)}}getMPCTransaction(ee){try{const fe=T.getMPCTransaction(ee.raw,ee.sigs,!1);return Promise.resolve(fe)}catch{return Promise.reject(A.GetMpcTransactionError)}}async getMPCRawMessage(ee){try{const fe=await this.signMessage(ee);return Promise.resolve({hash:fe})}catch{return Promise.reject(A.GetMpcRawTransactionError)}}async getMPCSignedMessage(ee){try{return Promise.resolve(T.message.getMPCSignedMessage(ee.hash,ee.sigs,ee.publicKey))}catch{return Promise.reject(A.GetMpcTransactionError)}}getHardWareRawTransaction(ee){try{const fe=ee.data.type||0,le=O(ee.data);if(fe===2){const pe=T.signBtc(le,"",this.network(),void 0,!0,!0),ie=le.dustSize||546;if(parseInt(pe)>=ie){const ae={address:le.address,amount:parseInt(pe),bip32Derivation:le.bip32Derivation};le.outputs.push(ae)}const he=T.buildPsbt(le,this.network());return Promise.resolve(he)}else{const pe=T.signBtc(le,"",this.network(),void 0,!0);return Promise.resolve(pe)}}catch{return Promise.reject(A.GetHardwareRawTransactionError)}}async calcTxHash(ee){try{return Promise.resolve(T.Transaction.fromHex(ee.data).getId())}catch{return Promise.reject(A.CalcTxHashError)}}signMessage(ee){try{const fe=ee.data;let le;return fe.type===v.BITCOIN_MESSAGE_ECDSA?(console.log("privateKey",ee.privateKey),console.log("typedMessage",fe),le=T.message.sign(ee.privateKey,fe.message,this.network())):le=T.bip0322.signSimple(fe.message,fe.address,ee.privateKey,this.network()),Promise.resolve(le)}catch{return Promise.reject(A.SignMsgError)}}async verifyMessage(ee){try{const fe=ee.data;if(fe.type===v.BITCOIN_MESSAGE_ECDSA){const le=T.message.verify(fe.publicKey,fe.message,ee.signature);return Promise.resolve(le)}else{const le=T.bip0322.verifySimple(fe.message,fe.address,ee.signature,fe.publicKey,this.network());return Promise.resolve(le)}}catch{return Promise.reject(A.SignMsgError)}}static async extractPsbtTransaction(ee){try{return Promise.resolve(T.extractPsbtTransaction(ee))}catch{return Promise.reject(A.SignMsgError)}}async validSignedTransaction(ee){try{ee.data&&ee.data.forEach(le=>le.value=le.amount);const fe=T.ValidSignedTransaction(ee.tx,ee.data,this.network());return Promise.resolve((0,A.jsonStringifyUniform)(fe))}catch{return Promise.reject(A.validSignedTransactionError)}}async estimateFee(ee){try{const fe=ee.data.type||0;if(fe===1)return Promise.reject(A.EstimateFeeError);if(fe===2)return Promise.reject(A.EstimateFeeError);{const le=O(ee.data),pe=T.estimateBtcFee(le,this.network());return Promise.resolve(pe)}}catch{return Promise.reject(A.EstimateFeeError)}}static async oneKeyBuildBtcTx(ee){try{return Promise.resolve(T.oneKeyBuildBtcTx(ee))}catch{return Promise.reject(A.SignTxError)}}}v.BtcWallet=k;class C extends k{network(){return T.networks.testnet}}v.TBtcWallet=C;function U(re,ee){let fe=re.toString(16);const le=ee-fe.length;if(le>0)for(let pe=0;pe<le;pe++)fe="0"+fe;return fe}v.number2Hex=U;class N extends k{async signTransaction(ee){let fe=null;try{const le=ee.privateKey,pe=O(ee.data);if(!pe.omni)return Promise.reject(A.SignTxError);const ie=U(pe.omni.coinType||31,8),he=U(pe.omni.amount,16),te={address:"",amount:0,omniScript:"6a146f6d6e6900000000"+ie+he};return pe.outputs.push(te),fe=T.signBtc(pe,le,this.network()),Promise.resolve(fe)}catch{return Promise.reject(A.SignTxError)}}async estimateFee(ee){try{const fe=O(ee.data);if(!fe.omni)return Promise.reject(A.EstimateFeeError);const le=U(fe.omni.coinType||31,8),pe=U(fe.omni.amount,16),he={address:"",amount:0,omniScript:"6a146f6d6e6900000000"+le+pe};fe.outputs.push(he);const ae=T.estimateBtcFee(fe,this.network());return Promise.resolve(ae)}catch{return Promise.reject(A.EstimateFeeError)}}getHardWareRawTransaction(ee){try{const fe=ee.data.type||0,le=O(ee.data);if(!le.omni)return Promise.reject(A.SignTxError);const pe=U(le.omni.coinType||31,8),ie=U(le.omni.amount,16),ae={address:"",amount:0,omniScript:"6a146f6d6e6900000000"+pe+ie};le.outputs.push(ae);let te;if(fe===2){const ue=T.signBtc(le,"",this.network(),void 0,!0,!0),ne={address:le.address,amount:parseInt(ue),bip32Derivation:le.bip32Derivation};le.outputs.push(ne),te=T.buildPsbt(le,this.network())}else te=T.signBtc(le,"",this.network(),void 0,!0);return Promise.resolve(te)}catch{return Promise.reject(A.GetHardwareRawTransactionError)}}}v.UsdtWallet=N;class H extends N{network(){return T.networks.testnet}}v.UsdtTestWallet=H,v.litecoin={messagePrefix:`Litecoin Signed Message:
`,bech32:"ltc",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176};class D extends k{network(){return v.litecoin}async getDerivedPath(ee){return ee.segwitType?ee.segwitType==A.segwitType.SEGWIT_NESTED?`m/84'/2'/0'/0/${ee.index}`:ee.segwitType==A.segwitType.SEGWIT_NESTED_49?`m/49'/2'/0'/0/${ee.index}`:ee.segwitType==A.segwitType.SEGWIT_NATIVE?`m/84'/2'/0'/0/${ee.index}`:Promise.reject(A.DerivePathError):`m/44'/2'/0'/0/${ee.index}`}}v.LtcWallet=D;class j extends k{async getDerivedPath(ee){return`m/44'/145'/0'/0/${ee.index}`}async getNewAddress(ee){try{let fe=this.network(),le=ee.privateKey;const pe=T.wif2Public(le,fe);let ae={address:T.GetBitcashP2PkHAddressByPublicKey(pe).replace("bitcoincash:","")||"",publicKey:P.base.toHex(pe)};return Promise.resolve(ae)}catch{return Promise.reject(A.NewAddressError)}}async validAddress(ee){let fe=!1;try{let pe=this.network();T.address.toOutputScript(ee.address,pe)&&(fe=!0)}catch{}fe||(fe=T.ValidateBitcashP2PkHAddress(ee.address));let le={isValid:fe,address:ee.address};return Promise.resolve(le)}async signTransaction(ee){let fe=null;try{const le=ee.privateKey,pe=O(ee.data);return pe.outputs.forEach(ie=>{T.isCashAddress(ie.address)&&(ie.address=T.convert2LegacyAddress(ie.address,this.network()))}),T.isCashAddress(pe.address)&&(pe.address=T.convert2LegacyAddress(pe.address,this.network())),fe=T.signBch(pe,le,this.network()),Promise.resolve(fe)}catch{return Promise.reject(A.SignTxError)}}async estimateFee(ee){try{const fe=O(ee.data);fe.outputs.forEach(pe=>{T.isCashAddress(pe.address)&&(pe.address=T.convert2LegacyAddress(pe.address,this.network()))}),T.isCashAddress(fe.address)&&(fe.address=T.convert2LegacyAddress(fe.address,this.network()));const le=T.estimateBchFee(fe,this.network());return Promise.resolve(le)}catch{return Promise.reject(A.EstimateFeeError)}}getMPCRawTransaction(ee){try{const fe=O(ee.data);fe.outputs.forEach(he=>{T.isCashAddress(he.address)&&(he.address=T.convert2LegacyAddress(he.address,this.network()))}),T.isCashAddress(fe.address)&&(fe.address=T.convert2LegacyAddress(fe.address,this.network()));const le=[],ie={raw:T.signBch(fe,"",this.network(),le),hash:le};return Promise.resolve(ie)}catch{return Promise.reject(A.GetMpcRawTransactionError)}}getAddressByPublicKey(ee){const fe=P.base.fromHex(ee.publicKey),le=T.GetBitcashP2PkHAddressByPublicKey(fe);return Promise.resolve(le.replace("bitcoincash:",""))}getMPCTransaction(ee){try{const fe=T.getMPCTransaction(ee.raw,ee.sigs,!0);return Promise.resolve(fe)}catch{return Promise.reject(A.GetMpcTransactionError)}}getHardWareRawTransaction(ee){try{const fe=O(ee.data);fe.outputs.forEach(pe=>{T.isCashAddress(pe.address)&&(pe.address=T.convert2LegacyAddress(pe.address,this.network()))}),T.isCashAddress(fe.address)&&(fe.address=T.convert2LegacyAddress(fe.address,this.network()));const le=T.signBch(fe,"",this.network(),void 0,!0);return Promise.resolve(le)}catch{return Promise.reject(A.GetHardwareRawTransactionError)}}}v.BchWallet=j;class V extends k{async getDerivedPath(ee){return`m/44'/236'/0'/0/${ee.index}`}async signTransaction(ee){let fe=null;try{const le=ee.privateKey,pe=O(ee.data);return fe=T.signBch(pe,le,this.network()),Promise.resolve(fe)}catch{return Promise.reject(A.SignTxError)}}async estimateFee(ee){try{const fe=O(ee.data),le=T.estimateBchFee(fe,this.network());return Promise.resolve(le)}catch{return Promise.reject(A.EstimateFeeError)}}getMPCRawTransaction(ee){try{const fe=O(ee.data),le=[],ie={raw:T.signBch(fe,"",this.network(),le),hash:le};return Promise.resolve(ie)}catch{return Promise.reject(A.GetMpcRawTransactionError)}}getMPCTransaction(ee){try{const fe=T.getMPCTransaction(ee.raw,ee.sigs,!0);return Promise.resolve(fe)}catch{return Promise.reject(A.GetMpcTransactionError)}}getHardWareRawTransaction(ee){try{const fe=O(ee.data),le=T.signBch(fe,"",this.network(),void 0,!0);return Promise.resolve(le)}catch{return Promise.reject(A.GetHardwareRawTransactionError)}}}v.BsvWallet=V,v.dogeCoin={messagePrefix:`Dogecoin Signed Message:
`,bech32:"bc",bip32:{public:49990397,private:49988504},pubKeyHash:30,scriptHash:22,wif:158};class X extends k{network(){return v.dogeCoin}}v.DogeWallet=X}(BtcWallet)),BtcWallet}var onekey={},hasRequiredOnekey;function requireOnekey(){if(hasRequiredOnekey)return onekey;hasRequiredOnekey=1,Object.defineProperty(onekey,"__esModule",{value:!0}),onekey.oneKeyBuildBtcTx=void 0;const v=requireBitcoinjsLib(),_=bufferutils$1,x=requireDist$1(),E=requireBtcWallet(),A=requireTxBuild(),P=networks$3,T={legacy:"SPENDADDRESS",segwit_native:"SPENDWITNESS",segwit_nested:"SPENDP2SHWITNESS",segwit_taproot:"SPENDTAPROOT"},O={legacy:"PAYTOADDRESS",segwit_native:"PAYTOWITNESS",segwit_nested:"PAYTOP2SHWITNESS",segwit_taproot:"PAYTOTAPROOT"};function k(H,D=P.bitcoin){const j=(0,E.convert2UtxoTx)(H);if(j.omni){const le=(0,E.number2Hex)(j.omni.coinType||31,8),pe=(0,E.number2Hex)(j.omni.amount,16),ie="6f6d6e6900000000"+le+pe;j.outputs.push({address:"",amount:0,omniScript:ie})}const V=parseInt((0,A.signBtc)(j,"",D,void 0,!0,!0)),X=H.dustSize||546;V>=X&&j.outputs.push({address:j.address,amount:V,derivationPath:j.derivationPath,isChange:!0});const re=[],ee=[];j.inputs.forEach(le=>{const pe=U(le.derivationPath);re.push({address_n:pe,prev_hash:le.txId,prev_index:le.vOut,amount:le.amount.toString(),script_type:T[(0,A.getAddressType)(le.address,D)]}),ee.push(C(le.nonWitnessUtxo,le.txId))});const fe=[];return j.outputs.forEach(le=>{le.isChange?fe.push({address_n:U(le.derivationPath),amount:le.amount.toString(),script_type:O[(0,A.getAddressType)(le.address,D)]}):le.omniScript?fe.push({amount:"0",op_return_data:le.omniScript,script_type:"PAYTOOPRETURN"}):fe.push({address:le.address,amount:le.amount.toString(),script_type:"PAYTOADDRESS"})}),{inputs:re,outputs:fe,refTxs:ee,coin:"btc"}}onekey.oneKeyBuildBtcTx=k;function C(H,D){const j=v.Transaction.fromHex(H),V=[];j.ins.forEach(re=>{V.push({prev_hash:x.base.toHex((0,_.reverseBuffer)(re.hash)),prev_index:re.index,script_sig:x.base.toHex(re.script),sequence:re.sequence})});const X=[];return j.outs.forEach(re=>{X.push({amount:re.value,script_pubkey:x.base.toHex(re.script)})}),{hash:D,inputs:V,bin_outputs:X,lock_time:j.locktime,version:j.version}}function U(H){let D=H.split("/");D[0]==="m"&&(D=D.slice(1));const j=[];return D.forEach(V=>{let X;V.slice(-1)==="'"?X=N(parseInt(V.slice(0,-1),10)):X=parseInt(V,10),j.push(X)}),j}function N(H){return 2147483648+H}return onekey}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(v){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(P,T,O,k){k===void 0&&(k=O);var C=Object.getOwnPropertyDescriptor(T,O);(!C||("get"in C?!T.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return T[O]}}),Object.defineProperty(P,k,C)}:function(P,T,O,k){k===void 0&&(k=O),P[k]=T[O]}),x=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(P,T){Object.defineProperty(P,"default",{enumerable:!0,value:T})}:function(P,T){P.default=T}),E=commonjsGlobal&&commonjsGlobal.__exportStar||function(P,T){for(var O in P)O!=="default"&&!Object.prototype.hasOwnProperty.call(T,O)&&_(T,P,O)},A=commonjsGlobal&&commonjsGlobal.__importStar||function(P){if(P&&P.__esModule)return P;var T={};if(P!=null)for(var O in P)O!=="default"&&Object.prototype.hasOwnProperty.call(P,O)&&_(T,P,O);return x(T,P),T};Object.defineProperty(v,"__esModule",{value:!0}),v.message=v.wif=void 0,E(requireBitcoinjsLib(),v),E(bitcoincash,v),E(requireTxBuild(),v),E(type,v),v.wif=A(wif),E(inscribe$1,v),E(requirePsbtSign(),v),v.message=A(message),E(requireBtcWallet(),v),E(requireOnekey(),v)}(dist$5)),dist$5}var distExports=requireDist(),src$1={},address={},networks$1={};Object.defineProperty(networks$1,"__esModule",{value:!0}),networks$1.testnet=networks$1.regtest=networks$1.bitcoin=void 0,networks$1.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},networks$1.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},networks$1.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};var payments$3={},embed={},script={},bip66$1={};Object.defineProperty(bip66$1,"__esModule",{value:!0}),bip66$1.encode=bip66$1.decode=bip66$1.check=void 0;function check$d(v){if(v.length<8||v.length>72||v[0]!==48||v[1]!==v.length-2||v[2]!==2)return!1;const _=v[3];if(_===0||5+_>=v.length||v[4+_]!==2)return!1;const x=v[5+_];return!(x===0||6+_+x!==v.length||v[4]&128||_>1&&v[4]===0&&!(v[5]&128)||v[_+6]&128||x>1&&v[_+6]===0&&!(v[_+7]&128))}bip66$1.check=check$d;function decode$i(v){if(v.length<8)throw new Error("DER sequence length is too short");if(v.length>72)throw new Error("DER sequence length is too long");if(v[0]!==48)throw new Error("Expected DER sequence");if(v[1]!==v.length-2)throw new Error("DER sequence length is invalid");if(v[2]!==2)throw new Error("Expected DER integer");const _=v[3];if(_===0)throw new Error("R length is zero");if(5+_>=v.length)throw new Error("R length is too long");if(v[4+_]!==2)throw new Error("Expected DER integer (2)");const x=v[5+_];if(x===0)throw new Error("S length is zero");if(6+_+x!==v.length)throw new Error("S length is invalid");if(v[4]&128)throw new Error("R value is negative");if(_>1&&v[4]===0&&!(v[5]&128))throw new Error("R value excessively padded");if(v[_+6]&128)throw new Error("S value is negative");if(x>1&&v[_+6]===0&&!(v[_+7]&128))throw new Error("S value excessively padded");return{r:v.slice(4,4+_),s:v.slice(6+_)}}bip66$1.decode=decode$i;function encode$l(v,_){const x=v.length,E=_.length;if(x===0)throw new Error("R length is zero");if(E===0)throw new Error("S length is zero");if(x>33)throw new Error("R length is too long");if(E>33)throw new Error("S length is too long");if(v[0]&128)throw new Error("R value is negative");if(_[0]&128)throw new Error("S value is negative");if(x>1&&v[0]===0&&!(v[1]&128))throw new Error("R value excessively padded");if(E>1&&_[0]===0&&!(_[1]&128))throw new Error("S value excessively padded");const A=dist$4.Buffer.allocUnsafe(6+x+E);return A[0]=48,A[1]=A.length-2,A[2]=2,A[3]=v.length,v.copy(A,4),A[4+x]=2,A[5+x]=_.length,_.copy(A,6+x),A}bip66$1.encode=encode$l;var ops={};Object.defineProperty(ops,"__esModule",{value:!0}),ops.REVERSE_OPS=ops.OPS=void 0;const OPS$8={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};ops.OPS=OPS$8;const REVERSE_OPS={};ops.REVERSE_OPS=REVERSE_OPS;for(const v of Object.keys(OPS$8)){const _=OPS$8[v];REVERSE_OPS[_]=v}var push_data={};Object.defineProperty(push_data,"__esModule",{value:!0}),push_data.decode=push_data.encode=push_data.encodingLength=void 0;const ops_1=ops;function encodingLength$2(v){return v<ops_1.OPS.OP_PUSHDATA1?1:v<=255?2:v<=65535?3:5}push_data.encodingLength=encodingLength$2;function encode$k(v,_,x){const E=encodingLength$2(_);return E===1?v.writeUInt8(_,x):E===2?(v.writeUInt8(ops_1.OPS.OP_PUSHDATA1,x),v.writeUInt8(_,x+1)):E===3?(v.writeUInt8(ops_1.OPS.OP_PUSHDATA2,x),v.writeUInt16LE(_,x+1)):(v.writeUInt8(ops_1.OPS.OP_PUSHDATA4,x),v.writeUInt32LE(_,x+1)),E}push_data.encode=encode$k;function decode$h(v,_){const x=v.readUInt8(_);let E,A;if(x<ops_1.OPS.OP_PUSHDATA1)E=x,A=1;else if(x===ops_1.OPS.OP_PUSHDATA1){if(_+2>v.length)return null;E=v.readUInt8(_+1),A=2}else if(x===ops_1.OPS.OP_PUSHDATA2){if(_+3>v.length)return null;E=v.readUInt16LE(_+1),A=3}else{if(_+5>v.length)return null;if(x!==ops_1.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");E=v.readUInt32LE(_+1),A=5}return{opcode:x,number:E,size:A}}push_data.decode=decode$h;var script_number={};Object.defineProperty(script_number,"__esModule",{value:!0}),script_number.encode=script_number.decode=void 0;function decode$g(v,_,x){_=_||4,x=x===void 0?!0:x;const E=v.length;if(E===0)return 0;if(E>_)throw new TypeError("Script number overflow");if(x&&!(v[E-1]&127)&&(E<=1||!(v[E-2]&128)))throw new Error("Non-minimally encoded script number");if(E===5){const P=v.readUInt32LE(0),T=v.readUInt8(4);return T&128?-((T&-129)*4294967296+P):T*4294967296+P}let A=0;for(let P=0;P<E;++P)A|=v[P]<<8*P;return v[E-1]&128?-(A&~(128<<8*(E-1))):A}script_number.decode=decode$g;function scriptNumSize(v){return v>2147483647?5:v>8388607?4:v>32767?3:v>127?2:v>0?1:0}function encode$j(v){let _=Math.abs(v);const x=scriptNumSize(_),E=dist$4.Buffer.allocUnsafe(x),A=v<0;for(let P=0;P<x;++P)E.writeUInt8(_&255,P),_>>=8;return E[x-1]&128?E.writeUInt8(A?128:0,x-1):A&&(E[x-1]|=128),E}script_number.encode=encode$j;var script_signature={},types$4={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.oneOf=v.Null=v.BufferN=v.Function=v.UInt32=v.UInt8=v.tuple=v.maybe=v.Hex=v.Buffer=v.String=v.Boolean=v.Array=v.Number=v.Hash256bit=v.Hash160bit=v.Buffer256bit=v.isTaptree=v.isTapleaf=v.TAPLEAF_VERSION_MASK=v.Network=v.ECPoint=v.Satoshi=v.Signer=v.BIP32Path=v.UInt31=v.isPoint=v.typeforce=void 0;const _=bufferPolyfill;v.typeforce=typeforce_1;const x=_.Buffer.alloc(32,0),E=_.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function A(D){if(!_.Buffer.isBuffer(D)||D.length<33)return!1;const j=D[0],V=D.slice(1,33);if(V.compare(x)===0||V.compare(E)>=0)return!1;if((j===2||j===3)&&D.length===33)return!0;const X=D.slice(33);return X.compare(x)===0||X.compare(E)>=0?!1:j===4&&D.length===65}v.isPoint=A;const P=Math.pow(2,31)-1;function T(D){return v.typeforce.UInt32(D)&&D<=P}v.UInt31=T;function O(D){return v.typeforce.String(D)&&!!D.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}v.BIP32Path=O,O.toJSON=()=>"BIP32 derivation path";function k(D){return(v.typeforce.Buffer(D.publicKey)||typeof D.getPublicKey=="function")&&typeof D.sign=="function"}v.Signer=k;const C=21*1e14;function U(D){return v.typeforce.UInt53(D)&&D<=C}v.Satoshi=U,v.ECPoint=v.typeforce.quacksLike("Point"),v.Network=v.typeforce.compile({messagePrefix:v.typeforce.oneOf(v.typeforce.Buffer,v.typeforce.String),bip32:{public:v.typeforce.UInt32,private:v.typeforce.UInt32},pubKeyHash:v.typeforce.UInt8,scriptHash:v.typeforce.UInt8,wif:v.typeforce.UInt8}),v.TAPLEAF_VERSION_MASK=254;function N(D){return!D||!("output"in D)||!_.Buffer.isBuffer(D.output)?!1:D.version!==void 0?(D.version&v.TAPLEAF_VERSION_MASK)===D.version:!0}v.isTapleaf=N;function H(D){return(0,v.Array)(D)?D.length!==2?!1:D.every(j=>H(j)):N(D)}v.isTaptree=H,v.Buffer256bit=v.typeforce.BufferN(32),v.Hash160bit=v.typeforce.BufferN(20),v.Hash256bit=v.typeforce.BufferN(32),v.Number=v.typeforce.Number,v.Array=v.typeforce.Array,v.Boolean=v.typeforce.Boolean,v.String=v.typeforce.String,v.Buffer=v.typeforce.Buffer,v.Hex=v.typeforce.Hex,v.maybe=v.typeforce.maybe,v.tuple=v.typeforce.tuple,v.UInt8=v.typeforce.UInt8,v.UInt32=v.typeforce.UInt32,v.Function=v.typeforce.Function,v.BufferN=v.typeforce.BufferN,v.Null=v.typeforce.Null,v.oneOf=v.typeforce.oneOf})(types$4),Object.defineProperty(script_signature,"__esModule",{value:!0}),script_signature.encode=script_signature.decode=void 0;const bip66=bip66$1,types$3=types$4,{typeforce:typeforce$3}=types$3,ZERO$1=dist$4.Buffer.alloc(1,0);function toDER(v){let _=0;for(;v[_]===0;)++_;return _===v.length?ZERO$1:(v=v.slice(_),v[0]&128?dist$4.Buffer.concat([ZERO$1,v],1+v.length):v)}function fromDER(v){v[0]===0&&(v=v.slice(1));const _=dist$4.Buffer.alloc(32,0),x=Math.max(0,32-v.length);return v.copy(_,x),_}function decode$f(v){const _=v.readUInt8(v.length-1),x=_&-129;if(x<=0||x>=4)throw new Error("Invalid hashType "+_);const E=bip66.decode(v.slice(0,-1)),A=fromDER(E.r),P=fromDER(E.s);return{signature:dist$4.Buffer.concat([A,P],64),hashType:_}}script_signature.decode=decode$f;function encode$i(v,_){typeforce$3({signature:types$3.BufferN(64),hashType:types$3.UInt8},{signature:v,hashType:_});const x=_&-129;if(x<=0||x>=4)throw new Error("Invalid hashType "+_);const E=dist$4.Buffer.allocUnsafe(1);E.writeUInt8(_,0);const A=toDER(v.slice(0,32)),P=toDER(v.slice(32,64));return dist$4.Buffer.concat([bip66.encode(A,P),E])}script_signature.encode=encode$i,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.signature=v.number=v.isCanonicalScriptSignature=v.isDefinedHashType=v.isCanonicalPubKey=v.toStack=v.fromASM=v.toASM=v.decompile=v.compile=v.countNonPushOnlyOPs=v.isPushOnly=v.OPS=void 0;const _=bip66$1,x=ops;Object.defineProperty(v,"OPS",{enumerable:!0,get:function(){return x.OPS}});const E=push_data,A=script_number,P=script_signature,T=types$4,{typeforce:O}=T,k=x.OPS.OP_RESERVED;function C(te){return T.Number(te)&&(te===x.OPS.OP_0||te>=x.OPS.OP_1&&te<=x.OPS.OP_16||te===x.OPS.OP_1NEGATE)}function U(te){return T.Buffer(te)||C(te)}function N(te){return T.Array(te)&&te.every(U)}v.isPushOnly=N;function H(te){return te.length-te.filter(U).length}v.countNonPushOnlyOPs=H;function D(te){if(te.length===0)return x.OPS.OP_0;if(te.length===1){if(te[0]>=1&&te[0]<=16)return k+te[0];if(te[0]===129)return x.OPS.OP_1NEGATE}}function j(te){return dist$4.Buffer.isBuffer(te)}function V(te){return T.Array(te)}function X(te){return dist$4.Buffer.isBuffer(te)}function re(te){if(j(te))return te;O(T.Array,te);const ue=te.reduce((q,F)=>X(F)?F.length===1&&D(F)!==void 0?q+1:q+E.encodingLength(F.length)+F.length:q+1,0),ne=dist$4.Buffer.allocUnsafe(ue);let J=0;if(te.forEach(q=>{if(X(q)){const F=D(q);if(F!==void 0){ne.writeUInt8(F,J),J+=1;return}J+=E.encode(ne,q.length,J),q.copy(ne,J),J+=q.length}else ne.writeUInt8(q,J),J+=1}),J!==ne.length)throw new Error("Could not decode chunks");return ne}v.compile=re;function ee(te){if(V(te))return te;O(T.Buffer,te);const ue=[];let ne=0;for(;ne<te.length;){const J=te[ne];if(J>x.OPS.OP_0&&J<=x.OPS.OP_PUSHDATA4){const q=E.decode(te,ne);if(q===null||(ne+=q.size,ne+q.number>te.length))return null;const F=te.slice(ne,ne+q.number);ne+=q.number;const L=D(F);L!==void 0?ue.push(L):ue.push(F)}else ue.push(J),ne+=1}return ue}v.decompile=ee;function fe(te){return j(te)&&(te=ee(te)),te.map(ue=>{if(X(ue)){const ne=D(ue);if(ne===void 0)return ue.toString("hex");ue=ne}return x.REVERSE_OPS[ue]}).join(" ")}v.toASM=fe;function le(te){return O(T.String,te),re(te.split(" ").map(ue=>x.OPS[ue]!==void 0?x.OPS[ue]:(O(T.Hex,ue),dist$4.Buffer.from(ue,"hex"))))}v.fromASM=le;function pe(te){return te=ee(te),O(N,te),te.map(ue=>X(ue)?ue:ue===x.OPS.OP_0?dist$4.Buffer.allocUnsafe(0):A.encode(ue-k))}v.toStack=pe;function ie(te){return T.isPoint(te)}v.isCanonicalPubKey=ie;function he(te){const ue=te&-129;return ue>0&&ue<4}v.isDefinedHashType=he;function ae(te){return!dist$4.Buffer.isBuffer(te)||!he(te[te.length-1])?!1:_.check(te.slice(0,-1))}v.isCanonicalScriptSignature=ae,v.number=A,v.signature=P}(script);var lazy$8={};Object.defineProperty(lazy$8,"__esModule",{value:!0}),lazy$8.value=lazy$8.prop=void 0;function prop(v,_,x){Object.defineProperty(v,_,{configurable:!0,enumerable:!0,get(){const E=x.call(this);return this[_]=E,E},set(E){Object.defineProperty(this,_,{configurable:!0,enumerable:!0,value:E,writable:!0})}})}lazy$8.prop=prop;function value(v){let _;return()=>(_!==void 0||(_=v()),_)}lazy$8.value=value,Object.defineProperty(embed,"__esModule",{value:!0}),embed.p2data=void 0;const networks_1$8=networks$1,bscript$b=script,types_1$9=types$4,lazy$7=lazy$8,OPS$7=bscript$b.OPS;function stacksEqual$4(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2data(v,_){if(!v.data&&!v.output)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$9.typeforce)({network:types_1$9.typeforce.maybe(types_1$9.typeforce.Object),output:types_1$9.typeforce.maybe(types_1$9.typeforce.Buffer),data:types_1$9.typeforce.maybe(types_1$9.typeforce.arrayOf(types_1$9.typeforce.Buffer))},v);const E={name:"embed",network:v.network||networks_1$8.bitcoin};if(lazy$7.prop(E,"output",()=>{if(v.data)return bscript$b.compile([OPS$7.OP_RETURN].concat(v.data))}),lazy$7.prop(E,"data",()=>{if(v.output)return bscript$b.decompile(v.output).slice(1)}),_.validate&&v.output){const A=bscript$b.decompile(v.output);if(A[0]!==OPS$7.OP_RETURN)throw new TypeError("Output is invalid");if(!A.slice(1).every(types_1$9.typeforce.Buffer))throw new TypeError("Output is invalid");if(v.data&&!stacksEqual$4(v.data,E.data))throw new TypeError("Data mismatch")}return Object.assign(E,v)}embed.p2data=p2data;var p2ms$1={};Object.defineProperty(p2ms$1,"__esModule",{value:!0}),p2ms$1.p2ms=void 0;const networks_1$7=networks$1,bscript$a=script,types_1$8=types$4,lazy$6=lazy$8,OPS$6=bscript$a.OPS,OP_INT_BASE=OPS$6.OP_RESERVED;function stacksEqual$3(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2ms(v,_){if(!v.input&&!v.output&&!(v.pubkeys&&v.m!==void 0)&&!v.signatures)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{});function x(k){return bscript$a.isCanonicalScriptSignature(k)||(_.allowIncomplete&&k===OPS$6.OP_0)!==void 0}(0,types_1$8.typeforce)({network:types_1$8.typeforce.maybe(types_1$8.typeforce.Object),m:types_1$8.typeforce.maybe(types_1$8.typeforce.Number),n:types_1$8.typeforce.maybe(types_1$8.typeforce.Number),output:types_1$8.typeforce.maybe(types_1$8.typeforce.Buffer),pubkeys:types_1$8.typeforce.maybe(types_1$8.typeforce.arrayOf(types_1$8.isPoint)),signatures:types_1$8.typeforce.maybe(types_1$8.typeforce.arrayOf(x)),input:types_1$8.typeforce.maybe(types_1$8.typeforce.Buffer)},v);const A={network:v.network||networks_1$7.bitcoin};let P=[],T=!1;function O(k){T||(T=!0,P=bscript$a.decompile(k),A.m=P[0]-OP_INT_BASE,A.n=P[P.length-2]-OP_INT_BASE,A.pubkeys=P.slice(1,-2))}if(lazy$6.prop(A,"output",()=>{if(v.m&&A.n&&v.pubkeys)return bscript$a.compile([].concat(OP_INT_BASE+v.m,v.pubkeys,OP_INT_BASE+A.n,OPS$6.OP_CHECKMULTISIG))}),lazy$6.prop(A,"m",()=>{if(A.output)return O(A.output),A.m}),lazy$6.prop(A,"n",()=>{if(A.pubkeys)return A.pubkeys.length}),lazy$6.prop(A,"pubkeys",()=>{if(v.output)return O(v.output),A.pubkeys}),lazy$6.prop(A,"signatures",()=>{if(v.input)return bscript$a.decompile(v.input).slice(1)}),lazy$6.prop(A,"input",()=>{if(v.signatures)return bscript$a.compile([OPS$6.OP_0].concat(v.signatures))}),lazy$6.prop(A,"witness",()=>{if(A.input)return[]}),lazy$6.prop(A,"name",()=>{if(!(!A.m||!A.n))return`p2ms(${A.m} of ${A.n})`}),_.validate){if(v.output){if(O(v.output),!types_1$8.typeforce.Number(P[0]))throw new TypeError("Output is invalid");if(!types_1$8.typeforce.Number(P[P.length-2]))throw new TypeError("Output is invalid");if(P[P.length-1]!==OPS$6.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(A.m<=0||A.n>16||A.m>A.n||A.n!==P.length-3)throw new TypeError("Output is invalid");if(!A.pubkeys.every(k=>(0,types_1$8.isPoint)(k)))throw new TypeError("Output is invalid");if(v.m!==void 0&&v.m!==A.m)throw new TypeError("m mismatch");if(v.n!==void 0&&v.n!==A.n)throw new TypeError("n mismatch");if(v.pubkeys&&!stacksEqual$3(v.pubkeys,A.pubkeys))throw new TypeError("Pubkeys mismatch")}if(v.pubkeys){if(v.n!==void 0&&v.n!==v.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(A.n=v.pubkeys.length,A.n<A.m)throw new TypeError("Pubkey count cannot be less than m")}if(v.signatures){if(v.signatures.length<A.m)throw new TypeError("Not enough signatures provided");if(v.signatures.length>A.m)throw new TypeError("Too many signatures provided")}if(v.input){if(v.input[0]!==OPS$6.OP_0)throw new TypeError("Input is invalid");if(A.signatures.length===0||!A.signatures.every(x))throw new TypeError("Input has invalid signature(s)");if(v.signatures&&!stacksEqual$3(v.signatures,A.signatures))throw new TypeError("Signature mismatch");if(v.m!==void 0&&v.m!==v.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(A,v)}p2ms$1.p2ms=p2ms;var p2pk$1={};Object.defineProperty(p2pk$1,"__esModule",{value:!0}),p2pk$1.p2pk=void 0;const networks_1$6=networks$1,bscript$9=script,types_1$7=types$4,lazy$5=lazy$8,OPS$5=bscript$9.OPS;function p2pk(v,_){if(!v.input&&!v.output&&!v.pubkey&&!v.input&&!v.signature)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$7.typeforce)({network:types_1$7.typeforce.maybe(types_1$7.typeforce.Object),output:types_1$7.typeforce.maybe(types_1$7.typeforce.Buffer),pubkey:types_1$7.typeforce.maybe(types_1$7.isPoint),signature:types_1$7.typeforce.maybe(bscript$9.isCanonicalScriptSignature),input:types_1$7.typeforce.maybe(types_1$7.typeforce.Buffer)},v);const x=lazy$5.value(()=>bscript$9.decompile(v.input)),A={name:"p2pk",network:v.network||networks_1$6.bitcoin};if(lazy$5.prop(A,"output",()=>{if(v.pubkey)return bscript$9.compile([v.pubkey,OPS$5.OP_CHECKSIG])}),lazy$5.prop(A,"pubkey",()=>{if(v.output)return v.output.slice(1,-1)}),lazy$5.prop(A,"signature",()=>{if(v.input)return x()[0]}),lazy$5.prop(A,"input",()=>{if(v.signature)return bscript$9.compile([v.signature])}),lazy$5.prop(A,"witness",()=>{if(A.input)return[]}),_.validate){if(v.output){if(v.output[v.output.length-1]!==OPS$5.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,types_1$7.isPoint)(A.pubkey))throw new TypeError("Output pubkey is invalid");if(v.pubkey&&!v.pubkey.equals(A.pubkey))throw new TypeError("Pubkey mismatch")}if(v.signature&&v.input&&!v.input.equals(A.input))throw new TypeError("Signature mismatch");if(v.input){if(x().length!==1)throw new TypeError("Input is invalid");if(!bscript$9.isCanonicalScriptSignature(A.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(A,v)}p2pk$1.p2pk=p2pk;var p2pkh$1={},crypto$3={},ripemd160={},_sha2={},_assert={};Object.defineProperty(_assert,"__esModule",{value:!0}),_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=void 0;function number(v){if(!Number.isSafeInteger(v)||v<0)throw new Error(`Wrong positive integer: ${v}`)}_assert.number=number;function bool(v){if(typeof v!="boolean")throw new Error(`Expected boolean, not ${v}`)}_assert.bool=bool;function bytes(v,..._){if(!(v instanceof Uint8Array))throw new Error("Expected Uint8Array");if(_.length>0&&!_.includes(v.length))throw new Error(`Expected Uint8Array of length ${_}, not of length=${v.length}`)}_assert.bytes=bytes;function hash(v){if(typeof v!="function"||typeof v.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(v.outputLen),number(v.blockLen)}_assert.hash=hash;function exists(v,_=!0){if(v.destroyed)throw new Error("Hash instance has been destroyed");if(_&&v.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists;function output(v,_){bytes(v);const x=_.outputLen;if(v.length<x)throw new Error(`digestInto() expects output buffer of length at least ${x}`)}_assert.output=output;const assert$1={number,bool,bytes,hash,exists,output};_assert.default=assert$1;var utils$4={},crypto$2={};Object.defineProperty(crypto$2,"__esModule",{value:!0}),crypto$2.crypto=void 0,crypto$2.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(v){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(v,"__esModule",{value:!0}),v.randomBytes=v.wrapXOFConstructorWithOpts=v.wrapConstructorWithOpts=v.wrapConstructor=v.checkOpts=v.Hash=v.concatBytes=v.toBytes=v.utf8ToBytes=v.asyncLoop=v.nextTick=v.hexToBytes=v.bytesToHex=v.isLE=v.rotr=v.createView=v.u32=v.u8=void 0;const _=crypto$2,x=ie=>ie instanceof Uint8Array,E=ie=>new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength);v.u8=E;const A=ie=>new Uint32Array(ie.buffer,ie.byteOffset,Math.floor(ie.byteLength/4));v.u32=A;const P=ie=>new DataView(ie.buffer,ie.byteOffset,ie.byteLength);v.createView=P;const T=(ie,he)=>ie<<32-he|ie>>>he;if(v.rotr=T,v.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!v.isLE)throw new Error("Non little-endian hardware is not supported");const O=Array.from({length:256},(ie,he)=>he.toString(16).padStart(2,"0"));function k(ie){if(!x(ie))throw new Error("Uint8Array expected");let he="";for(let ae=0;ae<ie.length;ae++)he+=O[ie[ae]];return he}v.bytesToHex=k;function C(ie){if(typeof ie!="string")throw new Error("hex string expected, got "+typeof ie);const he=ie.length;if(he%2)throw new Error("padded hex string expected, got unpadded hex of length "+he);const ae=new Uint8Array(he/2);for(let te=0;te<ae.length;te++){const ue=te*2,ne=ie.slice(ue,ue+2),J=Number.parseInt(ne,16);if(Number.isNaN(J)||J<0)throw new Error("Invalid byte sequence");ae[te]=J}return ae}v.hexToBytes=C;const U=async()=>{};v.nextTick=U;async function N(ie,he,ae){let te=Date.now();for(let ue=0;ue<ie;ue++){ae(ue);const ne=Date.now()-te;ne>=0&&ne<he||(await(0,v.nextTick)(),te+=ne)}}v.asyncLoop=N;function H(ie){if(typeof ie!="string")throw new Error(`utf8ToBytes expected string, got ${typeof ie}`);return new Uint8Array(new TextEncoder().encode(ie))}v.utf8ToBytes=H;function D(ie){if(typeof ie=="string"&&(ie=H(ie)),!x(ie))throw new Error(`expected Uint8Array, got ${typeof ie}`);return ie}v.toBytes=D;function j(...ie){const he=new Uint8Array(ie.reduce((te,ue)=>te+ue.length,0));let ae=0;return ie.forEach(te=>{if(!x(te))throw new Error("Uint8Array expected");he.set(te,ae),ae+=te.length}),he}v.concatBytes=j;class V{clone(){return this._cloneInto()}}v.Hash=V;const X={}.toString;function re(ie,he){if(he!==void 0&&X.call(he)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(ie,he)}v.checkOpts=re;function ee(ie){const he=te=>ie().update(D(te)).digest(),ae=ie();return he.outputLen=ae.outputLen,he.blockLen=ae.blockLen,he.create=()=>ie(),he}v.wrapConstructor=ee;function fe(ie){const he=(te,ue)=>ie(ue).update(D(te)).digest(),ae=ie({});return he.outputLen=ae.outputLen,he.blockLen=ae.blockLen,he.create=te=>ie(te),he}v.wrapConstructorWithOpts=fe;function le(ie){const he=(te,ue)=>ie(ue).update(D(te)).digest(),ae=ie({});return he.outputLen=ae.outputLen,he.blockLen=ae.blockLen,he.create=te=>ie(te),he}v.wrapXOFConstructorWithOpts=le;function pe(ie=32){if(_.crypto&&typeof _.crypto.getRandomValues=="function")return _.crypto.getRandomValues(new Uint8Array(ie));throw new Error("crypto.getRandomValues must be defined")}v.randomBytes=pe}(utils$4),Object.defineProperty(_sha2,"__esModule",{value:!0}),_sha2.SHA2=void 0;const _assert_js_1=_assert,utils_js_1$3=utils$4;function setBigUint64(v,_,x,E){if(typeof v.setBigUint64=="function")return v.setBigUint64(_,x,E);const A=BigInt(32),P=BigInt(4294967295),T=Number(x>>A&P),O=Number(x&P),k=E?4:0,C=E?0:4;v.setUint32(_+k,T,E),v.setUint32(_+C,O,E)}class SHA2 extends utils_js_1$3.Hash{constructor(_,x,E,A){super(),this.blockLen=_,this.outputLen=x,this.padOffset=E,this.isLE=A,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(_),this.view=(0,utils_js_1$3.createView)(this.buffer)}update(_){(0,_assert_js_1.exists)(this);const{view:x,buffer:E,blockLen:A}=this;_=(0,utils_js_1$3.toBytes)(_);const P=_.length;for(let T=0;T<P;){const O=Math.min(A-this.pos,P-T);if(O===A){const k=(0,utils_js_1$3.createView)(_);for(;A<=P-T;T+=A)this.process(k,T);continue}E.set(_.subarray(T,T+O),this.pos),this.pos+=O,T+=O,this.pos===A&&(this.process(x,0),this.pos=0)}return this.length+=_.length,this.roundClean(),this}digestInto(_){(0,_assert_js_1.exists)(this),(0,_assert_js_1.output)(_,this),this.finished=!0;const{buffer:x,view:E,blockLen:A,isLE:P}=this;let{pos:T}=this;x[T++]=128,this.buffer.subarray(T).fill(0),this.padOffset>A-T&&(this.process(E,0),T=0);for(let N=T;N<A;N++)x[N]=0;setBigUint64(E,A-8,BigInt(this.length*8),P),this.process(E,0);const O=(0,utils_js_1$3.createView)(_),k=this.outputLen;if(k%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const C=k/4,U=this.get();if(C>U.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<C;N++)O.setUint32(4*N,U[N],P)}digest(){const{buffer:_,outputLen:x}=this;this.digestInto(_);const E=_.slice(0,x);return this.destroy(),E}_cloneInto(_){_||(_=new this.constructor),_.set(...this.get());const{blockLen:x,buffer:E,length:A,finished:P,destroyed:T,pos:O}=this;return _.length=A,_.pos=O,_.finished=P,_.destroyed=T,A%x&&_.buffer.set(E),_}}_sha2.SHA2=SHA2,Object.defineProperty(ripemd160,"__esModule",{value:!0}),ripemd160.ripemd160=ripemd160.RIPEMD160=void 0;const _sha2_js_1$2=_sha2,utils_js_1$2=utils$4,Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id=Uint8Array.from({length:16},(v,_)=>_),Pi=Id.map(v=>(9*v+5)%16);let idxL=[Id],idxR=[Pi];for(let v=0;v<4;v++)for(let _ of[idxL,idxR])_.push(_[v].map(x=>Rho[x]));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(v=>new Uint8Array(v)),shiftsL=idxL.map((v,_)=>v.map(x=>shifts[_][x])),shiftsR=idxR.map((v,_)=>v.map(x=>shifts[_][x])),Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),rotl$1=(v,_)=>v<<_|v>>>32-_;function f(v,_,x,E){return v===0?_^x^E:v===1?_&x|~_&E:v===2?(_|~x)^E:v===3?_&E|x&~E:_^(x|~E)}const BUF=new Uint32Array(16);class RIPEMD160 extends _sha2_js_1$2.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:_,h1:x,h2:E,h3:A,h4:P}=this;return[_,x,E,A,P]}set(_,x,E,A,P){this.h0=_|0,this.h1=x|0,this.h2=E|0,this.h3=A|0,this.h4=P|0}process(_,x){for(let D=0;D<16;D++,x+=4)BUF[D]=_.getUint32(x,!0);let E=this.h0|0,A=E,P=this.h1|0,T=P,O=this.h2|0,k=O,C=this.h3|0,U=C,N=this.h4|0,H=N;for(let D=0;D<5;D++){const j=4-D,V=Kl[D],X=Kr[D],re=idxL[D],ee=idxR[D],fe=shiftsL[D],le=shiftsR[D];for(let pe=0;pe<16;pe++){const ie=rotl$1(E+f(D,P,O,C)+BUF[re[pe]]+V,fe[pe])+N|0;E=N,N=C,C=rotl$1(O,10)|0,O=P,P=ie}for(let pe=0;pe<16;pe++){const ie=rotl$1(A+f(j,T,k,U)+BUF[ee[pe]]+X,le[pe])+H|0;A=H,H=U,U=rotl$1(k,10)|0,k=T,T=ie}}this.set(this.h1+O+U|0,this.h2+C+H|0,this.h3+N+A|0,this.h4+E+T|0,this.h0+P+k|0)}roundClean(){BUF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}ripemd160.RIPEMD160=RIPEMD160,ripemd160.ripemd160=(0,utils_js_1$2.wrapConstructor)(()=>new RIPEMD160);var sha1={};Object.defineProperty(sha1,"__esModule",{value:!0}),sha1.sha1=void 0;const _sha2_js_1$1=_sha2,utils_js_1$1=utils$4,rotl=(v,_)=>v<<_|v>>>32-_>>>0,Chi$1=(v,_,x)=>v&_^~v&x,Maj$1=(v,_,x)=>v&_^v&x^_&x,IV$1=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),SHA1_W=new Uint32Array(80);class SHA1 extends _sha2_js_1$1.SHA2{constructor(){super(64,20,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0}get(){const{A:_,B:x,C:E,D:A,E:P}=this;return[_,x,E,A,P]}set(_,x,E,A,P){this.A=_|0,this.B=x|0,this.C=E|0,this.D=A|0,this.E=P|0}process(_,x){for(let k=0;k<16;k++,x+=4)SHA1_W[k]=_.getUint32(x,!1);for(let k=16;k<80;k++)SHA1_W[k]=rotl(SHA1_W[k-3]^SHA1_W[k-8]^SHA1_W[k-14]^SHA1_W[k-16],1);let{A:E,B:A,C:P,D:T,E:O}=this;for(let k=0;k<80;k++){let C,U;k<20?(C=Chi$1(A,P,T),U=1518500249):k<40?(C=A^P^T,U=1859775393):k<60?(C=Maj$1(A,P,T),U=2400959708):(C=A^P^T,U=3395469782);const N=rotl(E,5)+C+O+U+SHA1_W[k]|0;O=T,T=P,P=rotl(A,30),A=E,E=N}E=E+this.A|0,A=A+this.B|0,P=P+this.C|0,T=T+this.D|0,O=O+this.E|0,this.set(E,A,P,T,O)}roundClean(){SHA1_W.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}sha1.sha1=(0,utils_js_1$1.wrapConstructor)(()=>new SHA1);var sha256$1={};Object.defineProperty(sha256$1,"__esModule",{value:!0}),sha256$1.sha224=sha256$1.sha256=void 0;const _sha2_js_1=_sha2,utils_js_1=utils$4,Chi=(v,_,x)=>v&_^~v&x,Maj=(v,_,x)=>v&_^v&x^_&x,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends _sha2_js_1.SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:_,B:x,C:E,D:A,E:P,F:T,G:O,H:k}=this;return[_,x,E,A,P,T,O,k]}set(_,x,E,A,P,T,O,k){this.A=_|0,this.B=x|0,this.C=E|0,this.D=A|0,this.E=P|0,this.F=T|0,this.G=O|0,this.H=k|0}process(_,x){for(let N=0;N<16;N++,x+=4)SHA256_W[N]=_.getUint32(x,!1);for(let N=16;N<64;N++){const H=SHA256_W[N-15],D=SHA256_W[N-2],j=(0,utils_js_1.rotr)(H,7)^(0,utils_js_1.rotr)(H,18)^H>>>3,V=(0,utils_js_1.rotr)(D,17)^(0,utils_js_1.rotr)(D,19)^D>>>10;SHA256_W[N]=V+SHA256_W[N-7]+j+SHA256_W[N-16]|0}let{A:E,B:A,C:P,D:T,E:O,F:k,G:C,H:U}=this;for(let N=0;N<64;N++){const H=(0,utils_js_1.rotr)(O,6)^(0,utils_js_1.rotr)(O,11)^(0,utils_js_1.rotr)(O,25),D=U+H+Chi(O,k,C)+SHA256_K[N]+SHA256_W[N]|0,V=((0,utils_js_1.rotr)(E,2)^(0,utils_js_1.rotr)(E,13)^(0,utils_js_1.rotr)(E,22))+Maj(E,A,P)|0;U=C,C=k,k=O,O=T+D|0,T=P,P=A,A=E,E=D+V|0}E=E+this.A|0,A=A+this.B|0,P=P+this.C|0,T=T+this.D|0,O=O+this.E|0,k=k+this.F|0,C=C+this.G|0,U=U+this.H|0,this.set(E,A,P,T,O,k,C,U)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}sha256$1.sha256=(0,utils_js_1.wrapConstructor)(()=>new SHA256),sha256$1.sha224=(0,utils_js_1.wrapConstructor)(()=>new SHA224),function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.taggedHash=v.TAGGED_HASH_PREFIXES=v.TAGS=v.hash256=v.hash160=v.sha256=v.sha1=v.ripemd160=void 0;const _=ripemd160,x=sha1,E=sha256$1;function A(U){return dist$4.Buffer.from((0,_.ripemd160)(Uint8Array.from(U)))}v.ripemd160=A;function P(U){return dist$4.Buffer.from((0,x.sha1)(Uint8Array.from(U)))}v.sha1=P;function T(U){return dist$4.Buffer.from((0,E.sha256)(Uint8Array.from(U)))}v.sha256=T;function O(U){return dist$4.Buffer.from((0,_.ripemd160)((0,E.sha256)(Uint8Array.from(U))))}v.hash160=O;function k(U){return dist$4.Buffer.from((0,E.sha256)((0,E.sha256)(Uint8Array.from(U))))}v.hash256=k,v.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],v.TAGGED_HASH_PREFIXES={"BIP0340/challenge":dist$4.Buffer.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":dist$4.Buffer.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":dist$4.Buffer.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:dist$4.Buffer.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:dist$4.Buffer.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:dist$4.Buffer.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:dist$4.Buffer.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":dist$4.Buffer.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":dist$4.Buffer.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function C(U,N){return T(dist$4.Buffer.concat([v.TAGGED_HASH_PREFIXES[U],N]))}v.taggedHash=C}(crypto$3);function base$1(v){if(v.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<v.length;E++){var A=v.charAt(E),P=A.charCodeAt(0);if(_[P]!==255)throw new TypeError(A+" is ambiguous");_[P]=E}var T=v.length,O=v.charAt(0),k=Math.log(T)/Math.log(256),C=Math.log(256)/Math.log(T);function U(D){if(D instanceof Uint8Array||(ArrayBuffer.isView(D)?D=new Uint8Array(D.buffer,D.byteOffset,D.byteLength):Array.isArray(D)&&(D=Uint8Array.from(D))),!(D instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(D.length===0)return"";for(var j=0,V=0,X=0,re=D.length;X!==re&&D[X]===0;)X++,j++;for(var ee=(re-X)*C+1>>>0,fe=new Uint8Array(ee);X!==re;){for(var le=D[X],pe=0,ie=ee-1;(le!==0||pe<V)&&ie!==-1;ie--,pe++)le+=256*fe[ie]>>>0,fe[ie]=le%T>>>0,le=le/T>>>0;if(le!==0)throw new Error("Non-zero carry");V=pe,X++}for(var he=ee-V;he!==ee&&fe[he]===0;)he++;for(var ae=O.repeat(j);he<ee;++he)ae+=v.charAt(fe[he]);return ae}function N(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return new Uint8Array;for(var j=0,V=0,X=0;D[j]===O;)V++,j++;for(var re=(D.length-j)*k+1>>>0,ee=new Uint8Array(re);D[j];){var fe=_[D.charCodeAt(j)];if(fe===255)return;for(var le=0,pe=re-1;(fe!==0||le<X)&&pe!==-1;pe--,le++)fe+=T*ee[pe]>>>0,ee[pe]=fe%256>>>0,fe=fe/256>>>0;if(fe!==0)throw new Error("Non-zero carry");X=le,j++}for(var ie=re-X;ie!==re&&ee[ie]===0;)ie++;for(var he=new Uint8Array(V+(re-ie)),ae=V;ie!==re;)he[ae++]=ee[ie++];return he}function H(D){var j=N(D);if(j)return j;throw new Error("Non-base"+T+" character")}return{encode:U,decodeUnsafe:N,decode:H}}var src=base$1;const basex=src,ALPHABET$2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var bs58=basex(ALPHABET$2),base58=bs58,base=function(v){function _(P){var T=Uint8Array.from(P),O=v(T),k=T.length+4,C=new Uint8Array(k);return C.set(T,0),C.set(O.subarray(0,4),T.length),base58.encode(C,k)}function x(P){var T=P.slice(0,-4),O=P.slice(-4),k=v(T);if(!(O[0]^k[0]|O[1]^k[1]|O[2]^k[2]|O[3]^k[3]))return T}function E(P){var T=base58.decodeUnsafe(P);if(T)return x(T)}function A(P){var T=base58.decode(P),O=x(T);if(!O)throw new Error("Invalid checksum");return O}return{encode:_,decode:A,decodeUnsafe:E}},{sha256}=sha256$1,bs58checkBase=base;function sha256x2(v){return sha256(sha256(v))}var bs58check$3=bs58checkBase(sha256x2);Object.defineProperty(p2pkh$1,"__esModule",{value:!0}),p2pkh$1.p2pkh=void 0;const bcrypto$5=crypto$3,networks_1$5=networks$1,bscript$8=script,types_1$6=types$4,lazy$4=lazy$8,bs58check$2=bs58check$3,OPS$4=bscript$8.OPS;function p2pkh(v,_){if(!v.address&&!v.hash&&!v.output&&!v.pubkey&&!v.input)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$6.typeforce)({network:types_1$6.typeforce.maybe(types_1$6.typeforce.Object),address:types_1$6.typeforce.maybe(types_1$6.typeforce.String),hash:types_1$6.typeforce.maybe(types_1$6.typeforce.BufferN(20)),output:types_1$6.typeforce.maybe(types_1$6.typeforce.BufferN(25)),pubkey:types_1$6.typeforce.maybe(types_1$6.isPoint),signature:types_1$6.typeforce.maybe(bscript$8.isCanonicalScriptSignature),input:types_1$6.typeforce.maybe(types_1$6.typeforce.Buffer)},v);const x=lazy$4.value(()=>{const T=dist$4.Buffer.from(bs58check$2.decode(v.address)),O=T.readUInt8(0),k=T.slice(1);return{version:O,hash:k}}),E=lazy$4.value(()=>bscript$8.decompile(v.input)),A=v.network||networks_1$5.bitcoin,P={name:"p2pkh",network:A};if(lazy$4.prop(P,"address",()=>{if(!P.hash)return;const T=dist$4.Buffer.allocUnsafe(21);return T.writeUInt8(A.pubKeyHash,0),P.hash.copy(T,1),bs58check$2.encode(T)}),lazy$4.prop(P,"hash",()=>{if(v.output)return v.output.slice(3,23);if(v.address)return x().hash;if(v.pubkey||P.pubkey)return bcrypto$5.hash160(v.pubkey||P.pubkey)}),lazy$4.prop(P,"output",()=>{if(P.hash)return bscript$8.compile([OPS$4.OP_DUP,OPS$4.OP_HASH160,P.hash,OPS$4.OP_EQUALVERIFY,OPS$4.OP_CHECKSIG])}),lazy$4.prop(P,"pubkey",()=>{if(v.input)return E()[1]}),lazy$4.prop(P,"signature",()=>{if(v.input)return E()[0]}),lazy$4.prop(P,"input",()=>{if(v.pubkey&&v.signature)return bscript$8.compile([v.signature,v.pubkey])}),lazy$4.prop(P,"witness",()=>{if(P.input)return[]}),_.validate){let T=dist$4.Buffer.from([]);if(v.address){if(x().version!==A.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(x().hash.length!==20)throw new TypeError("Invalid address");T=x().hash}if(v.hash){if(T.length>0&&!T.equals(v.hash))throw new TypeError("Hash mismatch");T=v.hash}if(v.output){if(v.output.length!==25||v.output[0]!==OPS$4.OP_DUP||v.output[1]!==OPS$4.OP_HASH160||v.output[2]!==20||v.output[23]!==OPS$4.OP_EQUALVERIFY||v.output[24]!==OPS$4.OP_CHECKSIG)throw new TypeError("Output is invalid");const O=v.output.slice(3,23);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.pubkey){const O=bcrypto$5.hash160(v.pubkey);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.input){const O=E();if(O.length!==2)throw new TypeError("Input is invalid");if(!bscript$8.isCanonicalScriptSignature(O[0]))throw new TypeError("Input has invalid signature");if(!(0,types_1$6.isPoint)(O[1]))throw new TypeError("Input has invalid pubkey");if(v.signature&&!v.signature.equals(O[0]))throw new TypeError("Signature mismatch");if(v.pubkey&&!v.pubkey.equals(O[1]))throw new TypeError("Pubkey mismatch");const k=bcrypto$5.hash160(O[1]);if(T.length>0&&!T.equals(k))throw new TypeError("Hash mismatch")}}return Object.assign(P,v)}p2pkh$1.p2pkh=p2pkh;var p2sh$1={};Object.defineProperty(p2sh$1,"__esModule",{value:!0}),p2sh$1.p2sh=void 0;const bcrypto$4=crypto$3,networks_1$4=networks$1,bscript$7=script,types_1$5=types$4,lazy$3=lazy$8,bs58check$1=bs58check$3,OPS$3=bscript$7.OPS;function stacksEqual$2(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function p2sh(v,_){if(!v.address&&!v.hash&&!v.output&&!v.redeem&&!v.input)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$5.typeforce)({network:types_1$5.typeforce.maybe(types_1$5.typeforce.Object),address:types_1$5.typeforce.maybe(types_1$5.typeforce.String),hash:types_1$5.typeforce.maybe(types_1$5.typeforce.BufferN(20)),output:types_1$5.typeforce.maybe(types_1$5.typeforce.BufferN(23)),redeem:types_1$5.typeforce.maybe({network:types_1$5.typeforce.maybe(types_1$5.typeforce.Object),output:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),input:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),witness:types_1$5.typeforce.maybe(types_1$5.typeforce.arrayOf(types_1$5.typeforce.Buffer))}),input:types_1$5.typeforce.maybe(types_1$5.typeforce.Buffer),witness:types_1$5.typeforce.maybe(types_1$5.typeforce.arrayOf(types_1$5.typeforce.Buffer))},v);let x=v.network;x||(x=v.redeem&&v.redeem.network||networks_1$4.bitcoin);const E={network:x},A=lazy$3.value(()=>{const O=dist$4.Buffer.from(bs58check$1.decode(v.address)),k=O.readUInt8(0),C=O.slice(1);return{version:k,hash:C}}),P=lazy$3.value(()=>bscript$7.decompile(v.input)),T=lazy$3.value(()=>{const O=P(),k=O[O.length-1];return{network:x,output:k===OPS$3.OP_FALSE?dist$4.Buffer.from([]):k,input:bscript$7.compile(O.slice(0,-1)),witness:v.witness||[]}});if(lazy$3.prop(E,"address",()=>{if(!E.hash)return;const O=dist$4.Buffer.allocUnsafe(21);return O.writeUInt8(E.network.scriptHash,0),E.hash.copy(O,1),bs58check$1.encode(O)}),lazy$3.prop(E,"hash",()=>{if(v.output)return v.output.slice(2,22);if(v.address)return A().hash;if(E.redeem&&E.redeem.output)return bcrypto$4.hash160(E.redeem.output)}),lazy$3.prop(E,"output",()=>{if(E.hash)return bscript$7.compile([OPS$3.OP_HASH160,E.hash,OPS$3.OP_EQUAL])}),lazy$3.prop(E,"redeem",()=>{if(v.input)return T()}),lazy$3.prop(E,"input",()=>{if(!(!v.redeem||!v.redeem.input||!v.redeem.output))return bscript$7.compile([].concat(bscript$7.decompile(v.redeem.input),v.redeem.output))}),lazy$3.prop(E,"witness",()=>{if(E.redeem&&E.redeem.witness)return E.redeem.witness;if(E.input)return[]}),lazy$3.prop(E,"name",()=>{const O=["p2sh"];return E.redeem!==void 0&&E.redeem.name!==void 0&&O.push(E.redeem.name),O.join("-")}),_.validate){let O=dist$4.Buffer.from([]);if(v.address){if(A().version!==x.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(A().hash.length!==20)throw new TypeError("Invalid address");O=A().hash}if(v.hash){if(O.length>0&&!O.equals(v.hash))throw new TypeError("Hash mismatch");O=v.hash}if(v.output){if(v.output.length!==23||v.output[0]!==OPS$3.OP_HASH160||v.output[1]!==20||v.output[22]!==OPS$3.OP_EQUAL)throw new TypeError("Output is invalid");const C=v.output.slice(2,22);if(O.length>0&&!O.equals(C))throw new TypeError("Hash mismatch");O=C}const k=C=>{if(C.output){const U=bscript$7.decompile(C.output);if(!U||U.length<1)throw new TypeError("Redeem.output too short");if(C.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(bscript$7.countNonPushOnlyOPs(U)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const N=bcrypto$4.hash160(C.output);if(O.length>0&&!O.equals(N))throw new TypeError("Hash mismatch");O=N}if(C.input){const U=C.input.length>0,N=C.witness&&C.witness.length>0;if(!U&&!N)throw new TypeError("Empty input");if(U&&N)throw new TypeError("Input and witness provided");if(U){const H=bscript$7.decompile(C.input);if(!bscript$7.isPushOnly(H))throw new TypeError("Non push-only scriptSig")}}};if(v.input){const C=P();if(!C||C.length<1)throw new TypeError("Input too short");if(!dist$4.Buffer.isBuffer(T().output))throw new TypeError("Input is invalid");k(T())}if(v.redeem){if(v.redeem.network&&v.redeem.network!==x)throw new TypeError("Network mismatch");if(v.input){const C=T();if(v.redeem.output&&!v.redeem.output.equals(C.output))throw new TypeError("Redeem.output mismatch");if(v.redeem.input&&!v.redeem.input.equals(C.input))throw new TypeError("Redeem.input mismatch")}k(v.redeem)}if(v.witness&&v.redeem&&v.redeem.witness&&!stacksEqual$2(v.redeem.witness,v.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(E,v)}p2sh$1.p2sh=p2sh;var p2wpkh$1={},dist$1={};Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.bech32m=dist$1.bech32=void 0;const ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let v=0;v<ALPHABET$1.length;v++){const _=ALPHABET$1.charAt(v);ALPHABET_MAP[_]=v}function polymodStep(v){const _=v>>25;return(v&33554431)<<5^-(_>>0&1)&996825010^-(_>>1&1)&642813549^-(_>>2&1)&513874426^-(_>>3&1)&1027748829^-(_>>4&1)&705979059}function prefixChk(v){let _=1;for(let x=0;x<v.length;++x){const E=v.charCodeAt(x);if(E<33||E>126)return"Invalid prefix ("+v+")";_=polymodStep(_)^E>>5}_=polymodStep(_);for(let x=0;x<v.length;++x){const E=v.charCodeAt(x);_=polymodStep(_)^E&31}return _}function convert$2(v,_,x,E){let A=0,P=0;const T=(1<<x)-1,O=[];for(let k=0;k<v.length;++k)for(A=A<<_|v[k],P+=_;P>=x;)P-=x,O.push(A>>P&T);if(E)P>0&&O.push(A<<x-P&T);else{if(P>=_)return"Excess padding";if(A<<x-P&T)return"Non-zero padding"}return O}function toWords(v){return convert$2(v,8,5,!0)}function fromWordsUnsafe(v){const _=convert$2(v,5,8,!1);if(Array.isArray(_))return _}function fromWords(v){const _=convert$2(v,5,8,!1);if(Array.isArray(_))return _;throw new Error(_)}function getLibraryFromEncoding(v){let _;v==="bech32"?_=1:_=734539939;function x(T,O,k){if(k=k||90,T.length+7+O.length>k)throw new TypeError("Exceeds length limit");T=T.toLowerCase();let C=prefixChk(T);if(typeof C=="string")throw new Error(C);let U=T+"1";for(let N=0;N<O.length;++N){const H=O[N];if(H>>5)throw new Error("Non 5-bit word");C=polymodStep(C)^H,U+=ALPHABET$1.charAt(H)}for(let N=0;N<6;++N)C=polymodStep(C);C^=_;for(let N=0;N<6;++N){const H=C>>(5-N)*5&31;U+=ALPHABET$1.charAt(H)}return U}function E(T,O){if(O=O||90,T.length<8)return T+" too short";if(T.length>O)return"Exceeds length limit";const k=T.toLowerCase(),C=T.toUpperCase();if(T!==k&&T!==C)return"Mixed-case string "+T;T=k;const U=T.lastIndexOf("1");if(U===-1)return"No separator character for "+T;if(U===0)return"Missing prefix for "+T;const N=T.slice(0,U),H=T.slice(U+1);if(H.length<6)return"Data too short";let D=prefixChk(N);if(typeof D=="string")return D;const j=[];for(let V=0;V<H.length;++V){const X=H.charAt(V),re=ALPHABET_MAP[X];if(re===void 0)return"Unknown character "+X;D=polymodStep(D)^re,!(V+6>=H.length)&&j.push(re)}return D!==_?"Invalid checksum for "+T:{prefix:N,words:j}}function A(T,O){const k=E(T,O);if(typeof k=="object")return k}function P(T,O){const k=E(T,O);if(typeof k=="object")return k;throw new Error(k)}return{decodeUnsafe:A,decode:P,encode:x,toWords,fromWordsUnsafe,fromWords}}dist$1.bech32=getLibraryFromEncoding("bech32"),dist$1.bech32m=getLibraryFromEncoding("bech32m"),Object.defineProperty(p2wpkh$1,"__esModule",{value:!0}),p2wpkh$1.p2wpkh=void 0;const bcrypto$3=crypto$3,networks_1$3=networks$1,bscript$6=script,types_1$4=types$4,lazy$2=lazy$8,bech32_1$3=dist$1,OPS$2=bscript$6.OPS,EMPTY_BUFFER$2=dist$4.Buffer.alloc(0);function p2wpkh(v,_){if(!v.address&&!v.hash&&!v.output&&!v.pubkey&&!v.witness)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$4.typeforce)({address:types_1$4.typeforce.maybe(types_1$4.typeforce.String),hash:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(20)),input:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(0)),network:types_1$4.typeforce.maybe(types_1$4.typeforce.Object),output:types_1$4.typeforce.maybe(types_1$4.typeforce.BufferN(22)),pubkey:types_1$4.typeforce.maybe(types_1$4.isPoint),signature:types_1$4.typeforce.maybe(bscript$6.isCanonicalScriptSignature),witness:types_1$4.typeforce.maybe(types_1$4.typeforce.arrayOf(types_1$4.typeforce.Buffer))},v);const x=lazy$2.value(()=>{const P=bech32_1$3.bech32.decode(v.address),T=P.words.shift(),O=bech32_1$3.bech32.fromWords(P.words);return{version:T,prefix:P.prefix,data:dist$4.Buffer.from(O)}}),E=v.network||networks_1$3.bitcoin,A={name:"p2wpkh",network:E};if(lazy$2.prop(A,"address",()=>{if(!A.hash)return;const P=bech32_1$3.bech32.toWords(A.hash);return P.unshift(0),bech32_1$3.bech32.encode(E.bech32,P)}),lazy$2.prop(A,"hash",()=>{if(v.output)return v.output.slice(2,22);if(v.address)return x().data;if(v.pubkey||A.pubkey)return bcrypto$3.hash160(v.pubkey||A.pubkey)}),lazy$2.prop(A,"output",()=>{if(A.hash)return bscript$6.compile([OPS$2.OP_0,A.hash])}),lazy$2.prop(A,"pubkey",()=>{if(v.pubkey)return v.pubkey;if(v.witness)return v.witness[1]}),lazy$2.prop(A,"signature",()=>{if(v.witness)return v.witness[0]}),lazy$2.prop(A,"input",()=>{if(A.witness)return EMPTY_BUFFER$2}),lazy$2.prop(A,"witness",()=>{if(v.pubkey&&v.signature)return[v.signature,v.pubkey]}),_.validate){let P=dist$4.Buffer.from([]);if(v.address){if(E&&E.bech32!==x().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==0)throw new TypeError("Invalid address version");if(x().data.length!==20)throw new TypeError("Invalid address data");P=x().data}if(v.hash){if(P.length>0&&!P.equals(v.hash))throw new TypeError("Hash mismatch");P=v.hash}if(v.output){if(v.output.length!==22||v.output[0]!==OPS$2.OP_0||v.output[1]!==20)throw new TypeError("Output is invalid");if(P.length>0&&!P.equals(v.output.slice(2)))throw new TypeError("Hash mismatch");P=v.output.slice(2)}if(v.pubkey){const T=bcrypto$3.hash160(v.pubkey);if(P.length>0&&!P.equals(T))throw new TypeError("Hash mismatch");if(P=T,!(0,types_1$4.isPoint)(v.pubkey)||v.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(v.witness){if(v.witness.length!==2)throw new TypeError("Witness is invalid");if(!bscript$6.isCanonicalScriptSignature(v.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,types_1$4.isPoint)(v.witness[1])||v.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(v.signature&&!v.signature.equals(v.witness[0]))throw new TypeError("Signature mismatch");if(v.pubkey&&!v.pubkey.equals(v.witness[1]))throw new TypeError("Pubkey mismatch");const T=bcrypto$3.hash160(v.witness[1]);if(P.length>0&&!P.equals(T))throw new TypeError("Hash mismatch")}}return Object.assign(A,v)}p2wpkh$1.p2wpkh=p2wpkh;var p2wsh$1={};Object.defineProperty(p2wsh$1,"__esModule",{value:!0}),p2wsh$1.p2wsh=void 0;const bcrypto$2=crypto$3,networks_1$2=networks$1,bscript$5=script,types_1$3=types$4,lazy$1=lazy$8,bech32_1$2=dist$1,OPS$1=bscript$5.OPS,EMPTY_BUFFER$1=dist$4.Buffer.alloc(0);function stacksEqual$1(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}function chunkHasUncompressedPubkey(v){return!!(dist$4.Buffer.isBuffer(v)&&v.length===65&&v[0]===4&&(0,types_1$3.isPoint)(v))}function p2wsh(v,_){if(!v.address&&!v.hash&&!v.output&&!v.redeem&&!v.witness)throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$3.typeforce)({network:types_1$3.typeforce.maybe(types_1$3.typeforce.Object),address:types_1$3.typeforce.maybe(types_1$3.typeforce.String),hash:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(32)),output:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(34)),redeem:types_1$3.typeforce.maybe({input:types_1$3.typeforce.maybe(types_1$3.typeforce.Buffer),network:types_1$3.typeforce.maybe(types_1$3.typeforce.Object),output:types_1$3.typeforce.maybe(types_1$3.typeforce.Buffer),witness:types_1$3.typeforce.maybe(types_1$3.typeforce.arrayOf(types_1$3.typeforce.Buffer))}),input:types_1$3.typeforce.maybe(types_1$3.typeforce.BufferN(0)),witness:types_1$3.typeforce.maybe(types_1$3.typeforce.arrayOf(types_1$3.typeforce.Buffer))},v);const x=lazy$1.value(()=>{const T=bech32_1$2.bech32.decode(v.address),O=T.words.shift(),k=bech32_1$2.bech32.fromWords(T.words);return{version:O,prefix:T.prefix,data:dist$4.Buffer.from(k)}}),E=lazy$1.value(()=>bscript$5.decompile(v.redeem.input));let A=v.network;A||(A=v.redeem&&v.redeem.network||networks_1$2.bitcoin);const P={network:A};if(lazy$1.prop(P,"address",()=>{if(!P.hash)return;const T=bech32_1$2.bech32.toWords(P.hash);return T.unshift(0),bech32_1$2.bech32.encode(A.bech32,T)}),lazy$1.prop(P,"hash",()=>{if(v.output)return v.output.slice(2);if(v.address)return x().data;if(P.redeem&&P.redeem.output)return bcrypto$2.sha256(P.redeem.output)}),lazy$1.prop(P,"output",()=>{if(P.hash)return bscript$5.compile([OPS$1.OP_0,P.hash])}),lazy$1.prop(P,"redeem",()=>{if(v.witness)return{output:v.witness[v.witness.length-1],input:EMPTY_BUFFER$1,witness:v.witness.slice(0,-1)}}),lazy$1.prop(P,"input",()=>{if(P.witness)return EMPTY_BUFFER$1}),lazy$1.prop(P,"witness",()=>{if(v.redeem&&v.redeem.input&&v.redeem.input.length>0&&v.redeem.output&&v.redeem.output.length>0){const T=bscript$5.toStack(E());return P.redeem=Object.assign({witness:T},v.redeem),P.redeem.input=EMPTY_BUFFER$1,[].concat(T,v.redeem.output)}if(v.redeem&&v.redeem.output&&v.redeem.witness)return[].concat(v.redeem.witness,v.redeem.output)}),lazy$1.prop(P,"name",()=>{const T=["p2wsh"];return P.redeem!==void 0&&P.redeem.name!==void 0&&T.push(P.redeem.name),T.join("-")}),_.validate){let T=dist$4.Buffer.from([]);if(v.address){if(x().prefix!==A.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==0)throw new TypeError("Invalid address version");if(x().data.length!==32)throw new TypeError("Invalid address data");T=x().data}if(v.hash){if(T.length>0&&!T.equals(v.hash))throw new TypeError("Hash mismatch");T=v.hash}if(v.output){if(v.output.length!==34||v.output[0]!==OPS$1.OP_0||v.output[1]!==32)throw new TypeError("Output is invalid");const O=v.output.slice(2);if(T.length>0&&!T.equals(O))throw new TypeError("Hash mismatch");T=O}if(v.redeem){if(v.redeem.network&&v.redeem.network!==A)throw new TypeError("Network mismatch");if(v.redeem.input&&v.redeem.input.length>0&&v.redeem.witness&&v.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(v.redeem.output){const O=bscript$5.decompile(v.redeem.output);if(!O||O.length<1)throw new TypeError("Redeem.output is invalid");if(v.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(bscript$5.countNonPushOnlyOPs(O)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const k=bcrypto$2.sha256(v.redeem.output);if(T.length>0&&!T.equals(k))throw new TypeError("Hash mismatch");T=k}if(v.redeem.input&&!bscript$5.isPushOnly(E()))throw new TypeError("Non push-only scriptSig");if(v.witness&&v.redeem.witness&&!stacksEqual$1(v.witness,v.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(v.redeem.input&&E().some(chunkHasUncompressedPubkey)||v.redeem.output&&(bscript$5.decompile(v.redeem.output)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(v.witness&&v.witness.length>0){const O=v.witness[v.witness.length-1];if(v.redeem&&v.redeem.output&&!v.redeem.output.equals(O))throw new TypeError("Witness and redeem.output mismatch");if(v.witness.some(chunkHasUncompressedPubkey)||(bscript$5.decompile(O)||[]).some(chunkHasUncompressedPubkey))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(P,v)}p2wsh$1.p2wsh=p2wsh;var p2tr$1={},ecc_lib={};Object.defineProperty(ecc_lib,"__esModule",{value:!0}),ecc_lib.getEccLib=ecc_lib.initEccLib=void 0;const _ECCLIB_CACHE={};function initEccLib(v){v?v!==_ECCLIB_CACHE.eccLib&&(verifyEcc(v),_ECCLIB_CACHE.eccLib=v):_ECCLIB_CACHE.eccLib=v}ecc_lib.initEccLib=initEccLib;function getEccLib(){if(!_ECCLIB_CACHE.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return _ECCLIB_CACHE.eccLib}ecc_lib.getEccLib=getEccLib;const h=v=>dist$4.Buffer.from(v,"hex");function verifyEcc(v){assert(typeof v.isXOnlyPoint=="function"),assert(v.isXOnlyPoint(h("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),assert(v.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),assert(v.isXOnlyPoint(h("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),assert(v.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000001"))),assert(!v.isXOnlyPoint(h("0000000000000000000000000000000000000000000000000000000000000000"))),assert(!v.isXOnlyPoint(h("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),assert(typeof v.xOnlyPointAddTweak=="function"),tweakAddVectors.forEach(_=>{const x=v.xOnlyPointAddTweak(h(_.pubkey),h(_.tweak));_.result===null?assert(x===null):(assert(x!==null),assert(x.parity===_.parity),assert(dist$4.Buffer.from(x.xOnlyPubkey).equals(h(_.result))))})}function assert(v){if(!v)throw new Error("ecc library invalid")}const tweakAddVectors=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}];var bip341={},bufferutils={},Buffer=safeBufferExports.Buffer,MAX_SAFE_INTEGER$1=9007199254740991;function checkUInt53$1(v){if(v<0||v>MAX_SAFE_INTEGER$1||v%1!==0)throw new RangeError("value out of range")}function encode$h(v,_,x){if(checkUInt53$1(v),_||(_=Buffer.allocUnsafe(encodingLength$1(v))),!Buffer.isBuffer(_))throw new TypeError("buffer must be a Buffer instance");return x||(x=0),v<253?(_.writeUInt8(v,x),encode$h.bytes=1):v<=65535?(_.writeUInt8(253,x),_.writeUInt16LE(v,x+1),encode$h.bytes=3):v<=4294967295?(_.writeUInt8(254,x),_.writeUInt32LE(v,x+1),encode$h.bytes=5):(_.writeUInt8(255,x),_.writeUInt32LE(v>>>0,x+1),_.writeUInt32LE(v/4294967296|0,x+5),encode$h.bytes=9),_}function decode$e(v,_){if(!Buffer.isBuffer(v))throw new TypeError("buffer must be a Buffer instance");_||(_=0);var x=v.readUInt8(_);if(x<253)return decode$e.bytes=1,x;if(x===253)return decode$e.bytes=3,v.readUInt16LE(_+1);if(x===254)return decode$e.bytes=5,v.readUInt32LE(_+1);decode$e.bytes=9;var E=v.readUInt32LE(_+1),A=v.readUInt32LE(_+5),P=A*4294967296+E;return checkUInt53$1(P),P}function encodingLength$1(v){return checkUInt53$1(v),v<253?1:v<=65535?3:v<=4294967295?5:9}var varuintBitcoin={encode:encode$h,decode:decode$e,encodingLength:encodingLength$1};Object.defineProperty(bufferutils,"__esModule",{value:!0}),bufferutils.BufferReader=bufferutils.BufferWriter=bufferutils.cloneBuffer=bufferutils.reverseBuffer=bufferutils.writeUInt64LE=bufferutils.readUInt64LE=bufferutils.varuint=void 0;const types$2=types$4,{typeforce:typeforce$2}=types$2,varuint$7=varuintBitcoin;bufferutils.varuint=varuint$7;function verifuint$1(v,_){if(typeof v!="number")throw new Error("cannot write a non-number as a number");if(v<0)throw new Error("specified a negative value for writing an unsigned value");if(v>_)throw new Error("RangeError: value out of range");if(Math.floor(v)!==v)throw new Error("value has a fractional component")}function readUInt64LE$1(v,_){const x=v.readUInt32LE(_);let E=v.readUInt32LE(_+4);return E*=4294967296,verifuint$1(E+x,9007199254740991),E+x}bufferutils.readUInt64LE=readUInt64LE$1;function writeUInt64LE$1(v,_,x){return verifuint$1(_,9007199254740991),v.writeInt32LE(_&-1,x),v.writeUInt32LE(Math.floor(_/4294967296),x+4),x+8}bufferutils.writeUInt64LE=writeUInt64LE$1;function reverseBuffer$1(v){if(v.length<1)return v;let _=v.length-1,x=0;for(let E=0;E<v.length/2;E++)x=v[E],v[E]=v[_],v[_]=x,_--;return v}bufferutils.reverseBuffer=reverseBuffer$1;function cloneBuffer(v){const _=dist$4.Buffer.allocUnsafe(v.length);return v.copy(_),_}bufferutils.cloneBuffer=cloneBuffer;class BufferWriter{static withCapacity(_){return new BufferWriter(dist$4.Buffer.alloc(_))}constructor(_,x=0){this.buffer=_,this.offset=x,typeforce$2(types$2.tuple(types$2.Buffer,types$2.UInt32),[_,x])}writeUInt8(_){this.offset=this.buffer.writeUInt8(_,this.offset)}writeInt32(_){this.offset=this.buffer.writeInt32LE(_,this.offset)}writeUInt32(_){this.offset=this.buffer.writeUInt32LE(_,this.offset)}writeUInt64(_){this.offset=writeUInt64LE$1(this.buffer,_,this.offset)}writeVarInt(_){varuint$7.encode(_,this.buffer,this.offset),this.offset+=varuint$7.encode.bytes}writeSlice(_){if(this.buffer.length<this.offset+_.length)throw new Error("Cannot write slice out of bounds");this.offset+=_.copy(this.buffer,this.offset)}writeVarSlice(_){this.writeVarInt(_.length),this.writeSlice(_)}writeVector(_){this.writeVarInt(_.length),_.forEach(x=>this.writeVarSlice(x))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}bufferutils.BufferWriter=BufferWriter;class BufferReader{constructor(_,x=0){this.buffer=_,this.offset=x,typeforce$2(types$2.tuple(types$2.Buffer,types$2.UInt32),[_,x])}readUInt8(){const _=this.buffer.readUInt8(this.offset);return this.offset++,_}readInt32(){const _=this.buffer.readInt32LE(this.offset);return this.offset+=4,_}readUInt32(){const _=this.buffer.readUInt32LE(this.offset);return this.offset+=4,_}readUInt64(){const _=readUInt64LE$1(this.buffer,this.offset);return this.offset+=8,_}readVarInt(){const _=varuint$7.decode(this.buffer,this.offset);return this.offset+=varuint$7.decode.bytes,_}readSlice(_){if(this.buffer.length<this.offset+_)throw new Error("Cannot read slice out of bounds");const x=this.buffer.slice(this.offset,this.offset+_);return this.offset+=_,x}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const _=this.readVarInt(),x=[];for(let E=0;E<_;E++)x.push(this.readVarSlice());return x}}bufferutils.BufferReader=BufferReader,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.tweakKey=v.tapTweakHash=v.tapleafHash=v.findScriptPath=v.toHashTree=v.rootHashFromPath=v.MAX_TAPTREE_DEPTH=v.LEAF_VERSION_TAPSCRIPT=void 0;const _=bufferPolyfill,x=ecc_lib,E=crypto$3,A=bufferutils,P=types$4;v.LEAF_VERSION_TAPSCRIPT=192,v.MAX_TAPTREE_DEPTH=128;const T=V=>"left"in V&&"right"in V;function O(V,X){if(V.length<33)throw new TypeError(`The control-block length is too small. Got ${V.length}, expected min 33.`);const re=(V.length-33)/32;let ee=X;for(let fe=0;fe<re;fe++){const le=V.slice(33+32*fe,65+32*fe);ee.compare(le)<0?ee=D(ee,le):ee=D(le,ee)}return ee}v.rootHashFromPath=O;function k(V){if((0,P.isTapleaf)(V))return{hash:U(V)};const X=[k(V[0]),k(V[1])];X.sort((fe,le)=>fe.hash.compare(le.hash));const[re,ee]=X;return{hash:D(re.hash,ee.hash),left:re,right:ee}}v.toHashTree=k;function C(V,X){if(T(V)){const re=C(V.left,X);if(re!==void 0)return[...re,V.right.hash];const ee=C(V.right,X);if(ee!==void 0)return[...ee,V.left.hash]}else if(V.hash.equals(X))return[]}v.findScriptPath=C;function U(V){const X=V.version||v.LEAF_VERSION_TAPSCRIPT;return E.taggedHash("TapLeaf",_.Buffer.concat([_.Buffer.from([X]),j(V.output)]))}v.tapleafHash=U;function N(V,X){return E.taggedHash("TapTweak",_.Buffer.concat(X?[V,X]:[V]))}v.tapTweakHash=N;function H(V,X){if(!_.Buffer.isBuffer(V)||V.length!==32||X&&X.length!==32)return null;const re=N(V,X),ee=(0,x.getEccLib)().xOnlyPointAddTweak(V,re);return!ee||ee.xOnlyPubkey===null?null:{parity:ee.parity,x:_.Buffer.from(ee.xOnlyPubkey)}}v.tweakKey=H;function D(V,X){return E.taggedHash("TapBranch",_.Buffer.concat([V,X]))}function j(V){const X=A.varuint.encodingLength(V.length),re=_.Buffer.allocUnsafe(X);return A.varuint.encode(V.length,re),_.Buffer.concat([re,V])}}(bip341),Object.defineProperty(p2tr$1,"__esModule",{value:!0}),p2tr$1.p2tr=void 0;const buffer_1=bufferPolyfill,networks_1$1=networks$1,bscript$4=script,types_1$2=types$4,ecc_lib_1=ecc_lib,bip341_1$2=bip341,lazy=lazy$8,bech32_1$1=dist$1,OPS=bscript$4.OPS,TAPROOT_WITNESS_VERSION=1,ANNEX_PREFIX=80;function p2tr(v,_){if(!v.address&&!v.output&&!v.pubkey&&!v.internalPubkey&&!(v.witness&&v.witness.length>1))throw new TypeError("Not enough data");_=Object.assign({validate:!0},_||{}),(0,types_1$2.typeforce)({address:types_1$2.typeforce.maybe(types_1$2.typeforce.String),input:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(0)),network:types_1$2.typeforce.maybe(types_1$2.typeforce.Object),output:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(34)),internalPubkey:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),hash:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),pubkey:types_1$2.typeforce.maybe(types_1$2.typeforce.BufferN(32)),signature:types_1$2.typeforce.maybe(types_1$2.typeforce.anyOf(types_1$2.typeforce.BufferN(64),types_1$2.typeforce.BufferN(65))),witness:types_1$2.typeforce.maybe(types_1$2.typeforce.arrayOf(types_1$2.typeforce.Buffer)),scriptTree:types_1$2.typeforce.maybe(types_1$2.isTaptree),redeem:types_1$2.typeforce.maybe({output:types_1$2.typeforce.maybe(types_1$2.typeforce.Buffer),redeemVersion:types_1$2.typeforce.maybe(types_1$2.typeforce.Number),witness:types_1$2.typeforce.maybe(types_1$2.typeforce.arrayOf(types_1$2.typeforce.Buffer))}),redeemVersion:types_1$2.typeforce.maybe(types_1$2.typeforce.Number)},v);const x=lazy.value(()=>{const O=bech32_1$1.bech32m.decode(v.address),k=O.words.shift(),C=bech32_1$1.bech32m.fromWords(O.words);return{version:k,prefix:O.prefix,data:buffer_1.Buffer.from(C)}}),E=lazy.value(()=>{if(!(!v.witness||!v.witness.length))return v.witness.length>=2&&v.witness[v.witness.length-1][0]===ANNEX_PREFIX?v.witness.slice(0,-1):v.witness.slice()}),A=lazy.value(()=>{if(v.scriptTree)return(0,bip341_1$2.toHashTree)(v.scriptTree);if(v.hash)return{hash:v.hash}}),P=v.network||networks_1$1.bitcoin,T={name:"p2tr",network:P};if(lazy.prop(T,"address",()=>{if(!T.pubkey)return;const O=bech32_1$1.bech32m.toWords(T.pubkey);return O.unshift(TAPROOT_WITNESS_VERSION),bech32_1$1.bech32m.encode(P.bech32,O)}),lazy.prop(T,"hash",()=>{const O=A();if(O)return O.hash;const k=E();if(k&&k.length>1){const C=k[k.length-1],U=C[0]&types_1$2.TAPLEAF_VERSION_MASK,N=k[k.length-2],H=(0,bip341_1$2.tapleafHash)({output:N,version:U});return(0,bip341_1$2.rootHashFromPath)(C,H)}return null}),lazy.prop(T,"output",()=>{if(T.pubkey)return bscript$4.compile([OPS.OP_1,T.pubkey])}),lazy.prop(T,"redeemVersion",()=>v.redeemVersion?v.redeemVersion:v.redeem&&v.redeem.redeemVersion!==void 0&&v.redeem.redeemVersion!==null?v.redeem.redeemVersion:bip341_1$2.LEAF_VERSION_TAPSCRIPT),lazy.prop(T,"redeem",()=>{const O=E();if(!(!O||O.length<2))return{output:O[O.length-2],witness:O.slice(0,-2),redeemVersion:O[O.length-1][0]&types_1$2.TAPLEAF_VERSION_MASK}}),lazy.prop(T,"pubkey",()=>{if(v.pubkey)return v.pubkey;if(v.output)return v.output.slice(2);if(v.address)return x().data;if(T.internalPubkey){const O=(0,bip341_1$2.tweakKey)(T.internalPubkey,T.hash);if(O)return O.x}}),lazy.prop(T,"internalPubkey",()=>{if(v.internalPubkey)return v.internalPubkey;const O=E();if(O&&O.length>1)return O[O.length-1].slice(1,33)}),lazy.prop(T,"signature",()=>{if(v.signature)return v.signature;const O=E();if(!(!O||O.length!==1))return O[0]}),lazy.prop(T,"witness",()=>{if(v.witness)return v.witness;const O=A();if(O&&v.redeem&&v.redeem.output&&v.internalPubkey){const k=(0,bip341_1$2.tapleafHash)({output:v.redeem.output,version:T.redeemVersion}),C=(0,bip341_1$2.findScriptPath)(O,k);if(!C)return;const U=(0,bip341_1$2.tweakKey)(v.internalPubkey,O.hash);if(!U)return;const N=buffer_1.Buffer.concat([buffer_1.Buffer.from([T.redeemVersion|U.parity]),v.internalPubkey].concat(C));return[v.redeem.output,N]}if(v.signature)return[v.signature]}),_.validate){let O=buffer_1.Buffer.from([]);if(v.address){if(P&&P.bech32!==x().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(x().version!==TAPROOT_WITNESS_VERSION)throw new TypeError("Invalid address version");if(x().data.length!==32)throw new TypeError("Invalid address data");O=x().data}if(v.pubkey){if(O.length>0&&!O.equals(v.pubkey))throw new TypeError("Pubkey mismatch");O=v.pubkey}if(v.output){if(v.output.length!==34||v.output[0]!==OPS.OP_1||v.output[1]!==32)throw new TypeError("Output is invalid");if(O.length>0&&!O.equals(v.output.slice(2)))throw new TypeError("Pubkey mismatch");O=v.output.slice(2)}if(v.internalPubkey){const U=(0,bip341_1$2.tweakKey)(v.internalPubkey,T.hash);if(O.length>0&&!O.equals(U.x))throw new TypeError("Pubkey mismatch");O=U.x}if(O&&O.length&&!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(O))throw new TypeError("Invalid pubkey for p2tr");const k=A();if(v.hash&&k&&!v.hash.equals(k.hash))throw new TypeError("Hash mismatch");if(v.redeem&&v.redeem.output&&k){const U=(0,bip341_1$2.tapleafHash)({output:v.redeem.output,version:T.redeemVersion});if(!(0,bip341_1$2.findScriptPath)(k,U))throw new TypeError("Redeem script not in tree")}const C=E();if(v.redeem&&T.redeem){if(v.redeem.redeemVersion&&v.redeem.redeemVersion!==T.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(v.redeem.output){if(bscript$4.decompile(v.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(T.redeem.output&&!v.redeem.output.equals(T.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(v.redeem.witness&&T.redeem.witness&&!stacksEqual(v.redeem.witness,T.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(C&&C.length)if(C.length===1){if(v.signature&&!v.signature.equals(C[0]))throw new TypeError("Signature mismatch")}else{const U=C[C.length-1];if(U.length<33)throw new TypeError(`The control-block length is too small. Got ${U.length}, expected min 33.`);if((U.length-33)%32!==0)throw new TypeError(`The control-block length of ${U.length} is incorrect!`);const N=(U.length-33)/32;if(N>128)throw new TypeError(`The script path is too long. Got ${N}, expected max 128.`);const H=U.slice(1,33);if(v.internalPubkey&&!v.internalPubkey.equals(H))throw new TypeError("Internal pubkey mismatch");if(!(0,ecc_lib_1.getEccLib)().isXOnlyPoint(H))throw new TypeError("Invalid internalPubkey for p2tr witness");const D=U[0]&types_1$2.TAPLEAF_VERSION_MASK,j=C[C.length-2],V=(0,bip341_1$2.tapleafHash)({output:j,version:D}),X=(0,bip341_1$2.rootHashFromPath)(U,V),re=(0,bip341_1$2.tweakKey)(H,X);if(!re)throw new TypeError("Invalid outputKey for p2tr witness");if(O.length&&!O.equals(re.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(re.parity!==(U[0]&1))throw new Error("Incorrect parity")}}return Object.assign(T,v)}p2tr$1.p2tr=p2tr;function stacksEqual(v,_){return v.length!==_.length?!1:v.every((x,E)=>x.equals(_[E]))}(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.p2tr=v.p2wsh=v.p2wpkh=v.p2sh=v.p2pkh=v.p2pk=v.p2ms=v.embed=void 0;const _=embed;Object.defineProperty(v,"embed",{enumerable:!0,get:function(){return _.p2data}});const x=p2ms$1;Object.defineProperty(v,"p2ms",{enumerable:!0,get:function(){return x.p2ms}});const E=p2pk$1;Object.defineProperty(v,"p2pk",{enumerable:!0,get:function(){return E.p2pk}});const A=p2pkh$1;Object.defineProperty(v,"p2pkh",{enumerable:!0,get:function(){return A.p2pkh}});const P=p2sh$1;Object.defineProperty(v,"p2sh",{enumerable:!0,get:function(){return P.p2sh}});const T=p2wpkh$1;Object.defineProperty(v,"p2wpkh",{enumerable:!0,get:function(){return T.p2wpkh}});const O=p2wsh$1;Object.defineProperty(v,"p2wsh",{enumerable:!0,get:function(){return O.p2wsh}});const k=p2tr$1;Object.defineProperty(v,"p2tr",{enumerable:!0,get:function(){return k.p2tr}})})(payments$3),Object.defineProperty(address,"__esModule",{value:!0}),address.toOutputScript=address.fromOutputScript=address.toBech32=address.toBase58Check=address.fromBech32=address.fromBase58Check=void 0;const networks=networks$1,payments$2=payments$3,bscript$3=script,types_1$1=types$4,bech32_1=dist$1,bs58check=bs58check$3,FUTURE_SEGWIT_MAX_SIZE=40,FUTURE_SEGWIT_MIN_SIZE=2,FUTURE_SEGWIT_MAX_VERSION=16,FUTURE_SEGWIT_MIN_VERSION=2,FUTURE_SEGWIT_VERSION_DIFF=80,FUTURE_SEGWIT_VERSION_WARNING="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function _toFutureSegwitAddress(v,_){const x=v.slice(2);if(x.length<FUTURE_SEGWIT_MIN_SIZE||x.length>FUTURE_SEGWIT_MAX_SIZE)throw new TypeError("Invalid program length for segwit address");const E=v[0]-FUTURE_SEGWIT_VERSION_DIFF;if(E<FUTURE_SEGWIT_MIN_VERSION||E>FUTURE_SEGWIT_MAX_VERSION)throw new TypeError("Invalid version for segwit address");if(v[1]!==x.length)throw new TypeError("Invalid script for segwit address");return console.warn(FUTURE_SEGWIT_VERSION_WARNING),toBech32(x,E,_.bech32)}function fromBase58Check(v){const _=dist$4.Buffer.from(bs58check.decode(v));if(_.length<21)throw new TypeError(v+" is too short");if(_.length>21)throw new TypeError(v+" is too long");const x=_.readUInt8(0),E=_.slice(1);return{version:x,hash:E}}address.fromBase58Check=fromBase58Check;function fromBech32(v){let _,x;try{_=bech32_1.bech32.decode(v)}catch{}if(_){if(x=_.words[0],x!==0)throw new TypeError(v+" uses wrong encoding")}else if(_=bech32_1.bech32m.decode(v),x=_.words[0],x===0)throw new TypeError(v+" uses wrong encoding");const E=bech32_1.bech32.fromWords(_.words.slice(1));return{version:x,prefix:_.prefix,data:dist$4.Buffer.from(E)}}address.fromBech32=fromBech32;function toBase58Check(v,_){(0,types_1$1.typeforce)((0,types_1$1.tuple)(types_1$1.Hash160bit,types_1$1.UInt8),arguments);const x=dist$4.Buffer.allocUnsafe(21);return x.writeUInt8(_,0),v.copy(x,1),bs58check.encode(x)}address.toBase58Check=toBase58Check;function toBech32(v,_,x){const E=bech32_1.bech32.toWords(v);return E.unshift(_),_===0?bech32_1.bech32.encode(x,E):bech32_1.bech32m.encode(x,E)}address.toBech32=toBech32;function fromOutputScript(v,_){_=_||networks.bitcoin;try{return payments$2.p2pkh({output:v,network:_}).address}catch{}try{return payments$2.p2sh({output:v,network:_}).address}catch{}try{return payments$2.p2wpkh({output:v,network:_}).address}catch{}try{return payments$2.p2wsh({output:v,network:_}).address}catch{}try{return payments$2.p2tr({output:v,network:_}).address}catch{}try{return _toFutureSegwitAddress(v,_)}catch{}throw new Error(bscript$3.toASM(v)+" has no matching Address")}address.fromOutputScript=fromOutputScript;function toOutputScript(v,_){_=_||networks.bitcoin;let x,E;try{x=fromBase58Check(v)}catch{}if(x){if(x.version===_.pubKeyHash)return payments$2.p2pkh({hash:x.hash}).output;if(x.version===_.scriptHash)return payments$2.p2sh({hash:x.hash}).output}else{try{E=fromBech32(v)}catch{}if(E){if(E.prefix!==_.bech32)throw new Error(v+" has an invalid prefix");if(E.version===0){if(E.data.length===20)return payments$2.p2wpkh({hash:E.data}).output;if(E.data.length===32)return payments$2.p2wsh({hash:E.data}).output}else if(E.version===1){if(E.data.length===32)return payments$2.p2tr({pubkey:E.data}).output}else if(E.version>=FUTURE_SEGWIT_MIN_VERSION&&E.version<=FUTURE_SEGWIT_MAX_VERSION&&E.data.length>=FUTURE_SEGWIT_MIN_SIZE&&E.data.length<=FUTURE_SEGWIT_MAX_SIZE)return console.warn(FUTURE_SEGWIT_VERSION_WARNING),bscript$3.compile([E.version+FUTURE_SEGWIT_VERSION_DIFF,E.data])}}throw new Error(v+" has no matching Script")}address.toOutputScript=toOutputScript;var block={},merkle={};Object.defineProperty(merkle,"__esModule",{value:!0}),merkle.fastMerkleRoot=void 0;function fastMerkleRoot(v,_){if(!Array.isArray(v))throw TypeError("Expected values Array");if(typeof _!="function")throw TypeError("Expected digest Function");let x=v.length;const E=v.concat();for(;x>1;){let A=0;for(let P=0;P<x;P+=2,++A){const T=E[P],O=P+1===x?T:E[P+1],k=dist$4.Buffer.concat([T,O]);E[A]=_(k)}x=A}return E[0]}merkle.fastMerkleRoot=fastMerkleRoot;var transaction={};Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Transaction=void 0;const bufferutils_1$2=bufferutils,bcrypto$1=crypto$3,bscript$2=script,script_1=script,types$1=types$4,{typeforce:typeforce$1}=types$1;function varSliceSize(v){const _=v.length;return bufferutils_1$2.varuint.encodingLength(_)+_}function vectorSize(v){const _=v.length;return bufferutils_1$2.varuint.encodingLength(_)+v.reduce((x,E)=>x+varSliceSize(E),0)}const EMPTY_BUFFER=dist$4.Buffer.allocUnsafe(0),EMPTY_WITNESS=[],ZERO=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),ONE=dist$4.Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),VALUE_UINT64_MAX=dist$4.Buffer.from("ffffffffffffffff","hex"),BLANK_OUTPUT={script:EMPTY_BUFFER,valueBuffer:VALUE_UINT64_MAX};function isOutput(v){return v.value!==void 0}class Transaction{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(_,x){const E=new bufferutils_1$2.BufferReader(_),A=new Transaction;A.version=E.readInt32();const P=E.readUInt8(),T=E.readUInt8();let O=!1;P===Transaction.ADVANCED_TRANSACTION_MARKER&&T===Transaction.ADVANCED_TRANSACTION_FLAG?O=!0:E.offset-=2;const k=E.readVarInt();for(let U=0;U<k;++U)A.ins.push({hash:E.readSlice(32),index:E.readUInt32(),script:E.readVarSlice(),sequence:E.readUInt32(),witness:EMPTY_WITNESS});const C=E.readVarInt();for(let U=0;U<C;++U)A.outs.push({value:E.readUInt64(),script:E.readVarSlice()});if(O){for(let U=0;U<k;++U)A.ins[U].witness=E.readVector();if(!A.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(A.locktime=E.readUInt32(),x)return A;if(E.offset!==_.length)throw new Error("Transaction has unexpected data");return A}static fromHex(_){return Transaction.fromBuffer(dist$4.Buffer.from(_,"hex"),!1)}static isCoinbaseHash(_){typeforce$1(types$1.Hash256bit,_);for(let x=0;x<32;++x)if(_[x]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&Transaction.isCoinbaseHash(this.ins[0].hash)}addInput(_,x,E,A){return typeforce$1(types$1.tuple(types$1.Hash256bit,types$1.UInt32,types$1.maybe(types$1.UInt32),types$1.maybe(types$1.Buffer)),arguments),types$1.Null(E)&&(E=Transaction.DEFAULT_SEQUENCE),this.ins.push({hash:_,index:x,script:A||EMPTY_BUFFER,sequence:E,witness:EMPTY_WITNESS})-1}addOutput(_,x){return typeforce$1(types$1.tuple(types$1.Buffer,types$1.Satoshi),arguments),this.outs.push({script:_,value:x})-1}hasWitnesses(){return this.ins.some(_=>_.witness.length!==0)}weight(){const _=this.byteLength(!1),x=this.byteLength(!0);return _*3+x}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(_=!0){const x=_&&this.hasWitnesses();return(x?10:8)+bufferutils_1$2.varuint.encodingLength(this.ins.length)+bufferutils_1$2.varuint.encodingLength(this.outs.length)+this.ins.reduce((E,A)=>E+40+varSliceSize(A.script),0)+this.outs.reduce((E,A)=>E+8+varSliceSize(A.script),0)+(x?this.ins.reduce((E,A)=>E+vectorSize(A.witness),0):0)}clone(){const _=new Transaction;return _.version=this.version,_.locktime=this.locktime,_.ins=this.ins.map(x=>({hash:x.hash,index:x.index,script:x.script,sequence:x.sequence,witness:x.witness})),_.outs=this.outs.map(x=>({script:x.script,value:x.value})),_}hashForSignature(_,x,E){if(typeforce$1(types$1.tuple(types$1.UInt32,types$1.Buffer,types$1.Number),arguments),_>=this.ins.length)return ONE;const A=bscript$2.compile(bscript$2.decompile(x).filter(O=>O!==script_1.OPS.OP_CODESEPARATOR)),P=this.clone();if((E&31)===Transaction.SIGHASH_NONE)P.outs=[],P.ins.forEach((O,k)=>{k!==_&&(O.sequence=0)});else if((E&31)===Transaction.SIGHASH_SINGLE){if(_>=this.outs.length)return ONE;P.outs.length=_+1;for(let O=0;O<_;O++)P.outs[O]=BLANK_OUTPUT;P.ins.forEach((O,k)=>{k!==_&&(O.sequence=0)})}E&Transaction.SIGHASH_ANYONECANPAY?(P.ins=[P.ins[_]],P.ins[0].script=A):(P.ins.forEach(O=>{O.script=EMPTY_BUFFER}),P.ins[_].script=A);const T=dist$4.Buffer.allocUnsafe(P.byteLength(!1)+4);return T.writeInt32LE(E,T.length-4),P.__toBuffer(T,0,!1),bcrypto$1.hash256(T)}hashForWitnessV1(_,x,E,A,P,T){if(typeforce$1(types$1.tuple(types$1.UInt32,typeforce$1.arrayOf(types$1.Buffer),typeforce$1.arrayOf(types$1.Satoshi),types$1.UInt32),arguments),E.length!==this.ins.length||x.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const O=A===Transaction.SIGHASH_DEFAULT?Transaction.SIGHASH_ALL:A&Transaction.SIGHASH_OUTPUT_MASK,C=(A&Transaction.SIGHASH_INPUT_MASK)===Transaction.SIGHASH_ANYONECANPAY,U=O===Transaction.SIGHASH_NONE,N=O===Transaction.SIGHASH_SINGLE;let H=EMPTY_BUFFER,D=EMPTY_BUFFER,j=EMPTY_BUFFER,V=EMPTY_BUFFER,X=EMPTY_BUFFER;if(!C){let le=bufferutils_1$2.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(pe=>{le.writeSlice(pe.hash),le.writeUInt32(pe.index)}),H=bcrypto$1.sha256(le.end()),le=bufferutils_1$2.BufferWriter.withCapacity(8*this.ins.length),E.forEach(pe=>le.writeUInt64(pe)),D=bcrypto$1.sha256(le.end()),le=bufferutils_1$2.BufferWriter.withCapacity(x.map(varSliceSize).reduce((pe,ie)=>pe+ie)),x.forEach(pe=>le.writeVarSlice(pe)),j=bcrypto$1.sha256(le.end()),le=bufferutils_1$2.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(pe=>le.writeUInt32(pe.sequence)),V=bcrypto$1.sha256(le.end())}if(U||N){if(N&&_<this.outs.length){const le=this.outs[_],pe=bufferutils_1$2.BufferWriter.withCapacity(8+varSliceSize(le.script));pe.writeUInt64(le.value),pe.writeVarSlice(le.script),X=bcrypto$1.sha256(pe.end())}}else{const le=this.outs.map(ie=>8+varSliceSize(ie.script)).reduce((ie,he)=>ie+he),pe=bufferutils_1$2.BufferWriter.withCapacity(le);this.outs.forEach(ie=>{pe.writeUInt64(ie.value),pe.writeVarSlice(ie.script)}),X=bcrypto$1.sha256(pe.end())}const re=(P?2:0)+(T?1:0),ee=174-(C?49:0)-(U?32:0)+(T?32:0)+(P?37:0),fe=bufferutils_1$2.BufferWriter.withCapacity(ee);if(fe.writeUInt8(A),fe.writeInt32(this.version),fe.writeUInt32(this.locktime),fe.writeSlice(H),fe.writeSlice(D),fe.writeSlice(j),fe.writeSlice(V),U||N||fe.writeSlice(X),fe.writeUInt8(re),C){const le=this.ins[_];fe.writeSlice(le.hash),fe.writeUInt32(le.index),fe.writeUInt64(E[_]),fe.writeVarSlice(x[_]),fe.writeUInt32(le.sequence)}else fe.writeUInt32(_);if(T){const le=bufferutils_1$2.BufferWriter.withCapacity(varSliceSize(T));le.writeVarSlice(T),fe.writeSlice(bcrypto$1.sha256(le.end()))}return N&&fe.writeSlice(X),P&&(fe.writeSlice(P),fe.writeUInt8(0),fe.writeUInt32(4294967295)),bcrypto$1.taggedHash("TapSighash",dist$4.Buffer.concat([dist$4.Buffer.from([0]),fe.end()]))}hashForWitnessV0(_,x,E,A){typeforce$1(types$1.tuple(types$1.UInt32,types$1.Buffer,types$1.Satoshi,types$1.UInt32),arguments);let P=dist$4.Buffer.from([]),T,O=ZERO,k=ZERO,C=ZERO;if(A&Transaction.SIGHASH_ANYONECANPAY||(P=dist$4.Buffer.allocUnsafe(36*this.ins.length),T=new bufferutils_1$2.BufferWriter(P,0),this.ins.forEach(N=>{T.writeSlice(N.hash),T.writeUInt32(N.index)}),k=bcrypto$1.hash256(P)),!(A&Transaction.SIGHASH_ANYONECANPAY)&&(A&31)!==Transaction.SIGHASH_SINGLE&&(A&31)!==Transaction.SIGHASH_NONE&&(P=dist$4.Buffer.allocUnsafe(4*this.ins.length),T=new bufferutils_1$2.BufferWriter(P,0),this.ins.forEach(N=>{T.writeUInt32(N.sequence)}),C=bcrypto$1.hash256(P)),(A&31)!==Transaction.SIGHASH_SINGLE&&(A&31)!==Transaction.SIGHASH_NONE){const N=this.outs.reduce((H,D)=>H+8+varSliceSize(D.script),0);P=dist$4.Buffer.allocUnsafe(N),T=new bufferutils_1$2.BufferWriter(P,0),this.outs.forEach(H=>{T.writeUInt64(H.value),T.writeVarSlice(H.script)}),O=bcrypto$1.hash256(P)}else if((A&31)===Transaction.SIGHASH_SINGLE&&_<this.outs.length){const N=this.outs[_];P=dist$4.Buffer.allocUnsafe(8+varSliceSize(N.script)),T=new bufferutils_1$2.BufferWriter(P,0),T.writeUInt64(N.value),T.writeVarSlice(N.script),O=bcrypto$1.hash256(P)}P=dist$4.Buffer.allocUnsafe(156+varSliceSize(x)),T=new bufferutils_1$2.BufferWriter(P,0);const U=this.ins[_];return T.writeInt32(this.version),T.writeSlice(k),T.writeSlice(C),T.writeSlice(U.hash),T.writeUInt32(U.index),T.writeVarSlice(x),T.writeUInt64(E),T.writeUInt32(U.sequence),T.writeSlice(O),T.writeUInt32(this.locktime),T.writeUInt32(A),bcrypto$1.hash256(P)}getHash(_){return _&&this.isCoinbase()?dist$4.Buffer.alloc(32,0):bcrypto$1.hash256(this.__toBuffer(void 0,void 0,_))}getId(){return(0,bufferutils_1$2.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(_,x){return this.__toBuffer(_,x,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(_,x){typeforce$1(types$1.tuple(types$1.Number,types$1.Buffer),arguments),this.ins[_].script=x}setWitness(_,x){typeforce$1(types$1.tuple(types$1.Number,[types$1.Buffer]),arguments),this.ins[_].witness=x}__toBuffer(_,x,E=!1){_||(_=dist$4.Buffer.allocUnsafe(this.byteLength(E)));const A=new bufferutils_1$2.BufferWriter(_,x||0);A.writeInt32(this.version);const P=E&&this.hasWitnesses();return P&&(A.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER),A.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG)),A.writeVarInt(this.ins.length),this.ins.forEach(T=>{A.writeSlice(T.hash),A.writeUInt32(T.index),A.writeVarSlice(T.script),A.writeUInt32(T.sequence)}),A.writeVarInt(this.outs.length),this.outs.forEach(T=>{isOutput(T)?A.writeUInt64(T.value):A.writeSlice(T.valueBuffer),A.writeVarSlice(T.script)}),P&&this.ins.forEach(T=>{A.writeVector(T.witness)}),A.writeUInt32(this.locktime),x!==void 0?_.slice(x,A.offset):_}}transaction.Transaction=Transaction,Transaction.DEFAULT_SEQUENCE=4294967295,Transaction.SIGHASH_DEFAULT=0,Transaction.SIGHASH_ALL=1,Transaction.SIGHASH_NONE=2,Transaction.SIGHASH_SINGLE=3,Transaction.SIGHASH_ANYONECANPAY=128,Transaction.SIGHASH_OUTPUT_MASK=3,Transaction.SIGHASH_INPUT_MASK=128,Transaction.ADVANCED_TRANSACTION_MARKER=0,Transaction.ADVANCED_TRANSACTION_FLAG=1,Object.defineProperty(block,"__esModule",{value:!0}),block.Block=void 0;const bufferutils_1$1=bufferutils,bcrypto=crypto$3,merkle_1=merkle,transaction_1$3=transaction,types=types$4,{typeforce}=types,errorMerkleNoTxes=new TypeError("Cannot compute merkle root for zero transactions"),errorWitnessNotSegwit=new TypeError("Cannot compute witness commit for non-segwit block");class Block{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(_){if(_.length<80)throw new Error("Buffer too small (< 80 bytes)");const x=new bufferutils_1$1.BufferReader(_),E=new Block;if(E.version=x.readInt32(),E.prevHash=x.readSlice(32),E.merkleRoot=x.readSlice(32),E.timestamp=x.readUInt32(),E.bits=x.readUInt32(),E.nonce=x.readUInt32(),_.length===80)return E;const A=()=>{const O=transaction_1$3.Transaction.fromBuffer(x.buffer.slice(x.offset),!0);return x.offset+=O.byteLength(),O},P=x.readVarInt();E.transactions=[];for(let O=0;O<P;++O){const k=A();E.transactions.push(k)}const T=E.getWitnessCommit();return T&&(E.witnessCommit=T),E}static fromHex(_){return Block.fromBuffer(dist$4.Buffer.from(_,"hex"))}static calculateTarget(_){const x=((_&4278190080)>>24)-3,E=_&8388607,A=dist$4.Buffer.alloc(32,0);return A.writeUIntBE(E,29-x,3),A}static calculateMerkleRoot(_,x){if(typeforce([{getHash:types.Function}],_),_.length===0)throw errorMerkleNoTxes;if(x&&!txesHaveWitnessCommit(_))throw errorWitnessNotSegwit;const E=_.map(P=>P.getHash(x)),A=(0,merkle_1.fastMerkleRoot)(E,bcrypto.hash256);return x?bcrypto.hash256(dist$4.Buffer.concat([A,_[0].ins[0].witness[0]])):A}getWitnessCommit(){if(!txesHaveWitnessCommit(this.transactions))return null;const _=this.transactions[0].outs.filter(E=>E.script.slice(0,6).equals(dist$4.Buffer.from("6a24aa21a9ed","hex"))).map(E=>E.script.slice(6,38));if(_.length===0)return null;const x=_[_.length-1];return x instanceof dist$4.Buffer&&x.length===32?x:null}hasWitnessCommit(){return this.witnessCommit instanceof dist$4.Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return anyTxHasWitness(this.transactions)}weight(){const _=this.byteLength(!1,!1),x=this.byteLength(!1,!0);return _*3+x}byteLength(_,x=!0){return _||!this.transactions?80:80+bufferutils_1$1.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((E,A)=>E+A.byteLength(x),0)}getHash(){return bcrypto.hash256(this.toBuffer(!0))}getId(){return(0,bufferutils_1$1.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const _=new Date(0);return _.setUTCSeconds(this.timestamp),_}toBuffer(_){const x=dist$4.Buffer.allocUnsafe(this.byteLength(_)),E=new bufferutils_1$1.BufferWriter(x);return E.writeInt32(this.version),E.writeSlice(this.prevHash),E.writeSlice(this.merkleRoot),E.writeUInt32(this.timestamp),E.writeUInt32(this.bits),E.writeUInt32(this.nonce),_||!this.transactions||(bufferutils_1$1.varuint.encode(this.transactions.length,x,E.offset),E.offset+=bufferutils_1$1.varuint.encode.bytes,this.transactions.forEach(A=>{const P=A.byteLength();A.toBuffer(x,E.offset),E.offset+=P})),x}toHex(_){return this.toBuffer(_).toString("hex")}checkTxRoots(){const _=this.hasWitnessCommit();return!_&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(_?this.__checkWitnessCommit():!0)}checkProofOfWork(){const _=(0,bufferutils_1$1.reverseBuffer)(this.getHash()),x=Block.calculateTarget(this.bits);return _.compare(x)<=0}__checkMerkleRoot(){if(!this.transactions)throw errorMerkleNoTxes;const _=Block.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(_)===0}__checkWitnessCommit(){if(!this.transactions)throw errorMerkleNoTxes;if(!this.hasWitnessCommit())throw errorWitnessNotSegwit;const _=Block.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(_)===0}}block.Block=Block;function txesHaveWitnessCommit(v){return v instanceof Array&&v[0]&&v[0].ins&&v[0].ins instanceof Array&&v[0].ins[0]&&v[0].ins[0].witness&&v[0].ins[0].witness instanceof Array&&v[0].ins[0].witness.length>0}function anyTxHasWitness(v){return v instanceof Array&&v.some(_=>typeof _=="object"&&_.ins instanceof Array&&_.ins.some(x=>typeof x=="object"&&x.witness instanceof Array&&x.witness.length>0))}var psbt$1={},psbt={},combiner={},parser={},fromBuffer={},converter={},typeFields={};(function(v){Object.defineProperty(v,"__esModule",{value:!0}),function(_){_[_.UNSIGNED_TX=0]="UNSIGNED_TX",_[_.GLOBAL_XPUB=1]="GLOBAL_XPUB"}(v.GlobalTypes||(v.GlobalTypes={})),v.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],function(_){_[_.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",_[_.WITNESS_UTXO=1]="WITNESS_UTXO",_[_.PARTIAL_SIG=2]="PARTIAL_SIG",_[_.SIGHASH_TYPE=3]="SIGHASH_TYPE",_[_.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",_[_.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",_[_.BIP32_DERIVATION=6]="BIP32_DERIVATION",_[_.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",_[_.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",_[_.POR_COMMITMENT=9]="POR_COMMITMENT",_[_.TAP_KEY_SIG=19]="TAP_KEY_SIG",_[_.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",_[_.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",_[_.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",_[_.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",_[_.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"}(v.InputTypes||(v.InputTypes={})),v.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],function(_){_[_.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",_[_.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",_[_.BIP32_DERIVATION=2]="BIP32_DERIVATION",_[_.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",_[_.TAP_TREE=6]="TAP_TREE",_[_.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(v.OutputTypes||(v.OutputTypes={})),v.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]})(typeFields);var globalXpub$1={};Object.defineProperty(globalXpub$1,"__esModule",{value:!0});const typeFields_1$g=typeFields,range$2=v=>[...Array(v).keys()];function decode$d(v){if(v.key[0]!==typeFields_1$g.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+v.key.toString("hex"));if(v.key.length!==79||![2,3].includes(v.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+v.key.toString("hex"));if(v.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const _=v.key.slice(1),x={masterFingerprint:v.value.slice(0,4),extendedPubkey:_,path:"m"};for(const E of range$2(v.value.length/4-1)){const A=v.value.readUInt32LE(E*4+4),P=!!(A&2147483648),T=A&2147483647;x.path+="/"+T.toString(10)+(P?"'":"")}return x}globalXpub$1.decode=decode$d;function encode$g(v){const _=dist$4.Buffer.from([typeFields_1$g.GlobalTypes.GLOBAL_XPUB]),x=dist$4.Buffer.concat([_,v.extendedPubkey]),E=v.path.split("/"),A=dist$4.Buffer.allocUnsafe(E.length*4);v.masterFingerprint.copy(A,0);let P=4;return E.slice(1).forEach(T=>{const O=T.slice(-1)==="'";let k=2147483647&parseInt(O?T.slice(0,-1):T,10);O&&(k+=2147483648),A.writeUInt32LE(k,P),P+=4}),{key:x,value:A}}globalXpub$1.encode=encode$g,globalXpub$1.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function check$c(v){const _=v.extendedPubkey,x=v.masterFingerprint,E=v.path;return dist$4.Buffer.isBuffer(_)&&_.length===78&&[2,3].indexOf(_[45])>-1&&dist$4.Buffer.isBuffer(x)&&x.length===4&&typeof E=="string"&&!!E.match(/^m(\/\d+'?)*$/)}globalXpub$1.check=check$c;function canAddToArray$3(v,_,x){const E=_.extendedPubkey.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.extendedPubkey.equals(_.extendedPubkey)).length===0)}globalXpub$1.canAddToArray=canAddToArray$3;var unsignedTx$1={};Object.defineProperty(unsignedTx$1,"__esModule",{value:!0});const typeFields_1$f=typeFields;function encode$f(v){return{key:dist$4.Buffer.from([typeFields_1$f.GlobalTypes.UNSIGNED_TX]),value:v.toBuffer()}}unsignedTx$1.encode=encode$f;var finalScriptSig$1={};Object.defineProperty(finalScriptSig$1,"__esModule",{value:!0});const typeFields_1$e=typeFields;function decode$c(v){if(v.key[0]!==typeFields_1$e.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+v.key.toString("hex"));return v.value}finalScriptSig$1.decode=decode$c;function encode$e(v){return{key:dist$4.Buffer.from([typeFields_1$e.InputTypes.FINAL_SCRIPTSIG]),value:v}}finalScriptSig$1.encode=encode$e,finalScriptSig$1.expected="Buffer";function check$b(v){return dist$4.Buffer.isBuffer(v)}finalScriptSig$1.check=check$b;function canAdd$8(v,_){return!!v&&!!_&&v.finalScriptSig===void 0}finalScriptSig$1.canAdd=canAdd$8;var finalScriptWitness$1={};Object.defineProperty(finalScriptWitness$1,"__esModule",{value:!0});const typeFields_1$d=typeFields;function decode$b(v){if(v.key[0]!==typeFields_1$d.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+v.key.toString("hex"));return v.value}finalScriptWitness$1.decode=decode$b;function encode$d(v){return{key:dist$4.Buffer.from([typeFields_1$d.InputTypes.FINAL_SCRIPTWITNESS]),value:v}}finalScriptWitness$1.encode=encode$d,finalScriptWitness$1.expected="Buffer";function check$a(v){return dist$4.Buffer.isBuffer(v)}finalScriptWitness$1.check=check$a;function canAdd$7(v,_){return!!v&&!!_&&v.finalScriptWitness===void 0}finalScriptWitness$1.canAdd=canAdd$7;var nonWitnessUtxo$1={};Object.defineProperty(nonWitnessUtxo$1,"__esModule",{value:!0});const typeFields_1$c=typeFields;function decode$a(v){if(v.key[0]!==typeFields_1$c.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+v.key.toString("hex"));return v.value}nonWitnessUtxo$1.decode=decode$a;function encode$c(v){return{key:dist$4.Buffer.from([typeFields_1$c.InputTypes.NON_WITNESS_UTXO]),value:v}}nonWitnessUtxo$1.encode=encode$c,nonWitnessUtxo$1.expected="Buffer";function check$9(v){return dist$4.Buffer.isBuffer(v)}nonWitnessUtxo$1.check=check$9;function canAdd$6(v,_){return!!v&&!!_&&v.nonWitnessUtxo===void 0}nonWitnessUtxo$1.canAdd=canAdd$6;var partialSig$1={};Object.defineProperty(partialSig$1,"__esModule",{value:!0});const typeFields_1$b=typeFields;function decode$9(v){if(v.key[0]!==typeFields_1$b.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+v.key.toString("hex"));if(!(v.key.length===34||v.key.length===66)||![2,3,4].includes(v.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+v.key.toString("hex"));return{pubkey:v.key.slice(1),signature:v.value}}partialSig$1.decode=decode$9;function encode$b(v){const _=dist$4.Buffer.from([typeFields_1$b.InputTypes.PARTIAL_SIG]);return{key:dist$4.Buffer.concat([_,v.pubkey]),value:v.signature}}partialSig$1.encode=encode$b,partialSig$1.expected="{ pubkey: Buffer; signature: Buffer; }";function check$8(v){return dist$4.Buffer.isBuffer(v.pubkey)&&dist$4.Buffer.isBuffer(v.signature)&&[33,65].includes(v.pubkey.length)&&[2,3,4].includes(v.pubkey[0])&&isDerSigWithSighash(v.signature)}partialSig$1.check=check$8;function isDerSigWithSighash(v){if(!dist$4.Buffer.isBuffer(v)||v.length<9||v[0]!==48||v.length!==v[1]+3||v[2]!==2)return!1;const _=v[3];if(_>33||_<1||v[3+_+1]!==2)return!1;const x=v[3+_+2];return!(x>33||x<1||v.length!==3+_+2+x+2)}function canAddToArray$2(v,_,x){const E=_.pubkey.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.pubkey.equals(_.pubkey)).length===0)}partialSig$1.canAddToArray=canAddToArray$2;var porCommitment$1={};Object.defineProperty(porCommitment$1,"__esModule",{value:!0});const typeFields_1$a=typeFields;function decode$8(v){if(v.key[0]!==typeFields_1$a.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+v.key.toString("hex"));return v.value.toString("utf8")}porCommitment$1.decode=decode$8;function encode$a(v){return{key:dist$4.Buffer.from([typeFields_1$a.InputTypes.POR_COMMITMENT]),value:dist$4.Buffer.from(v,"utf8")}}porCommitment$1.encode=encode$a,porCommitment$1.expected="string";function check$7(v){return typeof v=="string"}porCommitment$1.check=check$7;function canAdd$5(v,_){return!!v&&!!_&&v.porCommitment===void 0}porCommitment$1.canAdd=canAdd$5;var sighashType$1={};Object.defineProperty(sighashType$1,"__esModule",{value:!0});const typeFields_1$9=typeFields;function decode$7(v){if(v.key[0]!==typeFields_1$9.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+v.key.toString("hex"));return v.value.readUInt32LE(0)}sighashType$1.decode=decode$7;function encode$9(v){const _=dist$4.Buffer.from([typeFields_1$9.InputTypes.SIGHASH_TYPE]),x=dist$4.Buffer.allocUnsafe(4);return x.writeUInt32LE(v,0),{key:_,value:x}}sighashType$1.encode=encode$9,sighashType$1.expected="number";function check$6(v){return typeof v=="number"}sighashType$1.check=check$6;function canAdd$4(v,_){return!!v&&!!_&&v.sighashType===void 0}sighashType$1.canAdd=canAdd$4;var tapKeySig$1={};Object.defineProperty(tapKeySig$1,"__esModule",{value:!0});const typeFields_1$8=typeFields;function decode$6(v){if(v.key[0]!==typeFields_1$8.InputTypes.TAP_KEY_SIG||v.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+v.key.toString("hex"));if(!check$5(v.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return v.value}tapKeySig$1.decode=decode$6;function encode$8(v){return{key:dist$4.Buffer.from([typeFields_1$8.InputTypes.TAP_KEY_SIG]),value:v}}tapKeySig$1.encode=encode$8,tapKeySig$1.expected="Buffer";function check$5(v){return dist$4.Buffer.isBuffer(v)&&(v.length===64||v.length===65)}tapKeySig$1.check=check$5;function canAdd$3(v,_){return!!v&&!!_&&v.tapKeySig===void 0}tapKeySig$1.canAdd=canAdd$3;var tapLeafScript$1={};Object.defineProperty(tapLeafScript$1,"__esModule",{value:!0});const typeFields_1$7=typeFields;function decode$5(v){if(v.key[0]!==typeFields_1$7.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+v.key.toString("hex"));if((v.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+v.key.toString("hex"));const _=v.value[v.value.length-1];if((v.key[1]&254)!==_)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+v.key.toString("hex"));const x=v.value.slice(0,-1);return{controlBlock:v.key.slice(1),script:x,leafVersion:_}}tapLeafScript$1.decode=decode$5;function encode$7(v){const _=dist$4.Buffer.from([typeFields_1$7.InputTypes.TAP_LEAF_SCRIPT]),x=dist$4.Buffer.from([v.leafVersion]);return{key:dist$4.Buffer.concat([_,v.controlBlock]),value:dist$4.Buffer.concat([v.script,x])}}tapLeafScript$1.encode=encode$7,tapLeafScript$1.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function check$4(v){return dist$4.Buffer.isBuffer(v.controlBlock)&&(v.controlBlock.length-1)%32===0&&(v.controlBlock[0]&254)===v.leafVersion&&dist$4.Buffer.isBuffer(v.script)}tapLeafScript$1.check=check$4;function canAddToArray$1(v,_,x){const E=_.controlBlock.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.controlBlock.equals(_.controlBlock)).length===0)}tapLeafScript$1.canAddToArray=canAddToArray$1;var tapMerkleRoot$1={};Object.defineProperty(tapMerkleRoot$1,"__esModule",{value:!0});const typeFields_1$6=typeFields;function decode$4(v){if(v.key[0]!==typeFields_1$6.InputTypes.TAP_MERKLE_ROOT||v.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+v.key.toString("hex"));if(!check$3(v.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return v.value}tapMerkleRoot$1.decode=decode$4;function encode$6(v){return{key:dist$4.Buffer.from([typeFields_1$6.InputTypes.TAP_MERKLE_ROOT]),value:v}}tapMerkleRoot$1.encode=encode$6,tapMerkleRoot$1.expected="Buffer";function check$3(v){return dist$4.Buffer.isBuffer(v)&&v.length===32}tapMerkleRoot$1.check=check$3;function canAdd$2(v,_){return!!v&&!!_&&v.tapMerkleRoot===void 0}tapMerkleRoot$1.canAdd=canAdd$2;var tapScriptSig$1={};Object.defineProperty(tapScriptSig$1,"__esModule",{value:!0});const typeFields_1$5=typeFields;function decode$3(v){if(v.key[0]!==typeFields_1$5.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+v.key.toString("hex"));if(v.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+v.key.toString("hex"));if(v.value.length!==64&&v.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+v.key.toString("hex"));const _=v.key.slice(1,33),x=v.key.slice(33);return{pubkey:_,leafHash:x,signature:v.value}}tapScriptSig$1.decode=decode$3;function encode$5(v){const _=dist$4.Buffer.from([typeFields_1$5.InputTypes.TAP_SCRIPT_SIG]);return{key:dist$4.Buffer.concat([_,v.pubkey,v.leafHash]),value:v.signature}}tapScriptSig$1.encode=encode$5,tapScriptSig$1.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function check$2(v){return dist$4.Buffer.isBuffer(v.pubkey)&&dist$4.Buffer.isBuffer(v.leafHash)&&dist$4.Buffer.isBuffer(v.signature)&&v.pubkey.length===32&&v.leafHash.length===32&&(v.signature.length===64||v.signature.length===65)}tapScriptSig$1.check=check$2;function canAddToArray(v,_,x){const E=_.pubkey.toString("hex")+_.leafHash.toString("hex");return x.has(E)?!1:(x.add(E),v.filter(A=>A.pubkey.equals(_.pubkey)&&A.leafHash.equals(_.leafHash)).length===0)}tapScriptSig$1.canAddToArray=canAddToArray;var witnessUtxo$1={},tools={},varint={};Object.defineProperty(varint,"__esModule",{value:!0});const MAX_SAFE_INTEGER=9007199254740991;function checkUInt53(v){if(v<0||v>MAX_SAFE_INTEGER||v%1!==0)throw new RangeError("value out of range")}function encode$4(v,_,x){if(checkUInt53(v),_||(_=dist$4.Buffer.allocUnsafe(encodingLength(v))),!dist$4.Buffer.isBuffer(_))throw new TypeError("buffer must be a Buffer instance");return x||(x=0),v<253?(_.writeUInt8(v,x),Object.assign(encode$4,{bytes:1})):v<=65535?(_.writeUInt8(253,x),_.writeUInt16LE(v,x+1),Object.assign(encode$4,{bytes:3})):v<=4294967295?(_.writeUInt8(254,x),_.writeUInt32LE(v,x+1),Object.assign(encode$4,{bytes:5})):(_.writeUInt8(255,x),_.writeUInt32LE(v>>>0,x+1),_.writeUInt32LE(v/4294967296|0,x+5),Object.assign(encode$4,{bytes:9})),_}varint.encode=encode$4;function decode$2(v,_){if(!dist$4.Buffer.isBuffer(v))throw new TypeError("buffer must be a Buffer instance");_||(_=0);const x=v.readUInt8(_);if(x<253)return Object.assign(decode$2,{bytes:1}),x;if(x===253)return Object.assign(decode$2,{bytes:3}),v.readUInt16LE(_+1);if(x===254)return Object.assign(decode$2,{bytes:5}),v.readUInt32LE(_+1);{Object.assign(decode$2,{bytes:9});const E=v.readUInt32LE(_+1),P=v.readUInt32LE(_+5)*4294967296+E;return checkUInt53(P),P}}varint.decode=decode$2;function encodingLength(v){return checkUInt53(v),v<253?1:v<=65535?3:v<=4294967295?5:9}varint.encodingLength=encodingLength,Object.defineProperty(tools,"__esModule",{value:!0});const varuint$6=varint;tools.range=v=>[...Array(v).keys()];function reverseBuffer(v){if(v.length<1)return v;let _=v.length-1,x=0;for(let E=0;E<v.length/2;E++)x=v[E],v[E]=v[_],v[_]=x,_--;return v}tools.reverseBuffer=reverseBuffer;function keyValsToBuffer(v){const _=v.map(keyValToBuffer);return _.push(dist$4.Buffer.from([0])),dist$4.Buffer.concat(_)}tools.keyValsToBuffer=keyValsToBuffer;function keyValToBuffer(v){const _=v.key.length,x=v.value.length,E=varuint$6.encodingLength(_),A=varuint$6.encodingLength(x),P=dist$4.Buffer.allocUnsafe(E+_+A+x);return varuint$6.encode(_,P,0),v.key.copy(P,E),varuint$6.encode(x,P,E+_),v.value.copy(P,E+_+A),P}tools.keyValToBuffer=keyValToBuffer;function verifuint(v,_){if(typeof v!="number")throw new Error("cannot write a non-number as a number");if(v<0)throw new Error("specified a negative value for writing an unsigned value");if(v>_)throw new Error("RangeError: value out of range");if(Math.floor(v)!==v)throw new Error("value has a fractional component")}function readUInt64LE(v,_){const x=v.readUInt32LE(_);let E=v.readUInt32LE(_+4);return E*=4294967296,verifuint(E+x,9007199254740991),E+x}tools.readUInt64LE=readUInt64LE;function writeUInt64LE(v,_,x){return verifuint(_,9007199254740991),v.writeInt32LE(_&-1,x),v.writeUInt32LE(Math.floor(_/4294967296),x+4),x+8}tools.writeUInt64LE=writeUInt64LE,Object.defineProperty(witnessUtxo$1,"__esModule",{value:!0});const typeFields_1$4=typeFields,tools_1$2=tools,varuint$5=varint;function decode$1(v){if(v.key[0]!==typeFields_1$4.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+v.key.toString("hex"));const _=tools_1$2.readUInt64LE(v.value,0);let x=8;const E=varuint$5.decode(v.value,x);x+=varuint$5.encodingLength(E);const A=v.value.slice(x);if(A.length!==E)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:A,value:_}}witnessUtxo$1.decode=decode$1;function encode$3(v){const{script:_,value:x}=v,E=varuint$5.encodingLength(_.length),A=dist$4.Buffer.allocUnsafe(8+E+_.length);return tools_1$2.writeUInt64LE(A,x,0),varuint$5.encode(_.length,A,8),_.copy(A,8+E),{key:dist$4.Buffer.from([typeFields_1$4.InputTypes.WITNESS_UTXO]),value:A}}witnessUtxo$1.encode=encode$3,witnessUtxo$1.expected="{ script: Buffer; value: number; }";function check$1(v){return dist$4.Buffer.isBuffer(v.script)&&typeof v.value=="number"}witnessUtxo$1.check=check$1;function canAdd$1(v,_){return!!v&&!!_&&v.witnessUtxo===void 0}witnessUtxo$1.canAdd=canAdd$1;var tapTree$1={};Object.defineProperty(tapTree$1,"__esModule",{value:!0});const typeFields_1$3=typeFields,varuint$4=varint;function decode(v){if(v.key[0]!==typeFields_1$3.OutputTypes.TAP_TREE||v.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+v.key.toString("hex"));let _=0;const x=[];for(;_<v.value.length;){const E=v.value[_++],A=v.value[_++],P=varuint$4.decode(v.value,_);_+=varuint$4.encodingLength(P),x.push({depth:E,leafVersion:A,script:v.value.slice(_,_+P)}),_+=P}return{leaves:x}}tapTree$1.decode=decode;function encode$2(v){const _=dist$4.Buffer.from([typeFields_1$3.OutputTypes.TAP_TREE]),x=[].concat(...v.leaves.map(E=>[dist$4.Buffer.of(E.depth,E.leafVersion),varuint$4.encode(E.script.length),E.script]));return{key:_,value:dist$4.Buffer.concat(x)}}tapTree$1.encode=encode$2,tapTree$1.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function check(v){return Array.isArray(v.leaves)&&v.leaves.every(_=>_.depth>=0&&_.depth<=128&&(_.leafVersion&254)===_.leafVersion&&dist$4.Buffer.isBuffer(_.script))}tapTree$1.check=check;function canAdd(v,_){return!!v&&!!_&&v.tapTree===void 0}tapTree$1.canAdd=canAdd;var bip32Derivation$2={};Object.defineProperty(bip32Derivation$2,"__esModule",{value:!0});const range$1=v=>[...Array(v).keys()],isValidDERKey=v=>v.length===33&&[2,3].includes(v[0])||v.length===65&&v[0]===4;function makeConverter$4(v,_=isValidDERKey){function x(O){if(O.key[0]!==v)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+O.key.toString("hex"));const k=O.key.slice(1);if(!_(k))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+O.key.toString("hex"));if(O.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const C={masterFingerprint:O.value.slice(0,4),pubkey:k,path:"m"};for(const U of range$1(O.value.length/4-1)){const N=O.value.readUInt32LE(U*4+4),H=!!(N&2147483648),D=N&2147483647;C.path+="/"+D.toString(10)+(H?"'":"")}return C}function E(O){const k=dist$4.Buffer.from([v]),C=dist$4.Buffer.concat([k,O.pubkey]),U=O.path.split("/"),N=dist$4.Buffer.allocUnsafe(U.length*4);O.masterFingerprint.copy(N,0);let H=4;return U.slice(1).forEach(D=>{const j=D.slice(-1)==="'";let V=2147483647&parseInt(j?D.slice(0,-1):D,10);j&&(V+=2147483648),N.writeUInt32LE(V,H),H+=4}),{key:C,value:N}}const A="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function P(O){return dist$4.Buffer.isBuffer(O.pubkey)&&dist$4.Buffer.isBuffer(O.masterFingerprint)&&typeof O.path=="string"&&_(O.pubkey)&&O.masterFingerprint.length===4}function T(O,k,C){const U=k.pubkey.toString("hex");return C.has(U)?!1:(C.add(U),O.filter(N=>N.pubkey.equals(k.pubkey)).length===0)}return{decode:x,encode:E,check:P,expected:A,canAddToArray:T}}bip32Derivation$2.makeConverter=makeConverter$4;var checkPubkey$1={};Object.defineProperty(checkPubkey$1,"__esModule",{value:!0});function makeChecker(v){return _;function _(x){let E;if(v.includes(x.key[0])&&(E=x.key.slice(1),!(E.length===33||E.length===65)||![2,3,4].includes(E[0])))throw new Error("Format Error: invalid pubkey in key 0x"+x.key.toString("hex"));return E}}checkPubkey$1.makeChecker=makeChecker;var redeemScript$1={};Object.defineProperty(redeemScript$1,"__esModule",{value:!0});function makeConverter$3(v){function _(T){if(T.key[0]!==v)throw new Error("Decode Error: could not decode redeemScript with key 0x"+T.key.toString("hex"));return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)}function P(T,O){return!!T&&!!O&&T.redeemScript===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}redeemScript$1.makeConverter=makeConverter$3;var tapBip32Derivation$1={};Object.defineProperty(tapBip32Derivation$1,"__esModule",{value:!0});const varuint$3=varint,bip32Derivation$1=bip32Derivation$2,isValidBIP340Key=v=>v.length===32;function makeConverter$2(v){const _=bip32Derivation$1.makeConverter(v,isValidBIP340Key);function x(T){const O=varuint$3.decode(T.value),k=varuint$3.encodingLength(O),C=_.decode({key:T.key,value:T.value.slice(k+O*32)}),U=new Array(O);for(let N=0,H=k;N<O;N++,H+=32)U[N]=T.value.slice(H,H+32);return Object.assign({},C,{leafHashes:U})}function E(T){const O=_.encode(T),k=varuint$3.encodingLength(T.leafHashes.length),C=dist$4.Buffer.allocUnsafe(k);varuint$3.encode(T.leafHashes.length,C);const U=dist$4.Buffer.concat([C,...T.leafHashes,O.value]);return Object.assign({},O,{value:U})}const A="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function P(T){return Array.isArray(T.leafHashes)&&T.leafHashes.every(O=>dist$4.Buffer.isBuffer(O)&&O.length===32)&&_.check(T)}return{decode:x,encode:E,check:P,expected:A,canAddToArray:_.canAddToArray}}tapBip32Derivation$1.makeConverter=makeConverter$2;var tapInternalKey$1={};Object.defineProperty(tapInternalKey$1,"__esModule",{value:!0});function makeConverter$1(v){function _(T){if(T.key[0]!==v||T.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+T.key.toString("hex"));if(T.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)&&T.length===32}function P(T,O){return!!T&&!!O&&T.tapInternalKey===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}tapInternalKey$1.makeConverter=makeConverter$1;var witnessScript$1={};Object.defineProperty(witnessScript$1,"__esModule",{value:!0});function makeConverter(v){function _(T){if(T.key[0]!==v)throw new Error("Decode Error: could not decode witnessScript with key 0x"+T.key.toString("hex"));return T.value}function x(T){return{key:dist$4.Buffer.from([v]),value:T}}const E="Buffer";function A(T){return dist$4.Buffer.isBuffer(T)}function P(T,O){return!!T&&!!O&&T.witnessScript===void 0}return{decode:_,encode:x,check:A,expected:E,canAdd:P}}witnessScript$1.makeConverter=makeConverter,Object.defineProperty(converter,"__esModule",{value:!0});const typeFields_1$2=typeFields,globalXpub=globalXpub$1,unsignedTx=unsignedTx$1,finalScriptSig=finalScriptSig$1,finalScriptWitness=finalScriptWitness$1,nonWitnessUtxo=nonWitnessUtxo$1,partialSig=partialSig$1,porCommitment=porCommitment$1,sighashType=sighashType$1,tapKeySig=tapKeySig$1,tapLeafScript=tapLeafScript$1,tapMerkleRoot=tapMerkleRoot$1,tapScriptSig=tapScriptSig$1,witnessUtxo=witnessUtxo$1,tapTree=tapTree$1,bip32Derivation=bip32Derivation$2,checkPubkey=checkPubkey$1,redeemScript=redeemScript$1,tapBip32Derivation=tapBip32Derivation$1,tapInternalKey=tapInternalKey$1,witnessScript=witnessScript$1,globals={unsignedTx,globalXpub,checkPubkey:checkPubkey.makeChecker([])};converter.globals=globals;const inputs={nonWitnessUtxo,partialSig,sighashType,finalScriptSig,finalScriptWitness,porCommitment,witnessUtxo,bip32Derivation:bip32Derivation.makeConverter(typeFields_1$2.InputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1$2.InputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1$2.InputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1$2.InputTypes.PARTIAL_SIG,typeFields_1$2.InputTypes.BIP32_DERIVATION]),tapKeySig,tapScriptSig,tapLeafScript,tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1$2.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:tapInternalKey.makeConverter(typeFields_1$2.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot};converter.inputs=inputs;const outputs={bip32Derivation:bip32Derivation.makeConverter(typeFields_1$2.OutputTypes.BIP32_DERIVATION),redeemScript:redeemScript.makeConverter(typeFields_1$2.OutputTypes.REDEEM_SCRIPT),witnessScript:witnessScript.makeConverter(typeFields_1$2.OutputTypes.WITNESS_SCRIPT),checkPubkey:checkPubkey.makeChecker([typeFields_1$2.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:tapBip32Derivation.makeConverter(typeFields_1$2.OutputTypes.TAP_BIP32_DERIVATION),tapTree,tapInternalKey:tapInternalKey.makeConverter(typeFields_1$2.OutputTypes.TAP_INTERNAL_KEY)};converter.outputs=outputs,Object.defineProperty(fromBuffer,"__esModule",{value:!0});const convert$1=converter,tools_1$1=tools,varuint$2=varint,typeFields_1$1=typeFields;function psbtFromBuffer(v,_){let x=0;function E(){const X=varuint$2.decode(v,x);x+=varuint$2.encodingLength(X);const re=v.slice(x,x+X);return x+=X,re}function A(){const X=v.readUInt32BE(x);return x+=4,X}function P(){const X=v.readUInt8(x);return x+=1,X}function T(){const X=E(),re=E();return{key:X,value:re}}function O(){if(x>=v.length)throw new Error("Format Error: Unexpected End of PSBT");const X=v.readUInt8(x)===0;return X&&x++,X}if(A()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(P()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");const k=[],C={};for(;!O();){const X=T(),re=X.key.toString("hex");if(C[re])throw new Error("Format Error: Keys must be unique for global keymap: key "+re);C[re]=1,k.push(X)}const U=k.filter(X=>X.key[0]===typeFields_1$1.GlobalTypes.UNSIGNED_TX);if(U.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const N=_(U[0].value),{inputCount:H,outputCount:D}=N.getInputOutputCounts(),j=[],V=[];for(const X of tools_1$1.range(H)){const re={},ee=[];for(;!O();){const fe=T(),le=fe.key.toString("hex");if(re[le])throw new Error("Format Error: Keys must be unique for each input: input index "+X+" key "+le);re[le]=1,ee.push(fe)}j.push(ee)}for(const X of tools_1$1.range(D)){const re={},ee=[];for(;!O();){const fe=T(),le=fe.key.toString("hex");if(re[le])throw new Error("Format Error: Keys must be unique for each output: output index "+X+" key "+le);re[le]=1,ee.push(fe)}V.push(ee)}return psbtFromKeyVals(N,{globalMapKeyVals:k,inputKeyVals:j,outputKeyVals:V})}fromBuffer.psbtFromBuffer=psbtFromBuffer;function checkKeyBuffer(v,_,x){if(!_.equals(dist$4.Buffer.from([x])))throw new Error(`Format Error: Invalid ${v} key: ${_.toString("hex")}`)}fromBuffer.checkKeyBuffer=checkKeyBuffer;function psbtFromKeyVals(v,{globalMapKeyVals:_,inputKeyVals:x,outputKeyVals:E}){const A={unsignedTx:v};let P=0;for(const U of _)switch(U.key[0]){case typeFields_1$1.GlobalTypes.UNSIGNED_TX:if(checkKeyBuffer("global",U.key,typeFields_1$1.GlobalTypes.UNSIGNED_TX),P>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");P++;break;case typeFields_1$1.GlobalTypes.GLOBAL_XPUB:A.globalXpub===void 0&&(A.globalXpub=[]),A.globalXpub.push(convert$1.globals.globalXpub.decode(U));break;default:A.unknownKeyVals||(A.unknownKeyVals=[]),A.unknownKeyVals.push(U)}const T=x.length,O=E.length,k=[],C=[];for(const U of tools_1$1.range(T)){const N={};for(const H of x[U])switch(convert$1.inputs.checkPubkey(H),H.key[0]){case typeFields_1$1.InputTypes.NON_WITNESS_UTXO:if(checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.NON_WITNESS_UTXO),N.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");N.nonWitnessUtxo=convert$1.inputs.nonWitnessUtxo.decode(H);break;case typeFields_1$1.InputTypes.WITNESS_UTXO:if(checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.WITNESS_UTXO),N.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");N.witnessUtxo=convert$1.inputs.witnessUtxo.decode(H);break;case typeFields_1$1.InputTypes.PARTIAL_SIG:N.partialSig===void 0&&(N.partialSig=[]),N.partialSig.push(convert$1.inputs.partialSig.decode(H));break;case typeFields_1$1.InputTypes.SIGHASH_TYPE:if(checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.SIGHASH_TYPE),N.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");N.sighashType=convert$1.inputs.sighashType.decode(H);break;case typeFields_1$1.InputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.REDEEM_SCRIPT),N.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");N.redeemScript=convert$1.inputs.redeemScript.decode(H);break;case typeFields_1$1.InputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.WITNESS_SCRIPT),N.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");N.witnessScript=convert$1.inputs.witnessScript.decode(H);break;case typeFields_1$1.InputTypes.BIP32_DERIVATION:N.bip32Derivation===void 0&&(N.bip32Derivation=[]),N.bip32Derivation.push(convert$1.inputs.bip32Derivation.decode(H));break;case typeFields_1$1.InputTypes.FINAL_SCRIPTSIG:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.FINAL_SCRIPTSIG),N.finalScriptSig=convert$1.inputs.finalScriptSig.decode(H);break;case typeFields_1$1.InputTypes.FINAL_SCRIPTWITNESS:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.FINAL_SCRIPTWITNESS),N.finalScriptWitness=convert$1.inputs.finalScriptWitness.decode(H);break;case typeFields_1$1.InputTypes.POR_COMMITMENT:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.POR_COMMITMENT),N.porCommitment=convert$1.inputs.porCommitment.decode(H);break;case typeFields_1$1.InputTypes.TAP_KEY_SIG:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.TAP_KEY_SIG),N.tapKeySig=convert$1.inputs.tapKeySig.decode(H);break;case typeFields_1$1.InputTypes.TAP_SCRIPT_SIG:N.tapScriptSig===void 0&&(N.tapScriptSig=[]),N.tapScriptSig.push(convert$1.inputs.tapScriptSig.decode(H));break;case typeFields_1$1.InputTypes.TAP_LEAF_SCRIPT:N.tapLeafScript===void 0&&(N.tapLeafScript=[]),N.tapLeafScript.push(convert$1.inputs.tapLeafScript.decode(H));break;case typeFields_1$1.InputTypes.TAP_BIP32_DERIVATION:N.tapBip32Derivation===void 0&&(N.tapBip32Derivation=[]),N.tapBip32Derivation.push(convert$1.inputs.tapBip32Derivation.decode(H));break;case typeFields_1$1.InputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.TAP_INTERNAL_KEY),N.tapInternalKey=convert$1.inputs.tapInternalKey.decode(H);break;case typeFields_1$1.InputTypes.TAP_MERKLE_ROOT:checkKeyBuffer("input",H.key,typeFields_1$1.InputTypes.TAP_MERKLE_ROOT),N.tapMerkleRoot=convert$1.inputs.tapMerkleRoot.decode(H);break;default:N.unknownKeyVals||(N.unknownKeyVals=[]),N.unknownKeyVals.push(H)}k.push(N)}for(const U of tools_1$1.range(O)){const N={};for(const H of E[U])switch(convert$1.outputs.checkPubkey(H),H.key[0]){case typeFields_1$1.OutputTypes.REDEEM_SCRIPT:if(checkKeyBuffer("output",H.key,typeFields_1$1.OutputTypes.REDEEM_SCRIPT),N.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");N.redeemScript=convert$1.outputs.redeemScript.decode(H);break;case typeFields_1$1.OutputTypes.WITNESS_SCRIPT:if(checkKeyBuffer("output",H.key,typeFields_1$1.OutputTypes.WITNESS_SCRIPT),N.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");N.witnessScript=convert$1.outputs.witnessScript.decode(H);break;case typeFields_1$1.OutputTypes.BIP32_DERIVATION:N.bip32Derivation===void 0&&(N.bip32Derivation=[]),N.bip32Derivation.push(convert$1.outputs.bip32Derivation.decode(H));break;case typeFields_1$1.OutputTypes.TAP_INTERNAL_KEY:checkKeyBuffer("output",H.key,typeFields_1$1.OutputTypes.TAP_INTERNAL_KEY),N.tapInternalKey=convert$1.outputs.tapInternalKey.decode(H);break;case typeFields_1$1.OutputTypes.TAP_TREE:checkKeyBuffer("output",H.key,typeFields_1$1.OutputTypes.TAP_TREE),N.tapTree=convert$1.outputs.tapTree.decode(H);break;case typeFields_1$1.OutputTypes.TAP_BIP32_DERIVATION:N.tapBip32Derivation===void 0&&(N.tapBip32Derivation=[]),N.tapBip32Derivation.push(convert$1.outputs.tapBip32Derivation.decode(H));break;default:N.unknownKeyVals||(N.unknownKeyVals=[]),N.unknownKeyVals.push(H)}C.push(N)}return{globalMap:A,inputs:k,outputs:C}}fromBuffer.psbtFromKeyVals=psbtFromKeyVals;var toBuffer={};Object.defineProperty(toBuffer,"__esModule",{value:!0});const convert=converter,tools_1=tools;function psbtToBuffer({globalMap:v,inputs:_,outputs:x}){const{globalKeyVals:E,inputKeyVals:A,outputKeyVals:P}=psbtToKeyVals({globalMap:v,inputs:_,outputs:x}),T=tools_1.keyValsToBuffer(E),O=N=>N.length===0?[dist$4.Buffer.from([0])]:N.map(tools_1.keyValsToBuffer),k=O(A),C=O(P),U=dist$4.Buffer.allocUnsafe(5);return U.writeUIntBE(482972169471,0,5),dist$4.Buffer.concat([U,T].concat(k,C))}toBuffer.psbtToBuffer=psbtToBuffer;const sortKeyVals=(v,_)=>v.key.compare(_.key);function keyValsFromMap(v,_){const x=new Set,E=Object.entries(v).reduce((P,[T,O])=>{if(T==="unknownKeyVals")return P;const k=_[T];if(k===void 0)return P;const C=(Array.isArray(O)?O:[O]).map(k.encode);return C.map(N=>N.key.toString("hex")).forEach(N=>{if(x.has(N))throw new Error("Serialize Error: Duplicate key: "+N);x.add(N)}),P.concat(C)},[]),A=v.unknownKeyVals?v.unknownKeyVals.filter(P=>!x.has(P.key.toString("hex"))):[];return E.concat(A).sort(sortKeyVals)}function psbtToKeyVals({globalMap:v,inputs:_,outputs:x}){return{globalKeyVals:keyValsFromMap(v,convert.globals),inputKeyVals:_.map(E=>keyValsFromMap(E,convert.inputs)),outputKeyVals:x.map(E=>keyValsFromMap(E,convert.outputs))}}toBuffer.psbtToKeyVals=psbtToKeyVals,function(v){function _(x){for(var E in x)v.hasOwnProperty(E)||(v[E]=x[E])}Object.defineProperty(v,"__esModule",{value:!0}),_(fromBuffer),_(toBuffer)}(parser),Object.defineProperty(combiner,"__esModule",{value:!0});const parser_1$1=parser;function combine(v){const _=v[0],x=parser_1$1.psbtToKeyVals(_),E=v.slice(1);if(E.length===0)throw new Error("Combine: Nothing to combine");const A=getTx(_);if(A===void 0)throw new Error("Combine: Self missing transaction");const P=getKeySet(x.globalKeyVals),T=x.inputKeyVals.map(getKeySet),O=x.outputKeyVals.map(getKeySet);for(const k of E){const C=getTx(k);if(C===void 0||!C.toBuffer().equals(A.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const U=parser_1$1.psbtToKeyVals(k);getKeySet(U.globalKeyVals).forEach(keyPusher(P,x.globalKeyVals,U.globalKeyVals)),U.inputKeyVals.map(getKeySet).forEach((j,V)=>j.forEach(keyPusher(T[V],x.inputKeyVals[V],U.inputKeyVals[V]))),U.outputKeyVals.map(getKeySet).forEach((j,V)=>j.forEach(keyPusher(O[V],x.outputKeyVals[V],U.outputKeyVals[V])))}return parser_1$1.psbtFromKeyVals(A,{globalMapKeyVals:x.globalKeyVals,inputKeyVals:x.inputKeyVals,outputKeyVals:x.outputKeyVals})}combiner.combine=combine;function keyPusher(v,_,x){return E=>{if(v.has(E))return;const A=x.filter(P=>P.key.toString("hex")===E)[0];_.push(A),v.add(E)}}function getTx(v){return v.globalMap.unsignedTx}function getKeySet(v){const _=new Set;return v.forEach(x=>{const E=x.key.toString("hex");if(_.has(E))throw new Error("Combine: KeyValue Map keys should be unique");_.add(E)}),_}var utils$3={};(function(v){Object.defineProperty(v,"__esModule",{value:!0});const _=converter;function x(D,j){const V=D[j];if(V===void 0)throw new Error(`No input #${j}`);return V}v.checkForInput=x;function E(D,j){const V=D[j];if(V===void 0)throw new Error(`No output #${j}`);return V}v.checkForOutput=E;function A(D,j,V){if(D.key[0]<V)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(j&&j.filter(X=>X.key.equals(D.key)).length!==0)throw new Error(`Duplicate Key: ${D.key.toString("hex")}`)}v.checkHasKey=A;function P(D){let j=0;return Object.keys(D).forEach(V=>{Number(isNaN(Number(V)))&&j++}),j}v.getEnumLength=P;function T(D,j){let V=!1;if(j.nonWitnessUtxo||j.witnessUtxo){const X=!!j.redeemScript,re=!!j.witnessScript,ee=!X||!!j.finalScriptSig,fe=!re||!!j.finalScriptWitness,le=!!j.finalScriptSig||!!j.finalScriptWitness;V=ee&&fe&&le}if(V===!1)throw new Error(`Input #${D} has too much or too little data to clean`)}v.inputCheckUncleanFinalized=T;function O(D,j,V,X){throw new Error(`Data for ${D} key ${j} is incorrect: Expected ${V} and got ${JSON.stringify(X)}`)}function k(D){return(j,V)=>{for(const X of Object.keys(j)){const re=j[X],{canAdd:ee,canAddToArray:fe,check:le,expected:pe}=_[D+"s"][X]||{},ie=!!fe;if(le)if(ie){if(!Array.isArray(re)||V[X]&&!Array.isArray(V[X]))throw new Error(`Key type ${X} must be an array`);re.every(le)||O(D,X,pe,re);const he=V[X]||[],ae=new Set;if(!re.every(te=>fe(he,te,ae)))throw new Error("Can not add duplicate data to array");V[X]=he.concat(re)}else{if(le(re)||O(D,X,pe,re),!ee(V,re))throw new Error(`Can not add duplicate data to ${D}`);V[X]=re}}}}v.updateGlobal=k("global"),v.updateInput=k("input"),v.updateOutput=k("output");function C(D,j){const V=D.length-1,X=x(D,V);v.updateInput(j,X)}v.addInputAttributes=C;function U(D,j){const V=D.length-1,X=E(D,V);v.updateOutput(j,X)}v.addOutputAttributes=U;function N(D,j){if(!dist$4.Buffer.isBuffer(j)||j.length<4)throw new Error("Set Version: Invalid Transaction");return j.writeUInt32LE(D,0),j}v.defaultVersionSetter=N;function H(D,j){if(!dist$4.Buffer.isBuffer(j)||j.length<4)throw new Error("Set Locktime: Invalid Transaction");return j.writeUInt32LE(D,j.length-4),j}v.defaultLocktimeSetter=H})(utils$3),Object.defineProperty(psbt,"__esModule",{value:!0});const combiner_1=combiner,parser_1=parser,typeFields_1=typeFields,utils_1$2=utils$3;let Psbt$1=class{constructor(_){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:_}}static fromBase64(_,x){const E=dist$4.Buffer.from(_,"base64");return this.fromBuffer(E,x)}static fromHex(_,x){const E=dist$4.Buffer.from(_,"hex");return this.fromBuffer(E,x)}static fromBuffer(_,x){const E=parser_1.psbtFromBuffer(_,x),A=new this(E.globalMap.unsignedTx);return Object.assign(A,E),A}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return parser_1.psbtToBuffer(this)}updateGlobal(_){return utils_1$2.updateGlobal(_,this.globalMap),this}updateInput(_,x){const E=utils_1$2.checkForInput(this.inputs,_);return utils_1$2.updateInput(x,E),this}updateOutput(_,x){const E=utils_1$2.checkForOutput(this.outputs,_);return utils_1$2.updateOutput(x,E),this}addUnknownKeyValToGlobal(_){return utils_1$2.checkHasKey(_,this.globalMap.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(_),this}addUnknownKeyValToInput(_,x){const E=utils_1$2.checkForInput(this.inputs,_);return utils_1$2.checkHasKey(x,E.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.InputTypes)),E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(x),this}addUnknownKeyValToOutput(_,x){const E=utils_1$2.checkForOutput(this.outputs,_);return utils_1$2.checkHasKey(x,E.unknownKeyVals,utils_1$2.getEnumLength(typeFields_1.OutputTypes)),E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(x),this}addInput(_){this.globalMap.unsignedTx.addInput(_),this.inputs.push({unknownKeyVals:[]});const x=_.unknownKeyVals||[],E=this.inputs.length-1;if(!Array.isArray(x))throw new Error("unknownKeyVals must be an Array");return x.forEach(A=>this.addUnknownKeyValToInput(E,A)),utils_1$2.addInputAttributes(this.inputs,_),this}addOutput(_){this.globalMap.unsignedTx.addOutput(_),this.outputs.push({unknownKeyVals:[]});const x=_.unknownKeyVals||[],E=this.outputs.length-1;if(!Array.isArray(x))throw new Error("unknownKeyVals must be an Array");return x.forEach(A=>this.addUnknownKeyValToOutput(E,A)),utils_1$2.addOutputAttributes(this.outputs,_),this}clearFinalizedInput(_){const x=utils_1$2.checkForInput(this.inputs,_);utils_1$2.inputCheckUncleanFinalized(_,x);for(const E of Object.keys(x))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(E)||delete x[E];return this}combine(..._){const x=combiner_1.combine([this].concat(_));return Object.assign(this,x),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};psbt.Psbt=Psbt$1;var bip371={},psbtutils={};Object.defineProperty(psbtutils,"__esModule",{value:!0}),psbtutils.signatureBlocksAction=psbtutils.checkInputForSig=psbtutils.pubkeyInScript=psbtutils.pubkeyPositionInScript=psbtutils.witnessStackToScriptWitness=psbtutils.isP2TR=psbtutils.isP2SHScript=psbtutils.isP2WSHScript=psbtutils.isP2WPKH=psbtutils.isP2PKH=psbtutils.isP2PK=psbtutils.isP2MS=void 0;const varuint$1=varint,bscript$1=script,transaction_1$2=transaction,crypto_1=crypto$3,payments$1=payments$3;function isPaymentFactory(v){return _=>{try{return v({output:_}),!0}catch{return!1}}}psbtutils.isP2MS=isPaymentFactory(payments$1.p2ms),psbtutils.isP2PK=isPaymentFactory(payments$1.p2pk),psbtutils.isP2PKH=isPaymentFactory(payments$1.p2pkh),psbtutils.isP2WPKH=isPaymentFactory(payments$1.p2wpkh),psbtutils.isP2WSHScript=isPaymentFactory(payments$1.p2wsh),psbtutils.isP2SHScript=isPaymentFactory(payments$1.p2sh),psbtutils.isP2TR=isPaymentFactory(payments$1.p2tr);function witnessStackToScriptWitness(v){let _=dist$4.Buffer.allocUnsafe(0);function x(T){_=dist$4.Buffer.concat([_,dist$4.Buffer.from(T)])}function E(T){const O=_.length,k=varuint$1.encodingLength(T);_=dist$4.Buffer.concat([_,dist$4.Buffer.allocUnsafe(k)]),varuint$1.encode(T,_,O)}function A(T){E(T.length),x(T)}function P(T){E(T.length),T.forEach(A)}return P(v),_}psbtutils.witnessStackToScriptWitness=witnessStackToScriptWitness;function pubkeyPositionInScript(v,_){const x=(0,crypto_1.hash160)(v),E=v.slice(1,33),A=bscript$1.decompile(_);if(A===null)throw new Error("Unknown script error");return A.findIndex(P=>typeof P=="number"?!1:P.equals(v)||P.equals(x)||P.equals(E))}psbtutils.pubkeyPositionInScript=pubkeyPositionInScript;function pubkeyInScript(v,_){return pubkeyPositionInScript(v,_)!==-1}psbtutils.pubkeyInScript=pubkeyInScript;function checkInputForSig(v,_){return extractPartialSigs(v).some(E=>signatureBlocksAction(E,bscript$1.signature.decode,_))}psbtutils.checkInputForSig=checkInputForSig;function signatureBlocksAction(v,_,x){const{hashType:E}=_(v),A=[];switch(E&transaction_1$2.Transaction.SIGHASH_ANYONECANPAY&&A.push("addInput"),E&31){case transaction_1$2.Transaction.SIGHASH_ALL:break;case transaction_1$2.Transaction.SIGHASH_SINGLE:case transaction_1$2.Transaction.SIGHASH_NONE:A.push("addOutput"),A.push("setInputSequence");break}return A.indexOf(x)===-1}psbtutils.signatureBlocksAction=signatureBlocksAction;function extractPartialSigs(v){let _=[];if((v.partialSig||[]).length===0){if(!v.finalScriptSig&&!v.finalScriptWitness)return[];_=getPsigsFromInputFinalScripts(v)}else _=v.partialSig;return _.map(x=>x.signature)}function getPsigsFromInputFinalScripts(v){const _=v.finalScriptSig?bscript$1.decompile(v.finalScriptSig)||[]:[],x=v.finalScriptWitness?bscript$1.decompile(v.finalScriptWitness)||[]:[];return _.concat(x).filter(E=>dist$4.Buffer.isBuffer(E)&&bscript$1.isCanonicalScriptSignature(E)).map(E=>({signature:E}))}Object.defineProperty(bip371,"__esModule",{value:!0}),bip371.checkTaprootInputForSigs=bip371.tapTreeFromList=bip371.tapTreeToList=bip371.tweakInternalPubKey=bip371.checkTaprootOutputFields=bip371.checkTaprootInputFields=bip371.isTaprootOutput=bip371.isTaprootInput=bip371.serializeTaprootSignature=bip371.tapScriptFinalizer=bip371.toXOnly=void 0;const types_1=types$4,transaction_1$1=transaction,psbtutils_1$1=psbtutils,bip341_1$1=bip341,payments_1=payments$3,psbtutils_2=psbtutils,toXOnly=v=>v.length===32?v:v.slice(1,33);bip371.toXOnly=toXOnly;function tapScriptFinalizer(v,_,x){const E=findTapLeafToFinalize(_,v,x);try{const P=sortSignatures(_,E).concat(E.script).concat(E.controlBlock);return{finalScriptWitness:(0,psbtutils_1$1.witnessStackToScriptWitness)(P)}}catch(A){throw new Error(`Can not finalize taproot input #${v}: ${A}`)}}bip371.tapScriptFinalizer=tapScriptFinalizer;function serializeTaprootSignature(v,_){const x=_?dist$4.Buffer.from([_]):dist$4.Buffer.from([]);return dist$4.Buffer.concat([v,x])}bip371.serializeTaprootSignature=serializeTaprootSignature;function isTaprootInput(v){return v&&!!(v.tapInternalKey||v.tapMerkleRoot||v.tapLeafScript&&v.tapLeafScript.length||v.tapBip32Derivation&&v.tapBip32Derivation.length||v.witnessUtxo&&(0,psbtutils_1$1.isP2TR)(v.witnessUtxo.script))}bip371.isTaprootInput=isTaprootInput;function isTaprootOutput(v,_){return v&&!!(v.tapInternalKey||v.tapTree||v.tapBip32Derivation&&v.tapBip32Derivation.length||_&&(0,psbtutils_1$1.isP2TR)(_))}bip371.isTaprootOutput=isTaprootOutput;function checkTaprootInputFields(v,_,x){checkMixedTaprootAndNonTaprootInputFields(v,_,x),checkIfTapLeafInTree(v,_,x)}bip371.checkTaprootInputFields=checkTaprootInputFields;function checkTaprootOutputFields(v,_,x){checkMixedTaprootAndNonTaprootOutputFields(v,_,x),checkTaprootScriptPubkey(v,_)}bip371.checkTaprootOutputFields=checkTaprootOutputFields;function checkTaprootScriptPubkey(v,_){if(!_.tapTree&&!_.tapInternalKey)return;const x=_.tapInternalKey||v.tapInternalKey,E=_.tapTree||v.tapTree;if(x){const{script:A}=v,P=getTaprootScripPubkey(x,E);if(A&&!A.equals(P))throw new Error("Error adding output. Script or address missmatch.")}}function getTaprootScripPubkey(v,_){const x=_&&tapTreeFromList(_.leaves),{output:E}=(0,payments_1.p2tr)({internalPubkey:v,scriptTree:x});return E}function tweakInternalPubKey(v,_){const x=_.tapInternalKey,E=x&&(0,bip341_1$1.tweakKey)(x,_.tapMerkleRoot);if(!E)throw new Error(`Cannot tweak tap internal key for input #${v}. Public key: ${x&&x.toString("hex")}`);return E.x}bip371.tweakInternalPubKey=tweakInternalPubKey;function tapTreeToList(v){if(!(0,types_1.isTaptree)(v))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return _tapTreeToList(v)}bip371.tapTreeToList=tapTreeToList;function tapTreeFromList(v=[]){return v.length===1&&v[0].depth===0?{output:v[0].script,version:v[0].leafVersion}:instertLeavesInTree(v)}bip371.tapTreeFromList=tapTreeFromList;function checkTaprootInputForSigs(v,_){return extractTaprootSigs(v).some(E=>(0,psbtutils_2.signatureBlocksAction)(E,decodeSchnorrSignature,_))}bip371.checkTaprootInputForSigs=checkTaprootInputForSigs;function decodeSchnorrSignature(v){return{signature:v.slice(0,64),hashType:v.slice(64)[0]||transaction_1$1.Transaction.SIGHASH_DEFAULT}}function extractTaprootSigs(v){const _=[];if(v.tapKeySig&&_.push(v.tapKeySig),v.tapScriptSig&&_.push(...v.tapScriptSig.map(x=>x.signature)),!_.length){const x=getTapKeySigFromWithness(v.finalScriptWitness);x&&_.push(x)}return _}function getTapKeySigFromWithness(v){if(!v)return;const _=v.slice(2);if(_.length===64||_.length===65)return _}function _tapTreeToList(v,_=[],x=0){if(x>bip341_1$1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return v?(0,types_1.isTapleaf)(v)?(_.push({depth:x,leafVersion:v.version||bip341_1$1.LEAF_VERSION_TAPSCRIPT,script:v.output}),_):(v[0]&&_tapTreeToList(v[0],_,x+1),v[1]&&_tapTreeToList(v[1],_,x+1),_):[]}function instertLeavesInTree(v){let _;for(const x of v)if(_=instertLeafInTree(x,_),!_)throw new Error("No room left to insert tapleaf in tree");return _}function instertLeafInTree(v,_,x=0){if(x>bip341_1$1.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(v.depth===x)return _?void 0:{output:v.script,version:v.leafVersion};if((0,types_1.isTapleaf)(_))return;const E=instertLeafInTree(v,_&&_[0],x+1);if(E)return[E,_&&_[1]];const A=instertLeafInTree(v,_&&_[1],x+1);if(A)return[_&&_[0],A]}function checkMixedTaprootAndNonTaprootInputFields(v,_,x){const E=isTaprootInput(v)&&hasNonTaprootFields(_),A=hasNonTaprootFields(v)&&isTaprootInput(_),P=v===_&&isTaprootInput(_)&&hasNonTaprootFields(_);if(E||A||P)throw new Error(`Invalid arguments for Psbt.${x}. Cannot use both taproot and non-taproot fields.`)}function checkMixedTaprootAndNonTaprootOutputFields(v,_,x){const E=isTaprootOutput(v)&&hasNonTaprootFields(_),A=hasNonTaprootFields(v)&&isTaprootOutput(_),P=v===_&&isTaprootOutput(_)&&hasNonTaprootFields(_);if(E||A||P)throw new Error(`Invalid arguments for Psbt.${x}. Cannot use both taproot and non-taproot fields.`)}function checkIfTapLeafInTree(v,_,x){if(_.tapMerkleRoot){const E=(_.tapLeafScript||[]).every(P=>isTapLeafInTree(P,_.tapMerkleRoot)),A=(v.tapLeafScript||[]).every(P=>isTapLeafInTree(P,_.tapMerkleRoot));if(!E||!A)throw new Error(`Invalid arguments for Psbt.${x}. Tapleaf not part of taptree.`)}else if(v.tapMerkleRoot&&!(_.tapLeafScript||[]).every(A=>isTapLeafInTree(A,v.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${x}. Tapleaf not part of taptree.`)}function isTapLeafInTree(v,_){if(!_)return!0;const x=(0,bip341_1$1.tapleafHash)({output:v.script,version:v.leafVersion});return(0,bip341_1$1.rootHashFromPath)(v.controlBlock,x).equals(_)}function sortSignatures(v,_){const x=(0,bip341_1$1.tapleafHash)({output:_.script,version:_.leafVersion});return(v.tapScriptSig||[]).filter(E=>E.leafHash.equals(x)).map(E=>addPubkeyPositionInScript(_.script,E)).sort((E,A)=>A.positionInScript-E.positionInScript).map(E=>E.signature)}function addPubkeyPositionInScript(v,_){return Object.assign({positionInScript:(0,psbtutils_1$1.pubkeyPositionInScript)(_.pubkey,v)},_)}function findTapLeafToFinalize(v,_,x){if(!v.tapScriptSig||!v.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${_}. No tapleaf script signature provided.`);const E=(v.tapLeafScript||[]).sort((A,P)=>A.controlBlock.length-P.controlBlock.length).find(A=>canFinalizeLeaf(A,v.tapScriptSig,x));if(!E)throw new Error(`Can not finalize taproot input #${_}. Signature for tapleaf script not found.`);return E}function canFinalizeLeaf(v,_,x){const E=(0,bip341_1$1.tapleafHash)({output:v.script,version:v.leafVersion});return(!x||x.equals(E))&&_.find(P=>P.leafHash.equals(E))!==void 0}function hasNonTaprootFields(v){return v&&!!(v.redeemScript||v.witnessScript||v.bip32Derivation&&v.bip32Derivation.length)}Object.defineProperty(psbt$1,"__esModule",{value:!0}),psbt$1.Psbt=void 0;const bip174_1=psbt,varuint=varint,utils_1$1=utils$3,address_1=address,bufferutils_1=bufferutils,networks_1=networks$1,payments=payments$3,bip341_1=bip341,bscript=script,transaction_1=transaction,bip371_1=bip371,psbtutils_1=psbtutils,DEFAULT_OPTS={network:networks_1.bitcoin,maximumFeeRate:5e3};class Psbt{static fromBase64(_,x={}){const E=dist$4.Buffer.from(_,"base64");return this.fromBuffer(E,x)}static fromHex(_,x={}){const E=dist$4.Buffer.from(_,"hex");return this.fromBuffer(E,x)}static fromBuffer(_,x={}){const E=bip174_1.Psbt.fromBuffer(_,transactionFromBuffer),A=new Psbt(x,E);return checkTxForDupeIns(A.__CACHE.__TX,A.__CACHE),A}constructor(_={},x=new bip174_1.Psbt(new PsbtTransaction)){this.data=x,this.opts=Object.assign({},DEFAULT_OPTS,_),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);const E=(A,P,T,O)=>Object.defineProperty(A,P,{enumerable:T,writable:O});E(this,"__CACHE",!1,!0),E(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(_){this.setVersion(_)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(_){this.setLocktime(_)}get txInputs(){return this.__CACHE.__TX.ins.map(_=>({hash:(0,bufferutils_1.cloneBuffer)(_.hash),index:_.index,sequence:_.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(_=>{let x;try{x=(0,address_1.fromOutputScript)(_.script,this.opts.network)}catch{}return{script:(0,bufferutils_1.cloneBuffer)(_.script),value:_.value,address:x}})}combine(..._){return this.data.combine(..._.map(x=>x.data)),this}clone(){const _=Psbt.fromBuffer(this.data.toBuffer());return _.opts=JSON.parse(JSON.stringify(this.opts)),_}setMaximumFeeRate(_){check32Bit(_),this.opts.maximumFeeRate=_}setVersion(_){check32Bit(_),checkInputsForPartialSig(this.data.inputs,"setVersion");const x=this.__CACHE;return x.__TX.version=_,x.__EXTRACTED_TX=void 0,this}setLocktime(_){check32Bit(_),checkInputsForPartialSig(this.data.inputs,"setLocktime");const x=this.__CACHE;return x.__TX.locktime=_,x.__EXTRACTED_TX=void 0,this}setInputSequence(_,x){check32Bit(x),checkInputsForPartialSig(this.data.inputs,"setInputSequence");const E=this.__CACHE;if(E.__TX.ins.length<=_)throw new Error("Input index too high");return E.__TX.ins[_].sequence=x,E.__EXTRACTED_TX=void 0,this}addInputs(_){return _.forEach(x=>this.addInput(x)),this}addInput(_){if(arguments.length>1||!_||_.hash===void 0||_.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,bip371_1.checkTaprootInputFields)(_,_,"addInput"),checkInputsForPartialSig(this.data.inputs,"addInput"),_.witnessScript&&checkInvalidP2WSH(_.witnessScript);const x=this.__CACHE;this.data.addInput(_);const E=x.__TX.ins[x.__TX.ins.length-1];checkTxInputCache(x,E);const A=this.data.inputs.length-1,P=this.data.inputs[A];return P.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,P,A),x.__FEE=void 0,x.__FEE_RATE=void 0,x.__EXTRACTED_TX=void 0,this}addOutputs(_){return _.forEach(x=>this.addOutput(x)),this}addOutput(_){if(arguments.length>1||!_||_.value===void 0||_.address===void 0&&_.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");checkInputsForPartialSig(this.data.inputs,"addOutput");const{address:x}=_;if(typeof x=="string"){const{network:A}=this.opts,P=(0,address_1.toOutputScript)(x,A);_=Object.assign(_,{script:P})}(0,bip371_1.checkTaprootOutputFields)(_,_,"addOutput");const E=this.__CACHE;return this.data.addOutput(_),E.__FEE=void 0,E.__FEE_RATE=void 0,E.__EXTRACTED_TX=void 0,this}extractTransaction(_){if(!this.data.inputs.every(isFinalized))throw new Error("Not finalized");const x=this.__CACHE;if(_||checkFees(this,x,this.opts),x.__EXTRACTED_TX)return x.__EXTRACTED_TX;const E=x.__TX.clone();return inputFinalizeGetAmts(this.data.inputs,E,x,!0),E}getFeeRate(){return getTxCacheValue("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return getTxCacheValue("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,utils_1$1.checkForInput)(this.data.inputs,0),range(this.data.inputs.length).forEach(_=>this.finalizeInput(_)),this}finalizeInput(_,x){const E=(0,utils_1$1.checkForInput)(this.data.inputs,_);return(0,bip371_1.isTaprootInput)(E)?this._finalizeTaprootInput(_,E,void 0,x):this._finalizeInput(_,E,x)}finalizeTaprootInput(_,x,E=bip371_1.tapScriptFinalizer){const A=(0,utils_1$1.checkForInput)(this.data.inputs,_);if((0,bip371_1.isTaprootInput)(A))return this._finalizeTaprootInput(_,A,x,E);throw new Error(`Cannot finalize input #${_}. Not Taproot.`)}_finalizeInput(_,x,E=getFinalScripts){const{script:A,isP2SH:P,isP2WSH:T,isSegwit:O}=getScriptFromInput(_,x,this.__CACHE);if(!A)throw new Error(`No script found for input #${_}`);checkPartialSigSighashes(x);const{finalScriptSig:k,finalScriptWitness:C}=E(_,x,A,O,P,T);if(k&&this.data.updateInput(_,{finalScriptSig:k}),C&&this.data.updateInput(_,{finalScriptWitness:C}),!k&&!C)throw new Error(`Unknown error finalizing input #${_}`);return this.data.clearFinalizedInput(_),this}_finalizeTaprootInput(_,x,E,A=bip371_1.tapScriptFinalizer){if(!x.witnessUtxo)throw new Error(`Cannot finalize input #${_}. Missing withness utxo.`);if(x.tapKeySig){const P=payments.p2tr({output:x.witnessUtxo.script,signature:x.tapKeySig}),T=(0,psbtutils_1.witnessStackToScriptWitness)(P.witness);this.data.updateInput(_,{finalScriptWitness:T})}else{const{finalScriptWitness:P}=A(_,x,E);this.data.updateInput(_,{finalScriptWitness:P})}return this.data.clearFinalizedInput(_),this}getInputType(_){const x=(0,utils_1$1.checkForInput)(this.data.inputs,_),E=getScriptFromUtxo(_,x,this.__CACHE),A=getMeaningfulScript(E,_,"input",x.redeemScript||redeemFromFinalScriptSig(x.finalScriptSig),x.witnessScript||redeemFromFinalWitnessScript(x.finalScriptWitness)),P=A.type==="raw"?"":A.type+"-",T=classifyScript(A.meaningfulScript);return P+T}inputHasPubkey(_,x){const E=(0,utils_1$1.checkForInput)(this.data.inputs,_);return pubkeyInInput(x,E,_,this.__CACHE)}inputHasHDKey(_,x){const E=(0,utils_1$1.checkForInput)(this.data.inputs,_),A=bip32DerivationIsMine(x);return!!E.bip32Derivation&&E.bip32Derivation.some(A)}outputHasPubkey(_,x){const E=(0,utils_1$1.checkForOutput)(this.data.outputs,_);return pubkeyInOutput(x,E,_,this.__CACHE)}outputHasHDKey(_,x){const E=(0,utils_1$1.checkForOutput)(this.data.outputs,_),A=bip32DerivationIsMine(x);return!!E.bip32Derivation&&E.bip32Derivation.some(A)}validateSignaturesOfAllInputs(_){return(0,utils_1$1.checkForInput)(this.data.inputs,0),range(this.data.inputs.length).map(E=>this.validateSignaturesOfInput(E,_)).reduce((E,A)=>A===!0&&E,!0)}validateSignaturesOfInput(_,x,E){const A=this.data.inputs[_];return(0,bip371_1.isTaprootInput)(A)?this.validateSignaturesOfTaprootInput(_,x,E):this._validateSignaturesOfInput(_,x,E)}_validateSignaturesOfInput(_,x,E){const A=this.data.inputs[_],P=(A||{}).partialSig;if(!A||!P||P.length<1)throw new Error("No signatures to validate");if(typeof x!="function")throw new Error("Need validator function to validate signatures");const T=E?P.filter(N=>N.pubkey.equals(E)):P;if(T.length<1)throw new Error("No signatures for this pubkey");const O=[];let k,C,U;for(const N of T){const H=bscript.signature.decode(N.signature),{hash:D,script:j}=U!==H.hashType?getHashForSig(_,Object.assign({},A,{sighashType:H.hashType}),this.__CACHE,!0):{hash:k,script:C};U=H.hashType,k=D,C=j,checkScriptForPubkey(N.pubkey,j,"verify"),O.push(x(N.pubkey,D,H.signature))}return O.every(N=>N===!0)}validateSignaturesOfTaprootInput(_,x,E){const A=this.data.inputs[_],P=(A||{}).tapKeySig,T=(A||{}).tapScriptSig;if(!A&&!P&&!(T&&!T.length))throw new Error("No signatures to validate");if(typeof x!="function")throw new Error("Need validator function to validate signatures");E=E&&(0,bip371_1.toXOnly)(E);const O=E?getTaprootHashesForSig(_,A,this.data.inputs,E,this.__CACHE):getAllTaprootHashesForSig(_,A,this.data.inputs,this.__CACHE);if(!O.length)throw new Error("No signatures for this pubkey");const k=O.find(U=>!U.leafHash);let C=0;if(P&&k){if(!x(k.pubkey,k.hash,trimTaprootSig(P)))return!1;C++}if(T)for(const U of T){const N=O.find(H=>U.pubkey.equals(H.pubkey));if(N){if(!x(U.pubkey,N.hash,trimTaprootSig(U.signature)))return!1;C++}}return C>0}signAllInputsHD(_,x=[transaction_1.Transaction.SIGHASH_ALL]){if(!_||!_.publicKey||!_.fingerprint)throw new Error("Need HDSigner to sign input");const E=[];for(const A of range(this.data.inputs.length))try{this.signInputHD(A,_,x),E.push(!0)}catch{E.push(!1)}if(E.every(A=>A===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(_,x=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise((E,A)=>{if(!_||!_.publicKey||!_.fingerprint)return A(new Error("Need HDSigner to sign input"));const P=[],T=[];for(const O of range(this.data.inputs.length))T.push(this.signInputHDAsync(O,_,x).then(()=>{P.push(!0)},()=>{P.push(!1)}));return Promise.all(T).then(()=>{if(P.every(O=>O===!1))return A(new Error("No inputs were signed"));E()})})}signInputHD(_,x,E=[transaction_1.Transaction.SIGHASH_ALL]){if(!x||!x.publicKey||!x.fingerprint)throw new Error("Need HDSigner to sign input");return getSignersFromHD(_,this.data.inputs,x).forEach(P=>this.signInput(_,P,E)),this}signInputHDAsync(_,x,E=[transaction_1.Transaction.SIGHASH_ALL]){return new Promise((A,P)=>{if(!x||!x.publicKey||!x.fingerprint)return P(new Error("Need HDSigner to sign input"));const O=getSignersFromHD(_,this.data.inputs,x).map(k=>this.signInputAsync(_,k,E));return Promise.all(O).then(()=>{A()}).catch(P)})}signAllInputs(_,x){if(!_||!_.publicKey)throw new Error("Need Signer to sign input");const E=[];for(const A of range(this.data.inputs.length))try{this.signInput(A,_,x),E.push(!0)}catch{E.push(!1)}if(E.every(A=>A===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(_,x){return new Promise((E,A)=>{if(!_||!_.publicKey)return A(new Error("Need Signer to sign input"));const P=[],T=[];for(const[O]of this.data.inputs.entries())T.push(this.signInputAsync(O,_,x).then(()=>{P.push(!0)},()=>{P.push(!1)}));return Promise.all(T).then(()=>{if(P.every(O=>O===!1))return A(new Error("No inputs were signed"));E()})})}signInput(_,x,E){if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const A=(0,utils_1$1.checkForInput)(this.data.inputs,_);return(0,bip371_1.isTaprootInput)(A)?this._signTaprootInput(_,A,x,void 0,E):this._signInput(_,x,E)}signTaprootInput(_,x,E,A){if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const P=(0,utils_1$1.checkForInput)(this.data.inputs,_);if((0,bip371_1.isTaprootInput)(P))return this._signTaprootInput(_,P,x,E,A);throw new Error(`Input #${_} is not of type Taproot.`)}_signInput(_,x,E=[transaction_1.Transaction.SIGHASH_ALL]){const{hash:A,sighashType:P}=getHashAndSighashType(this.data.inputs,_,x.publicKey,this.__CACHE,E),T=[{pubkey:x.publicKey,signature:bscript.signature.encode(x.sign(A),P)}];return this.data.updateInput(_,{partialSig:T}),this}_signTaprootInput(_,x,E,A,P=[transaction_1.Transaction.SIGHASH_DEFAULT]){const T=this.checkTaprootHashesForSig(_,x,E,A,P),O=T.filter(C=>!C.leafHash).map(C=>(0,bip371_1.serializeTaprootSignature)(E.signSchnorr(C.hash),x.sighashType))[0],k=T.filter(C=>!!C.leafHash).map(C=>({pubkey:(0,bip371_1.toXOnly)(E.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(E.signSchnorr(C.hash),x.sighashType),leafHash:C.leafHash}));return O&&this.data.updateInput(_,{tapKeySig:O}),k.length&&this.data.updateInput(_,{tapScriptSig:k}),this}signInputAsync(_,x,E){return Promise.resolve().then(()=>{if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const A=(0,utils_1$1.checkForInput)(this.data.inputs,_);return(0,bip371_1.isTaprootInput)(A)?this._signTaprootInputAsync(_,A,x,void 0,E):this._signInputAsync(_,x,E)})}signTaprootInputAsync(_,x,E,A){return Promise.resolve().then(()=>{if(!x||!x.publicKey)throw new Error("Need Signer to sign input");const P=(0,utils_1$1.checkForInput)(this.data.inputs,_);if((0,bip371_1.isTaprootInput)(P))return this._signTaprootInputAsync(_,P,x,E,A);throw new Error(`Input #${_} is not of type Taproot.`)})}_signInputAsync(_,x,E=[transaction_1.Transaction.SIGHASH_ALL]){const{hash:A,sighashType:P}=getHashAndSighashType(this.data.inputs,_,x.publicKey,this.__CACHE,E);return Promise.resolve(x.sign(A)).then(T=>{const O=[{pubkey:x.publicKey,signature:bscript.signature.encode(T,P)}];this.data.updateInput(_,{partialSig:O})})}async _signTaprootInputAsync(_,x,E,A,P=[transaction_1.Transaction.SIGHASH_DEFAULT]){const T=this.checkTaprootHashesForSig(_,x,E,A,P),O=[],k=T.filter(U=>!U.leafHash)[0];if(k){const U=Promise.resolve(E.signSchnorr(k.hash)).then(N=>({tapKeySig:(0,bip371_1.serializeTaprootSignature)(N,x.sighashType)}));O.push(U)}const C=T.filter(U=>!!U.leafHash);if(C.length){const U=C.map(N=>Promise.resolve(E.signSchnorr(N.hash)).then(H=>({tapScriptSig:[{pubkey:(0,bip371_1.toXOnly)(E.publicKey),signature:(0,bip371_1.serializeTaprootSignature)(H,x.sighashType),leafHash:N.leafHash}]})));O.push(...U)}return Promise.all(O).then(U=>{U.forEach(N=>this.data.updateInput(_,N))})}checkTaprootHashesForSig(_,x,E,A,P){if(typeof E.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${_}.`);const T=getTaprootHashesForSig(_,x,this.data.inputs,E.publicKey,this.__CACHE,A,P);if(!T||!T.length)throw new Error(`Can not sign for input #${_} with the key ${E.publicKey.toString("hex")}`);return T}toBuffer(){return checkCache(this.__CACHE),this.data.toBuffer()}toHex(){return checkCache(this.__CACHE),this.data.toHex()}toBase64(){return checkCache(this.__CACHE),this.data.toBase64()}updateGlobal(_){return this.data.updateGlobal(_),this}updateInput(_,x){return x.witnessScript&&checkInvalidP2WSH(x.witnessScript),(0,bip371_1.checkTaprootInputFields)(this.data.inputs[_],x,"updateInput"),this.data.updateInput(_,x),x.nonWitnessUtxo&&addNonWitnessTxCache(this.__CACHE,this.data.inputs[_],_),this}updateOutput(_,x){const E=this.data.outputs[_];return(0,bip371_1.checkTaprootOutputFields)(E,x,"updateOutput"),this.data.updateOutput(_,x),this}addUnknownKeyValToGlobal(_){return this.data.addUnknownKeyValToGlobal(_),this}addUnknownKeyValToInput(_,x){return this.data.addUnknownKeyValToInput(_,x),this}addUnknownKeyValToOutput(_,x){return this.data.addUnknownKeyValToOutput(_,x),this}clearFinalizedInput(_){return this.data.clearFinalizedInput(_),this}}psbt$1.Psbt=Psbt;const transactionFromBuffer=v=>new PsbtTransaction(v);class PsbtTransaction{constructor(_=dist$4.Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=transaction_1.Transaction.fromBuffer(_),checkTxEmpty(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(_){if(_.hash===void 0||_.index===void 0||!dist$4.Buffer.isBuffer(_.hash)&&typeof _.hash!="string"||typeof _.index!="number")throw new Error("Error adding input.");const x=typeof _.hash=="string"?(0,bufferutils_1.reverseBuffer)(dist$4.Buffer.from(_.hash,"hex")):_.hash;this.tx.addInput(x,_.index,_.sequence)}addOutput(_){if(_.script===void 0||_.value===void 0||!dist$4.Buffer.isBuffer(_.script)||typeof _.value!="number")throw new Error("Error adding output.");this.tx.addOutput(_.script,_.value)}toBuffer(){return this.tx.toBuffer()}}function canFinalize(v,_,x){switch(x){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return hasSigs(1,v.partialSig);case"multisig":const E=payments.p2ms({output:_});return hasSigs(E.m,v.partialSig,E.pubkeys);default:return!1}}function checkCache(v){if(v.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function hasSigs(v,_,x){if(!_)return!1;let E;if(x?E=x.map(A=>{const P=compressPubkey(A);return _.find(T=>T.pubkey.equals(P))}).filter(A=>!!A):E=_,E.length>v)throw new Error("Too many signatures");return E.length===v}function isFinalized(v){return!!v.finalScriptSig||!!v.finalScriptWitness}function bip32DerivationIsMine(v){return _=>!(!_.masterFingerprint.equals(v.fingerprint)||!v.derivePath(_.path).publicKey.equals(_.pubkey))}function check32Bit(v){if(typeof v!="number"||v!==Math.floor(v)||v>4294967295||v<0)throw new Error("Invalid 32 bit integer")}function checkFees(v,_,x){const E=_.__FEE_RATE||v.getFeeRate(),A=_.__EXTRACTED_TX.virtualSize(),P=E*A;if(E>=x.maximumFeeRate)throw new Error(`Warning: You are paying around ${(P/1e8).toFixed(8)} in fees, which is ${E} satoshi per byte for a transaction with a VSize of ${A} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function checkInputsForPartialSig(v,_){v.forEach(x=>{if((0,bip371_1.isTaprootInput)(x)?(0,bip371_1.checkTaprootInputForSigs)(x,_):(0,psbtutils_1.checkInputForSig)(x,_))throw new Error("Can not modify transaction, signatures exist.")})}function checkPartialSigSighashes(v){if(!v.sighashType||!v.partialSig)return;const{partialSig:_,sighashType:x}=v;_.forEach(E=>{const{hashType:A}=bscript.signature.decode(E.signature);if(x!==A)throw new Error("Signature sighash does not match input sighash type")})}function checkScriptForPubkey(v,_,x){if(!(0,psbtutils_1.pubkeyInScript)(v,_))throw new Error(`Can not ${x} for this input with the key ${v.toString("hex")}`)}function checkTxEmpty(v){if(!v.ins.every(x=>x.script&&x.script.length===0&&x.witness&&x.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function checkTxForDupeIns(v,_){v.ins.forEach(x=>{checkTxInputCache(_,x)})}function checkTxInputCache(v,_){const x=(0,bufferutils_1.reverseBuffer)(dist$4.Buffer.from(_.hash)).toString("hex")+":"+_.index;if(v.__TX_IN_CACHE[x])throw new Error("Duplicate input detected.");v.__TX_IN_CACHE[x]=1}function scriptCheckerFactory(v,_){return(x,E,A,P)=>{const T=v({redeem:{output:A}}).output;if(!E.equals(T))throw new Error(`${_} for ${P} #${x} doesn't match the scriptPubKey in the prevout`)}}const checkRedeemScript=scriptCheckerFactory(payments.p2sh,"Redeem script"),checkWitnessScript=scriptCheckerFactory(payments.p2wsh,"Witness script");function getTxCacheValue(v,_,x,E){if(!x.every(isFinalized))throw new Error(`PSBT must be finalized to calculate ${_}`);if(v==="__FEE_RATE"&&E.__FEE_RATE)return E.__FEE_RATE;if(v==="__FEE"&&E.__FEE)return E.__FEE;let A,P=!0;if(E.__EXTRACTED_TX?(A=E.__EXTRACTED_TX,P=!1):A=E.__TX.clone(),inputFinalizeGetAmts(x,A,E,P),v==="__FEE_RATE")return E.__FEE_RATE;if(v==="__FEE")return E.__FEE}function getFinalScripts(v,_,x,E,A,P){const T=classifyScript(x);if(!canFinalize(_,x,T))throw new Error(`Can not finalize input #${v}`);return prepareFinalScripts(x,T,_.partialSig,E,A,P)}function prepareFinalScripts(v,_,x,E,A,P){let T,O;const k=getPayment(v,_,x),C=P?payments.p2wsh({redeem:k}):null,U=A?payments.p2sh({redeem:C||k}):null;return E?(C?O=(0,psbtutils_1.witnessStackToScriptWitness)(C.witness):O=(0,psbtutils_1.witnessStackToScriptWitness)(k.witness),U&&(T=U.input)):U?T=U.input:T=k.input,{finalScriptSig:T,finalScriptWitness:O}}function getHashAndSighashType(v,_,x,E,A){const P=(0,utils_1$1.checkForInput)(v,_),{hash:T,sighashType:O,script:k}=getHashForSig(_,P,E,!1,A);return checkScriptForPubkey(x,k,"sign"),{hash:T,sighashType:O}}function getHashForSig(v,_,x,E,A){const P=x.__TX,T=_.sighashType||transaction_1.Transaction.SIGHASH_ALL;checkSighashTypeAllowed(T,A);let O,k;if(_.nonWitnessUtxo){const N=nonWitnessUtxoTxFromCache(x,_,v),H=P.ins[v].hash,D=N.getHash();if(!H.equals(D))throw new Error(`Non-witness UTXO hash for input #${v} doesn't match the hash specified in the prevout`);const j=P.ins[v].index;k=N.outs[j]}else if(_.witnessUtxo)k=_.witnessUtxo;else throw new Error("Need a Utxo input item for signing");const{meaningfulScript:C,type:U}=getMeaningfulScript(k.script,v,"input",_.redeemScript,_.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(U)>=0)O=P.hashForWitnessV0(v,C,k.value,T);else if((0,psbtutils_1.isP2WPKH)(C)){const N=payments.p2pkh({hash:C.slice(2)}).output;O=P.hashForWitnessV0(v,N,k.value,T)}else{if(_.nonWitnessUtxo===void 0&&x.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${v} has witnessUtxo but non-segwit script: ${C.toString("hex")}`);!E&&x.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),O=P.hashForSignature(v,C,T)}return{script:C,sighashType:T,hash:O}}function getAllTaprootHashesForSig(v,_,x,E){const A=[];if(_.tapInternalKey){const T=getPrevoutTaprootKey(v,_,E);T&&A.push(T)}if(_.tapScriptSig){const T=_.tapScriptSig.map(O=>O.pubkey);A.push(...T)}return A.map(T=>getTaprootHashesForSig(v,_,x,T,E)).flat()}function getPrevoutTaprootKey(v,_,x){const{script:E}=getScriptAndAmountFromUtxo(v,_,x);return(0,psbtutils_1.isP2TR)(E)?E.subarray(2,34):null}function trimTaprootSig(v){return v.length===64?v:v.subarray(0,64)}function getTaprootHashesForSig(v,_,x,E,A,P,T){const O=A.__TX,k=_.sighashType||transaction_1.Transaction.SIGHASH_DEFAULT;checkSighashTypeAllowed(k,T);const C=x.map((j,V)=>getScriptAndAmountFromUtxo(V,j,A)),U=C.map(j=>j.script),N=C.map(j=>j.value),H=[];if(_.tapInternalKey&&!P){const j=getPrevoutTaprootKey(v,_,A)||dist$4.Buffer.from([]);if((0,bip371_1.toXOnly)(E).equals(j)){const V=O.hashForWitnessV1(v,U,N,k);H.push({pubkey:E,hash:V})}}const D=(_.tapLeafScript||[]).filter(j=>(0,psbtutils_1.pubkeyInScript)(E,j.script)).map(j=>{const V=(0,bip341_1.tapleafHash)({output:j.script,version:j.leafVersion});return Object.assign({hash:V},j)}).filter(j=>!P||P.equals(j.hash)).map(j=>{const V=O.hashForWitnessV1(v,U,N,transaction_1.Transaction.SIGHASH_DEFAULT,j.hash);return{pubkey:E,hash:V,leafHash:j.hash}});return H.concat(D)}function checkSighashTypeAllowed(v,_){if(_&&_.indexOf(v)<0){const x=sighashTypeToString(v);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${x}`)}}function getPayment(v,_,x){let E;switch(_){case"multisig":const A=getSortedSigs(v,x);E=payments.p2ms({output:v,signatures:A});break;case"pubkey":E=payments.p2pk({output:v,signature:x[0].signature});break;case"pubkeyhash":E=payments.p2pkh({output:v,pubkey:x[0].pubkey,signature:x[0].signature});break;case"witnesspubkeyhash":E=payments.p2wpkh({output:v,pubkey:x[0].pubkey,signature:x[0].signature});break}return E}function getScriptFromInput(v,_,x){const E=x.__TX,A={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(A.isP2SH=!!_.redeemScript,A.isP2WSH=!!_.witnessScript,_.witnessScript)A.script=_.witnessScript;else if(_.redeemScript)A.script=_.redeemScript;else if(_.nonWitnessUtxo){const P=nonWitnessUtxoTxFromCache(x,_,v),T=E.ins[v].index;A.script=P.outs[T].script}else _.witnessUtxo&&(A.script=_.witnessUtxo.script);return(_.witnessScript||(0,psbtutils_1.isP2WPKH)(A.script))&&(A.isSegwit=!0),A}function getSignersFromHD(v,_,x){const E=(0,utils_1$1.checkForInput)(_,v);if(!E.bip32Derivation||E.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");const A=E.bip32Derivation.map(T=>{if(T.masterFingerprint.equals(x.fingerprint))return T}).filter(T=>!!T);if(A.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return A.map(T=>{const O=x.derivePath(T.path);if(!T.pubkey.equals(O.publicKey))throw new Error("pubkey did not match bip32Derivation");return O})}function getSortedSigs(v,_){return payments.p2ms({output:v}).pubkeys.map(E=>(_.filter(A=>A.pubkey.equals(E))[0]||{}).signature).filter(E=>!!E)}function scriptWitnessToWitnessStack(v){let _=0;function x(T){return _+=T,v.slice(_-T,_)}function E(){const T=varuint.decode(v,_);return _+=varuint.decode.bytes,T}function A(){return x(E())}function P(){const T=E(),O=[];for(let k=0;k<T;k++)O.push(A());return O}return P()}function sighashTypeToString(v){let _=v&transaction_1.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(v&31){case transaction_1.Transaction.SIGHASH_ALL:_+="SIGHASH_ALL";break;case transaction_1.Transaction.SIGHASH_SINGLE:_+="SIGHASH_SINGLE";break;case transaction_1.Transaction.SIGHASH_NONE:_+="SIGHASH_NONE";break}return _}function addNonWitnessTxCache(v,_,x){v.__NON_WITNESS_UTXO_BUF_CACHE[x]=_.nonWitnessUtxo;const E=transaction_1.Transaction.fromBuffer(_.nonWitnessUtxo);v.__NON_WITNESS_UTXO_TX_CACHE[x]=E;const A=v,P=x;delete _.nonWitnessUtxo,Object.defineProperty(_,"nonWitnessUtxo",{enumerable:!0,get(){const T=A.__NON_WITNESS_UTXO_BUF_CACHE[P],O=A.__NON_WITNESS_UTXO_TX_CACHE[P];if(T!==void 0)return T;{const k=O.toBuffer();return A.__NON_WITNESS_UTXO_BUF_CACHE[P]=k,k}},set(T){A.__NON_WITNESS_UTXO_BUF_CACHE[P]=T}})}function inputFinalizeGetAmts(v,_,x,E){let A=0;v.forEach((k,C)=>{if(E&&k.finalScriptSig&&(_.ins[C].script=k.finalScriptSig),E&&k.finalScriptWitness&&(_.ins[C].witness=scriptWitnessToWitnessStack(k.finalScriptWitness)),k.witnessUtxo)A+=k.witnessUtxo.value;else if(k.nonWitnessUtxo){const U=nonWitnessUtxoTxFromCache(x,k,C),N=_.ins[C].index,H=U.outs[N];A+=H.value}});const P=_.outs.reduce((k,C)=>k+C.value,0),T=A-P;if(T<0)throw new Error("Outputs are spending more than Inputs");const O=_.virtualSize();x.__FEE=T,x.__EXTRACTED_TX=_,x.__FEE_RATE=Math.floor(T/O)}function nonWitnessUtxoTxFromCache(v,_,x){const E=v.__NON_WITNESS_UTXO_TX_CACHE;return E[x]||addNonWitnessTxCache(v,_,x),E[x]}function getScriptFromUtxo(v,_,x){const{script:E}=getScriptAndAmountFromUtxo(v,_,x);return E}function getScriptAndAmountFromUtxo(v,_,x){if(_.witnessUtxo!==void 0)return{script:_.witnessUtxo.script,value:_.witnessUtxo.value};if(_.nonWitnessUtxo!==void 0){const A=nonWitnessUtxoTxFromCache(x,_,v).outs[x.__TX.ins[v].index];return{script:A.script,value:A.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function pubkeyInInput(v,_,x,E){const A=getScriptFromUtxo(x,_,E),{meaningfulScript:P}=getMeaningfulScript(A,x,"input",_.redeemScript,_.witnessScript);return(0,psbtutils_1.pubkeyInScript)(v,P)}function pubkeyInOutput(v,_,x,E){const A=E.__TX.outs[x].script,{meaningfulScript:P}=getMeaningfulScript(A,x,"output",_.redeemScript,_.witnessScript);return(0,psbtutils_1.pubkeyInScript)(v,P)}function redeemFromFinalScriptSig(v){if(!v)return;const _=bscript.decompile(v);if(!_)return;const x=_[_.length-1];if(!(!dist$4.Buffer.isBuffer(x)||isPubkeyLike(x)||isSigLike(x)||!bscript.decompile(x)))return x}function redeemFromFinalWitnessScript(v){if(!v)return;const _=scriptWitnessToWitnessStack(v),x=_[_.length-1];if(!(isPubkeyLike(x)||!bscript.decompile(x)))return x}function compressPubkey(v){if(v.length===65){const _=v[64]&1,x=v.slice(0,33);return x[0]=2|_,x}return v.slice()}function isPubkeyLike(v){return v.length===33&&bscript.isCanonicalPubKey(v)}function isSigLike(v){return bscript.isCanonicalScriptSignature(v)}function getMeaningfulScript(v,_,x,E,A){const P=(0,psbtutils_1.isP2SHScript)(v),T=P&&E&&(0,psbtutils_1.isP2WSHScript)(E),O=(0,psbtutils_1.isP2WSHScript)(v);if(P&&E===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((O||T)&&A===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let k;return T?(k=A,checkRedeemScript(_,v,E,x),checkWitnessScript(_,E,A,x),checkInvalidP2WSH(k)):O?(k=A,checkWitnessScript(_,v,A,x),checkInvalidP2WSH(k)):P?(k=E,checkRedeemScript(_,v,E,x)):k=v,{meaningfulScript:k,type:T?"p2sh-p2wsh":P?"p2sh":O?"p2wsh":"raw"}}function checkInvalidP2WSH(v){if((0,psbtutils_1.isP2WPKH)(v)||(0,psbtutils_1.isP2SHScript)(v))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function classifyScript(v){return(0,psbtutils_1.isP2WPKH)(v)?"witnesspubkeyhash":(0,psbtutils_1.isP2PKH)(v)?"pubkeyhash":(0,psbtutils_1.isP2MS)(v)?"multisig":(0,psbtutils_1.isP2PK)(v)?"pubkey":"nonstandard"}function range(v){return[...Array(v).keys()]}(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.initEccLib=v.Transaction=v.opcodes=v.Psbt=v.Block=v.script=v.payments=v.networks=v.crypto=v.address=void 0;const _=address;v.address=_;const x=crypto$3;v.crypto=x;const E=networks$1;v.networks=E;const A=payments$3;v.payments=A;const P=script;v.script=P;var T=block;Object.defineProperty(v,"Block",{enumerable:!0,get:function(){return T.Block}});var O=psbt$1;Object.defineProperty(v,"Psbt",{enumerable:!0,get:function(){return O.Psbt}});var k=ops;Object.defineProperty(v,"opcodes",{enumerable:!0,get:function(){return k.OPS}});var C=transaction;Object.defineProperty(v,"Transaction",{enumerable:!0,get:function(){return C.Transaction}});var U=ecc_lib;Object.defineProperty(v,"initEccLib",{enumerable:!0,get:function(){return U.initEccLib}})})(src$1);async function getRandomPrivateKey(){return await new distExports.BtcWallet().getRandomPrivateKey()}async function getDerivedPrivateKey(v){let _=v.hdPath;return/^[0-9][0-9]$/.test(String(_))?_=`m/${_}'/0'/0'/0/0`:/^m\/[0-9]+(-\/0){2}-\/0\/[0-9]+/.test(String(_))&&(_=String(_).replaceAll("-","'")),await new distExports.BtcWallet().getDerivedPrivateKey({...v,hdPath:_})}async function getNewAddress(v){return await new distExports.BtcWallet().getNewAddress(v)}async function validAddress(v){return await new distExports.BtcWallet().validAddress(v)}async function getAddressByPublicKey(v){return await new distExports.BtcWallet().getAddressByPublicKey(v)}async function signTransaction(v){return await new distExports.BtcWallet().signTransaction(v)}async function signMessage(v){let _=new distExports.BtcWallet;v.data.message="hello world",console.warn("signMessage params",v);let x=await _.signMessage(v);return console.warn("signMessage signature",x),x}async function verifyMessage(v){return await new distExports.BtcWallet().verifyMessage(v)}async function getDerivedPath(v){return await new distExports.BtcWallet().getDerivedPath(v)}async function validPrivateKey({privateKey:v}){return await new distExports.BtcWallet().validPrivateKey({privateKey:v})}async function getMPCRawTransaction({data:v}){return await new distExports.BtcWallet().getMPCRawTransaction({data:v})}async function getMPCTransaction(v){return await new distExports.BtcWallet().getMPCTransaction(v)}async function getMPCRawMessage(v){return await new distExports.BtcWallet().getMPCRawMessage(v)}async function getMPCSignedMessage(v){return await new distExports.BtcWallet().getMPCSignedMessage(v)}async function getHardWareRawTransaction(v){return await new distExports.BtcWallet().getHardWareRawTransaction(v)}async function calcTxHash({data:v}){return await new distExports.BtcWallet().calcTxHash({data:v})}async function extractPsbtTransaction(v){return await distExports.BtcWallet.extractPsbtTransaction(v)}async function validSignedTransaction(v){return await new distExports.BtcWallet().validSignedTransaction(v)}async function estimateFee(v){return await new distExports.BtcWallet().estimateFee(v)}async function oneKeyBuildBtcTx(v){return await distExports.BtcWallet.oneKeyBuildBtcTx(v)}async function buildPsbt(v){return distExports.buildPsbt(v.tx,v.network)}async function psbtSign(v){return distExports.psbtSign(v.psbtBase64,v.privateKey,v.network)}async function psbtSignImpl(v){return distExports.psbtSignImpl(v.psbt,v.privateKey,v.network),v.psbt}async function signBtc(v){return distExports.signBtc(v.utxoTx,v.privateKey,v.network,v.hashArray,v.hardware,v.changeOnly)}async function psbtSignHex(v){let _=v.network||src$1.networks.bitcoin;const x=src$1.Psbt.fromHex(v.psbtHex,{network:_});return distExports.psbtSignImpl(x,v.privateKey,_),x.toHex()}function multiPsbtSignHex(v){let _=(v==null?void 0:v.psbtHexs)||[],x=v.network||src$1.networks.bitcoin,E=v.privateKey;return Promise.all(_.map(A=>psbtSignHex({psbtHex:A,privateKey:E,network:x})))}const Wallet=Object.freeze(Object.defineProperty({__proto__:null,buildPsbt,calcTxHash,estimateFee,extractPsbtTransaction,getAddressByPublicKey,getDerivedPath,getDerivedPrivateKey,getHardWareRawTransaction,getMPCRawMessage,getMPCRawTransaction,getMPCSignedMessage,getMPCTransaction,getNewAddress,getRandomPrivateKey,multiPsbtSignHex,oneKeyBuildBtcTx,psbtSign,psbtSignHex,psbtSignImpl,signBtc,signMessage,signTransaction,validAddress,validPrivateKey,validSignedTransaction,verifyMessage},Symbol.toStringTag,{value:"Module"}));function connectWebViewJavascriptBridge(v){window.WebViewJavascriptBridge?v(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){v(WebViewJavascriptBridge)},!1)}function initAndroidBridge(){console.log("init android bridge start"),connectWebViewJavascriptBridge(function(v){v.init(function(_,x){console.log("JS got a message",_);var E={"Javascript Responds":"测试中文!"};console.log("JS responding with",E),x(E)}),registerAndroidMethod(v)})}function registerAndroidMethod(v){v?Object.keys(Wallet).forEach(_=>{console.log("registerHandler",_),v.registerHandler(_,async function(x,E){console.log(_,"Params",x);let A=isJSON(x)?JSON.parse(x):x,P=await Wallet[_](A);console.log(_,"response",P),P=typeof P=="string"?P:JSON.stringify(P),E(P)})}):console.log("registerHandler fail")}function isJSON(v){if(typeof v=="string")try{var _=JSON.parse(v);return!!(typeof _=="object"&&_)}catch{return!1}return!1}function callAndroid(v,_){return new Promise((x,E)=>{if(window.WebViewJavascriptBridge)try{let A=window.WebViewJavascriptBridge;console.log("bridge.callHandler",v,_),A.callHandler(v,_,function(P){console.log("JS received response:",P),P&&typeof P=="string"&&isJSON(P)&&(P=JSON.parse(P)),x(P)})}catch(A){E(A)}else x(null)})}function setupWKWebViewJavascriptBridge(v){var x,E,A,P;let _=window;if(_.WKWebViewJavascriptBridge)return v(_.WKWebViewJavascriptBridge);if(_.WKWVJBCallbacks)return _.WKWVJBCallbacks.push(v);_.WKWVJBCallbacks=[v],(P=(A=(E=(x=_==null?void 0:_.webkit)==null?void 0:x.messageHandlers)==null?void 0:E.iOS_Native_InjectJavascript)==null?void 0:A.postMessage)==null||P.call(A,null)}function initIosBridge(){return console.log("init ios bridge start"),new Promise((v,_)=>{setupWKWebViewJavascriptBridge(x=>{console.log("bridge",x),v(x)})})}function callIos(v,_){return new Promise((x,E)=>{var P,T;let A=window;if(A.WKWebViewJavascriptBridge)try{console.log("iosJSAPI",{method:v,data:_}),A.WKWebViewJavascriptBridge.callHandler("iosJSAPI",{method:v,data:_},function(k){x(k),console.log("JS received response:",k)})}catch{x(null)}else(T=(P=A==null?void 0:A.webkit)==null?void 0:P.messageHandlers)!=null&&T.iOS_Native_InjectJavascript?setupWKWebViewJavascriptBridge(O=>{if(O)try{console.log("iosJSAPI",{method:v,data:_}),O.callHandler("iosJSAPI",{method:v,data:_},function(C){x(C),console.log("JS received response:",C)})}catch{x(null)}else x(null)}):x(null)})}function callApp(v,_){var x,E;return(E=(x=window==null?void 0:window.webkit)==null?void 0:x.messageHandlers)!=null&&E.iOS_Native_InjectJavascript?callIos(v,_):callAndroid(v,_)}function initBridge(){var v,_;(_=(v=window==null?void 0:window.webkit)==null?void 0:v.messageHandlers)!=null&&_.iOS_Native_InjectJavascript?initIosBridge():initAndroidBridge()}var dist={},classes={},fastSafeStringify=stringify;stringify.default=stringify,stringify.stable=deterministicStringify,stringify.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify(v,_,x,E){typeof E>"u"&&(E=defaultOptions()),decirc(v,"",0,[],void 0,0,E);var A;try{replacerStack.length===0?A=JSON.stringify(v,_,x):A=JSON.stringify(v,replaceGetterValues(_),x)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var P=arr.pop();P.length===4?Object.defineProperty(P[0],P[1],P[3]):P[0][P[1]]=P[2]}}return A}function setReplace(v,_,x,E){var A=Object.getOwnPropertyDescriptor(E,x);A.get!==void 0?A.configurable?(Object.defineProperty(E,x,{value:v}),arr.push([E,x,_,A])):replacerStack.push([_,x,v]):(E[x]=v,arr.push([E,x,_]))}function decirc(v,_,x,E,A,P,T){P+=1;var O;if(typeof v=="object"&&v!==null){for(O=0;O<E.length;O++)if(E[O]===v){setReplace(CIRCULAR_REPLACE_NODE,v,_,A);return}if(typeof T.depthLimit<"u"&&P>T.depthLimit){setReplace(LIMIT_REPLACE_NODE,v,_,A);return}if(typeof T.edgesLimit<"u"&&x+1>T.edgesLimit){setReplace(LIMIT_REPLACE_NODE,v,_,A);return}if(E.push(v),Array.isArray(v))for(O=0;O<v.length;O++)decirc(v[O],O,O,E,v,P,T);else{var k=Object.keys(v);for(O=0;O<k.length;O++){var C=k[O];decirc(v[C],C,O,E,v,P,T)}}E.pop()}}function compareFunction(v,_){return v<_?-1:v>_?1:0}function deterministicStringify(v,_,x,E){typeof E>"u"&&(E=defaultOptions());var A=deterministicDecirc(v,"",0,[],void 0,0,E)||v,P;try{replacerStack.length===0?P=JSON.stringify(A,_,x):P=JSON.stringify(A,replaceGetterValues(_),x)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var T=arr.pop();T.length===4?Object.defineProperty(T[0],T[1],T[3]):T[0][T[1]]=T[2]}}return P}function deterministicDecirc(v,_,x,E,A,P,T){P+=1;var O;if(typeof v=="object"&&v!==null){for(O=0;O<E.length;O++)if(E[O]===v){setReplace(CIRCULAR_REPLACE_NODE,v,_,A);return}try{if(typeof v.toJSON=="function")return}catch{return}if(typeof T.depthLimit<"u"&&P>T.depthLimit){setReplace(LIMIT_REPLACE_NODE,v,_,A);return}if(typeof T.edgesLimit<"u"&&x+1>T.edgesLimit){setReplace(LIMIT_REPLACE_NODE,v,_,A);return}if(E.push(v),Array.isArray(v))for(O=0;O<v.length;O++)deterministicDecirc(v[O],O,O,E,v,P,T);else{var k={},C=Object.keys(v).sort(compareFunction);for(O=0;O<C.length;O++){var U=C[O];deterministicDecirc(v[U],U,O,E,v,P,T),k[U]=v[U]}if(typeof A<"u")arr.push([A,_,v]),A[_]=k;else return k}E.pop()}}function replaceGetterValues(v){return v=typeof v<"u"?v:function(_,x){return x},function(_,x){if(replacerStack.length>0)for(var E=0;E<replacerStack.length;E++){var A=replacerStack[E];if(A[1]===_&&A[0]===x){x=A[2],replacerStack.splice(E,1);break}}return v.call(this,_,x)}}Object.defineProperty(classes,"__esModule",{value:!0}),classes.EthereumProviderError=classes.EthereumRpcError=void 0;const fast_safe_stringify_1=fastSafeStringify;class EthereumRpcError extends Error{constructor(_,x,E){if(!Number.isInteger(_))throw new Error('"code" must be an integer.');if(!x||typeof x!="string")throw new Error('"message" must be a nonempty string.');super(x),this.code=_,E!==void 0&&(this.data=E)}serialize(){const _={code:this.code,message:this.message};return this.data!==void 0&&(_.data=this.data),this.stack&&(_.stack=this.stack),_}toString(){return fast_safe_stringify_1.default(this.serialize(),stringifyReplacer,2)}}classes.EthereumRpcError=EthereumRpcError;class EthereumProviderError extends EthereumRpcError{constructor(_,x,E){if(!isValidEthProviderCode(_))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(_,x,E)}}classes.EthereumProviderError=EthereumProviderError;function isValidEthProviderCode(v){return Number.isInteger(v)&&v>=1e3&&v<=4999}function stringifyReplacer(v,_){if(_!=="[Circular]")return _}var utils$2={},errorConstants={};Object.defineProperty(errorConstants,"__esModule",{value:!0}),errorConstants.errorValues=errorConstants.errorCodes=void 0,errorConstants.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},errorConstants.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.serializeError=v.isValidCode=v.getMessageFromCode=v.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const _=errorConstants,x=classes,E=_.errorCodes.rpc.internal,A="Unspecified error message. This is a bug, please report it.",P={code:E,message:T(E)};v.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function T(H,D=A){if(Number.isInteger(H)){const j=H.toString();if(N(_.errorValues,j))return _.errorValues[j].message;if(C(H))return v.JSON_RPC_SERVER_ERROR_MESSAGE}return D}v.getMessageFromCode=T;function O(H){if(!Number.isInteger(H))return!1;const D=H.toString();return!!(_.errorValues[D]||C(H))}v.isValidCode=O;function k(H,{fallbackError:D=P,shouldIncludeStack:j=!1}={}){var V,X;if(!D||!Number.isInteger(D.code)||typeof D.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(H instanceof x.EthereumRpcError)return H.serialize();const re={};if(H&&typeof H=="object"&&!Array.isArray(H)&&N(H,"code")&&O(H.code)){const fe=H;re.code=fe.code,fe.message&&typeof fe.message=="string"?(re.message=fe.message,N(fe,"data")&&(re.data=fe.data)):(re.message=T(re.code),re.data={originalError:U(H)})}else{re.code=D.code;const fe=(V=H)===null||V===void 0?void 0:V.message;re.message=fe&&typeof fe=="string"?fe:D.message,re.data={originalError:U(H)}}const ee=(X=H)===null||X===void 0?void 0:X.stack;return j&&H&&ee&&typeof ee=="string"&&(re.stack=ee),re}v.serializeError=k;function C(H){return H>=-32099&&H<=-32e3}function U(H){return H&&typeof H=="object"&&!Array.isArray(H)?Object.assign({},H):H}function N(H,D){return Object.prototype.hasOwnProperty.call(H,D)}}(utils$2);var errors={};Object.defineProperty(errors,"__esModule",{value:!0}),errors.ethErrors=void 0;const classes_1=classes,utils_1=utils$2,error_constants_1=errorConstants;errors.ethErrors={rpc:{parse:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.parse,v),invalidRequest:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidRequest,v),invalidParams:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidParams,v),methodNotFound:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotFound,v),internal:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.internal,v),server:v=>{if(!v||typeof v!="object"||Array.isArray(v))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:_}=v;if(!Number.isInteger(_)||_>-32005||_<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return getEthJsonRpcError(_,v)},invalidInput:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.invalidInput,v),resourceNotFound:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceNotFound,v),resourceUnavailable:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.resourceUnavailable,v),transactionRejected:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.transactionRejected,v),methodNotSupported:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.methodNotSupported,v),limitExceeded:v=>getEthJsonRpcError(error_constants_1.errorCodes.rpc.limitExceeded,v)},provider:{userRejectedRequest:v=>getEthProviderError(error_constants_1.errorCodes.provider.userRejectedRequest,v),unauthorized:v=>getEthProviderError(error_constants_1.errorCodes.provider.unauthorized,v),unsupportedMethod:v=>getEthProviderError(error_constants_1.errorCodes.provider.unsupportedMethod,v),disconnected:v=>getEthProviderError(error_constants_1.errorCodes.provider.disconnected,v),chainDisconnected:v=>getEthProviderError(error_constants_1.errorCodes.provider.chainDisconnected,v),custom:v=>{if(!v||typeof v!="object"||Array.isArray(v))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:_,message:x,data:E}=v;if(!x||typeof x!="string")throw new Error('"message" must be a nonempty string');return new classes_1.EthereumProviderError(_,x,E)}}};function getEthJsonRpcError(v,_){const[x,E]=parseOpts(_);return new classes_1.EthereumRpcError(v,x||utils_1.getMessageFromCode(v),E)}function getEthProviderError(v,_){const[x,E]=parseOpts(_);return new classes_1.EthereumProviderError(v,x||utils_1.getMessageFromCode(v),E)}function parseOpts(v){if(v){if(typeof v=="string")return[v];if(typeof v=="object"&&!Array.isArray(v)){const{message:_,data:x}=v;if(_&&typeof _!="string")throw new Error("Must specify string message.");return[_||void 0,x]}}return[]}(function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.getMessageFromCode=v.serializeError=v.EthereumProviderError=v.EthereumRpcError=v.ethErrors=v.errorCodes=void 0;const _=classes;Object.defineProperty(v,"EthereumRpcError",{enumerable:!0,get:function(){return _.EthereumRpcError}}),Object.defineProperty(v,"EthereumProviderError",{enumerable:!0,get:function(){return _.EthereumProviderError}});const x=utils$2;Object.defineProperty(v,"serializeError",{enumerable:!0,get:function(){return x.serializeError}}),Object.defineProperty(v,"getMessageFromCode",{enumerable:!0,get:function(){return x.getMessageFromCode}});const E=errors;Object.defineProperty(v,"ethErrors",{enumerable:!0,get:function(){return E.ethErrors}});const A=errorConstants;Object.defineProperty(v,"errorCodes",{enumerable:!0,get:function(){return A.errorCodes}})})(dist);class PushEventHandlers{constructor(_){Et(this,"provider");Et(this,"connect",_=>{this.provider._isConnected||(this.provider._isConnected=!0,this.provider._state.isConnected=!0,this._emit("connect",_))});Et(this,"unlock",()=>{this.provider._isUnlocked=!0,this.provider._state.isUnlocked=!0});Et(this,"lock",()=>{this.provider._isUnlocked=!1});Et(this,"disconnect",()=>{this.provider._isConnected=!1,this.provider._state.isConnected=!1,this.provider._state.accounts=null,this.provider._selectedAddress=null;const _=dist.ethErrors.provider.disconnected();this._emit("accountsChanged",[]),this._emit("disconnect",_),this._emit("close",_)});Et(this,"accountsChanged",_=>{(_==null?void 0:_[0])!==this.provider._selectedAddress&&(this.provider._selectedAddress=_==null?void 0:_[0],this.provider._state.accounts=_,this._emit("accountsChanged",_))});Et(this,"networkChanged",({network:_})=>{this.connect({}),_!==this.provider._network&&(this.provider._network=_,this._emit("networkChanged",_))});this.provider=_}_emit(_,x){this.provider._initialized&&this.provider.emit(_,x)}}var randomstring$2={},browser={exports:{}};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var crypto$1=commonjsGlobal.crypto||commonjsGlobal.msCrypto;crypto$1&&crypto$1.getRandomValues?browser.exports=randomBytes$1:browser.exports=oldBrowser;function randomBytes$1(v,_){if(v>65536)throw new Error("requested too many random bytes");var x=new commonjsGlobal.Uint8Array(v);v>0&&crypto$1.getRandomValues(x);var E=new dist$4.Buffer(x.buffer);return typeof _=="function"?dist$4.process.nextTick(function(){_(null,E)}):E}var browserExports=browser.exports,charset={exports:{}};(function(v,_){function x(){this.chars=""}x.prototype.setType=function(E){if(Array.isArray(E))for(var A=0;A<E.length;A++)this.chars+=this.getCharacters(E[A]);else this.chars=this.getCharacters(E)},x.prototype.getCharacters=function(E){var A,P="0123456789",T="abcdefghijklmnopqrstuvwxyz",O=T.toUpperCase(),k="abcdef",C="01",U="01234567";return E==="alphanumeric"?A=P+T+O:E==="numeric"?A=P:E==="alphabetic"?A=T+O:E==="hex"?A=P+k:E==="binary"?A=C:E==="octal"?A=U:A=E,A},x.prototype.removeUnreadable=function(){var E=/[0OIl]/g;this.chars=this.chars.replace(E,"")},x.prototype.setcapitalization=function(E){E==="uppercase"?this.chars=this.chars.toUpperCase():E==="lowercase"&&(this.chars=this.chars.toLowerCase())},x.prototype.removeDuplicates=function(){var E=this.chars.split("");E=[...new Set(E)],this.chars=E.join("")},v.exports=x})(charset);var charsetExports=charset.exports,randomBytes=browserExports,Charset=charsetExports;function unsafeRandomBytes(v){for(var _=[],x=0;x<v;x++)_.push(Math.floor(Math.random()*255));return{length:v,readUInt8:function(E){return _[E]}}}function safeRandomBytes(v){try{return randomBytes(v)}catch{return unsafeRandomBytes(v)}}function processString(v,_,x,E,A){for(var P=_,T=0;T<v.length&&P.length<E;T++){var O=v.readUInt8(T);O<A&&(P+=x.charAt(O%x.length))}return P}function getAsyncString(v,_,x,E,A){randomBytes(x,function(P,T){P&&A(P);var O=processString(T,v,_,x,E);O.length<x?getAsyncString(O,_,x,E,A):A(null,O)})}randomstring$2.generate=function(v,_){var x=new Charset,E,A="";typeof v=="object"?(E=typeof v.length=="number"?v.length:32,v.charset?x.setType(v.charset):x.setType("alphanumeric"),v.capitalization&&x.setcapitalization(v.capitalization),v.readable&&x.removeUnreadable(),x.removeDuplicates()):typeof v=="number"?(E=v,x.setType("alphanumeric")):(E=32,x.setType("alphanumeric"));var P=x.chars.length,T=256-256%P;if(!_){for(;A.length<E;){var O=safeRandomBytes(Math.ceil(E*256/T));A=processString(O,A,x.chars,E,T)}return A}getAsyncString(A,x.chars,E,T,_)};var randomstring=randomstring$2;const randomstring$1=getDefaultExportFromCjs(randomstring);function bind(v,_){return function(){return v.apply(_,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(v=>_=>{const x=toString.call(_);return v[x]||(v[x]=x.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=v=>(v=v.toLowerCase(),_=>kindOf(_)===v),typeOfTest=v=>_=>typeof _===v,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(v){return v!==null&&!isUndefined(v)&&v.constructor!==null&&!isUndefined(v.constructor)&&isFunction(v.constructor.isBuffer)&&v.constructor.isBuffer(v)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(v){let _;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_=ArrayBuffer.isView(v):_=v&&v.buffer&&isArrayBuffer(v.buffer),_}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=v=>v!==null&&typeof v=="object",isBoolean=v=>v===!0||v===!1,isPlainObject=v=>{if(kindOf(v)!=="object")return!1;const _=getPrototypeOf(v);return(_===null||_===Object.prototype||Object.getPrototypeOf(_)===null)&&!(Symbol.toStringTag in v)&&!(Symbol.iterator in v)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=v=>isObject(v)&&isFunction(v.pipe),isFormData=v=>{let _;return v&&(typeof FormData=="function"&&v instanceof FormData||isFunction(v.append)&&((_=kindOf(v))==="formdata"||_==="object"&&isFunction(v.toString)&&v.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=v=>v.trim?v.trim():v.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(v,_,{allOwnKeys:x=!1}={}){if(v===null||typeof v>"u")return;let E,A;if(typeof v!="object"&&(v=[v]),isArray(v))for(E=0,A=v.length;E<A;E++)_.call(null,v[E],E,v);else{const P=x?Object.getOwnPropertyNames(v):Object.keys(v),T=P.length;let O;for(E=0;E<T;E++)O=P[E],_.call(null,v[O],O,v)}}function findKey(v,_){_=_.toLowerCase();const x=Object.keys(v);let E=x.length,A;for(;E-- >0;)if(A=x[E],_===A.toLowerCase())return A;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:dist$4.global)(),isContextDefined=v=>!isUndefined(v)&&v!==_global;function merge(){const{caseless:v}=isContextDefined(this)&&this||{},_={},x=(E,A)=>{const P=v&&findKey(_,A)||A;isPlainObject(_[P])&&isPlainObject(E)?_[P]=merge(_[P],E):isPlainObject(E)?_[P]=merge({},E):isArray(E)?_[P]=E.slice():_[P]=E};for(let E=0,A=arguments.length;E<A;E++)arguments[E]&&forEach(arguments[E],x);return _}const extend=(v,_,x,{allOwnKeys:E}={})=>(forEach(_,(A,P)=>{x&&isFunction(A)?v[P]=bind(A,x):v[P]=A},{allOwnKeys:E}),v),stripBOM=v=>(v.charCodeAt(0)===65279&&(v=v.slice(1)),v),inherits=(v,_,x,E)=>{v.prototype=Object.create(_.prototype,E),v.prototype.constructor=v,Object.defineProperty(v,"super",{value:_.prototype}),x&&Object.assign(v.prototype,x)},toFlatObject=(v,_,x,E)=>{let A,P,T;const O={};if(_=_||{},v==null)return _;do{for(A=Object.getOwnPropertyNames(v),P=A.length;P-- >0;)T=A[P],(!E||E(T,v,_))&&!O[T]&&(_[T]=v[T],O[T]=!0);v=x!==!1&&getPrototypeOf(v)}while(v&&(!x||x(v,_))&&v!==Object.prototype);return _},endsWith=(v,_,x)=>{v=String(v),(x===void 0||x>v.length)&&(x=v.length),x-=_.length;const E=v.indexOf(_,x);return E!==-1&&E===x},toArray=v=>{if(!v)return null;if(isArray(v))return v;let _=v.length;if(!isNumber(_))return null;const x=new Array(_);for(;_-- >0;)x[_]=v[_];return x},isTypedArray=(v=>_=>v&&_ instanceof v)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(v,_)=>{const E=(v&&v[Symbol.iterator]).call(v);let A;for(;(A=E.next())&&!A.done;){const P=A.value;_.call(v,P[0],P[1])}},matchAll=(v,_)=>{let x;const E=[];for(;(x=v.exec(_))!==null;)E.push(x);return E},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=v=>v.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(x,E,A){return E.toUpperCase()+A}),hasOwnProperty=(({hasOwnProperty:v})=>(_,x)=>v.call(_,x))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(v,_)=>{const x=Object.getOwnPropertyDescriptors(v),E={};forEach(x,(A,P)=>{let T;(T=_(A,P,v))!==!1&&(E[P]=T||A)}),Object.defineProperties(v,E)},freezeMethods=v=>{reduceDescriptors(v,(_,x)=>{if(isFunction(v)&&["arguments","caller","callee"].indexOf(x)!==-1)return!1;const E=v[x];if(isFunction(E)){if(_.enumerable=!1,"writable"in _){_.writable=!1;return}_.set||(_.set=()=>{throw Error("Can not rewrite read-only method '"+x+"'")})}})},toObjectSet=(v,_)=>{const x={},E=A=>{A.forEach(P=>{x[P]=!0})};return isArray(v)?E(v):E(String(v).split(_)),x},noop=()=>{},toFiniteNumber=(v,_)=>(v=+v,Number.isFinite(v)?v:_),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(v=16,_=ALPHABET.ALPHA_DIGIT)=>{let x="";const{length:E}=_;for(;v--;)x+=_[Math.random()*E|0];return x};function isSpecCompliantForm(v){return!!(v&&isFunction(v.append)&&v[Symbol.toStringTag]==="FormData"&&v[Symbol.iterator])}const toJSONObject=v=>{const _=new Array(10),x=(E,A)=>{if(isObject(E)){if(_.indexOf(E)>=0)return;if(!("toJSON"in E)){_[A]=E;const P=isArray(E)?[]:{};return forEach(E,(T,O)=>{const k=x(T,A+1);!isUndefined(k)&&(P[O]=k)}),_[A]=void 0,P}}return E};return x(v,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=v=>v&&(isObject(v)||isFunction(v))&&isFunction(v.then)&&isFunction(v.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(v,_,x,E,A){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=v,this.name="AxiosError",_&&(this.code=_),x&&(this.config=x),E&&(this.request=E),A&&(this.response=A)}utils$1.inherits(AxiosError,Error,{toJSON:function v(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(v=>{descriptors[v]={value:v}}),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError.from=(v,_,x,E,A,P)=>{const T=Object.create(prototype$1);return utils$1.toFlatObject(v,T,function(k){return k!==Error.prototype},O=>O!=="isAxiosError"),AxiosError.call(T,v.message,_,x,E,A),T.cause=v,T.name=v.name,P&&Object.assign(T,P),T};const httpAdapter=null;function isVisitable(v){return utils$1.isPlainObject(v)||utils$1.isArray(v)}function removeBrackets(v){return utils$1.endsWith(v,"[]")?v.slice(0,-2):v}function renderKey(v,_,x){return v?v.concat(_).map(function(A,P){return A=removeBrackets(A),!x&&P?"["+A+"]":A}).join(x?".":""):_}function isFlatArray(v){return utils$1.isArray(v)&&!v.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function v(_){return/^is[A-Z]/.test(_)});function toFormData(v,_,x){if(!utils$1.isObject(v))throw new TypeError("target must be an object");_=_||new FormData,x=utils$1.toFlatObject(x,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,X){return!utils$1.isUndefined(X[V])});const E=x.metaTokens,A=x.visitor||U,P=x.dots,T=x.indexes,k=(x.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(_);if(!utils$1.isFunction(A))throw new TypeError("visitor must be a function");function C(j){if(j===null)return"";if(utils$1.isDate(j))return j.toISOString();if(!k&&utils$1.isBlob(j))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(j)||utils$1.isTypedArray(j)?k&&typeof Blob=="function"?new Blob([j]):dist$4.Buffer.from(j):j}function U(j,V,X){let re=j;if(j&&!X&&typeof j=="object"){if(utils$1.endsWith(V,"{}"))V=E?V:V.slice(0,-2),j=JSON.stringify(j);else if(utils$1.isArray(j)&&isFlatArray(j)||(utils$1.isFileList(j)||utils$1.endsWith(V,"[]"))&&(re=utils$1.toArray(j)))return V=removeBrackets(V),re.forEach(function(fe,le){!(utils$1.isUndefined(fe)||fe===null)&&_.append(T===!0?renderKey([V],le,P):T===null?V:V+"[]",C(fe))}),!1}return isVisitable(j)?!0:(_.append(renderKey(X,V,P),C(j)),!1)}const N=[],H=Object.assign(predicates,{defaultVisitor:U,convertValue:C,isVisitable});function D(j,V){if(!utils$1.isUndefined(j)){if(N.indexOf(j)!==-1)throw Error("Circular reference detected in "+V.join("."));N.push(j),utils$1.forEach(j,function(re,ee){(!(utils$1.isUndefined(re)||re===null)&&A.call(_,re,utils$1.isString(ee)?ee.trim():ee,V,H))===!0&&D(re,V?V.concat(ee):[ee])}),N.pop()}}if(!utils$1.isObject(v))throw new TypeError("data must be an object");return D(v),_}function encode$1(v){const _={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(v).replace(/[!'()~]|%20|%00/g,function(E){return _[E]})}function AxiosURLSearchParams(v,_){this._pairs=[],v&&toFormData(v,this,_)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function v(_,x){this._pairs.push([_,x])},prototype.toString=function v(_){const x=_?function(E){return _.call(this,E,encode$1)}:encode$1;return this._pairs.map(function(A){return x(A[0])+"="+x(A[1])},"").join("&")};function encode(v){return encodeURIComponent(v).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(v,_,x){if(!_)return v;const E=x&&x.encode||encode,A=x&&x.serialize;let P;if(A?P=A(_,x):P=utils$1.isURLSearchParams(_)?_.toString():new AxiosURLSearchParams(_,x).toString(E),P){const T=v.indexOf("#");T!==-1&&(v=v.slice(0,T)),v+=(v.indexOf("?")===-1?"?":"&")+P}return v}class InterceptorManager{constructor(){this.handlers=[]}use(_,x,E){return this.handlers.push({fulfilled:_,rejected:x,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(_){this.handlers[_]&&(this.handlers[_]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_){utils$1.forEach(this.handlers,function(E){E!==null&&_(E)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(v=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(v)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(v,_){return toFormData(v,new platform.classes.URLSearchParams,Object.assign({visitor:function(x,E,A,P){return platform.isNode&&utils$1.isBuffer(x)?(this.append(E,x.toString("base64")),!1):P.defaultVisitor.apply(this,arguments)}},_))}function parsePropPath(v){return utils$1.matchAll(/\w+|\[(\w*)]/g,v).map(_=>_[0]==="[]"?"":_[1]||_[0])}function arrayToObject(v){const _={},x=Object.keys(v);let E;const A=x.length;let P;for(E=0;E<A;E++)P=x[E],_[P]=v[P];return _}function formDataToJSON(v){function _(x,E,A,P){let T=x[P++];const O=Number.isFinite(+T),k=P>=x.length;return T=!T&&utils$1.isArray(A)?A.length:T,k?(utils$1.hasOwnProp(A,T)?A[T]=[A[T],E]:A[T]=E,!O):((!A[T]||!utils$1.isObject(A[T]))&&(A[T]=[]),_(x,E,A[T],P)&&utils$1.isArray(A[T])&&(A[T]=arrayToObject(A[T])),!O)}if(utils$1.isFormData(v)&&utils$1.isFunction(v.entries)){const x={};return utils$1.forEachEntry(v,(E,A)=>{_(parsePropPath(E),A,x,0)}),x}return null}function stringifySafely(v,_,x){if(utils$1.isString(v))try{return(_||JSON.parse)(v),utils$1.trim(v)}catch(E){if(E.name!=="SyntaxError")throw E}return(x||JSON.stringify)(v)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function v(_,x){const E=x.getContentType()||"",A=E.indexOf("application/json")>-1,P=utils$1.isObject(_);if(P&&utils$1.isHTMLForm(_)&&(_=new FormData(_)),utils$1.isFormData(_))return A&&A?JSON.stringify(formDataToJSON(_)):_;if(utils$1.isArrayBuffer(_)||utils$1.isBuffer(_)||utils$1.isStream(_)||utils$1.isFile(_)||utils$1.isBlob(_))return _;if(utils$1.isArrayBufferView(_))return _.buffer;if(utils$1.isURLSearchParams(_))return x.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_.toString();let O;if(P){if(E.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_,this.formSerializer).toString();if((O=utils$1.isFileList(_))||E.indexOf("multipart/form-data")>-1){const k=this.env&&this.env.FormData;return toFormData(O?{"files[]":_}:_,k&&new k,this.formSerializer)}}return P||A?(x.setContentType("application/json",!1),stringifySafely(_)):_}],transformResponse:[function v(_){const x=this.transitional||defaults.transitional,E=x&&x.forcedJSONParsing,A=this.responseType==="json";if(_&&utils$1.isString(_)&&(E&&!this.responseType||A)){const T=!(x&&x.silentJSONParsing)&&A;try{return JSON.parse(_)}catch(O){if(T)throw O.name==="SyntaxError"?AxiosError.from(O,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):O}}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function v(_){return _>=200&&_<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],v=>{defaults.headers[v]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=v=>{const _={};let x,E,A;return v&&v.split(`
`).forEach(function(T){A=T.indexOf(":"),x=T.substring(0,A).trim().toLowerCase(),E=T.substring(A+1).trim(),!(!x||_[x]&&ignoreDuplicateOf[x])&&(x==="set-cookie"?_[x]?_[x].push(E):_[x]=[E]:_[x]=_[x]?_[x]+", "+E:E)}),_},$internals=Symbol("internals");function normalizeHeader(v){return v&&String(v).trim().toLowerCase()}function normalizeValue(v){return v===!1||v==null?v:utils$1.isArray(v)?v.map(normalizeValue):String(v)}function parseTokens(v){const _=Object.create(null),x=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=x.exec(v);)_[E[1]]=E[2];return _}const isValidHeaderName=v=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(v.trim());function matchHeaderValue(v,_,x,E,A){if(utils$1.isFunction(E))return E.call(this,_,x);if(A&&(_=x),!!utils$1.isString(_)){if(utils$1.isString(E))return _.indexOf(E)!==-1;if(utils$1.isRegExp(E))return E.test(_)}}function formatHeader(v){return v.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_,x,E)=>x.toUpperCase()+E)}function buildAccessors(v,_){const x=utils$1.toCamelCase(" "+_);["get","set","has"].forEach(E=>{Object.defineProperty(v,E+x,{value:function(A,P,T){return this[E].call(this,_,A,P,T)},configurable:!0})})}class AxiosHeaders{constructor(_){_&&this.set(_)}set(_,x,E){const A=this;function P(O,k,C){const U=normalizeHeader(k);if(!U)throw new Error("header name must be a non-empty string");const N=utils$1.findKey(A,U);(!N||A[N]===void 0||C===!0||C===void 0&&A[N]!==!1)&&(A[N||k]=normalizeValue(O))}const T=(O,k)=>utils$1.forEach(O,(C,U)=>P(C,U,k));return utils$1.isPlainObject(_)||_ instanceof this.constructor?T(_,x):utils$1.isString(_)&&(_=_.trim())&&!isValidHeaderName(_)?T(parseHeaders(_),x):_!=null&&P(x,_,E),this}get(_,x){if(_=normalizeHeader(_),_){const E=utils$1.findKey(this,_);if(E){const A=this[E];if(!x)return A;if(x===!0)return parseTokens(A);if(utils$1.isFunction(x))return x.call(this,A,E);if(utils$1.isRegExp(x))return x.exec(A);throw new TypeError("parser must be boolean|regexp|function")}}}has(_,x){if(_=normalizeHeader(_),_){const E=utils$1.findKey(this,_);return!!(E&&this[E]!==void 0&&(!x||matchHeaderValue(this,this[E],E,x)))}return!1}delete(_,x){const E=this;let A=!1;function P(T){if(T=normalizeHeader(T),T){const O=utils$1.findKey(E,T);O&&(!x||matchHeaderValue(E,E[O],O,x))&&(delete E[O],A=!0)}}return utils$1.isArray(_)?_.forEach(P):P(_),A}clear(_){const x=Object.keys(this);let E=x.length,A=!1;for(;E--;){const P=x[E];(!_||matchHeaderValue(this,this[P],P,_,!0))&&(delete this[P],A=!0)}return A}normalize(_){const x=this,E={};return utils$1.forEach(this,(A,P)=>{const T=utils$1.findKey(E,P);if(T){x[T]=normalizeValue(A),delete x[P];return}const O=_?formatHeader(P):String(P).trim();O!==P&&delete x[P],x[O]=normalizeValue(A),E[O]=!0}),this}concat(..._){return this.constructor.concat(this,..._)}toJSON(_){const x=Object.create(null);return utils$1.forEach(this,(E,A)=>{E!=null&&E!==!1&&(x[A]=_&&utils$1.isArray(E)?E.join(", "):E)}),x}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_,x])=>_+": "+x).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_){return _ instanceof this?_:new this(_)}static concat(_,...x){const E=new this(_);return x.forEach(A=>E.set(A)),E}static accessor(_){const E=(this[$internals]=this[$internals]={accessors:{}}).accessors,A=this.prototype;function P(T){const O=normalizeHeader(T);E[O]||(buildAccessors(A,T),E[O]=!0)}return utils$1.isArray(_)?_.forEach(P):P(_),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:v},_)=>{let x=_[0].toUpperCase()+_.slice(1);return{get:()=>v,set(E){this[x]=E}}}),utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(v,_){const x=this||defaults$1,E=_||x,A=AxiosHeaders$1.from(E.headers);let P=E.data;return utils$1.forEach(v,function(O){P=O.call(x,P,A.normalize(),_?_.status:void 0)}),A.normalize(),P}function isCancel(v){return!!(v&&v.__CANCEL__)}function CanceledError(v,_,x){AxiosError.call(this,v??"canceled",AxiosError.ERR_CANCELED,_,x),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(v,_,x){const E=x.config.validateStatus;!x.status||!E||E(x.status)?v(x):_(new AxiosError("Request failed with status code "+x.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(x.status/100)-4],x.config,x.request,x))}const cookies=platform.hasStandardBrowserEnv?{write(v,_,x,E,A,P){const T=[v+"="+encodeURIComponent(_)];utils$1.isNumber(x)&&T.push("expires="+new Date(x).toGMTString()),utils$1.isString(E)&&T.push("path="+E),utils$1.isString(A)&&T.push("domain="+A),P===!0&&T.push("secure"),document.cookie=T.join("; ")},read(v){const _=document.cookie.match(new RegExp("(^|;\\s*)("+v+")=([^;]*)"));return _?decodeURIComponent(_[3]):null},remove(v){this.write(v,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(v){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(v)}function combineURLs(v,_){return _?v.replace(/\/+$/,"")+"/"+_.replace(/^\/+/,""):v}function buildFullPath(v,_){return v&&!isAbsoluteURL(_)?combineURLs(v,_):_}const isURLSameOrigin=platform.hasStandardBrowserEnv?function v(){const _=/(msie|trident)/i.test(navigator.userAgent),x=document.createElement("a");let E;function A(P){let T=P;return _&&(x.setAttribute("href",T),T=x.href),x.setAttribute("href",T),{href:x.href,protocol:x.protocol?x.protocol.replace(/:$/,""):"",host:x.host,search:x.search?x.search.replace(/^\?/,""):"",hash:x.hash?x.hash.replace(/^#/,""):"",hostname:x.hostname,port:x.port,pathname:x.pathname.charAt(0)==="/"?x.pathname:"/"+x.pathname}}return E=A(window.location.href),function(T){const O=utils$1.isString(T)?A(T):T;return O.protocol===E.protocol&&O.host===E.host}}():function v(){return function(){return!0}}();function parseProtocol(v){const _=/^([-+\w]{1,25})(:?\/\/|:)/.exec(v);return _&&_[1]||""}function speedometer(v,_){v=v||10;const x=new Array(v),E=new Array(v);let A=0,P=0,T;return _=_!==void 0?_:1e3,function(k){const C=Date.now(),U=E[P];T||(T=C),x[A]=k,E[A]=C;let N=P,H=0;for(;N!==A;)H+=x[N++],N=N%v;if(A=(A+1)%v,A===P&&(P=(P+1)%v),C-T<_)return;const D=U&&C-U;return D?Math.round(H*1e3/D):void 0}}function progressEventReducer(v,_){let x=0;const E=speedometer(50,250);return A=>{const P=A.loaded,T=A.lengthComputable?A.total:void 0,O=P-x,k=E(O),C=P<=T;x=P;const U={loaded:P,total:T,progress:T?P/T:void 0,bytes:O,rate:k||void 0,estimated:k&&T&&C?(T-P)/k:void 0,event:A};U[_?"download":"upload"]=!0,v(U)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(v){return new Promise(function(x,E){let A=v.data;const P=AxiosHeaders$1.from(v.headers).normalize();let{responseType:T,withXSRFToken:O}=v,k;function C(){v.cancelToken&&v.cancelToken.unsubscribe(k),v.signal&&v.signal.removeEventListener("abort",k)}let U;if(utils$1.isFormData(A)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)P.setContentType(!1);else if((U=P.getContentType())!==!1){const[V,...X]=U?U.split(";").map(re=>re.trim()).filter(Boolean):[];P.setContentType([V||"multipart/form-data",...X].join("; "))}}let N=new XMLHttpRequest;if(v.auth){const V=v.auth.username||"",X=v.auth.password?unescape(encodeURIComponent(v.auth.password)):"";P.set("Authorization","Basic "+btoa(V+":"+X))}const H=buildFullPath(v.baseURL,v.url);N.open(v.method.toUpperCase(),buildURL(H,v.params,v.paramsSerializer),!0),N.timeout=v.timeout;function D(){if(!N)return;const V=AxiosHeaders$1.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),re={data:!T||T==="text"||T==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:V,config:v,request:N};settle(function(fe){x(fe),C()},function(fe){E(fe),C()},re),N=null}if("onloadend"in N?N.onloadend=D:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(D)},N.onabort=function(){N&&(E(new AxiosError("Request aborted",AxiosError.ECONNABORTED,v,N)),N=null)},N.onerror=function(){E(new AxiosError("Network Error",AxiosError.ERR_NETWORK,v,N)),N=null},N.ontimeout=function(){let X=v.timeout?"timeout of "+v.timeout+"ms exceeded":"timeout exceeded";const re=v.transitional||transitionalDefaults;v.timeoutErrorMessage&&(X=v.timeoutErrorMessage),E(new AxiosError(X,re.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,v,N)),N=null},platform.hasStandardBrowserEnv&&(O&&utils$1.isFunction(O)&&(O=O(v)),O||O!==!1&&isURLSameOrigin(H))){const V=v.xsrfHeaderName&&v.xsrfCookieName&&cookies.read(v.xsrfCookieName);V&&P.set(v.xsrfHeaderName,V)}A===void 0&&P.setContentType(null),"setRequestHeader"in N&&utils$1.forEach(P.toJSON(),function(X,re){N.setRequestHeader(re,X)}),utils$1.isUndefined(v.withCredentials)||(N.withCredentials=!!v.withCredentials),T&&T!=="json"&&(N.responseType=v.responseType),typeof v.onDownloadProgress=="function"&&N.addEventListener("progress",progressEventReducer(v.onDownloadProgress,!0)),typeof v.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",progressEventReducer(v.onUploadProgress)),(v.cancelToken||v.signal)&&(k=V=>{N&&(E(!V||V.type?new CanceledError(null,v,N):V),N.abort(),N=null)},v.cancelToken&&v.cancelToken.subscribe(k),v.signal&&(v.signal.aborted?k():v.signal.addEventListener("abort",k)));const j=parseProtocol(H);if(j&&platform.protocols.indexOf(j)===-1){E(new AxiosError("Unsupported protocol "+j+":",AxiosError.ERR_BAD_REQUEST,v));return}N.send(A||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(v,_)=>{if(v){try{Object.defineProperty(v,"name",{value:_})}catch{}Object.defineProperty(v,"adapterName",{value:_})}});const renderReason=v=>`- ${v}`,isResolvedHandle=v=>utils$1.isFunction(v)||v===null||v===!1,adapters={getAdapter:v=>{v=utils$1.isArray(v)?v:[v];const{length:_}=v;let x,E;const A={};for(let P=0;P<_;P++){x=v[P];let T;if(E=x,!isResolvedHandle(x)&&(E=knownAdapters[(T=String(x)).toLowerCase()],E===void 0))throw new AxiosError(`Unknown adapter '${T}'`);if(E)break;A[T||"#"+P]=E}if(!E){const P=Object.entries(A).map(([O,k])=>`adapter ${O} `+(k===!1?"is not supported by the environment":"is not available in the build"));let T=_?P.length>1?`since :
`+P.map(renderReason).join(`
`):" "+renderReason(P[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+T,"ERR_NOT_SUPPORT")}return E},adapters:knownAdapters};function throwIfCancellationRequested(v){if(v.cancelToken&&v.cancelToken.throwIfRequested(),v.signal&&v.signal.aborted)throw new CanceledError(null,v)}function dispatchRequest(v){return throwIfCancellationRequested(v),v.headers=AxiosHeaders$1.from(v.headers),v.data=transformData.call(v,v.transformRequest),["post","put","patch"].indexOf(v.method)!==-1&&v.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(v.adapter||defaults$1.adapter)(v).then(function(E){return throwIfCancellationRequested(v),E.data=transformData.call(v,v.transformResponse,E),E.headers=AxiosHeaders$1.from(E.headers),E},function(E){return isCancel(E)||(throwIfCancellationRequested(v),E&&E.response&&(E.response.data=transformData.call(v,v.transformResponse,E.response),E.response.headers=AxiosHeaders$1.from(E.response.headers))),Promise.reject(E)})}const headersToObject=v=>v instanceof AxiosHeaders$1?v.toJSON():v;function mergeConfig(v,_){_=_||{};const x={};function E(C,U,N){return utils$1.isPlainObject(C)&&utils$1.isPlainObject(U)?utils$1.merge.call({caseless:N},C,U):utils$1.isPlainObject(U)?utils$1.merge({},U):utils$1.isArray(U)?U.slice():U}function A(C,U,N){if(utils$1.isUndefined(U)){if(!utils$1.isUndefined(C))return E(void 0,C,N)}else return E(C,U,N)}function P(C,U){if(!utils$1.isUndefined(U))return E(void 0,U)}function T(C,U){if(utils$1.isUndefined(U)){if(!utils$1.isUndefined(C))return E(void 0,C)}else return E(void 0,U)}function O(C,U,N){if(N in _)return E(C,U);if(N in v)return E(void 0,C)}const k={url:P,method:P,data:P,baseURL:T,transformRequest:T,transformResponse:T,paramsSerializer:T,timeout:T,timeoutMessage:T,withCredentials:T,withXSRFToken:T,adapter:T,responseType:T,xsrfCookieName:T,xsrfHeaderName:T,onUploadProgress:T,onDownloadProgress:T,decompress:T,maxContentLength:T,maxBodyLength:T,beforeRedirect:T,transport:T,httpAgent:T,httpsAgent:T,cancelToken:T,socketPath:T,responseEncoding:T,validateStatus:O,headers:(C,U)=>A(headersToObject(C),headersToObject(U),!0)};return utils$1.forEach(Object.keys(Object.assign({},v,_)),function(U){const N=k[U]||A,H=N(v[U],_[U],U);utils$1.isUndefined(H)&&N!==O||(x[U]=H)}),x}const VERSION="1.6.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((v,_)=>{validators$1[v]=function(E){return typeof E===v||"a"+(_<1?"n ":" ")+v}});const deprecatedWarnings={};validators$1.transitional=function v(_,x,E){function A(P,T){return"[Axios v"+VERSION+"] Transitional option '"+P+"'"+T+(E?". "+E:"")}return(P,T,O)=>{if(_===!1)throw new AxiosError(A(T," has been removed"+(x?" in "+x:"")),AxiosError.ERR_DEPRECATED);return x&&!deprecatedWarnings[T]&&(deprecatedWarnings[T]=!0,console.warn(A(T," has been deprecated since v"+x+" and will be removed in the near future"))),_?_(P,T,O):!0}};function assertOptions(v,_,x){if(typeof v!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const E=Object.keys(v);let A=E.length;for(;A-- >0;){const P=E[A],T=_[P];if(T){const O=v[P],k=O===void 0||T(O,P,v);if(k!==!0)throw new AxiosError("option "+P+" must be "+k,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(x!==!0)throw new AxiosError("Unknown option "+P,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_){this.defaults=_,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(_,x){typeof _=="string"?(x=x||{},x.url=_):x=_||{},x=mergeConfig(this.defaults,x);const{transitional:E,paramsSerializer:A,headers:P}=x;E!==void 0&&validator.assertOptions(E,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),A!=null&&(utils$1.isFunction(A)?x.paramsSerializer={serialize:A}:validator.assertOptions(A,{encode:validators.function,serialize:validators.function},!0)),x.method=(x.method||this.defaults.method||"get").toLowerCase();let T=P&&utils$1.merge(P.common,P[x.method]);P&&utils$1.forEach(["delete","get","head","post","put","patch","common"],j=>{delete P[j]}),x.headers=AxiosHeaders$1.concat(T,P);const O=[];let k=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(x)===!1||(k=k&&V.synchronous,O.unshift(V.fulfilled,V.rejected))});const C=[];this.interceptors.response.forEach(function(V){C.push(V.fulfilled,V.rejected)});let U,N=0,H;if(!k){const j=[dispatchRequest.bind(this),void 0];for(j.unshift.apply(j,O),j.push.apply(j,C),H=j.length,U=Promise.resolve(x);N<H;)U=U.then(j[N++],j[N++]);return U}H=O.length;let D=x;for(N=0;N<H;){const j=O[N++],V=O[N++];try{D=j(D)}catch(X){V.call(this,X);break}}try{U=dispatchRequest.call(this,D)}catch(j){return Promise.reject(j)}for(N=0,H=C.length;N<H;)U=U.then(C[N++],C[N++]);return U}getUri(_){_=mergeConfig(this.defaults,_);const x=buildFullPath(_.baseURL,_.url);return buildURL(x,_.params,_.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function v(_){Axios.prototype[_]=function(x,E){return this.request(mergeConfig(E||{},{method:_,url:x,data:(E||{}).data}))}}),utils$1.forEach(["post","put","patch"],function v(_){function x(E){return function(P,T,O){return this.request(mergeConfig(O||{},{method:_,headers:E?{"Content-Type":"multipart/form-data"}:{},url:P,data:T}))}}Axios.prototype[_]=x(),Axios.prototype[_+"Form"]=x(!0)});const Axios$1=Axios;class CancelToken{constructor(_){if(typeof _!="function")throw new TypeError("executor must be a function.");let x;this.promise=new Promise(function(P){x=P});const E=this;this.promise.then(A=>{if(!E._listeners)return;let P=E._listeners.length;for(;P-- >0;)E._listeners[P](A);E._listeners=null}),this.promise.then=A=>{let P;const T=new Promise(O=>{E.subscribe(O),P=O}).then(A);return T.cancel=function(){E.unsubscribe(P)},T},_(function(P,T,O){E.reason||(E.reason=new CanceledError(P,T,O),x(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_){if(this.reason){_(this.reason);return}this._listeners?this._listeners.push(_):this._listeners=[_]}unsubscribe(_){if(!this._listeners)return;const x=this._listeners.indexOf(_);x!==-1&&this._listeners.splice(x,1)}static source(){let _;return{token:new CancelToken(function(A){_=A}),cancel:_}}}const CancelToken$1=CancelToken;function spread(v){return function(x){return v.apply(null,x)}}function isAxiosError(v){return utils$1.isObject(v)&&v.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([v,_])=>{HttpStatusCode[_]=v});const HttpStatusCode$1=HttpStatusCode;function createInstance(v){const _=new Axios$1(v),x=bind(Axios$1.prototype.request,_);return utils$1.extend(x,Axios$1.prototype,_,{allOwnKeys:!0}),utils$1.extend(x,_,null,{allOwnKeys:!0}),x.create=function(A){return createInstance(mergeConfig(v,A))},x}const axios=createInstance(defaults$1);axios.Axios=Axios$1,axios.CanceledError=CanceledError,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel,axios.VERSION=VERSION,axios.toFormData=toFormData,axios.AxiosError=AxiosError,axios.Cancel=axios.CanceledError,axios.all=function v(_){return Promise.all(_)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=v=>formDataToJSON(utils$1.isHTMLForm(v)?new FormData(v):v),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;const axios$1=axios,API_STATUS={FAILED:"0",SUCCESS:"1"};class OpenApiService{constructor(_,x="https://api.unisat.io/wallet-v4"){this.host=x,this.deviceId=randomstring$1.generate(12),this.clientAddress=_,this.setHttpClient()}setHttpClient(){this.httpClient=axios$1.create({baseURL:this.host,timeout:8e4,headers:{"X-Client":"UniSat Wallet","x-address":this.clientAddress,"x-udid":this.deviceId}}),this.httpClient.interceptors.response.use(_=>_.data)}setClientAddress(_){this.clientAddress=_,this.setHttpClient()}setHost(_){this.host=_,this.setHttpClient()}async getAddressBalance(_){const x=await this.httpClient.get("/address/balance",{params:{address:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getMultiAddressAssets(_){const x=await this.httpClient.get("/address/multi-assets",{params:{addresses:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async findGroupAssets(_){const x=await this.httpClient.post("/address/find-group-assets",{data:{groups:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getAddressUtxo(_=this.clientAddress){const x=await this.httpClient.get("/address/btc-utxo",{params:{address:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getInscriptionUtxo(_){const x=await this.httpClient.get("/inscription/utxo",{params:{inscriptionId:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getInscriptionUtxoDetail(_){const x=await this.httpClient.get("/inscription/utxo-detail",{params:{inscriptionId:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getInscriptionUtxos(_){const x=await this.httpClient.post("/inscription/utxos",{inscriptionIds:_});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getAddressInscriptions(_,x,E){const A=await this.httpClient.get("/address/inscriptions",{params:{address:_,cursor:x,size:E}});if(A.status==API_STATUS.FAILED)throw new Error(A.message);return A.result}async getAddressRecentHistory(_){const x=await this.httpClient.get("/address/recent-history",{params:{address:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getInscriptionSummary(){const _=await this.httpClient.get("/default/inscription-summary");if(_.status==API_STATUS.FAILED)throw new Error(_.message);return _.result}async getAppSummary(){const _=await this.httpClient.get("/default/app-summary-v2");if(_.status==API_STATUS.FAILED)throw new Error(_.message);return _.result}async pushTx(_){const x=await this.httpClient.post("/tx/broadcast",{rawtx:_});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getFeeSummary(){const _=await this.httpClient.get("/default/fee-summary");if(_.status==API_STATUS.FAILED)throw new Error(_.message);return _.result}async getDomainInfo(_){const x=await this.httpClient.get("/address/search",{params:{domain:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async inscribeBRC20Transfer(_,x,E,A){const P=await this.httpClient.post("/brc20/inscribe-transfer",{address:_,tick:x,amount:E,feeRate:A});if(P.status==API_STATUS.FAILED)throw new Error(P.message);return P.result}async getInscribeResult(_){const x=await this.httpClient.get("/brc20/order-result",{params:{orderId:_}});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async getAddressTokenBalances(_,x,E){const A=await this.httpClient.get("/brc20/tokens",{params:{address:_,cursor:x,size:E}});if(A.status==API_STATUS.FAILED)throw new Error(A.message);return A.result}async getAddressTokenSummary(_,x){const E=await this.httpClient.get("/brc20/token-summary",{params:{address:_,ticker:encodeURIComponent(x)}});if(E.status==API_STATUS.FAILED)throw new Error(E.message);return E.result}async getTokenTransferableList(_,x,E,A){const P=await this.httpClient.get("/brc20/transferable-list",{params:{address:_,ticker:encodeURIComponent(x),cursor:E,size:A}});if(P.status==API_STATUS.FAILED)throw new Error(P.message);return P.result}async decodePsbt(_){const x=await this.httpClient.post("/tx/decode",{psbtHex:_});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async createMoonpayUrl(_){const x=await this.httpClient.post("/moonpay/create",{address:_});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}async checkWebsite(_){const x=await this.httpClient.post("/default/check-website",{website:_});if(x.status==API_STATUS.FAILED)throw new Error(x.message);return x.result}}function formatPsbtHex(v){let _="";try{/^[0-9a-fA-F]+$/.test(v)?(src$1.Psbt.fromHex(v),_=v):_=src$1.Psbt.fromBase64(v).toHex()}catch{throw new Error("invalid psbt")}return _}function amountToSatoshis(v){return new BigNumber(v).multipliedBy(1e8).toNumber()}function psbtHexToRawtx(v){const _=formatPsbtHex(v);return src$1.Psbt.fromHex(_).extractTransaction().toHex()}const TxType={SIGN_TX:0,SEND_BITCOIN:1,SEND_INSCRIPTION:2},OPENAPI_URL_MAINNET="https://api.unisat.io/wallet-v4",OPENAPI_URL_TESTNET="https://api-testnet.unisat.io/wallet-v4";class UnisatProvider extends eventsExports.EventEmitter{constructor({maxListeners:x=100}={}){super();Et(this,"_selectedAddress",null);Et(this,"_network","livenet");Et(this,"_isConnected",!1);Et(this,"_initialized",!1);Et(this,"_isUnlocked",!1);Et(this,"_openApiService",null);Et(this,"_addressType",0);Et(this,"_state",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1});Et(this,"_pushEventHandlers");this.setMaxListeners(x),this.initialize()}initialize(){initBridge(),this._initialized=!0,this._state.initialized=!0,this._pushEventHandlers=new PushEventHandlers(this),this.Wallet=Wallet}async requestAccounts(){return callApp("unisat_request",{method:"requestAccounts"}).then(async x=>((x==null?void 0:x.length)>0&&(this._pushEventHandlers.connect({}),this._pushEventHandlers.unlock({}),this._setAccounts(x)),x))}async getNetwork(){return this._network}_setNetWork(x){var E,A;if(x&&x!==this._network){let P=x==="testnet"?OPENAPI_URL_TESTNET:OPENAPI_URL_MAINNET;(A=(E=this==null?void 0:this._openApiService)==null?void 0:E.setHost)==null||A.call(E,P)}this._pushEventHandlers.networkChanged({network:x})}switchNetwork(x){return callApp("unisat_request",{method:"switchNetwork",params:{network:x}}).then(async E=>(E&&this._setNetWork(x),E))}async getAccounts(){return this._state.accounts||[]}_setAccounts(x){this._pushEventHandlers.accountsChanged(x),this._selectedAddress&&(this._openApiService?this._openApiService.setClientAddress(this._selectedAddress):this._openApiService=new OpenApiService(this._selectedAddress))}getPublicKey(){return callApp("unisat_request",{method:"getPublicKey"})}getBalance(){return!this._selectedAddress||!this._openApiService?Promise.resolve({amount:"0"}):this._openApiService.getAddressBalance(this._selectedAddress).then(async x=>({confirmed:amountToSatoshis(x.confirm_amount),unconfirmed:amountToSatoshis(x.pending_amount),total:amountToSatoshis(x.amount)}))}getInscriptions(x=0,E=20){return!this._selectedAddress||!this._openApiService?Promise.resolve({list:[],total:0}):this._openApiService.getAddressInscriptions(this._selectedAddress,x,E)}async signMessage(x,E="ecdsa"){return callApp("unisat_request",{method:"signMessage",params:{text:x,type:E}})}sendBitcoin(x,E,A){return callApp("unisat_request",{method:"sendBitcoin",params:{toAddress:x,satoshis:E,feeRate:A==null?void 0:A.feeRate,type:TxType.SEND_BITCOIN}})}sendInscription(x,E,A){return callApp("unisat_request",{method:"sendInscription",params:{toAddress:x,inscriptionId:E,feeRate:A==null?void 0:A.feeRate,type:TxType.SEND_INSCRIPTION}})}async pushTx(x){return callApp("unisat_request",{method:"pushTx",params:{rawtx:x}})}async signPsbt(x,E){return callApp("unisat_request",{method:"signPsbt",params:{psbtHex:x,type:TxType.SIGN_TX,options:E}})}signPsbts(x,E){return callApp("unisat_request",{method:"multiSignPsbt",params:{psbtHexs:x,options:E}})}pushPsbt(x){const E=psbtHexToRawtx(x);return this.pushTx(E)}inscribeTransfer(x,E){return callApp("unisat_request",{method:"inscribeTransfer",params:{ticker:x,amount:E}})}}const main=new UnisatProvider;return main});
